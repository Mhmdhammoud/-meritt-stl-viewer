{"version":3,"sources":["webpack:///react-bundle.js","webpack:///webpack/bootstrap abddeb95b7b2e4d52538","webpack:///./react/app.js","webpack:///./~/react/index.js","webpack:///./~/@emotion/serialize/dist/serialize.browser.cjs.js","webpack:///./~/@babel/runtime/helpers/inheritsLoose.js","webpack:///./~/@emotion/cache/dist/cache.browser.cjs.js","webpack:///./~/@emotion/css/dist/css.browser.cjs.js","webpack:///./~/@emotion/sheet/dist/sheet.browser.cjs.js","webpack:///./~/@emotion/utils/dist/utils.browser.cjs.js","webpack:///./~/object-assign/index.js","webpack:///./~/react-dom/index.js","webpack:///./~/@babel/runtime/helpers/extends.js","webpack:///./~/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///./~/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./~/@emotion/core/dist/core.browser.cjs.js","webpack:///./~/@emotion/core/dist/emotion-element-3a21e59a.browser.cjs.js","webpack:///./~/@emotion/hash/dist/hash.browser.cjs.js","webpack:///./~/@emotion/memoize/dist/memoize.browser.cjs.js","webpack:///./~/@emotion/stylis/dist/stylis.browser.cjs.js","webpack:///./~/@emotion/unitless/dist/unitless.browser.cjs.js","webpack:///./~/@emotion/weak-memoize/dist/weak-memoize.browser.cjs.js","webpack:///./react/containers/App.js","webpack:///./src/App.js","webpack:///./src/Paint.js","webpack:///./src/STLViewer.js","webpack:///./src/Three.js","webpack:///./~/prop-types/factoryWithThrowingShims.js","webpack:///./~/prop-types/index.js","webpack:///./~/prop-types/lib/ReactPropTypesSecret.js","webpack:///./~/react-dom/cjs/react-dom.production.min.js","webpack:///./~/react-input-slider/dist/index.cjs.js","webpack:///./~/react/cjs/react.production.min.js","webpack:///./~/scheduler/cjs/scheduler.production.min.js","webpack:///./~/scheduler/index.js","webpack:///./~/three-orbit-controls/index.js","webpack:///./~/three/three.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_react","_react2","_reactDom","_reactDom2","_App","_App2","ReactDOM","render","createElement","document","getElementById","_interopDefault","ex","handleInterpolation","mergedProps","registered","interpolation","couldBeSelectorInterpolation","undefined","__emotion_styles","anim","cursor","name","styles","next","createStringFromObject","previousCursor","result","cached","string","Array","isArray","i","length","_key","value","isProcessableValue","processStyleName","processStyleValue","interpolated","_i","Object","defineProperty","hashString","unitless","memoize","hyphenateRegex","animationRegex","isCustomProperty","property","charCodeAt","styleName","replace","toLowerCase","key","match","p1","p2","labelPattern","serializeStyles","args","stringMode","strings","raw","lastIndex","identifierName","exec","_inheritsLoose","subClass","superClass","prototype","create","constructor","setPrototypeOf","toSheet","block","Sheet","current","insert","sheet","Stylis","delimiter","needle","ruleSheet","context","content","selectors","parents","line","column","ns","depth","at","split","forEach","createCache","options","stylisOptions","prefix","container","stylis","inserted","head","nodes","querySelectorAll","node","attrib","getAttribute","parentNode","appendChild","_insert","use","stylisPlugins","selector","serialized","shouldCache","cache","StyleSheet","nonce","speedy","css","_len","arguments","serialize","sheetForTag","tag","styleSheets","ownerNode","createStyleElement","setAttribute","createTextNode","this","isSpeedy","tags","ctr","before","_proto","rule","_tag","nextSibling","insertBefore","push","isImportRule","insertRule","cssRules","e","flush","removeChild","getRegisteredStyles","registeredStyles","classNames","rawClassName","className","isBrowser","insertStyles","isStringTag","compat","toObject","val","TypeError","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","map","n","join","test3","letter","keys","err","getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","target","source","from","symbols","to","s","checkDCE","__REACT_DEVTOOLS_GLOBAL_HOOK__","console","error","_extends","bind","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","indexOf","_setPrototypeOf","o","__proto__","merge","utils","React","emotionElement","_inheritsLoose__default","css__default","jsx","type","props","argsLength","createElementArgArray","Emotion","createEmotionProps","Global","withEmotionCache","ThemeContext","Consumer","theme","InnerGlobal","_React$Component","updater","componentDidMount","querySelector","componentDidUpdate","prevProps","element","nextElementSibling","componentWillUnmount","Component","keyframes","insertable","toString","classnames","len","cls","arg","toAdd","k","Noop","ClassNames","hasRendered","cx","_len2","_key2","ele","children","possiblyStyleElement","Fragment","CacheProvider","enumerable","get","createCache__default","EmotionCacheContext","createContext","HTMLElement","Provider","func","ref","forwardRef","typePropName","newProps","cssProp","murmur2","str","h","fn","stylis_min","W","M","d","a","q","g","y","C","b","v","x","K","u","l","r","I","t","B","J","f","F","G","N","trim","charAt","substring","ca","O","A","X","H","D","z","da","ea","fa","w","L","P","Y","E","ha","Q","ia","Z","ja","ka","test","aa","ba","la","ma","R","na","oa","S","T","U","V","set","unitlessKeys","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","fontWeight","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","WebkitLineClamp","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","weakMemoize","WeakMap","has","ret","App","models","color","range","width","height","remove","handleRemove","item","log","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","Symbol","iterator","done","return","_STLViewer","_STLViewer2","_reactInputSlider","_reactInputSlider2","_props$rotate","rotate","_props$range","_props$remove","backgroundColor","_props$handleRemove","_useState","useState","_useState2","sliders","setSliders","useEffect","_","index","style","margin","display","alignItems","justifyContent","checked","onClick","newSliders","axis","xstep","xmin","xmax","onChange","_ref","parseFloat","marginLeft","role","src","modelColor","_classCallCheck","instance","Constructor","_createClass","defineProperties","descriptor","configurable","writable","protoProps","staticProps","_Three","_Three2","OrbitControls","THREE","DIRECTIONAL_LIGHT","Paint","loader","STLLoader","scene","Scene","renderer","WebGLRenderer","antialias","reqNumber","light","_this","component","orbitControls","cameraX","cameraY","cameraZ","rotationSpeeds","lights","lightColor","model","animationRequestId","cancelAnimationFrame","distance","addSTLToScene","meshMaterial","filter","material","updateMatrix","directionalLight","DirectionalLight","position","normalize","add","url","reqId","_this2","Promise","resolve","crossOrigin","loadFromUrl","geometry","file","_this3","loadFromFile","_this4","hasMultipleLights","reduce","acc","addLight","loadSTLFromUrl","then","computeFaceNormals","computeVertexNormals","MeshLambertMaterial","transparent","side","DoubleSide","visible","hasColors","MeshPhongMaterial","alpha","vertexColors","VertexColors","mesh","Mesh","computeBoundingBox","computeBoundingSphere","xDims","boundingBox","max","yDims","zDims","rotation","addCamera","copy","camera","addInteractionControls","addToReactComponent","animate","find","PerspectiveCamera","Math","lookAt","physicallyCorrectLights","setSize","setClearColor","controls","dispose","findDOMNode","enableKeys","addEventListener","orbitRender","replaceChild","domElement","firstChild","requestAnimationFrame","update","getObjectByName","directionalLightObj","forceContextLoss","_possibleConstructorReturn","self","ReferenceError","_inherits","_propTypes","_propTypes2","_Paint","_Paint2","STLViewer","_Component","getPrototypeOf","paint","init","nextProps","nextState","JSON","stringify","clean","_props","overflow","propTypes","PropTypes","number","bool","array","arrayOf","oneOfType","instanceOf","ArrayBuffer","isRequired","defaultProps","manager","DefaultLoadingManager","onLoad","onProgress","onError","scope","XHRLoader","setCrossOrigin","setResponseType","load","text","parse","buffer","data","isBinary","expect","face_size","n_faces","reader","DataView","binData","getUint32","byteLength","fileLength","getUint8","ensureBinary","parseBinary","parseASCII","ensureString","colors","defaultR","defaultG","defaultB","faces","Float32Array","dataOffset","faceLength","offset","BufferGeometry","vertices","normals","face","start","normalX","getFloat32","normalY","normalZ","packedColor","getUint16","vertexstart","addAttribute","BufferAttribute","normal","patternFace","patternNormal","patternVertex","Geometry","Vector3","Face3","buf","array_buffer","Uint8Array","byteOffset","_isString","_getCharCodes","end","codes","_getBytes","littleEndian","_littleEndian","Error","isString","slice","reverse","getFloat64","sign","exponent","mantissa","pow","NaN","Infinity","getInt32","getInt16","getInt8","emptyFunction","emptyFunctionWithReset","ReactPropTypesSecret","resetWarningCache","shim","propName","componentName","location","propFullName","secret","getShim","ReactPropTypes","bigint","object","symbol","any","elementType","objectOf","oneOf","shape","exact","checkPropTypes","encodeURIComponent","acceptsBooleans","isNaN","attributeName","attributeNamespace","mustUseProperty","propertyName","sanitizeURL","removeEmptyString","pa","toUpperCase","qa","removeAttribute","setAttributeNS","La","Ka","Na","Ma","stack","Pa","Oa","prepareStackTrace","Reflect","construct","displayName","Qa","_render","Ra","ua","ta","xa","wa","Ba","Ca","$$typeof","za","ya","_context","Aa","Da","Fa","Ea","_payload","_init","Sa","Ta","nodeName","Ua","getOwnPropertyDescriptor","getValue","setValue","stopTracking","_valueTracker","Va","Wa","Xa","activeElement","body","Ya","defaultChecked","defaultValue","_wrapperState","initialChecked","Za","initialValue","controlled","$a","ab","bb","cb","ownerDocument","db","Children","eb","fb","selected","defaultSelected","disabled","gb","dangerouslySetInnerHTML","hb","ib","jb","textContent","lb","mb","pb","lastChild","nodeType","nodeValue","sb","qb","tb","setProperty","vb","ub","wb","is","xb","srcElement","window","correspondingUseElement","Bb","Cb","yb","stateNode","Db","Eb","zb","Ab","Fb","Gb","Hb","Ib","Mb","Nb","Lb","Jb","Ob","Rb","Xb","Sb","Tb","Wb","Yb","Ub","Vb","Zb","alternate","flags","$b","memoizedState","dehydrated","ac","bc","child","sibling","cc","dc","rc","blockedOn","domEventName","eventSystemFlags","nativeEvent","targetContainers","sc","kc","lc","mc","nc","delete","pointerId","oc","tc","fc","uc","vc","wc","hc","lanePriority","unstable_runWithPriority","priority","gc","hydrate","containerInfo","xc","yc","shift","zc","Ac","ic","jc","ec","Bc","unstable_scheduleCallback","unstable_NormalPriority","Cc","pc","Dc","Hc","Fc","Ec","Gc","Pc","Nc","Mc","Rc","Sc","Tc","Uc","pendingLanes","expiredLanes","suspendedLanes","pingedLanes","Vc","entangledLanes","entanglements","Wc","Xc","Yc","Zc","$c","eventTimes","ad","bd","cd","gd","Kb","hd","ed","dd","fd","qc","jd","nd","md","ld","kd","od","keyCode","charCode","pd","qd","rd","_reactName","_targetInst","currentTarget","isDefaultPrevented","defaultPrevented","returnValue","isPropagationStopped","preventDefault","stopPropagation","cancelBubble","persist","isPersistent","Pd","getModifierState","Od","zd","ge","$d","he","detail","je","which","fe","ee","ke","ie","ae","ctrlKey","altKey","metaKey","char","de","locale","me","le","ne","oe","td","event","listeners","re","se","te","ue","ve","Ae","pe","detachEvent","Be","qe","Ce","attachEvent","De","Ee","Fe","Ge","Je","He","Ie","Ke","Le","Me","contains","compareDocumentPosition","Ne","HTMLIFrameElement","contentWindow","href","Oe","contentEditable","Ue","Te","Qe","selectionStart","selectionEnd","defaultView","getSelection","anchorNode","anchorOffset","focusNode","focusOffset","Se","Re","Ze","listener","$e","af","cf","bf","Ye","df","Pb","capture","passive","Rd","Fd","button","Bd","Dd","Vd","Ic","Jc","Kc","Hd","Lc","Xd","vd","Zd","Jd","Td","ef","relatedTarget","fromElement","ff","parentWindow","toElement","gf","hf","we","Pe","Ld","ce","unshift","jf","mf","autoFocus","nf","__html","qf","rf","sf","previousSibling","uf","Ga","valueOf","wf","xf","yf","Set","Bf","Af","zf","Ef","contextTypes","Cf","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","Ff","childContextTypes","Gf","Hf","If","getChildContext","Jf","__reactInternalMemoizedMergedChildContext","Df","Kf","eg","Tf","Uf","Vf","Wf","Xf","Yf","fg","gg","Nf","hg","Of","ig","bg","Pf","jg","cg","ag","lg","qg","pg","og","ng","rg","mg","_currentValue","sg","childLanes","tg","dependencies","firstContext","lanes","ug","vg","observedBits","responders","xg","updateQueue","baseState","firstBaseUpdate","lastBaseUpdate","shared","pending","effects","yg","zg","eventTime","lane","payload","callback","Ag","Bg","Cg","wg","Dg","Eg","Gg","Lg","shouldComponentUpdate","isPureReactComponent","Mg","contextType","state","Kg","_reactInternals","Ng","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","enqueueReplaceState","Og","refs","Fg","getDerivedStateFromProps","getSnapshotBeforeUpdate","UNSAFE_componentWillMount","componentWillMount","Qg","_owner","_stringRef","Rg","Sg","lastEffect","nextEffect","firstEffect","Map","Tg","Ug","mode","Vg","implementation","Wg","Xg","sa","Pg","dh","$g","eh","ch","bh","ah","documentElement","namespaceURI","tagName","fh","gh","hh","ih","memoizedProps","revealOrder","mh","nh","oh","pendingProps","ph","lh","kh","jh","qh","rh","sh","uh","th","_workInProgressVersionPrimary","Ah","Bh","Ch","xh","vh","Dh","Eh","zh","Fh","Gh","yh","Hh","baseQueue","queue","Ih","Jh","Kh","lastRenderedReducer","action","eagerReducer","eagerState","lastRenderedState","dispatch","Lh","Mh","_getVersion","_source","mutableReadLanes","Nh","getSnapshot","subscribe","setSnapshot","Ig","Oh","Ph","Qh","Rh","destroy","deps","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","concat","ai","bi","ci","di","wh","transition","Hg","Jg","fi","Zg","Yg","gi","hi","ii","ji","compare","ki","li","mi","baseLanes","ni","oi","pi","UNSAFE_componentWillUpdate","componentWillUpdate","qi","ei","getDerivedStateFromError","ri","pendingContext","ti","fallback","unstable_avoidThisFallback","ui","si","unstable_expectedLoadTime","vi","wi","xi","yi","zi","isBackwards","rendering","renderingStartTime","last","tail","tailMode","Ai","Fi","Gi","Ci","Di","Xe","wasMultiple","multiple","onclick","kb","html","innerHTML","size","createElementNS","Bi","ob","Ei","Hi","Ii","Ji","Ki","Li","Mi","message","Ni","setTimeout","Pi","Qi","Ri","Si","componentDidCatch","Ti","componentStack","Vi","Wi","Xi","__reactInternalSnapshotBeforeUpdate","Yi","Zi","$i","focus","aj","bj","Mf","onCommitFiberUnmount","Lf","cj","dj","ej","fj","gj","hj","_reactRootContainer","ij","jj","kj","Ui","lj","mj","wj","Fj","Gj","tj","kg","Hj","vj","Dj","Ej","Kj","Lj","Mj","Cj","callbackNode","expirationTimes","Zf","callbackPriority","Nj","Oj","Pj","Qj","Rj","Sj","oj","Tj","sj","finishedWork","finishedLanes","Uj","timeoutHandle","of","nj","uj","Vj","Wj","Xj","rj","qj","pf","pj","pingCache","Oi","Yj","Zj","va","ak","bk","Qf","ck","dk","yj","kf","rangeCount","lf","focusedElem","selectionRange","Ij","Jj","ek","min","extend","createRange","setStart","removeAllRanges","addRange","setEnd","left","scrollLeft","top","scrollTop","$f","xj","zj","onCommitFiberRoot","fk","Aj","Bj","gk","ik","isReactComponent","hk","Ha","Ia","Ja","pendingChildren","jk","mutableSourceEagerHydrationData","kk","lk","mk","nk","retryLane","ok","pk","qk","hydrationOptions","mutableSources","_internalRoot","rk","sk","hasAttribute","tk","uk","xlinkHref","ra","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","for","nb","mathml","svg","MSApp","execUnsafeLocalFunction","gridArea","lineClamp","rb","menuitem","area","base","br","col","embed","hr","img","input","keygen","link","meta","param","track","wbr","Qb","removeEventListener","animationend","animationiteration","animationstart","transitionend","animation","Oc","Qc","unstable_now","wd","xd","yd","clz32","LN2","unstable_UserBlockingPriority","sd","eventPhase","bubbles","cancelable","timeStamp","Date","now","isTrusted","ud","view","Ad","screenX","screenY","clientX","clientY","pageX","pageY","shiftKey","buttons","movementX","movementY","Cd","dataTransfer","Ed","Gd","animationName","elapsedTime","pseudoElement","Id","clipboardData","Kd","Md","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","Nd","8","9","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","112","113","114","115","116","117","118","119","120","121","122","123","144","145","224","Alt","Control","Meta","Shift","Qd","code","repeat","Sd","pressure","tangentialPressure","tiltX","tiltY","twist","pointerType","isPrimary","Ud","touches","targetTouches","changedTouches","Wd","Yd","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","be","documentMode","date","datetime","datetime-local","email","month","password","search","tel","time","week","xe","ye","ze","oninput","Ve","We","random","clearTimeout","tf","vf","unstable_cancelCallback","unstable_shouldYield","Rf","unstable_requestPaint","Sf","unstable_getCurrentPriorityLevel","unstable_ImmediatePriority","unstable_LowPriority","unstable_IdlePriority","dg","ReactCurrentBatchConfig","isMounted","enqueueSetState","enqueueForceUpdate","ReactCurrentDispatcher","readContext","useCallback","useContext","useImperativeHandle","useLayoutEffect","useMemo","useReducer","useRef","useDebugValue","useDeferredValue","useTransition","useMutableSource","useOpaqueIdentifier","unstable_isNewReconciler","ReactCurrentOwner","WeakSet","ceil","_calculateChangedBits","unstable_observedBits","unmount","form","vk","Events","wk","findFiberByHostInstance","bundleType","version","rendererPackageName","xk","rendererConfig","overrideHookState","overrideHookStateDeletePath","overrideHookStateRenamePath","overrideProps","overridePropsDeletePath","overridePropsRenamePath","setSuspenseHandler","scheduleUpdate","currentDispatcherRef","findHostInstanceByFiber","findHostInstancesForRefresh","scheduleRefresh","scheduleRoot","setRefreshHandler","getCurrentFiber","yk","isDisabled","supportsFiber","inject","createPortal","flushSync","unmountComponentAtNode","unstable_batchedUpdates","unstable_createPortal","unstable_renderSubtreeIntoContainer","getClientPosition","finger","_css","core","react","borderRadius","userSelect","boxSizing","active","thumb","boxShadow","xy","Slider","getPosition","ymin","ymax","change","_ref2","_container$current$ge","getBoundingClientRect","dx","dy","parseInt","ystep","xreverse","yreverse","handleMouseDown","stopImmediatePropagation","dom","handle","clientPos","offsetLeft","offsetTop","handleDrag","handleDragEnd","onDragStart","getPos","onDragEnd","handleTrackMouseDown","rect","customStyles","pos","valueStyle","handleStyle","transform","styles$1","onTouchStart","onMouseDown","escape","=",":","_status","_result","StrictMode","Profiler","Suspense","setState","forceUpdate","__self","__source","IsSomeRendererActing","count","toArray","only","PureComponent","cloneElement","_currentValue2","_threadCount","createFactory","createRef","isValidElement","lazy","memo","pop","sortIndex","startTime","expirationTime","priorityLevel","performance","MessageChannel","unstable_forceFrameRate","floor","port2","port1","onmessage","postMessage","unstable_Profiling","unstable_continueExecution","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","delay","unstable_wrapCallback","OrbitConstraint","minDistance","maxDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","theta","phi","EPS","phiDelta","thetaDelta","scale","panOffset","zoomChanged","getPolarAngle","getAzimuthalAngle","rotateLeft","angle","rotateUp","panLeft","matrix","elements","multiplyScalar","panUp","pan","screenWidth","screenHeight","clone","sub","targetDistance","tan","fov","OrthographicCamera","right","bottom","warn","dollyIn","dollyScale","updateProjectionMatrix","dollyOut","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","applyQuaternion","atan2","sqrt","radius","sin","cos","distanceToSquared","dot","quaternion","constraint","clientWidth","clientHeight","getAutoRotationAngle","autoRotateSpeed","getZoomScale","zoomSpeed","enabled","mouseButtons","ORBIT","enableRotate","STATE","ROTATE","rotateStart","ZOOM","enableZoom","DOLLY","dollyStart","PAN","enablePan","panStart","NONE","onMouseMove","onMouseUp","dispatchEvent","startEvent","rotateEnd","rotateDelta","subVectors","rotateSpeed","dollyEnd","dollyDelta","panEnd","panDelta","endEvent","onMouseWheel","delta","onKeyDown","UP","keyPanSpeed","BOTTOM","LEFT","RIGHT","touchstart","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","touchmove","touchend","contextmenu","center","autoRotate","MOUSE","MIDDLE","Vector2","target0","position0","zoom0","changeEvent","reset","EventDispatcher","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","REVISION","lastTime","vendors","currTime","timeToCall","Function","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","FlatShading","SmoothShading","NoColors","FaceColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","Projector","projectVector","vector","project","unprojectVector","unproject","pickingRay","CanvasRenderer","clear","Color","setRGB","setHex","setStyle","hex","setHSL","hue2rgb","euclideanModulo","clamp","parseAlpha","strAlpha","components","ColorKeywords","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","getHSL","optionalTarget","hue","saturation","hsl","lightness","getStyle","offsetHSL","addColors","color1","color2","addScalar","multiply","lerp","equals","fromArray","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","_x","_y","_z","_w","onChangeCallback","setFromEuler","euler","Euler","c1","c2","c3","s1","s2","s3","setFromAxisAngle","halfAngle","setFromRotationMatrix","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","v1","vFrom","vTo","abs","crossVectors","conjugate","lengthSq","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","multiplyVector3","slerp","cosHalfTheta","halfTheta","acos","sinHalfTheta","ratioA","ratioB","qm","setX","setY","setComponent","getComponent","addVectors","addScaledVector","subScalar","divide","divideScalar","scalar","invScalar","clampScalar","minVal","maxVal","round","roundToZero","negate","lengthManhattan","distanceTo","setLength","oldLength","lerpVectors","v2","fromAttribute","attribute","itemSize","setZ","multiplyVectors","applyEuler","applyAxisAngle","applyMatrix3","applyMatrix4","applyProjection","qx","qy","qz","qw","ix","iy","iz","iw","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","transformDirection","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","angleTo","dz","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","setFromMatrixPosition","getScaleFromMatrix","setFromMatrixScale","getColumnFromMatrix","setFromMatrixColumn","sx","sy","sz","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","xx","yy","zz","xz","yz","_order","DefaultOrder","RotationOrders","asin","setFromQuaternion","makeRotationFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Line3","distanceSq","closestPointToPointParameter","startP","startEnd","point","clampToLine","startEnd2","startEnd_startP","closestPointToPoint","Box2","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","box","empty","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","isIntersectionBox","clampPoint","distanceToPoint","clampedPoint","intersect","union","translate","Box3","setFromObject","updateMatrixWorld","traverse","attributes","positions","getBoundingSphere","Sphere","Matrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","identity","multiplyVector3Array","applyToVector3Array","j","applyToBuffer","getX","getY","getZ","setXYZ","determinant","throwOnInvertible","det","msg","transpose","tmp","flattenToArrayOffset","getNormalMatrix","transposeIntoArray","n14","n24","n34","n41","n42","n43","n44","extractPosition","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","setRotationFromQuaternion","x2","y2","z2","wx","wy","wz","eye","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyToArray","multiplyVector4","rotateAxis","crossVector","setPosition","rotateX","rotateY","rotateZ","rotateByAxis","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","compose","decompose","invSX","invSY","invSZ","makeFrustum","near","far","makePerspective","aspect","degToRad","makeOrthographic","Ray","origin","direction","ray","recast","directionDistance","distanceSqToPoint","distanceSqToSegment","segCenter","segDir","diff","v0","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","b1","invDet","isIntersectionSphere","sphere","intersectSphere","tca","d2","radius2","thc","t0","t1","isIntersectionPlane","plane","distToPoint","denominator","distanceToPlane","constant","intersectPlane","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","matrix4","optionalCenter","maxRadiusSq","intersectsSphere","radiusSum","deltaLengthSq","getBoundingBox","Frustum","p0","p3","p4","p5","planes","Plane","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","intersectsObject","boundingSphere","negRadius","intersectsBox","d1","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","isIntersectionLine","startSign","endSign","intersectLine","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","newNormal","newCoplanarPoint","generateUUID","chars","uuid","rnd","clampBottom","mapLinear","a1","a2","b2","smoothstep","smootherstep","random16","randInt","low","high","randFloat","randFloatSpread","degreeToRadiansFactor","degrees","radToDeg","radianToDegreesFactor","radians","isPowerOfTwo","nextPowerOfTwo","Spline","interpolate","t2","t3","intPoint","weight","w2","w3","v3","initFromArray","getPoint","getControlPointsArray","coords","getLength","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","chunks","total","reparametrizeByArcLength","samplingCoef","indexCurrent","indexNext","realDistance","sampling","newpoints","sl","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","triangle","midpoint","Clock","autoStart","oldTime","running","stop","getElapsedTime","getDelta","newTime","hasEventListener","_listeners","listenerArray","splice","descSort","Raycaster","params","Line","LOD","Points","threshold","Sprite","PointCloud","intersectObject","raycaster","intersects","recursive","raycast","linePrecision","setFromCamera","sort","intersectObjects","objects","Object3D","Object3DIdCount","parent","DefaultUp","onRotationChange","onQuaternionChange","modelViewMatrix","rotationAutoUpdate","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","castShadow","receiveShadow","frustumCulled","renderOrder","userData","eulerOrder","useQuaternion","renderDepth","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","rotateOnAxis","q1","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","getChildByName","getObjectById","getObjectByProperty","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","traverseAncestors","force","toJSON","extractFromCache","values","metadata","isRootObject","geometries","materials","textures","images","generator","output","materialIndex","vertexNormals","Face4","dynamic","updateRange","needsUpdate","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","copyIndicesArray","indices","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","getW","setXY","setXYZW","Int8Attribute","Int8Array","Uint8Attribute","Uint8ClampedAttribute","Uint8ClampedArray","Int16Attribute","Int16Array","Uint16Attribute","Uint16Array","Int32Attribute","Int32Array","Uint32Attribute","Uint32Array","Float32Attribute","Float64Attribute","Float64Array","DynamicBufferAttribute","InstancedBufferAttribute","meshPerAttribute","InterleavedBuffer","stride","InstancedInterleavedBuffer","InterleavedBufferAttribute","interleavedBuffer","GeometryIdCount","faceVertexUvs","morphTargets","morphColors","morphNormals","skinWeights","skinIndices","lineDistances","verticesNeedUpdate","elementsNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","vertex","jl","fromBufferGeometry","uvs","uv","uvs2","uv2","tempNormals","tempUVs","tempUVs2","addFace","groups","group","fl","vA","vB","vC","areaWeighted","vl","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","faceNormal","dstNormalsFace","dstNormalsVertex","computeTangents","computeLineDistances","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mergeVertices","verticesMap","unique","changes","precisionPoints","precision","faceIndicesToRemove","dupIndex","idx","setBit","getNormalIndex","hash","normalsHash","getColorIndex","colorsHash","getUvIndex","uvsHash","parameters","hasMaterial","hasFaceUv","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","uvsCopy","kl","DirectGeometry","computeGroups","fromGeometry","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","morphAttributes","drawRange","addIndex","setIndex","getIndex","drawcalls","offsets","addDrawCall","indexOffset","addGroup","clearDrawCalls","clearGroups","setDrawRange","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","TypeArray","pA","pB","pC","normalizeNormals","computeOffsets","attribute1","attributeArray1","attribute2","attributeArray2","attributeSize","MaxIndex","InstancedBufferGeometry","maxInstancedCount","instances","Camera","matrixWorldInverse","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderTarget","WebGLRenderTargetCube","format","magFilter","minFilter","updateCubeMap","generateMipmaps","activeCubeFace","setRenderTarget","cy","setLens","focalLength","frameHeight","atan","setViewOffset","fullWidth","fullHeight","Light","AmbientLight","intensity","onlyShadow","shadowCameraNear","shadowCameraFar","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowBias","shadowDarkness","shadowMapWidth","shadowMapHeight","shadowMap","shadowMapSize","shadowCamera","shadowMatrix","HemisphereLight","skyColor","groundColor","PointLight","decay","SpotLight","shadowCameraFov","Cache","files","Loader","onLoadStart","onLoadProgress","onLoadComplete","extractUrlBase","parts","initMaterials","texturePath","createMaterial","imageLoader","nearest_pow2","create_texture","where","sourceFile","wrap","anisotropy","texture","fullPath","Handlers","Texture","image","canvas","getContext","drawImage","wrapS","wrapT","wrapMap","mirror","rgb2hex","rgb","ImageLoader","mtype","mpars","shading","blending","depthTest","depthWrite","flipSided","doubleSided","wireframe","colorDiffuse","DbgColor","colorEmissive","emissive","colorSpecular","specular","specularCoef","shininess","transparency","mapDiffuse","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapLight","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapAO","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","mapBump","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormal","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecular","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapAlpha","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","mapBumpScale","bumpScale","mapNormalFactor","normalScale","DbgName","handlers","regex","request","XMLHttpRequest","open","response","itemEnd","itemError","responseType","withCredentials","send","itemStart","setWithCredentials","JSONLoader","statusDomElement","_statusDomElement","json","setTexturePath","parseModel","isBitSet","zLength","colorIndex","normalIndex","uvIndex","isQuad","faceA","faceB","uvLayer","nUvLayers","parseSkin","influencesPerVertex","bones","animations","parseMorphing","dstVertices","srcVertices","cl","dstColors","srcColors","LoadingManager","isLoading","itemsLoaded","itemsTotal","onStart","BufferGeometryLoader","typedArray","MaterialLoader","setTextures","getTexture","uniforms","vertexShader","fragmentShader","alphaTest","wireframeLinewidth","sizeAttenuation","alphaMap","bumpMap","normalMap","displacementMap","displacementScale","displacementBias","specularMap","envMap","combine","reflectivity","lightMap","lightMapIntensity","aoMap","aoMapIntensity","ObjectLoader","lastIndexOf","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","geometryLoader","bufferGeometryLoader","widthSegments","heightSegments","BoxGeometry","depthSegments","CircleBufferGeometry","segments","thetaStart","thetaLength","CircleGeometry","CylinderGeometry","radiusTop","radiusBottom","radialSegments","openEnded","SphereGeometry","phiStart","phiLength","SphereBufferGeometry","DodecahedronGeometry","IcosahedronGeometry","OctahedronGeometry","TetrahedronGeometry","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","TorusGeometry","tube","tubularSegments","arc","TorusKnotGeometry","heightScale","TextGeometry","loadImage","path","parseConstant","mapping","getGeometry","getMaterial","Group","levels","level","addLevel","TextureLoader","DataTextureLoader","BinaryTextureLoader","_parser","DataTexture","texData","mipmaps","mipmapCount","CompressedTextureLoader","CompressedTexture","loadTexture","texDatas","isCubemap","Material","MaterialIdCount","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","colorWrite","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","overdraw","_needsUpdate","setValues","newValue","currentValue","Number","wrapAround","boolean","wrapRGB","LineBasicMaterial","linewidth","linecap","linejoin","fog","LineDashedMaterial","dashSize","gapSize","MeshBasicMaterial","refractionRatio","wireframeLinecap","wireframeLinejoin","skinning","metal","emissiveMap","MeshDepthMaterial","MeshNormalMaterial","MultiMaterial","MeshFaceMaterial","PointsMaterial","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","ShaderMaterial","defines","derivatives","defaultAttributeValues","index0AttributeName","UniformsUtils","RawShaderMaterial","SpriteMaterial","TextureIdCount","DEFAULT_IMAGE","DEFAULT_MAPPING","premultiplyAlpha","flipY","unpackAlignment","onUpdate","getDataURL","toDataURL","transformUv","CanvasTexture","CubeTexture","VideoTexture","video","readyState","HAVE_ENOUGH_DATA","inverseMatrix","testPoint","rayPointDistanceSq","localThresholdSq","intersectPoint","distanceToRay","localThreshold","ParticleSystem","LineSegments","precisionSq","vStart","vEnd","interSegment","interRay","step","distSq","faceIndex","nbVertices","LineStrip","LinePieces","updateMorphTargets","morphTargetBase","morphTargetInfluences","morphTargetDictionary","ml","getMorphTargetIndexByName","uvIntersection","uv1","uv3","barycoord","tempA","tempB","tempC","uvA","uvB","uvC","intersectionPoint","intersectionPointWorld","isFaceMaterial","faceMaterial","morphInfluences","tl","influence","targets","Bone","skin","Skeleton","boneInverses","useVertexTexture","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","pose","bone","offsetMatrix","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","gbone","rotq","scl","normalizeSkinWeights","skeleton","sw","MorphAnimMesh","duration","mirroredLoop","lastKeyframe","currentKeyframe","directionBackwards","setFrameRange","startKeyframe","endKeyframe","setDirectionForward","setDirectionBackward","parseAnimations","firstAnimation","pattern","morph","label","setAnimationLabel","playAnimation","fps","updateAnimation","frameTime","keyframe","influences","mix","interpolateTargets","getObjectForDistance","matrixPosition","guessSizeSq","Particle","LensFlare","lensFlares","positionScreen","customUpdateCallback","updateLensFlares","flare","vecX","vecY","wantedRotation","overrideMaterial","autoUpdate","Fog","FogExp2","density","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bumpmap_pars_fragment","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","defaultnormal_vertex","displacementmap_vertex","displacementmap_pars_vertex","emissivemap_fragment","emissivemap_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_fragment","fog_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_pars_vertex","lights_lambert_vertex","lights_phong_fragment","lights_phong_pars_fragment","lights_phong_pars_vertex","lights_phong_vertex","linear_to_gamma_fragment","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normalmap_pars_fragment","project_vertex","shadowmap_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","uv_pars_fragment","uv_pars_vertex","uv_vertex","worldpos_vertex","merged","uniforms_src","uniforms_dst","parameter_src","UniformsLib","diffuse","offsetRepeat","flipEnvMap","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","directionalLightDirection","directionalLightColor","hemisphereLightDirection","hemisphereLightSkyColor","hemisphereLightGroundColor","pointLightColor","pointLightPosition","pointLightDistance","pointLightDecay","spotLightColor","spotLightPosition","spotLightDirection","spotLightDistance","spotLightAngleCos","spotLightExponent","spotLightDecay","psColor","shadowmap","ShaderLib","basic","lambert","phong","dashed","totalSize","mNear","mFar","cube","tCube","tFlip","equirect","tEquirect","depthRGBA","glClearColor","_premultipliedAlpha","_gl","clearColor","setDefaultGLState","viewport","_viewportX","_viewportY","_viewportWidth","_viewportHeight","_clearColor","_clearAlpha","resetGLState","_currentProgram","_currentCamera","_currentGeometryProgram","_currentMaterialId","_lightsNeedUpdate","onContextLost","properties","onTextureDispose","deallocateTexture","_infoMemory","onRenderTargetDispose","deallocateRenderTarget","onMaterialDispose","deallocateMaterial","textureProperties","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","deleteRenderbuffer","__webglRenderbuffer","releaseMaterialProgramReference","programInfo","program","programCache","releaseProgram","setupVertexAttributes","startIndex","extension","extensions","initAttributes","geometryAttributes","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","geometryAttribute","enableAttribute","getAttributeBuffer","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","FLOAT","BYTES_PER_ELEMENT","vertexAttribDivisorANGLE","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","disableUnusedAttributes","numericalSort","painterSortStable","reversePainterSortStable","pushImmediateRenderItem","transparentImmediateObjects","transparentImmediateObjectsLastIndex","opaqueImmediateObjects","opaqueImmediateObjectsLastIndex","pushRenderItem","transparentObjects","transparentObjectsLastIndex","opaqueObjects","opaqueObjectsLastIndex","renderItem","_vector3","projectObject","sprites","ImmediateRenderObject","_frustum","sortObjects","_projScreenMatrix","groupMaterial","renderObjects","renderList","renderBufferDirect","renderObjectsImmediate","setMaterial","setProgram","renderBufferImmediate","initMaterial","materialProperties","getParameters","getProgramCode","programChange","shaderID","shader","__webglShader","acquireProgram","numSupportedMorphTargets","maxMorphTargets","numSupportedMorphNormals","maxMorphNormals","uniformsList","uniformLocations","getUniforms","setMaterialFaces","setBlending","setDepthFunc","setDepthTest","setDepthWrite","setColorWrite","setPolygonOffset","enable","CULL_FACE","disable","setFlipSided","_usedTextureUnits","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","useProgram","uniformMatrix4fv","capabilities","logarithmicDepthBuffer","uniform1f","logDepthBufFC","cameraPosition","uniform3f","viewMatrix","floatVertexTextures","textureUnit","getTextureUnit","uniform1i","setTexture","boneGlobalMatrices","refreshUniformsFog","setupLights","refreshUniformsLights","_lights","markUniformsLightsNeedsUpdate","refreshUniformsCommon","refreshUniformsLine","refreshUniformsDash","refreshUniformsParticle","refreshUniformsPhong","_shadowPass","refreshUniformsShadow","loadUniformsGeneric","loadUniformsMatrices","modelMatrix","uvScaleMap","_canvas","ambient","directional","distances","decays","spot","directions","anglesCos","exponents","hemi","skyColors","groundColors","uniformMatrix3fv","maxTextures","uniform","uniform2f","uniform4f","uniform1iv","uniform3iv","uniform1fv","uniform2fv","uniform3fv","uniform4fv","_array","i3","i4","setCubeTexture","setCubeTextureDynamic","setColorLinear","ll","zlights","dirColors","dirPositions","pointColors","pointPositions","pointDistances","pointDecays","spotColors","spotPositions","spotDistances","spotDirections","spotAnglesCos","spotExponents","spotDecays","hemiSkyColors","hemiGroundColors","hemiPositions","dirLength","pointLength","spotLength","hemiLength","dirCount","pointCount","spotCount","hemiCount","dirOffset","pointOffset","spotOffset","hemiOffset","_direction","setTextureParameters","textureType","isImagePowerOfTwo","texParameteri","TEXTURE_WRAP_S","paramThreeToGL","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","CLAMP_TO_EDGE","filterFallback","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","uploadTexture","slot","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","clampToMaxSize","maxTextureSize","glFormat","glType","mipmap","texImage2D","getCompressedTextureFormats","compressedTexImage2D","generateMipmap","__version","maxSize","TEXTURE_CUBE_MAP","isCompressed","isDataTexture","cubeImage","autoScaleCubemaps","maxCubemapSize","TEXTURE_CUBE_MAP_POSITIVE_X","setupFrameBuffer","framebuffer","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","setupRenderBuffer","renderbuffer","bindRenderbuffer","RENDERBUFFER","depthBuffer","stencilBuffer","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","RGBA4","updateRenderTargetMipmap","NEAREST","LINEAR","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_BYTE","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","HALF_FLOAT_OES","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","MIN_EXT","MAX_EXT","_width","_height","pixelRatio","_alpha","_depth","_stencil","stencil","_antialias","premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","autoClear","autoClearColor","autoClearDepth","autoClearStencil","gammaInput","gammaOutput","_currentFramebuffer","_currentWidth","_currentHeight","_infoRender","calls","info","memory","programs","WebGLExtensions","WebGLCapabilities","WebGLState","WebGLProperties","WebGLObjects","WebGLPrograms","bufferRenderer","WebGLBufferRenderer","indexedBufferRenderer","WebGLIndexedBufferRenderer","WebGLShadowMap","spritePlugin","SpritePlugin","lensFlarePlugin","LensFlarePlugin","getContextAttributes","loseContext","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getPrecision","getPixelRatio","setPixelRatio","getSize","updateStyle","setViewport","setScissor","scissor","enableScissorTest","setScissorTest","getClearColor","getClearAlpha","setClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearDepth","clearStencil","clearTarget","buffers","hasPositions","createBuffer","hasNormals","hasUvs","bufferData","positionArray","DYNAMIC_DRAW","normalArray","nx","ny","nz","uvArray","colorArray","drawArrays","TRIANGLES","updateBuffers","geometryProgram","activeInfluences","getWireframeAttribute","ELEMENT_ARRAY_BUFFER","setLineWidth","setMode","LINES","renderInstances","lineWidth","LINE_STRIP","POINTS","forceClear","setFaceCulling","cullFace","frontFaceDirection","frontFace","CW","CCW","BACK","FRONT","FRONT_AND_BACK","complete","isCube","isTargetPowerOfTwo","createFramebuffer","createRenderbuffer","shareDepthFrom","vx","vy","readRenderTargetPixels","WebGLRenderTarget","restore","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsVertexTextures","vertexTextures","supportsInstancedArrays","addPrePlugin","addPostPlugin","updateShadowMap","shadowMapEnabled","shadowMapType","shadowMapCullFace","shadowMapDebug","debug","drawArraysInstancedANGLE","drawElements","drawElementsInstancedANGLE","gl","getExtension","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","floatFragmentTextures","_maxPrecision","WebGLGeometries","onGeometryDispose","buffergeometry","_bufferGeometry","deleteAttributes","deleteAttribute","__webglBuffer","deleteBuffer","removeAttributeBuffer","updateAttribute","bufferType","attributeProperties","updateBuffer","usage","STATIC_DRAW","bufferSubData","subarray","edges","checkEdge","list","WebGLProgram","generateDefines","fetchUniformLocations","identifiers","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","suffixPos","substr","fetchAttributeLocations","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","filterEmptyLine","programIdCount","shadowMapTypeDefine","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","prefixVertex","prefixFragment","gammaFactorDefine","customDefines","createProgram","maxDirLights","maxPointLights","maxSpotLights","maxHemiLights","maxShadows","maxBones","flatShading","useFog","fogExp","vertexGlsl","fragmentGlsl","glVertexShader","WebGLShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","programLog","getProgramInfoLog","vertexLog","getShaderInfoLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","deleteShader","cachedUniforms","cachedAttributes","deleteProgram","usedTimes","allocateBones","nVertexUniforms","nVertexMatrices","allocateLights","dirLights","pointLights","spotLights","hemiLights","allocateShadows","shaderIDs","parameterNames","maxLightCount","envMapMode","parameterName","pl","addLineNumbers","lines","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","_renderer","_objects","getDepthMaterial","depthMaterial","useMorphing","useSkinning","customDepthMaterial","_depthMaterialMorphSkin","_depthMaterialSkin","_depthMaterialMorph","_depthMaterial","_renderList","_state","_matrixPosition","depthShader","depthUniforms","BLEND","shadowFilter","pars","cameraHelper","CameraHelper","clearAlpha","newAttributes","enabledAttributes","compressedTextureFormats","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentDepthFunc","currentDepthWrite","currentColorWrite","currentFlipSided","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","currentTextureSlot","currentBoundTextures","DEPTH_TEST","LEQUAL","blendFunc","enableVertexAttribArray","disableVertexAttribArray","formats","COMPRESSED_TEXTURE_FORMATS","blendEquationSeparate","blendFuncSeparate","NEVER","ALWAYS","LESS","EQUAL","GEQUAL","GREATER","NOTEQUAL","depthMask","colorMask","factor","units","POLYGON_OFFSET_FILL","scissorTest","SCISSOR_TEST","webglSlot","webglType","webglTexture","boundTexture","flares","vertexBuffer","elementBuffer","hasVertexTexture","tempTexture","occlusionTexture","renderType","occlusionMap","screenPosition","viewportWidth","viewportHeight","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","TEXTURE1","copyTexImage2D","sprite","spritePosition","spriteRotation","spriteScale","uvOffset","uvScale","fogType","fillStyle","fillRect","oldFogType","sceneFogType","GeometryUtils","geometry1","geometry2","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","getNormalMap","subtract","getImageData","imageData","createImageData","ly","uy","lx","ux","num_points","putImageData","generateDataTexture","SceneUtils","createMultiMaterialObject","detach","attach","FontUtils","divisions","getFace","loadFace","family","familyName","ThreeFont","cssFontWeight","cssFontStyle","drawText","resolution","fontPaths","Path","extractGlyphPoints","paths","outline","cpx","cpy","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","pts","glyph","glyphs","_cachedOutline","moveTo","lineTo","quadraticCurveTo","Shape","Utils","bezierCurveTo","b3","generateShapes","curveSegments","font","shapes","toShapes","namespace","EPSILON","process","contour","verts","vertIndices","nv","snip","px","py","aX","aY","bX","bY","cX","cY","apx","apy","bpx","bpy","cCROSSap","bCROSScp","aCROSSbp","Triangulate","typeface_js","_typeface_js","Audio","createBufferSource","onended","onEnded","gain","createGain","connect","destination","panner","createPanner","autoplay","playbackRate","isPlaying","onload","decodeAudioData","play","loop","pause","currentTime","disconnect","setFilter","getFilter","setPlaybackRate","getPlaybackRate","setLoop","getLoop","setRefDistance","refDistance","getRefDistance","setRolloffFactor","rolloffFactor","getRolloffFactor","setVolume","getVolume","AudioListener","AudioContext","webkitAudioContext","orientation","setOrientation","Curve","getPointAt","getUtoTmapping","getPoints","getSpacedPoints","lengths","getLengths","__arcLengthDivisions","cacheArcLengths","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","pt1","pt2","vec","getTangentAt","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","h00","h10","h01","h11","getPointFunc","CurvePath","curves","bends","autoClose","curve","checkConnection","closePath","startPoint","endPoint","LineCurve","curveLengths","getCurveLengths","lens","cacheLengths","sums","maxX","maxY","maxZ","minX","minY","minZ","NEGATIVE_INFINITY","POSITIVE_INFINITY","createPointsGeometry","createGeometry","createSpacedPointsGeometry","addWrapPath","bendpath","getTransformedPoints","oldPts","getWrapPoints","getTransformedSpacedPoints","oldX","oldY","xNorm","bounds","pathPt","actions","fromPoints","PathActions","MOVE_TO","LINE_TO","QUADRATIC_CURVE_TO","BEZIER_CURVE_TO","CSPLINE_THRU","ARC","ELLIPSE","vlen","lastargs","x0","y0","aCPx","aCPy","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","SplineCurve","aRadius","aStartAngle","aEndAngle","aClockwise","absarc","absellipse","ellipse","xRadius","yRadius","aRotation","EllipseCurve","lastPoint","closedPath","useSpacedPoints","spts","spline","deltaAngle","tdivisions","isCCW","noHoles","extractSubpaths","inActions","subPaths","lastPath","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","isClockWise","tmpPoints","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","hole","tmpHoles","holes","extrude","extruded","ExtrudeGeometry","makeGeometry","ShapeGeometry","getPointsHoles","holesPts","getSpacedPointsHoles","extractAllPoints","extractPoints","extractAllSpacedPoints","triangulateShape","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1Pt","seg2Pt","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","removeHoles","isCutLineInsideAngles","inShapeIdx","inHoleIdx","lastShapeIdx","prevShapeIdx","nextShapeIdx","insideAngle","lastHoleIdx","prevHoleIdx","nextHoleIdx","intersectsShapeEdge","inShapePt","inHolePt","nextIdx","intersection","intersectsHoleEdge","ihIdx","chkHole","indepHoles","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","tmpShape1","tmpShape2","tmpHole1","tmpHole2","failedCuts","hl","minShapeIndex","counter","h2","allPointsMap","allpoints","shapeWithoutHoles","triangles","b2p0","b2p1","b2p2","b3p0","b3p1","b3p2","b3p3","tangent","point0","point1","point2","point3","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","CatmullRomCurve3","CubicPoly","pz","x1","c0","initNonuniformCatmullRom","x3","dt0","dt1","dt2","initCatmullRom","tension","calc","ClosedSplineCurve3","AnimationHandler","CATMULLROM","CATMULLROM_FORWARD","initialized","hierarchy","rot","usedMorphTargets","morphTargetName","morphTargetsInfluences","root","parseRecurseHierarchy","deltaTimeMS","resetBlendWeights","Animation","timeScale","interpolationType","keyTypes","animationCache","positionWeight","quaternionWeight","scaleWeight","prevKey","nextKey","originalMatrix","getNextKeyWith","newVector","newQuat","interpolateCatmullRom","prevXYZ","nextXYZ","proportionalWeight","getPrevKeyWith","currentPoint","forwardPoint","KeyFrameAnimation","isPaused","sids","sid","endTime","original","hasTarget","MorphAnimation","frames","lastFrame","currentFrame","frame","buildPlane","udir","vdir","gridX","gridY","width_half","height_half","gridX1","gridY1","segment_width","segment_height","uva","uvb","uvc","uvd","depth_half","CubeGeometry","centerUV","segment","heightHalf","verticesRow","uvsRow","tanTheta","v4","n1","n2","n3","n4","uv4","EdgesGeometry","thresholdAngle","thresholdDot","edge","sortFunction","vert1","vert2","face1","face2","addShapeList","addShape","scalePt2","pt","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","v_trans_lensq","direction_eq","buildLidFaces","bevelEnabled","layer","flen","f3","steps","bevelSegments","buildSideFaces","layeroffset","sidewalls","ahole","slen1","slen2","f4","shapesOffset","uvgen","generateTopUV","wallContour","stepIndex","stepsLength","contourIndex1","contourIndex2","generateSideWallUV","extrudePts","splineTube","binormal","position2","amount","bevelThickness","bevelSize","extrudePath","extrudeByPath","UVGenerator","WorldUVGenerator","TubeGeometry","FrenetFrames","shapePoints","bs","vert","contourMovements","oneHoleMovements","holesMovements","verticesMovements","binormals","indexA","indexB","indexC","indexD","LatheGeometry","inversePointLength","inverseSegments","np","u0","u1","PlaneGeometry","PlaneBufferGeometry","offset2","radiusStep","thetaSegment","thetaEnd","vertexCount","textShapes","in_q","in_p","cu","su","quOverP","cs","tz","grid","tang","bitan","ip","jp","closed","taper","NoTaper","numpoints","pos2","tangents","SinusoidalTaper","initialNormal3","smallest","MAX_VALUE","mat","PolyhedronGeometry","prepare","that","azimuth","inclination","make","centroid","azi","correctUV","subdivide","cols","rows","ParametricGeometry","slices","stacks","sliceCount","WireframeGeometry","numEdges","ol","drawcall","numTris","AxisHelper","ArrowHelper","lineGeometry","coneGeometry","dir","headLength","headWidth","cone","setDirection","setColor","BoxHelper","BoundingBoxHelper","addLine","addPoint","pointMap","hexFrustum","hexCone","hexUp","hexTarget","hexCross","setPoint","DirectionalLightHelper","lightPlane","targetLine","EdgesHelper","FaceNormalsHelper","nNormals","objGeometry","GridHelper","setColors","colorCenterLine","colorGrid","HemisphereLightHelper","sphereSize","lightSphere","PointLightHelper","SkeletonHelper","getBoneList","boneList","matrixWorldInv","boneMatrix","SpotLightHelper","vector2","coneLength","coneWidth","VertexNormalsHelper","objPos","objNorm","WireframeHelper","renderCallback","MorphBlendMesh","animationsMap","animationsList","numFrames","startFrame","endFrame","createAnimation","setAnimationWeight","autoCreateAnimations","frameRanges","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","stopAnimation"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAE,WACAE,GAAAJ,EACAK,UAUA,OANAP,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,UAGAF,EAAAD,QAvBA,GAAAD,KAqCA,OATAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,GAGAV,EAAA,KDMM,SAAUI,EAAQD,EAASH,GAEhC,YAcA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GE5DxF,GAAAG,GAAAf,EAAA,GFkDKgB,EAAUL,EAAuBI,GEjDtCE,EAAAjB,EAAA,GFqDKkB,EAAaP,EAAuBM,GEpDzCE,EAAAnB,EAAA,IFwDKoB,EAAQT,EAAuBQ,EEvDpCE,WAASC,OAAON,EAAAF,QAAAS,cAACH,EAAAN,QAAD,MAASU,SAASC,eAAe,eF+D3C,SAAUrB,EAAQD,EAASH,GGlEjC,YAGAI,GAAAD,QAAAH,EAAA,KH4EM,SAAUI,EAAQD,EAASH,GI/EjC,YAIA,SAAA0B,GAAAC,GAA+B,MAAAA,IAAA,gBAAAA,IAAA,WAAAA,KAAAb,QAAAa,EA8E/B,QAAAC,GAAAC,EAAAC,EAAAC,EAAAC,GACA,SAAAD,EACA,QAGA,IAAAE,SAAAF,EAAAG,iBAKA,MAAAH,EAGA,cAAAA,IACA,cAEA,QAGA,cAEA,OAAAA,EAAAI,KAMA,MALAC,IACAC,KAAAN,EAAAM,KACAC,OAAAP,EAAAO,OACAC,KAAAH,GAEAL,EAAAM,IAGA,IAAAJ,SAAAF,EAAAO,OAAA,CACA,GAAAC,GAAAR,EAAAQ,IAEA,IAAAN,SAAAM,EAGA,KAAAN,SAAAM,GACAH,GACAC,KAAAE,EAAAF,KACAC,OAAAC,EAAAD,OACAC,KAAAH,GAEAG,QAIA,IAAAD,GAAAP,EAAAO,OAAA,GAMA,OAAAA,GAGA,MAAAE,GAAAX,EAAAC,EAAAC,EAGA,gBAEA,GAAAE,SAAAJ,EAAA,CACA,GAAAY,GAAAL,EACAM,EAAAX,EAAAF,EAEA,OADAO,GAAAK,EACAb,EAAAC,EAAAC,EAAAY,EAAAV,GAKA,KAGA,eAkBA,SAAAF,EACA,MAAAC,EAGA,IAAAY,GAAAb,EAAAC,EAOA,OAAAE,UAAAU,GAAAX,EAAAD,EAAAY,EAGA,QAAAH,GAAAX,EAAAC,EAAAlB,GACA,GAAAgC,GAAA,EAEA,IAAAC,MAAAC,QAAAlC,GACA,OAAAmC,GAAA,EAAmBA,EAAAnC,EAAAoC,OAAgBD,IACnCH,GAAAhB,EAAAC,EAAAC,EAAAlB,EAAAmC,WAGA,QAAAE,KAAArC,GAAA,CACA,GAAAsC,GAAAtC,EAAAqC,EAEA,oBAAAC,GACA,MAAApB,GAAAG,SAAAH,EAAAoB,GACAN,GAAAK,EAAA,IAA6BnB,EAAAoB,GAAA,IACpBC,EAAAD,KACTN,GAAAQ,EAAAH,GAAA,IAAAI,EAAAJ,EAAAC,GAAA,SAOA,KAAAL,MAAAC,QAAAI,IAAA,gBAAAA,GAAA,UAAApB,GAAAG,SAAAH,EAAAoB,EAAA,IAMS,CACT,GAAAI,GAAA1B,EAAAC,EAAAC,EAAAoB,KAEA,QAAAD,GACA,gBACA,oBAEAL,GAAAQ,EAAAH,GAAA,IAAAK,EAAA,GACA,MAGA,SAMAV,GAAAK,EAAA,IAAmCK,EAAA,SAtBnC,QAAAC,GAAA,EAA0BA,EAAAL,EAAAF,OAAmBO,IAC7CJ,EAAAD,EAAAK,MACAX,GAAAQ,EAAAH,GAAA,IAAAI,EAAAJ,EAAAC,EAAAK,IAAA,KA4BA,MAAAX,GA7OAY,OAAAC,eAAAtD,EAAA,cAA8C+C,UAI9C,IAqPAd,GArPAsB,EAAAhC,EAAA1B,EAAA,KACA2D,EAAAjC,EAAA1B,EAAA,KACA4D,EAAAlC,EAAA1B,EAAA,KAIA6D,EAAA,aACAC,EAAA,8BAEAC,EAAA,SAAAC,GACA,YAAAA,EAAAC,WAAA,IAGAd,EAAA,SAAAD,GACA,aAAAA,GAAA,iBAAAA,IAGAE,EAAAQ,EAAA,SAAAM,GACA,MAAAH,GAAAG,OAAAC,QAAAN,EAAA,OAAAO,gBAGAf,EAAA,SAAAgB,EAAAnB,GACA,OAAAmB,GACA,gBACA,oBAEA,mBAAAnB,GACA,MAAAA,GAAAiB,QAAAL,EAAA,SAAAQ,EAAAC,EAAAC,GAMA,MALApC,IACAC,KAAAkC,EACAjC,OAAAkC,EACAjC,KAAAH,GAEAmC,IAMA,WAAAZ,EAAAU,IAAAN,EAAAM,IAAA,gBAAAnB,IAAA,IAAAA,EAIAA,EAHAA,EAAA,MAoMAuB,EAAA,6BAUAC,EAAA,SAAAC,EAAA7C,EAAAD,GACA,OAAA8C,EAAA3B,QAAA,gBAAA2B,GAAA,WAAAA,EAAA,IAAA1C,SAAA0C,EAAA,GAAArC,OACA,MAAAqC,GAAA,EAGA,IAAAC,MACAtC,EAAA,EACAF,GAAAH,MACA,IAAA4C,GAAAF,EAAA,EAEA,OAAAE,GAAA5C,SAAA4C,EAAAC,KACAF,KACAtC,GAAAV,EAAAC,EAAAC,EAAA+C,OAMAvC,GAAAuC,EAAA,EAIA,QAAA9B,GAAA,EAAiBA,EAAA4B,EAAA3B,OAAiBD,IAClCT,GAAAV,EAAAC,EAAAC,EAAA6C,EAAA5B,GAAA,KAAAT,EAAA2B,WAAA3B,EAAAU,OAAA,IAEA4B,IAKAtC,GAAAuC,EAAA9B,GAcA0B,GAAAM,UAAA,CAIA,KAHA,GACAT,GADAU,EAAA,GAGA,QAAAV,EAAAG,EAAAQ,KAAA3C,KACA0C,GAAA,IACAV,EAAA,EAGA,IAAAjC,GAAAqB,EAAApB,GAAA0C,CAeA,QACA3C,OACAC,SACAC,KAAAH,GAIAjC,GAAAuE,mBJsFM,SAAUtE,EAAQD,EAASH,GK5ZjC,QAAAkF,GAAAC,EAAAC,GACAD,EAAAE,UAAA7B,OAAA8B,OAAAF,EAAAC,WACAF,EAAAE,UAAAE,YAAAJ,EACAK,EAAAL,EAAAC,GAJA,GAAAI,GAAAxF,EAAA,GAMAI,GAAAD,QAAA+E,EAAA9E,EAAAD,QAAAU,cAAAT,EAAAD,QAAAW,QAAAV,EAAAD,SLmaM,SAAUC,EAAQD,EAASH,GMzajC,YAIA,SAAA0B,GAAAC,GAA+B,MAAAA,IAAA,gBAAAA,IAAA,WAAAA,KAAAb,QAAAa,EAY/B,QAAA8D,GAAAC,GACAA,GACAC,EAAAC,QAAAC,OAAAH,EAAA,KAhBAlC,OAAAC,eAAAtD,EAAA,cAA8C+C,UAI9C,IAAA4C,GAAA9F,EAAA,GACA+F,EAAArE,EAAA1B,EAAA,IACAA,GAAA,GAKA,IAAAgG,GAAA,QACAC,EAAAD,EAAA,IAQAL,GACAC,QAAA,MAEAM,EAAA,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAxD,EAAAyD,EAAAC,EAAAC,GACA,OAAAR,GAEA,OAEA,OAAAC,EAAAnC,WAAA,IACA,QAIA,MADA0B,GAAAC,QAAAC,OAAAO,EAAA,KACA,EAIA,UAIA,QAAAA,EAAAnC,WAAA,GACA,SAKA,KAIA,QAEA,OAAAwC,EAAA,MAAAL,GAAAJ,CACA,MAIA,QAEA,OAAAS,GAEA,SACA,SAGA,MADAd,GAAAC,QAAAC,OAAAQ,EAAA,GAAAD,GACA,EAGA,SAEA,MAAAA,IAAA,IAAAO,EAAAX,EAAA,IAKA,OAEAI,EAAAQ,MAAAX,GAAAY,QAAApB,KAKAqB,EAAA,SAAAC,GACA9E,SAAA8E,SACA,IACAC,GADA3C,EAAA0C,EAAA1C,KAAA,KAGApC,UAAA8E,EAAAE,SACAD,GACAC,OAAAF,EAAAE,QAIA,IAWAC,GAXAC,EAAA,GAAApB,GAAAiB,GASAI,IAKAF,GAAAH,EAAAG,WAAA1F,SAAA6F,IACA,IAAAC,GAAA9F,SAAA+F,iBAAA,sBAAAlD,EAAA,IACAxB,OAAAwC,UAAAwB,QAAAtG,KAAA+G,EAAA,SAAAE,GACA,GAAAC,GAAAD,EAAAE,aAAA,gBAAArD,EAEAoD,GAAAb,MAAA,KAAAC,QAAA,SAAAxG,GACA+G,EAAA/G,QAGAmH,EAAAG,aAAAT,GACAA,EAAAU,YAAAJ,IAKA,IAAAK,EAGAV,GAAAW,IAAAf,EAAAgB,eAAA7B,GAEA2B,EAAA,SAAAG,EAAAC,EAAAnC,EAAAoC,GACA,GAAA7F,GAAA4F,EAAA5F,IACAsD,GAAAC,QAAAE,EAWAqB,EAAAa,EAAAC,EAAA3F,QAEA4F,IACAC,EAAAf,SAAA/E,OAOA,IA8CA8F,IACA9D,MACAyB,MAAA,GAAAA,GAAAsC,YACA/D,MACA6C,YACAmB,MAAAtB,EAAAsB,MACAC,OAAAvB,EAAAuB,SAEAD,MAAAtB,EAAAsB,MACAjB,WACAtF,cACA+D,OAAAgC,EAEA,OAAAM,GAGAhI,GAAAW,QAAAgG,GNgbM,SAAU1G,EAAQD,EAASH,GOvoBjC,YAMA,SAAAuI,KACA,OAAAC,GAAAC,UAAAzF,OAAA2B,EAAA,GAAA9B,OAAA2F,GAAAvF,EAAA,EAAqEA,EAAAuF,EAAavF,IAClF0B,EAAA1B,GAAAwF,UAAAxF,EAGA,OAAAyF,GAAAhE,gBAAAC,GATAnB,OAAAC,eAAAtD,EAAA,cAA8C+C,UAE9C,IAAAwF,GAAA1I,EAAA,EAUAG,GAAAW,QAAAyH,GP8oBM,SAAUnI,EAAQD,EAASH,GQ5pBjC,YA2BA,SAAA2I,GAAAC,GACA,GAAAA,EAAA9C,MAEA,MAAA8C,GAAA9C,KAMA,QAAA/C,GAAA,EAAiBA,EAAAvB,SAAAqH,YAAA7F,OAAiCD,IAClD,GAAAvB,SAAAqH,YAAA9F,GAAA+F,YAAAF,EAEA,MAAApH,UAAAqH,YAAA9F,GAKA,QAAAgG,GAAAhC,GACA,GAAA6B,GAAApH,SAAAD,cAAA,QAQA,OAPAqH,GAAAI,aAAA,eAAAjC,EAAA1C,KAEApC,SAAA8E,EAAAsB,OACAO,EAAAI,aAAA,QAAAjC,EAAAsB,OAGAO,EAAAhB,YAAApG,SAAAyH,eAAA,KACAL,EAnDApF,OAAAC,eAAAtD,EAAA,cAA8C+C,UAsD9C,IAAAkF,GAEA,WACA,QAAAA,GAAArB,GACAmC,KAAAC,SAAAlH,SAAA8E,EAAAuB,QAAAvB,EAAAuB,OACAY,KAAAE,QACAF,KAAAG,IAAA,EACAH,KAAAb,MAAAtB,EAAAsB,MAEAa,KAAA7E,IAAA0C,EAAA1C,IACA6E,KAAAhC,UAAAH,EAAAG,UACAgC,KAAAI,OAAA,KAGA,GAAAC,GAAAnB,EAAA/C,SAiEA,OA/DAkE,GAAA1D,OAAA,SAAA2D,GAIA,GAAAN,KAAAG,KAAAH,KAAAC,SAAA,aACA,GAEAG,GAFAG,EAAAV,EAAAG,KAKAI,GADA,IAAAJ,KAAAE,KAAApG,OACAkG,KAAAI,OAEAJ,KAAAE,KAAAF,KAAAE,KAAApG,OAAA,GAAA0G,YAGAR,KAAAhC,UAAAyC,aAAAF,EAAAH,GACAJ,KAAAE,KAAAQ,KAAAH,GAGA,GAAAb,GAAAM,KAAAE,KAAAF,KAAAE,KAAApG,OAAA,EAEA,IAAAkG,KAAAC,SAAA,CACA,GAAArD,GAAA6C,EAAAC,EAEA,KAKA,GAAAiB,GAAA,MAAAL,EAAAvF,WAAA,SAAAuF,EAAAvF,WAAA,EAGA6B,GAAAgE,WAAAN,EASAK,EAAA,EAAA/D,EAAAiE,SAAA/G,QACO,MAAAgH,SAMPpB,GAAAhB,YAAApG,SAAAyH,eAAAO,GAGAN,MAAAG,OAGAE,EAAAU,MAAA,WAEAf,KAAAE,KAAAvC,QAAA,SAAA+B,GACA,MAAAA,GAAAjB,WAAAuC,YAAAtB,KAEAM,KAAAE,QACAF,KAAAG,IAAA,GAGAjB,IAGAjI,GAAAiI,cRmqBM,SAAUhI,EAAQD,GS7yBxB,YAKA,SAAAgK,GAAArI,EAAAsI,EAAAC,GACA,GAAAC,GAAA,EAQA,OAPAD,GAAAzD,MAAA,KAAAC,QAAA,SAAA0D,GACAtI,SAAAH,EAAAyI,GACAH,EAAAR,KAAA9H,EAAAyI,IAEAD,GAAAC,EAAA,MAGAD,EAZA9G,OAAAC,eAAAtD,EAAA,cAA8C+C,UAE9C,IAAAsH,MAYAC,EAAA,SAAAtC,EAAAF,EAAAyC,GACA,GAAAH,GAAApC,EAAA9D,IAAA,IAAA4D,EAAA5F,IAeA,KARAqI,QAIAF,QAAAvI,SAAAkG,EAAAwC,SAAA1I,SAAAkG,EAAArG,WAAAyI,KACApC,EAAArG,WAAAyI,GAAAtC,EAAA3F,QAGAL,SAAAkG,EAAAf,SAAAa,EAAA5F,MAAA,CACA,GAAAuD,GAAAqC,CAEA,GACAE,GAAAtC,OAAA,IAAA0E,EAAA3E,EAAAuC,EAAArC,UAEAF,IAAArD,WACKN,SAAA2D,IAILzF,GAAAgK,sBACAhK,EAAAsK,gBTozBM,SAAUrK,EAAQD;;;;;AU11BxB,YAMA,SAAAyK,GAAAC,GACA,UAAAA,GAAA5I,SAAA4I,EACA,SAAAC,WAAA,wDAGA,OAAAtH,QAAAqH,GAGA,QAAAE,KACA,IACA,IAAAvH,OAAAwH,OACA,QAMA,IAAAC,GAAA,GAAAC,QAAA,MAEA,IADAD,EAAA,QACA,MAAAzH,OAAA2H,oBAAAF,GAAA,GACA,QAKA,QADAG,MACArI,EAAA,EAAiBA,EAAA,GAAQA,IACzBqI,EAAA,IAAAF,OAAAG,aAAAtI,KAEA,IAAAuI,GAAA9H,OAAA2H,oBAAAC,GAAAG,IAAA,SAAAC,GACA,MAAAJ,GAAAI,IAEA,mBAAAF,EAAAG,KAAA,IACA,QAIA,IAAAC,KAIA,OAHA,uBAAA9E,MAAA,IAAAC,QAAA,SAAA8E,GACAD,EAAAC,OAGA,yBADAnI,OAAAoI,KAAApI,OAAAwH,UAAkCU,IAAAD,KAAA,IAMhC,MAAAI,GAEF,UApDA,GAAAC,GAAAtI,OAAAsI,sBACAC,EAAAvI,OAAA6B,UAAA0G,eACAC,EAAAxI,OAAA6B,UAAA4G,oBAsDA7L,GAAAD,QAAA4K,IAAAvH,OAAAwH,OAAA,SAAAkB,EAAAC,GAKA,OAJAC,GAEAC,EADAC,EAAA1B,EAAAsB,GAGAK,EAAA,EAAgBA,EAAA9D,UAAAzF,OAAsBuJ,IAAA,CACtCH,EAAA5I,OAAAiF,UAAA8D,GAEA,QAAAlI,KAAA+H,GACAL,EAAAxL,KAAA6L,EAAA/H,KACAiI,EAAAjI,GAAA+H,EAAA/H,GAIA,IAAAyH,EAAA,CACAO,EAAAP,EAAAM,EACA,QAAArJ,GAAA,EAAkBA,EAAAsJ,EAAArJ,OAAoBD,IACtCiJ,EAAAzL,KAAA6L,EAAAC,EAAAtJ,MACAuJ,EAAAD,EAAAtJ,IAAAqJ,EAAAC,EAAAtJ,MAMA,MAAAuJ,KVw2BM,SAAUlM,EAAQD,EAASH,GWh8BjC,YAEA,SAAAwM,KAEA,GACA,mBAAAC,iCACA,kBAAAA,gCAAAD,SAcA,IAEAC,+BAAAD,YACG,MAAAX,GAGHa,QAAAC,MAAAd,IAOAW,IACApM,EAAAD,QAAAH,EAAA,KX08BM,SAAUI,EAAQD,GY5+BxB,QAAAyM,KAYA,MAXAxM,GAAAD,QAAAyM,EAAApJ,OAAAwH,OAAAxH,OAAAwH,OAAA6B,OAAA,SAAAX,GACA,OAAAnJ,GAAA,EAAmBA,EAAA0F,UAAAzF,OAAsBD,IAAA,CACzC,GAAAoJ,GAAA1D,UAAA1F,EACA,QAAAsB,KAAA8H,GACA3I,OAAA6B,UAAA0G,eAAAxL,KAAA4L,EAAA9H,KACA6H,EAAA7H,GAAA8H,EAAA9H,IAIA,MAAA6H,IACG9L,EAAAD,QAAAU,cAAAT,EAAAD,QAAAW,QAAAV,EAAAD,QACHyM,EAAAE,MAAA5D,KAAAT,WAEArI,EAAAD,QAAAyM,EAAAxM,EAAAD,QAAAU,cAAAT,EAAAD,QAAAW,QAAAV,EAAAD,SZk/BM,SAAUC,EAAQD,GahgCxB,QAAA4M,GAAAZ,EAAAa,GACA,SAAAb,EAAA,QACA,IAEA9H,GAAAtB,EAFAmJ,KACAe,EAAAzJ,OAAAoI,KAAAO,EAEA,KAAApJ,EAAA,EAAaA,EAAAkK,EAAAjK,OAAuBD,IACpCsB,EAAA4I,EAAAlK,GACAiK,EAAAE,QAAA7I,IAAA,IACA6H,EAAA7H,GAAA8H,EAAA9H,GAEA,OAAA6H,GAEA9L,EAAAD,QAAA4M,EAAA3M,EAAAD,QAAAU,cAAAT,EAAAD,QAAAW,QAAAV,EAAAD,SbsgCM,SAAUC,EAAQD,GclhCxB,QAAAgN,GAAAC,EAAA1M,GAKA,MAJAN,GAAAD,QAAAgN,EAAA3J,OAAAgC,eAAAhC,OAAAgC,eAAAqH,OAAA,SAAAO,EAAA1M,GAEA,MADA0M,GAAAC,UAAA3M,EACA0M,GACGhN,EAAAD,QAAAU,cAAAT,EAAAD,QAAAW,QAAAV,EAAAD,QACHgN,EAAAC,EAAA1M,GAEAN,EAAAD,QAAAgN,EAAA/M,EAAAD,QAAAU,cAAAT,EAAAD,QAAAW,QAAAV,EAAAD,SdwhCM,SAAUC,EAAQD,EAASH,Ge/hCjC,YAaA,SAAA0B,GAAAsI,GAA8B,MAAAA,MAAAnJ,WAAAmJ,GAAiClJ,QAAAkJ,GAuL/D,QAAAsD,GAAAxL,EAAAyG,EAAAgC,GACA,GAAAH,MACAE,EAAAiD,EAAApD,oBAAArI,EAAAsI,EAAAG,EAEA,OAAAH,GAAApH,OAAA,EACAuH,EAGAD,EAAA/B,EAAA6B,GA1MA5G,OAAAC,eAAAtD,EAAA,cAA8C+C,UAE9C,IAAAgC,GAAAlF,EAAA,GACAwN,EAAAxN,EAAA,EACAA,GAAA,EACA,IAAAyN,GAAAzN,EAAA,IACAuN,EAAAvN,EAAA,GACA0I,EAAA1I,EAAA,GACA8F,EAAA9F,EAAA,GACAuI,EAAAvI,EAAA,GAIA0N,EAAAhM,EAAAwD,GACAyI,EAAAjM,EAAA6G,GAEAqF,EAAA,SAAAC,EAAAC,GACA,GAAAnJ,GAAA8D,SAEA,UAAAqF,IAAAL,EAAA1B,eAAAxL,KAAAuN,EAAA,OAEA,MAAAN,GAAAjM,cAAAuL,MAAA7K,OAAA0C,EAGA,IAAAoJ,GAAApJ,EAAA3B,OACAgL,EAAA,GAAAnL,OAAAkL,EACAC,GAAA,GAAAP,EAAAQ,QACAD,EAAA,GAAAP,EAAAS,mBAAAL,EAAAC,EAEA,QAAA/K,GAAA,EAAiBA,EAAAgL,EAAgBhL,IACjCiL,EAAAjL,GAAA4B,EAAA5B,EAIA,OAAAyK,GAAAjM,cAAAuL,MAAA,KAAAkB,IAIAG,EAAAV,EAAAW,iBAAA,SAAAN,EAAA3F,GAUA,GAAA7F,GAAAwL,EAAAxL,MAEA,sBAAAA,GACA,MAAAkL,GAAAjM,cAAAkM,EAAAY,aAAAC,SAAA,cAAAC,GACA,GAAAtG,GAAAS,EAAAhE,iBAAApC,EAAAiM,IACA,OAAAf,GAAAjM,cAAAiN,GACAvG,aACAE,WAKA,IAAAF,GAAAS,EAAAhE,iBAAApC,GACA,OAAAkL,GAAAjM,cAAAiN,GACAvG,aACAE,YAOAqG,EAAA,SAAAC,GAGA,QAAAD,GAAAV,EAAA3H,EAAAuI,GACA,MAAAD,GAAAlO,KAAA2I,KAAA4E,EAAA3H,EAAAuI,IAAAxF,KAHAwE,EAAA5M,QAAA0N,EAAAC,EAMA,IAAAlF,GAAAiF,EAAAnJ,SAqDA,OAnDAkE,GAAAoF,kBAAA,WACAzF,KAAApD,MAAA,GAAAA,GAAAsC,YACA/D,IAAA6E,KAAA4E,MAAA3F,MAAA9D,IAAA,UACAgE,MAAAa,KAAA4E,MAAA3F,MAAArC,MAAAuC,MACAnB,UAAAgC,KAAA4E,MAAA3F,MAAArC,MAAAoB,WAGA,IAAAM,GAAAhG,SAAAoN,cAAA,sBAAA1F,KAAA4E,MAAA3F,MAAA9D,IAAA,KAAA6E,KAAA4E,MAAA7F,WAAA5F,KAAA,KAEA,QAAAmF,GACA0B,KAAApD,MAAAsD,KAAAQ,KAAApC,GAGA0B,KAAA4E,MAAA3F,MAAArC,MAAAsD,KAAApG,SACAkG,KAAApD,MAAAwD,OAAAJ,KAAA4E,MAAA3F,MAAArC,MAAAsD,KAAA,IAGAF,KAAAuB,gBAGAlB,EAAAsF,mBAAA,SAAAC,GACAA,EAAA7G,WAAA5F,OAAA6G,KAAA4E,MAAA7F,WAAA5F,MACA6G,KAAAuB,gBAIAlB,EAAAkB,aAAA,WAMA,GALAxI,SAAAiH,KAAA4E,MAAA7F,WAAA1F,MAEAgL,EAAA9C,aAAAvB,KAAA4E,MAAA3F,MAAAe,KAAA4E,MAAA7F,WAAA1F,SAGA2G,KAAApD,MAAAsD,KAAApG,OAAA,CAEA,GAAA+L,GAAA7F,KAAApD,MAAAsD,KAAAF,KAAApD,MAAAsD,KAAApG,OAAA,GAAAgM,kBACA9F,MAAApD,MAAAwD,OAAAyF,EACA7F,KAAApD,MAAAmE,QAGAf,KAAA4E,MAAA3F,MAAAtC,OAAA,GAAAqD,KAAA4E,MAAA7F,WAAAiB,KAAApD,WAGAyD,EAAA0F,qBAAA,WACA/F,KAAApD,MAAAmE,SAGAV,EAAAjI,OAAA,WAEA,aAGAkN,GACChB,EAAA0B,WAEDC,EAAA,WACA,GAAAC,GAAAzB,EAAA7M,QAAAgM,MAAA,OAAArE,WACApG,EAAA,aAAA+M,EAAA/M,IAEA,QACAA,OACAC,OAAA,cAAAD,EAAA,IAAqC+M,EAAA9M,OAAA,IACrCH,KAAA,EACAkN,SAAA,WACA,cAAAnG,KAAA7G,KAAA,IAAA6G,KAAA5G,OAAA,WAKAgN,EAAA,QAAAA,GAAA3K,GAKA,IAJA,GAAA4K,GAAA5K,EAAA3B,OACAD,EAAA,EACAyM,EAAA,GAEQzM,EAAAwM,EAASxM,IAAA,CACjB,GAAA0M,GAAA9K,EAAA5B,EACA,UAAA0M,EAAA,CACA,GAAAC,GAAA,MAEA,cAAAD,IACA,cACA,KAEA,cAEA,GAAA5M,MAAAC,QAAA2M,GACAC,EAAAJ,EAAAG,OACW,CACXC,EAAA,EAEA,QAAAC,KAAAF,GACAA,EAAAE,QACAD,OAAA,KACAA,GAAAC,GAKA,KAGA,SAEAD,EAAAD,EAIAC,IACAF,OAAA,KACAA,GAAAE,IAIA,MAAAF,IAcAI,EAAA,WACA,aAGAC,EAAApC,EAAAW,iBAAA,SAAAN,EAAA3H,GACA,MAAAqH,GAAAjM,cAAAkM,EAAAY,aAAAC,SAAA,cAAAC,GACA,GAAAuB,MAEAvH,EAAA,WAKA,OAAAC,GAAAC,UAAAzF,OAAA2B,EAAA,GAAA9B,OAAA2F,GAAAvF,EAAA,EAAyEA,EAAAuF,EAAavF,IACtF0B,EAAA1B,GAAAwF,UAAAxF,EAGA,IAAAgF,GAAAS,EAAAhE,gBAAAC,EAAAwB,EAAArE,WAMA,OAHAyL,GAAA9C,aAAAtE,EAAA8B,MAGA9B,EAAA9B,IAAA,IAAA4D,EAAA5F,MAGA0N,EAAA,WAKA,OAAAC,GAAAvH,UAAAzF,OAAA2B,EAAA,GAAA9B,OAAAmN,GAAAC,EAAA,EAA4EA,EAAAD,EAAeC,IAC3FtL,EAAAsL,GAAAxH,UAAAwH,EAGA,OAAA3C,GAAAnH,EAAArE,WAAAyG,EAAA+G,EAAA3K,KAGAyB,GACAmC,MACAwH,KACAxB,SAEA2B,EAAApC,EAAAqC,SAAA/J,EACA0J,KACA,IAAAM,GAAA5C,EAAAjM,cAAAqO,EAAA,KAGA,OAAApC,GAAAjM,cAAAiM,EAAA6C,SAAA,KAAAD,EAAAF,MAIA/P,GAAAmQ,cAAA7C,EAAA6C,cACAnQ,EAAAkO,aAAAZ,EAAAY,aACAlO,EAAAiO,iBAAAX,EAAAW,iBACA5K,OAAAC,eAAAtD,EAAA,OACAoQ,cACAC,IAAA,WACA,MAAA7C,GAAA7M,WAGAX,EAAA0P,aACA1P,EAAAgO,SACAhO,EAAAoB,cAAAqM,EACAzN,EAAAyN,MACAzN,EAAAgP,afkiCM,SAAU/O,EAAQD,EAASH,GgBlzCjC,YAQA,SAAA0B,GAAAsI,GAA8B,MAAAA,MAAAnJ,WAAAmJ,GAAiClJ,QAAAkJ,GAN/DhK,EAAA,EACA,IAAAwN,GAAAxN,EAAA,GACA8G,EAAA9G,EAAA,GACAuN,EAAAvN,EAAA,GACA0I,EAAA1I,EAAA,GAIAyQ,EAAA/O,EAAAoF,GAEAiF,EAAAvI,OAAA6B,UAAA0G,eAEA2E,EAAAlD,EAAAmD,cAMA,mBAAAC,aAAAH,EAAA3P,UAAA,MACAuN,EAAAb,EAAAmD,kBACAL,EAAAI,EAAAG,SAEAzC,EAAA,SAAA0C,GACA,GAAAxP,GAAA,SAAAwM,EAAAiD,GACA,MAAAvD,GAAAjM,cAAAmP,EAAApC,SAAA,cAAAnG,GACA,MAAA2I,GAAAhD,EAAA3F,EAAA4I,KAKA,OAAAvD,GAAAwD,WAAA1P,IASA2P,EAAA,qCAEA/C,EAAA,SAAAL,EAAAC,GAMA,GAAAoD,KAEA,QAAA7M,KAAAyJ,GACA/B,EAAAxL,KAAAuN,EAAAzJ,KACA6M,EAAA7M,GAAAyJ,EAAAzJ,GAwBA,OApBA6M,GAAAD,GAAApD,EAoBAqD,GAGAtB,EAAA,WACA,aAGAtO,EAAA,SAAA6G,EAAA2F,EAAAS,EAAAwC,GACA,GAAAI,GAAA,OAAA5C,EAAAT,EAAAvF,IAAAuF,EAAAvF,IAAAgG,EAIA,iBAAA4C,IAAAlP,SAAAkG,EAAArG,WAAAqP,KACAA,EAAAhJ,EAAArG,WAAAqP,GAGA,IAAAtD,GAAAC,EAAAmD,GACA7G,GAAA+G,GACA5G,EAAA,EAEA,iBAAAuD,GAAAvD,UACAA,EAAAgD,EAAApD,oBAAAhC,EAAArG,WAAAsI,EAAA0D,EAAAvD,WACG,MAAAuD,EAAAvD,YACHA,EAAAuD,EAAAvD,UAAA,IAGA,IAAAtC,GAAAS,EAAAhE,gBAAA0F,EAUAmD,GAAA9C,aAAAtC,EAAAF,EAAA,gBAAA4F,IACAtD,GAAApC,EAAA9D,IAAA,IAAA4D,EAAA5F,IACA,IAAA6O,KAEA,QAAA7M,KAAAyJ,GACA/B,EAAAxL,KAAAuN,EAAAzJ,IAAA,QAAAA,OAAA4M,IACAC,EAAA7M,GAAAyJ,EAAAzJ,GAIA6M,GAAAH,MACAG,EAAA3G,WACA,IAAA2F,GAAA1C,EAAAjM,cAAAsM,EAAAqD,GACAd,EAAA5C,EAAAjM,cAAAqO,EAAA,KAGA,OAAApC,GAAAjM,cAAAiM,EAAA6C,SAAA,KAAAD,EAAAF,IAIAjC,EAAAG,EAAA,SAAAN,EAAA3F,EAAA4I,GACA,wBAAAjD,GAAAvF,IACAiF,EAAAjM,cAAA8M,EAAAC,SAAA,cAAAC,GACA,MAAAjN,GAAA6G,EAAA2F,EAAAS,EAAAwC,KAIAzP,EAAA6G,EAAA2F,EAAA,KAAAiD,IAOA5Q,GAAAmQ,gBACAnQ,EAAA8N,UACA9N,EAAAkO,eACAlO,EAAA+N,qBACA/N,EAAA4L,iBACA5L,EAAAiO,oBhBwzCM,SAAUhO,EAAQD,GiBh9CxB,YAOA,SAAAiR,GAAAC,GAYA,IANA,GAEA1B,GAFA2B,EAAA,EAGAvO,EAAA,EACAwM,EAAA8B,EAAArO,OAEQuM,GAAA,IAAUxM,EAAAwM,GAAA,EAClBI,EAAA,IAAA0B,EAAApN,WAAAlB,IAAA,IAAAsO,EAAApN,aAAAlB,KAAA,OAAAsO,EAAApN,aAAAlB,KAAA,QAAAsO,EAAApN,aAAAlB,KAAA,GACA4M,EAEA,kBAAAA,IAAA,OAAAA,IAAA,SACAA,GAEAA,IAAA,GACA2B,EAEA,kBAAA3B,IAAA,OAAAA,IAAA,SAEA,kBAAA2B,IAAA,OAAAA,IAAA,QAIA,QAAA/B,GACA,OACA+B,IAAA,IAAAD,EAAApN,WAAAlB,EAAA,OAEA,QACAuO,IAAA,IAAAD,EAAApN,WAAAlB,EAAA,MAEA,QACAuO,GAAA,IAAAD,EAAApN,WAAAlB,GACAuO,EAEA,kBAAAA,IAAA,OAAAA,IAAA,SASA,MAJAA,QAAA,GACAA,EAEA,kBAAAA,IAAA,OAAAA,IAAA,WACAA,MAAA,SAAAjC,SAAA,IArDA7L,OAAAC,eAAAtD,EAAA,cAA8C+C,WAwD9C/C,EAAAW,QAAAsQ,GjBu9CM,SAAUhR,EAAQD,GkBjhDxB,YAIA,SAAAyD,GAAA2N,GACA,GAAApJ,KACA,iBAAAsH,GAEA,MADAxN,UAAAkG,EAAAsH,KAAAtH,EAAAsH,GAAA8B,EAAA9B,IACAtH,EAAAsH,IANAjM,OAAAC,eAAAtD,EAAA,cAA8C+C,WAU9C/C,EAAAW,QAAA8C,GlBwhDM,SAAUxD,EAAQD,GmBpiDxB,YAIA,SAAAqR,GAAAC,GACA,QAAAC,GAAAC,EAAAlR,EAAAuJ,EAAAsH,EAAAM,GACA,OAAAC,GAAAC,EAAAnC,EAAAoC,EAAAC,EAAAxR,EAAA,EAAAyR,EAAA,EAAAC,EAAA,EAAA1G,EAAA,EAAA2G,EAAA,EAAAC,EAAA,EAAAC,EAAA1C,EAAAkC,EAAA,EAAAS,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA1I,EAAAhH,OAAA2P,EAAAD,EAAA,EAAAE,EAAA,GAAAlS,EAAA,GAAAmS,EAAA,GAAAC,EAAA,GAAyKR,EAAAI,GAAO,CAIhL,GAHAZ,EAAA9H,EAAA/F,WAAAqO,GACAA,IAAAK,GAAA,IAAAV,EAAAzG,EAAA0G,EAAA1R,IAAA,IAAAyR,IAAAH,EAAA,KAAAG,EAAA,OAAAzG,EAAA0G,EAAA1R,EAAA,EAAAkS,IAAAC,KAEA,IAAAV,EAAAzG,EAAA0G,EAAA1R,EAAA,CACA,GAAA8R,IAAAK,IAAA,EAAAJ,IAAAK,IAAAzO,QAAA4O,EAAA,OAAAH,EAAAI,OAAAhQ,QAAA,CACA,OAAA8O,GACA,QACA,OACA,QACA,QACA,QACA,KAEA,SACAc,GAAA5I,EAAAiJ,OAAAX,GAGAR,EAAA,GAGA,OAAAA,GACA,SAKA,IAJAc,IAAAI,OACAnB,EAAAe,EAAA3O,WAAA,GACA0L,EAAA,EAEA8C,IAAAH,EAAyBA,EAAAI,GAAO,CAChC,OAAAZ,EAAA9H,EAAA/F,WAAAqO,IACA,SACA3C,GACA,MAEA,UACAA,GACA,MAEA,SACA,OAAAmC,EAAA9H,EAAA/F,WAAAqO,EAAA,IACA,QACA,QACAV,EAAA,CACA,IAAAS,EAAAC,EAAA,EAAuCD,EAAAM,IAAON,EAC9C,OAAArI,EAAA/F,WAAAoO,IACA,QACA,QAAAP,GAAA,KAAA9H,EAAA/F,WAAAoO,EAAA,IAAAC,EAAA,IAAAD,EAAA,CACAC,EAAAD,EAAA,CACA,MAAAT,GAGA,KAEA,SACA,QAAAE,EAAA,CACAQ,EAAAD,EAAA,CACA,MAAAT,IAMAU,EAAAD,GAKA,KAEA,SACAP,GAEA,SACAA,GAEA,SACA,QACA,KAAwBQ,IAAAK,GAAA3I,EAAA/F,WAAAqO,KAAAR,KAKxB,OAAAnC,EAAA,KACA2C,KAMA,OAHA3C,EAAA3F,EAAAkJ,UAAAT,EAAAH,GACA,IAAAT,OAAAe,IAAAzO,QAAAgP,EAAA,IAAAH,QAAA/O,WAAA,IAEA4N,GACA,QAIA,OAHA,EAAAU,IAAAK,IAAAzO,QAAA4O,EAAA,KACAjB,EAAAc,EAAA3O,WAAA,IAGA,SACA,SACA,SACA,QACAsO,EAAA9R,CACA,MAEA,SACA8R,EAAAa,EAMA,GAHAzD,EAAA+B,EAAAjR,EAAA8R,EAAA5C,EAAAmC,EAAAF,EAAA,GACAa,EAAA9C,EAAA3M,OACA,EAAAqQ,IAAAd,EAAAe,EAAAF,EAAAR,EAAAJ,GAAAR,EAAAuB,EAAA,EAAA5D,EAAA4C,EAAA9R,EAAA+S,EAAAC,EAAAhB,EAAAX,EAAAF,EAAAN,GAAAsB,EAAAL,EAAA9G,KAAA,aAAAuG,GAAA,KAAAS,GAAA9C,EAAAqC,EAAAgB,QAAAhQ,UAAA8O,EAAA,EAAAnC,EAAA,KACA,EAAA8C,EAAA,OAAAX,GACA,SACAc,IAAAzO,QAAAuP,EAAAC,EAEA,UACA,SACA,QACAhE,EAAAiD,EAAA,IAA8BjD,EAAA,GAC9B,MAEA,UACAiD,IAAAzO,QAAAyP,EAAA,SACAjE,EAAAiD,EAAA,IAA8BjD,EAAA,IAC9BA,EAAA,IAAAkE,GAAA,IAAAA,GAAAC,EAAA,IAAAnE,EAAA,eAAAA,EAAA,IAAAA,EAAA,IAAAA,CACA,MAEA,SACAA,EAAAiD,EAAAjD,EAAA,MAAA2B,IAAA5Q,GAAAiP,IAAA,QACiBA,GAAA,EACjB,MAEA,SACAA,EAAA+B,EAAAjR,EAAA6S,EAAA7S,EAAAmS,EAAAJ,GAAA7C,EAAA2B,EAAAM,EAAA,GAGAiB,GAAAlD,EACAA,EAAA6C,EAAAD,EAAAF,EAAAR,EAAA,EACAe,EAAA,GACAd,EAAA9H,EAAA/F,aAAAqO,EACA,MAEA,UACA,QAEA,GADAM,GAAA,EAAAL,EAAAK,EAAAzO,QAAA4O,EAAA,IAAAH,GAAAI,OACA,GAAAP,EAAAG,EAAA5P,QAAA,WAAAqP,IAAAR,EAAAe,EAAA3O,WAAA,QAAA4N,GAAA,GAAAA,GAAA,IAAAA,KAAAY,GAAAG,IAAAzO,QAAA,UAAAnB,QAAA,EAAAqQ,GAAA,UAAArB,EAAAuB,EAAA,EAAAX,EAAAnS,EAAAkR,EAAA6B,EAAAC,EAAA/S,EAAAsC,OAAAsO,EAAAM,EAAAN,KAAA,KAAAmB,GAAAG,EAAAZ,EAAAgB,QAAAhQ,UAAA4P,EAAA,QAAAf,EAAAe,EAAA3O,WAAA,GAAA6N,EAAAc,EAAA3O,WAAA,GAAA4N,GACA,OACA,KAEA,SACA,SAAAC,GAAA,KAAAA,EAAA,CACAgB,GAAAF,EAAA5I,EAAAiJ,OAAAX,EACA,OAGA,QACA,KAAAM,EAAA3O,WAAAwO,EAAA,KAAA/R,GAAAqT,EAAAnB,EAAAf,EAAAC,EAAAc,EAAA3O,WAAA,KAEAuO,EAAAD,EAAAF,EAAAR,EAAA,EACAe,EAAA,GACAd,EAAA9H,EAAA/F,aAAAqO,IAIA,OAAAR,GACA,QACA,QACA,KAAAG,IAAA,QAAAJ,GAAA,MAAAP,GAAA,EAAAsB,EAAA5P,SAAAuP,EAAA,EAAAK,GAAA,MACA,EAAAS,EAAAW,GAAAT,EAAA,EAAAX,EAAAnS,EAAAkR,EAAA6B,EAAAC,EAAA/S,EAAAsC,OAAAsO,EAAAM,EAAAN,GACAmC,EAAA,EACAD,GACA,MAEA,SACA,SACA,OAAAvB,EAAAzG,EAAA0G,EAAA1R,EAAA,CACAiT,GACA,OAGA,QAIA,OAHAA,IACA1B,EAAA/H,EAAAiJ,OAAAX,GAEAR,GACA,OACA,QACA,OAAAtG,EAAAhL,EAAAyR,EAAA,OAAAE,GACA,QACA,QACA,OACA,QACAJ,EAAA,EACA,MAEA,SACA,KAAAD,IAAAC,EAAA,KAEA,KAEA,QACAA,EAAA,KACA,MAEA,SACAA,EAAA,KACA,MAEA,SACAA,EAAA,KACA,MAEA,SACA,IAAAvG,EAAAyG,EAAAzR,IAAA+R,EAAAC,EAAA,EAAAT,EAAA,KAAAA,EACA,MAEA,UACA,OAAAvG,EAAAyG,EAAAzR,EAAAyT,GAAA,EAAA5B,EAAA,OAAAC,EAAAD,GACA,OACA,MAAAF,GAAA,KAAAnI,EAAA/F,WAAAqO,EAAA,KAAA2B,EAAA9B,EAEA,QACA,MAAAC,IAAA6B,EAAA7B,GAEA,KAEA,SACA,IAAA5G,EAAAyG,EAAAzR,IAAA6R,EAAAC,EACA,MAEA,SACA,IAAAL,EAAAC,EAAA1G,EAAAhL,IAAA+R,EAAA,EAAAR,GAAA,KACA,MAEA,SACA,QACA,IAAAE,IAAAzG,MAAAsG,EAAA,MAAAtG,EAAAsG,EAAAtG,EACA,MAEA,SACA,IAAAA,EAAAyG,EAAAC,GAAA1R,GACA,MAEA,SACA,IAAAgL,EAAAyG,EAAAC,GAAA1R,GACA,MAEA,SACA,IAAAgL,EAAAyG,EAAAzR,GAAA0R,GACA,MAEA,SACA,OAAA1G,EAAAyG,EAAAzR,EAAA,CACA,OAAAqR,EAAA,SAAAM,EAAA,EAAAC,GACA,SACA,KAEA,SACAP,EAAA,EAEAK,IAGA,KAEA,SACA,IAAAD,EAAAC,EAAA1G,EAAAhL,EAAA6R,EAAA1C,MAAA,EACA,MAEA,SACA,QACA,OAAAnE,EAAAhL,EAAA0R,GAAA,OAAAD,GACA,OACA,SAAAH,EAAA,EAAA9H,EAAA/F,WAAAqO,EAAA,IACA,SACAL,EAAA,EACA,MAEA,UACAQ,EAAAH,EAAAL,EAAA,GAGA,KAEA,SACA,KAAAH,GAAA,KAAAK,GAAAM,EAAA,IAAAH,IAAA,KAAAtI,EAAA/F,WAAAwO,EAAA,KAAA/R,GAAAsJ,EAAAkJ,UAAAT,EAAAH,EAAA,IAAAP,EAAA,GAAAE,EAAA,IAIA,IAAAA,IAAAW,GAAAb,GAGAK,EAAAD,EACAA,EAAAL,EACAQ,IAKA,GAFAG,EAAA/R,EAAAsC,OAEA,EAAAyP,EAAA,CAEA,GADAF,EAAA9R,EACA,EAAA4S,IAAArB,EAAAuB,EAAA,EAAA7S,EAAA6R,EAAAZ,EAAA6B,EAAAC,EAAAhB,EAAAnB,EAAAM,EAAAN,GAAA,SAAAU,GAAA,KAAAtR,EAAAsR,GAAAhP,QAAA,MAAA8P,GAAApS,EAAAmS,CAGA,IAFAnS,EAAA6R,EAAA9G,KAAA,SAA0B/K,EAAA,IAE1B,IAAAmT,EAAAI,EAAA,CAGA,OAFA,IAAAJ,GAAAC,EAAApT,EAAA,KAAAuT,EAAA,GAEAA,GACA,SACAvT,IAAAyD,QAAA+P,EAAA,YAAAxT,CACA,MAEA,UACAA,IAAAyD,QAAAgQ,EAAA,sBAAAzT,EAAAyD,QAAAgQ,EAAA,aAAAzT,EAAAyD,QAAAgQ,EAAA,iBAAAzT,EAGAuT,EAAA,GAIA,MAAAnB,GAAApS,EAAAmS,EAGA,QAAAS,GAAA3B,EAAAlR,EAAAuJ,GACA,GAAAsH,GAAA7Q,EAAAuS,OAAApM,MAAAwN,EACA3T,GAAA6Q,CACA,IAAAM,GAAAN,EAAAtO,OACAxC,EAAAmR,EAAA3O,MAEA,QAAAxC,GACA,OACA,OACA,GAAAyR,GAAA,CAEA,KAAAN,EAAA,IAAAnR,EAAA,GAAAmR,EAAA,OAA2CM,EAAAL,IAAOK,EAClDxR,EAAAwR,GAAAoC,EAAA1C,EAAAlR,EAAAwR,GAAAjI,GAAAgJ,MAGA,MAEA,SACA,GAAAd,GAAAD,EAAA,CAEA,KAAAxR,KAAoBwR,EAAAL,IAAOK,EAC3B,OAAAzG,GAAA,EAAyBA,EAAAhL,IAAOgL,EAChC/K,EAAAyR,KAAAmC,EAAA1C,EAAAnG,GAAA,IAAA8F,EAAAW,GAAAjI,GAAAgJ,OAMA,MAAAvS,GAGA,QAAA4T,GAAA1C,EAAAlR,EAAAuJ,GACA,GAAAsH,GAAA7Q,EAAAwD,WAAA,EAGA,QAFA,GAAAqN,OAAA7Q,IAAAuS,QAAA/O,WAAA,IAEAqN,GACA,QACA,MAAA7Q,GAAA0D,QAAA0O,EAAA,KAAAlB,EAAAqB,OAEA,SACA,MAAArB,GAAAqB,OAAAvS,EAAA0D,QAAA0O,EAAA,KAAAlB,EAAAqB,OAEA,SACA,OAAAhJ,GAAA,EAAAvJ,EAAAyM,QAAA,YAAAzM,GAAA0D,QAAA0O,GAAA,KAAAlB,EAAA1N,WAAA,YAAA0N,EAAAqB,QAGA,MAAArB,GAAAlR,EAGA,QAAAsT,GAAApC,EAAAlR,EAAAuJ,EAAAsH,GACA,GAAAM,GAAAD,EAAA,IACAnR,EAAA,EAAAC,EAAA,EAAAuJ,EAAA,EAAAsH,CAEA,UAAA9Q,EAAA,CACAmR,EAAAC,EAAA1E,QAAA,QACA,IAAA+E,GAAAL,EAAAsB,UAAAvB,EAAAC,EAAA5O,OAAA,GAAAgQ,MAEA,OADAf,GAAAL,EAAAsB,UAAA,EAAAvB,GAAAqB,OAAAf,EAAA,IACA,IAAA4B,GAAA,IAAAA,GAAAC,EAAA7B,EAAA,cAAAA,MAGA,OAAA4B,GAAA,IAAAA,IAAAC,EAAAlC,EAAA,SAAAA,EAEA,QAAApR,GACA,UACA,YAAAoR,EAAA3N,WAAA,eAAA2N,KAEA,UACA,aAAAA,EAAA3N,WAAA,cAAA2N,KAEA,UACA,aAAAA,EAAA3N,WAAA,cAAA2N,KAEA,WACA,SAAAA,EAAA3N,WAAA,QAEA,UACA,SACA,iBAAA2N,GAEA,UACA,iBAAAA,EAAA,QAAAA,GAEA,WACA,SACA,iBAAAA,EAAA,QAAAA,EAAA,OAAAA,GAEA,UACA,QAAAA,EAAA3N,WAAA,oBAAA2N,GACA,MAAAA,EAAA1E,QAAA,uBAAA0E,GAAAzN,QAAAmQ,EAAA,gBAAA1C,CACA,MAEA,UACA,QAAAA,EAAA3N,WAAA,UAAA2N,EAAA3N,WAAA,IACA,SACA,qBAAA2N,EAAAzN,QAAA,uBAAAyN,EAAA,OAAAA,EAAAzN,QAAA,mBAAAyN,CAEA,UACA,iBAAAA,EAAA,OAAAA,EAAAzN,QAAA,qBAAAyN,CAEA,SACA,iBAAAA,EAAA,OAAAA,EAAAzN,QAAA,0BAAAyN,EAEA,iBAAAA,EAAA,OAAAA,GAEA,UACA,iBAAAA,EAAA,YAAAA,GAEA,WACA,QAAAA,EAAA3N,WAAA,QAEA,OADAgO,GAAAL,EAAAsB,UAAAtB,EAAA1E,QAAA,SAAA/I,QAAA,YAAAA,QAAA,2BACA,mBAAA8N,EAAA,WAAAL,EAAA,gBAAAK,EAAAL,CAEA,WACA,MAAA2C,GAAAC,KAAA5C,KAAAzN,QAAAsQ,EAAA,aAAA7C,EAAAzN,QAAAsQ,EAAA,UAAA7C,GAEA,UAIA,OAHAK,EAAAL,EAAAsB,UAAA,IAAAF,OACAvS,EAAAwR,EAAA/E,QAAA,OAEA+E,EAAAhO,WAAA,GAAAgO,EAAAhO,WAAAxD,IACA,SACAwR,EAAAL,EAAAzN,QAAA2O,EAAA,KACA,MAEA,UACAb,EAAAL,EAAAzN,QAAA2O,EAAA,QACA,MAEA,UACAb,EAAAL,EAAAzN,QAAA2O,EAAA,KACA,MAEA,SACA,MAAAlB,GAGA,iBAAAA,EAAA,OAAAK,EAAAL,CAEA,WACA,QAAAA,EAAA1E,QAAA,iBAEA,UAIA,OAHAzM,GAAAmR,EAAAD,GAAA3O,OAAA,GACAiP,GAAA,KAAAL,EAAA3N,WAAAxD,GAAAmR,EAAAsB,UAAA,EAAAzS,GAAAmR,GAAAsB,UAAAvB,EAAAzE,QAAA,UAAA8F,OAEAxS,EAAAyR,EAAAhO,WAAA,MAAAgO,EAAAhO,WAAA,KACA,SACA,OAAAgO,EAAAhO,WAAA,QAEA,UACA2N,IAAAzN,QAAA8N,EAAA,WAAAA,GAAA,IAAiDL,CACjD,MAEA,UACA,SACAA,IAAAzN,QAAA8N,EAAA,gBAAAzR,EAAA,yBAAkFoR,EAAAzN,QAAA8N,EAAA,WAAAA,GAAA,IAAqCL,EAAAzN,QAAA8N,EAAA,OAAAA,EAAA,WAAyCL,EAGhK,MAAAA,GAAA,GAEA,UACA,QAAAA,EAAA3N,WAAA,UAAA2N,EAAA3N,WAAA,IACA,SACA,MAAAgO,GAAAL,EAAAzN,QAAA,wBAAAyN,EAAA,eAAAK,EAAA,YAAAA,EAAAL,CAEA,UACA,iBAAAA,EAAA,iBAAAA,EAAAzN,QAAAuQ,EAAA,IAAA9C,CAEA,SACA,iBAAAA,EAAA,qBAAAA,EAAAzN,QAAA,oBAAAA,QAAAuQ,EAAA,IAAA9C,EAEA,KAEA,UACA,SACA,QAAAA,EAAA3N,WAAA,UAAA2N,EAAA3N,WAAA,QAEA,UACA,SACA,QAAA0Q,EAAAH,KAAA7C,GAAA,cAAAM,EAAAN,EAAAuB,UAAAvB,EAAAzE,QAAA,SAAAjJ,WAAA,GAAA8P,EAAApC,EAAAxN,QAAA,4BAAA1D,EAAAuJ,EAAAsH,GAAAnN,QAAA,8BAAAyN,EAAAzN,QAAA8N,EAAA,WAAAA,GAAAL,EAAAzN,QAAA8N,EAAA,QAAAA,EAAA9N,QAAA,aAAAyN,CACA,MAEA,UACA,GAAAA,EAAA,WAAAA,GAAA,MAAAA,EAAA3N,WAAA,UAAA2N,EAAA,IAAAA,EAAA,MAAA5H,EAAAsH,GAAA,MAAAM,EAAA3N,WAAA,OAAA2N,EAAA1E,QAAA,sBAAA0E,GAAAsB,UAAA,EAAAtB,EAAA1E,QAAA,IAAiM,OAAA/I,QAAAyQ,EAAA,gBAAAhD,EAGjM,MAAAA,GAGA,QAAAkC,GAAAnC,EAAAlR,GACA,GAAAuJ,GAAA2H,EAAAzE,QAAA,IAAAzM,EAAA,SACA6Q,EAAAK,EAAAuB,UAAA,MAAAzS,EAAAuJ,EAAA,GAEA,OADAA,GAAA2H,EAAAuB,UAAAlJ,EAAA,EAAA2H,EAAA3O,OAAA,GACA6R,EAAA,IAAApU,EAAA6Q,IAAAnN,QAAA2Q,EAAA,MAAA9K,EAAAvJ,GAGA,QAAAkT,GAAAhC,EAAAlR,GACA,GAAAuJ,GAAA+J,EAAAtT,IAAAwD,WAAA,GAAAxD,EAAAwD,WAAA,GAAAxD,EAAAwD,WAAA,GACA,OAAA+F,KAAAvJ,EAAA,IAAuBuJ,EAAA7F,QAAA4Q,EAAA,YAAA7B,UAAA,OAAAzS,EAAA,IAGvB,QAAA8S,GAAA5B,EAAAlR,EAAAuJ,EAAAsH,EAAAM,EAAApR,EAAAyR,EAAAC,EAAA1G,EAAAqG,GACA,OAAAgC,GAAA/B,EAAA,EAAAK,EAAA1R,EAA6BqR,EAAAuB,IAAOvB,EACpC,OAAA+B,EAAAmB,EAAAlD,GAAAvR,KAAAmS,EAAAf,EAAAQ,EAAAnI,EAAAsH,EAAAM,EAAApR,EAAAyR,EAAAC,EAAA1G,EAAAqG,IACA,YACA,OACA,OACA,UACA,KAEA,SACAM,EAAA0B,EAIA,GAAA1B,IAAA1R,EAAA,MAAA0R,GAGA,QAAA8C,GAAAtD,GACA,OAAAA,GACA,YACA,UACA0B,EAAA2B,EAAAhS,OAAA,CACA,MAEA,SACA,qBAAA2O,GAAAqD,EAAA3B,KAAA1B,MAAgD,oBAAAA,GAAA,OAAAlR,GAAA,EAAAuJ,EAAA2H,EAAA3O,OAA6DvC,EAAAuJ,IAAOvJ,EACpHwU,EAAAtD,EAAAlR,QACSuT,GAAA,IAAArC,EAGT,MAAAsD,GAGA,QAAAC,GAAAvD,GAGA,MAFAA,KAAA1K,OACA,SAAA0K,IAAAkD,EAAA,KAAAlD,EAAA,kBAAAA,GAAAkC,EAAA,GAAAA,EAAA,EAAAgB,EAAAlD,GAAAkC,EAAA,GACAqB,EAGA,QAAAxC,GAAAf,EAAAlR,GACA,GAAAuJ,GAAA2H,CAKA,IAJA,GAAA3H,EAAA/F,WAAA,KAAA+F,IAAAgJ,QACAmC,EAAAnL,EACAA,GAAAmL,GAEA,EAAA9B,EAAA,CACA,GAAA/B,GAAAiC,KAAA9S,EAAAuJ,IAAAwJ,EAAAC,EAAA,QACA,UAAAnC,GAAA,gBAAAA,KAAA7Q,EAAA6Q,GAGA,GAAAM,GAAAF,EAAA0B,EAAApJ,EAAAvJ,EAAA,IAKA,OAJA,GAAA4S,IAAA/B,EAAAiC,KAAA3B,EAAA5H,IAAAwJ,EAAAC,EAAA7B,EAAA5O,OAAA,gBAAAsO,IAAAM,EAAAN,IACA6D,EAAA,GACAlB,EAAA,EACAR,EAAAD,EAAA,EACA5B,EAGA,GAAAuB,GAAA,QACAJ,EAAA,YACA0B,EAAA,OACAF,EAAA,UACAK,EAAA,sBACAR,EAAA,SACAvB,EAAA,oBACAe,EAAA,qBACAO,EAAA,aACAD,EAAA,gBACApB,EAAA,qBACAY,EAAA,kBACAqB,EAAA,eACAL,EAAA,eACAI,EAAA,8BACAH,EAAA,mCACAL,EAAA,sBACAb,EAAA,EACAD,EAAA,EACAS,EAAA,EACAJ,EAAA,EACAT,KACA4B,KACA3B,EAAA,EACAwB,EAAA,KACAb,EAAA,EACAmB,EAAA,EAIA,OAHAzC,GAAA5K,IAAAmN,EACAvC,EAAA0C,IAAAF,EACA,SAAAzD,GAAAyD,EAAAzD,GACAiB,EArmBAlP,OAAAC,eAAAtD,EAAA,cAA8C+C,WAwmB9C/C,EAAAW,QAAA0Q,GnB2iDM,SAAUpR,EAAQD,GoBrpExB,YAEAqD,QAAAC,eAAAtD,EAAA,cAA8C+C,UAE9C,IAAAmS,IACAC,wBAAA,EACAC,kBAAA,EACAC,iBAAA,EACAC,iBAAA,EACAC,QAAA,EACAC,aAAA,EACAC,gBAAA,EACAC,YAAA,EACAC,QAAA,EACAC,KAAA,EACAC,SAAA,EACAC,aAAA,EACAC,WAAA,EACAC,aAAA,EACAC,UAAA,EACAC,QAAA,EACAC,WAAA,EACAC,YAAA,EACAC,aAAA,EACAC,WAAA,EACAC,cAAA,EACAC,eAAA,EACAC,gBAAA,EACAC,UAAA,EACAC,cAAA,EACAC,aAAA,EACAC,iBAAA,EACAC,WAAA,EACAC,WAAA,EACAC,QAAA,EACAC,MAAA,EACAC,QAAA,EACAC,QAAA,EACAC,OAAA,EACAC,OAAA,EACAC,KAAA,EACAC,gBAAA,EAEAC,YAAA,EACAC,aAAA,EACAC,YAAA,EACAC,gBAAA,EACAC,iBAAA,EACAC,iBAAA,EACAC,cAAA,EACAC,YAAA,EAGA/X,GAAAW,QAAAuU,GpB4pEM,SAAUjV,EAAQD,GqBjtExB,YAEAqD,QAAAC,eAAAtD,EAAA,cAA8C+C,UAE9C,IAAAiV,GAAA,SAAArH,GAEA,GAAA3I,GAAA,GAAAiQ,QACA,iBAAA3I,GACA,GAAAtH,EAAAkQ,IAAA5I,GAEA,MAAAtH,GAAAqI,IAAAf,EAGA,IAAA6I,GAAAxH,EAAArB,EAEA,OADAtH,GAAAiN,IAAA3F,EAAA6I,GACAA,GAIAnY,GAAAW,QAAAqX,GrBwtEM,SAAU/X,EAAQD,EAASH,GAEhC,YAcA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAZvF4C,OAAOC,eAAetD,EAAS,cAC7B+C,UsBhvEH,IAAAnC,GAAAf,EAAA,GtBqvEKgB,EAAUL,EAAuBI,GsBpvEtCI,EAAAnB,EAAA,ItBwvEKoB,EAAQT,EAAuBQ,GsBvvE9BoX,EAAM,WACV,MACEvX,GAAAF,QAAAS,cAACH,EAAAN,SACC0X,QACE,sFAEFC,MAAM,qBACNC,SACAC,MAAO,KACPC,OAAQ,IACRC,UACAC,aAAc,SAACC,GACbrM,QAAQsM,IAAID,MtB6vEnB5Y,GAAQW,QsBvvEMyX,EtBwvEdnY,EAAOD,QAAUA,EAAiBW,SAI7B,SAAUV,EAAQD,EAASH,GAEhC,YAsBA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GApBvF4C,OAAOC,eAAetD,EAAS,cAC7B+C,UAGF,IAAI0J,GAAWpJ,OAAOwH,QAAU,SAAUkB,GAAU,IAAK,GAAInJ,GAAI,EAAGA,EAAI0F,UAAUzF,OAAQD,IAAK,CAAE,GAAIoJ,GAAS1D,UAAU1F,EAAI,KAAK,GAAIsB,KAAO8H,GAAc3I,OAAO6B,UAAU0G,eAAexL,KAAK4L,EAAQ9H,KAAQ6H,EAAO7H,GAAO8H,EAAO9H,IAAY,MAAO6H,IAEnP+M,EAAiB,WAAc,QAASC,GAAcC,EAAKpW,GAAK,GAAIqW,MAAeC,KAAeC,KAAgBC,EAAKtX,MAAW,KAAM,IAAK,GAAiCuX,GAA7BjW,EAAK4V,EAAIM,OAAOC,cAAmBL,GAAMG,EAAKjW,EAAGhB,QAAQoX,QAAoBP,EAAKxP,KAAK4P,EAAGtW,QAAYH,GAAKqW,EAAKpW,SAAWD,GAA3DsW,OAAyE,MAAOxN,GAAOyN,KAAWC,EAAK1N,EAAO,QAAU,KAAWwN,GAAM9V,EAAWqW,QAAGrW,EAAWqW,SAAO,QAAU,GAAIN,EAAI,KAAMC,IAAQ,MAAOH,GAAQ,MAAO,UAAUD,EAAKpW,GAAK,GAAIF,MAAMC,QAAQqW,GAAQ,MAAOA,EAAY,IAAIM,OAAOC,WAAYlW,QAAO2V,GAAQ,MAAOD,GAAcC,EAAKpW,EAAa,MAAM,IAAI+H,WAAU,4DuB1xEvlB/J,EAAAf,EAAA,GvB8xEKgB,EAAUL,EAAuBI,GuB7xEtC8Y,EAAA7Z,EAAA,IvBiyEK8Z,EAAcnZ,EAAuBkZ,GuBhyE1CE,EAAA/Z,EAAA,IvBoyEKga,EAAqBrZ,EAAuBoZ,GuBnyE3CxB,EAAM,SAACzK,GAAU,GAQnB0K,GAUE1K,EAVF0K,OACAC,EASE3K,EATF2K,MATmBwB,EAkBjBnM,EARFoM,SAVmBjY,SAAAgY,KAAAE,EAkBjBrM,EAPF4K,QAXmBzW,SAAAkY,KAAAC,EAkBjBtM,EANF+K,SAZmB5W,SAAAmY,KAanBzB,EAKE7K,EALF6K,MACAC,EAIE9K,EAJF8K,OACAyB,EAGEvM,EAHFuM,gBACA9P,EAEEuD,EAFFvD,UAhBmB+P,EAkBjBxM,EADFgL,eAjBmB7W,SAAAqY,EAiBJ,aAjBIA,EAAAC,KAwBSxZ,EAAAyZ,cAxBTC,EAAAxB,EAAAsB,EAAA,GAwBdG,EAxBcD,EAAA,GAwBLE,EAxBKF,EAAA,EAiCrB,UARA1Z,EAAA6Z,WAAU,WACRD,EACEnC,EAAOjN,IAAI,SAACsP,EAAGC,GAAJ,OACTA,QACA5X,MAAO,QAGTsV,IACCA,GAA6B,IAAnBkC,EAAQ1X,OAErBhC,EAAAF,QAAAS,cAAA,WACEP,EAAAF,QAAAS,cAAA,OAAKwZ,OAASC,OAAQ,aACnBtC,GACCgC,EAAQnP,IAAI,SAACwN,EAAM+B,GACjB,MACE9Z,GAAAF,QAAAS,cAAA,OACE8C,IAAKyW,EACLC,OACEC,OAAQ,WACRC,QAAS,OACTC,WAAY,SACZC,eAAgB,kBAGlBna,EAAAF,QAAAS,cAAA,WACEP,EAAAF,QAAAS,cAAA,SACEsM,KAAK,WACLuN,QAASV,EAAQI,GAAO5X,MAAQ,EAChCmY,QAAS,SAACrR,GACR,GAAMsR,GAAaZ,EAAQnP,IAAI,SAACwN,EAAMhW,GACpC,MAAIA,KAAM+X,EACJ9Q,EAAEkC,OAAOkP,QACXxO,KAAYmM,GAAM7V,MAAO,IAEzB0J,KAAYmM,GAAM7V,MAAO,IAGtB6V,GAET4B,GAAWW,MAGfta,EAAAF,QAAAS,cAACyY,EAAAlZ,SACCya,KAAK,IACLC,MAAO,GACPC,KAAM,EACNC,KAAM,EACNvJ,EAAG4G,EAAK7V,MACRyY,SAAU,SAAAC,GAAW,GAARzJ,GAAQyJ,EAARzJ,EACLmJ,EAAaZ,EAAQnP,IAAI,SAACwN,EAAMhW,GACpC,MAAIA,KAAM+X,EACRlO,KAAYmM,GAAM7V,MAAO2Y,WAAW1J,KAE/B4G,GAET4B,GAAWW,IAEbP,OAASe,WAAY,WAGxBjD,GACC7X,EAAAF,QAAAS,cAAA,KAAGwa,KAAK,UACN/a,EAAAF,QAAAS,cAAA,OACEya,IAAI,gFACJjB,OAASpC,MAAO,OAAQvW,OAAQ,WAChCiZ,QAAS,WACPvC,EAAaN,EAAOsC,YAStC9Z,EAAAF,QAAAS,cAACuY,EAAAhZ,SACCmb,WAAYxD,EACZyB,OAAQA,EACRQ,QAASA,EACTlC,OAAQA,EACRG,MAAOA,EACPC,OAAQA,EACRyB,gBAAiBA,EACjB9P,UAAWA,KA3E2B,KvBm4E7CpK,GAAQW,QuBnzEMyX,EvBozEdnY,EAAOD,QAAUA,EAAiBW,SAI7B,SAAUV,EAAQD,EAASH,GAEhC,YAgBA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASsb,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAItR,WAAU,qCAhBhHtH,OAAOC,eAAetD,EAAS,cAC7B+C,UAGF,IAAImZ,GAAe,WAAc,QAASC,GAAiBpQ,EAAQ4B,GAAS,IAAK,GAAI/K,GAAI,EAAGA,EAAI+K,EAAM9K,OAAQD,IAAK,CAAE,GAAIwZ,GAAazO,EAAM/K,EAAIwZ,GAAWhM,WAAagM,EAAWhM,eAAqBgM,EAAWC,gBAAyB,SAAWD,KAAYA,EAAWE,aAAiBjZ,OAAOC,eAAeyI,EAAQqQ,EAAWlY,IAAKkY,IAAiB,MAAO,UAAUH,EAAaM,EAAYC,GAAiJ,MAA9HD,IAAYJ,EAAiBF,EAAY/W,UAAWqX,GAAiBC,GAAaL,EAAiBF,EAAaO,GAAqBP,MwBp7EjiBQ,EAAA5c,EAAA,IxBw7EK6c,EAAUlc,EAAuBic,GwBv7EtC3b,EAAAjB,EAAA,GxB27EKkB,EAAaP,EAAuBM,GwB17ErC6b,EAAgB9c,EAAQ,IAAwB+c,WAE9CC,EAAoB,mBAEpBC,ExBg8EO,WwB/7EX,QAAAA,KAAcf,EAAAhT,KAAA+T,GACZ/T,KAAKgU,OAAS,GAAIH,WAAMI,UACxBjU,KAAKkU,MAAQ,GAAIL,WAAMM,MACvBnU,KAAKoU,SAAW,GAAIP,WAAMQ,eACxBC,eAEFtU,KAAKuU,UAAY,EACjBvU,KAAK5I,UACL4I,KAAKwU,MAAQzb,OxBuuFd,MAlSAoa,GAAaY,IACX5Y,IAAK,OACLnB,MAAO,SwBp8ELiD,EAASuU,EAASlC,GAAQ,GAAAmF,GAAAzU,IAC7BA,MAAKsP,OAASA,EACdtP,KAAKwR,QAAUA,EACfxR,KAAK0U,UAAYzX,EACjB+C,KAAKyP,MAAQxS,EAAQ2H,MAAM6K,MAC3BzP,KAAK0P,OAASzS,EAAQ2H,MAAM8K,OAC5B1P,KAAK+S,WAAa9V,EAAQ2H,MAAMmO,WAChC/S,KAAKmR,gBAAkBlU,EAAQ2H,MAAMuM,gBACrCnR,KAAK2U,cAAgB1X,EAAQ2H,MAAM+P,cACnC3U,KAAKgR,OAAS/T,EAAQ2H,MAAMoM,OAC5BhR,KAAK4U,QAAU3X,EAAQ2H,MAAMgQ,QAC7B5U,KAAK6U,QAAU5X,EAAQ2H,MAAMiQ,QAC7B7U,KAAK8U,QAAU7X,EAAQ2H,MAAMkQ,QAC7B9U,KAAK+U,eAAiB9X,EAAQ2H,MAAMmQ,eACpC/U,KAAKgV,OAAS/X,EAAQ2H,MAAMoQ,OAC5BhV,KAAKiV,WAAahY,EAAQ2H,MAAMqQ,WAChCjV,KAAKkV,MAAQjY,EAAQ2H,MAAMsQ,MASvBlV,KAAKmV,oBACPC,qBAAqBpV,KAAKmV,oBAG5BnV,KAAKqV,SAAW,IAEhBrV,KAAKuU,WAAa,EACbvU,KAAK5I,QAAQ4I,KAAKsV,cAActV,KAAKuU,UAC1C,IAAMgB,GAAevV,KAAKkU,MAAMjN,SAASuO,OACvC,SAAC3F,GAAD,MAAwB,SAAdA,EAAKlL,MAEb4Q,GAAazb,SAAW0X,EAAQ1X,QAClC0X,EAAQnP,IAAI,SAACwN,EAAM+B,GACjB2D,EAAa3D,GAAO6D,SAASxH,QAAU4B,EAAK7V,MAE5Cub,EAAa3D,GAAO8D,eACpBjB,EAAKrc,WAGT4H,KAAK5I,axBy8EJ+D,IAAK,WACLnB,MAAO,SwBv8EDgb,GAAmB,GAAXpD,GAAWrS,UAAAzF,OAAA,GAAAf,SAAAwG,UAAA,GAAAA,UAAA,GAAH,EACjBoW,EAAmB,GAAI9B,WAAM+B,iBAAiB,SAAU,GAC9DD,GAAiBxc,KAAO2a,EAAoBlC,EAC5C+D,EAAiBE,SAASC,YAC1B9V,KAAKwU,MAAQmB,EACb3V,KAAKkU,MAAM6B,IAAIJ,MxB48Edxa,IAAK,iBACLnB,MAAO,SwB18EKgc,EAAKC,GAAO,GAAAC,GAAAlW,IACzB,OAAO,IAAImW,SAAQ,SAACC,GAClBF,EAAKlC,OAAOqC,YAAc,GAC1BH,EAAKlC,OAAOsC,YAAYN,EAAK,SAACO,GAI5BH,EAAQG,UxBi9EXpb,IAAK,eACLnB,MAAO,SwB78EGwc,GAAM,GAAAC,GAAAzW,IACjB,OAAO,IAAImW,SAAQ,SAACC,GAClBK,EAAKzC,OAAO0C,aAAaF,EAAM,SAACD,GAC9BH,EAAQG,UxBo9EXpb,IAAK,gBACLnB,MAAO,SwBh9EIic,GAAO,GAAAU,GAAA3W,IACnBA,MAAKsP,OAAOjN,IAAI,SAACwN,EAAM+B,GACrB,GAAc,IAAVA,EAAa,CAMf,GAAMgF,GAAoBD,EAAK3B,OAAO6B,OACpC,SAACC,EAAKjH,GAAN,MAAeiH,IAAOnd,MAAMC,QAAQiW,OAGlC+G,GACFD,EAAK3B,OAAOrX,QAAQgZ,EAAKI,SAASpT,KAAKgT,IAEvCA,EAAKI,SAASJ,EAAK3B,QAIvB2B,EAAKK,eAAenH,EAAMoG,GAAOgB,KAAK,SAACV,GAErCA,EAASW,qBACTX,EAASY,sBAGT,IAAI1B,GAAW,GAAI5B,WAAMuD,qBACvB7H,MAAOoH,EAAK5D,WACZsE,eACApJ,QAAS,EACTqJ,KAAMzD,UAAM0D,WACZC,YAGEjB,GAASkB,YACXhC,EAAW,GAAI5B,WAAM6D,mBACnBzJ,QAASsI,EAASoB,MAClBC,aAAc/D,UAAMgE,gBAIxBlB,EAAKmB,KAAO,GAAIjE,WAAMkE,KAAKxB,EAAUd,GAErCc,EAASyB,qBACTzB,EAAS0B,wBAEUlf,SAAf4d,EAAKuB,QACPvB,EAAKuB,MAAQ3B,EAAS4B,YAAYC,IAAInP,EACtC0N,EAAK0B,MAAQ9B,EAAS4B,YAAYC,IAAIvP,EACtC8N,EAAK2B,MAAQ/B,EAAS4B,YAAYC,IAAI7N,GAMpCoM,EAAK3F,SACP2F,EAAKmB,KAAKS,SAAStP,EAAI0N,EAAK5B,eAAe,GAC3C4B,EAAKmB,KAAKS,SAAS1P,EAAI8N,EAAK5B,eAAe,GAC3C4B,EAAKmB,KAAKS,SAAShO,EAAIoM,EAAK5B,eAAe,IAG7C4B,EAAKmB,KAAKpC,eAEViB,EAAKzC,MAAM6B,IAAIY,EAAKmB,MAEpBnB,EAAK6B,YACL7B,EAAKnC,MAAMqB,SAAS4C,KAAK9B,EAAK+B,OAAO7C,UAErCc,EAAKgC,yBACLhC,EAAKiC,sBAGLjC,EAAKkC,iBxBs9ER1d,IAAK,YACLnB,MAAO,WwBj9ER,IACGgG,KAAKkU,MAAMjN,SAAS6R,KAAK,SAACjJ,GAAD,MAAwB,sBAAdA,EAAKlL,OACzC,CAEA3E,KAAK0Y,OAAS,GAAI7E,WAAMkF,kBACtB,GACA/Y,KAAKyP,MAAQzP,KAAK0P,OAClB,EACA1P,KAAKqV,UAGc,OAAjBrV,KAAK8U,UACP9U,KAAK8U,QAAUkE,KAAKZ,IAAiB,EAAbpY,KAAKkY,MAAwB,EAAblY,KAAKqY,MAAwB,EAAbrY,KAAKsY,QAG/DtY,KAAK0Y,OAAO7C,SAAS3J,IAAIlM,KAAK4U,QAAS5U,KAAK6U,QAAS7U,KAAK8U,QAC1D,IAAMa,GAAmB,GAAI9B,WAAM+B,iBAAiB,SAAU,GAC9D5V,MAAK0Y,OAAO3C,IAAIJ,GAChB3V,KAAK0Y,OAAOO,OAAOjZ,KAAK8X,MACxB9X,KAAKkU,MAAM6B,IAAI/V,KAAK0Y,QAEpB1Y,KAAKoU,SAAS8E,2BACdlZ,KAAKoU,SAAS+E,QAAQnZ,KAAKyP,MAAOzP,KAAK0P,QACvC1P,KAAKoU,SAASgF,cAAcpZ,KAAKmR,gBAAiB,OxBi9EnDhW,IAAK,yBACLnB,MAAO,WwB58EJgG,KAAK2U,gBACH3U,KAAKqZ,UACPrZ,KAAKqZ,SAASC,UAEhBtZ,KAAKqZ,SAAW,GAAIzF,GAClB5T,KAAK0Y,OACLvgB,UAASohB,YAAYvZ,KAAK0U,YAE5B1U,KAAKqZ,SAASG,cACdxZ,KAAKqZ,SAASI,iBAAiB,SAAUzZ,KAAK0Z,YAAY/V,KAAK3D,WxB+8EhE7E,IAAK,sBACLnB,MAAO,WwBz8ER7B,UAASohB,YAAYvZ,KAAK0U,WAAWiF,aACnC3Z,KAAKoU,SAASwF,WACdzhB,UAASohB,YAAYvZ,KAAK0U,WAAWmF,exBm9EtC1e,IAAK,UACLnB,MAAO,WwB18EJgG,KAAKgR,SACPhR,KAAKmV,mBAAqB2E,sBAAsB9Z,KAAK6Y,QAAQlV,KAAK3D,QAGhEA,KAAK2U,eACP3U,KAAKqZ,SAASU,SAEhB/Z,KAAK5H,YxBq9EJ+C,IAAK,cACLnB,MAAO,WwB98EJgG,KAAKgR,SACPhR,KAAKgR,UAEP,IAAM2E,GAAmB3V,KAAKkU,MAAM8F,gBAAgB,oBACpDrE,GAAiBE,SAAS4C,KAAKzY,KAAK0Y,OAAO7C,UAE3C7V,KAAK5H,YxBw9EJ+C,IAAK,QACLnB,MAAO,WwBj9EUjB,SAAdiH,KAAK8X,OACP9X,KAAK8X,KAAKvB,SAAS+C,UACnBtZ,KAAK8X,KAAKrC,SAAS6D,UACnBtZ,KAAKkU,MAAMvE,OAAO3P,KAAK8X,YAChB9X,MAAK8X,KAEd,IAAMmC,GAAsBja,KAAKkU,MAAM8F,gBAAgBlG,EACnDmG,IACFja,KAAKkU,MAAMvE,OAAOsK,GAGhBja,KAAKmV,oBACPC,qBAAqBpV,KAAKmV,oBAE5BnV,KAAKoU,SAASkF,UACdtZ,KAAKoU,SAAS8F,sBxB29Eb/e,IAAK,SACLnB,MAAO,WwBp9EJgG,KAAK8X,MAAQ9X,KAAKgR,SACpBhR,KAAK8X,KAAKS,SAAStP,GAAKjJ,KAAK+U,eAAe,GAC5C/U,KAAK8X,KAAKS,SAAS1P,GAAK7I,KAAK+U,eAAe,GAC5C/U,KAAK8X,KAAKS,SAAShO,GAAKvK,KAAK+U,eAAe,IAG9C/U,KAAKoU,SAAShc,OAAO4H,KAAKkU,MAAOlU,KAAK0Y,YxBy9EhC3E,IAGT9c,GAAQW,QwBx9EMmc,ExBy9Ed7c,EAAOD,QAAUA,EAAiBW,SAI7B,SAAUV,EAAQD,EAASH,GAEhC,YAgBA,SAASW,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAEvF,QAASsb,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAItR,WAAU,qCAEhH,QAASuY,GAA2BC,EAAM/iB,GAAQ,IAAK+iB,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOhjB,GAAyB,gBAATA,IAAqC,kBAATA,GAA8B+iB,EAAP/iB,EAElO,QAASijB,GAAUre,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAI0F,WAAU,iEAAoE1F,GAAeD,GAASE,UAAY7B,OAAO8B,OAAOF,GAAcA,EAAWC,WAAaE,aAAerC,MAAOiC,EAAUoL,cAAmBkM,YAAgBD,mBAA6BpX,IAAY5B,OAAOgC,eAAiBhC,OAAOgC,eAAeL,EAAUC,GAAcD,EAASkI,UAAYjI,GApBje,GAAIiX,GAAe,WAAc,QAASC,GAAiBpQ,EAAQ4B,GAAS,IAAK,GAAI/K,GAAI,EAAGA,EAAI+K,EAAM9K,OAAQD,IAAK,CAAE,GAAIwZ,GAAazO,EAAM/K,EAAIwZ,GAAWhM,WAAagM,EAAWhM,eAAqBgM,EAAWC,gBAAyB,SAAWD,KAAYA,EAAWE,aAAiBjZ,OAAOC,eAAeyI,EAAQqQ,EAAWlY,IAAKkY,IAAiB,MAAO,UAAUH,EAAaM,EAAYC,GAAiJ,MAA9HD,IAAYJ,EAAiBF,EAAY/W,UAAWqX,GAAiBC,GAAaL,EAAiBF,EAAaO,GAAqBP,MyBlwFjiBrb,EAAAf,EAAA,GzBswFKgB,EAAUL,EAAuBI,GyBrwFtC0iB,EAAAzjB,EAAA,IzBywFK0jB,EAAc/iB,EAAuB8iB,GyBxwF1CE,EAAA3jB,EAAA,IzB4wFK4jB,EAAUjjB,EAAuBgjB,GyB3wFhCE,EzBqxFW,SAAUC,GyBhvFzB,QAAAD,GAAY/V,GAAO,MAAAoO,GAAAhT,KAAA2a,GAAAR,EAAAna,MAAA2a,EAAAxW,WAAA7J,OAAAugB,eAAAF,IAAAtjB,KAAA2I,KACX4E,IzBozFP,MApEA0V,GAAUK,EAAWC,GAQrBzH,EAAawH,IACXxf,IAAK,oBACLnB,MAAO,WyBtvFRgG,KAAK8a,MAAQ,GAAI/G,WACjB/T,KAAK8a,MAAMC,KAAK/a,KAAMA,KAAK4E,MAAM4M,QAASxR,KAAK4E,MAAM0K,WzB0vFpDnU,IAAK,wBACLnB,MAAO,SyBxvFYghB,EAAWC,GAC/B,MAAOC,MAAKC,UAAUH,KAAeE,KAAKC,UAAUnb,KAAK4E,UzB2vFxDzJ,IAAK,sBACLnB,MAAO,SyBzvFUghB,EAAWC,GAC7Bjb,KAAK4E,MAAQoW,EACbhb,KAAK8a,MAAQ,GAAI/G,WACjB/T,KAAK8a,MAAMC,KAAK/a,KAAMA,KAAK4E,MAAM4M,QAASxR,KAAK4E,MAAM0K,WzB4vFpDnU,IAAK,uBACLnB,MAAO,WyBzvFRgG,KAAK8a,MAAMM,cACJpb,MAAK8a,SzB6vFX3f,IAAK,SACLnB,MAAO,WyB3vFD,GAAAqhB,GACoCrb,KAAK4E,MAAxC6K,EADD4L,EACC5L,MAAOC,EADR2L,EACQ3L,OAAQyB,EADhBkK,EACgBlK,eACvB,OACErZ,GAAAF,QAAAS,cAAA,OACEgJ,UAAWrB,KAAK4E,MAAMvD,UACtBwQ,OACEpC,MAAOA,EACPC,OAAQA,EACR4L,SAAU,SACVnK,gBAAiBA,IAGnBrZ,EAAAF,QAAAS,cAAA,OACElB,GAAG,SACH0a,OACEnC,OAAQ,OACRqC,QAAS,OACTE,eAAgB,SAChBD,WAAY,WAGdla,EAAAF,QAAAS,cAAA,OAAKgJ,UAAU,+BzBwwFfsZ,GyB11Fc3U,YAAlB2U,GACGY,WACLla,UAAWma,UAAU9hB,OACrBsc,IAAKwF,UAAU9hB,OACf+V,MAAO+L,UAAUC,OACjB/L,OAAQ8L,UAAUC,OAClBtK,gBAAiBqK,UAAU9hB,OAC3BqZ,WAAYyI,UAAU9hB,OACtBsX,OAAQwK,UAAUE,KAClB/G,cAAe6G,UAAUE,KACzB9G,QAAS4G,UAAUC,OACnB5G,QAAS2G,UAAUC,OACnB3G,QAAS0G,UAAUC,OACnBzG,OAAQwG,UAAUG,MAClB1G,WAAYuG,UAAU9hB,OACtBqb,eAAgByG,UAAUI,QAAQJ,UAAUC,QAC5CnM,OAAQkM,UAAUK,WAChBL,UAAUG,MACVH,UAAUM,WAAWC,eACpBC,YAnBDrB,EAsBGsB,cACL9K,gBAAiB,OACjB1B,MAAO,IACPC,OAAQ,IACRqD,WAAY,UACZ/B,UACA2D,iBACAC,QAAS,EACTC,QAAS,EACTC,QAAS,KACTE,QAAS,EAAG,EAAG,GACfC,WAAY,UACZF,gBAAiB,EAAG,EAAG,KACvBzF,OAAQvW,QAsDZ7B,EAAOD,QAAU0jB,GzB0yFX,SAAUzjB,EAAQD,EAASH,GAEhC,Y0Bx4FD,IAAI+c,GAAQ/c,EAAQ,GAiCpB+c,GAAMI,UAAY,SAAUiI,GAC1Blc,KAAKkc,QAAsBnjB,SAAZmjB,EAAwBA,EAAUrI,EAAMsI,uBAGzDtI,EAAMI,UAAU9X,WACdE,YAAawX,EAAMI,UAEnBqC,YAAa,SAAUN,EAAKoG,EAAQC,EAAYC,GAC9C,GAAIC,GAAQvc,KAERgU,EAAS,GAAIH,GAAM2I,UAAUD,EAAML,QACvClI,GAAOyI,eAAezc,KAAKqW,aAC3BrC,EAAO0I,gBAAgB,eACvB1I,EAAO2I,KACL3G,EACA,SAAU4G,GACRR,EAAOG,EAAMM,MAAMD,KAErBP,EACAC,IAIJ5F,aAAc,SAAUoG,EAAQV,GAC9B,GAAIG,GAAQvc,IACZoc,GAAOG,EAAMM,MAAMC,KAGrBD,MAAO,SAAUE,GACf,GAAIC,GAAW,WACb,GAAIC,GAAQC,EAAWC,EAASC,CAMhC,IALAA,EAAS,GAAIC,UAASC,GACtBJ,EAAa,GACbC,EAAUC,EAAOG,UAAU,OAC3BN,EAAS,GAAcE,EAAUD,EAE7BD,IAAWG,EAAOI,WACpB,QAMF,KAAK,GADDC,GAAaL,EAAOI,WACf5L,EAAQ,EAAGA,EAAQ6L,EAAY7L,IACtC,GAAIwL,EAAOM,SAAS9L,MAAgB,IAClC,QAIJ,WAGE0L,EAAUtd,KAAK2d,aAAaZ,EAEhC,OAAOC,KACHhd,KAAK4d,YAAYN,GACjBtd,KAAK6d,WAAW7d,KAAK8d,aAAaf,KAGxCa,YAAa,SAAUb,GAcrB,IAAK,GAVD1T,GACFT,EACAG,EAEAgV,EACEC,EAAUC,EAAUC,EAAUvG,EAR9ByF,EAAS,GAAIC,UAASN,GACtBoB,EAAQf,EAAOG,UAAU,OAK3B9F,KAOO7F,EAAQ,EAAGA,EAAQ,GAASA,IAEC,YAAlCwL,EAAOG,UAAU3L,OACa,IAA9BwL,EAAOM,SAAS9L,EAAQ,IACM,IAA9BwL,EAAOM,SAAS9L,EAAQ,KAExB6F,KACAsG,EAAS,GAAIK,cAAqB,EAARD,EAAY,GAEtCH,EAAWZ,EAAOM,SAAS9L,EAAQ,GAAK,IACxCqM,EAAWb,EAAOM,SAAS9L,EAAQ,GAAK,IACxCsM,EAAWd,EAAOM,SAAS9L,EAAQ,GAAK,IACxC+F,EAAQyF,EAAOM,SAAS9L,EAAQ,GAAK,IAczC,KAAK,GAVDyM,GAAa,GACbC,EAAa,GAEbC,EAAS,EAEThI,EAAW,GAAI1C,GAAM2K,eAErBC,EAAW,GAAIL,cAAqB,EAARD,EAAY,GACxCO,EAAU,GAAIN,cAAqB,EAARD,EAAY,GAElCQ,EAAO,EAAGA,EAAOR,EAAOQ,IAAQ,CACvC,GAAIC,GAAQP,EAAaM,EAAOL,EAC5BO,EAAUzB,EAAO0B,WAAWF,MAC5BG,EAAU3B,EAAO0B,WAAWF,EAAQ,MACpCI,EAAU5B,EAAO0B,WAAWF,EAAQ,KAExC,IAAInH,EAAW,CACb,GAAIwH,GAAc7B,EAAO8B,UAAUN,EAAQ,MAEZ,MAAZ,MAAdK,IAGH5V,GAAmB,GAAd4V,GAAsB,GAC3BrW,GAAMqW,GAAe,EAAK,IAAQ,GAClClW,GAAMkW,GAAe,GAAM,IAAQ,KAEnC5V,EAAI2U,EACJpV,EAAIqV,EACJlV,EAAImV,GAIR,IAAK,GAAIrkB,GAAI,EAAGA,GAAK,EAAGA,IAAK,CAC3B,GAAIslB,GAAcP,EAAY,GAAJ/kB,CAE1B4kB,GAASF,GAAUnB,EAAO0B,WAAWK,MACrCV,EAASF,EAAS,GAAKnB,EAAO0B,WAAWK,EAAc,MACvDV,EAASF,EAAS,GAAKnB,EAAO0B,WAAWK,EAAc,MAEvDT,EAAQH,GAAUM,EAClBH,EAAQH,EAAS,GAAKQ,EACtBL,EAAQH,EAAS,GAAKS,EAElBvH,IACFsG,EAAOQ,GAAUlV,EACjB0U,EAAOQ,EAAS,GAAK3V,EACrBmV,EAAOQ,EAAS,GAAKxV,GAGvBwV,GAAU,GAad,MATAhI,GAAS6I,aAAa,WAAY,GAAIvL,GAAMwL,gBAAgBZ,EAAU,IACtElI,EAAS6I,aAAa,SAAU,GAAIvL,GAAMwL,gBAAgBX,EAAS,IAE/DjH,IACFlB,EAAS6I,aAAa,QAAS,GAAIvL,GAAMwL,gBAAgBtB,EAAQ,IACjExH,EAASkB,aACTlB,EAASoB,MAAQA,GAGZpB,GAGTsH,WAAY,SAAUd,GACpB,GAAIxG,GACFzc,EACAwlB,EACAC,EACAC,EACAC,EACAjmB,EACAojB,CAIF,KAHArG,EAAW,GAAI1C,GAAM6L,SACrBH,EAAc,2BAE+B,QAArC/lB,EAAS+lB,EAAYxjB,KAAKghB,KAAiB,CAKjD,IAJAH,EAAOpjB,EAAO,GACdgmB,EACE,0JAE6C,QAAvChmB,EAASgmB,EAAczjB,KAAK6gB,KAClC0C,EAAS,GAAIzL,GAAM8L,QACjBhN,WAAWnZ,EAAO,IAClBmZ,WAAWnZ,EAAO,IAClBmZ,WAAWnZ,EAAO,IAOtB,KAHAimB,EACE,0JAE6C,QAAvCjmB,EAASimB,EAAc1jB,KAAK6gB,KAClCrG,EAASkI,SAAS/d,KAChB,GAAImT,GAAM8L,QACRhN,WAAWnZ,EAAO,IAClBmZ,WAAWnZ,EAAO,IAClBmZ,WAAWnZ,EAAO,KAKxBM,GAASyc,EAASkI,SAAS3kB,OAE3Byc,EAAS4H,MAAMzd,KACb,GAAImT,GAAM+L,MAAM9lB,EAAS,EAAGA,EAAS,EAAGA,EAAS,EAAGwlB,IAOxD,MAHA/I,GAASyB,qBACTzB,EAAS0B,wBAEF1B,GAGTuH,aAAc,SAAU+B,GACtB,GAAmB,gBAARA,GAAkB,CAG3B,IAAK,GAFDC,GAAe,GAAIC,YAAWF,GAC9B1X,EAAM,GACDtO,EAAI,EAAGA,EAAIgmB,EAAIrC,WAAY3jB,IAClCsO,GAAOnG,OAAOG,aAAa2d,EAAajmB,GAE1C,OAAOsO,GAEP,MAAO0X,IAIXlC,aAAc,SAAUkC,GACtB,GAAmB,gBAARA,GAAkB,CAE3B,IAAK,GADDC,GAAe,GAAIC,YAAWF,EAAI/lB,QAC7BD,EAAI,EAAGA,EAAIgmB,EAAI/lB,OAAQD,IAC9BimB,EAAajmB,GAAyB,IAApBgmB,EAAI9kB,WAAWlB,EAEnC,OAAOimB,GAAahD,QAAUgD,EAE9B,MAAOD,KAKW,mBAAbxC,YACTA,SAAW,SAAUP,EAAQkD,EAAYxC,GACvCxd,KAAK8c,OAASA,EACd9c,KAAKggB,WAAaA,GAAc,EAChChgB,KAAKwd,WAAaA,GAAcV,EAAOU,YAAcV,EAAOhjB,OAC5DkG,KAAKigB,UAA8B,gBAAXnD,IAG1BO,SAASlhB,WACP+jB,cAAe,SAAUpD,EAAQ8B,EAAO9kB,GACtC8kB,EAAQA,GAAS,EACjB9kB,EAASA,GAAUgjB,EAAOhjB,MAG1B,KAAK,GAFDqmB,GAAMvB,EAAQ9kB,EACdsmB,KACKvmB,EAAI+kB,EAAO/kB,EAAIsmB,EAAKtmB,IAC3BumB,EAAM1f,KAA4B,IAAvBoc,EAAO/hB,WAAWlB,GAE/B,OAAOumB,IAGTC,UAAW,SAAUvmB,EAAQkmB,EAAYM,GACvC,GAAI9mB,EAmBJ,IAhBqBT,SAAjBunB,IACFA,EAAetgB,KAAKugB,eAKpBP,EADiBjnB,SAAfinB,EACWhgB,KAAKggB,WAELhgB,KAAKggB,WAAaA,EAGlBjnB,SAAXe,IACFA,EAASkG,KAAKwd,WAAawC,GAIH,gBAAfA,GACT,KAAM,IAAIpe,WAAU,sCAGtB,IAAI9H,EAAS,GAAKkmB,EAAalmB,EAASkG,KAAKwd,WAC3C,KAAM,IAAIgD,OACR,gEAsBJ,OAjBEhnB,GADEwG,KAAKygB,SACEzgB,KAAKkgB,cACZlgB,KAAK8c,OACLkD,EACAA,EAAalmB,GAGNkG,KAAK8c,OAAO4D,MAAMV,EAAYA,EAAalmB,IAGjDwmB,GAAgBxmB,EAAS,IACtBN,YAAkBG,SACtBH,EAASG,MAAMwC,UAAUukB,MAAMrpB,KAAKmC,IAGtCA,EAAOmnB,WAGFnnB,GAKTonB,WAAY,SAAUZ,EAAYM,GAChC,GAAIvX,GAAI/I,KAAKqgB,UAAU,EAAGL,EAAYM,GACpCO,EAAO,EAAI,GAAK9X,EAAE,IAAM,GACxB+X,IACM/X,EAAE,IAAM,EAAK,MAAS,EAAMA,EAAE,IAAM,GAAxC,KAEFgY,GACU,GAAPhY,EAAE,IAAaiQ,KAAKgI,IAAI,EAAG,IAC5BjY,EAAE,GAAKiQ,KAAKgI,IAAI,EAAG,IACnBjY,EAAE,GAAKiQ,KAAKgI,IAAI,EAAG,IACnBjY,EAAE,GAAKiQ,KAAKgI,IAAI,EAAG,IACnBjY,EAAE,GAAKiQ,KAAKgI,IAAI,EAAG,IACnBjY,EAAE,GAAKiQ,KAAKgI,IAAI,EAAG,GACnBjY,EAAE,EAEN,OAAiB,QAAb+X,EACe,IAAbC,EACKE,IAEAJ,GAAOK,KAIdJ,UAEKD,EAAOE,EAAW/H,KAAKgI,IAAI,SAG7BH,GAAQ,EAAIE,EAAW/H,KAAKgI,IAAI,QAAWhI,KAAKgI,IAAI,EAAGF,IAGhEhC,WAAY,SAAUkB,EAAYM,GAChC,GAAIvX,GAAI/I,KAAKqgB,UAAU,EAAGL,EAAYM,GACpCO,EAAO,EAAI,GAAK9X,EAAE,IAAM,GACxB+X,GAAc/X,EAAE,IAAM,EAAK,IAASA,EAAE,IAAM,GAAM,IAClDgY,GAAoB,IAAPhY,EAAE,KAAc,GAAOA,EAAE,IAAM,EAAKA,EAAE,EAErD,OAAiB,OAAb+X,EACe,IAAbC,EACKE,IAEAJ,GAAOK,KAIdJ,SAEKD,EAAOE,EAAW/H,KAAKgI,IAAI,QAG7BH,GAAQ,EAAIE,EAAW/H,KAAKgI,IAAI,QAAWhI,KAAKgI,IAAI,EAAGF,IAGhEK,SAAU,SAAUnB,EAAYM,GAC9B,GAAIvX,GAAI/I,KAAKqgB,UAAU,EAAGL,EAAYM,EACtC,OAAQvX,GAAE,IAAM,GAAOA,EAAE,IAAM,GAAOA,EAAE,IAAM,EAAKA,EAAE,IAGvDwU,UAAW,SAAUyC,EAAYM,GAC/B,MAAOtgB,MAAKmhB,SAASnB,EAAYM,KAAkB,GAGrDc,SAAU,SAAUpB,EAAYM,GAC9B,MAAQtgB,MAAKkf,UAAUc,EAAYM,IAAiB,IAAO,IAG7DpB,UAAW,SAAUc,EAAYM,GAC/B,GAAIvX,GAAI/I,KAAKqgB,UAAU,EAAGL,EAAYM,EACtC,OAAQvX,GAAE,IAAM,EAAKA,EAAE,IAGzBsY,QAAS,SAAUrB,GACjB,MAAQhgB,MAAK0d,SAASsC,IAAe,IAAO,IAG9CtC,SAAU,SAAUsC,GAClB,MAAOhgB,MAAKqgB,UAAU,EAAGL,GAAY,MAK3C9oB,EAAOD,QAAU4c,G1Bk2FX,SAAU3c,EAAQD,EAASH,G2B7vGjC,YAIA,SAAAwqB,MACA,QAAAC,MAHA,GAAAC,GAAA1qB,EAAA,GAIAyqB,GAAAE,kBAAAH,EAEApqB,EAAAD,QAAA,WACA,QAAAyqB,GAAA9c,EAAA+c,EAAAC,EAAAC,EAAAC,EAAAC,GACA,GAAAA,IAAAP,EAAA,CAIA,GAAA7e,GAAA,GAAA6d,OACA,kLAKA,MADA7d,GAAAxJ,KAAA,sBACAwJ,GAGA,QAAAqf;AACA,MAAAN,GAFAA,EAAA1F,WAAA0F,CAMA,IAAAO,IACAtG,MAAA+F,EACAQ,OAAAR,EACAhG,KAAAgG,EACA9Z,KAAA8Z,EACAjG,OAAAiG,EACAS,OAAAT,EACAhoB,OAAAgoB,EACAU,OAAAV,EAEAW,IAAAX,EACA9F,QAAAoG,EACAnc,QAAA6b,EACAY,YAAAZ,EACA5F,WAAAkG,EACA1jB,KAAAojB,EACAa,SAAAP,EACAQ,MAAAR,EACAnG,UAAAmG,EACAS,MAAAT,EACAU,MAAAV,EAEAW,eAAApB,EACAE,kBAAAH,EAKA,OAFAW,GAAAzG,UAAAyG,EAEAA,I3B4wGM,SAAU/qB,EAAQD,EAASH,G4B1zGjCI,EAAAD,QAAAH,EAAA,O5Bm1GM,SAAUI,EAAQD,G6B71GxB,YAEA,IAAAuqB,GAAA,8CAEAtqB,GAAAD,QAAAuqB,G7B22GM,SAAUtqB,EAAQD,EAASH;;;;;;;;A8B32GjC,YAAuF,SAAA+R,GAAAH,GAAc,OAAAK,GAAA,yDAAAL,EAAAnR,EAAA,EAAyEA,EAAAgI,UAAAzF,OAAmBvC,IAAAwR,GAAA,WAAA6Z,mBAAArjB,UAAAhI,GAAmD,gCAAAmR,EAAA,WAAmCK,EAAA,iHAA4K,QAAAyB,GAAA9B,EAAAK,GAAiB0B,EAAA/B,EAAAK,GAAQ0B,EAAA/B,EAAA,UAAAK,GAC5d,QAAA0B,GAAA/B,EAAAK,GAAyB,IAARkB,GAAAvB,GAAAK,EAAQL,EAAA,EAAQA,EAAAK,EAAAjP,OAAW4O,IAAA8C,GAAAuK,IAAAhN,EAAAL,IAEhC,QAAA+C,GAAA/C,GAAe,QAAAwC,GAAA7T,KAAAgU,GAAA3C,KAA0BwC,GAAA7T,KAAA+T,GAAA1C,KAA0BsC,GAAAM,KAAA5C,GAAA2C,GAAA3C,OAA8B0C,GAAA1C,OAAA,IAAkB,QAAAgD,GAAAhD,EAAAK,EAAAxR,EAAAkR,GAAqB,UAAAlR,GAAA,IAAAA,EAAAoN,KAAA,QAAiC,cAAAoE,IAAiB,oCAAuC,sBAAAN,IAA6B,OAAAlR,KAAAsrB,iBAAqCna,IAAAxN,cAAAwlB,MAAA,KAA6B,UAAAhY,GAAA,UAAAA,GAA+B,mBAC3W,QAAAkD,GAAAlD,EAAAK,EAAAxR,EAAAkR,GAAqB,UAAAM,GAAA,mBAAAA,IAAA2C,EAAAhD,EAAAK,EAAAxR,EAAAkR,GAAA,QAA0D,IAAAA,EAAA,QAAc,WAAAlR,EAAA,OAAAA,EAAAoN,MAA2B,cAAAoE,CAAgB,mBAAAA,CAAoB,cAAA+Z,OAAA/Z,EAAuB,cAAA+Z,OAAA/Z,IAAA,EAAAA,EAA4B,SAAS,QAAAS,GAAAd,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,EAAAd,GAA0B5I,KAAA6iB,gBAAA,IAAA9Z,GAAA,IAAAA,GAAA,IAAAA,EAAyC/I,KAAA+iB,cAAAta,EAAqBzI,KAAAgjB,mBAAAliB,EAA0Bd,KAAAijB,gBAAA1rB,EAAuByI,KAAAkjB,aAAAxa,EAAoB1I,KAAA2E,KAAAoE,EAAY/I,KAAAmjB,YAAAzZ,EAAmB1J,KAAAojB,kBAAAxa,EAGpC,QAAAya,GAAA3a,GAAe,MAAAA,GAAA,GAAA4a,cAI/X,QAAAC,GAAA7a,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAAwJ,GAAAzH,eAAAkG,GAAAuB,GAAAvB,GAAA,KAAoCW,EAAA,OAAA5I,EAAA,IAAAA,EAAA6D,MAAA8D,GAAA,EAAAM,EAAAjP,SAAA,MAAAiP,EAAA,UAAAA,EAAA,YAAAA,EAAA,UAAAA,EAAA,GAAmGW,KAAAkC,EAAA7C,EAAAxR,EAAAuJ,EAAA2H,KAAAlR,EAAA,MAAAkR,GAAA,OAAA3H,EAAA2K,EAAA1C,KAAA,OAAAxR,EAAAmR,EAAA8a,gBAAAza,GAAAL,EAAA5I,aAAAiJ,EAAA,GAAAxR,IAAAuJ,EAAAmiB,gBAAAva,EAAA5H,EAAAoiB,cAAA,OAAA3rB,EAAA,IAAAuJ,EAAA6D,MAAA,GAAApN,GAAAwR,EAAAjI,EAAAiiB,cAAAta,EAAA3H,EAAAkiB,mBAAA,OAAAzrB,EAAAmR,EAAA8a,gBAAAza,IAAAjI,IAAA6D,KAAApN,EAAA,IAAAuJ,GAAA,IAAAA,QAAAvJ,EAAA,MAAAA,EAAAkR,EAAAC,EAAA+a,eAAAhb,EAAAM,EAAAxR,GAAAmR,EAAA5I,aAAAiJ,EAAAxR,MAGzG,QAAAmsB,GAAAhb,GAAe,cAAAA,GAAA,gBAAAA,GAAA,MAA6CA,EAAAib,IAAAjb,EAAAib,KAAAjb,EAAA,cAA6B,kBAAAA,KAAA,MAA0C,QAAAkb,GAAAlb,GAAe,YAAAmb,GAAA,IAAmB,KAAArD,SAAe,MAAAjpB,GAAS,GAAAwR,GAAAxR,EAAAusB,MAAAha,OAAA1O,MAAA,eAA2CyoB,IAAA9a,KAAA,OAAe,WAAA8a,GAAAnb,EAC1S,QAAAqb,GAAArb,EAAAK,GAAiB,IAAAL,GAAAsb,GAAA,QAAmBA,MAAM,IAAAzsB,GAAAipB,MAAAyD,iBAA8BzD,OAAAyD,kBAAA,MAA+B,KAAI,GAAAlb,EAAA,GAAAA,EAAA,WAAqB,KAAAyX,UAAelmB,OAAAC,eAAAwO,EAAA5M,UAAA,SAA4C+P,IAAA,WAAe,KAAAsU,YAAgB,gBAAA0D,kBAAAC,UAAA,CAAgD,IAAID,QAAAC,UAAApb,MAAwB,MAAAtC,GAAS,GAAAgC,GAAAhC,EAAQyd,QAAAC,UAAAzb,KAAAK,OAA0B,CAAK,IAAIA,EAAA1R,OAAS,MAAAoP,GAASgC,EAAAhC,EAAIiC,EAAArR,KAAA0R,EAAA5M,eAAoB,CAAK,IAAI,KAAAqkB,SAAe,MAAA/Z,GAASgC,EAAAhC,EAAIiC,KAAK,MAAAjC,GAAS,GAAAA,GAAAgC,GAAA,gBAAAhC,GAAAqd,MAAA,CAAoC,OAAAhjB,GAAA2F,EAAAqd,MAAApmB,MAAA,MAC3dgM,EAAAjB,EAAAqb,MAAApmB,MAAA,MAAAkL,EAAA9H,EAAAhH,OAAA,EAAAsO,EAAAsB,EAAA5P,OAAA,EAAgD,GAAA8O,GAAA,GAAAR,GAAAtH,EAAA8H,KAAAc,EAAAtB,IAAwBA,GAAK,MAAK,GAAAQ,GAAA,GAAAR,EAAWQ,IAAAR,IAAA,GAAAtH,EAAA8H,KAAAc,EAAAtB,GAAA,CAAwB,OAAAQ,GAAA,IAAAR,EAAiB,MAAAQ,IAAAR,IAAA,EAAAA,GAAAtH,EAAA8H,KAAAc,EAAAtB,GAAA,WAAAtH,EAAA8H,GAAA3N,QAAA,yBAA0E,GAAA2N,GAAA,GAAAR,EAAkB,SAAQ,QAAQ4b,MAAAxD,MAAAyD,kBAAA1sB,EAAgC,OAAAmR,MAAA0b,aAAA1b,EAAAvP,KAAA,IAAAyqB,EAAAlb,GAAA,GAClR,QAAA2b,GAAA3b,GAAe,OAAAA,EAAAhJ,KAAc,aAAAkkB,GAAAlb,EAAA/D,KAAyB,eAAAif,GAAA,OAA0B,eAAAA,GAAA,WAA8B,eAAAA,GAAA,eAAkC,6BAAAlb,GAAAqb,EAAArb,EAAA/D,QAA+C,eAAA+D,GAAAqb,EAAArb,EAAA/D,KAAAvM,UAAwC,eAAAsQ,GAAAqb,EAAArb,EAAA/D,KAAA2f,WAAyC,cAAA5b,GAAAqb,EAAArb,EAAA/D,QAAgC,mBAChT,QAAA4f,GAAA7b,GAAe,SAAAA,EAAA,WAAuB,sBAAAA,GAAA,MAAAA,GAAA0b,aAAA1b,EAAAvP,MAAA,IAA4D,oBAAAuP,GAAA,MAAAA,EAAgC,QAAAA,GAAU,IAAA8b,IAAA,gBAAyB,KAAAC,IAAA,cAAuB,KAAAC,IAAA,gBAAyB,KAAAC,IAAA,kBAA2B,KAAAC,IAAA,gBAAyB,KAAAC,IAAA,qBAA6B,mBAAAnc,GAAA,OAAAA,EAAAoc,UAA0C,IAAAC,IAAA,OAAArc,EAAA0b,aAAA,sBAAqD,KAAAY,IAAA,OAAAtc,EAAAuc,SAAAb,aAAA,sBAA8D,KAAAc,IAAA,GAAAnc,GAAAL,EAAAtQ,MACnc,OAD0d2Q,KAAAqb,aAAArb,EAAA5P,MAAA,GAC1duP,EAAA0b,cAAA,KAAArb,EAAA,cAAAA,EAAA,iBAAgE,KAAAoc,IAAA,MAAAZ,GAAA7b,EAAA/D,KAA0B,KAAAygB,IAAA,MAAAb,GAAA7b,EAAA4b,QAA6B,KAAAe,IAAAtc,EAAAL,EAAA4c,SAAqB5c,IAAA6c,KAAU,KAAI,MAAAhB,GAAA7b,EAAAK,IAAgB,MAAAxR,KAAW,YAAY,QAAAiuB,GAAA9c,GAAe,aAAAA,IAAiB,2EAAAA,EAAmF,mBAAkB,QAAA+c,GAAA/c,GAAe,GAAAK,GAAAL,EAAA/D,IAAa,QAAA+D,IAAAgd,WAAA,UAAAhd,EAAAxN,gBAAA,aAAA6N,GAAA,UAAAA,GAClW,QAAA4c,GAAAjd,GAAe,GAAAK,GAAA0c,EAAA/c,GAAA,kBAAAnR,EAAA+C,OAAAsrB,yBAAAld,EAAArM,YAAAF,UAAA4M,GAAAN,EAAA,GAAAC,EAAAK,EAAqG,KAAAL,EAAA7F,eAAAkG,IAAA,mBAAAxR,IAAA,kBAAAA,GAAA+P,KAAA,kBAAA/P,GAAA2U,IAAA,CAAuG,GAAApL,GAAAvJ,EAAA+P,IAAAoC,EAAAnS,EAAA2U,GAAiM,OAA7K5R,QAAAC,eAAAmO,EAAAK,GAA2BuK,gBAAAhM,IAAA,WAA+B,MAAAxG,GAAAzJ,KAAA2I,OAAoBkM,IAAA,SAAAxD,GAAiBD,EAAA,GAAAC,EAAOgB,EAAArS,KAAA2I,KAAA0I,MAAkBpO,OAAAC,eAAAmO,EAAAK,GAA2B1B,WAAA9P,EAAA8P,cAAiCwe,SAAA,WAAoB,MAAApd,IAASqd,SAAA,SAAApd,GAAsBD,EAAA,GAAAC,GAAOqd,aAAA,WAAyBrd,EAAAsd,cACtf,WAAKtd,GAAAK,MAAe,QAAAkd,GAAAvd,GAAeA,EAAAsd,gBAAAtd,EAAAsd,cAAAL,EAAAjd,IAAyC,QAAAwd,GAAAxd,GAAe,IAAAA,EAAA,QAAe,IAAAK,GAAAL,EAAAsd,aAAsB,KAAAjd,EAAA,QAAe,IAAAxR,GAAAwR,EAAA8c,WAAmBpd,EAAA,EAA2D,OAAlDC,KAAAD,EAAAgd,EAAA/c,KAAAwJ,QAAA,eAAAxJ,EAAA1O,OAA8C0O,EAAAD,EAAIC,IAAAnR,IAAAwR,EAAA+c,SAAApd,OAAmC,QAAAyd,GAAAzd,GAAoE,GAArDA,MAAA,mBAAApQ,mBAAA,QAAqD,mBAAAoQ,GAAA,WAAsC,KAAI,MAAAA,GAAA0d,eAAA1d,EAAA2d,KAA+B,MAAAtd,GAAS,MAAAL,GAAA2d,MACtZ,QAAAC,GAAA5d,EAAAK,GAAiB,GAAAxR,GAAAwR,EAAAmJ,OAAgB,OAAA5a,OAAWyR,GAAIwd,eAAA,OAAAC,aAAA,OAAAxsB,MAAA,OAAAkY,QAAA,MAAA3a,IAAAmR,EAAA+d,cAAAC,iBAA0G,QAAAC,GAAAje,EAAAK,GAAiB,GAAAxR,GAAA,MAAAwR,EAAAyd,aAAA,GAAAzd,EAAAyd,aAAA/d,EAAA,MAAAM,EAAAmJ,QAAAnJ,EAAAmJ,QAAAnJ,EAAAwd,cAA0FhvB,GAAAiuB,EAAA,MAAAzc,EAAA/O,MAAA+O,EAAA/O,MAAAzC,GAA8BmR,EAAA+d,eAAiBC,eAAAje,EAAAme,aAAArvB,EAAAsvB,WAAA,aAAA9d,EAAApE,MAAA,UAAAoE,EAAApE,KAAA,MAAAoE,EAAAmJ,QAAA,MAAAnJ,EAAA/O,OAAgH,QAAA8sB,GAAApe,EAAAK,GAAiBA,IAAAmJ,QAAY,MAAAnJ,GAAAwa,EAAA7a,EAAA,UAAAK,MACjc,QAAAge,GAAAre,EAAAK,GAAiB+d,EAAApe,EAAAK,EAAQ,IAAAxR,GAAAiuB,EAAAzc,EAAA/O,OAAAyO,EAAAM,EAAApE,IAA2B,UAAApN,EAAA,WAAAkR,GAA4B,IAAAlR,GAAA,KAAAmR,EAAA1O,OAAA0O,EAAA1O,OAAAzC,KAAAmR,EAAA1O,MAAA,GAAAzC,GAAgDmR,EAAA1O,QAAA,GAAAzC,IAAAmR,EAAA1O,MAAA,GAAAzC,OAAoC,eAAAkR,GAAA,UAAAA,EAA8D,WAA3BC,GAAA8a,gBAAA,QAAkCza,GAAAlG,eAAA,SAAAmkB,EAAAte,EAAAK,EAAApE,KAAApN,GAAAwR,EAAAlG,eAAA,iBAAAmkB,EAAAte,EAAAK,EAAApE,KAAA6gB,EAAAzc,EAAAyd,eAA2G,MAAAzd,EAAAmJ,SAAA,MAAAnJ,EAAAwd,iBAAA7d,EAAA6d,iBAAAxd,EAAAwd,gBACpV,QAAAU,GAAAve,EAAAK,EAAAxR,GAAmB,GAAAwR,EAAAlG,eAAA,UAAAkG,EAAAlG,eAAA,iBAAgE,GAAA4F,GAAAM,EAAApE,IAAa,iBAAA8D,GAAA,UAAAA,GAAA,SAAAM,EAAA/O,OAAA,OAAA+O,EAAA/O,OAAA,MAAyE+O,GAAA,GAAAL,EAAA+d,cAAAG,aAAkCrvB,GAAAwR,IAAAL,EAAA1O,QAAA0O,EAAA1O,MAAA+O,GAA4BL,EAAA8d,aAAAzd,EAAiBxR,EAAAmR,EAAAvP,KAAS,KAAA5B,IAAAmR,EAAAvP,KAAA,IAAoBuP,EAAA6d,iBAAA7d,EAAA+d,cAAAC,eAAkD,KAAAnvB,IAAAmR,EAAAvP,KAAA5B,GACvU,QAAAyvB,GAAAte,EAAAK,EAAAxR,GAAmB,WAAAwR,GAAAod,EAAAzd,EAAAwe,iBAAAxe,IAAA,MAAAnR,EAAAmR,EAAA8d,aAAA,GAAA9d,EAAA+d,cAAAG,aAAAle,EAAA8d,eAAA,GAAAjvB,IAAAmR,EAAA8d,aAAA,GAAAjvB,IAA6I,QAAA4vB,GAAAze,GAAe,GAAAK,GAAA,EAA6D,OAApDwC,IAAA6b,SAAAzpB,QAAA+K,EAAA,SAAAA,GAAkC,MAAAA,IAAAK,GAAAL,KAAkBK,EAAS,QAAAse,GAAA3e,EAAAK,GAA2E,MAA1DL,GAAApR,IAAK2P,SAAA,QAAgB8B,IAAIA,EAAAoe,EAAApe,EAAA9B,aAAAyB,EAAAzB,SAAA8B,GAAiCL,EAChU,QAAA4e,GAAA5e,EAAAK,EAAAxR,EAAAkR,GAAiC,GAAZC,IAAA7K,QAAYkL,EAAA,CAAMA,IAAK,QAAAjI,GAAA,EAAYA,EAAAvJ,EAAAuC,OAAWgH,IAAAiI,EAAA,IAAAxR,EAAAuJ,MAAmB,KAAAvJ,EAAA,EAAQA,EAAAmR,EAAA5O,OAAWvC,IAAAuJ,EAAAiI,EAAAlG,eAAA,IAAA6F,EAAAnR,GAAAyC,OAAA0O,EAAAnR,GAAAgwB,WAAAzmB,IAAA4H,EAAAnR,GAAAgwB,SAAAzmB,MAAA2H,IAAAC,EAAAnR,GAAAiwB,wBAA4G,CAAuB,IAAlBjwB,EAAA,GAAAiuB,EAAAjuB,GAAWwR,EAAA,KAAOjI,EAAA,EAAQA,EAAA4H,EAAA5O,OAAWgH,IAAA,CAAK,GAAA4H,EAAA5H,GAAA9G,QAAAzC,EAAiE,MAA9CmR,GAAA5H,GAAAymB,iBAAiB9e,IAAAC,EAAA5H,GAAA0mB,oBAAoC,QAAAze,GAAAL,EAAA5H,GAAA2mB,WAAA1e,EAAAL,EAAA5H,IAAkC,OAAAiI,MAAAwe,cAC9W,QAAAG,GAAAhf,EAAAK,GAAiB,SAAAA,EAAA4e,wBAAA,KAAAnH,OAAA3X,EAAA,IAAsD,OAAAvR,OAAWyR,GAAI/O,MAAA,OAAAwsB,aAAA,OAAAvf,SAAA,GAAAyB,EAAA+d,cAAAG,eAA4E,QAAAgB,GAAAlf,EAAAK,GAAiB,GAAAxR,GAAAwR,EAAA/O,KAAc,UAAAzC,EAAA,CAA0C,GAA9BA,EAAAwR,EAAA9B,SAAa8B,IAAAyd,aAAiB,MAAAjvB,EAAA,CAAY,SAAAwR,EAAA,KAAAyX,OAAA3X,EAAA,IAA8B,IAAAlP,MAAAC,QAAArC,GAAA,CAAqB,QAAAA,EAAAuC,QAAA,KAAA0mB,OAAA3X,EAAA,IAAqCtR,KAAA,GAAOwR,EAAAxR,EAAI,MAAAwR,MAAA,IAAgBxR,EAAAwR,EAAIL,EAAA+d,eAAiBG,aAAApB,EAAAjuB,IAC/X,QAAAswB,GAAAnf,EAAAK,GAAiB,GAAAxR,GAAAiuB,EAAAzc,EAAA/O,OAAAyO,EAAA+c,EAAAzc,EAAAyd,aAAuC,OAAAjvB,MAAA,GAAAA,MAAAmR,EAAA1O,QAAA0O,EAAA1O,MAAAzC,GAAA,MAAAwR,EAAAyd,cAAA9d,EAAA8d,eAAAjvB,IAAAmR,EAAA8d,aAAAjvB,IAAwG,MAAAkR,IAAAC,EAAA8d,aAAA,GAAA/d,GAA+B,QAAAqf,GAAApf,GAAe,GAAAK,GAAAL,EAAAqf,WAAoBhf,KAAAL,EAAA+d,cAAAG,cAAA,KAAA7d,GAAA,OAAAA,IAAAL,EAAA1O,MAAA+O,GAClO,QAAAif,GAAAtf,GAAe,OAAAA,GAAU,4CAA8C,sDAAuD,+CAA8C,QAAAuf,GAAAvf,EAAAK,GAAiB,aAAAL,GAAA,iCAAAA,EAAAsf,EAAAjf,GAAA,+BAAAL,GAAA,kBAAAK,EAAA,+BAAAL,EAE7L,QAAAwf,GAAAxf,EAAAK,GAAiB,GAAAA,EAAA,CAAM,GAAAxR,GAAAmR,EAAAmR,UAAmB,IAAAtiB,OAAAmR,EAAAyf,WAAA,IAAA5wB,EAAA6wB,SAAqD,YAAd7wB,EAAA8wB,UAAAtf,GAAsBL,EAAAqf,YAAAhf,EAEyK,QAAAuf,GAAA5f,EAAAK,EAAAxR,GAAmB,aAAAwR,GAAA,iBAAAA,IAAA,KAAAA,EAAA,GAAAxR,GAAA,gBAAAwR,IAAA,IAAAA,GAAAwf,GAAA1lB,eAAA6F,IAAA6f,GAAA7f,IAAA,GAAAK,GAAAe,OAAAf,EAAA,KACnS,QAAAyf,GAAA9f,EAAAK,GAAiBL,IAAAmJ,KAAU,QAAAta,KAAAwR,GAAA,GAAAA,EAAAlG,eAAAtL,GAAA,CAAuC,GAAAkR,GAAA,IAAAlR,EAAAyM,QAAA,MAAAlD,EAAAwnB,EAAA/wB,EAAAwR,EAAAxR,GAAAkR,EAAyC,WAAAlR,MAAA,YAA4BkR,EAAAC,EAAA+f,YAAAlxB,EAAAuJ,GAAA4H,EAAAnR,GAAAuJ,GACvI,QAAA4nB,GAAAhgB,EAAAK,GAAiB,GAAAA,EAAA,CAAM,GAAA4f,GAAAjgB,KAAA,MAAAK,EAAA9B,UAAA,MAAA8B,EAAA4e,yBAAA,KAAAnH,OAAA3X,EAAA,IAAAH,GAAoF,UAAAK,EAAA4e,wBAAA,CAAoC,SAAA5e,EAAA9B,SAAA,KAAAuZ,OAAA3X,EAAA,IAAuC,sBAAAE,GAAA4e,yBAAA,UAAA5e,GAAA4e,yBAAA,KAAAnH,OAAA3X,EAAA,KAA4G,SAAAE,EAAA8I,OAAA,gBAAA9I,GAAA8I,MAAA,KAAA2O,OAAA3X,EAAA,MAClS,QAAA+f,GAAAlgB,EAAAK,GAAiB,QAAAL,EAAA1E,QAAA,2BAAA+E,GAAA8f,EAAoD,QAAAngB,GAAU,yKAAkL,mBAAkB,QAAAogB,GAAApgB,GAAyG,MAA1FA,KAAA1F,QAAA0F,EAAAqgB,YAAAC,OAAiCtgB,EAAAugB,0BAAAvgB,IAAAugB,yBAAyD,IAAAvgB,EAAA0f,SAAA1f,EAAAjK,WAAAiK,EAC5X,QAAAwgB,GAAAxgB,GAAe,GAAAA,EAAAygB,GAAAzgB,GAAA,CAAY,qBAAA0gB,IAAA,KAAA5I,OAAA3X,EAAA,KAA8C,IAAAE,GAAAL,EAAA2gB,SAAkBtgB,OAAAugB,GAAAvgB,GAAAqgB,GAAA1gB,EAAA2gB,UAAA3gB,EAAA/D,KAAAoE,KAAuC,QAAAwgB,GAAA7gB,GAAe8gB,GAAAC,MAAA/oB,KAAAgI,GAAA+gB,IAAA/gB,GAAA8gB,GAAA9gB,EAA6B,QAAAghB,KAAc,GAAAF,GAAA,CAAO,GAAA9gB,GAAA8gB,GAAAzgB,EAAA0gB,EAA+B,IAAjBA,GAAAD,GAAA,KAAWN,EAAAxgB,GAAMK,EAAA,IAAAL,EAAA,EAAaA,EAAAK,EAAAjP,OAAW4O,IAAAwgB,EAAAngB,EAAAL,KAAc,QAAAihB,GAAAjhB,EAAAK,GAAiB,MAAAL,GAAAK,GAAY,QAAA6gB,GAAAlhB,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuB,MAAA4H,GAAAK,EAAAxR,EAAAkR,EAAA3H,GAAkB,QAAA+oB,MAAqC,QAAAC,KAAc,OAAAN,IAAA,OAAAC,KAAAI,IAAAH,KACjY,QAAAK,GAAArhB,EAAAK,EAAAxR,GAAmB,GAAAyyB,GAAA,MAAAthB,GAAAK,EAAAxR,EAAoByyB,MAAM,KAAI,MAAAC,IAAAvhB,EAAAK,EAAAxR,GAAiB,QAAQyyB,MAAAF,KAC1E,QAAAI,GAAAxhB,EAAAK,GAAiB,GAAAxR,GAAAmR,EAAA2gB,SAAkB,WAAA9xB,EAAA,WAAwB,IAAAkR,GAAA6gB,GAAA/xB,EAAY,WAAAkR,EAAA,WAAwBlR,GAAAkR,EAAAM,EAAOL,GAAA,OAAAK,GAAY,mOAAAN,KAAAgf,YAAA/e,IAAA/D,KAAA8D,IAAA,WAAAC,GAAA,UAAAA,GAAA,WAAAA,GAAA,aAAAA,IAAsUA,GAAAD,CAAK,MAAAC,EAAQ,SAAAA,KAAa,GAAAA,EAAA,WAAiB,IAAAnR,GAAA,kBACneA,GAAA,KAAAipB,OAAA3X,EAAA,IAAAE,QAAAxR,IAAwC,OAAAA,GAAiM,QAAA4yB,GAAAzhB,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,EAAAd,EAAAR,EAAA3B,GAA+B,GAAA2C,GAAAzP,MAAAwC,UAAAukB,MAAArpB,KAAAkI,UAAA,EAA8C,KAAIwJ,EAAAnF,MAAArM,EAAA6R,GAAa,MAAA9G,GAAStC,KAAAsc,QAAAha,IAAsF,QAAA8nB,IAAA1hB,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,EAAAd,EAAAR,EAAA3B,GAA+B4jB,MAAMC,GAAA,KAAQH,EAAAvmB,MAAA2mB,GAAAhrB,WACnd,QAAAirB,IAAA9hB,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,EAAAd,EAAAR,EAAA3B,GAAwD,GAAzB2jB,GAAAxmB,MAAA5D,KAAAT,WAAyB8qB,GAAA,CAAO,IAAAA,GAA8B,KAAA7J,OAAA3X,EAAA,KAAvB,IAAAO,GAAAkhB,EAASD,OAAMC,GAAA,KAAiCG,WAAAC,GAAAthB,IAAkB,QAAAuhB,IAAAjiB,GAAe,GAAAK,GAAAL,EAAAnR,EAAAmR,CAAY,IAAAA,EAAAkiB,UAAA,KAAoB7hB,EAAA2H,QAAS3H,IAAA2H,WAAY,CAAKhI,EAAAK,CAAI,GAAAA,GAAAL,EAAA,UAAAK,EAAA8hB,SAAAtzB,EAAAwR,EAAA2H,QAAAhI,EAAAK,EAAA2H,aAAmDhI,GAAS,WAAAK,EAAArJ,IAAAnI,EAAA,KAAwB,QAAAuzB,IAAApiB,GAAe,QAAAA,EAAAhJ,IAAA,CAAe,GAAAqJ,GAAAL,EAAAqiB,aAA8E,IAAxD,OAAAhiB,IAAAL,IAAAkiB,UAAA,OAAAliB,IAAAK,EAAAL,EAAAqiB,gBAAwD,OAAAhiB,EAAA,MAAAA,GAAAiiB,WAAgC,YAAY,QAAAC,IAAAviB,GAAe,GAAAiiB,GAAAjiB,OAAA,KAAA8X,OAAA3X,EAAA,MAChd,QAAAqiB,IAAAxiB,GAAe,GAAAK,GAAAL,EAAAkiB,SAAkB,KAAA7hB,EAAA,CAAe,GAARA,EAAA4hB,GAAAjiB,GAAQ,OAAAK,EAAA,KAAAyX,OAAA3X,EAAA,KAAgC,OAAAE,KAAAL,EAAA,KAAAA,EAAoB,OAAAnR,GAAAmR,EAAAD,EAAAM,IAAiB,CAAE,GAAAjI,GAAAvJ,EAAAmZ,MAAe,WAAA5P,EAAA,KAAkB,IAAA4I,GAAA5I,EAAA8pB,SAAkB,WAAAlhB,EAAA,CAAwB,GAAXjB,EAAA3H,EAAA4P,OAAW,OAAAjI,EAAA,CAAalR,EAAAkR,CAAI,UAAS,MAAM,GAAA3H,EAAAqqB,QAAAzhB,EAAAyhB,MAAA,CAAsB,IAAAzhB,EAAA5I,EAAAqqB,MAAczhB,GAAE,CAAE,GAAAA,IAAAnS,EAAA,MAAA0zB,IAAAnqB,GAAA4H,CAAwB,IAAAgB,IAAAjB,EAAA,MAAAwiB,IAAAnqB,GAAAiI,CAAwBW,KAAA0hB,QAAY,KAAA5K,OAAA3X,EAAA,MAAqB,GAAAtR,EAAAmZ,SAAAjI,EAAAiI,OAAAnZ,EAAAuJ,EAAA2H,EAAAiB,MAA+B,CAAK,OAAAd,MAAAR,EAAAtH,EAAAqqB,MAAuB/iB,GAAE,CAAE,GAAAA,IAAA7Q,EAAA,CAAUqR,KAAKrR,EAAAuJ,EAAI2H,EAAAiB,CAAI,OAAM,GAAAtB,IAAAK,EAAA,CAAUG,KAAKH,EAAA3H,EAAIvJ,EAAAmS,CAAI,OAAMtB,IAAAgjB,QAAY,IAAAxiB,EAAA,CAAO,IAAAR,EAAAsB,EAAAyhB,MAAc/iB,GAAE,CAAE,GAAAA,IACzf7Q,EAAA,CAAGqR,KAAKrR,EAAAmS,EAAIjB,EAAA3H,CAAI,OAAM,GAAAsH,IAAAK,EAAA,CAAUG,KAAKH,EAAAiB,EAAInS,EAAAuJ,CAAI,OAAMsH,IAAAgjB,QAAY,IAAAxiB,EAAA,KAAA4X,OAAA3X,EAAA,OAA4B,GAAAtR,EAAAqzB,YAAAniB,EAAA,KAAA+X,OAAA3X,EAAA,MAAwC,OAAAtR,EAAAmI,IAAA,KAAA8gB,OAAA3X,EAAA,KAAiC,OAAAtR,GAAA8xB,UAAA3sB,UAAAnF,EAAAmR,EAAAK,EAAmC,QAAAsiB,IAAA3iB,GAAuB,GAARA,EAAAwiB,GAAAxiB,IAAQA,EAAA,WAAkB,QAAAK,GAAAL,IAAa,CAAE,OAAAK,EAAArJ,KAAA,IAAAqJ,EAAArJ,IAAA,MAAAqJ,EAAiC,IAAAA,EAAAoiB,MAAApiB,EAAAoiB,MAAAza,OAAA3H,MAAAoiB,UAAsC,CAAK,GAAApiB,IAAAL,EAAA,KAAe,OAAKK,EAAAqiB,SAAW,CAAE,IAAAriB,EAAA2H,QAAA3H,EAAA2H,SAAAhI,EAAA,WAAuCK,KAAA2H,OAAW3H,EAAAqiB,QAAA1a,OAAA3H,EAAA2H,OAA0B3H,IAAAqiB,SAAa,YACrc,QAAAE,IAAA5iB,EAAAK,GAAiB,OAAAxR,GAAAmR,EAAAkiB,UAAsB,OAAA7hB,GAAS,CAAE,GAAAA,IAAAL,GAAAK,IAAAxR,EAAA,QAAyBwR,KAAA2H,OAAW,SACtF,QAAA6a,IAAA7iB,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuB,OAAO0qB,UAAA9iB,EAAA+iB,aAAA1iB,EAAA2iB,iBAAA,GAAAn0B,EAAAo0B,YAAA7qB,EAAA8qB,kBAAAnjB,IAAqF,QAAAojB,IAAAnjB,EAAAK,GAAiB,OAAAL,GAAU,6BAAAojB,GAAA,IAAuC,MAAM,iCAAAC,GAAA,IAA0C,MAAM,gCAAAC,GAAA,IAAyC,MAAM,oCAAAC,GAAAC,OAAAnjB,EAAAojB,UAA4D,MAAM,kDAAAC,GAAAF,OAAAnjB,EAAAojB,YAC5V,QAAAE,IAAA3jB,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,GAAyB,cAAAhB,KAAAijB,cAAAjiB,GAAAhB,EAAA6iB,GAAAxiB,EAAAxR,EAAAkR,EAAA3H,EAAA4I,GAAA,OAAAX,MAAAogB,GAAApgB,GAAA,OAAAA,GAAAujB,GAAAvjB,IAAAL,IAA4FA,EAAAgjB,kBAAAjjB,EAAsBM,EAAAL,EAAAkjB,iBAAqB,OAAA9qB,QAAAiI,EAAA/E,QAAAlD,IAAAiI,EAAArI,KAAAI,GAAuC4H,GACvM,QAAA6jB,IAAA7jB,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuB,OAAAiI,GAAU,oBAAA+iB,IAAAO,GAAAP,GAAApjB,EAAAK,EAAAxR,EAAAkR,EAAA3H,KAA6C,uBAAAirB,IAAAM,GAAAN,GAAArjB,EAAAK,EAAAxR,EAAAkR,EAAA3H,KAA+C,uBAAAkrB,IAAAK,GAAAL,GAAAtjB,EAAAK,EAAAxR,EAAAkR,EAAA3H,KAA+C,sBAAA4I,GAAA5I,EAAAqrB,SAA6E,OAAxCF,IAAA/f,IAAAxC,EAAA2iB,GAAAJ,GAAA3kB,IAAAoC,IAAA,KAAAhB,EAAAK,EAAAxR,EAAAkR,EAAA3H,MAAiD,+BAAA4I,GAAA5I,EAAAqrB,UAAAC,GAAAlgB,IAAAxC,EAAA2iB,GAAAD,GAAA9kB,IAAAoC,IAAA,KAAAhB,EAAAK,EAAAxR,EAAAkR,EAAA3H,OAAyF,SAC3V,QAAA0rB,IAAA9jB,GAAe,GAAAK,GAAA0jB,GAAA/jB,EAAA1F,OAAmB,WAAA+F,EAAA,CAAa,GAAAxR,GAAAozB,GAAA5hB,EAAY,WAAAxR,EAAA,GAAAwR,EAAAxR,EAAAmI,IAAA,KAAAqJ,GAA+B,GAAAA,EAAA+hB,GAAAvzB,GAAA,OAAAwR,EAA2H,MAAtGL,GAAA8iB,UAAAziB,MAAc2jB,IAAAhkB,EAAAikB,aAAA,WAA6BtjB,GAAAujB,yBAAAlkB,EAAAmkB,SAAA,WAAiDC,GAAAv1B,WAAkB,QAAAwR,GAAAxR,EAAA8xB,UAAA0D,QAAyF,YAArDrkB,EAAA8iB,UAAA,IAAAj0B,EAAAmI,IAAAnI,EAAA8xB,UAAA2D,cAAA,MAA6DtkB,EAAA8iB,UAAA,KAC9T,QAAAyB,IAAAvkB,GAAe,UAAAA,EAAA8iB,UAAA,QAA+B,QAAAziB,GAAAL,EAAAkjB,iBAA6B,EAAA7iB,EAAAjP,QAAW,CAAE,GAAAvC,GAAA21B,GAAAxkB,EAAA+iB,aAAA/iB,EAAAgjB,iBAAA3iB,EAAA,GAAAL,EAAAijB,YAA+D,WAAAp0B,EAAA,MAAAwR,GAAAogB,GAAA5xB,GAAA,OAAAwR,GAAAujB,GAAAvjB,GAAAL,EAAA8iB,UAAAj0B,IAA4DwR,GAAAokB,QAAU,SAAS,QAAAC,IAAA1kB,EAAAK,EAAAxR,GAAmB01B,GAAAvkB,IAAAnR,EAAA20B,OAAAnjB,GACzP,QAAAskB,MAAc,IAAAC,MAAU,EAAAC,GAAAzzB,QAAY,CAAE,GAAA4O,GAAA6kB,GAAA,EAAY,WAAA7kB,EAAA8iB,UAAA,CAAuB9iB,EAAAygB,GAAAzgB,EAAA8iB,WAAkB,OAAA9iB,GAAA8kB,GAAA9kB,EAAgB,OAAM,OAAAK,GAAAL,EAAAkjB,iBAA6B,EAAA7iB,EAAAjP,QAAW,CAAE,GAAAvC,GAAA21B,GAAAxkB,EAAA+iB,aAAA/iB,EAAAgjB,iBAAA3iB,EAAA,GAAAL,EAAAijB,YAA+D,WAAAp0B,EAAA,CAAamR,EAAA8iB,UAAAj0B,CAAc,OAAMwR,EAAAokB,QAAU,OAAAzkB,EAAA8iB,WAAA+B,GAAAJ,QAA+B,OAAArB,IAAAmB,GAAAnB,SAAA,MAA6B,OAAAC,IAAAkB,GAAAlB,SAAA,MAA6B,OAAAC,IAAAiB,GAAAjB,SAAA,MAA6BC,GAAAtuB,QAAAyvB,IAAehB,GAAAzuB,QAAAyvB,IAC1Y,QAAAK,IAAA/kB,EAAAK,GAAiBL,EAAA8iB,YAAAziB,IAAAL,EAAA8iB,UAAA,KAAA8B,WAAAjkB,GAAAqkB,0BAAArkB,GAAAskB,wBAAAN,MACjB,QAAAO,IAAAllB,GAAe,QAAAK,MAAc,MAAA0kB,IAAA1kB,EAAAL,GAAe,KAAA6kB,GAAAzzB,OAAA,CAAgB2zB,GAAAF,GAAA,GAAA7kB,EAAY,QAAAnR,GAAA,EAAYA,EAAAg2B,GAAAzzB,OAAYvC,IAAA,CAAK,GAAAkR,GAAA8kB,GAAAh2B,EAAYkR,GAAA+iB,YAAA9iB,IAAAD,EAAA+iB,UAAA,OAA6H,IAAxF,OAAAM,IAAA2B,GAAA3B,GAAApjB,GAAoB,OAAAqjB,IAAA0B,GAAA1B,GAAArjB,GAAoB,OAAAsjB,IAAAyB,GAAAzB,GAAAtjB,GAAoBujB,GAAAtuB,QAAAoL,GAAcqjB,GAAAzuB,QAAAoL,GAAcxR,EAAA,EAAQA,EAAAs2B,GAAA/zB,OAAYvC,IAAAkR,EAAAolB,GAAAt2B,GAAAkR,EAAA+iB,YAAA9iB,IAAAD,EAAA+iB,UAAA,KAAgD,MAAK,EAAAqC,GAAA/zB,SAAAvC,EAAAs2B,GAAA,UAAAt2B,EAAAi0B,YAA0CgB,GAAAj1B,GAAA,OAAAA,EAAAi0B,WAAAqC,GAAAV,QACjW,QAAAW,IAAAplB,EAAAK,GAAiB,GAAAxR,KAAwF,OAA/EA,GAAAmR,EAAAxN,eAAA6N,EAAA7N,cAAmC3D,EAAA,SAAAmR,GAAA,SAAAK,EAAyBxR,EAAA,MAAAmR,GAAA,MAAAK,EAAmBxR,EAC2I,QAAAw2B,IAAArlB,GAAe,GAAAslB,GAAAtlB,GAAA,MAAAslB,IAAAtlB,EAAsB,KAAAulB,GAAAvlB,GAAA,MAAAA,EAAmB,IAAAnR,GAAAwR,EAAAklB,GAAAvlB,EAAc,KAAAnR,IAAAwR,GAAA,GAAAA,EAAAlG,eAAAtL,QAAA22B,IAAA,MAAAF,IAAAtlB,GAAAK,EAAAxR,EAA6D,OAAAmR,GAErK,QAAAylB,IAAAzlB,EAAAK,GAAiB,OAAAxR,GAAA,EAAYA,EAAAmR,EAAA5O,OAAWvC,GAAA,GAAM,GAAAkR,GAAAC,EAAAnR,GAAAuJ,EAAA4H,EAAAnR,EAAA,EAAoBuJ,GAAA,MAAAA,EAAA,GAAAwiB,cAAAxiB,EAAA4f,MAAA,IAAuC0N,GAAAliB,IAAAzD,EAAAM,GAAYslB,GAAAniB,IAAAzD,EAAA3H,GAAY0J,EAAA1J,GAAA2H,KACnV,QAAA6lB,IAAA5lB,GAAe,UAAAA,GAAA,MAAAiB,IAAA,IAA2B,WAAAjB,GAAA,MAAAiB,IAAA,IAA2B,WAAAjB,GAAA,MAAAiB,IAAA,IAA2B,IAAAZ,GAAA,GAAAL,CAAW,YAAAK,GAAAY,GAAA,GAAAZ,GAAuB,QAAAL,IAAAiB,GAAA,QAA6BZ,EAAA,IAAAL,EAAQ,IAAAK,GAAAY,GAAA,GAAAZ,GAAuB,SAAAL,IAAAiB,GAAA,QAA8BZ,EAAA,KAAAL,EAAS,IAAAK,GAAAY,GAAA,EAAAZ,GAAsB,UAAAL,IAAAiB,GAAA,SAAgCZ,EAAA,QAAAL,EAAY,IAAAK,GAAAY,GAAA,EAAAZ,IAAsBA,EAAA,SAAAL,EAAa,IAAAK,GAAAY,GAAA,EAAAZ,GAAsB,SAAAL,GAAAiB,GAAA,YAAkC,eAAAjB,IAAAiB,GAAA,cAA0CZ,EAAA,UAAAL,EAAc,IAAAK,GAAAY,GAAA,EAAAZ,GAAsB,gBAAAL,IAAAiB,GAAA,eAChdA,GAAA,EAAIjB,QAAS,QAAA6lB,IAAA7lB,GAAe,OAAAA,GAAU,iBAAkB,kBAAkB,yBAAyB,iBAAiB,mBAAkB,QAAA8lB,IAAA9lB,GAAe,OAAAA,GAAU,yBAA0B,0CAA0C,oDAAoD,+BAA+B,iBAAiB,cAAA8X,OAAA3X,EAAA,IAAAH,KACvU,QAAA+lB,IAAA/lB,EAAAK,GAAiB,GAAAxR,GAAAmR,EAAAgmB,YAAqB,QAAAn3B,EAAA,MAAAoS,IAAA,CAAoB,IAAAlB,GAAA,EAAA3H,EAAA,EAAA4I,EAAAhB,EAAAimB,aAAA/lB,EAAAF,EAAAkmB,eAAAxmB,EAAAM,EAAAmmB,WAAgE,QAAAnlB,EAAAjB,EAAAiB,EAAA5I,EAAA6I,GAAA,OAAoB,IAAAD,EAAA,UAAAnS,EAAA,IAAAmS,EAAA,CAA6B,GAAAjD,GAAAiD,GAAAd,CAAW,KAAAnC,GAAAgC,EAAA6lB,GAAA7nB,GAAA3F,EAAA6I,KAAAvB,GAAAsB,EAAA,IAAAtB,IAAAK,EAAA6lB,GAAAlmB,GAAAtH,EAAA6I,SAAgDD,GAAAnS,GAAAqR,EAAA,IAAAc,GAAAjB,EAAA6lB,GAAA5kB,GAAA5I,EAAA6I,IAAA,IAAAvB,IAAAK,EAAA6lB,GAAAlmB,GAAAtH,EAAA6I,GAAqD,QAAAlB,EAAA,QAAqD,IAAnCA,EAAA,GAAAqmB,GAAArmB,GAAWA,EAAAlR,IAAA,EAAAkR,EAAA,KAAAA,IAAA,KAAwB,IAAAM,OAAAN,GAAA,KAAAM,EAAAH,GAAA,CAAkC,GAAN0lB,GAAAvlB,GAAMjI,GAAA6I,GAAA,MAAAZ,EAAiBY,IAAA7I,EAAuB,GAAnBiI,EAAAL,EAAAqmB,eAAmB,IAAAhmB,EAAA,IAAAL,IAAAsmB,cAAAjmB,GAAAN,EAAoC,EAAAM,GAAIxR,EAAA,GAAAu3B,GAAA/lB,GAAAjI,EAAA,GAAAvJ,EAAAkR,GAAAC,EAAAnR,GAAAwR,IAAAjI,CAAiC,OAAA2H,GACne,QAAAwmB,IAAAvmB,GAA4C,MAA7BA,KAAAgmB,yBAA6B,IAAAhmB,IAAA,WAAAA,EAAA,aAAyC,QAAAwmB,IAAAxmB,EAAAK,GAAiB,OAAAL,GAAU,gBAAiB,iBAAiB,eAAAA,GAAAymB,GAAA,IAAApmB,GAAA,IAAAL,EAAAwmB,GAAA,GAAAnmB,GAAAL,CAA4C,eAAAA,GAAAymB,GAAA,KAAApmB,GAAA,IAAAL,EAAAwmB,GAAA,EAAAnmB,GAAAL,CAA4C,cAAAA,GAAAymB,GAAA,MAAApmB,GAAA,IAAAL,MAAAymB,GAAA,SAAApmB,GAAA,IAAAL,MAAA,MAAAA,CAAuE,cAAAK,GAAAomB,GAAA,WAAApmB,GAAA,IAAAA,MAAA,WAAAA,EAAwD,KAAAyX,OAAA3X,EAAA,IAAAH,IAAuB,QAAAymB,IAAAzmB,GAAe,MAAAA,MAAY,QAAA0mB,IAAA1mB,GAAe,OAAAK,MAAAxR,EAAA,EAAiB,GAAAA,EAAKA,IAAAwR,EAAArI,KAAAgI,EAAc,OAAAK,GAC9c,QAAAsmB,IAAA3mB,EAAAK,EAAAxR,GAAmBmR,EAAAgmB,cAAA3lB,CAAkB,IAAAN,GAAAM,EAAA,CAAUL,GAAAkmB,gBAAAnmB,EAAoBC,EAAAmmB,aAAApmB,EAAiBC,IAAA4mB,WAAevmB,EAAA,GAAA+lB,GAAA/lB,GAAWL,EAAAK,GAAAxR,EAA+D,QAAAg4B,IAAA7mB,GAAe,WAAAA,EAAA,OAAA8mB,GAAA9mB,GAAA+mB,GAAA,KAA6G,QAAAC,IAAAhnB,EAAAK,EAAAxR,EAAAkR,GAAqBknB,IAAA9F,GAAS,IAAA/oB,GAAA8uB,GAAAlmB,EAAAimB,EAAcA,MAAM,KAAI/F,EAAA9oB,EAAA4H,EAAAK,EAAAxR,EAAAkR,GAAc,SAAQknB,GAAAjmB,IAAAogB,KAAc,QAAA3yB,IAAAuR,EAAAK,EAAAxR,EAAAkR,GAAqBonB,GAAAC,GAAAF,GAAAjsB,KAAA,KAAA+E,EAAAK,EAAAxR,EAAAkR,IACxZ,QAAAmnB,IAAAlnB,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAAsnB,GAAA,CAAO,GAAAjvB,EAAM,KAAAA,EAAA,OAAAiI,KAAA,EAAAwkB,GAAAzzB,WAAAk2B,GAAAhsB,QAAA0E,KAAA6iB,GAAA,KAAA7iB,EAAAK,EAAAxR,EAAAkR,GAAA8kB,GAAA7sB,KAAAgI,OAA8E,CAAK,GAAAgB,GAAAwjB,GAAAxkB,EAAAK,EAAAxR,EAAAkR,EAAkB,WAAAiB,EAAA5I,GAAA+qB,GAAAnjB,EAAAD,OAAuB,CAAK,GAAA3H,EAAA,CAAM,MAAAkvB,GAAAhsB,QAAA0E,GAAgD,MAA3BA,GAAA6iB,GAAA7hB,EAAAhB,EAAAK,EAAAxR,EAAAkR,OAAgB8kB,IAAA7sB,KAAAgI,EAAkB,IAAA6jB,GAAA7iB,EAAAhB,EAAAK,EAAAxR,EAAAkR,GAAA,MAAwBojB,IAAAnjB,EAAAD,GAAQwnB,GAAAvnB,EAAAK,EAAAN,EAAA,KAAAlR,MAChQ,QAAA21B,IAAAxkB,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAAgoB,EAAArgB,EAAoB,IAAR3H,EAAA2rB,GAAA3rB,GAAQ,OAAAA,EAAA,CAAa,GAAA4I,GAAAihB,GAAA7pB,EAAY,WAAA4I,EAAA5I,EAAA,SAAmB,CAAK,GAAA8H,GAAAc,EAAAhK,GAAY,SAAAkJ,EAAA,CAAmB,GAAR9H,EAAAgqB,GAAAphB,GAAQ,OAAA5I,EAAA,MAAAA,EAAqBA,GAAA,SAAO,QAAA8H,EAAA,CAAe,GAAAc,EAAA2f,UAAA0D,QAAA,WAAArjB,EAAAhK,IAAAgK,EAAA2f,UAAA2D,cAAA,IAAuElsB,GAAA,SAAO4I,KAAA5I,MAAA,OAAoC,MAAdmvB,IAAAvnB,EAAAK,EAAAN,EAAA3H,EAAAvJ,GAAc,KACtR,QAAA24B,MAAc,GAAAC,GAAA,MAAAA,GAAgB,IAAAznB,GAAAD,EAAAM,EAAAqnB,GAAA74B,EAAAwR,EAAAjP,OAAAgH,EAAA,SAAAuvB,OAAAr2B,MAAAq2B,GAAAtI,YAAAre,EAAA5I,EAAAhH,MAA0E,KAAA4O,EAAA,EAAQA,EAAAnR,GAAAwR,EAAAL,KAAA5H,EAAA4H,GAAiBA,KAAK,GAAAE,GAAArR,EAAAmR,CAAU,KAAAD,EAAA,EAAQA,GAAAG,GAAAG,EAAAxR,EAAAkR,KAAA3H,EAAA4I,EAAAjB,GAAsBA,KAAK,MAAA0nB,IAAArvB,EAAA4f,MAAAhY,EAAA,EAAAD,EAAA,EAAAA,EAAA,QAAoC,QAAA6nB,IAAA5nB,GAAe,GAAAK,GAAAL,EAAA6nB,OAAuF,OAAvE,YAAA7nB,QAAA8nB,SAAA,IAAA9nB,GAAA,KAAAK,IAAAL,EAAA,KAAAA,EAAAK,EAAwD,KAAAL,MAAA,IAAe,IAAAA,GAAA,KAAAA,IAAA,EAAyB,QAAA+nB,MAAc,SAAS,QAAAC,MAAc,SAC3X,QAAAC,IAAAjoB,GAAe,QAAAK,KAAAN,EAAA3H,EAAA4I,EAAAd,GAAsB5I,KAAA4wB,WAAA7nB,EAAkB/I,KAAA6wB,YAAA/vB,EAAmBd,KAAA2E,KAAA8D,EAAYzI,KAAA2rB,YAAAjiB,EAAmB1J,KAAAgD,OAAA4F,EAAc5I,KAAA8wB,cAAA,IAAwB,QAAAv5B,KAAAmR,KAAA7F,eAAAtL,KAAAwR,EAAAL,EAAAnR,GAAAyI,KAAAzI,GAAAwR,IAAAW,KAAAnS,GAA6L,OAA5HyI,MAAA+wB,oBAAA,MAAArnB,EAAAsnB,iBAAAtnB,EAAAsnB,sBAAAtnB,EAAAunB,aAAAR,GAAAC,GAA+F1wB,KAAAkxB,qBAAAR,GAA6B1wB,KACnE,MAD+E1I,IAAAyR,EAAA5M,WAAeg1B,eAAA,WAA0BnxB,KAAAgxB,mBAAyB,IAAAtoB,GAAA1I,KAAA2rB,WAAuBjjB,OAAAyoB,eAAAzoB,EAAAyoB,iBAAA,iBAAAzoB,GAAAuoB,cACjbvoB,EAAAuoB,gBAAAjxB,KAAA+wB,mBAAAN,KAA+CW,gBAAA,WAA4B,GAAA1oB,GAAA1I,KAAA2rB,WAAuBjjB,OAAA0oB,gBAAA1oB,EAAA0oB,kBAAA,iBAAA1oB,GAAA2oB,eAAA3oB,EAAA2oB,iBAAArxB,KAAAkxB,qBAAAT,KAA+Ha,QAAA,aAAqBC,aAAAd,KAAmB1nB,EAI1G,QAAAyoB,IAAA9oB,GAAe,GAAAK,GAAA/I,KAAA2rB,WAAuB,OAAA5iB,GAAA0oB,iBAAA1oB,EAAA0oB,iBAAA/oB,QAAAgpB,GAAAhpB,OAAAK,EAAAL,GAAoE,QAAAipB,MAAc,MAAAH,IAIvR,QAAAI,IAAAlpB,EAAAK,GAAiB,OAAAL,GAAU,uBAAAmpB,GAAA7tB,QAAA+E,EAAAwnB,QAA8C,4BAAAxnB,EAAAwnB,OAAsC,uDAA0D,mBAAkB,QAAAuB,IAAAppB,GAA0B,MAAXA,KAAAqpB,OAAW,gBAAArpB,IAAA,QAAAA,KAAAqU,KAAA,KAA4D,QAAAiV,IAAAtpB,EAAAK,GAAiB,OAAAL,GAAU,2BAAAopB,IAAA/oB,EAAmC,4BAAAA,EAAAkpB,MAAA,MAA4CC,MAAMC,GAAU,uBAAAzpB,GAAAK,EAAAgU,KAAArU,IAAAypB,IAAAD,GAAA,KAAAxpB,CAAmD,sBAC9b,QAAA0pB,IAAA1pB,EAAAK,GAAiB,GAAAspB,GAAA,yBAAA3pB,IAAA4pB,IAAAV,GAAAlpB,EAAAK,IAAAL,EAAAwnB,KAAAC,GAAAC,GAAAC,GAAA,KAAAgC,MAAA3pB,GAAA,IAAmF,QAAAA,GAAU,uBAAyB,qBAAAK,EAAAwpB,SAAAxpB,EAAAypB,QAAAzpB,EAAA0pB,UAAA1pB,EAAAwpB,SAAAxpB,EAAAypB,OAAA,CAA2E,GAAAzpB,EAAA2pB,MAAA,EAAA3pB,EAAA2pB,KAAA54B,OAAA,MAAAiP,GAAA2pB,IAAyC,IAAA3pB,EAAAkpB,MAAA,MAAAjwB,QAAAG,aAAA4G,EAAAkpB,OAA+C,WAAY,4BAAAU,KAAA,OAAA5pB,EAAA6pB,OAAA,KAAA7pB,EAAAgU,IAA6D,sBACxN,QAAA8V,IAAAnqB,GAAe,GAAAK,GAAAL,KAAAgd,UAAAhd,EAAAgd,SAAAxqB,aAA8C,iBAAA6N,IAAA+pB,GAAApqB,EAAA/D,MAAA,aAAAoE,EAAoD,QAAAgqB,IAAArqB,EAAAK,EAAAxR,EAAAkR,GAAqB8gB,EAAA9gB,GAAMM,EAAAiqB,GAAAjqB,EAAA,YAAmB,EAAAA,EAAAjP,SAAAvC,EAAA,GAAA07B,IAAA,yBAAA17B,EAAAkR,GAAAC,EAAAhI,MAA4DwyB,MAAA37B,EAAA47B,UAAApqB,KAA2C,QAAAqqB,IAAA1qB,GAAe2qB,GAAA3qB,EAAA,GAAQ,QAAA4qB,IAAA5qB,GAAe,GAAAK,GAAAwqB,GAAA7qB,EAAY,IAAAwd,EAAAnd,GAAA,MAAAL,GACnd,QAAA8qB,IAAA9qB,EAAAK,GAAiB,cAAAL,EAAA,MAAAK,GAAkR,QAAA0qB,MAAcC,QAAAC,YAAA,mBAAAC,IAAAC,GAAAH,GAAA,MAAuD,QAAAE,IAAAlrB,GAAe,aAAAA,EAAAwa,cAAAoQ,GAAAO,IAAA,CAAqC,GAAA9qB,KAA+B,IAAtBgqB,GAAAhqB,EAAA8qB,GAAAnrB,EAAAogB,EAAApgB,IAAiBA,EAAA0qB,GAAKzD,GAAAjnB,EAAAK,OAAW,CAAK4mB,KAAM,KAAIhG,EAAAjhB,EAAAK,GAAQ,QAAQ4mB,MAAA7F,OACre,QAAAgK,IAAAprB,EAAAK,EAAAxR,GAAmB,YAAAmR,GAAA+qB,KAAAC,GAAA3qB,EAAA8qB,GAAAt8B,EAAAm8B,GAAAK,YAAA,mBAAAH,KAAA,aAAAlrB,GAAA+qB,KAA0F,QAAAO,IAAAtrB,GAAe,uBAAAA,GAAA,UAAAA,GAAA,YAAAA,EAAA,MAAA4qB,IAAAO,IAAmE,QAAAI,IAAAvrB,EAAAK,GAAiB,aAAAL,EAAA,MAAA4qB,IAAAvqB,GAA4B,QAAAmrB,IAAAxrB,EAAAK,GAAiB,aAAAL,GAAA,WAAAA,EAAA,MAAA4qB,IAAAvqB,GAA0C,QAAAorB,IAAAzrB,EAAAK,GAAiB,MAAAL,KAAAK,IAAA,IAAAL,GAAA,EAAAA,IAAA,EAAAK,IAAAL,OAAAK,MACxT,QAAAqrB,IAAA1rB,EAAAK,GAAiB,GAAAsrB,GAAA3rB,EAAAK,GAAA,QAAoB,oBAAAL,IAAA,OAAAA,GAAA,gBAAAK,IAAA,OAAAA,EAAA,QAAyE,IAAAxR,GAAA+C,OAAAoI,KAAAgG,GAAAD,EAAAnO,OAAAoI,KAAAqG,EAAsC,IAAAxR,EAAAuC,SAAA2O,EAAA3O,OAAA,QAAgC,KAAA2O,EAAA,EAAQA,EAAAlR,EAAAuC,OAAW2O,IAAA,IAAA6rB,GAAAj9B,KAAA0R,EAAAxR,EAAAkR,MAAA4rB,GAAA3rB,EAAAnR,EAAAkR,IAAAM,EAAAxR,EAAAkR,KAAA,QAAuD,UAAS,QAAA8rB,IAAA7rB,GAAe,KAAKA,KAAAmR,YAAgBnR,IAAAmR,UAAgB,OAAAnR,GAC3T,QAAA8rB,IAAA9rB,EAAAK,GAAiB,GAAAxR,GAAAg9B,GAAA7rB,EAAYA,GAAA,CAAI,QAAAD,GAAUlR,GAAE,CAAE,OAAAA,EAAA6wB,SAAA,CAA4C,GAAzB3f,EAAAC,EAAAnR,EAAAwwB,YAAAjuB,OAAyB4O,GAAAK,GAAAN,GAAAM,EAAA,OAAqBzK,KAAA/G,EAAAgnB,OAAAxV,EAAAL,EAAmBA,GAAAD,EAAIC,EAAA,CAAG,KAAKnR,GAAE,CAAE,GAAAA,EAAAiJ,YAAA,CAAkBjJ,IAAAiJ,WAAgB,MAAAkI,GAAQnR,IAAAkH,WAAelH,EAAA,OAASA,EAAAg9B,GAAAh9B,IAAS,QAAAk9B,IAAA/rB,EAAAK,GAAiB,SAAAL,IAAAK,KAAAL,IAAAK,KAAAL,GAAA,IAAAA,EAAA0f,YAAArf,GAAA,IAAAA,EAAAqf,SAAAqM,GAAA/rB,EAAAK,EAAAtK,YAAA,YAAAiK,KAAAgsB,SAAA3rB,KAAAL,EAAAisB,4BAAA,GAAAjsB,EAAAisB,wBAAA5rB,MAC/O,QAAA6rB,MAAc,OAAAlsB,GAAAsgB,OAAAjgB,EAAAod,IAAwBpd,YAAAL,GAAAmsB,mBAAiC,CAAE,IAAI,GAAAt9B,GAAA,gBAAAwR,GAAA+rB,cAAAjT,SAAAkT,KAAsD,MAAAtsB,GAASlR,KAAK,IAAAA,EAAuB,KAAvBmR,GAAAK,EAAA+rB,cAAkC/rB,EAAAod,EAAAzd,EAAApQ,UAAiB,MAAAyQ,GAAS,QAAAisB,IAAAtsB,GAAe,GAAAK,GAAAL,KAAAgd,UAAAhd,EAAAgd,SAAAxqB,aAA8C,OAAA6N,KAAA,UAAAA,IAAA,SAAAL,EAAA/D,MAAA,WAAA+D,EAAA/D,MAAA,QAAA+D,EAAA/D,MAAA,QAAA+D,EAAA/D,MAAA,aAAA+D,EAAA/D,OAAA,aAAAoE,GAAA,SAAAL,EAAAusB,iBAE1Q,QAAAC,IAAAxsB,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAlR,EAAAyxB,SAAAzxB,IAAAe,SAAA,IAAAf,EAAA6wB,SAAA7wB,IAAA2vB,aAA+DiO,KAAA,MAAAC,SAAAjP,EAAA1d,OAAA2sB,GAAA,kBAAA3sB,IAAAusB,GAAAvsB,MAA+DmW,MAAAnW,EAAA4sB,eAAAlV,IAAA1X,EAAA6sB,eAA0C7sB,KAAAye,eAAAze,EAAAye,cAAAqO,aAAAvM,QAAAwM,eAAA/sB,GAA6EgtB,WAAAhtB,EAAAgtB,WAAAC,aAAAjtB,EAAAitB,aAAAC,UAAAltB,EAAAktB,UAAAC,YAAAntB,EAAAmtB,cAAoGC,IAAAzB,GAAAyB,GAAAptB,KAAAotB,GAAAptB,IAAAuqB,GAAA8C,GAAA,cAAArtB,EAAA3O,SAAAiP,EAAA,GAAAkqB,IAAA,yBAAAlqB,EAAAxR,GAAAmR,EAAAhI,MAAsGwyB,MAAAnqB,EAAAoqB,UAAA1qB,IAAoBM,EAAA/F,OAAAoyB,MAKte,QAAAW,IAAArtB,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAC,EAAA/D,MAAA,eAA8B+D,GAAAooB,cAAAv5B,EAAkBizB,GAAA/hB,EAAAM,EAAA,OAAAL,GAAiBA,EAAAooB,cAAA,KACpF,QAAAuC,IAAA3qB,EAAAK,GAAiBA,EAAA,OAAAA,EAAY,QAAAxR,GAAA,EAAYA,EAAAmR,EAAA5O,OAAWvC,IAAA,CAAK,GAAAkR,GAAAC,EAAAnR,GAAAuJ,EAAA2H,EAAAyqB,KAAqBzqB,KAAA0qB,SAAczqB,GAAA,CAAG,GAAAgB,GAAA,MAAa,IAAAX,EAAA,OAAAH,GAAAH,EAAA3O,OAAA,EAA0B,GAAA8O,EAAKA,IAAA,CAAK,GAAAR,GAAAK,EAAAG,GAAAnC,EAAA2B,EAAA6K,SAAA7J,EAAAhB,EAAA0oB,aAAuD,IAAb1oB,IAAA4tB,SAAavvB,IAAAiD,GAAA5I,EAAAowB,uBAAA,KAAAxoB,EAA2CqtB,IAAAj1B,EAAAsH,EAAAgB,GAAUM,EAAAjD,MAAI,KAAAmC,EAAA,EAAaA,EAAAH,EAAA3O,OAAW8O,IAAA,CAAwD,GAAnDR,EAAAK,EAAAG,GAAOnC,EAAA2B,EAAA6K,SAAa7J,EAAAhB,EAAA0oB,cAAkB1oB,IAAA4tB,SAAavvB,IAAAiD,GAAA5I,EAAAowB,uBAAA,KAAAxoB,EAA2CqtB,IAAAj1B,EAAAsH,EAAAgB,GAAUM,EAAAjD,IAAM,GAAAgkB,GAAA,KAAA/hB,GAAAgiB,GAAAD,MAAAC,GAAA,KAAAhiB,EAC3Y,QAAAkB,IAAAlB,EAAAK,GAAgB,GAAAxR,GAAA0+B,GAAAltB,GAAAN,EAAAC,EAAA,UAA2BnR,GAAA4X,IAAA1G,KAAAytB,GAAAntB,EAAAL,EAAA,MAAAnR,EAAAwe,IAAAtN,IAA+F,QAAA0tB,IAAAztB,GAAeA,EAAA0tB,MAAA1tB,EAAA0tB,OAAA5qB,GAAA7N,QAAA,SAAAoL,GAAwCstB,GAAAlnB,IAAApG,IAAAutB,GAAAvtB,KAAAL,EAAA,MAA2B4tB,GAAAvtB,KAAAL,EAAA,SAC5N,QAAA4tB,IAAA5tB,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAA,EAAAvB,UAAAzF,QAAA,SAAAyF,UAAA,GAAAA,UAAA,KAAAmK,EAAAnS,CAA8H,IAA3D,oBAAAmR,GAAA,IAAAnR,EAAA6wB,WAAA1e,EAAAnS,EAAA2vB,eAA2D,OAAAze,IAAAM,GAAAstB,GAAAlnB,IAAAzG,GAAA,CAA4B,cAAAA,EAAA,MAAuB5H,IAAA,EAAK4I,EAAAjB,EAAI,GAAAG,GAAAqtB,GAAAvsB,GAAAtB,EAAAM,EAAA,MAAAK,EAAA,mBAA4CH,GAAAuG,IAAA/G,KAAAW,IAAAjI,GAAA,GAAAo1B,GAAAxsB,EAAAhB,EAAA5H,EAAAiI,GAAAH,EAAAmN,IAAA3N,IAC3P,QAAA8tB,IAAAxtB,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAAstB,GAAA9mB,IAAAyB,EAAgB,iBAAAjI,EAAA,EAAAA,GAAuB,OAAAA,EAAA4uB,EAAY,MAAM,QAAA5uB,EAAA3J,EAAY,MAAM,SAAA2J,EAAA8uB,GAAar4B,EAAAuJ,EAAA6C,KAAA,KAAAoF,EAAAxR,EAAAmR,GAAqB5H,EAAA,QAASy1B,IAAA,eAAAxtB,GAAA,cAAAA,GAAA,UAAAA,IAAAjI,MAA4D2H,EAAA,SAAA3H,EAAA4H,EAAA+Q,iBAAA1Q,EAAAxR,GAAqCi/B,WAAAC,QAAA31B,IAAqB4H,EAAA+Q,iBAAA1Q,EAAAxR,MAAA,SAAAuJ,EAAA4H,EAAA+Q,iBAAA1Q,EAAAxR,GAAgEk/B,QAAA31B,IAAU4H,EAAA+Q,iBAAA1Q,EAAAxR,MAC3U,QAAA04B,IAAAvnB,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuB,GAAA4I,GAAAjB,CAAQ,WAAAM,IAAA,OAAAA,IAAA,OAAAN,EAAAC,EAAA,OAA0C,CAAE,UAAAD,EAAA,MAAmB,IAAAG,GAAAH,EAAA/I,GAAY,QAAAkJ,GAAA,IAAAA,EAAA,CAAiB,GAAAR,GAAAK,EAAA4gB,UAAA2D,aAAgC,IAAA5kB,IAAAtH,GAAA,IAAAsH,EAAAggB,UAAAhgB,EAAA3J,aAAAqC,EAAA,KAAiD,QAAA8H,EAAA,IAAAA,EAAAH,EAAAiI,OAAwB,OAAA9H,GAAS,CAAE,GAAAnC,GAAAmC,EAAAlJ,GAAY,SAAA+G,GAAA,IAAAA,OAAAmC,EAAAygB,UAAA2D,cAAAvmB,IAAA3F,GAAA,IAAA2F,EAAA2hB,UAAA3hB,EAAAhI,aAAAqC,GAAA,MAA8F8H,KAAA8H,OAAW,KAAK,OAAAtI,GAAS,CAAU,GAARQ,EAAA6jB,GAAArkB,GAAQ,OAAAQ,EAAA,MAA2B,IAARnC,EAAAmC,EAAAlJ,IAAQ,IAAA+G,GAAA,IAAAA,EAAA,CAAiBgC,EAAAiB,EAAAd,CAAM,SAAAF,GAAWN,IAAA3J,YAAgBgK,IAAAiI,OAAWqZ,EAAA,WAAc,GAAAthB,GAAAiB,EAAA5I,EAAAgoB,EAAAvxB,GAAAqR,IACleF,GAAA,CAAG,GAAAN,GAAAimB,GAAA/mB,IAAAoB,EAAgB,aAAAN,EAAA,CAAe,GAAA3B,GAAAwsB,GAAAhqB,EAAAP,CAAa,QAAAA,GAAU,sBAAA4nB,GAAA/4B,GAAA,KAAAmR,EAAqC,2BAAAjC,EAAAiwB,EAAiC,MAAM,eAAAztB,EAAA,QAAyBxC,EAAAkwB,EAAK,MAAM,gBAAA1tB,EAAA,OAAyBxC,EAAAkwB,EAAK,MAAM,kCAAAlwB,EAAAkwB,EAAwC,MAAM,oBAAAp/B,EAAAq/B,OAAA,KAAAluB,EAAqC,8HAAAjC,EAAAowB,EAA0I,MAAM,mHAAApwB,EAChbqwB,EAAG,MAAM,mEAAArwB,EAAAswB,EAA2E,MAAM,KAAAC,IAAA,IAAAC,IAAA,IAAAC,IAAAzwB,EAAA0wB,EAA6B,MAAM,KAAAC,IAAA3wB,EAAA4wB,EAAa,MAAM,cAAA5wB,EAAA6wB,EAAmB,MAAM,aAAA7wB,EAAA8wB,EAAkB,MAAM,kCAAA9wB,EAAA+wB,EAAyC,MAAM,6JAAA/wB,EAAAgxB,GAAyK,GAAA9sB,GAAA,OAAA5B,GAAAwB,GAAAI,GAAA,WAAAjC,EAAAS,EAAAwB,EAAA,OAAAvC,IAAA,eAAAA,CAAmEuC,KAAK,QAAAhC,GAAAY,EAAAd,EAAc,OAC/ec,GAAE,CAAEZ,EAAAY,CAAI,IAAAP,GAAAL,EAAA0gB,SAA8F,IAA5E,IAAA1gB,EAAAjJ,KAAA,OAAAsJ,IAAAL,EAAAK,EAAA,OAAAG,IAAAH,EAAAkhB,EAAA3gB,EAAAJ,GAAA,MAAAH,GAAA2B,EAAAjK,KAAAg3B,GAAAnuB,EAAAP,EAAAL,MAA4E4B,EAAA,KAAWhB,KAAAmH,OAAW,EAAA/F,EAAA7Q,SAAAsO,EAAA,GAAA3B,GAAA2B,EAAAa,EAAA,KAAA1R,EAAAuJ,GAAA8H,EAAAlI,MAA2CwyB,MAAA9qB,EAAA+qB,UAAAxoB,MAAwB,UAAA5B,GAAA,CAAyF,GAAxEX,EAAA,cAAAM,GAAA,gBAAAA,EAAqCjC,EAAA,aAAAiC,GAAA,eAAAA,IAAmCN,GAAA,QAAAW,MAAAE,EAAA1R,EAAAogC,eAAApgC,EAAAqgC,eAAAnL,GAAAxjB,OAAA4uB,OAA6EpxB,GAAA2B,KAASA,EAAAtH,EAAAkoB,SAAAloB,KAAAsH,EAAAtH,EAAAomB,eAAA9e,EAAAmtB,aAAAntB,EAAA0vB,aAAA9O,OAA0EviB,GAAMwC,EAAA1R,EAAAogC,eAAApgC,EAAAwgC,UAAAtxB,EAAAgC,EAAAQ,IAAAwjB,GAAAxjB,GAAA,YAC9bA,IAAAsB,EAAAogB,GAAA1hB,OAAAsB,GAAA,IAAAtB,EAAAvJ,KAAA,IAAAuJ,EAAAvJ,OAAAuJ,EAAA,QAAgDxC,EAAA,KAAAwC,EAAAR,GAAgBhC,IAAAwC,GAAA,CAAyU,GAA/T0B,EAAAksB,GAAK7tB,EAAA,eAAiBG,EAAA,eAAiBI,EAAA,QAAU,eAAAb,GAAA,gBAAAA,IAAAiC,EAAA8sB,GAAAzuB,EAAA,iBAAAG,EAAA,iBAAAI,EAAA,WAA8FgB,EAAA,MAAA9D,EAAA2B,EAAAmrB,GAAA9sB,GAAkBkC,EAAA,MAAAM,EAAAb,EAAAmrB,GAAAtqB,GAAkBb,EAAA,GAAAuC,GAAA3B,EAAAO,EAAA,QAAA9C,EAAAlP,EAAAuJ,GAA2BsH,EAAApF,OAAAuH,EAAWnC,EAAAuvB,cAAAhvB,EAAkBK,EAAA,KAAOyjB,GAAA3rB,KAAA2H,IAAAkC,EAAA,GAAAA,GAAAxB,EAAAI,EAAA,QAAAN,EAAA1R,EAAAuJ,GAAA6J,EAAA3H,OAAA2F,EAAAgC,EAAAgtB,cAAAptB,EAAAvB,EAAA2B,GAAyEJ,EAAAvB,EAAIvC,GAAAwC,EAAAF,EAAA,CAAuB,IAAZ4B,EAAAlE,EAAI0C,EAAAF,EAAIM,EAAA,EAAIZ,EAAAgC,EAAQhC,EAAEA,EAAAqvB,GAAArvB,GAAAY,GAAgB,KAAJZ,EAAA,EAAIK,EAAAG,EAAQH,EAAEA,EAAAgvB,GAAAhvB,GAAAL,GAAY,MAAK,EAAAY,EAAAZ,GAAMgC,EAAAqtB,GAAArtB,GAAApB,GAAa,MAAK,EAAAZ,EAAAY,GAAMJ,EACnf6uB,GAAA7uB,GAAAR,GAAU,MAAKY,KAAI,CAAE,GAAAoB,IAAAxB,GAAA,OAAAA,GAAAwB,IAAAxB,EAAAyhB,UAAA,KAAA7hB,EAA4C4B,GAAAqtB,GAAArtB,GAAQxB,EAAA6uB,GAAA7uB,GAAQwB,EAAA,SAAOA,GAAA,IAAY,QAAAlE,GAAAwxB,GAAArvB,EAAAR,EAAA3B,EAAAkE,MAAyB,OAAA1B,GAAA,OAAAsB,GAAA0tB,GAAArvB,EAAA2B,EAAAtB,EAAA0B,MAAgG,GAAxDvC,EAAAK,EAAA8qB,GAAA9qB,GAAAugB,OAAiBviB,EAAA2B,EAAAsd,UAAAtd,EAAAsd,SAAAxqB,cAAuC,WAAAuL,GAAA,UAAAA,GAAA,SAAA2B,EAAAzD,KAAA,GAAA8E,GAAA+pB,OAAuD,IAAAX,GAAAzqB,GAAA,GAAA8vB,GAAAzuB,EAAAyqB,OAAyB,CAAKzqB,EAAAuqB,EAAK,IAAA9qB,GAAA4qB,QAASrtB,EAAA2B,EAAAsd,WAAA,UAAAjf,EAAAvL,gBAAA,aAAAkN,EAAAzD,MAAA,UAAAyD,EAAAzD,QAAA8E,EAAAwqB,GACvP,QADsVxqB,QAAAf,EAAAD,IAAkBsqB,GAAAnqB,EAAAa,EAAAlS,EAAAuJ,IAAoBoI,KAAAR,EAAAN,EAAAK,GAAY,aAAAC,IAAAQ,EAAAd,EAAAqe,gBACjdvd,EAAA2d,YAAA,WAAAze,EAAAzD,MAAAqiB,EAAA5e,EAAA,SAAAA,EAAApO,QAAwDkP,EAAAT,EAAA8qB,GAAA9qB,GAAAugB,OAAiBtgB,GAAU,eAAAmqB,GAAA3pB,IAAA,SAAAA,EAAA+rB,mBAAAG,GAAAlsB,EAAA4sB,GAAArtB,EAAAotB,GAAA,KAAsE,MAAM,gBAAAA,GAAAC,GAAAV,GAAA,IAA8B,MAAM,iBAAAD,KAAuB,MAAM,+CAAAA,MAAuDD,GAAAtsB,EAAArR,EAAAuJ,EAAU,MAAM,0BAAAq3B,GAAA,KAAmC,2BAAAjD,GAAAtsB,EAAArR,EAAAuJ,GAAsC,GAAAmK,EAAM,IAAAqnB,GAAAvpB,EAAA,CAAS,OAAAL,GAAU,0BAAAkC,GAAA,oBAAmD,MAAA7B,EAAQ,sBAAA6B,EAAA,kBAA2C,MAAA7B,EAC/e,yBAAA6B,EAAA,qBAAiD,MAAA7B,GAAQ6B,EAAA,WAASynB,IAAAT,GAAAlpB,EAAAnR,KAAAqT,EAAA,gCAAAlC,GAAA,MAAAnR,EAAAg5B,UAAA3lB,EAAA,qBAAiGA,KAAA+nB,IAAA,OAAAp7B,EAAAq7B,SAAAP,IAAA,uBAAAznB,EAAA,qBAAAA,GAAAynB,KAAApnB,EAAAilB,OAAAG,GAAAvvB,EAAAsvB,GAAA,SAAAC,OAAAr2B,MAAAq2B,GAAAtI,YAAAsK,QAAAnpB,EAAA8pB,GAAAvqB,EAAAmC,GAAA,EAAA1B,EAAApP,SAAA8Q,EAAA,GAAAwtB,IAAAxtB,EAAAlC,EAAA,KAAAnR,EAAAuJ,GAAA8H,EAAAlI,MAAwMwyB,MAAAtoB,EAAAuoB,UAAAjqB,IAAoB+B,EAAAL,EAAAmS,KAAA9R,KAAA6mB,GAAAv6B,GAAA,OAAA0T,IAAAL,EAAAmS,KAAA9R,OAA8CA,EAAAotB,GAAArG,GAAAtpB,EAAAnR,GAAA66B,GAAA1pB,EAAAnR,MAAAkR,EAAAuqB,GAAAvqB,EAAA,mBAAAA,EAAA3O,SAAAgH,EAAA,GAAAs3B,IAAA,gBAC7a,mBAAA7gC,EAAAuJ,GAAA8H,EAAAlI,MAAgCwyB,MAAApyB,EAAAqyB,UAAA1qB,IAAoB3H,EAAAic,KAAA9R,IAAYooB,GAAAzqB,EAAAG,KAAU,QAAA2uB,IAAAhvB,EAAAK,EAAAxR,GAAmB,OAAO0b,SAAAvK,EAAAstB,SAAAjtB,EAAA+nB,cAAAv5B,GAAuC,QAAAy7B,IAAAtqB,EAAAK,GAAiB,OAAAxR,GAAAwR,EAAA,UAAAN,KAA2B,OAAAC,GAAS,CAAE,GAAA5H,GAAA4H,EAAAgB,EAAA5I,EAAAuoB,SAAsB,KAAAvoB,EAAApB,KAAA,OAAAgK,IAAA5I,EAAA4I,IAAAwgB,EAAAxhB,EAAAnR,GAAA,MAAAmS,GAAAjB,EAAA6vB,QAAAZ,GAAAhvB,EAAAgB,EAAA5I,IAAA4I,EAAAwgB,EAAAxhB,EAAAK,GAAA,MAAAW,GAAAjB,EAAA/H,KAAAg3B,GAAAhvB,EAAAgB,EAAA5I,KAAwG4H,IAAAgI,OAAW,MAAAjI,GAAS,QAAAuvB,IAAAtvB,GAAe,UAAAA,EAAA,WAAwB,GAAAA,KAAAgI,aAAchI,GAAA,IAAAA,EAAAhJ,IAAoB,OAAAgJ,KAAA,KAC7Z,QAAAuvB,IAAAvvB,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuB,OAAA4I,GAAAX,EAAA6nB,WAAAhoB,KAA4B,OAAArR,OAAAkR,GAAgB,CAAE,GAAAL,GAAA7Q,EAAAkP,EAAA2B,EAAAwiB,UAAAxhB,EAAAhB,EAAAihB,SAAoC,WAAA5iB,OAAAgC,EAAA,KAAyB,KAAAL,EAAA1I,KAAA,OAAA0J,IAAAhB,EAAAgB,EAAAtI,GAAA2F,EAAAyjB,EAAA3yB,EAAAmS,GAAA,MAAAjD,GAAAmC,EAAA0vB,QAAAZ,GAAAngC,EAAAkP,EAAA2B,KAAAtH,IAAA2F,EAAAyjB,EAAA3yB,EAAAmS,GAAA,MAAAjD,GAAAmC,EAAAlI,KAAAg3B,GAAAngC,EAAAkP,EAAA2B,MAAiH7Q,IAAAmZ,OAAW,IAAA9H,EAAA9O,QAAA4O,EAAAhI,MAAsBwyB,MAAAnqB,EAAAoqB,UAAAvqB,IAAsB,QAAA2vB,OAAmC,QAAAC,IAAA9vB,EAAAK,GAAiB,OAAAL,GAAU,6DAAAK,EAAA0vB,UAA6E,SACrb,QAAAC,IAAAhwB,EAAAK,GAAiB,mBAAAL,GAAA,WAAAA,GAAA,aAAAA,GAAA,gBAAAK,GAAA9B,UAAA,gBAAA8B,GAAA9B,UAAA,gBAAA8B,GAAA4e,yBAAA,OAAA5e,EAAA4e,yBAAA,MAAA5e,EAAA4e,wBAAAgR,OAAsV,QAAAC,IAAAlwB,GAAe,IAAAA,EAAA0f,SAAA1f,EAAAqf,YAAA,OAAArf,EAAA0f,WAAA1f,IAAA2d,KAAA,MAAA3d,MAAAqf,YAAA,KACtX,QAAA8Q,IAAAnwB,GAAe,KAAK,MAAAA,EAAQA,IAAAlI,YAAA,CAAiB,GAAAuI,GAAAL,EAAA0f,QAAiB,QAAArf,GAAA,IAAAA,EAAA,MAAsB,MAAAL,GAAS,QAAAowB,IAAApwB,GAAeA,IAAAqwB,eAAoB,QAAAhwB,GAAA,EAAYL,GAAE,CAAE,OAAAA,EAAA0f,SAAA,CAAmB,GAAA7wB,GAAAmR,EAAAqU,IAAa,UAAAxlB,GAAA,OAAAA,GAAA,OAAAA,EAAA,CAAgC,OAAAwR,EAAA,MAAAL,EAAkBK,SAAI,OAAAxR,GAAAwR,IAAkBL,IAAAqwB,gBAAoB,YAAqB,QAAAC,IAAAtwB,GAAe,OAAOoc,SAAAmU,GAAA9yB,SAAAuC,EAAAwwB,QAAAxwB,GACvT,QAAA+jB,IAAA/jB,GAAe,GAAAK,GAAAL,EAAAywB,GAAY,IAAApwB,EAAA,MAAAA,EAAc,QAAAxR,GAAAmR,EAAAjK,WAAuBlH,GAAE,CAAE,GAAAwR,EAAAxR,EAAAsgC,KAAAtgC,EAAA4hC,IAAA,CAAiC,GAAd5hC,EAAAwR,EAAA6hB,UAAc,OAAA7hB,EAAAoiB,OAAA,OAAA5zB,GAAA,OAAAA,EAAA4zB,MAAA,IAAAziB,EAAAowB,GAAApwB,GAAwD,OAAAA,GAAS,CAAE,GAAAnR,EAAAmR,EAAAywB,IAAA,MAAA5hC,EAAoBmR,GAAAowB,GAAApwB,GAAQ,MAAAK,GAASL,EAAAnR,EAAIA,EAAAmR,EAAAjK,WAAe,YAAY,QAAA0qB,IAAAzgB,GAA8B,MAAfA,KAAAywB,KAAAzwB,EAAAmvB,KAAenvB,GAAA,IAAAA,EAAAhJ,KAAA,IAAAgJ,EAAAhJ,KAAA,KAAAgJ,EAAAhJ,KAAA,IAAAgJ,EAAAhJ,IAAA,KAAAgJ,EAA6D,QAAA6qB,IAAA7qB,GAAe,OAAAA,EAAAhJ,KAAA,IAAAgJ,EAAAhJ,IAAA,MAAAgJ,GAAA2gB,SAA2C,MAAA7I,OAAA3X,EAAA,KAAoB,QAAAygB,IAAA5gB,GAAe,MAAAA,GAAA0wB,KAAA,KACpa,QAAAnD,IAAAvtB,GAAe,GAAAK,GAAAL,EAAA2wB,GAA0C,OAA9B,UAAAtwB,MAAAL,EAAA2wB,IAAA,GAAAC,MAA8BvwB,EAAyB,QAAAwwB,IAAA7wB,GAAe,OAAOhM,QAAAgM,GAAW,QAAA2B,IAAA3B,GAAc,EAAA8wB,KAAA9wB,EAAAhM,QAAA+8B,GAAAD,IAAAC,GAAAD,IAAA,KAAAA,MAA0C,QAAAlwB,IAAAZ,EAAAK,GAAgBywB,KAAKC,GAAAD,IAAA9wB,EAAAhM,QAAiBgM,EAAAhM,QAAAqM,EACjN,QAAA2wB,IAAAhxB,EAAAK,GAAiB,GAAAxR,GAAAmR,EAAA/D,KAAAg1B,YAA0B,KAAApiC,EAAA,MAAAqiC,GAAgB,IAAAnxB,GAAAC,EAAA2gB,SAAkB,IAAA5gB,KAAAoxB,8CAAA9wB,EAAA,MAAAN,GAAAqxB,yCAA2G,IAAQpwB,GAAR5I,IAAW,KAAA4I,IAAAnS,GAAAuJ,EAAA4I,GAAAX,EAAAW,EAAsI,OAAjHjB,KAAAC,IAAA2gB,UAAA3gB,EAAAmxB,4CAAA9wB,EAAAL,EAAAoxB,0CAAAh5B,GAAiHA,EAAS,QAAAi5B,IAAArxB,GAAqC,MAAtBA,KAAAsxB,kBAAsB,OAAAtxB,GAAA,SAAAA,EAA4B,QAAAuxB,MAAc5vB,GAAAR,IAAKQ,GAAA7B,IAAK,QAAA0xB,IAAAxxB,EAAAK,EAAAxR,GAAmB,GAAAiR,GAAA9L,UAAAk9B,GAAA,KAAApZ,OAAA3X,EAAA,KAAsCS,IAAAd,GAAAO,GAAOO,GAAAO,GAAAtS,GAC3e,QAAA4iC,IAAAzxB,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAC,EAAA2gB,SAAwC,IAAtB3gB,EAAAK,EAAAixB,kBAAsB,kBAAAvxB,GAAA2xB,gBAAA,MAAA7iC,EAAkDkR,KAAA2xB,iBAAsB,QAAAt5B,KAAA2H,GAAA,KAAA3H,IAAA4H,IAAA,KAAA8X,OAAA3X,EAAA,IAAA0b,EAAAxb,IAAA,UAAAjI,GAAmE,OAAAxJ,OAAWC,EAAAkR,GAAM,QAAA4xB,IAAA3xB,GAAqH,MAAtGA,QAAA2gB,YAAA3gB,EAAA4xB,2CAAAV,GAAmEW,GAAA/xB,GAAA9L,QAAa4M,GAAAd,GAAAE,GAAOY,GAAAO,MAAAnN,YAAwB,QAAA89B,IAAA9xB,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAC,EAAA2gB,SAAkB,KAAA5gB,EAAA,KAAA+X,OAAA3X,EAAA,KAA0BtR,IAAAmR,EAAAyxB,GAAAzxB,EAAAK,EAAAwxB,IAAA9xB,EAAA6xB,0CAAA5xB,EAAA2B,GAAAR,IAAAQ,GAAA7B,IAAAc,GAAAd,GAAAE,IAAA2B,GAAAR,IAAqFP,GAAAO,GAAAtS,GAEze,QAAAkjC,MAAc,OAAAC,MAAa,IAAAC,IAAA,SAAkB,KAAAC,IAAA,SAAkB,KAAAC,IAAA,SAAkB,KAAAC,IAAA,SAAkB,KAAAC,IAAA,SAAkB,cAAAva,OAAA3X,EAAA,OAA8B,QAAAmyB,IAAAtyB,GAAe,OAAAA,GAAU,cAAAiyB,GAAkB,eAAAC,GAAkB,eAAAC,GAAkB,eAAAC,GAAkB,eAAAC,GAAkB,cAAAva,OAAA3X,EAAA,OAA8B,QAAAoyB,IAAAvyB,EAAAK,GAAyB,MAARL,GAAAsyB,GAAAtyB,GAAQwyB,GAAAxyB,EAAAK,GAAe,QAAAoyB,IAAAzyB,EAAAK,EAAAxR,GAA2B,MAARmR,GAAAsyB,GAAAtyB,GAAQ0yB,GAAA1yB,EAAAK,EAAAxR,GAAiB,QAAA8jC,MAAc,UAAAC,GAAA,CAAc,GAAA5yB,GAAA4yB,EAASA,IAAA,KAAQC,GAAA7yB,GAAM8yB,KAC3a,QAAAA,MAAc,IAAAC,IAAA,OAAAC,GAAA,CAAmBD,KAAM,IAAA/yB,GAAA,CAAQ,KAAI,GAAAK,GAAA2yB,EAAST,IAAA,cAAiB,KAAKvyB,EAAAK,EAAAjP,OAAW4O,IAAA,CAAK,GAAAnR,GAAAwR,EAAAL,EAAW,GAAAnR,eAAW,OAAAA,MAAmBmkC,GAAA,KAAQ,MAAAnkC,GAAS,aAAAmkC,WAAAhb,MAAAhY,EAAA,IAAA0yB,GAAAT,GAAAU,IAAA9jC,EAAiD,QAAQkkC,QAA0C,QAAAE,IAAAjzB,EAAAK,GAAiB,GAAAL,KAAAuT,aAAA,CAAsBlT,EAAAzR,MAAMyR,GAAIL,IAAAuT,YAAiB,QAAA1kB,KAAAmR,GAAA,SAAAK,EAAAxR,KAAAwR,EAAAxR,GAAAmR,EAAAnR,GAA0C,OAAAwR,GAAS,MAAAA,GAAiD,QAAA6yB,MAAcC,GAAAC,GAAAC,GAAA,KACnb,QAAAC,IAAAtzB,GAAe,GAAAK,GAAAkzB,GAAAv/B,OAAiB2N,IAAA4xB,IAAMvzB,EAAA/D,KAAAsgB,SAAAiX,cAAAnzB,EAAgC,QAAAozB,IAAAzzB,EAAAK,GAAiB,KAAK,OAAAL,GAAS,CAAE,GAAAnR,GAAAmR,EAAAkiB,SAAkB,KAAAliB,EAAA0zB,WAAArzB,OAAA,WAAAxR,MAAA6kC,WAAArzB,OAAA,KAAgExR,GAAA6kC,YAAArzB,MAAqBL,GAAA0zB,YAAArzB,EAAA,OAAAxR,MAAA6kC,YAAArzB,EAAiDL,KAAAgI,QAAY,QAAA2rB,IAAA3zB,EAAAK,GAAiBgzB,GAAArzB,EAAKmzB,GAAAC,GAAA,KAAWpzB,IAAA4zB,aAAiB,OAAA5zB,GAAA,OAAAA,EAAA6zB,eAAA,KAAA7zB,EAAA8zB,MAAAzzB,KAAA0zB,OAAA/zB,EAAA6zB,aAAA,MAC7T,QAAAG,IAAAh0B,EAAAK,GAAiB,GAAA8yB,KAAAnzB,QAAAK,GAAA,IAAAA,EAA0H,GAAhG,gBAAAA,IAAA,aAAAA,IAAA8yB,GAAAnzB,EAAAK,EAAA,YAAyDA,GAAG9L,QAAAyL,EAAAi0B,aAAA5zB,EAAA1P,KAAA,MAAoC,OAAAyiC,GAAA,CAAc,UAAAC,GAAA,KAAAvb,OAAA3X,EAAA,KAAiCizB,IAAA/yB,EAAKgzB,GAAAO;AAAiBE,MAAA,EAAAD,aAAAxzB,EAAA6zB,WAAA,UAAwCd,OAAAziC,KAAA0P,CAAkB,OAAAL,GAAAwzB,cAAiC,QAAAW,IAAAn0B,GAAeA,EAAAo0B,aAAeC,UAAAr0B,EAAAqiB,cAAAiS,gBAAA,KAAAC,eAAA,KAAAC,QAA2EC,QAAA,MAAaC,QAAA,MACja,QAAAC,IAAA30B,EAAAK,GAAiBL,IAAAo0B,YAAgB/zB,EAAA+zB,cAAAp0B,IAAAK,EAAA+zB,aAAmCC,UAAAr0B,EAAAq0B,UAAAC,gBAAAt0B,EAAAs0B,gBAAAC,eAAAv0B,EAAAu0B,eAAAC,OAAAx0B,EAAAw0B,OAAAE,QAAA10B,EAAA00B,UAA4H,QAAAE,IAAA50B,EAAAK,GAAiB,OAAOw0B,UAAA70B,EAAA80B,KAAAz0B,EAAArJ,IAAA,EAAA+9B,QAAA,KAAAC,SAAA,KAAArkC,KAAA,MAA+D,QAAAskC,IAAAj1B,EAAAK,GAAiC,GAAhBL,IAAAo0B,YAAgB,OAAAp0B,EAAA,CAAaA,IAAAw0B,MAAW,IAAA3lC,GAAAmR,EAAAy0B,OAAgB,QAAA5lC,EAAAwR,EAAA1P,KAAA0P,KAAA1P,KAAA9B,EAAA8B,KAAA9B,EAAA8B,KAAA0P,GAA2CL,EAAAy0B,QAAAp0B,GAC3Y,QAAA60B,IAAAl1B,EAAAK,GAAiB,GAAAxR,GAAAmR,EAAAo0B,YAAAr0B,EAAAC,EAAAkiB,SAAkC,WAAAniB,QAAAq0B,YAAAvlC,IAAAkR,GAAA,CAAsC,GAAA3H,GAAA,KAAA4I,EAAA,IAAsC,IAApBnS,IAAAylC,gBAAoB,OAAAzlC,EAAA,CAAa,GAAG,GAAAqR,IAAO20B,UAAAhmC,EAAAgmC,UAAAC,KAAAjmC,EAAAimC,KAAA99B,IAAAnI,EAAAmI,IAAA+9B,QAAAlmC,EAAAkmC,QAAAC,SAAAnmC,EAAAmmC,SAAArkC,KAAA,KAA6F,QAAAqQ,EAAA5I,EAAA4I,EAAAd,EAAAc,IAAArQ,KAAAuP,EAA0BrR,IAAA8B,WAAS,OAAA9B,EAAgB,QAAAmS,EAAA5I,EAAA4I,EAAAX,EAAAW,IAAArQ,KAAA0P,MAA0BjI,GAAA4I,EAAAX,CAA0H,OAA/GxR,IAAGwlC,UAAAt0B,EAAAs0B,UAAAC,gBAAAl8B,EAAAm8B,eAAAvzB,EAAAwzB,OAAAz0B,EAAAy0B,OAAAE,QAAA30B,EAAA20B,cAA4F10B,EAAAo0B,YAAAvlC,GAAuBmR,EAAAnR,EAAA0lC,eAAmB,OAAAv0B,EAAAnR,EAAAylC,gBAAAj0B,EAAAL,EAAArP,KACpd0P,EAAExR,EAAA0lC,eAAAl0B,EACF,QAAA80B,IAAAn1B,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAA4H,EAAAo0B,WAAoBgB,MAAM,IAAAp0B,GAAA5I,EAAAk8B,gBAAAp0B,EAAA9H,EAAAm8B,eAAA70B,EAAAtH,EAAAo8B,OAAAC,OAA8D,WAAA/0B,EAAA,CAAatH,EAAAo8B,OAAAC,QAAA,IAAsB,IAAA12B,GAAA2B,EAAAgB,EAAA3C,EAAApN,IAAiBoN,GAAApN,KAAA,KAAY,OAAAuP,EAAAc,EAAAN,EAAAR,EAAAvP,KAAA+P,EAAsBR,EAAAnC,CAAI,IAAAnE,GAAAoG,EAAAkiB,SAAkB,WAAAtoB,EAAA,CAAaA,IAAAw6B,WAAgB,IAAA3yB,GAAA7H,EAAA26B,cAAuB9yB,KAAAvB,IAAA,OAAAuB,EAAA7H,EAAA06B,gBAAA5zB,EAAAe,EAAA9Q,KAAA+P,EAAA9G,EAAA26B,eAAAx2B,IAAmE,UAAAiD,EAAA,CAA0C,IAA7BS,EAAArJ,EAAAi8B,UAAcn0B,EAAA,EAAItG,EAAA8G,EAAA3C,EAAA,OAAW,CAAG2B,EAAAsB,EAAA8zB,IAAS,IAAAhmC,GAAAkS,EAAA6zB,SAAkB,KAAA90B,EAAAL,OAAA,CAAc,OAAA9F,QAAAjJ,MAAqBkkC,UAAA/lC,EAAAgmC,KAAA,EAAA99B,IAAAgK,EAAAhK,IAAA+9B,QAAA/zB,EAAA+zB,QAAAC,SAAAh0B,EAAAg0B,SAC3brkC,KAAA,MAAYqP,GAAA,CAAG,GAAAI,GAAAJ,EAAAO,EAAAS,CAAoB,QAARtB,EAAAW,EAAIvR,EAAAD,EAAI0R,EAAAvJ,KAAc,OAAmB,GAAnBoJ,EAAAG,EAAAw0B,QAAmB,kBAAA30B,GAAA,CAA0BqB,EAAArB,EAAAzR,KAAAG,EAAA2S,EAAA/B,EAAgB,MAAAM,GAAQyB,EAAArB,CAAI,MAAAJ,EAAQ,QAAAI,EAAA+hB,MAAA/hB,EAAA+hB,YAAA,EAAgC,QAA2D,GAA3D/hB,EAAAG,EAAAw0B,QAAmBr1B,EAAA,kBAAAU,KAAAzR,KAAAG,EAAA2S,EAAA/B,GAAAU,EAAwC,OAAAV,GAAA,SAAAA,EAAA,KAAAM,EAAgCyB,GAAA7S,MAAM6S,EAAA/B,EAAM,MAAAM,EAAQ,QAAAo1B,OAAc,OAAAp0B,EAAAg0B,WAAAh1B,EAAAmiB,OAAA,GAAAziB,EAAAtH,EAAAs8B,QAAA,OAAAh1B,EAAAtH,EAAAs8B,SAAA1zB,GAAAtB,EAAA1H,KAAAgJ,QAA8ElS,IAAQ+lC,UAAA/lC,EAAAgmC,KAAAp1B,EAAA1I,IAAAgK,EAAAhK,IAAA+9B,QAAA/zB,EAAA+zB,QAAAC,SAAAh0B,EAAAg0B,SAAArkC,KAAA,MAA6E,OAAAiJ,GAAA8G,EAAA9G,EAAA9K,EAAAiP,EAAA0D,GAAA7H,IAAAjJ,KAAA7B,EAAAoR,GAAAR,CAA+C,IAATsB,IAAArQ,KAAS,OACjfqQ,EAAA,IAAAtB,EAAAtH,EAAAo8B,OAAAC,QAAA,OAAA/0B,EAAA,KAAuCsB,GAAAtB,EAAA/O,KAAA+O,EAAA/O,KAAA,KAAAyH,EAAAm8B,eAAA70B,EAAAtH,EAAAo8B,OAAAC,QAAA,MAA4E,OAAA76B,IAAAmE,EAAA0D,GAAgBrJ,EAAAi8B,UAAAt2B,EAAc3F,EAAAk8B,gBAAA5zB,EAAoBtI,EAAAm8B,eAAA36B,EAAmBy7B,IAAAn1B,EAAMF,EAAA8zB,MAAA5zB,EAAUF,EAAAqiB,cAAA5gB,GAAmB,QAAA6zB,IAAAt1B,EAAAK,EAAAxR,GAA8C,GAA3BmR,EAAAK,EAAAq0B,QAAYr0B,EAAAq0B,QAAA,KAAe,OAAA10B,EAAA,IAAAK,EAAA,EAAoBA,EAAAL,EAAA5O,OAAWiP,IAAA,CAAK,GAAAN,GAAAC,EAAAK,GAAAjI,EAAA2H,EAAAi1B,QAAwB,WAAA58B,EAAA,CAAiC,GAApB2H,EAAAi1B,SAAA,KAAgBj1B,EAAAlR,EAAI,kBAAAuJ,GAAA,KAAA0f,OAAA3X,EAAA,IAAA/H,GAA+CA,GAAAzJ,KAAAoR,KACrZ,QAAAw1B,IAAAv1B,EAAAK,EAAAxR,EAAAkR,GAAqBM,EAAAL,EAAAqiB,cAAkBxzB,IAAAkR,EAAAM,GAASxR,EAAA,OAAAA,GAAA,SAAAA,EAAAwR,EAAAzR,MAA6ByR,EAAAxR,GAAMmR,EAAAqiB,cAAAxzB,EAAkB,IAAAmR,EAAA8zB,QAAA9zB,EAAAo0B,YAAAC,UAAAxlC,GAE9E,QAAA2mC,IAAAx1B,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,EAAAd,GAAyC,MAAdF,KAAA2gB,UAAc,kBAAA3gB,GAAAy1B,sBAAAz1B,EAAAy1B,sBAAA11B,EAAAiB,EAAAd,KAAAG,EAAA5M,WAAA4M,EAAA5M,UAAAiiC,sBAAAhK,GAAA78B,EAAAkR,IAAA2rB,GAAAtzB,EAAA4I,IAChE,QAAA20B,IAAA31B,EAAAK,EAAAxR,GAAmB,GAAAkR,MAAA3H,EAAA84B,GAAclwB,EAAAX,EAAAu1B,WAAmX,OAA/V,gBAAA50B,IAAA,OAAAA,IAAAgzB,GAAAhzB,IAAA5I,EAAAi5B,GAAAhxB,GAAAwxB,GAAA/xB,GAAA9L,QAAA+L,EAAAM,EAAA4wB,aAAAjwB,GAAAjB,EAAA,OAAAA,GAAA,SAAAA,GAAAixB,GAAAhxB,EAAA5H,GAAA84B,IAAoH7wB,EAAA,GAAAA,GAAAxR,EAAAmS,GAAahB,EAAAqiB,cAAA,OAAAhiB,EAAAw1B,OAAA,SAAAx1B,EAAAw1B,MAAAx1B,EAAAw1B,MAAA,KAA8Dx1B,EAAAvD,QAAAg5B,GAAa91B,EAAA2gB,UAAAtgB,EAAcA,EAAA01B,gBAAA/1B,EAAoBD,IAAAC,IAAA2gB,UAAA3gB,EAAAmxB,4CAAA/4B,EAAA4H,EAAAoxB,0CAAApwB,GAAiHX,EACpZ,QAAA21B,IAAAh2B,EAAAK,EAAAxR,EAAAkR,GAAqBC,EAAAK,EAAAw1B,MAAU,kBAAAx1B,GAAA41B,2BAAA51B,EAAA41B,0BAAApnC,EAAAkR,GAAkF,kBAAAM,GAAA61B,kCAAA71B,EAAA61B,iCAAArnC,EAAAkR,GAAgGM,EAAAw1B,QAAA71B,GAAA81B,GAAAK,oBAAA91B,IAAAw1B,MAAA,MACjN,QAAAO,IAAAp2B,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAA4H,EAAA2gB,SAAkBvoB,GAAA8D,MAAArN,EAAUuJ,EAAAy9B,MAAA71B,EAAAqiB,cAAwBjqB,EAAAi+B,KAAAC,GAAUnC,GAAAn0B,EAAM,IAAAgB,GAAAX,EAAAu1B,WAAoB,iBAAA50B,IAAA,OAAAA,EAAA5I,EAAA7D,QAAAy/B,GAAAhzB,MAAAqwB,GAAAhxB,GAAAwxB,GAAA/xB,GAAA9L,QAAAoE,EAAA7D,QAAAy8B,GAAAhxB,EAAAgB,IAAuFm0B,GAAAn1B,EAAAnR,EAAAuJ,EAAA2H,GAAY3H,EAAAy9B,MAAA71B,EAAAqiB,cAAwBrhB,EAAAX,EAAAk2B,yBAA6B,kBAAAv1B,KAAAu0B,GAAAv1B,EAAAK,EAAAW,EAAAnS,GAAAuJ,EAAAy9B,MAAA71B,EAAAqiB,eAA6D,kBAAAhiB,GAAAk2B,0BAAA,kBAAAn+B,GAAAo+B,yBAAA,kBAAAp+B,GAAAq+B,2BAAA,kBAAAr+B,GAAAs+B,qBAClUr2B,EAAAjI,EAAAy9B,MAAA,kBAAAz9B,GAAAs+B,oBAAAt+B,EAAAs+B,qBAAA,kBAAAt+B,GAAAq+B,2BAAAr+B,EAAAq+B,4BAAAp2B,IAAAjI,EAAAy9B,OAAAC,GAAAK,oBAAA/9B,IAAAy9B,MAAA,MAAAV,GAAAn1B,EAAAnR,EAAAuJ,EAAA2H,GAAA3H,EAAAy9B,MAAA71B,EAAAqiB,eAAoP,kBAAAjqB,GAAA2E,oBAAAiD,EAAAmiB,OAAA,GACpP,QAAAwU,IAAA32B,EAAAK,EAAAxR,GAA2B,GAARmR,EAAAnR,EAAAsQ,IAAQ,OAAAa,GAAA,kBAAAA,IAAA,gBAAAA,GAAA,CAAyD,GAAAnR,EAAA+nC,OAAA,CAAwB,GAAX/nC,IAAA+nC,OAAW,CAAM,OAAA/nC,EAAAmI,IAAA,KAAA8gB,OAAA3X,EAAA,KAAiC,IAAAJ,GAAAlR,EAAA8xB,UAAkB,IAAA5gB,EAAA,KAAA+X,OAAA3X,EAAA,IAAAH,GAA4B,IAAA5H,GAAA,GAAA4H,CAAW,eAAAK,GAAA,OAAAA,EAAAlB,KAAA,kBAAAkB,GAAAlB,KAAAkB,EAAAlB,IAAA03B,aAAAz+B,EAAAiI,EAAAlB,KAAwFkB,EAAA,SAAAL,GAAc,GAAAK,GAAAN,EAAAs2B,IAAah2B,KAAAi2B,KAAAj2B,EAAAN,EAAAs2B,SAAsB,OAAAr2B,QAAAK,GAAAjI,GAAAiI,EAAAjI,GAAA4H,GAA6BK,EAAAw2B,WAAAz+B,EAAeiI,GAAS,mBAAAL,GAAA,KAAA8X,OAAA3X,EAAA,KAA2C,KAAAtR,EAAA+nC,OAAA,KAAA9e,OAAA3X,EAAA,IAAAH,IAAoC,MAAAA,GACzd,QAAA82B,IAAA92B,EAAAK,GAAiB,gBAAAL,EAAA/D,KAAA,KAAA6b,OAAA3X,EAAA,uBAAAvO,OAAA6B,UAAAgK,SAAA9O,KAAA0R,GAAA,qBAAiHzO,OAAAoI,KAAAqG,GAAAxG,KAAA,UAA8BwG,IAChK,QAAA02B,IAAA/2B,GAAe,QAAAK,KAAAxR,GAAgB,GAAAmR,EAAA,CAAM,GAAAD,GAAAM,EAAA22B,UAAmB,QAAAj3B,KAAAk3B,WAAApoC,EAAAwR,EAAA22B,WAAAnoC,GAAAwR,EAAA62B,YAAA72B,EAAA22B,WAAAnoC,EAAsEA,EAAAooC,WAAA,KAAkBpoC,EAAAszB,MAAA,GAAW,QAAAtzB,KAAAkR,GAAgB,IAAAC,EAAA,WAAkB,MAAK,OAAAD,GAASM,EAAAxR,EAAAkR,OAAA2iB,OAAoB,aAAY,QAAA3iB,GAAAC,EAAAK,GAAgB,IAAAL,EAAA,GAAAm3B,KAAc,OAAA92B,GAAS,OAAAA,EAAA5N,IAAAuN,EAAAwD,IAAAnD,EAAA5N,IAAA4N,GAAAL,EAAAwD,IAAAnD,EAAA6I,MAAA7I,OAAAqiB,OAA0D,OAAA1iB,GAAS,QAAA5H,GAAA4H,EAAAK,GAAmD,MAAnCL,GAAAo3B,GAAAp3B,EAAAK,GAAUL,EAAAkJ,MAAA,EAAUlJ,EAAA0iB,QAAA,KAAe1iB,EAAS,QAAAgB,GAAAX,EAAAxR,EAAAkR,GAA4B,MAAVM,GAAA6I,MAAAnJ,EAAUC,GAAeD,EAAAM,EAAA6hB,UAAc,OAAAniB,OAAAmJ,MAAAnJ,EAAAlR,GAAAwR,EAAA8hB,MAAA,EAC1ctzB,GAAAkR,IAAKM,EAAA8hB,MAAA,EAAUtzB,IAD8ZA,EACrZ,QAAAqR,GAAAG,GAAiD,MAAnCL,IAAA,OAAAK,EAAA6hB,YAAA7hB,EAAA8hB,MAAA,GAAmC9hB,EAAS,QAAAX,GAAAM,EAAAK,EAAAxR,EAAAkR,GAAoB,cAAAM,GAAA,IAAAA,EAAArJ,KAAAqJ,EAAAg3B,GAAAxoC,EAAAmR,EAAAs3B,KAAAv3B,GAAAM,EAAA2H,OAAAhI,EAAAK,IAA4DA,EAAAjI,EAAAiI,EAAAxR,GAASwR,EAAA2H,OAAAhI,EAAWK,GAAS,QAAAtC,GAAAiC,EAAAK,EAAAxR,EAAAkR,GAAoB,cAAAM,KAAAuZ,cAAA/qB,EAAAoN,MAAA8D,EAAA3H,EAAAiI,EAAAxR,EAAAqN,OAAA6D,EAAAZ,IAAAw3B,GAAA32B,EAAAK,EAAAxR,GAAAkR,EAAAiI,OAAAhI,EAAAD,IAAuFA,EAAAw3B,GAAA1oC,EAAAoN,KAAApN,EAAA4D,IAAA5D,EAAAqN,MAAA,KAAA8D,EAAAs3B,KAAAv3B,GAAyCA,EAAAZ,IAAAw3B,GAAA32B,EAAAK,EAAAxR,GAAgBkR,EAAAiI,OAAAhI,EAAWD,GAAS,QAAAW,GAAAV,EAAAK,EAAAxR,EAAAkR,GAAoB,cAAAM,GAAA,IAAAA,EAAArJ,KAAAqJ,EAAAsgB,UAAA2D,gBAAAz1B,EAAAy1B,eAAAjkB,EAAAsgB,UAAA6W,iBAAA3oC,EAAA2oC,gBAAAn3B,EAC3Yo3B,GAAA5oC,EAAAmR,EAAAs3B,KAAAv3B,GAAAM,EAAA2H,OAAAhI,EAAAK,IAA4BA,EAAAjI,EAAAiI,EAAAxR,EAAA0P,cAAsB8B,EAAA2H,OAAAhI,EAAWK,GAAS,QAAAzG,GAAAoG,EAAAK,EAAAxR,EAAAkR,EAAAiB,GAAsB,cAAAX,GAAA,IAAAA,EAAArJ,KAAAqJ,EAAAq3B,GAAA7oC,EAAAmR,EAAAs3B,KAAAv3B,EAAAiB,GAAAX,EAAA2H,OAAAhI,EAAAK,IAA8DA,EAAAjI,EAAAiI,EAAAxR,GAASwR,EAAA2H,OAAAhI,EAAWK,GAAS,QAAAoB,GAAAzB,EAAAK,EAAAxR,GAAkB,mBAAAwR,IAAA,gBAAAA,GAAA,MAAAA,GAAAg3B,GAAA,GAAAh3B,EAAAL,EAAAs3B,KAAAzoC,GAAAwR,EAAA2H,OAAAhI,EAAAK,CAAoF,oBAAAA,IAAA,OAAAA,EAAA,CAAkC,OAAAA,EAAA+b,UAAmB,IAAAub,IAAA,MAAA9oC,GAAA0oC,GAAAl3B,EAAApE,KAAAoE,EAAA5N,IAAA4N,EAAAnE,MAAA,KAAA8D,EAAAs3B,KAAAzoC,KAAAsQ,IAAAw3B,GAAA32B,EAAA,KAAAK,GAAAxR,EAAAmZ,OAAAhI,EAAAnR,CAAwF,KAAAktB,IAAA,MAAA1b,GAAAo3B,GAAAp3B,EAAAL,EAAAs3B,KAAAzoC,GAAAwR,EAAA2H,OAAAhI,EAAAK,EAA6C,GAAAu3B,GAAAv3B,IAAA2a,EAAA3a,GAAA,MAAAA,GAAAq3B,GAAAr3B,EACvdL,EAAAs3B,KAAAzoC,EAAA,MAAAwR,EAAA2H,OAAAhI,EAAAK,CAA4By2B,IAAA92B,EAAAK,GAAQ,YAAY,QAAAvR,GAAAkR,EAAAK,EAAAxR,EAAAkR,GAAoB,GAAA3H,GAAA,OAAAiI,IAAA5N,IAAA,IAA0B,oBAAA5D,IAAA,gBAAAA,GAAA,cAAAuJ,EAAA,KAAAsH,EAAAM,EAAAK,EAAA,GAAAxR,EAAAkR,EAA+E,oBAAAlR,IAAA,OAAAA,EAAA,CAAkC,OAAAA,EAAAutB,UAAmB,IAAAub,IAAA,MAAA9oC,GAAA4D,MAAA2F,EAAAvJ,EAAAoN,OAAA6f,GAAAliB,EAAAoG,EAAAK,EAAAxR,EAAAqN,MAAAqC,SAAAwB,EAAA3H,GAAA2F,EAAAiC,EAAAK,EAAAxR,EAAAkR,GAAA,IAAiF,KAAAgc,IAAA,MAAAltB,GAAA4D,MAAA2F,EAAAsI,EAAAV,EAAAK,EAAAxR,EAAAkR,GAAA,KAAyC,GAAA63B,GAAA/oC,IAAAmsB,EAAAnsB,GAAA,cAAAuJ,EAAA,KAAAwB,EAAAoG,EAAAK,EAAAxR,EAAAkR,EAAA,KAAqD+2B,IAAA92B,EAAAnR,GAAQ,YAAY,QAAAuR,GAAAJ,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAsB,mBAAA2H,IAAA,gBAAAA,GAAA,MAAAC,KAAApB,IAAA/P,IAC3b,KAAA6Q,EAAAW,EAAAL,EAAA,GAAAD,EAAA3H,EAAmB,oBAAA2H,IAAA,OAAAA,EAAA,CAAkC,OAAAA,EAAAqc,UAAmB,IAAAub,IAAA,MAAA33B,KAAApB,IAAA,OAAAmB,EAAAtN,IAAA5D,EAAAkR,EAAAtN,MAAA,KAAAsN,EAAA9D,OAAA6f,GAAAliB,EAAAyG,EAAAL,EAAAD,EAAA7D,MAAAqC,SAAAnG,EAAA2H,EAAAtN,KAAAsL,EAAAsC,EAAAL,EAAAD,EAAA3H,EAA0G,KAAA2jB,IAAA,MAAA/b,KAAApB,IAAA,OAAAmB,EAAAtN,IAAA5D,EAAAkR,EAAAtN,MAAA,KAAAiO,EAAAL,EAAAL,EAAAD,EAAA3H,GAA8D,GAAAw/B,GAAA73B,IAAAib,EAAAjb,GAAA,MAAAC,KAAApB,IAAA/P,IAAA,KAAA+K,EAAAyG,EAAAL,EAAAD,EAAA3H,EAAA,KAAwD0+B,IAAAz2B,EAAAN,GAAQ,YAAY,QAAAQ,GAAAnI,EAAA8H,EAAAR,EAAA3B,GAAoB,OAAA2C,GAAA,KAAAG,EAAA,KAAAJ,EAAAP,EAAA2B,EAAA3B,EAAA,EAAAD,EAAA,KAAuC,OAAAQ,GAAAoB,EAAAnC,EAAAtO,OAAqByQ,IAAA,CAAKpB,EAAAyI,MAAArH,GAAA5B,EAAAQ,IAAA,MAAAR,EAAAQ,EAAAiiB,OAAmC,IAAA9oB,GAAA9K,EAAAsJ,EAAAqI,EAAAf,EAAAmC,GAAA9D,EAAoB,WAAAnE,EAAA,CAAa,OAAA6G,MAAAR,EAAgB,OAAMD,GAAAS,GAAA,OAC3e7G,EAAAsoB,WAAA7hB,EAAAjI,EAAAqI,GAAoBP,EAAAc,EAAApH,EAAAsG,EAAA2B,GAAW,OAAAhB,EAAAH,EAAA9G,EAAAiH,EAAA6hB,QAAA9oB,EAAyBiH,EAAAjH,EAAI6G,EAAAR,EAAI,GAAA4B,IAAAnC,EAAAtO,OAAA,MAAAvC,GAAAuJ,EAAAqI,GAAAC,CAAgC,WAAAD,EAAA,CAAa,KAAKoB,EAAAnC,EAAAtO,OAAWyQ,IAAApB,EAAAgB,EAAArJ,EAAAsH,EAAAmC,GAAA9D,GAAA,OAAA0C,IAAAP,EAAAc,EAAAP,EAAAP,EAAA2B,GAAA,OAAAhB,EAAAH,EAAAD,EAAAI,EAAA6hB,QAAAjiB,EAAAI,EAAAJ,EAAsE,OAAAC,GAAS,IAAAD,EAAAV,EAAA3H,EAAAqI,GAAaoB,EAAAnC,EAAAtO,OAAWyQ,IAAA5B,EAAAG,EAAAK,EAAArI,EAAAyJ,EAAAnC,EAAAmC,GAAA9D,GAAA,OAAAkC,IAAAD,GAAA,OAAAC,EAAAiiB,WAAAzhB,EAAA+iB,OAAA,OAAAvjB,EAAAxN,IAAAoP,EAAA5B,EAAAxN,KAAAyN,EAAAc,EAAAf,EAAAC,EAAA2B,GAAA,OAAAhB,EAAAH,EAAAT,EAAAY,EAAA6hB,QAAAziB,EAAAY,EAAAZ,EAAyK,OAAzCD,IAAAS,EAAAxL,QAAA,SAAA+K,GAAyB,MAAAK,GAAAjI,EAAA4H,KAAgBU,EAAS,QAAAuB,GAAA7J,EAAA8H,EAAAR,EAAA3B,GAAoB,GAAA2C,GAAAsa,EAAAtb,EAAY,sBAAAgB,GAAA,KAAAoX,OAAA3X,EAAA,KAAyD,IAAZT,EAAAgB,EAAA/R,KAAA+Q,GAAY,MAC/eA,EAAA,KAAAoY,OAAA3X,EAAA,KAAsB,QAAAU,GAAAH,EAAA,KAAAD,EAAAP,EAAA2B,EAAA3B,EAAA,EAAAD,EAAA,KAAArG,EAAA8F,EAAA/O,OAA6C,OAAA8P,IAAA7G,EAAAmO,KAAkBlG,IAAAjI,EAAA8F,EAAA/O,OAAA,CAAgB8P,EAAAyI,MAAArH,GAAA5B,EAAAQ,IAAA,MAAAR,EAAAQ,EAAAiiB,OAAmC,IAAAzgB,GAAAnT,EAAAsJ,EAAAqI,EAAA7G,EAAAtI,MAAAyM,EAAuB,WAAAkE,EAAA,CAAa,OAAAxB,MAAAR,EAAgB,OAAMD,GAAAS,GAAA,OAAAwB,EAAAigB,WAAA7hB,EAAAjI,EAAAqI,GAAiCP,EAAAc,EAAAiB,EAAA/B,EAAA2B,GAAW,OAAAhB,EAAAH,EAAAuB,EAAApB,EAAA6hB,QAAAzgB,EAAyBpB,EAAAoB,EAAIxB,EAAAR,EAAI,GAAArG,EAAAmO,KAAA,MAAAlZ,GAAAuJ,EAAAqI,GAAAC,CAA0B,WAAAD,EAAA,CAAa,MAAK7G,EAAAmO,KAAQlG,IAAAjI,EAAA8F,EAAA/O,OAAAiJ,EAAA6H,EAAArJ,EAAAwB,EAAAtI,MAAAyM,GAAA,OAAAnE,IAAAsG,EAAAc,EAAApH,EAAAsG,EAAA2B,GAAA,OAAAhB,EAAAH,EAAA9G,EAAAiH,EAAA6hB,QAAA9oB,EAAAiH,EAAAjH,EAAoF,OAAA8G,GAAS,IAAAD,EAAAV,EAAA3H,EAAAqI,IAAa7G,EAAAmO,KAAQlG,IAAAjI,EAAA8F,EAAA/O,OAAAiJ,EAAAwG,EAAAK,EAAArI,EAAAyJ,EAAAjI,EAAAtI,MAAAyM,GAAA,OAAAnE,IAAAoG,GAAA,OAAApG,EAAAsoB,WACrbzhB,EAAA+iB,OAAA,OAAA5pB,EAAAnH,IAAAoP,EAAAjI,EAAAnH,KAAAyN,EAAAc,EAAApH,EAAAsG,EAAA2B,GAAA,OAAAhB,EAAAH,EAAA9G,EAAAiH,EAAA6hB,QAAA9oB,EAAAiH,EAAAjH,EAAiH,OAAzCoG,IAAAS,EAAAxL,QAAA,SAAA+K,GAAyB,MAAAK,GAAAjI,EAAA4H,KAAgBU,EAAS,gBAAAV,EAAAD,EAAAiB,EAAAtB,GAAyB,GAAA3B,GAAA,gBAAAiD,IAAA,OAAAA,KAAA/E,OAAA6f,IAAA,OAAA9a,EAAAvO,GAA+DsL,KAAAiD,IAAA9E,MAAAqC,SAAwB,IAAAmC,GAAA,gBAAAM,IAAA,OAAAA,CAAoC,IAAAN,EAAA,OAAAM,EAAAob,UAAwB,IAAAub,IAAA33B,EAAA,CAAmB,IAARU,EAAAM,EAAAvO,IAAQsL,EAAAgC,EAAQ,OAAAhC,GAAS,CAAE,GAAAA,EAAAtL,MAAAiO,EAAA,CAAc,OAAA3C,EAAA/G,KAAc,UAAAgK,EAAA/E,OAAA6f,GAAA,CAAuBjtB,EAAAmR,EAAAjC,EAAA2kB,SAAe3iB,EAAA3H,EAAA2F,EAAAiD,EAAA9E,MAAAqC,UAAwBwB,EAAAiI,OAAAhI,EAAWA,EAAAD,CAAI,MAAAC,GAAQ,KAAM,YAAAjC,EAAA6b,cAAA5Y,EAAA/E,KAAA,CAAmCpN,EAAAmR,EAAAjC,EAAA2kB,SACte3iB,EAAA3H,EAAA2F,EAAAiD,EAAA9E,OAAe6D,EAAAZ,IAAAw3B,GAAA32B,EAAAjC,EAAAiD,GAAgBjB,EAAAiI,OAAAhI,EAAWA,EAAAD,CAAI,MAAAC,IAASnR,EAAAmR,EAAAjC,EAAO,OAAMsC,EAAAL,EAAAjC,GAAYA,IAAA2kB,QAAY1hB,EAAA/E,OAAA6f,IAAA/b,EAAA23B,GAAA12B,EAAA9E,MAAAqC,SAAAyB,EAAAs3B,KAAA53B,EAAAsB,EAAAvO,KAAAsN,EAAAiI,OAAAhI,IAAAD,IAAAL,EAAA63B,GAAAv2B,EAAA/E,KAAA+E,EAAAvO,IAAAuO,EAAA9E,MAAA,KAAA8D,EAAAs3B,KAAA53B,KAAAP,IAAAw3B,GAAA32B,EAAAD,EAAAiB,GAAAtB,EAAAsI,OAAAhI,IAAAN,GAA6I,MAAAQ,GAAAF,EAAY,KAAA+b,IAAA/b,EAAA,CAAW,IAAAjC,EAAAiD,EAAAvO,IAAY,OAAAsN,GAAS,CAAE,GAAAA,EAAAtN,MAAAsL,EAAA,QAAAgC,EAAA/I,KAAA+I,EAAA4gB,UAAA2D,gBAAAtjB,EAAAsjB,eAAAvkB,EAAA4gB,UAAA6W,iBAAAx2B,EAAAw2B,eAAA,CAAuH3oC,EAAAmR,EAAAD,EAAA2iB,SAAe3iB,EAAA3H,EAAA2H,EAAAiB,EAAAzC,cAAsBwB,EAAAiI,OAAAhI,EAAWA,EAAAD,CAAI,MAAAC,GAAanR,EAAAmR,EAAAD,EAAO,OAAMM,EAAAL,EAAAD,GAAYA,IAAA2iB,QAAY3iB,EACpf03B,GAAAz2B,EAAAhB,EAAAs3B,KAAA53B,GAAeK,EAAAiI,OAAAhI,EAAWA,EAAAD,EAAI,MAAAG,GAAAF,GAAY,mBAAAgB,IAAA,gBAAAA,GAAA,MAAAA,GAAA,GAAAA,EAAA,OAAAjB,GAAA,IAAAA,EAAA/I,KAAAnI,EAAAmR,EAAAD,EAAA2iB,SAAA3iB,EAAA3H,EAAA2H,EAAAiB,GAAAjB,EAAAiI,OAAAhI,IAAAD,IAAAlR,EAAAmR,EAAAD,KAAAs3B,GAAAr2B,EAAAhB,EAAAs3B,KAAA53B,GAAAK,EAAAiI,OAAAhI,IAAAD,GAAAG,EAAAF,EAAqK,IAAA43B,GAAA52B,GAAA,MAAAT,GAAAP,EAAAD,EAAAiB,EAAAtB,EAA2B,IAAAsb,EAAAha,GAAA,MAAAiB,GAAAjC,EAAAD,EAAAiB,EAAAtB,EAAsC,IAAXgB,GAAAo2B,GAAA92B,EAAAgB,GAAW,mBAAAA,KAAAjD,EAAA,OAAAiC,EAAAhJ,KAA4C,2CAAA8gB,OAAA3X,EAAA,IAAA0b,EAAA7b,EAAA/D,OAAA,cAAmF,MAAApN,GAAAmR,EAAAD,IAC/Y,QAAA83B,IAAA73B,GAAe,GAAAA,IAAA83B,GAAA,KAAAhgB,OAAA3X,EAAA,KAA8B,OAAAH,GAAS,QAAA+3B,IAAA/3B,EAAAK,GAAuD,OAAtCO,GAAAo3B,GAAA33B,GAAQO,GAAAq3B,GAAAj4B,GAAQY,GAAAs3B,GAAAJ,IAAS93B,EAAAK,EAAAqf,UAAuB,eAAArf,OAAA83B,iBAAA93B,EAAA+3B,aAAA7Y,EAAA,QAAkE,MAAM,SAAAvf,EAAA,IAAAA,EAAAK,EAAAtK,WAAAsK,IAAAL,EAAAo4B,cAAA,KAAAp4B,IAAAq4B,QAAAh4B,EAAAkf,EAAAlf,EAAAL,GAA4E2B,GAAAu2B,IAAMt3B,GAAAs3B,GAAA73B,GAAQ,QAAAi4B,MAAc32B,GAAAu2B,IAAMv2B,GAAAs2B,IAAMt2B,GAAAq2B,IAAM,QAAAO,IAAAv4B,GAAe63B,GAAAG,GAAAhkC,QAAe,IAAAqM,GAAAw3B,GAAAK,GAAAlkC,SAAqBnF,EAAA0wB,EAAAlf,EAAAL,EAAA/D,KAAmBoE,KAAAxR,IAAA+R,GAAAq3B,GAAAj4B,GAAAY,GAAAs3B,GAAArpC,IAAyB,QAAA2pC,IAAAx4B,GAAei4B,GAAAjkC,UAAAgM,IAAA2B,GAAAu2B,IAAAv2B,GAAAs2B,KACva,QAAAQ,IAAAz4B,GAAe,OAAAK,GAAAL,EAAY,OAAAK,GAAS,CAAE,QAAAA,EAAArJ,IAAA,CAAe,GAAAnI,GAAAwR,EAAAgiB,aAAsB,WAAAxzB,QAAAyzB,WAAA,OAAAzzB,GAAA,OAAAA,EAAAwlB,MAAA,OAAAxlB,EAAAwlB,MAAA,MAAAhU,OAA8E,SAAAA,EAAArJ,KAAA,SAAAqJ,EAAAq4B,cAAAC,aAA0D,WAAAt4B,EAAA8hB,OAAA,MAAA9hB,OAA6B,WAAAA,EAAAoiB,MAAA,CAAwBpiB,EAAAoiB,MAAAza,OAAA3H,EAAiBA,IAAAoiB,KAAU,UAAS,GAAApiB,IAAAL,EAAA,KAAe,MAAK,OAAAK,EAAAqiB,SAAiB,CAAE,UAAAriB,EAAA2H,QAAA3H,EAAA2H,SAAAhI,EAAA,WAA6CK,KAAA2H,OAAW3H,EAAAqiB,QAAA1a,OAAA3H,EAAA2H,OAA0B3H,IAAAqiB,QAAY,YACjb,QAAAkW,IAAA54B,EAAAK,GAAiB,GAAAxR,GAAAgqC,GAAA,cAAwBhqC,GAAA+qB,YAAA,UAAwB/qB,EAAAoN,KAAA,UAAiBpN,EAAA8xB,UAAAtgB,EAAcxR,EAAAmZ,OAAAhI,EAAWnR,EAAAszB,MAAA,EAAU,OAAAniB,EAAAg3B,YAAAh3B,EAAAg3B,WAAAC,WAAApoC,EAAAmR,EAAAg3B,WAAAnoC,GAAAmR,EAAAk3B,YAAAl3B,EAAAg3B,WAAAnoC,EAA4F,QAAAiqC,IAAA94B,EAAAK,GAAiB,OAAAL,EAAAhJ,KAAc,UAAAnI,GAAAmR,EAAA/D,IAAwF,OAApEoE,GAAA,IAAAA,EAAAqf,UAAA7wB,EAAA2D,gBAAA6N,EAAA2c,SAAAxqB,cAAA,KAAA6N,EAAoE,OAAAA,IAAAL,EAAA2gB,UAAAtgB,KAAsC,cAAAA,GAAA,KAAAL,EAAA+4B,cAAA,IAAA14B,EAAAqf,SAAA,KAAArf,EAAA,OAAAA,IAAAL,EAAA2gB,UAAAtgB,KAA0F,iBAAiB,mBACzd,QAAA24B,IAAAh5B,GAAe,GAAAi5B,GAAA,CAAO,GAAA54B,GAAA64B,EAAS,IAAA74B,EAAA,CAAM,GAAAxR,GAAAwR,CAAQ,KAAAy4B,GAAA94B,EAAAK,GAAA,CAAiC,GAApBA,EAAA8vB,GAAAthC,EAAAiJ,cAAoBuI,IAAAy4B,GAAA94B,EAAAK,GAAoD,MAAnCL,GAAAmiB,MAAAniB,EAAAmiB,YAAA,EAAwB8W,WAAME,GAAAn5B,EAAY44B,IAAAO,GAAAtqC,GAASsqC,GAAAn5B,EAAKk5B,GAAA/I,GAAA9vB,EAAA8Q,gBAAoBnR,GAAAmiB,MAAAniB,EAAAmiB,YAAA,EAAA8W,MAAAE,GAAAn5B,GAAyC,QAAAo5B,IAAAp5B,GAAe,IAAAA,IAAAgI,OAAe,OAAAhI,GAAA,IAAAA,EAAAhJ,KAAA,IAAAgJ,EAAAhJ,KAAA,KAAAgJ,EAAAhJ,KAA2CgJ,IAAAgI,MAAYmxB,IAAAn5B,EACzS,QAAAq5B,IAAAr5B,GAAe,GAAAA,IAAAm5B,GAAA,QAAmB,KAAAF,GAAA,MAAAG,IAAAp5B,GAAAi5B,OAAA,CAA6B,IAAA54B,GAAAL,EAAA/D,IAAa,QAAA+D,EAAAhJ,KAAA,SAAAqJ,GAAA,SAAAA,IAAA2vB,GAAA3vB,EAAAL,EAAA04B,eAAA,IAAAr4B,EAAA64B,GAAsE74B,GAAEu4B,GAAA54B,EAAAK,KAAA8vB,GAAA9vB,EAAAvI,YAAmC,IAANshC,GAAAp5B,GAAM,KAAAA,EAAAhJ,IAAA,CAA8D,GAA/CgJ,IAAAqiB,cAAkBriB,EAAA,OAAAA,IAAAsiB,WAAA,MAA6BtiB,EAAA,KAAA8X,OAAA3X,EAAA,KAA0BH,GAAA,CAAmB,IAAhBA,IAAAlI,YAAgBuI,EAAA,EAAQL,GAAE,CAAE,OAAAA,EAAA0f,SAAA,CAAmB,GAAA7wB,GAAAmR,EAAAqU,IAAa,WAAAxlB,EAAA,CAAa,OAAAwR,EAAA,CAAU64B,GAAA/I,GAAAnwB,EAAAlI,YAAqB,MAAAkI,GAAQK,QAAI,MAAAxR,GAAA,OAAAA,GAAA,OAAAA,GAAAwR,IAAqCL,IAAAlI,YAAgBohC,GAAA,UAASA,IAAAC,GAAAhJ,GAAAnwB,EAAA2gB,UAAA7oB,aAAA,IAA4C,UAChf,QAAAwhC,MAAcJ,GAAAC,GAAA,KAAWF,MAAgB,QAAAM,MAAc,OAAAv5B,GAAA,EAAYA,EAAAw5B,GAAApoC,OAAY4O,IAAAw5B,GAAAx5B,GAAAy5B,8BAAA,IAA6CD,IAAApoC,OAAA,EAAiH,QAAAsoC,MAAc,KAAA5hB,OAAA3X,EAAA,MAAqB,QAAAw5B,IAAA35B,EAAAK,GAAiB,UAAAA,EAAA,QAAqB,QAAAxR,GAAA,EAAYA,EAAAwR,EAAAjP,QAAAvC,EAAAmR,EAAA5O,OAAuBvC,IAAA,IAAA88B,GAAA3rB,EAAAnR,GAAAwR,EAAAxR,IAAA,QAA+B,UACxX,QAAA+qC,IAAA55B,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,GAA+I,GAAtH64B,GAAA74B,EAAKiC,GAAA5C,EAAIA,EAAAgiB,cAAA,KAAqBhiB,EAAA+zB,YAAA,KAAmB/zB,EAAAyzB,MAAA,EAAUgG,GAAA9lC,QAAA,OAAAgM,GAAA,OAAAA,EAAAqiB,cAAA0X,GAAAC,GAAkDh6B,EAAAnR,EAAAkR,EAAA3H,GAAS6hC,GAAA,CAAOj5B,EAAA,CAAI,IAAS,GAANi5B,QAAM,GAAAj5B,GAAA,KAAA8W,OAAA3X,EAAA,KAA+Ba,IAAA,EAAKqC,GAAAD,GAAA,KAAS/C,EAAA+zB,YAAA,KAAmB0F,GAAA9lC,QAAAkmC,GAAcl6B,EAAAnR,EAAAkR,EAAA3H,SAAS6hC,IAAwE,GAA9DH,GAAA9lC,QAAAmmC,GAAc95B,EAAA,OAAA+C,IAAA,OAAAA,GAAAzS,KAA0BkpC,GAAA,EAAKx2B,GAAAD,GAAAH,GAAA,KAAWm3B,MAAM/5B,EAAA,KAAAyX,OAAA3X,EAAA,KAAyB,OAAAH,GAAS,QAAAq6B,MAAc,GAAAr6B,IAAOqiB,cAAA,KAAAgS,UAAA,KAAAiG,UAAA,KAAAC,MAAA,KAAA5pC,KAAA,KAA+G,OAAxC,QAAA0S,GAAAJ,GAAAof,cAAAhf,GAAArD,EAAAqD,MAAA1S,KAAAqP,EAAwCqD,GACxe,QAAAm3B,MAAc,UAAAp3B,GAAA,CAAa,GAAApD,GAAAiD,GAAAif,SAAkBliB,GAAA,OAAAA,IAAAqiB,cAAA,SAAgCriB,GAAAoD,GAAAzS,IAAc,IAAA0P,GAAA,OAAAgD,GAAAJ,GAAAof,cAAAhf,GAAA1S,IAAsC,WAAA0P,EAAAgD,GAAAhD,EAAA+C,GAAApD,MAAoB,CAAK,UAAAA,EAAA,KAAA8X,OAAA3X,EAAA,KAAgCiD,IAAApD,EAAIA,GAAGqiB,cAAAjf,GAAAif,cAAAgS,UAAAjxB,GAAAixB,UAAAiG,UAAAl3B,GAAAk3B,UAAAC,MAAAn3B,GAAAm3B,MAAA5pC,KAAA,MAAmG,OAAA0S,GAAAJ,GAAAof,cAAAhf,GAAArD,EAAAqD,MAAA1S,KAAAqP,EAAwC,MAAAqD,IAAS,QAAAo3B,IAAAz6B,EAAAK,GAAiB,wBAAAA,KAAAL,GAAAK,EACtW,QAAAq6B,IAAA16B,GAAe,GAAAK,GAAAm6B,KAAA3rC,EAAAwR,EAAAk6B,KAAqB,WAAA1rC,EAAA,KAAAipB,OAAA3X,EAAA,KAAgCtR,GAAA8rC,oBAAA36B,CAAwB,IAAAD,GAAAqD,GAAAhL,EAAA2H,EAAAu6B,UAAAt5B,EAAAnS,EAAA4lC,OAAkC,WAAAzzB,EAAA,CAAa,UAAA5I,EAAA,CAAa,GAAA8H,GAAA9H,EAAAzH,IAAayH,GAAAzH,KAAAqQ,EAAArQ,KAAcqQ,EAAArQ,KAAAuP,EAASH,EAAAu6B,UAAAliC,EAAA4I,EAAgBnS,EAAA4lC,QAAA,KAAe,UAAAr8B,EAAA,CAAaA,IAAAzH,KAASoP,IAAAs0B,SAAc,IAAA30B,GAAAQ,EAAAc,EAAA,KAAAjD,EAAA3F,CAAmB,IAAG,GAAAsI,GAAA3C,EAAA+2B,IAAa,KAAA+E,GAAAn5B,OAAA,OAAAhB,QAAA/O,MAAmCmkC,KAAA,EAAA8F,OAAA78B,EAAA68B,OAAAC,aAAA98B,EAAA88B,aAAAC,WAAA/8B,EAAA+8B,WAAAnqC,KAAA,OAAqFoP,EAAAhC,EAAA88B,eAAA76B,EAAAjC,EAAA+8B,WAAA96B,EAAAD,EAAAhC,EAAA68B,YAAkD,CAAK,GAAAhhC,IAAOk7B,KAAAp0B,EAAAk6B,OAAA78B,EAAA68B,OAAAC,aAAA98B,EAAA88B,aACxdC,WAAA/8B,EAAA+8B,WAAAnqC,KAAA,KAAmC,QAAA+O,GAAAQ,EAAAR,EAAA9F,EAAAoH,EAAAjB,GAAAL,IAAA/O,KAAAiJ,EAAgCqJ,GAAA6wB,OAAApzB,EAAW20B,IAAA30B,EAAM3C,IAAApN,WAAS,OAAAoN,OAAA3F,EAAuB,QAAAsH,EAAAsB,EAAAjB,EAAAL,EAAA/O,KAAAuP,EAAsByrB,GAAA5rB,EAAAM,EAAAgiB,iBAAA0R,OAA+B1zB,EAAAgiB,cAAAtiB,EAAkBM,EAAAg0B,UAAArzB,EAAcX,EAAAi6B,UAAA56B,EAAc7Q,EAAAksC,kBAAAh7B,EAAsB,OAAAM,EAAAgiB,cAAAxzB,EAAAmsC,UAC7O,QAAAC,IAAAj7B,GAAe,GAAAK,GAAAm6B,KAAA3rC,EAAAwR,EAAAk6B,KAAqB,WAAA1rC,EAAA,KAAAipB,OAAA3X,EAAA,KAAgCtR,GAAA8rC,oBAAA36B,CAAwB,IAAAD,GAAAlR,EAAAmsC,SAAA5iC,EAAAvJ,EAAA4lC,QAAAzzB,EAAAX,EAAAgiB,aAA+C,WAAAjqB,EAAA,CAAavJ,EAAA4lC,QAAA,IAAe,IAAAv0B,GAAA9H,IAAAzH,IAAe,GAAAqQ,GAAAhB,EAAAgB,EAAAd,EAAA06B,QAAA16B,IAAAvP,WAA4BuP,IAAA9H,EAAauzB,IAAA3qB,EAAAX,EAAAgiB,iBAAA0R,OAA+B1zB,EAAAgiB,cAAArhB,EAAkB,OAAAX,EAAAi6B,YAAAj6B,EAAAg0B,UAAArzB,GAAoCnS,EAAAksC,kBAAA/5B,EAAsB,OAAAA,EAAAjB,GAC1U,QAAAm7B,IAAAl7B,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAM,EAAA86B,WAAoBp7B,KAAAM,EAAA+6B,QAAe,IAAAhjC,GAAAiI,EAAAo5B,6BAAiJ,IAA3G,OAAArhC,EAAA4H,EAAA5H,IAAA2H,GAAoBC,IAAAq7B,kBAAAr7B,GAAA65B,GAAA75B,UAAAK,EAAAo5B,8BAAA15B,EAAAy5B,GAAAxhC,KAAAqI,KAAuFL,EAAA,MAAAnR,GAAAwR,EAAA+6B,QAAoC,MAAX5B,IAAAxhC,KAAAqI,GAAWyX,MAAA3X,EAAA,MAC3O,QAAAm7B,IAAAt7B,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAAkL,EAAQ,WAAAlL,EAAA,KAAA0f,OAAA3X,EAAA,KAAgC,IAAAa,GAAAX,EAAA86B,YAAAj7B,EAAAc,EAAAX,EAAA+6B,SAAA17B,EAAAo6B,GAAA9lC,QAAA+J,EAAA2B,EAAAkJ,SAAA,WAAwE,MAAAsyB,IAAA9iC,EAAAiI,EAAAxR,KAAiB6R,EAAA3C,EAAA,GAAAnE,EAAAmE,EAAA,EAAgBA,GAAAsF,EAAI,IAAA5B,GAAAzB,EAAAqiB,cAAAvzB,EAAA2S,EAAA40B,KAAAj2B,EAAAtR,EAAAysC,YAAAh7B,EAAAkB,EAAAlH,MAA0DkH,KAAA+5B,SAAc,IAAAv5B,GAAAgB,EAC6O,OADrOjD,GAAAqiB,eAAiBgU,KAAAvnC,EAAAyL,OAAA8F,EAAAm7B,UAAAz7B,GAA6BL,EAAAsJ,UAAA,WAAuBla,EAAAysC,YAAA1sC,EAAgBC,EAAA2sC,YAAA/6B,CAAgB,IAAAV,GAAAgB,EAAAX,EAAA+6B,QAAmB,KAAAzP,GAAAzrB,EAAAF,GAAA,CAAaA,EAAAnR,EAAAwR,EAAA+6B,SAAezP,GAAA/xB,EAAAoG,KAAAU,EAAAV,KAAA07B,GAAAz5B,GAAA7J,EAAAijC,kBAAAr7B,EAAA5H,EAAA4tB,cAA6DhmB,EAAA5H,EAAAijC,iBAAqBjjC,EAAAiuB,gBAAArmB,CAAoB,QAAAD,GACpf3H,EAAAkuB,cAAA5mB,EAAAM,EAAoB,EAAAN,GAAI,CAAE,GAAA3B,GAAA,GAAAqoB,GAAA1mB,GAAAY,EAAA,GAAAvC,CAAsBgC,GAAAhC,IAAAiC,EAAQN,IAAAY,MAAQzR,EAAAwR,EAAAN,IAAUL,EAAAsJ,UAAA,WAAuB,MAAAjJ,GAAAM,EAAA+6B,QAAA,WAA8B,GAAAp7B,GAAAlR,EAAAysC,YAAA1sC,EAAAC,EAAA2sC,WAAoC,KAAI5sC,EAAAmR,EAAAK,EAAA+6B,SAAgB,IAAAr7B,GAAA27B,GAAAz5B,EAAY7J,GAAAijC,kBAAAt7B,EAAA3H,EAAA4tB,aAAqC,MAAA/lB,GAASpR,EAAA,WAAa,KAAAoR,UAAcI,EAAAN,IAAQ4rB,GAAAvrB,EAAAvR,IAAA88B,GAAAprB,EAAAF,IAAAsrB,GAAAlqB,EAAA1B,KAAAC,GAA+By0B,QAAA,KAAAuG,SAAA,KAAAL,oBAAAF,GAAAM,kBAAAnhC,GAAsEoG,EAAAg7B,SAAAt6B,EAAAi7B,GAAA1gC,KAAA,KAAAgI,GAAAjD,GAAAjC,EAAAw8B,MAAAv6B,EAAAjC,EAAAu8B,UAAA,KAAA1gC,EAAAshC,GAAA9iC,EAAAiI,EAAAxR,GAAAkP,EAAAskB,cAAAtkB,EAAAs2B,UAAAz6B,GAAsGA,EAC/d,QAAAgiC,IAAA57B,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAy6B,IAAW,OAAAc,IAAAv7B,EAAAC,EAAAK,EAAAxR,GAAmB,QAAAgtC,IAAA77B,GAAe,GAAAK,GAAAg6B,IAAyL,OAA9K,kBAAAr6B,YAA+BK,EAAAgiB,cAAAhiB,EAAAg0B,UAAAr0B,EAA8BA,EAAAK,EAAAk6B,OAAW9F,QAAA,KAAAuG,SAAA,KAAAL,oBAAAF,GAAAM,kBAAA/6B,GAAuEA,IAAAg7B,SAAAW,GAAA1gC,KAAA,KAAAgI,GAAAjD,IAA+BK,EAAAgiB,cAAAriB,GACzP,QAAA87B,IAAA97B,EAAAK,EAAAxR,EAAAkR,GAAoP,MAA/NC,IAAGhJ,IAAAgJ,EAAAtM,OAAA2M,EAAA07B,QAAAltC,EAAAmtC,KAAAj8B,EAAApP,KAAA,MAA2C0P,EAAA4C,GAAAmxB,YAAgB,OAAA/zB,MAAa22B,WAAA,MAAgB/zB,GAAAmxB,YAAA/zB,IAAA22B,WAAAh3B,EAAArP,KAAAqP,IAAAnR,EAAAwR,EAAA22B,WAAA,OAAAnoC,EAAAwR,EAAA22B,WAAAh3B,EAAArP,KAAAqP,GAAAD,EAAAlR,EAAA8B,KAAA9B,EAAA8B,KAAAqP,IAAArP,KAAAoP,EAAAM,EAAA22B,WAAAh3B,IAAoIA,EAAS,QAAAi8B,IAAAj8B,GAAe,GAAAK,GAAAg6B,IAAyB,OAAdr6B,IAAGhM,QAAAgM,GAAWK,EAAAgiB,cAAAriB,EAAyB,QAAAk8B,MAAc,MAAA1B,MAAAnY,cAA0B,QAAA8Z,IAAAn8B,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAAiiC,IAAWp3B,IAAAkf,OAAAniB,EAAW5H,EAAAiqB,cAAAyZ,GAAA,EAAAz7B,EAAAxR,EAAA,gBAAAkR,EAAA,KAAAA,GACjZ,QAAAq8B,IAAAp8B,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAAoiC,IAAWz6B,GAAA,SAAAA,EAAA,KAAAA,CAAoB,IAAAiB,GAAA,MAAa,WAAAoC,GAAA,CAAa,GAAAlD,GAAAkD,GAAAif,aAAkC,IAAZrhB,EAAAd,EAAA67B,QAAY,OAAAh8B,GAAA45B,GAAA55B,EAAAG,EAAA87B,MAAuC,WAAZF,IAAAz7B,EAAAxR,EAAAmS,EAAAjB,GAAoBkD,GAAAkf,OAAAniB,EAAW5H,EAAAiqB,cAAAyZ,GAAA,EAAAz7B,EAAAxR,EAAAmS,EAAAjB,GAA8B,QAAAs8B,IAAAr8B,EAAAK,GAAiB,MAAA87B,IAAA,MAAAn8B,EAAAK,GAAqB,QAAAi8B,IAAAt8B,EAAAK,GAAiB,MAAA+7B,IAAA,MAAAp8B,EAAAK,GAAqB,QAAAk8B,IAAAv8B,EAAAK,GAAiB,MAAA+7B,IAAA,IAAAp8B,EAAAK,GAAmB,QAAAm8B,IAAAx8B,EAAAK,GAAiB,wBAAAA,IAAAL,MAAAK,EAAAL,GAAA,WAAsDK,EAAA,QAAS,OAAAA,GAAA,SAAAA,GAAAL,MAAAK,EAAArM,QAAAgM,EAAA,WAA4DK,EAAArM,QAAA,OAA5D,OACxY,QAAAyoC,IAAAz8B,EAAAK,EAAAxR,GAA6D,MAA1CA,GAAA,OAAAA,GAAA,SAAAA,IAAA6tC,QAAA18B,IAAA,KAA0Co8B,GAAA,IAAAI,GAAAvhC,KAAA,KAAAoF,EAAAL,GAAAnR,GAAmC,QAAA8tC,OAAe,QAAAC,IAAA58B,EAAAK,GAAiB,GAAAxR,GAAA2rC,IAAWn6B,GAAA,SAAAA,EAAA,KAAAA,CAAoB,IAAAN,GAAAlR,EAAAwzB,aAAsB,eAAAtiB,GAAA,OAAAM,GAAAs5B,GAAAt5B,EAAAN,EAAA,IAAAA,EAAA,IAA8ClR,EAAAwzB,eAAAriB,EAAAK,GAAsBL,GAAS,QAAA68B,IAAA78B,EAAAK,GAAiB,GAAAxR,GAAA2rC,IAAWn6B,GAAA,SAAAA,EAAA,KAAAA,CAAoB,IAAAN,GAAAlR,EAAAwzB,aAAsB,eAAAtiB,GAAA,OAAAM,GAAAs5B,GAAAt5B,EAAAN,EAAA,IAAAA,EAAA,IAA8CC,MAAMnR,EAAAwzB,eAAAriB,EAAAK,GAAsBL,GAClZ,QAAA88B,IAAA98B,EAAAK,GAAiB,GAAAxR,GAAAkjC,IAAWQ,IAAA,GAAA1jC,EAAA,GAAAA,EAAA,WAAwBmR,QAAQuyB,GAAA,GAAA1jC,EAAA,GAAAA,EAAA,WAAwB,GAAAA,GAAAkuC,GAAAC,UAAoBD,IAAAC,WAAA,CAAgB,KAAIh9B,MAAAK,IAAU,QAAQ08B,GAAAC,WAAAnuC,KAC9I,QAAA8sC,IAAA37B,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAk9B,KAAA7kC,EAAAsjC,GAAA17B,GAAAgB,GAAsB8zB,KAAA18B,EAAAwiC,OAAA/rC,EAAAgsC,aAAA,KAAAC,WAAA,KAAAnqC,KAAA,MAA4DuP,EAAAG,EAAAo0B,OAAkF,IAArE,OAAAv0B,EAAAc,EAAArQ,KAAAqQ,KAAArQ,KAAAuP,EAAAvP,KAAAuP,EAAAvP,KAAAqQ,GAA2CX,EAAAo0B,QAAAzzB,EAAYd,EAAAF,EAAAkiB,UAAcliB,IAAAiD,IAAA,OAAA/C,OAAA+C,GAAAg3B,GAAAG,UAAmC,CAAK,OAAAp6B,EAAA8zB,QAAA,OAAA5zB,GAAA,IAAAA,EAAA4zB,SAAA5zB,EAAAG,EAAAs6B,oBAAA,OAAAz6B,GAAA,IAAgF,GAAAR,GAAAW,EAAA06B,kBAAAh9B,EAAAmC,EAAAR,EAAA7Q,EAAmE,IAAhCmS,EAAA65B,aAAA36B,EAAiBc,EAAA85B,WAAA/8B,EAAe4tB,GAAA5tB,EAAA2B,GAAA,OAAkB,MAAAgB,IAAU,SAASw8B,GAAAl9B,EAAA5H,EAAA2H,IAMnR,QAAAo9B,IAAAn9B,EAAAK,EAAAxR,EAAAkR,GAAqBM,EAAAoiB,MAAA,OAAAziB,EAAAo9B,GAAA/8B,EAAA,KAAAxR,EAAAkR,GAAAs9B,GAAAh9B,EAAAL,EAAAyiB,MAAA5zB,EAAAkR,GAAkD,QAAAu9B,IAAAt9B,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuBvJ,IAAAa,MAAW,IAAAsR,GAAAX,EAAAlB,GAAsC,OAA1Bw0B,IAAAtzB,EAAAjI,GAAQ2H,EAAA65B,GAAA55B,EAAAK,EAAAxR,EAAAkR,EAAAiB,EAAA5I,GAAkB,OAAA4H,GAAA+zB,IAAwF1zB,EAAA8hB,OAAA,EAAWgb,GAAAn9B,EAAAK,EAAAN,EAAA3H,GAAYiI,EAAAoiB,QAA/GpiB,EAAA+zB,YAAAp0B,EAAAo0B,YAAA/zB,EAAA8hB,YAAAniB,EAAA8zB,QAAA17B,EAAAmlC,GAAAv9B,EAAAK,EAAAjI,IACnR,QAAAolC,IAAAx9B,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,GAAyB,UAAAhB,EAAA,CAAa,GAAAE,GAAArR,EAAAoN,IAAa,yBAAAiE,IAAAu9B,GAAAv9B,IAAA,SAAAA,EAAAqT,cAAA,OAAA1kB,EAAA6uC,SAAA,SAAA7uC,EAAA0kB,cAA8IvT,EAAAu3B,GAAA1oC,EAAAoN,KAAA,KAAA8D,EAAAM,IAAAi3B,KAAAt2B,GAA+BhB,EAAAb,IAAAkB,EAAAlB,IAAYa,EAAAgI,OAAA3H,EAAWA,EAAAoiB,MAAAziB,IAApMK,EAAArJ,IAAA,GAAAqJ,EAAApE,KAAAiE,EAAAy9B,GAAA39B,EAAAK,EAAAH,EAAAH,EAAA3H,EAAA4I,IAA+N,MAAVd,GAAAF,EAAAyiB,MAAU,KAAArqB,EAAA4I,KAAA5I,EAAA8H,EAAAw4B,cAAA7pC,IAAA6uC,QAAA7uC,EAAA,OAAAA,IAAA68B,GAAA78B,EAAAuJ,EAAA2H,IAAAC,EAAAb,MAAAkB,EAAAlB,KAAAo+B,GAAAv9B,EAAAK,EAAAW,IAAqGX,EAAA8hB,OAAA,EAAWniB,EAAAo3B,GAAAl3B,EAAAH,GAAUC,EAAAb,IAAAkB,EAAAlB,IAAYa,EAAAgI,OAAA3H,EAAWA,EAAAoiB,MAAAziB,GACna,QAAA29B,IAAA39B,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,GAAyB,UAAAhB,GAAA0rB,GAAA1rB,EAAA04B,cAAA34B,IAAAC,EAAAb,MAAAkB,EAAAlB,IAAA,IAAA40B,MAAA,KAAA/yB,EAAA5I,GAAkG,MAAAiI,GAAAyzB,MAAA9zB,EAAA8zB,MAAAyJ,GAAAv9B,EAAAK,EAAAW,EAAlG,YAAAhB,EAAAmiB,SAAA4R,OAAwI,MAAA6J,IAAA59B,EAAAK,EAAAxR,EAAAkR,EAAAiB,GACjK,QAAA68B,IAAA79B,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAM,EAAA04B,aAAA3gC,EAAA2H,EAAAxB,SAAAyC,EAAA,OAAAhB,IAAAqiB,cAAA,IAAkE,eAAAtiB,EAAAu3B,MAAA,kCAAAv3B,EAAAu3B,KAAA,UAAAj3B,EAAAi3B,MAAAj3B,EAAAgiB,eAAkGyb,UAAA,GAAYC,GAAA19B,EAAAxR,OAAS,oBAAAA,GAAsF,MAAAmR,GAAA,OAAAgB,IAAA88B,UAAAjvC,IAAAwR,EAAAyzB,MAAAzzB,EAAAqzB,WAAA,WAAArzB,EAAAgiB,eAAwFyb,UAAA99B,GAAY+9B,GAAA19B,EAAAL,GAAA,IAA1LK,GAAAgiB,eAA4Cyb,UAAA,GAAYC,GAAA19B,EAAA,OAAAW,IAAA88B,UAAAjvC,OAAgJ,QAAAmS,GAAAjB,EAAAiB,EAAA88B,UAAAjvC,EAAAwR,EAAAgiB,cAAA,MAAAtiB,EAAAlR,EAAAkvC,GAAA19B,EAAAN,EAA6E,OAAZo9B,IAAAn9B,EAAAK,EAAAjI,EAAAvJ,GAAYwR,EAAAoiB,MACje,QAAAub,IAAAh+B,EAAAK,GAAiB,GAAAxR,GAAAwR,EAAAlB,KAAY,OAAAa,GAAA,OAAAnR,GAAA,OAAAmR,KAAAb,MAAAtQ,KAAAwR,EAAA8hB,OAAA,KAAwD,QAAAyb,IAAA59B,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuB,GAAA4I,GAAAqwB,GAAAxiC,GAAAgjC,GAAA/xB,GAAA9L,OAA6D,OAApCgN,GAAAgwB,GAAA3wB,EAAAW,GAAU2yB,GAAAtzB,EAAAjI,GAAQvJ,EAAA+qC,GAAA55B,EAAAK,EAAAxR,EAAAkR,EAAAiB,EAAA5I,GAAkB,OAAA4H,GAAA+zB,IAAwF1zB,EAAA8hB,OAAA,EAAWgb,GAAAn9B,EAAAK,EAAAxR,EAAAuJ,GAAYiI,EAAAoiB,QAA/GpiB,EAAA+zB,YAAAp0B,EAAAo0B,YAAA/zB,EAAA8hB,YAAAniB,EAAA8zB,QAAA17B,EAAAmlC,GAAAv9B,EAAAK,EAAAjI,IACzK,QAAA6lC,IAAAj+B,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuB,GAAAi5B,GAAAxiC,GAAA,CAAU,GAAAmS,KAAS2wB,IAAAtxB,OAAMW,KAAkB,IAAR2yB,GAAAtzB,EAAAjI,GAAQ,OAAAiI,EAAAsgB,UAAA,OAAA3gB,MAAAkiB,UAAA,KAAA7hB,EAAA6hB,UAAA,KAAA7hB,EAAA8hB,OAAA,GAAAwT,GAAAt1B,EAAAxR,EAAAkR,GAAAq2B,GAAA/1B,EAAAxR,EAAAkR,EAAA3H,GAAA2H,SAA0G,WAAAC,EAAA,CAAkB,GAAAE,GAAAG,EAAAsgB,UAAAjhB,EAAAW,EAAAq4B,aAAoCx4B,GAAAhE,MAAAwD,CAAU,IAAA3B,GAAAmC,EAAA3L,QAAAmM,EAAA7R,EAAA+mC,WAAgC,iBAAAl1B,IAAA,OAAAA,IAAAszB,GAAAtzB,MAAA2wB,GAAAxiC,GAAAgjC,GAAA/xB,GAAA9L,QAAA0M,EAAAswB,GAAA3wB,EAAAK,GAAuE,IAAA9G,GAAA/K,EAAA0nC,yBAAA90B,EAAA,kBAAA7H,IAAA,kBAAAsG,GAAAs2B,uBAAwG/0B,IAAA,kBAAAvB,GAAAg2B,kCAC3b,kBAAAh2B,GAAA+1B,4BAAAv2B,IAAAK,GAAAhC,IAAA2C,IAAAs1B,GAAA31B,EAAAH,EAAAH,EAAAW,GAA6E00B,KAAM,IAAAtmC,GAAAuR,EAAAgiB,aAAsBniB,GAAA21B,MAAA/mC,EAAUqmC,GAAA90B,EAAAN,EAAAG,EAAA9H,GAAY2F,EAAAsC,EAAAgiB,cAAkB3iB,IAAAK,GAAAjR,IAAAiP,GAAAoD,GAAAnN,SAAAohC,IAAA,kBAAAx7B,KAAA27B,GAAAl1B,EAAAxR,EAAA+K,EAAAmG,GAAAhC,EAAAsC,EAAAgiB,gBAAA3iB,EAAA01B,IAAAI,GAAAn1B,EAAAxR,EAAA6Q,EAAAK,EAAAjR,EAAAiP,EAAA2C,KAAAe,GAAA,kBAAAvB,GAAAu2B,2BAAA,kBAAAv2B,GAAAw2B,qBAAA,kBAAAx2B,GAAAw2B,oBAAAx2B,EAAAw2B,qBAAA,kBAAAx2B,GAAAu2B,2BAAAv2B,EAAAu2B,6BAAA,kBACjJv2B,GAAAnD,oBAAAsD,EAAA8hB,OAAA,uBAAAjiB,GAAAnD,oBAAAsD,EAAA8hB,OAAA,GAAA9hB,EAAAq4B,cAAA34B,EAAAM,EAAAgiB,cAAAtkB,GAAAmC,EAAAhE,MAAA6D,EAAAG,EAAA21B,MAAA93B,EAAAmC,EAAA3L,QAAAmM,EAAAX,EAAAL,IAAA,kBAAAQ,GAAAnD,oBAAAsD,EAAA8hB,OAAA,GAAApiB,UAAwO,CAAKG,EAAAG,EAAAsgB,UAAcgU,GAAA30B,EAAAK,GAAQX,EAAAW,EAAAq4B,cAAkBh4B,EAAAL,EAAApE,OAAAoE,EAAAuZ,YAAAla,EAAAuzB,GAAA5yB,EAAApE,KAAAyD,GAAwCQ,EAAAhE,MAAAwE,EAAUe,EAAApB,EAAA04B,aAAiBjqC,EAAAoR,EAAA3L,QAAYwJ,EAAAlP,EAAA+mC,YAAgB,gBAAA73B,IAAA,OAAAA,IAAAi2B,GAAAj2B,MAAAszB,GAAAxiC,GAAAgjC,GAAA/xB,GAAA9L,QAAA+J,EAAAizB,GAAA3wB,EAAAtC,GAAuE,IAAAqC,GAAAvR,EAAA0nC,0BAAiC38B,EAAA,kBAAAwG,IAC5d,kBAAAF,GAAAs2B,0BAAA,kBAAAt2B,GAAAg2B,kCAAA,kBAAAh2B,GAAA+1B,4BAAAv2B,IAAA+B,GAAA3S,IAAAiP,IAAAi4B,GAAA31B,EAAAH,EAAAH,EAAAhC,GAAqLq3B,MAAMtmC,EAAAuR,EAAAgiB,cAAkBniB,EAAA21B,MAAA/mC,EAAUqmC,GAAA90B,EAAAN,EAAAG,EAAA9H,EAAY,IAAAmI,GAAAF,EAAAgiB,aAAsB3iB,KAAA+B,GAAA3S,IAAAyR,GAAAY,GAAAnN,SAAAohC,IAAA,kBAAAh1B,KAAAm1B,GAAAl1B,EAAAxR,EAAAuR,EAAAL,GAAAQ,EAAAF,EAAAgiB,gBAAA3hB,EAAA00B,IAAAI,GAAAn1B,EAAAxR,EAAA6R,EAAAX,EAAAjR,EAAAyR,EAAAxC,KAAAnE,GAAA,kBAAAsG,GAAAg+B,4BAAA,kBAAAh+B,GAAAi+B,sBAAA,kBAAAj+B,GAAAi+B,qBAAAj+B,EAAAi+B,oBAAAp+B,EACzPQ,EAAAxC,GAAA,kBAAAmC,GAAAg+B,4BAAAh+B,EAAAg+B,2BAAAn+B,EAAAQ,EAAAxC,IAAA,kBAAAmC,GAAAjD,qBAAAoD,EAAA8hB,OAAA,qBAAAjiB,GAAAs2B,0BAAAn2B,EAAA8hB,OAAA,yBAAAjiB,GAAAjD,oBAAAyC,IAAAM,EAAA04B,eAAA5pC,IAAAkR,EAAAqiB,gBAAAhiB,EAAA8hB,OAAA,qBAAAjiB,GAAAs2B,yBAAA92B,IAAAM,EAAA04B,eAAA5pC,IAAAkR,EAAAqiB,gBAAAhiB,EAAA8hB,OAAA,KAAA9hB,EAAAq4B,cAAA34B,EAAAM,EAAAgiB,cAAA9hB,GAAAL,EAAAhE,MAAA6D,EAAAG,EAAA21B,MAAAt1B,EAAAL,EAAA3L,QAAAwJ,EAAAgC,EAAAW,IAAA,kBAAAR,GAAAjD,oBACAyC,IAAAM,EAAA04B,eAAA5pC,IAAAkR,EAAAqiB,gBAAAhiB,EAAA8hB,OAAA,qBAAAjiB,GAAAs2B,yBAAA92B,IAAAM,EAAA04B,eAAA5pC,IAAAkR,EAAAqiB,gBAAAhiB,EAAA8hB,OAAA,KAAApiB,MAAqK,MAAAq+B,IAAAp+B,EAAAK,EAAAxR,EAAAkR,EAAAiB,EAAA5I,GACrK,QAAAgmC,IAAAp+B,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,GAAyBg9B,GAAAh+B,EAAAK,EAAQ,IAAAH,GAAA,QAAAG,EAAA8hB,MAAuB,KAAApiB,IAAAG,EAAA,MAAA9H,IAAA05B,GAAAzxB,EAAAxR,MAAA0uC,GAAAv9B,EAAAK,EAAAW,EAAyCjB,GAAAM,EAAAsgB,UAAc0d,GAAArqC,QAAAqM,CAAa,IAAAX,GAAAQ,GAAA,kBAAArR,GAAAyvC,yBAAA,KAAAv+B,EAAArQ,QAAuM,OAA/H2Q,GAAA8hB,OAAA,EAAW,OAAAniB,GAAAE,GAAAG,EAAAoiB,MAAA4a,GAAAh9B,EAAAL,EAAAyiB,MAAA,KAAAzhB,GAAAX,EAAAoiB,MAAA4a,GAAAh9B,EAAA,KAAAX,EAAAsB,IAAAm8B,GAAAn9B,EAAAK,EAAAX,EAAAsB,GAA8EX,EAAAgiB,cAAAtiB,EAAA81B,MAAwBz9B,GAAA05B,GAAAzxB,EAAAxR,MAAcwR,EAAAoiB,MAAe,QAAA8b,IAAAv+B,GAAe,GAAAK,GAAAL,EAAA2gB,SAAkBtgB,GAAAm+B,eAAAhN,GAAAxxB,EAAAK,EAAAm+B,eAAAn+B,EAAAm+B,iBAAAn+B,EAAA9L,SAAA8L,EAAA9L,SAAAi9B,GAAAxxB,EAAAK,EAAA9L,YAAmGwjC,GAAA/3B,EAAAK,EAAAikB,eAEtd,QAAAma,IAAAz+B,EAAAK,EAAAxR,GAAmB,GAAAqR,GAAAH,EAAAM,EAAA04B,aAAA3gC,EAAA+J,GAAAnO,QAAAgN,IAAgP,QAAxMd,EAAA,QAAAG,EAAA8hB,UAAAjiB,GAAA,OAAAF,GAAA,OAAAA,EAAAqiB,gBAAA,OAAAjqB,IAAwE8H,GAAAc,KAAAX,EAAA8hB,YAAA,OAAAniB,GAAA,OAAAA,EAAAqiB,eAAA,SAAAtiB,EAAA2+B,eAAA3+B,EAAA4+B,6BAAAvmC,GAAA,GAAuHwI,GAAAuB,GAAA,EAAA/J,GAAS,OAAA4H,GAAa,SAAAD,EAAA2+B,UAAA1F,GAAA34B,GAA2BL,EAAAD,EAAAxB,SAAanG,EAAA2H,EAAA2+B,SAAa19B,GAAAhB,EAAA4+B,GAAAv+B,EAAAL,EAAA5H,EAAAvJ,GAAAwR,EAAAoiB,MAAAJ,eAAiDyb,UAAAjvC,GAAYwR,EAAAgiB,cAAAwc,GAAA7+B,GAAsB,gBAAAD,GAAA++B,2BAAA9+B,EAAA4+B,GAAAv+B,EAAAL,EAAA5H,EAAAvJ,GAAAwR,EAAAoiB,MAAAJ,eAA6Fyb,UAAAjvC,GACrfwR,EAAAgiB,cAAAwc,GAAAx+B,EAAAyzB,MAAA,SAAA9zB,IAAsCnR,EAAAkwC,IAAMzH,KAAA,UAAA/4B,SAAAyB,GAA0BK,EAAAi3B,KAAAzoC,EAAA,MAAgBA,EAAAmZ,OAAA3H,EAAWA,EAAAoiB,MAAA5zB,IAAiB,OAAAmR,EAAAqiB,cAA2BrhB,GAAAjB,EAAAi/B,GAAAh/B,EAAAK,EAAAN,EAAAxB,SAAAwB,EAAA2+B,SAAA7vC,GAAAmS,EAAAX,EAAAoiB,MAAArqB,EAAA4H,EAAAyiB,MAAAJ,cAAArhB,EAAAqhB,cAAA,OAAAjqB,GAA0G0lC,UAAAjvC,IAAcivC,UAAA1lC,EAAA0lC,UAAAjvC,GAAwBmS,EAAA0yB,WAAA1zB,EAAA0zB,YAAA7kC,EAAAwR,EAAAgiB,cAAAwc,GAAA9+B,IAAmDlR,EAAAowC,GAAAj/B,EAAAK,EAAAN,EAAAxB,SAAA1P,GAAuBwR,EAAAgiB,cAAA,KAAqBxzB,GAASmS,GAAAjB,EAAAi/B,GAAAh/B,EAAAK,EAAAN,EAAAxB,SAAAwB,EAAA2+B,SAAA7vC,GAAAmS,EAAAX,EAAAoiB,MAAArqB,EAAA4H,EAAAyiB,MAAAJ,cAAArhB,EAAAqhB,cAAA,OAAAjqB,GAA0G0lC,UAAAjvC,IAC9eivC,UAAA1lC,EAAA0lC,UAAAjvC,GAAwBmS,EAAA0yB,WAAA1zB,EAAA0zB,YAAA7kC,EAAAwR,EAAAgiB,cAAAwc,GAAA9+B,IAAmDlR,EAAAowC,GAAAj/B,EAAAK,EAAAN,EAAAxB,SAAA1P,GAAuBwR,EAAAgiB,cAAA,KAAqBxzB,GAAS,QAAA+vC,IAAA5+B,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAA4H,EAAAs3B,KAAAt2B,EAAAhB,EAAAyiB,KAAwL,OAAjKpiB,IAAGi3B,KAAA,SAAA/4B,SAAA8B,GAA0B,OAAAjI,IAAA,OAAA4I,KAAA0yB,WAAA,EAAA1yB,EAAA+3B,aAAA14B,GAAAW,EAAA+9B,GAAA1+B,EAAAjI,EAAA,QAAuEvJ,EAAA6oC,GAAA7oC,EAAAuJ,EAAA2H,EAAA,MAAiBiB,EAAAgH,OAAAhI,EAAWnR,EAAAmZ,OAAAhI,EAAWgB,EAAA0hB,QAAA7zB,EAAYmR,EAAAyiB,MAAAzhB,EAAUnS,EAC9U,QAAAowC,IAAAj/B,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAA4H,EAAAyiB,KAAyL,OAA3KziB,GAAA5H,EAAAsqB,QAAY7zB,EAAAuoC,GAAAh/B,GAAQk/B,KAAA,UAAA/4B,SAAA1P,IAA4B,OAAAwR,EAAAi3B,QAAAzoC,EAAAilC,MAAA/zB,GAA4BlR,EAAAmZ,OAAA3H,EAAWxR,EAAA6zB,QAAA,KAAe,OAAA1iB,MAAAi3B,WAAA,KAAAj3B,EAAAmiB,MAAA,EAAA9hB,EAAA62B,YAAA72B,EAAA22B,WAAAh3B,GAAqEK,EAAAoiB,MAAA5zB,EAC9M,QAAAmwC,IAAAh/B,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuB,GAAA4I,GAAAX,EAAAi3B,KAAAp3B,EAAAF,EAAAyiB,KAAuBziB,GAAAE,EAAAwiB,OAAY,IAAAhjB,IAAO43B,KAAA,SAAA/4B,SAAA1P,EAA2T,OAAjS,QAAAmS,IAAAX,EAAAoiB,QAAAviB,GAAArR,EAAAwR,EAAAoiB,MAAA5zB,EAAA6kC,WAAA,EAAA7kC,EAAAkqC,aAAAr5B,EAAAQ,EAAArR,EAAAmoC,WAAA,OAAA92B,GAAAG,EAAA62B,YAAAroC,EAAAqoC,YAAA72B,EAAA22B,WAAA92B,IAAA+2B,WAAA,MAAA52B,EAAA62B,YAAA72B,EAAA22B,WAAA,MAAAnoC,EAAAuoC,GAAAl3B,EAAAR,GAAoM,OAAAM,EAAAD,EAAAq3B,GAAAp3B,EAAAD,MAAA23B,GAAA33B,EAAAiB,EAAA5I,EAAA,MAAA2H,EAAAoiB,OAAA,GAAiDpiB,EAAAiI,OAAA3H,EAAWxR,EAAAmZ,OAAA3H,EAAWxR,EAAA6zB,QAAA3iB,EAAYM,EAAAoiB,MAAA5zB,EAAUkR,EAAS,QAAAm/B,IAAAl/B,EAAAK,GAAiBL,EAAA8zB,OAAAzzB,CAAW,IAAAxR,GAAAmR,EAAAkiB,SAAkB,QAAArzB,MAAAilC,OAAAzzB,GAAuBozB,GAAAzzB,EAAAgI,OAAA3H,GAC1c,QAAA8+B,IAAAn/B,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,GAAyB,GAAAd,GAAAF,EAAAqiB,aAAsB,QAAAniB,EAAAF,EAAAqiB,eAA0B+c,YAAA/+B,EAAAg/B,UAAA,KAAAC,mBAAA,EAAAC,KAAAx/B,EAAAy/B,KAAA3wC,EAAA4wC,SAAArnC,EAAA4+B,WAAAh2B,IAAwFd,EAAAk/B,YAAA/+B,EAAAH,EAAAm/B,UAAA,KAAAn/B,EAAAo/B,mBAAA,EAAAp/B,EAAAq/B,KAAAx/B,EAAAG,EAAAs/B,KAAA3wC,EAAAqR,EAAAu/B,SAAArnC,EAAA8H,EAAA82B,WAAAh2B,GACjK,QAAA0+B,IAAA1/B,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAM,EAAA04B,aAAA3gC,EAAA2H,EAAA44B,YAAA33B,EAAAjB,EAAAy/B,IAA+E,IAAjCrC,GAAAn9B,EAAAK,EAAAN,EAAAxB,SAAA1P,GAAqBkR,EAAAoC,GAAAnO,QAAY,OAAA+L,KAAA,EAAAA,EAAA,EAAAM,EAAA8hB,OAAA,OAAiC,CAAK,UAAAniB,GAAA,QAAAA,EAAAmiB,OAAAniB,EAAA,IAAAA,EAAAK,EAAAoiB,MAA8C,OAAAziB,GAAS,CAAE,QAAAA,EAAAhJ,IAAA,OAAAgJ,EAAAqiB,eAAA6c,GAAAl/B,EAAAnR,OAA8C,SAAAmR,EAAAhJ,IAAAkoC,GAAAl/B,EAAAnR,OAA2B,WAAAmR,EAAAyiB,MAAA,CAAwBziB,EAAAyiB,MAAAza,OAAAhI,EAAiBA,IAAAyiB,KAAU,UAAS,GAAAziB,IAAAK,EAAA,KAAAL,EAAiB,MAAK,OAAAA,EAAA0iB,SAAiB,CAAE,UAAA1iB,EAAAgI,QAAAhI,EAAAgI,SAAA3H,EAAA,KAAAL,EAAyCA,KAAAgI,OAAWhI,EAAA0iB,QAAA1a,OAAAhI,EAAAgI,OAA0BhI,IAAA0iB,QAAY3iB,GAAA,EAAY,GAAPa,GAAAuB,GAAApC,GAAO,OAAAM,EAAAi3B,MAAAj3B,EAAAgiB,cACrd,SAAK,QAAAjqB,GAAe,eAA0B,IAA1BvJ,EAAAwR,EAAAoiB,MAA0BrqB,EAAA,KAAW,OAAAvJ,GAASmR,EAAAnR,EAAAqzB,UAAA,OAAAliB,GAAA,OAAAy4B,GAAAz4B,KAAA5H,EAAAvJ,OAAA6zB,OAAyD7zB,GAAAuJ,EAAI,OAAAvJ,GAAAuJ,EAAAiI,EAAAoiB,MAAApiB,EAAAoiB,MAAA,OAAArqB,EAAAvJ,EAAA6zB,QAAA7zB,EAAA6zB,QAAA,MAA+Dyc,GAAA9+B,KAAAjI,EAAAvJ,EAAAmS,EAAAX,EAAA22B,WAA4B,MAAM,iBAAkC,IAAlCnoC,EAAA,KAAwBuJ,EAAAiI,EAAAoiB,MAAUpiB,EAAAoiB,MAAA,KAAiB,OAAArqB,GAAS,CAAgB,GAAd4H,EAAA5H,EAAA8pB,UAAc,OAAAliB,GAAA,OAAAy4B,GAAAz4B,GAAA,CAA2BK,EAAAoiB,MAAArqB,CAAU,OAAM4H,EAAA5H,EAAAsqB,QAAYtqB,EAAAsqB,QAAA7zB,EAAYA,EAAAuJ,EAAIA,EAAA4H,EAAIm/B,GAAA9+B,KAAAxR,EAAA,KAAAmS,EAAAX,EAAA22B,WAA+B,MAAM,gBAAAmI,GAAA9+B,KAAA,iBAAAA,EAAA22B,WAAuD,MAAM,SAAA32B,EAAAgiB,cAAA,KAA6B,MAAAhiB,GAAAoiB,MACtf,QAAA8a,IAAAv9B,EAAAK,EAAAxR,GAAyE,GAAtD,OAAAmR,IAAAK,EAAAuzB,aAAA5zB,EAAA4zB,cAA0CyB,IAAAh1B,EAAAyzB,MAAY,KAAAjlC,EAAAwR,EAAAqzB,YAAA,CAAyB,UAAA1zB,GAAAK,EAAAoiB,QAAAziB,EAAAyiB,MAAA,KAAA3K,OAAA3X,EAAA,KAAmD,WAAAE,EAAAoiB,MAAA,CAA8D,IAA3CziB,EAAAK,EAAAoiB,MAAU5zB,EAAAuoC,GAAAp3B,IAAA+4B,cAAuB14B,EAAAoiB,MAAA5zB,EAAUA,EAAAmZ,OAAA3H,EAAe,OAAAL,EAAA0iB,SAAiB1iB,IAAA0iB,QAAA7zB,IAAA6zB,QAAA0U,GAAAp3B,IAAA+4B,cAAAlqC,EAAAmZ,OAAA3H,CAAyDxR,GAAA6zB,QAAA,KAAe,MAAAriB,GAAAoiB,MAAe,YAKrP,QAAAkd,IAAA3/B,EAAAK,GAAiB,IAAA44B,GAAA,OAAAj5B,EAAAy/B,UAA0B,aAAAp/B,EAAAL,EAAAw/B,IAAuB,QAAA3wC,GAAA,KAAe,OAAAwR,GAAS,OAAAA,EAAA6hB,YAAArzB,EAAAwR,OAAAqiB,OAAuC,QAAA7zB,EAAAmR,EAAAw/B,KAAA,KAAA3wC,EAAA6zB,QAAA,IAAoC,MAAM,iBAAA7zB,EAAAmR,EAAAw/B,IAA0B,QAAAz/B,GAAA,KAAe,OAAAlR,GAAS,OAAAA,EAAAqzB,YAAAniB,EAAAlR,OAAA6zB,OAAuC,QAAA3iB,EAAAM,GAAA,OAAAL,EAAAw/B,KAAAx/B,EAAAw/B,KAAA,KAAAx/B,EAAAw/B,KAAA9c,QAAA,KAAA3iB,EAAA2iB,QAAA,MACzV,QAAAkd,IAAA5/B,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAM,EAAA04B,YAAqB,QAAA14B,EAAArJ,KAAc,sFAAuF,cAAAq6B,IAAAhxB,EAAApE,OAAAs1B,KAAA,IAAoC,QAA2L,MAA3L+G,MAAY32B,GAAAR,IAAKQ,GAAA7B,IAAKy5B,KAAKx5B,EAAAM,EAAAsgB,UAAc5gB,EAAAy+B,iBAAAz+B,EAAAxL,QAAAwL,EAAAy+B,eAAAz+B,EAAAy+B,eAAA,MAAqE,OAAAx+B,GAAA,OAAAA,EAAAyiB,QAAA4W,GAAAh5B,KAAA8hB,OAAA,EAAApiB,EAAAskB,UAAAhkB,EAAA8hB,OAAA,MAAuE0d,GAAAx/B,GAAM,IAAY,QAAAm4B,GAAAn4B,EAAa,IAAAjI,GAAAy/B,GAAAG,GAAAhkC,QAA8B,IAATnF,EAAAwR,EAAApE,KAAS,OAAA+D,GAAA,MAAAK,EAAAsgB,UAAAmf,GAAA9/B,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAA4H,EAAAb,MAAAkB,EAAAlB,MAAAkB,EAAA8hB,OAAA,SAA2E,CAAK,IAAApiB,EAAA,CAAO,UAC1fM,EAAAsgB,UAAA,KAAA7I,OAAA3X,EAAA,KAAgC,aAA6B,GAAjBH,EAAA63B,GAAAK,GAAAlkC,SAAiBqlC,GAAAh5B,GAAA,CAAUN,EAAAM,EAAAsgB,UAAc9xB,EAAAwR,EAAApE,IAAS,IAAA+E,GAAAX,EAAAq4B,aAAsC,QAAhB34B,EAAA0wB,IAAApwB,EAAQN,EAAA2wB,IAAA1vB,EAAQnS,GAAU,aAAAqS,GAAA,SAAAnB,GAA4BmB,GAAA,QAAAnB,EAAa,MAAM,uCAAAmB,GAAA,OAAAnB,EAAqD,MAAM,6BAAAC,EAAA,EAAkCA,EAAA+/B,GAAA3uC,OAAY4O,IAAAkB,GAAA6+B,GAAA//B,GAAAD,EAAe,MAAM,cAAAmB,GAAA,QAAAnB,EAA2B,MAAM,kCAAAmB,GAAA,QAAAnB,GAAiDmB,GAAA,OAAAnB,EAAY,MAAM,eAAAmB,GAAA,SAAAnB,EAA6B,MAAM,aAAAke,EAAAle,EAAAiB,GAAqBE,GAAA,UAAAnB,EAAe,MAAM,cAAAA,EAAAge,eAC3eiiB,cAAAh/B,EAAAi/B,UAA0B/+B,GAAA,UAAAnB,EAAe,MAAM,gBAAAmf,EAAAnf,EAAAiB,GAAAE,GAAA,UAAAnB,GAAuCigB,EAAAnxB,EAAAmS,GAAQhB,EAAA,IAAO,QAAAE,KAAAc,KAAA7G,eAAA+F,KAAA9H,EAAA4I,EAAAd,GAAA,aAAAA,EAAA,gBAAA9H,GAAA2H,EAAAsf,cAAAjnB,IAAA4H,GAAA,WAAA5H,IAAA,gBAAAA,IAAA2H,EAAAsf,cAAA,GAAAjnB,IAAA4H,GAAA,cAAA5H,IAAAmJ,GAAApH,eAAA+F,IAAA,MAAA9H,GAAA,aAAA8H,GAAAgB,GAAA,SAAAnB,GAAoP,QAAAlR,GAAU,YAAA0uB,EAAAxd,GAAmBwe,EAAAxe,EAAAiB,KAAW,MAAM,gBAAAuc,EAAAxd,GAAsBqf,EAAArf,EAAM,MAAM,gCAAkC,2BAAAiB,GAAAyI,UAAA1J,EAAAmgC,QAC5crQ,IAAI9vB,EAAAC,EAAIK,EAAA+zB,YAAAr0B,EAAgB,OAAAA,IAAAM,EAAA8hB,OAAA,OAAuB,CAAqZ,OAAhZjiB,EAAA,IAAA9H,EAAAsnB,SAAAtnB,IAAAomB,cAAmCxe,IAAAmgC,GAAAC,OAAApgC,EAAAsf,EAAAzwB,IAAuBmR,IAAAmgC,GAAAC,KAAA,WAAAvxC,GAAAmR,EAAAE,EAAAvQ,cAAA,OAAAqQ,EAAAqgC,UAAA,oBAAArgC,IAAA1H,YAAA0H,EAAAmR,aAAA,gBAAApR,GAAAogB,GAAAngB,EAAAE,EAAAvQ,cAAAd,GAAiKsxB,GAAApgB,EAAAogB,MAAQngB,EAAAE,EAAAvQ,cAAAd,GAAA,WAAAA,IAAAqR,EAAAF,EAAAD,EAAAkgC,SAAA//B,EAAA+/B,YAAAlgC,EAAAugC,OAAApgC,EAAAogC,KAAAvgC,EAAAugC,QAAAtgC,EAAAE,EAAAqgC,gBAAAvgC,EAAAnR,GAAuHmR,EAAAywB,IAAApwB,EAAQL,EAAA0wB,IAAA3wB,EAAQygC,GAAAxgC,EAAAK,MAAA,GAAcA,EAAAsgB,UAAA3gB,EAAcE,EAAAggB,EAAArxB,EAAAkR,GAAUlR,GAAU,aAAAqS,GAAA,SAAAlB,GAA4BkB,GAAA,QAAAlB,GAC1e5H,EAAA2H,CAAI,MAAM,uCAAAmB,GAAA,OAAAlB,GAAqD5H,EAAA2H,CAAI,MAAM,6BAAA3H,EAAA,EAAkCA,EAAA2nC,GAAA3uC,OAAYgH,IAAA8I,GAAA6+B,GAAA3nC,GAAA4H,EAAe5H,GAAA2H,CAAI,MAAM,cAAAmB,GAAA,QAAAlB,GAA2B5H,EAAA2H,CAAI,MAAM,kCAAAmB,GAAA,QAAAlB,GAAiDkB,GAAA,OAAAlB,GAAY5H,EAAA2H,CAAI,MAAM,eAAAmB,GAAA,SAAAlB,GAA6B5H,EAAA2H,CAAI,MAAM,aAAAke,EAAAje,EAAAD,GAAqB3H,EAAAwlB,EAAA5d,EAAAD,GAAUmB,GAAA,UAAAlB,EAAe,MAAM,cAAA5H,EAAAumB,EAAA3e,EAAAD,EAAwB,MAAM,cAAAC,EAAA+d,eAA+BiiB,cAAAjgC,EAAAkgC,UAA0B7nC,EAAAxJ,MAAMmR,GAAIzO,MAAA,SAAe4P,GAAA,UAAAlB,EAAe,MAAM,gBAAAkf,EAAAlf,EAAAD,GAAwB3H,EACpf4mB,EAAAhf,EAAAD,GAAQmB,GAAA,UAAAlB,EAAe,MAAM,SAAA5H,EAAA2H,EAAYigB,EAAAnxB,EAAAuJ,EAAQ,IAAAsH,GAAAtH,CAAQ,KAAA4I,IAAAtB,GAAA,GAAAA,EAAAvF,eAAA6G,GAAA,CAAmC,GAAAjD,GAAA2B,EAAAsB,EAAW,WAAAA,EAAA8e,EAAA9f,EAAAjC,GAAA,4BAAAiD,GAAAjD,MAAAkyB,OAAA,aAAAlyB,GAAA0iC,GAAAzgC,EAAAjC,IAAA,aAAAiD,EAAA,gBAAAjD,IAAA,aAAAlP,GAAA,KAAAkP,IAAAyhB,EAAAxf,EAAAjC,GAAA,gBAAAA,IAAAyhB,EAAAxf,EAAA,GAAAjC,GAAA,mCAAAiD,GAAA,6BAAAA,GAAA,cAAAA,IAAAO,GAAApH,eAAA6G,GAAA,MAAAjD,GAAA,aAAAiD,GAAAE,GAAA,SAAAlB,GAAA,MAAAjC,GAAA8c,EAAA7a,EAAAgB,EAAAjD,EAAAmC,IAAwW,OAAArR,GAAU,YAAA0uB,EAAAvd,GAAmBue,EAAAve,EAAAD,KAC5e,MAAM,gBAAAwd,EAAAvd,GAAsBof,EAAApf,EAAM,MAAM,oBAAAD,EAAAzO,OAAA0O,EAAA5I,aAAA,WAAA0lB,EAAA/c,EAAAzO,OAAoE,MAAM,cAAA0O,EAAAigC,WAAAlgC,EAAAkgC,SAAsCj/B,EAAAjB,EAAAzO,MAAU,MAAA0P,EAAA4d,EAAA5e,IAAAD,EAAAkgC,SAAAj/B,MAAA,MAAAjB,EAAA+d,cAAAc,EAAA5e,IAAAD,EAAAkgC,SAAAlgC,EAAA+d,gBAA2F,MAAM,2BAAA1lB,GAAAqR,UAAAzJ,EAAAkgC,QAAArQ,IAAsDC,GAAAjhC,EAAAkR,KAAAM,EAAA8hB,OAAA,GAAsB,OAAA9hB,EAAAlB,MAAAkB,EAAA8hB,OAAA,KAA6B,WAAY,WAAAniB,GAAA,MAAAK,EAAAsgB,UAAA+f,GAAA1gC,EAAAK,EAAAL,EAAA04B,cAAA34B,OAAyD,CAAK,mBAAAA,IAAA,OAAAM,EAAAsgB,UAAA,KAAA7I,OAAA3X,EAAA,KACtbtR,GAAAgpC,GAAAG,GAAAhkC,SAAiB6jC,GAAAK,GAAAlkC,SAAeqlC,GAAAh5B,IAAAN,EAAAM,EAAAsgB,UAAA9xB,EAAAwR,EAAAq4B,cAAA34B,EAAA0wB,IAAApwB,EAAAN,EAAA4f,YAAA9wB,IAAAwR,EAAA8hB,OAAA,KAAApiB,GAAA,IAAAlR,EAAA6wB,SAAA7wB,IAAA2vB,eAAAnnB,eAAA0I,KAAA0wB,IAAApwB,IAAAsgB,UAAA5gB,GAA6J,WAAY,SAA+B,MAA/B4B,IAAAQ,IAAapC,EAAAM,EAAAgiB,cAAkB,QAAAhiB,EAAA8hB,QAAA9hB,EAAAyzB,MAAAjlC,EAAAwR,IAAuCN,EAAA,OAAAA,EAAWlR,KAAK,OAAAmR,EAAA,SAAAK,EAAAq4B,cAAAgG,UAAArF,GAAAh5B,GAAAxR,EAAA,OAAAmR,EAAAqiB,cAA2EtiB,IAAAlR,GAAA,OAAAwR,EAAAi3B,QAAA,OAAAt3B,QAAAK,EAAAq4B,cAAAiG,4BAAA,OAAAx8B,GAAAnO,SAAA,IAAAuP,QAAA,IAA2H,IAAAA,IAAA,IAAAA,QACre,GAAE,OAAAD,IAAA,eAAA+xB,KAAA,eAAAsL,KAAAC,GAAAt9B,GAAAzD,OAA0DE,GAAAlR,KAAAwR,EAAA8hB,OAAA,GAAmB,KAAY,cAAAmW,MAAAuH,GAAAx/B,GAAA,OAAAL,GAAAytB,GAAAptB,EAAAsgB,UAAA2D,eAAA,IAAsE,eAAAgP,IAAAjzB,GAAA,IAA0B,eAAAgxB,IAAAhxB,EAAApE,OAAAs1B,KAAA,IAAqC,SAA+B,GAA/B5vB,GAAAQ,IAAapC,EAAAM,EAAAgiB,cAAkB,OAAAtiB,EAAA,WAAyD,IAAjCiB,EAAA,QAAAX,EAAA8hB,OAAmBjiB,EAAAH,EAAAs/B,UAAc,OAAAn/B,EAAA,GAAAc,EAAA2+B,GAAA5/B,UAA0B,CAAK,OAAAwD,IAAA,OAAAvD,GAAA,QAAAA,EAAAmiB,OAAA,IAAAniB,EAAAK,EAAAoiB,MAAmD,OAAAziB,GAAS,CAAU,GAARE,EAAAu4B,GAAAz4B,GAAQ,OAAAE,EAAA,CACrV,IADkWG,EAAA8hB,OAAA,GAAYwd,GAAA5/B,MAASiB,EAAAd,EAAAk0B,YAAgB,OAAApzB,IAAAX,EAAA+zB,YAAApzB,EAAAX,EAAA8hB,OAAA,GAC/c,OAAApiB,EAAAi3B,aAAA32B,EAAA62B,YAAA,MAA0C72B,EAAA22B,WAAAj3B,EAAAi3B,WAA0Bj3B,EAAAlR,EAAIA,EAAAwR,EAAAoiB,MAAc,OAAA5zB,GAASmS,EAAAnS,EAAAmR,EAAAD,EAAAiB,EAAAmhB,OAAA,EAAAnhB,EAAAi2B,WAAA,KAAAj2B,EAAAk2B,YAAA,KAAAl2B,EAAAg2B,WAAA,KAAA92B,EAAAc,EAAAkhB,UAAA,OAAAhiB,GAAAc,EAAA0yB,WAAA,EAAA1yB,EAAA8yB,MAAA9zB,EAAAgB,EAAAyhB,MAAA,KAAAzhB,EAAA03B,cAAA,KAAA13B,EAAAqhB,cAAA,KAAArhB,EAAAozB,YAAA,KAAApzB,EAAA4yB,aAAA,KAAA5yB,EAAA2f,UAAA,OAAA3f,EAAA0yB,WAAAxzB,EAAAwzB,WAAA1yB,EAAA8yB,MAAA5zB,EAAA4zB,MAAA9yB,EAAAyhB,MAAAviB,EAAAuiB,MAAAzhB,EAAA03B,cAAAx4B,EAAAw4B,cAAA13B,EAAAqhB,cAAAniB,EAAAmiB,cAAArhB,EAAAozB,YAAAl0B,EAAAk0B,YAAApzB,EAAA/E,KAAAiE,EAAAjE,KAAA+D,EAAAE,EAAA0zB,aAC/F5yB,EAAA4yB,aAAA,OAAA5zB,EAAA,MAA8B8zB,MAAA9zB,EAAA8zB,MAAAD,aAAA7zB,EAAA6zB,eAA0ChlC,IAAA6zB,OAAiC,OAAnB9hB,IAAAuB,GAAA,EAAAA,GAAAnO,QAAA,GAAmBqM,EAAAoiB,MAAeziB,IAAA0iB,QAAY,OAAA3iB,EAAAy/B,MAAAh+B,KAAAq/B,KAAAxgC,EAAA8hB,OAAA,GAAAnhB,KAAA2+B,GAAA5/B,MAAAM,EAAAyzB,MAAA,cAAoE,CAAK,IAAA9yB,EAAA,GAAAhB,EAAAy4B,GAAAv4B,GAAA,OAAAF,GAA2B,GAAAK,EAAA8hB,OAAA,GAAAnhB,KAAAnS,EAAAmR,EAAAo0B,YAAA,OAAAvlC,IAAAwR,EAAA+zB,YAAAvlC;AAAAwR,EAAA8hB,OAAA,GAAAwd,GAAA5/B,MAAA,OAAAA,EAAAy/B,MAAA,WAAAz/B,EAAA0/B,WAAAv/B,EAAAgiB,YAAA+W,GAAA,MAAA54B,KAAA22B,WAAAj3B,EAAAi3B,WAAA,OAAA32B,MAAA42B,WAAA,eAAkN,GAAAz1B,KAAAzB,EAAAu/B,mBAAAuB,IAAA,aAAAhyC,IAAAwR,EAAA8hB,OAC1b,GAAAnhB,KAAA2+B,GAAA5/B,MAAAM,EAAAyzB,MAAA,SAAmC/zB,GAAAq/B,aAAAl/B,EAAAwiB,QAAAriB,EAAAoiB,MAAApiB,EAAAoiB,MAAAviB,IAAArR,EAAAkR,EAAAw/B,KAAA,OAAA1wC,IAAA6zB,QAAAxiB,EAAAG,EAAAoiB,MAAAviB,EAAAH,EAAAw/B,KAAAr/B,GAA+F,cAAAH,EAAAy/B,MAAA3wC,EAAAkR,EAAAy/B,KAAAz/B,EAAAs/B,UAAAxwC,EAAAkR,EAAAy/B,KAAA3wC,EAAA6zB,QAAA3iB,EAAAi3B,WAAA32B,EAAA22B,WAAAj3B,EAAAu/B,mBAAA99B,KAAA3S,EAAA6zB,QAAA,KAAAriB,EAAA8B,GAAAnO,QAAA4M,GAAAuB,GAAAnB,EAAA,EAAAX,EAAA,IAAAA,GAAAxR,GAAA,IAAqK,uBAAAiyC,MAAA,OAAA9gC,GAAA,OAAAA,EAAAqiB,gBAAA,OAAAhiB,EAAAgiB,gBAAA,kCAAAtiB,EAAAu3B,OAAAj3B,EAAA8hB,OAAA,QAAqJ,KAAArK,OAAA3X,EAAA,IAAAE,EAAArJ,MAC5b,QAAA+pC,IAAA/gC,GAAe,OAAAA,EAAAhJ,KAAc,OAAAq6B,GAAArxB,EAAA/D,OAAAs1B,IAAwB,IAAAlxB,GAAAL,EAAAmiB,KAAc,aAAA9hB,GAAAL,EAAAmiB,MAAA9hB,QAAA,GAAAL,GAAA,IAA0C,QAAqC,GAArCs4B,KAAY32B,GAAAR,IAAKQ,GAAA7B,IAAKy5B,KAAKl5B,EAAAL,EAAAmiB,MAAU,QAAA9hB,GAAA,KAAAyX,OAAA3X,EAAA,KAAqD,OAAnBH,GAAAmiB,MAAA9hB,QAAA,GAAmBL,CAAS,cAAAw4B,IAAAx4B,GAAA,IAAyB,eAAA2B,IAAAQ,IAAA9B,EAAAL,EAAAmiB,MAAA,KAAA9hB,GAAAL,EAAAmiB,MAAA9hB,QAAA,GAAAL,GAAA,IAAiE,eAAA2B,IAAAQ,IAAA,IAAyB,cAAAm2B,MAAA,IAAwB,eAAAhF,IAAAtzB,GAAA,IAA0B,uBAAA8gC,MAAA,IAAiC,sBACtZ,QAAAE,IAAAhhC,EAAAK,GAAiB,IAAI,GAAAxR,GAAA,GAAAkR,EAAAM,CAAa,GAAAxR,IAAA8sB,EAAA5b,OAAAiI,aAAuBjI,EAAS,IAAA3H,GAAAvJ,EAAQ,MAAAmS,GAAS5I,EAAA,6BAAA4I,EAAAigC,QAAA,KAAAjgC,EAAAoa,MAAsD,OAAO9pB,MAAA0O,EAAAzF,OAAA8F,EAAA+a,MAAAhjB,GAA0B,QAAA8oC,IAAAlhC,EAAAK,GAAiB,IAAIvF,QAAAC,MAAAsF,EAAA/O,OAAuB,MAAAzC,GAASsyC,WAAA,WAAsB,KAAAtyC,MAA2D,QAAAuyC,IAAAphC,EAAAK,EAAAxR,GAAmBA,EAAA+lC,MAAA/lC,GAAWA,EAAAmI,IAAA,EAAQnI,EAAAkmC,SAAW53B,QAAA,KAAc,IAAA4C,GAAAM,EAAA/O,KAA8D,OAAhDzC,GAAAmmC,SAAA,WAAsBqM,WAAAC,GAAAvhC,GAAiBmhC,GAAAlhC,EAAAK,IAASxR,EAC7a,QAAA0yC,IAAAvhC,EAAAK,EAAAxR,GAAmBA,EAAA+lC,MAAA/lC,GAAWA,EAAAmI,IAAA,CAAQ,IAAA+I,GAAAC,EAAA/D,KAAAqiC,wBAAsC,sBAAAv+B,GAAA,CAA0B,GAAA3H,GAAAiI,EAAA/O,KAAczC,GAAAkmC,QAAA,WAA6B,MAARmM,IAAAlhC,EAAAK,GAAQN,EAAA3H,IAAa,GAAA4I,GAAAhB,EAAA2gB,SAAsP,OAApO,QAAA3f,GAAA,kBAAAA,GAAAwgC,oBAAA3yC,EAAAmmC,SAAA,WAA0E,kBAAAj1B,KAAA,OAAA0hC,MAAA,GAAA7Q,MAAAt5B,OAAAmqC,GAAAp0B,IAAA/V,MAAA4pC,GAAAlhC,EAAAK,GAA2E,IAAAxR,GAAAwR,EAAA+a,KAAc9jB,MAAAkqC,kBAAAnhC,EAAA/O,OAAgCowC,eAAA,OAAA7yC,IAAA,OAAiCA,EACpZ,QAAA8yC,IAAA3hC,GAAe,GAAAK,GAAAL,EAAAb,GAAY,WAAAkB,EAAA,qBAAAA,GAAA,IAAyCA,EAAA,MAAQ,MAAAxR,GAAS+yC,GAAA5hC,EAAAnR,OAAQwR,GAAArM,QAAA,KAAoB,QAAA6tC,IAAA7hC,EAAAK,GAAiB,OAAAA,EAAArJ,KAAc,qCAAsC,eAAAqJ,EAAA8hB,OAAA,OAAAniB,EAAA,CAAiC,GAAAnR,GAAAmR,EAAA04B,cAAA34B,EAAAC,EAAAqiB,aAAwCriB,GAAAK,EAAAsgB,UAActgB,EAAAL,EAAAw2B,wBAAAn2B,EAAAuZ,cAAAvZ,EAAApE,KAAApN,EAAAokC,GAAA5yB,EAAApE,KAAApN,GAAAkR,GAAqEC,EAAA8hC,oCAAAzhC,EAAwC,MAAO,QAAkD,YAAlD,IAAAA,EAAA8hB,OAAA+N,GAAA7vB,EAAAsgB,UAAA2D,eAAyD,qCAAoC,KAAAxM,OAAA3X,EAAA,MAC9d,QAAA4hC,IAAA/hC,EAAAK,EAAAxR,GAAmB,OAAAA,EAAAmI,KAAc,+BAA4E,GAA5EqJ,EAAAxR,EAAAulC,YAA+C/zB,EAAA,OAAAA,IAAA22B,WAAA,KAA6B,OAAA32B,EAAA,CAAaL,EAAAK,IAAA1P,IAAW,IAAG,UAAAqP,EAAAhJ,KAAA,CAAkB,GAAA+I,GAAAC,EAAAtM,MAAesM,GAAA+7B,QAAAh8B,IAAcC,IAAArP,WAASqP,IAAAK,GAA0D,GAA7CA,EAAAxR,EAAAulC,YAAgB/zB,EAAA,OAAAA,IAAA22B,WAAA,KAA6B,OAAA32B,EAAA,CAAaL,EAAAK,IAAA1P,IAAW,IAAG,GAAAyH,GAAA4H,CAAQD,GAAA3H,EAAAzH,KAASyH,IAAApB,IAAQ,OAAAoB,IAAA,OAAAA,KAAA4pC,GAAAnzC,EAAAmR,GAAAiiC,GAAApzC,EAAAmR,IAAwCA,EAAAD,QAAIC,IAAAK,GAAa,MAAO,QACjR,MADiRL,GAAAnR,EAAA8xB,UAAqB,EAAA9xB,EAAAszB,QAAA,OAAA9hB,EAAAL,EAAAjD,qBAAAgD,EAAAlR,EAAA+qB,cAAA/qB,EAAAoN,KAAAoE,EAAAq4B,cAAAzF,GAAApkC,EAAAoN,KAAAoE,EAAAq4B,eAAA14B,EAAA/C,mBAAA8C,EACnYM,EAAAgiB,cAAAriB,EAAA8hC,uCAAyDzhC,EAAAxR,EAAAulC,iBAAgB,OAAA/zB,GAAAi1B,GAAAzmC,EAAAwR,EAAAL,GAA2B,QAAuB,GAAvBK,EAAAxR,EAAAulC,YAAuB,OAAA/zB,EAAA,CAAoB,GAAPL,EAAA,KAAO,OAAAnR,EAAA4zB,MAAA,OAAA5zB,EAAA4zB,MAAAzrB,KAAsC,OAAAgJ,EAAAnR,EAAA4zB,MAAA9B,SAA2B,MAAM,QAAA3gB,EAAAnR,EAAA4zB,MAAA9B,UAA2B2U,GAAAzmC,EAAAwR,EAAAL,GAAU,MAAO,QAAgF,MAAhFA,GAAAnR,EAAA8xB,eAAqB,OAAAtgB,GAAA,EAAAxR,EAAAszB,OAAA2N,GAAAjhC,EAAAoN,KAAApN,EAAA6pC,gBAAA14B,EAAAkiC,QAAkE,cAAc,cAAc,eAAe,SACpY,YADoY,OAAArzC,EAAAwzB,gBAAAxzB,IAAAqzB,UAAA,OAAArzB,QAAAwzB,cAAA,OAAAxzB,QAAAyzB,WAAA,OAAAzzB,GAAAq2B,GAAAr2B,MAC7X,wDAAuD,KAAAipB,OAAA3X,EAAA,MAC9D,QAAAgiC,IAAAniC,EAAAK,GAAiB,OAAAxR,GAAAmR,IAAa,CAAE,OAAAnR,EAAAmI,IAAA,CAAc,GAAA+I,GAAAlR,EAAA8xB,SAAkB,IAAAtgB,EAAAN,IAAAoJ,MAAA,kBAAApJ,GAAAggB,YAAAhgB,EAAAggB,YAAA,8BAAAhgB,EAAAsJ,QAAA,WAA8G,CAAKtJ,EAAAlR,EAAA8xB,SAAc,IAAAvoB,GAAAvJ,EAAA6pC,cAAAvvB,KAA4B/Q,GAAA,SAAAA,GAAA,OAAAA,KAAA+B,eAAA,WAAA/B,EAAAiR,QAAA,KAAmEtJ,EAAAoJ,MAAAE,QAAAuW,EAAA,UAAAxnB,QAAiC,QAAAvJ,EAAAmI,IAAAnI,EAAA8xB,UAAAhB,UAAAtf,EAAA,GAAAxR,EAAA6pC,kBAA6D,UAAA7pC,EAAAmI,KAAA,KAAAnI,EAAAmI,KAAA,OAAAnI,EAAAwzB,eAAAxzB,IAAAmR,IAAA,OAAAnR,EAAA4zB,MAAA,CAAiF5zB,EAAA4zB,MAAAza,OAAAnZ,EAAiBA,IAAA4zB,KAAU,UAAS,GAAA5zB,IACnfmR,EAAA,KAAQ,MAAK,OAAAnR,EAAA6zB,SAAiB,CAAE,UAAA7zB,EAAAmZ,QAAAnZ,EAAAmZ,SAAAhI,EAAA,MAAwCnR,KAAAmZ,OAAWnZ,EAAA6zB,QAAA1a,OAAAnZ,EAAAmZ,OAA0BnZ,IAAA6zB,SAC7G,QAAA0f,IAAApiC,EAAAK,GAAiB,GAAAgiC,IAAA,kBAAAA,IAAAC,qBAAA,IAAuDD,GAAAC,qBAAAC,GAAAliC,GAA8B,MAAAW,IAAU,OAAAX,EAAArJ,KAAc,uCAAuD,GAAvDgJ,EAAAK,EAAA+zB,YAAuD,OAAAp0B,QAAAg3B,WAAA,OAAAh3B,GAAA,CAAwC,GAAAnR,GAAAmR,IAAArP,IAAe,IAAG,GAAAoP,GAAAlR,EAAAuJ,EAAA2H,EAAAg8B,OAA4B,IAARh8B,IAAA/I,IAAQ,SAAAoB,EAAA,UAAA2H,GAAAiiC,GAAA3hC,EAAAxR,OAAmC,CAAKkR,EAAAM,CAAI,KAAIjI,IAAI,MAAA4I,GAAS4gC,GAAA7hC,EAAAiB,IAASnS,IAAA8B,WAAS9B,IAAAmR,GAAa,KAAM,QAA2B,GAA3B2hC,GAAAthC,GAAaL,EAAAK,EAAAsgB,UAAc,kBAAA3gB,GAAA3C,qBAAA,IAAkD2C,EAAA9D,MAAAmE,EAAAq4B,cAAA14B,EAAA61B,MAAAx1B,EAAAgiB,cAAAriB,EAAA3C,uBAAyE,MAAA2D,GAAS4gC,GAAAvhC,EAC5gBW,GAAG,KAAM,QAAA2gC,GAAAthC,EAAa,MAAM,QAAAmiC,GAAAxiC,EAAAK,IAAgB,QAAAoiC,IAAAziC,GAAeA,EAAAkiB,UAAA,KAAiBliB,EAAAyiB,MAAA,KAAaziB,EAAA4zB,aAAA,KAAoB5zB,EAAAk3B,YAAA,KAAmBl3B,EAAAg3B,WAAA,KAAkBh3B,EAAA04B,cAAA,KAAqB14B,EAAAqiB,cAAA,KAAqBriB,EAAA+4B,aAAA,KAAoB/4B,EAAAgI,OAAA,KAAchI,EAAAo0B,YAAA,KAAmB,QAAAsO,IAAA1iC,GAAe,WAAAA,EAAAhJ,KAAA,IAAAgJ,EAAAhJ,KAAA,IAAAgJ,EAAAhJ,IAChQ,QAAA2rC,IAAA3iC,GAAeA,EAAA,CAAG,OAAAK,GAAAL,EAAAgI,OAAmB,OAAA3H,GAAS,CAAE,GAAAqiC,GAAAriC,GAAA,KAAAL,EAAiBK,KAAA2H,OAAW,KAAA8P,OAAA3X,EAAA,MAAqB,GAAAtR,GAAAwR,CAAsB,QAAdA,EAAAxR,EAAA8xB,UAAc9xB,EAAAmI,KAAc,UAAA+I,KAAgB,MAAM,QAAAM,IAAAikB,cAAyBvkB,IAAK,MAAM,QAAAM,IAAAikB,cAAyBvkB,IAAK,MAAM,cAAA+X,OAAA3X,EAAA,MAA6B,GAAAtR,EAAAszB,QAAA3C,EAAAnf,EAAA,IAAAxR,EAAAszB,WAAoCniB,GAAAK,EAAA,IAAAxR,EAAAmR,IAAa,CAAE,KAAK,OAAAnR,EAAA6zB,SAAiB,CAAE,UAAA7zB,EAAAmZ,QAAA06B,GAAA7zC,EAAAmZ,QAAA,CAAkCnZ,EAAA,IAAO,MAAAmR,GAAQnR,IAAAmZ,OAAqC,IAA1BnZ,EAAA6zB,QAAA1a,OAAAnZ,EAAAmZ,OAA0BnZ,IAAA6zB,QAAgB,IAAA7zB,EAAAmI,KAAA,IAAAnI,EAAAmI,KAAA,KAAAnI,EAAAmI,KAAiC,CAAE,KAAAnI,EAAAszB,MAAA,QAAA9hB,EAAwB,WAC5exR,EAAA4zB,OAAA,IAAA5zB,EAAAmI,IAAA,QAAAqJ,EAA8BxR,GAAA4zB,MAAAza,OAAAnZ,MAAA4zB,MAAgC,OAAA5zB,EAAAszB,OAAA,CAAiBtzB,IAAA8xB,SAAc,MAAA3gB,IAASD,EAAA6iC,GAAA5iC,EAAAnR,EAAAwR,GAAAwiC,GAAA7iC,EAAAnR,EAAAwR,GACtG,QAAAuiC,IAAA5iC,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAC,EAAAhJ,IAAAoB,EAAA,IAAA2H,GAAA,IAAAA,CAA2B,IAAA3H,EAAA4H,EAAA5H,EAAA4H,EAAA2gB,UAAA3gB,EAAA2gB,UAAApW,SAAAlK,EAAA,IAAAxR,EAAA6wB,SAAA7wB,EAAAkH,WAAAgC,aAAAiI,EAAAK,GAAAxR,EAAAkJ,aAAAiI,EAAAK,IAAA,IAAAxR,EAAA6wB,UAAArf,EAAAxR,EAAAkH,WAAAsK,EAAAtI,aAAAiI,EAAAnR,KAAAwR,EAAAxR,EAAAwR,EAAArK,YAAAgK,IAAAnR,IAAAi0C,oBAAA,OAAAj0C,GAAA,SAAAA,GAAA,OAAAwR,EAAA6/B,UAAA7/B,EAAA6/B,QAAArQ,SAA0Q,QAAA9vB,IAAAC,IAAAyiB,MAAA,OAAAziB,GAAA,IAAA4iC,GAAA5iC,EAAAK,EAAAxR,GAAAmR,IAAA0iB,QAA8D,OAAA1iB,GAAS4iC,GAAA5iC,EAAAK,EAAAxR,GAAAmR,IAAA0iB,QAC/X,QAAAmgB,IAAA7iC,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAC,EAAAhJ,IAAAoB,EAAA,IAAA2H,GAAA,IAAAA,CAA2B,IAAA3H,EAAA4H,EAAA5H,EAAA4H,EAAA2gB,UAAA3gB,EAAA2gB,UAAApW,SAAAlK,EAAAxR,EAAAkJ,aAAAiI,EAAAK,GAAAxR,EAAAmH,YAAAgK,OAAiF,QAAAD,IAAAC,IAAAyiB,MAAA,OAAAziB,GAAA,IAAA6iC,GAAA7iC,EAAAK,EAAAxR,GAAAmR,IAAA0iB,QAA8D,OAAA1iB,GAAS6iC,GAAA7iC,EAAAK,EAAAxR,GAAAmR,IAAA0iB,QACtM,QAAA8f,IAAAxiC,EAAAK,GAAiB,OAAAjI,GAAA4I,EAAAnS,EAAAwR,EAAAN,OAAsB,CAAE,IAAAA,EAAA,CAAOA,EAAAlR,EAAAmZ,MAAWhI,GAAA,OAAQ,CAAE,UAAAD,EAAA,KAAA+X,OAAA3X,EAAA,KAA8C,QAAd/H,EAAA2H,EAAA4gB,UAAc5gB,EAAA/I,KAAc,OAAAgK,IAAY,MAAAhB,EAAQ,QAAA5H,IAAAksB,cAAyBtjB,IAAK,MAAAhB,EAAQ,QAAA5H,IAAAksB,cAAyBtjB,IAAK,MAAAhB,GAAQD,IAAAiI,OAAWjI,KAAK,OAAAlR,EAAAmI,KAAA,IAAAnI,EAAAmI,IAAA,CAAyBgJ,EAAA,OAAAE,GAAAF,EAAAN,EAAA7Q,EAAAkP,EAAA2B,IAAuB,GAAA0iC,GAAAliC,EAAAnC,GAAA,OAAAA,EAAA0kB,OAAA,IAAA1kB,EAAA/G,IAAA+G,EAAA0kB,MAAAza,OAAAjK,MAAA0kB,UAAiE,CAAK,GAAA1kB,IAAA2B,EAAA,KAAAM,EAAiB,MAAK,OAAAjC,EAAA2kB,SAAiB,CAAE,UAAA3kB,EAAAiK,QAAAjK,EAAAiK,SAAAtI,EAAA,KAAAM,EAAyCjC,KAAAiK,OAAWjK,EAAA2kB,QAAA1a,OAAAjK,EAAAiK,OAA0BjK,IAAA2kB,QAAY1hB,GAAAd,EAAA9H,EAAAsH,EAAA7Q,EAAA8xB,UAC1e,IAAAzgB,EAAAwf,SAAAxf,EAAAnK,WAAAuC,YAAAoH,GAAAQ,EAAA5H,YAAAoH,IAAAtH,EAAAE,YAAAzJ,EAAA8xB,eAAwF,QAAA9xB,EAAAmI,KAAmB,UAAAnI,EAAA4zB,MAAA,CAAmBrqB,EAAAvJ,EAAA8xB,UAAA2D,cAA4BtjB,KAAKnS,EAAA4zB,MAAAza,OAAAnZ,EAAiBA,IAAA4zB,KAAU,eAAU,IAAA2f,GAAApiC,EAAAnR,GAAA,OAAAA,EAAA4zB,MAAA,CAAgC5zB,EAAA4zB,MAAAza,OAAAnZ,EAAiBA,IAAA4zB,KAAU,UAAS,GAAA5zB,IAAAwR,EAAA,KAAe,MAAK,OAAAxR,EAAA6zB,SAAiB,CAAE,UAAA7zB,EAAAmZ,QAAAnZ,EAAAmZ,SAAA3H,EAAA,MAAwCxR,KAAAmZ,OAAW,IAAAnZ,EAAAmI,MAAA+I,MAAkBlR,EAAA6zB,QAAA1a,OAAAnZ,EAAAmZ,OAA0BnZ,IAAA6zB,SAC9Y,QAAAqgB,IAAA/iC,EAAAK,GAAiB,OAAAA,EAAArJ,KAAc,0CAAAnI,GAAAwR,EAAA+zB,WAAwF,IAA7BvlC,EAAA,OAAAA,IAAAmoC,WAAA,KAA6B,OAAAnoC,EAAA,CAAa,GAAAkR,GAAAlR,IAAA8B,IAAe,WAAAoP,EAAA/I,OAAAgJ,EAAAD,EAAAg8B,QAAAh8B,EAAAg8B,QAAA,gBAAA/7B,QAAAD,IAAApP,WAA0EoP,IAAAlR,GAAa,MAAO,cAAc,QAAqB,GAArBA,EAAAwR,EAAAsgB,UAAqB,MAAA9xB,EAAA,CAAYkR,EAAAM,EAAAq4B,aAAkB,IAAAtgC,GAAA,OAAA4H,IAAA04B,cAAA34B,CAAiCC,GAAAK,EAAApE,IAAS,IAAA+E,GAAAX,EAAA+zB,WAAuC,IAAnB/zB,EAAA+zB,YAAA,KAAmB,OAAApzB,EAAA,CAA4F,IAA/EnS,EAAA6hC,IAAA3wB,EAAQ,UAAAC,GAAA,UAAAD,EAAA9D,MAAA,MAAA8D,EAAAtP,MAAA2tB,EAAAvvB,EAAAkR,GAAqDmgB,EAAAlgB,EAAA5H,GAAQiI,EAAA6f,EAAAlgB,EAAAD,GAAU3H,EAAA,EAAQA,EAAA4I,EAAA5P,OAAWgH,GAClf,GAAG,GAAA8H,GAAAc,EAAA5I,GAAAsH,EAAAsB,EAAA5I,EAAA,EAAoB,WAAA8H,EAAA4f,EAAAjxB,EAAA6Q,GAAA,4BAAAQ,EAAAugC,GAAA5xC,EAAA6Q,GAAA,aAAAQ,EAAAsf,EAAA3wB,EAAA6Q,GAAAmb,EAAAhsB,EAAAqR,EAAAR,EAAAW,GAA6F,OAAAL,GAAU,YAAAqe,EAAAxvB,EAAAkR,EAAqB,MAAM,gBAAAof,EAAAtwB,EAAAkR,EAAwB,MAAM,cAAAC,EAAAnR,EAAAkvB,cAAAiiB,YAAAnxC,EAAAkvB,cAAAiiB,cAAAjgC,EAAAkgC,SAAAj/B,EAAAjB,EAAAzO,MAAA,MAAA0P,EAAA4d,EAAA/vB,IAAAkR,EAAAkgC,SAAAj/B,MAAAhB,MAAAD,EAAAkgC,WAAA,MAAAlgC,EAAA+d,aAAAc,EAAA/vB,IAAAkR,EAAAkgC,SAAAlgC,EAAA+d,iBAAAc,EAAA/vB,IAAAkR,EAAAkgC,SAAAlgC,EAAAkgC,YAAA,UAAsP,MAAO,kBAAA5/B,EAAAsgB,UAAA,KAAA7I,OAAA3X,EAAA,KACpa,aADqdE,EAAAsgB,UAAAhB,UACretf,EAAAq4B,cAAuB,QAAmE,MAAnE7pC,GAAAwR,EAAAsgB,eAAqB9xB,EAAAw1B,UAAAx1B,EAAAw1B,WAAAa,GAAAr2B,EAAAy1B,gBAAqD,eAAe,SAA8D,MAA9D,QAAAjkB,EAAAgiB,gBAAA2gB,GAAAxhC,KAAA2gC,GAAA9hC,EAAAoiB,eAAwDwgB,IAAA5iC,EAAa,SAAc,WAAd4iC,IAAA5iC,EAAqB,eAAe,iBAA6C,WAA7C8hC,IAAA9hC,EAAA,OAAAA,EAAAgiB,eAAoD,KAAAvK,OAAA3X,EAAA,MAAqB,QAAA8iC,IAAAjjC,GAAe,GAAAK,GAAAL,EAAAo0B,WAAoB,WAAA/zB,EAAA,CAAaL,EAAAo0B,YAAA,IAAmB,IAAAvlC,GAAAmR,EAAA2gB,SAAkB,QAAA9xB,MAAAmR,EAAA2gB,UAAA,GAAAuiB,KAAiC7iC,EAAApL,QAAA,SAAAoL,GAAsB,GAAAN,GAAAojC,GAAAloC,KAAA,KAAA+E,EAAAK,EAAwBxR,GAAA4X,IAAApG,KAAAxR,EAAAwe,IAAAhN,KAAAkO,KAAAxO,SACtc,QAAAqjC,IAAApjC,EAAAK,GAAiB,cAAAL,QAAAqiB,cAAA,OAAAriB,GAAA,OAAAA,EAAAsiB,cAAAjiB,IAAAgiB,cAAA,OAAAhiB,GAAA,OAAAA,EAAAiiB,YAA2R,QAAA+gB,MAAcxC,GAAAr/B,KAAA,IAA+H,QAAAy7B,MAAc,eAAAv7B,IAAAF,UAAA8hC,SAAA9hC,KACvc,QAAAk6B,IAAA17B,GAAwB,GAATA,IAAAs3B,KAAS,OAAAt3B,GAAA,QAAsB,WAAAA,GAAA,YAAA+xB,KAAA,GAAkD,IAAhB,IAAAwR,QAAAC,IAAgB,IAAAC,GAAAzG,WAAA,CAAsB,IAAA0G,QAAA,OAAAC,MAAA3d,aAAA,GAAyChmB,EAAAujC,EAAK,IAAAljC,GAAA,SAAAqjC,EAAqE,OAAnDrjC,OAAM,IAAAA,IAAAL,EAAA,SAAAA,EAAAK,EAAAL,KAAA,IAAAK,MAAA,OAA6CA,EAAmE,MAA1DL,GAAA+xB,KAAO,OAAArwB,KAAA,KAAA1B,IAAAwmB,GAAA,GAAA+c,KAAAvjC,EAAA6lB,GAAA7lB,KAAAwmB,GAAAxmB,EAAAujC,KAAmDvjC,EAC5S,QAAAk9B,IAAAl9B,EAAAK,EAAAxR,GAAmB,MAAA+0C,GAAA,KAAAA,IAAA,EAAAC,GAAA,KAAA/rB,MAAA3X,EAAA,KAAoD,IAAVH,EAAA8jC,GAAA9jC,EAAAK,GAAU,OAAAL,EAAA,WAAwB2mB,IAAA3mB,EAAAK,EAAAxR,GAAUmR,IAAAsD,KAAAq9B,IAAAtgC,EAAA,IAAAkD,IAAAq9B,GAAA5gC,EAAAH,IAA8B,IAAAE,GAAAgyB,IAAW,KAAA1xB,EAAA,OAAAqB,KAAA,QAAAA,IAAAqiC,GAAA/jC,IAAAgkC,GAAAhkC,EAAAnR,GAAA,IAAA6S,KAAA2hC,KAAA1Q,QAAA,OAAAjxB,KAAA,KAAA3B,GAAA,KAAAA,IAAA,OAAAkkC,MAAA,GAAArT,MAAA5wB,IAAAikC,GAAA52B,IAAArN,IAAAgkC,GAAAhkC,EAAAnR,IAA0I80C,GAAA3jC,EAAK,QAAA8jC,IAAA9jC,EAAAK,GAAiBL,EAAA8zB,OAAAzzB,CAAW,IAAAxR,GAAAmR,EAAAkiB,SAA6C,KAA3B,OAAArzB,MAAAilC,OAAAzzB,GAAuBxR,EAAAmR,EAAIA,IAAAgI,OAAe,OAAAhI,GAASA,EAAA0zB,YAAArzB,EAAAxR,EAAAmR,EAAAkiB,UAAA,OAAArzB,MAAA6kC,YAAArzB,GAAAxR,EAAAmR,MAAAgI,MAA0E,YAAAnZ,EAAAmI,IAAAnI,EAAA8xB,UAAA,KAC5c,QAAAqjB,IAAAhkC,EAAAK,GAAiB,OAAAxR,GAAAmR,EAAAkkC,aAAAnkC,EAAAC,EAAAkmB,eAAA9tB,EAAA4H,EAAAmmB,YAAAnlB,EAAAhB,EAAAmkC,gBAAAjkC,EAAAF,EAAAgmB,aAAiG,EAAA9lB,GAAI,CAAE,GAAAR,GAAA,GAAA0mB,GAAAlmB,GAAAnC,EAAA,GAAA2B,EAAAgB,EAAAM,EAAAtB,EAA6B,SAAAgB,GAAW,QAAA3C,EAAAgC,IAAA,KAAAhC,EAAA3F,GAAA,CAAyBsI,EAAAL,EAAIulB,GAAA7nB,EAAM,IAAAnE,GAAAqH,EAAQD,GAAAtB,GAAA,IAAA9F,EAAA8G,EAAA,OAAA9G,EAAA8G,EAAA,YAAgCA,IAAAL,IAAAL,EAAAimB,cAAAloB,EAA+BmC,KAAAnC,EAA4B,GAAtBgC,EAAAgmB,GAAA/lB,MAAAsD,GAAAzD,GAAA,GAAkBQ,EAAAY,GAAI,IAAAlB,EAAA,OAAAlR,QAAAu1C,IAAAvR,GAAAhkC,GAAAmR,EAAAkkC,aAAA,KAAAlkC,EAAAqkC,iBAAA,OAA4E,CAAK,UAAAx1C,EAAA,CAAa,GAAAmR,EAAAqkC,mBAAAhkC,EAAA,MAAiCxR,KAAAu1C,IAAAvR,GAAAhkC,GAAc,KAAAwR,GAAAxR,EAAAk1C,GAAA9oC,KAAA,KAAA+E,GAAA,OAAAgzB,QAAAnkC,GAAA+jC,GAAAF,GAAAT,GAAAa,KAAAE,GAAAh7B,KAAAnJ,GACnbA,EAAAu1C,IAAA,KAAA/jC,EAAAxR,EAAA4jC,GAAA,GAAAsR,GAAA9oC,KAAA,KAAA+E,KAAAnR,EAAAi3B,GAAAzlB,GAAAxR,EAAA4jC,GAAA5jC,EAAAy1C,GAAArpC,KAAA,KAAA+E,KAAwEA,EAAAqkC,iBAAAhkC,EAAqBL,EAAAkkC,aAAAr1C,GAC7F,QAAAy1C,IAAAtkC,GAA6B,GAAdsjC,MAAMI,GAAAH,GAAA,EAAQ,QAAA7hC,IAAA,KAAAoW,OAAA3X,EAAA,KAAkC,IAAAE,GAAAL,EAAAkkC,YAAqB,IAAAK,MAAAvkC,EAAAkkC,eAAA7jC,EAAA,WAAwC,IAAAxR,GAAAk3B,GAAA/lB,MAAAsD,GAAAzD,GAAA,EAAsB,QAAAhR,EAAA,WAAqB,IAAAkR,GAAAlR,EAAQuJ,EAAAsJ,EAAQA,KAAA,EAAM,IAAAV,GAAAwjC,IAAwC,KAA7BlhC,KAAAtD,GAAAH,KAAAE,IAAAsjC,KAAAoB,GAAAzkC,EAAAD,MAA6B,IAAO2kC,IAAK,OAAM,MAAAhlC,GAASilC,GAAA3kC,EAAAN,GAAqE,GAApDwzB,KAAK0R,GAAA5wC,QAAAgN,EAAaU,GAAAtJ,EAAI,OAAAgK,GAAArC,EAAA,GAAAuD,GAAA,KAAAzD,GAAA,EAAAE,EAAAwD,IAA8B,KAAAigC,GAAA7C,IAAA8D,GAAAzkC,EAAA,OAAuB,QAAAD,EAAA,CAAuG,GAAxF,IAAAA,IAAA2B,IAAA,GAAA1B,EAAAqkB,UAAArkB,EAAAqkB,WAAA6L,GAAAlwB,EAAAskB,gBAAAz1B,EAAA03B,GAAAvmB,GAAA,IAAAnR,IAAAkR,EAAA8kC,GAAA7kC,EAAAnR,KAAwF,IAAAkR,EAAA,KAAAM,GAAAykC,GAAAL,GAAAzkC,EAAA,GAAA4gC,GAAA5gC,EAAAnR,GAAAm1C,GAAAhkC,EAAAwB,MAAAnB,CAC7Z,QAD6cL,EAAA+kC,aACnf/kC,EAAAhM,QAAAkuB,UAAoBliB,EAAAglC,cAAAn2C,EAAkBkR,GAAU,mBAAA+X,OAAA3X,EAAA,KAAkC,QAAA8kC,GAAAjlC,EAAa,MAAM,QAAe,GAAf4gC,GAAA5gC,EAAAnR,IAAe,SAAAA,SAAAkR,EAAAijC,GAAA,IAAAxhC,KAAA,GAAAzB,GAAA,CAA0C,OAAAgmB,GAAA/lB,EAAA,QAAwC,IAAnB5H,EAAA4H,EAAAkmB,gBAAmB9tB,EAAAvJ,OAAA,CAAcouC,KAAKj9B,EAAAmmB,aAAAnmB,EAAAkmB,eAAA9tB,CAAkC,OAAM4H,EAAAklC,cAAAC,GAAAF,GAAAhqC,KAAA,KAAA+E,GAAAD,EAAsC,OAAMklC,GAAAjlC,EAAM,MAAM,QAAe,GAAf4gC,GAAA5gC,EAAAnR,IAAe,QAAAA,OAAA,KAAwC,KAAfkR,EAAAC,EAAA4mB,WAAexuB,KAAS,EAAAvJ,GAAI,CAAE,GAAAqR,GAAA,GAAAkmB,GAAAv3B,EAAemS,GAAA,GAAAd,EAAOA,EAAAH,EAAAG,GAAOA,EAAA9H,MAAA8H,GAAWrR,IAAAmS,EAC7Y,GADmZnS,EAAAuJ,EAAIvJ,EAAA2S,KAAA3S,EAAQA,GAAA,IAAAA,EAAA,QAAAA,EAAA,SAAAA,EAAA,UAAAA,EAAA,SAAAA,EAAA,SACzbA,EAAA,UAAAu2C,GAAAv2C,EAAA,OAAAA,EAA0B,GAAAA,EAAA,CAASmR,EAAAklC,cAAAC,GAAAF,GAAAhqC,KAAA,KAAA+E,GAAAnR,EAAsC,OAAMo2C,GAAAjlC,EAAM,MAAM,QAAAilC,GAAAjlC,EAAa,MAAM,cAAA8X,OAAA3X,EAAA,OAAwC,MAAV6jC,IAAAhkC,EAAAwB,MAAUxB,EAAAkkC,eAAA7jC,EAAAikC,GAAArpC,KAAA,KAAA+E,GAAA,KAA+C,QAAA4gC,IAAA5gC,EAAAK,GAAqE,IAApDA,IAAAglC,GAAOhlC,IAAAsgC,GAAO3gC,EAAAkmB,gBAAA7lB,EAAoBL,EAAAmmB,cAAA9lB,EAAkBL,IAAAmkC,gBAAwB,EAAA9jC,GAAI,CAAE,GAAAxR,GAAA,GAAAu3B,GAAA/lB,GAAAN,EAAA,GAAAlR,CAAsBmR,GAAAnR,MAAQwR,IAAAN,GACtU,QAAAgkC,IAAA/jC,GAAe,WAAA0B,IAAA,KAAAoW,OAAA3X,EAAA,KAAuC,IAALokC,KAAKvkC,IAAAsD,IAAA,KAAAtD,EAAAimB,aAAApmB,IAAA,CAAkC,GAAAQ,GAAAR,GAAQhR,EAAAg2C,GAAA7kC,EAAAK,EAAc,MAAAmjC,GAAA7C,MAAAtgC,EAAA0lB,GAAA/lB,EAAAK,GAAAxR,EAAAg2C,GAAA7kC,EAAAK,QAAmCA,GAAA0lB,GAAA/lB,EAAA,GAAAnR,EAAAg2C,GAAA7kC,EAAAK,EAA4H,IAAnG,IAAAL,EAAAhJ,KAAA,IAAAnI,IAAA6S,IAAA,GAAA1B,EAAAqkB,UAAArkB,EAAAqkB,WAAA6L,GAAAlwB,EAAAskB,gBAAAjkB,EAAAkmB,GAAAvmB,GAAA,IAAAK,IAAAxR,EAAAg2C,GAAA7kC,EAAAK,KAAmG,IAAAxR,EAAA,KAAAA,GAAAi2C,GAAAL,GAAAzkC,EAAA,GAAA4gC,GAAA5gC,EAAAK,GAAA2jC,GAAAhkC,EAAAwB,MAAA3S,CAAqH,OAArEmR,GAAA+kC,aAAA/kC,EAAAhM,QAAAkuB,UAAmCliB,EAAAglC,cAAA3kC,EAAkB4kC,GAAAjlC,GAAMgkC,GAAAhkC,EAAAwB,MAAU,KAClY,QAAA8jC,MAAc,UAAArB,GAAA,CAAc,GAAAjkC,GAAAikC,EAASA,IAAA,KAAQjkC,EAAA/K,QAAA,SAAA+K,GAAsBA,EAAAimB,cAAA,GAAAjmB,EAAAgmB,aAAkCge,GAAAhkC,EAAAwB,QAAYmxB,KAAK,QAAA4S,IAAAvlC,EAAAK,GAAiB,GAAAxR,GAAA6S,EAAQA,KAAA,CAAK,KAAI,MAAA1B,GAAAK,GAAY,QAAQqB,GAAA7S,EAAA,IAAA6S,KAAA2hC,KAAA1Q,OAAwB,QAAA6S,IAAAxlC,EAAAK,GAAiB,GAAAxR,GAAA6S,EAAQA,QAAMA,IAAA,CAAK,KAAI,MAAA1B,GAAAK,GAAY,QAAQqB,GAAA7S,EAAA,IAAA6S,KAAA2hC,KAAA1Q,OAAwB,QAAAoL,IAAA/9B,EAAAK,GAAiBO,GAAA6kC,GAAAC,IAASA,IAAArlC,EAAMmjC,IAAAnjC,EAAM,QAAAygC,MAAc4E,GAAAD,GAAAzxC,QAAc2N,GAAA8jC,IAC1V,QAAAhB,IAAAzkC,EAAAK,GAAiBL,EAAA+kC,aAAA,KAAoB/kC,EAAAglC,cAAA,CAAkB,IAAAn2C,GAAAmR,EAAAklC,aAAyD,SAAnCr2C,IAAAmR,EAAAklC,iBAAAS,GAAA92C,IAAmC,OAAAuT,GAAA,IAAAvT,EAAAuT,GAAA4F,OAA2B,OAAAnZ,GAAS,CAAE,GAAAkR,GAAAlR,CAAQ,QAAAkR,EAAA/I,KAAc,OAAA+I,IAAA9D,KAAAq1B,kBAAkC,OAAAvxB,GAAA,SAAAA,GAAAwxB,IAA2B,MAAM,QAAA+G,KAAY32B,GAAAR,IAAKQ,GAAA7B,IAAKy5B,IAAK,MAAM,QAAAf,GAAAz4B,EAAa,MAAM,QAAAu4B,IAAY,MAAM,SAAA32B,GAAAQ,GAAa,MAAM,SAAAR,GAAAQ,GAAa,MAAM,SAAAmxB,GAAAvzB,EAAc,MAAM,iBAAA+gC,KAAqBjyC,IAAAmZ,OAAW1E,GAAAtD,EAAIoC,GAAAg1B,GAAAp3B,EAAAhM,QAAA,MAAqB6L,GAAA6lC,GAAAlC,GAAAnjC,EAAUkD,GAAA,EAAIuhC,GAAA,KAAQO,GAAA1E,GAAAtL,GAAA,EAC9b,QAAAsP,IAAA3kC,EAAAK,GAAiB,QAAG,GAAAxR,GAAAuT,EAAQ,KAAuB,GAAnB8wB,KAAK4G,GAAA9lC,QAAAmmC,GAAcC,GAAA,CAAO,OAAAr6B,GAAAkD,GAAAof,cAA0B,OAAAtiB,GAAS,CAAE,GAAA3H,GAAA2H,EAAAw6B,KAAc,QAAAniC,MAAAq8B,QAAA,MAA2B10B,IAAApP,KAASypC,MAA4C,GAAtCP,GAAA,EAAKx2B,GAAAD,GAAAH,GAAA,KAAWg3B,MAAM2L,GAAA5xC,QAAA,KAAgB,OAAAnF,GAAA,OAAAA,EAAAmZ,OAAA,CAA8BzE,GAAA,EAAIuhC,GAAAzkC,EAAK+B,GAAA,IAAO,OAAMpC,EAAA,CAAG,GAAAgB,GAAAhB,EAAAE,EAAArR,EAAAmZ,OAAAtI,EAAA7Q,EAAAkP,EAAAsC,CAA6E,IAAlDA,EAAAR,GAAIH,EAAAyiB,OAAA,KAAcziB,EAAAw3B,YAAAx3B,EAAAs3B,WAAA,KAAgC,OAAAj5B,GAAA,gBAAAA,IAAA,kBAAAA,GAAAwQ,KAAA,CAA8D,GAAA7N,GAAA3C,CAAQ,WAAA2B,EAAA43B,MAAA,CAAmB,GAAA19B,GAAA8F,EAAAwiB,SAAkBtoB,IAAA8F,EAAA00B,YAAAx6B,EAAAw6B,YAAA10B,EAAA2iB,cAAAzoB,EAAAyoB,cAAA3iB,EAAAo0B,MAAAl6B,EAAAk6B,QAC5ap0B,EAAA00B,YAAA,KAAA10B,EAAA2iB,cAAA,MAA0C,GAAA5gB,GAAA,OAAAU,GAAAnO,SAAAlF,EAAAoR,CAA4B,IAAG,GAAAE,EAAM,IAAAA,EAAA,KAAAtR,EAAAkI,IAAA,CAAiB,GAAAuJ,GAAAzR,EAAAuzB,aAAsB,WAAA9hB,EAAAH,EAAA,OAAAG,EAAA+hB,eAAwC,CAAK,GAAArgB,GAAAnT,EAAA4pC,aAAsBt4B,GAAA,SAAA6B,EAAAy8B,gBAAAz8B,EAAA08B,6BAAAl9B,IAAuE,GAAArB,EAAA,CAAM,GAAAyB,GAAA/S,EAAAslC,WAAoB,WAAAvyB,EAAA,CAAa,GAAApB,GAAA,GAAAmwB,IAAcnwB,GAAA4M,IAAA3M,GAAS5R,EAAAslC,YAAA3zB,MAAgBoB,GAAAwL,IAAA3M,EAAc,WAAA5R,EAAAwoC,MAAA,CAA6D,GAA1CxoC,EAAAqzB,OAAA,GAAYziB,EAAAyiB,OAAA,MAAeziB,EAAAyiB,aAAe,IAAAziB,EAAA1I,IAAA,UAAA0I,EAAAwiB,UAAAxiB,EAAA1I,IAAA,OAA4C,CAAK,GAAA6J,GAAA+zB,MAAA,EAAe/zB,GAAA7J,IAAA,EAAQi+B,GAAAv1B,EAAAmB,GAAQnB,EAAAo0B,OAAA,CAAW,MAAA9zB,GAAQjC,EAC5f,OAAO2B,EAAAW,CAAI,IAAAJ,GAAAe,EAAA6kC,SAAuH,IAArG,OAAA5lC,KAAAe,EAAA6kC,UAAA,GAAAC,IAAA/nC,EAAA,GAAA6yB,KAAA3wB,EAAAuD,IAAA9C,EAAA3C,OAAAkC,EAAArB,IAAA8B,GAAA,SAAA3C,MAAA,GAAA6yB,KAAA3wB,EAAAuD,IAAA9C,EAAA3C,MAAqGA,EAAA0I,IAAA/G,GAAA,CAAc3B,EAAAsP,IAAA3N,EAAS,IAAAY,GAAAylC,GAAA9qC,KAAA,KAAA+F,EAAAN,EAAAhB,EAA0BgB,GAAA6N,KAAAjO,KAAYxR,EAAAqzB,OAAA,KAAcrzB,EAAAglC,MAAAzzB,CAAU,MAAAL,GAAQlR,IAAAkZ,aAAW,OAAAlZ,EAAgBiP,GAAA+Z,OAAA+D,EAAAnc,EAAAzD,OAAA,8MAAmO,IAAAsH,QAAA,GAAaxF,EAAAijC,GAAAjjC,EAAA2B,GAAU5Q,EACpfoR,CAAE,IAAG,OAAApR,EAAAkI,KAAc,OAAAgK,EAAAjD,EAAWjP,EAAAqzB,OAAA,KAAc9hB,MAAMvR,EAAAglC,OAAAzzB,CAAW,IAAAU,GAAAqgC,GAAAtyC,EAAAkS,EAAAX,EAAgB60B,IAAApmC,EAAAiS,EAAQ,MAAAf,EAAQ,QAAAgB,EAAAjD,CAAW,IAAAyC,GAAA1R,EAAAmN,KAAAsG,EAAAzT,EAAA6xB,SAA2B,YAAA7xB,EAAAqzB,SAAA,kBAAA3hB,GAAA89B,0BAAA,OAAA/7B,GAAA,kBAAAA,GAAAi/B,oBAAA,OAAAC,QAAAh7B,IAAAlE,KAAA,CAAmJzT,EAAAqzB,OAAA,KAAc9hB,MAAMvR,EAAAglC,OAAAzzB,CAAW,IAAA6B,GAAAq/B,GAAAzyC,EAAAkS,EAAAX,EAAgB60B,IAAApmC,EAAAoT,EAAQ,MAAAlC,IAASlR,IAAAkZ,aAAW,OAAAlZ,GAAgBk3C,GAAAn3C,GAAM,MAAAo3C,GAAU5lC,EAAA4lC,EAAK7jC,KAAAvT,GAAA,OAAAA,IAAAuT,GAAAvT,IAAAmZ,OAAgC,UAAS,OAC/a,QAAAw8B,MAAc,GAAAxkC,GAAA4kC,GAAA5wC,OAA+B,OAAd4wC,IAAA5wC,QAAAmmC,GAAc,OAAAn6B,EAAAm6B,GAAAn6B,EAAqB,QAAA6kC,IAAA7kC,EAAAK,GAAiB,GAAAxR,GAAA6S,EAAQA,KAAA,EAAM,IAAA3B,GAAAykC,IAAiC,KAAtBlhC,KAAAtD,GAAAH,KAAAQ,GAAAokC,GAAAzkC,EAAAK,KAAsB,IAAO6lC,IAAK,OAAM,MAAA9tC,GAASusC,GAAA3kC,EAAA5H,GAAuC,GAAtB86B,KAAKxxB,GAAA7S,EAAI+1C,GAAA5wC,QAAA+L,EAAa,OAAAqC,GAAA,KAAA0V,OAAA3X,EAAA,KAA2C,OAAXmD,IAAA,KAAOzD,GAAA,EAAI0D,GAAS,QAAA2iC,MAAc,KAAK,OAAA9jC,IAAS+jC,GAAA/jC,IAAO,QAAAsiC,MAAc,KAAK,OAAAtiC,KAAAgkC,MAAgBD,GAAA/jC,IAAO,QAAA+jC,IAAAnmC,GAAe,GAAAK,GAAAgmC,GAAArmC,EAAAkiB,UAAAliB,EAAA0lC,GAA2B1lC,GAAA04B,cAAA14B,EAAA+4B,aAA+B,OAAA14B,EAAA2lC,GAAAhmC,GAAAoC,GAAA/B,EAAmBulC,GAAA5xC,QAAA,KACja,QAAAgyC,IAAAhmC,GAAe,GAAAK,GAAAL,CAAQ,IAAG,GAAAnR,GAAAwR,EAAA6hB,SAA6B,IAAXliB,EAAAK,EAAA2H,OAAW,UAAA3H,EAAA8hB,OAAA,CAAoC,GAAbtzB,EAAA+wC,GAAA/wC,EAAAwR,EAAAqlC,IAAa,OAAA72C,EAAiB,YAAJuT,GAAAvT,EAAe,IAAJA,EAAAwR,EAAI,KAAAxR,EAAAmI,KAAA,KAAAnI,EAAAmI,KAAA,OAAAnI,EAAAwzB,eAAA,gBAAAqjB,KAAA,OAAA72C,EAAAyoC,MAAA,CAAwF,OAAAv3B,GAAA,EAAA3H,EAAAvJ,EAAA4zB,MAAsB,OAAArqB,GAAS2H,GAAA3H,EAAA07B,MAAA17B,EAAAs7B,WAAAt7B,IAAAsqB,OAAqC7zB,GAAA6kC,WAAA3zB,EAAe,OAAAC,GAAA,UAAAA,EAAAmiB,SAAA,OAAAniB,EAAAk3B,cAAAl3B,EAAAk3B,YAAA72B,EAAA62B,aAAA,OAAA72B,EAAA22B,aAAA,OAAAh3B,EAAAg3B,aAAAh3B,EAAAg3B,WAAAC,WAAA52B,EAAA62B,aAAAl3B,EAAAg3B,WAAA32B,EAAA22B,YAAA,EAAA32B,EAAA8hB,QAAA,OAClSniB,EAAAg3B,WAAAh3B,EAAAg3B,WAAAC,WAAA52B,EAAAL,EAAAk3B,YAAA72B,EAAAL,EAAAg3B,WAAA32B,QAAwE,CAAa,GAARxR,EAAAkyC,GAAA1gC,GAAQ,OAAAxR,EAA+B,MAAlBA,GAAAszB,OAAA,UAAc/f,GAAAvT,EAAW,QAAAmR,MAAAk3B,YAAAl3B,EAAAg3B,WAAA,KAAAh3B,EAAAmiB,OAAA,MAAsE,GAAZ9hB,IAAAqiB,QAAY,OAAAriB,EAAiB,YAAJ+B,GAAA/B,EAAW+B,IAAA/B,EAAAL,QAAM,OAAAK,EAAgB,KAAAkD,QAAA,GAAa,QAAA0hC,IAAAjlC,GAAe,GAAAK,GAAA0xB,IAAoC,OAAzBQ,IAAA,GAAA+T,GAAArrC,KAAA,KAAA+E,EAAAK,IAAyB,KAC/S,QAAAimC,IAAAtmC,EAAAK,GAAiB,EAAAkkC,YAAQ,OAAAgC,GAAiB,YAAA7kC,IAAA,KAAAoW,OAAA3X,EAAA,KAAkC,IAAAtR,GAAAmR,EAAA+kC,YAAqB,WAAAl2C,EAAA,WAA8D,IAAtCmR,EAAA+kC,aAAA,KAAoB/kC,EAAAglC,cAAA,EAAkBn2C,IAAAmR,EAAAhM,QAAA,KAAA8jB,OAAA3X,EAAA,KAAqCH,GAAAkkC,aAAA,IAAoB,IAAAnkC,GAAAlR,EAAAilC,MAAAjlC,EAAA6kC,WAAAt7B,EAAA2H,EAAAiB,EAAAhB,EAAAgmB,cAAA5tB,CAAmD4H,GAAAgmB,aAAA5tB,EAAiB4H,EAAAkmB,eAAA,EAAmBlmB,EAAAmmB,YAAA,EAAgBnmB,EAAAimB,cAAA7tB,EAAkB4H,EAAAq7B,kBAAAjjC,EAAsB4H,EAAAqmB,gBAAAjuB,EAAoBA,EAAA4H,EAAAsmB,aAAkB,QAAApmB,GAAAF,EAAA4mB,WAAAlnB,EAAAM,EAAAmkC,gBAA2C,EAAAnjC,GAAI,CAAE,GAAAjD,GAAA,GAAAqoB,GAAAplB,GAAAN,EAAA,GAAA3C,CAAsB3F,GAAA2F,GAAA,EAAOmC,EAAAnC,MAAQ2B,EAAA3B,MAAQiD,IAAAN,EAC/U,GADqV,OACjfujC,IAAA,QAAAlkC,IAAAkkC,GAAAx9B,IAAAzG,IAAAikC,GAAAzgB,OAAAxjB,GAAwCA,IAAAsD,KAAAlB,GAAAkB,GAAA,KAAAzD,GAAA,GAAsB,EAAAhR,EAAAszB,MAAA,OAAAtzB,EAAAmoC,YAAAnoC,EAAAmoC,WAAAC,WAAApoC,EAAAkR,EAAAlR,EAAAqoC,aAAAn3B,EAAAlR,EAAAkR,EAAAlR,EAAAqoC,YAA8F,OAAAn3B,EAAA,CAAoD,GAAvC3H,EAAAsJ,GAAIA,IAAA,GAAMkkC,GAAA5xC,QAAA,KAAgBwyC,GAAAnf,GAAMnnB,EAAAgsB,KAAOI,GAAApsB,GAAA,CAAU,qBAAAA,GAAAR,GAA2BwW,MAAAhW,EAAAysB,eAAAlV,IAAAvX,EAAA0sB,kBAA2C5sB,GAAA,GAAAN,KAAAQ,EAAAse,gBAAA9e,EAAAmtB,aAAAvM,QAAA5f,EAAAhB,EAAAotB,cAAAptB,EAAAotB,iBAAA,IAAApsB,EAAA+lC,WAAA,CAA+G/mC,EAAAgB,EAAAqsB,WAAe/rB,EAAAN,EAAAssB,aAAiBjvB,EAAA2C,EAAAusB,UAAcvsB,IAAAwsB,WAAgB,KAAIxtB,EAAAggB,SAAA3hB,EAAA2hB,SAAsB,MAAAumB,GAAUvmC,EAAA,IACjf,MAAAM,GAAQ,GAAApG,GAAA,EAAA6H,KAAA3S,KAAAsR,EAAA,EAAAG,EAAA,EAAA0B,EAAA/B,EAAA2B,EAAA,IAAqCxB,GAAA,OAAQ,CAAE,OAAAI,GAAawB,IAAAvC,GAAA,IAAAsB,GAAA,IAAAiB,EAAAyd,WAAAje,EAAA7H,EAAAoH,GAAsCiB,IAAAlE,GAAA,IAAA2C,GAAA,IAAAuB,EAAAyd,WAAA5wB,EAAA8K,EAAA8G,GAAsC,IAAAuB,EAAAyd,WAAA9lB,GAAAqI,EAAA0d,UAAAvuB,QAAwC,QAAAqP,EAAAwB,EAAAkP,aAAiCtP,EAAAI,EAAIA,EAAAxB,CAAI,QAAM,CAAE,GAAAwB,IAAA/B,EAAA,KAAAG,EAA6D,IAA5CwB,IAAAnC,KAAAU,IAAAY,IAAAS,EAAA7H,GAAsBiI,IAAA9D,KAAAwC,IAAAG,IAAA5R,EAAA8K,GAAsB,QAAA6G,EAAAwB,EAAAnK,aAAA,KAAkCmK,GAAAJ,EAAIA,EAAAI,EAAAlM,WAAekM,EAAAxB,EAAIf,OAAA+B,QAAA3S,EAAA,MAAuBonB,MAAAzU,EAAAgW,IAAA3oB,OAAe4Q,GAAA,IAAYA,OAAMwW,MAAA,EAAAuB,IAAA,OAAe/X,GAAA,IAAYgnC,KAAIC,YAAAzmC,EAAA0mC,eAAAlnC,GAAgC2nB,MAAMwf,GAAA,KAAQC,MAAMrkC,GAAA1C,CAAI,QAAOgnC,KAAK,MAAAd,GAAU,UACpgBxjC,GAAA,KAAAqV,OAAA3X,EAAA,KAAsByhC,IAAAn/B,GAAAwjC,GAASxjC,MAAAw0B,iBAAe,OAAAx0B,GAAgBokC,IAAA,KAAQpkC,GAAA1C,CAAI,QAAO,IAAAG,EAAAF,EAAQ,OAAAyC,IAAS,CAAE,GAAA5B,GAAA4B,GAAA0f,KAAuC,IAAzB,GAAAthB,GAAA2e,EAAA/c,GAAAke,UAAA,IAAyB,IAAA9f,EAAA,CAAU,GAAAZ,GAAAwC,GAAAyf,SAAkB,WAAAjiB,EAAA,CAAa,GAAAK,GAAAL,EAAAd,GAAY,QAAAmB,IAAA,kBAAAA,KAAA,MAAAA,EAAAtM,QAAA,OAA0D,YAAA6M,GAAe,OAAA8hC,GAAAlgC,IAAaA,GAAA0f,SAAY,MAAM,QAAAwgB,GAAAlgC,IAAaA,GAAA0f,UAAY4gB,GAAAtgC,GAAAyf,UAAAzf,GAAkB,MAAM,WAAAA,GAAA0f,YAAyB,MAAM,WAAA1f,GAAA0f,aAAyB4gB,GAAAtgC,GAAAyf,UAAAzf,GAAkB,MAAM,QAAAsgC,GAAAtgC,GAAAyf,UAAAzf,GAAyB,MAAM,QAAA/C,EAAA+C,GAAW+/B,GAAAtiC,EAAAR,EAAQ,IAAAqB,GAAArB,EAAAwiB,SAAkBugB,IAAA/iC,GAAM,OACnfqB,GAAA0hC,GAAA1hC,GAAS0B,MAAAw0B,YAAgB,MAAAgP,GAAU,UAAAxjC,GAAA,KAAAqV,OAAA3X,EAAA,KAAgCyhC,IAAAn/B,GAAAwjC,GAASxjC,MAAAw0B,iBAAe,OAAAx0B,GAA+D,IAA/CnC,EAAAomC,GAAKzmC,EAAAisB,KAAOrrB,EAAAP,EAAAqmC,YAAgBzmC,EAAAI,EAAAsmC,eAAmB3mC,IAAAY,QAAA2d,eAAAuN,GAAAlrB,EAAA2d,cAAA2Z,gBAAAt3B,GAAA,CAAqE,OAAAX,GAAAosB,GAAAzrB,KAAAZ,EAAAC,EAAAgW,MAAA5V,EAAAJ,EAAAuX,IAAA,SAAAnX,MAAAL,GAAA,kBAAAY,MAAA8rB,eAAA1sB,EAAAY,EAAA+rB,aAAAtc,KAAA02B,IAAA1mC,EAAAO,EAAAvP,MAAAF,UAAAkP,GAAAL,EAAAY,EAAA2d,eAAA5uB,WAAAqQ,EAAA4sB,aAAAvM,OAAAhgB,EAAAwsB,eAAAxsB,IAAAwsB,eAAAptB,EAAAmB,EAAAwe,YAAAjuB,OAAA2P,EAAAuP,KAAA02B,IAAA9mC,EAAAgW,MAAAxW,GAAAQ,EAAA,SAC/NA,EAAAuX,IAAA1W,EAAAuP,KAAA02B,IAAA9mC,EAAAuX,IAAA/X,IAAAY,EAAA2mC,QAAAlmC,EAAAb,IAAAR,EAAAQ,IAAAa,IAAArB,KAAAosB,GAAAjrB,EAAAE,GAAAC,EAAA8qB,GAAAjrB,EAAAX,GAAAR,GAAAsB,IAAA,IAAAV,EAAAmmC,YAAAnmC,EAAAysB,aAAArtB,EAAA9J,MAAA0K,EAAA0sB,eAAAttB,EAAAmW,QAAAvV,EAAA2sB,YAAAjsB,EAAApL,MAAA0K,EAAA4sB,cAAAlsB,EAAA6U,UAAA5V,IAAAinC,cAAAjnC,EAAAknC,SAAAznC,EAAA9J,KAAA8J,EAAAmW,QAAAvV,EAAA8mC,kBAAArmC,EAAAb,GAAAI,EAAA+mC,SAAApnC,GAAAK,EAAA2mC,OAAAjmC,EAAApL,KAAAoL,EAAA6U,UAAA5V,EAAAqnC,OAAAtmC,EAAApL,KAAAoL,EAAA6U,QAAAvV,EAAA+mC,SAAApnC,QAAuWA,IAAK,KAAAK,EAAAO,EAAQP,IAAAvK,YAAe,IAAAuK,EAAAof,UAAAzf,EAAAjI,MAAyBmF,QAAAmD,EAAAinC,KAAAjnC,EAAAknC,WAAAC,IAAAnnC,EAAAonC,WAAqF,KAAvC,kBAAA7mC,GAAAqhC,OAAArhC,EAAAqhC,QAAuCrhC,EACjf,EAAEA,EAAAZ,EAAA7O,OAAWyP,IAAAP,EAAAL,EAAAY,GAAAP,EAAAnD,QAAAqqC,WAAAlnC,EAAAinC,KAAAjnC,EAAAnD,QAAAuqC,UAAApnC,EAAAmnC,IAAiEpgB,KAAAmf,GAAQE,GAAAF,GAAA,KAAWxmC,EAAAhM,QAAAnF,EAAY4T,GAAA1C,CAAI,QAAO,IAAAc,EAAAb,EAAQ,OAAAyC,IAAS,CAAE,GAAAjC,GAAAiC,GAAA0f,KAAwC,IAA1B,GAAA3hB,GAAAuhC,GAAAlhC,EAAA4B,GAAAyf,UAAAzf,IAA0B,IAAAjC,EAAA,CAAUP,EAAA,MAAS,IAAAsC,GAAAE,GAAAtD,GAAY,WAAAoD,EAAA,CAAa,GAAAL,GAAAO,GAAAke,SAAkB,QAAAle,GAAAzL,KAAc,OAAAiJ,EAAAiC,CAAW,MAAM,SAAAjC,EAAAiC,EAAY,kBAAAK,KAAAtC,GAAAsC,EAAAvO,QAAAiM,GAAwCwC,MAAAw0B,YAAgB,MAAAgP,GAAU,UAAAxjC,GAAA,KAAAqV,OAAA3X,EAAA,KAAgCyhC,IAAAn/B,GAAAwjC,GAASxjC,MAAAw0B,iBAAe,OAAAx0B,GAAgBA,IAAA,KAAOklC,KAAKjmC,GAAAtJ,MAAI4H,GAAAhM,QAAAnF,CAAiB,IAAA+4C,SAAArB,GAAAvmC,EAAA6nC,GAAAxnC,MAAsB,KAAAoC,GAAA1C,EAAa,OAAA0C,IAASpC,EACnfoC,GAAAw0B,WAAAx0B,GAAAw0B,WAAA,OAAAx0B,GAAA0f,QAAA3hB,EAAAiC,GAAAjC,EAAAkiB,QAAA,KAAAliB,EAAAmgB,UAAA,MAAAle,GAAApC,CAAuK,IAAnFN,EAAAC,EAAAgmB,aAAiB,IAAAjmB,IAAA0hC,GAAA,MAAiB,IAAA1hC,EAAAC,IAAA6jC,GAAAD,SAAA,EAAAC,GAAA7jC,GAAA4jC,GAAA,EAAmC/0C,IAAA8xB,UAAc0hB,IAAA,kBAAAA,IAAAyF,kBAAA,IAAoDzF,GAAAyF,kBAAAvF,GAAA1zC,EAAA,gBAAAA,EAAAmF,QAAAmuB,QAA4D,MAAA8jB,IAAqB,GAAVjC,GAAAhkC,EAAAwB,MAAU6/B,GAAA,KAAAA,OAAArhC,EAAAshC,MAAA,KAAAthC,CAAiC,eAAA0B,IAAA,MAAyBixB,KAAK,MAC3W,QAAAoU,MAAc,KAAK,OAAAtkC,IAAS,CAAE,GAAAzC,GAAAyC,GAAAyf,SAAkB4kB,KAAA,OAAAD,KAAA,OAAApkC,GAAA0f,OAAAS,GAAAngB,GAAAokC,MAAAC,OAAA,KAAArkC,GAAAzL,KAAAosC,GAAApjC,EAAAyC,KAAAmgB,GAAAngB,GAAAokC,MAAAC,OAA0F,IAAAzmC,GAAAoC,GAAA0f,KAAc,UAAA9hB,IAAAwhC,GAAA7hC,EAAAyC,IAAqB,SAAApC,IAAAunC,WAAAnV,GAAA,cAA8C,MAAL8R,MAAK,QAAe9hC,MAAAw0B,YAAgB,QAAAsN,MAAc,QAAAsD,GAAA,CAAY,GAAA7nC,GAAA,GAAA6nC,GAAA,GAAAA,EAAwB,OAANA,IAAA,GAAMtV,GAAAvyB,EAAA+nC,IAAgB,SAAS,QAAA9F,IAAAjiC,EAAAK,GAAiB2nC,GAAAhwC,KAAAqI,EAAAL,GAAa4nC,WAAAnV,GAAA,cAAiC,MAAL8R,MAAK,QAAe,QAAAvC,IAAAhiC,EAAAK,GAAiB4nC,GAAAjwC,KAAAqI,EAAAL,GAAa4nC,WAAAnV,GAAA,cAAiC,MAAL8R,MAAK,QACld,QAAAwD,MAAc,UAAAxB,GAAA,QAAsB,IAAAvmC,GAAAumC,EAAiB,IAARA,GAAA,KAAQ,QAAA7kC,IAAA,KAAAoW,OAAA3X,EAAA,KAAkC,IAAAE,GAAAqB,EAAQA,KAAA,EAAM,IAAA7S,GAAAo5C,EAASA,MAAM,QAAAloC,GAAA,EAAYA,EAAAlR,EAAAuC,OAAW2O,GAAA,GAAM,GAAA3H,GAAAvJ,EAAAkR,GAAAiB,EAAAnS,EAAAkR,EAAA,GAAAG,EAAA9H,EAAA2jC,OAAiD,IAAjB3jC,EAAA2jC,QAAA,OAAiB,kBAAA77B,GAAA,IAA6BA,IAAI,MAAAnC,GAAS,UAAAiD,EAAA,KAAA8W,OAAA3X,EAAA,KAAgCyhC,IAAA5gC,EAAAjD,IAAoB,IAAXlP,EAAAm5C,GAAKA,MAAMjoC,EAAA,EAAQA,EAAAlR,EAAAuC,OAAW2O,GAAA,GAAM3H,EAAAvJ,EAAAkR,GAAOiB,EAAAnS,EAAAkR,EAAA,EAAS,KAAI,GAAAL,GAAAtH,EAAA1E,MAAe0E,GAAA2jC,QAAAr8B,IAAc,MAAA3B,GAAS,UAAAiD,EAAA,KAAA8W,OAAA3X,EAAA,KAAgCyhC,IAAA5gC,EAAAjD,IAAS,IAAA2B,EAAAM,EAAAhM,QAAAkjC,YAA4B,OAAAx3B,GAASM,EAAAN,EAAAu3B,WAAAv3B,EAAAu3B,WAAA,OAAAv3B,EAAAyiB,QAAAziB,EAAAgjB,QACjc,KAAAhjB,EAAAihB,UAAA,MAAAjhB,EAAAM,CAAoC,OAAT0B,IAAArB,EAAIsyB,QAAc,QAAAuV,IAAAloC,EAAAK,EAAAxR,GAAmBwR,EAAA2gC,GAAAnyC,EAAAwR,GAAUA,EAAA+gC,GAAAphC,EAAAK,EAAA,GAAY40B,GAAAj1B,EAAAK,GAAQA,EAAA48B,KAAOj9B,EAAA8jC,GAAA9jC,EAAA,GAAU,OAAAA,IAAA2mB,GAAA3mB,EAAA,EAAAK,GAAA2jC,GAAAhkC,EAAAK,IAC/G,QAAAuhC,IAAA5hC,EAAAK,GAAiB,OAAAL,EAAAhJ,IAAAkxC,GAAAloC,IAAAK,OAAuB,QAAAxR,GAAAmR,EAAAgI,OAAwB,OAAAnZ,GAAS,CAAE,OAAAA,EAAAmI,IAAA,CAAckxC,GAAAr5C,EAAAmR,EAAAK,EAAU,OAAM,OAAAxR,EAAAmI,IAAA,CAAmB,GAAA+I,GAAAlR,EAAA8xB,SAAkB,sBAAA9xB,GAAAoN,KAAAqiC,0BAAA,kBAAAv+B,GAAAyhC,oBAAA,OAAAC,QAAAh7B,IAAA1G,IAAA,CAA0HC,EAAAghC,GAAA3gC,EAAAL,EAAU,IAAA5H,GAAAmpC,GAAA1yC,EAAAmR,EAAA,EAAyC,IAAzBi1B,GAAApmC,EAAAuJ,GAAQA,EAAA6kC,KAAOpuC,EAAAi1C,GAAAj1C,EAAA,GAAU,OAAAA,EAAA83B,GAAA93B,EAAA,EAAAuJ,GAAA4rC,GAAAn1C,EAAAuJ,OAA8B,sBAAA2H,GAAAyhC,oBAAA,OAAAC,QAAAh7B,IAAA1G,IAAA,IAA6EA,EAAAyhC,kBAAAnhC,EAAAL,GAAyB,MAAAgB,IAAU,OAAOnS,IAAAmZ,QAChd,QAAA+9B,IAAA/lC,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAC,EAAA6lC,SAAkB,QAAA9lC,KAAAyjB,OAAAnjB,GAAsBA,EAAA48B,KAAOj9B,EAAAmmB,aAAAnmB,EAAAkmB,eAAAr3B,EAAkCyU,KAAAtD,IAAAH,GAAAhR,SAAA,IAAA0U,IAAA,IAAAA,KAAA,SAAA1D,UAAA,IAAA2B,KAAAwhC,GAAAyB,GAAAzkC,EAAA,GAAAqlC,IAAAx2C,GAA6Em1C,GAAAhkC,EAAAK,GAAQ,QAAA8iC,IAAAnjC,EAAAK,GAAiB,GAAAxR,GAAAmR,EAAA2gB,SAAkB,QAAA9xB,KAAA20B,OAAAnjB,GAAsBA,EAAA,EAAI,IAAAA,MAAAL,EAAAs3B,KAAA,OAAAj3B,KAAA,SAAAA,KAAA,KAAA0xB,KAAA,SAAAwR,QAAAC,IAAAnjC,EAAAomB,GAAA,UAAA8c,IAAA,IAAAljC,MAAA,WAAkHxR,EAAAouC,KAAOj9B,EAAA8jC,GAAA9jC,EAAAK,GAAU,OAAAL,IAAA2mB,GAAA3mB,EAAAK,EAAAxR,GAAAm1C,GAAAhkC,EAAAnR,IAUvX,QAAAs5C,IAAAnoC,EAAAK,EAAAxR,EAAAkR,GAAqBzI,KAAAN,IAAAgJ,EAAW1I,KAAA7E,IAAA5D,EAAWyI,KAAAorB,QAAAprB,KAAAmrB,MAAAnrB,KAAA0Q,OAAA1Q,KAAAqpB,UAAArpB,KAAA2E,KAAA3E,KAAAsiB,YAAA,KAAmFtiB,KAAA4R,MAAA,EAAa5R,KAAA6H,IAAA,KAAc7H,KAAAyhC,aAAA14B,EAAoB/I,KAAAs8B,aAAAt8B,KAAA+qB,cAAA/qB,KAAA88B,YAAA98B,KAAAohC,cAAA,KAA8EphC,KAAAggC,KAAAv3B,EAAYzI,KAAA6qB,MAAA,EAAa7qB,KAAA0/B,WAAA1/B,KAAA4/B,YAAA5/B,KAAA2/B,WAAA,KAAsD3/B,KAAAo8B,WAAAp8B,KAAAw8B,MAAA,EAA6Bx8B,KAAA4qB,UAAA,KAAoB,QAAA2W,IAAA74B,EAAAK,EAAAxR,EAAAkR,GAAqB,UAAAooC,IAAAnoC,EAAAK,EAAAxR,EAAAkR,GAAuB,QAAA09B,IAAAz9B,GAA6B,MAAdA,KAAAvM,aAAcuM,MAAAooC,kBACtc,QAAAC,IAAAroC,GAAe,qBAAAA,GAAA,MAAAy9B,IAAAz9B,GAAA,GAA0C,aAAAA,GAAA,OAAAA,EAAA,CAAsC,GAAbA,IAAAoc,SAAapc,IAAAwc,GAAA,SAAoB,IAAAxc,IAAAyc,GAAA,UAAoB,SACvI,QAAA2a,IAAAp3B,EAAAK,GAAiB,GAAAxR,GAAAmR,EAAAkiB,SAC+B,OADb,QAAArzB,KAAAgqC,GAAA74B,EAAAhJ,IAAAqJ,EAAAL,EAAAvN,IAAAuN,EAAAs3B,MAAAzoC,EAAA+qB,YAAA5Z,EAAA4Z,YAAA/qB,EAAAoN,KAAA+D,EAAA/D,KAAApN,EAAA8xB,UAAA3gB,EAAA2gB,UAAA9xB,EAAAqzB,UAAAliB,IAAAkiB,UAAArzB,MAAAkqC,aAAA14B,EAAAxR,EAAAoN,KAAA+D,EAAA/D,KAAApN,EAAAszB,MAAA,EAAAtzB,EAAAooC,WAAA,KAAApoC,EAAAqoC,YAAA,KAAAroC,EAAAmoC,WAAA,MAAsOnoC,EAAA6kC,WAAA1zB,EAAA0zB,WAA0B7kC,EAAAilC,MAAA9zB,EAAA8zB,MAAgBjlC,EAAA4zB,MAAAziB,EAAAyiB,MAAgB5zB,EAAA6pC,cAAA14B,EAAA04B,cAAgC7pC,EAAAwzB,cAAAriB,EAAAqiB,cAAgCxzB,EAAAulC,YAAAp0B,EAAAo0B,YAA4B/zB,EAAAL,EAAA4zB,aAAiB/kC,EAAA+kC,aAAA,OAAAvzB,EAAA,MAA8ByzB,MAAAzzB,EAAAyzB,MAAAD,aAAAxzB,EAAAwzB,cAC9chlC,EAAA6zB,QAAA1iB,EAAA0iB,QAAoB7zB,EAAAqa,MAAAlJ,EAAAkJ,MAAgBra,EAAAsQ,IAAAa,EAAAb,IAAYtQ,EAChD,QAAA0oC,IAAAv3B,EAAAK,EAAAxR,EAAAkR,EAAA3H,EAAA4I,GAAyB,GAAAd,GAAA,CAAY,IAAJH,EAAAC,EAAI,kBAAAA,GAAAy9B,GAAAz9B,KAAAE,EAAA,OAAsC,oBAAAF,GAAAE,EAAA,MAAgCF,GAAA,OAAAA,GAAiB,IAAA8b,IAAA,MAAA4b,IAAA7oC,EAAA0P,SAAAnG,EAAA4I,EAAAX,EAAoC,KAAAioC,IAAApoC,EAAA,EAAY9H,GAAA,EAAM,MAAM,KAAA6jB,IAAA/b,EAAA,EAAY9H,GAAA,CAAK,MAAM,KAAA4jB,IAAA,MAAAhc,GAAA64B,GAAA,GAAAhqC,EAAAwR,EAAA,EAAAjI,GAAA4H,EAAA4Z,YAAAoC,GAAAhc,EAAA/D,KAAA+f,GAAAhc,EAAA8zB,MAAA9yB,EAAAhB,CAAuE,KAAAkc,IAAA,MAAAlc,GAAA64B,GAAA,GAAAhqC,EAAAwR,EAAAjI,GAAA4H,EAAA/D,KAAAigB,GAAAlc,EAAA4Z,YAAAsC,GAAAlc,EAAA8zB,MAAA9yB,EAAAhB,CAAqE,KAAAmc,IAAA,MAAAnc,GAAA64B,GAAA,GAAAhqC,EAAAwR,EAAAjI,GAAA4H,EAAA4Z,YAAAuC,GAAAnc,EAAA8zB,MAAA9yB,EAAAhB,CAA2D,KAAAuoC,IAAA,MAAAxJ,IAAAlwC,EAAAuJ,EAAA4I,EAAAX,EAA2B,KAAAmoC,IAAA,MAAAxoC,GAAA64B,GAAA,GAAAhqC,EAAAwR,EAAAjI,GAAA4H,EAAA4Z,YAAA4uB,GAAAxoC,EAAA8zB,MAAA9yB,EAAAhB,CAA2D,4BAC5eA,IAAA,OAAAA,EAAA,OAAAA,EAAAoc,UAAsC,IAAAE,IAAApc,EAAA,EAAa,MAAAF,EAAQ,KAAAqc,IAAAnc,EAAA,CAAY,MAAAF,EAAQ,KAAAwc,IAAAtc,EAAA,EAAa,MAAAF,EAAQ,KAAAyc,IAAAvc,EAAA,EAAa,MAAAF,EAAQ,KAAA2c,IAAAzc,EAAA,GAAaH,EAAA,IAAO,MAAAC,EAAQ,KAAA0c,IAAAxc,EAAA,EAAa,MAAAF,GAAQ,KAAA8X,OAAA3X,EAAA,UAAAH,aAAA,KAA4F,MAAjDK,GAAAw4B,GAAA34B,EAAArR,EAAAwR,EAAAjI,GAAciI,EAAAuZ,YAAA5Z,EAAgBK,EAAApE,KAAA8D,EAASM,EAAAyzB,MAAA9yB,EAAUX,EAAS,QAAAq3B,IAAA13B,EAAAK,EAAAxR,EAAAkR,GAA6C,MAAxBC,GAAA64B,GAAA,EAAA74B,EAAAD,EAAAM,GAAcL,EAAA8zB,MAAAjlC,EAAUmR,EAAS,QAAA++B,IAAA/+B,EAAAK,EAAAxR,EAAAkR,GAA+D,MAA1CC,GAAA64B,GAAA,GAAA74B,EAAAD,EAAAM,GAAeL,EAAA4Z,YAAA2uB,GAAiBvoC,EAAA8zB,MAAAjlC,EAAUmR,EAAS,QAAAq3B,IAAAr3B,EAAAK,EAAAxR,GAA8C,MAA3BmR,GAAA64B,GAAA,EAAA74B,EAAA,KAAAK,GAAiBL,EAAA8zB,MAAAjlC,EAAUmR,EAC3b,QAAAy3B,IAAAz3B,EAAAK,EAAAxR,GAA8K,MAA3JwR,GAAAw4B,GAAA,SAAA74B,EAAAzB,SAAAyB,EAAAzB,YAAAyB,EAAAvN,IAAA4N,GAAgDA,EAAAyzB,MAAAjlC,EAAUwR,EAAAsgB,WAAa2D,cAAAtkB,EAAAskB,cAAAmkB,gBAAA,KAAAjR,eAAAx3B,EAAAw3B,gBAAoFn3B,EAC9K,QAAAqoC,IAAA1oC,EAAAK,EAAAxR,GAAmByI,KAAAN,IAAAqJ,EAAW/I,KAAAgtB,cAAAtkB,EAAqB1I,KAAAytC,aAAAztC,KAAAuuC,UAAAvuC,KAAAtD,QAAAsD,KAAAmxC,gBAAA,KAAwEnxC,KAAA4tC,iBAAsB5tC,KAAAknC,eAAAlnC,KAAA/C,QAAA,KAAsC+C,KAAA+sB,QAAAx1B,EAAeyI,KAAA4sC,aAAA,KAAuB5sC,KAAA+sC,iBAAA,EAAwB/sC,KAAAsvB,WAAAF,GAAA,GAAsBpvB,KAAA6sC,gBAAAzd,OAA4BpvB,KAAA+uB,eAAA/uB,KAAA0tC,cAAA1tC,KAAA+jC,iBAAA/jC,KAAA2uB,aAAA3uB,KAAA6uB,YAAA7uB,KAAA4uB,eAAA5uB,KAAA0uB,aAAA,EAAwI1uB,KAAAgvB,cAAAI,GAAA,GAAyBpvB,KAAAqxC,gCAAA,KACxc,QAAAC,IAAA5oC,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAA,EAAAlJ,UAAAzF,QAAA,SAAAyF,UAAA,GAAAA,UAAA,OAAkE,QAAOulB,SAAAL,GAAAtpB,IAAA,MAAAsN,EAAA,QAAAA,EAAAxB,SAAAyB,EAAAskB,cAAAjkB,EAAAm3B,eAAA3oC,GAC5F,QAAAg6C,IAAA7oC,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAAiI,EAAArM,QAAAgN,EAAAi8B,KAAA/8B,EAAAw7B,GAAAtjC,EAA+B4H,GAAA,GAAAnR,EAAA,CAAQA,IAAAknC,eAAoB11B,GAAA,CAAG,GAAA4hB,GAAApzB,QAAA,IAAAA,EAAAmI,IAAA,KAAA8gB,OAAA3X,EAAA,KAA4C,IAAAT,GAAA7Q,CAAQ,IAAG,OAAA6Q,EAAA1I,KAAc,OAAA0I,IAAAihB,UAAApsB,OAA6B,MAAA8L,EAAQ,WAAAgxB,GAAA3xB,EAAAzD,MAAA,CAAsByD,IAAAihB,UAAAiR,yCAAwD,MAAAvxB,IAASX,IAAAsI,aAAW,OAAAtI,EAAgB,MAAAoY,OAAA3X,EAAA,MAAqB,OAAAtR,EAAAmI,IAAA,CAAc,GAAA+G,GAAAlP,EAAAoN,IAAa,IAAAo1B,GAAAtzB,GAAA,CAAUlP,EAAA4iC,GAAA5iC,EAAAkP,EAAA2B,EAAY,MAAAM,IAASnR,EAAA6Q,MAAI7Q,GAAAqiC,EAC9V,OADwW,QAAA7wB,EAAA9L,QAAA8L,EAAA9L,QAAA1F,EAAAwR,EAAAm+B,eAAA3vC,EAAgDwR,EAAAu0B,GAAA5zB,EAAAd,GAAUG,EAAA00B,SAAW53B,QAAA6C,GAAWD,EAAA,SAAAA,EAAA,KAAAA,EAAoB,OAChfA,IAAAM,EAAA20B,SAAAj1B,GAAkBk1B,GAAA78B,EAAAiI,GAAQ68B,GAAA9kC,EAAA8H,EAAAc,GAAUd,EAAS,QAAA4oC,IAAA9oC,GAA2B,GAAZA,IAAAhM,SAAYgM,EAAAyiB,MAAA,WAAwB,QAAAziB,EAAAyiB,MAAAzrB,KAAoB,aAAAgJ,GAAAyiB,MAAA9B,SAAgC,eAAA3gB,GAAAyiB,MAAA9B,WAAkC,QAAAooB,IAAA/oC,EAAAK,GAAmC,GAAlBL,IAAAqiB,cAAkB,OAAAriB,GAAA,OAAAA,EAAAsiB,WAAA,CAAkC,GAAAzzB,GAAAmR,EAAAgpC,SAAkBhpC,GAAAgpC,UAAA,IAAAn6C,KAAAwR,EAAAxR,EAAAwR,GAA4B,QAAA4oC,IAAAjpC,EAAAK,GAAiB0oC,GAAA/oC,EAAAK,IAAQL,IAAAkiB,YAAA6mB,GAAA/oC,EAAAK,GAAyB,QAAA6oC,MAAc,YACzW,QAAAC,IAAAnpC,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAA,MAAAlR,GAAA,MAAAA,EAAAu6C,kBAAAv6C,EAAAu6C,iBAAAC,gBAAA,IAA6O,IAA5Jx6C,EAAA,GAAA65C,IAAA1oC,EAAAK,EAAA,MAAAxR,UAAAw1B,SAAsChkB,EAAAw4B,GAAA,gBAAAx4B,EAAA,MAAAA,EAAA,KAAoCxR,EAAAmF,QAAAqM,EAAYA,EAAAsgB,UAAA9xB,EAAcslC,GAAA9zB,GAAML,EAAAmvB,IAAAtgC,EAAAmF,QAAgBy5B,GAAA,IAAAztB,EAAA0f,SAAA1f,EAAAjK,WAAAiK,GAAkCD,EAAA,IAAAC,EAAA,EAAaA,EAAAD,EAAA3O,OAAW4O,IAAA,CAAKK,EAAAN,EAAAC,EAAO,IAAA5H,GAAAiI,EAAA86B,WAAoB/iC,KAAAiI,EAAA+6B,SAAe,MAAAvsC,EAAA85C,gCAAA95C,EAAA85C,iCAAAtoC,EAAAjI,GAAAvJ,EAAA85C,gCAAA3wC,KAAAqI,EAAAjI,GAA4Hd,KAAAgyC,cAAAz6C,EAC5Q,QAAA06C,IAAAvpC,GAAe,SAAAA,GAAA,IAAAA,EAAA0f,UAAA,IAAA1f,EAAA0f,UAAA,KAAA1f,EAAA0f,WAAA,IAAA1f,EAAA0f,UAAA,iCAAA1f,EAAA2f,YACtM,QAAA6pB,IAAAxpC,EAAAK,GAAwI,GAAvHA,MAAAL,EAAA,IAAAA,EAAA0f,SAAA1f,EAAAm4B,gBAAAn4B,EAAAmR,WAAA,KAAA9Q,QAAA,IAAAA,EAAAqf,WAAArf,EAAAopC,aAAA,qBAAuHppC,EAAA,OAAAxR,GAAgBA,EAAAmR,EAAAyf,WAAczf,EAAA1H,YAAAzJ,EAAkB,WAAAs6C,IAAAnpC,EAAA,EAAAK,GAAqBgkB,YAAW,QACxN,QAAAqlB,IAAA1pC,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuB,GAAA4I,GAAAnS,EAAAi0C,mBAA4B,IAAA9hC,EAAA,CAAM,GAAAd,GAAAc,EAAAsoC,aAAsB,sBAAAlxC,GAAA,CAA0B,GAAAsH,GAAAtH,CAAQA,GAAA,WAAa,GAAA4H,GAAA8oC,GAAA5oC,EAAYR,GAAA/Q,KAAAqR,IAAW6oC,GAAAxoC,EAAAH,EAAAF,EAAA5H,OAAY,CAAuD,GAAlD4I,EAAAnS,EAAAi0C,oBAAA0G,GAAA36C,EAAAkR,GAAgCG,EAAAc,EAAAsoC,cAAkB,kBAAAlxC,GAAA,CAA0B,GAAA2F,GAAA3F,CAAQA,GAAA,WAAa,GAAA4H,GAAA8oC,GAAA5oC,EAAYnC,GAAApP,KAAAqR,IAAWwlC,GAAA,WAAcqD,GAAAxoC,EAAAH,EAAAF,EAAA5H,KAAc,MAAA0wC,IAAA5oC,GAGxF,QAAAypC,IAAA3pC,EAAAK,GAAiB,GAAAxR,GAAA,EAAAgI,UAAAzF,QAAA,SAAAyF,UAAA,GAAAA,UAAA,OAAkE,KAAA0yC,GAAAlpC,GAAA,KAAAyX,OAAA3X,EAAA,KAA8B,OAAAyoC,IAAA5oC,EAAAK,EAAA,KAAAxR,GAxRtU,GAAAgU,IAAAzU,EAAA,GAAAQ,GAAAR,EAAA,GAAAuS,GAAAvS,EAAA,GAAsY,KAAAyU,GAAA,KAAAiV,OAAA3X,EAAA,KAA2B,IAAA2C,IAAA,GAAA8tB,KAAArvB,MAE9aS,KAAA,mBAAAse,SAAA,mBAAAA,QAAA1wB,UAAA,mBAAA0wB,QAAA1wB,SAAAD,eAAA2S,GAAA,8VAAAE,GAAA5Q,OAAA6B,UAAA0G,eACAuI,MAAKC,MACwaf,KAC7a,wIAAA5M,MAAA,KAAAC,QAAA,SAAA+K,GAAsK4B,GAAA5B,GAAA,GAAAc,GAAAd,EAAA,KAAAA,EAAA,gBAAkC,sGAAA/K,QAAA,SAAA+K,GAA4H,GAAAK,GAAAL,EAAA,EAAW4B,IAAAvB,GAAA,GAAAS,GAAAT,EAAA,KAAAL,EAAA,kBAAqC,oDAAA/K,QAAA,SAAA+K,GAAyE4B,GAAA5B,GAAA,GAAAc,GAAAd,EAAA,KAAAA,EAAAxN,cAAA,eAC7b,uEAAAyC,QAAA,SAAA+K,GAA4F4B,GAAA5B,GAAA,GAAAc,GAAAd,EAAA,KAAAA,EAAA,cAAkC,8OAAAhL,MAAA,KAAAC,QAAA,SAAA+K,GAA6Q4B,GAAA5B,GAAA,GAAAc,GAAAd,EAAA,KAAAA,EAAAxN,cAAA,eAC3Y,yCAAAyC,QAAA,SAAA+K,GAA8D4B,GAAA5B,GAAA,GAAAc,GAAAd,EAAA,KAAAA,EAAA,eAAkC,sBAAA/K,QAAA,SAAA+K,GAA2C4B,GAAA5B,GAAA,GAAAc,GAAAd,EAAA,KAAAA,EAAA,eAAkC,6BAAA/K,QAAA,SAAA+K,GAAkD4B,GAAA5B,GAAA,GAAAc,GAAAd,EAAA,KAAAA,EAAA,eAAkC,mBAAA/K,QAAA,SAAA+K,GAAwC4B,GAAA5B,GAAA,GAAAc,GAAAd,EAAA,KAAAA,EAAAxN,cAAA,aAAgD,IAAA2Q,IAAA,eACzV,2jCAAAnO,MAAA,KAAAC,QAAA,SAAA+K,GAAylC,GAAAK,GAAAL,EAAAzN,QAAA4Q,GACzlCwX,EAAI/Y,IAAAvB,GAAA,GAAAS,GAAAT,EAAA,KAAAL,EAAA,cAAkC,2EAAAhL,MAAA,KAAAC,QAAA,SAAA+K,GAA0G,GAAAK,GAAAL,EAAAzN,QAAA4Q,GAAAwX,EAAuB/Y,IAAAvB,GAAA,GAAAS,GAAAT,EAAA,KAAAL,EAAA,yCAA4D,mCAAA/K,QAAA,SAAA+K,GAAwD,GAAAK,GAAAL,EAAAzN,QAAA4Q,GAAAwX,EAAuB/Y,IAAAvB,GAAA,GAAAS,GAAAT,EAAA,KAAAL,EAAA,iDAAoE,0BAAA/K,QAAA,SAAA+K,GAA+C4B,GAAA5B,GAAA,GAAAc,GAAAd,EAAA,KAAAA,EAAAxN,cAAA,cACraoP,GAAAgoC,UAAA,GAAA9oC,GAAA,qEAAsF,oCAAA7L,QAAA,SAAA+K,GAAyD4B,GAAA5B,GAAA,GAAAc,GAAAd,EAAA,KAAAA,EAAAxN,cAAA,aAE/I,IAAAq3C,IAAAhnC,GAAAinC,mDAAAnS,GAAA,MAAA5b,GAAA,MAAAD,GAAA,MAAAG,GAAA,MAAAD,GAAA,MAAAM,GAAA,MAAAD,GAAA,MAAAG,GAAA,MAAAN,GAAA,MAAAC,GAAA,MAAAM,GAAA,MAAAE,GAAA,MAAAD,GAAA,MAAA6T,GAAA,MAAA+X,GAAA,MAAAC,GAAA,MAAAC,GAAA,KACA,sBAAA3gC,gBAAAkiC,IAAA,CAA2C,GAAA1nC,IAAAwF,OAAAkiC,GAAiBpS,IAAAt1B,GAAA,iBAAsB0Z,GAAA1Z,GAAA,gBAAqByZ,GAAAzZ,GAAA,kBAAuB4Z,GAAA5Z,GAAA,qBAA0B2Z,GAAA3Z,GAAA,kBAAuBia,GAAAja,GAAA,kBAAuBga,GAAAha,GAAA,iBAAsBma,GAAAna,GAAA,qBAA0B6Z,GAAA7Z,GAAA,kBAAuB8Z,GAAA9Z,GAAA,uBAA4Boa,GAAApa,GAAA,cAAmBsa,GAAAta,GAAA,cAAmBqa,GAAAra,GAAA,eAAoBA,GAAA,eAAiBkuB,GAAAluB,GAAA,mBAAwBimC,GAAAjmC,GAAA,0BAA+BkmC,GAAAlmC,GAAA,mBAAwBmmC,GAAAnmC,GAAA,uBACnc,GAA+K8Y,IAgB/K6uB,GAhBA/uB,GAAA,kBAAApT,gBAAAC,SAA0TwT,MAcxB6kB,IAAQC,KAAA,+BAAA6J,OAAA,qCAAAC,IAAA,8BAE1SzJ,GAAA,SAAAzgC,GAAsB,yBAAAmqC,cAAAC,wBAAA,SAAA/pC,EAAAxR,EAAAkR,EAAA3H;AAAkF+xC,MAAAC,wBAAA,WAAyC,MAAApqC,GAAAK,EAAAxR,EAAAkR,EAAA3H,MAAoB4H,GAAG,SAAAA,EAAAK,GAAe,GAAAL,EAAAo4B,eAAA+H,GAAA+J,KAAA,aAAAlqC,KAAAqgC,UAAAhgC,MAA0D,CAA+F,IAA1F2pC,OAAAp6C,SAAAD,cAAA,OAAqCq6C,GAAA3J,UAAA,QAAAhgC,EAAAmwB,UAAA/yB,WAAA,SAAqD4C,EAAA2pC,GAAA74B,WAAoBnR,EAAAmR,YAAanR,EAAA1H,YAAA0H,EAAAmR,WAA6B,MAAK9Q,EAAA8Q,YAAanR,EAAAhK,YAAAqK,EAAA8Q,eAEha0O,IAAQnc,2BAAAC,qBAAAC,oBAAAC,oBAAAC,WAAAC,gBAAAC,mBAAAC,eAAAC,WAAAC,QAAAC,YAAAC,gBAAAC,cAAAC,gBAAAC,aAAA6lC,YAAA5lC,WAAAC,cAAAC,eAAAC,gBAAAC,cAAAC,iBAAAC,kBAAAC,mBAAAK,cAAAilC,aAAAhlC,cAAAC,WAAAC,SAAAC,WAAAC,WAAAC,UAAAC,UAAAC,QAAAE,eACRC,gBAAAC,eAAAC,mBAAAC,oBAAAC,oBAAAC,iBAAAC,gBAA0HikC,IAAA,wBAA8B34C,QAAAoI,KAAA6lB,IAAA5qB,QAAA,SAAA+K,GAAoCuqC,GAAAt1C,QAAA,SAAAoL,GAAuBA,IAAAL,EAAAqB,OAAA,GAAAuZ,cAAA5a,EAAAsB,UAAA,GAA6Cue,GAAAxf,GAAAwf,GAAA7f,MAC5F,IAAAigB,IAAArxB,IAAU47C,cAAcC,QAAAC,QAAAC,MAAAC,OAAAC,SAAAC,MAAAC,OAAAC,SAAAC,UAAAC,QAAAC,QAAAC,SAAA7wC,UAAA8wC,SAAAC,SAEqO5qB,GAAA,KAAAI,GAAA,KAAAC,GAAA,KACpEQ,GAAAN,EAAAgG,MAAA3F,MAG5SuM,KAAU,IAAA7rB,GAAA,IAAU,GAAAupC,MAAU35C,QAAAC,eAAA05C,GAAA,WAAoC3sC,IAAA,WAAeivB,SAASvN,OAAAvP,iBAAA,OAAAw6B,OAAsCjrB,OAAAkrB,oBAAA,OAAAD,OAAyC,MAAAvrC,GAAS6tB,MAA8H,GAIlQ/I,IAAAlB,GAAAQ,GAAAJ,GAJkQrC,MAAAC,GAAA,KAAAG,MAAAC,GAAA,KAAAH,IAAoCjO,QAAA,SAAA5T,GAAoB2hB,MAAMC,GAAA5hB,IAIhU4kB,MAAAC,MAAAzB,GAAA,KAAAC,GAAA,KAAAC,GAAA,KAAAC,GAAA,GAAA4T,KAAAzT,GAAA,GAAAyT,KAAAhS,MAAAmC,GAAA,6PAAAtyB,MAAA,KASmBuwB,IAAQkmB,aAAArmB,GAAA,4BAAAsmB,mBAAAtmB,GAAA,kCAAAumB,eAAAvmB,GAAA,8BAAAwmB,cAAAxmB,GAAA,+BAAmME,MAAME,KACnUxjB,MAAAwjB,GAAA51B,SAAAD,cAAA,OAAAwZ,MAAA,kBAAAmX,gBAAAiF,IAAAkmB,aAAAI,gBAAAtmB,IAAAmmB,mBAAAG,gBAAAtmB,IAAAomB,eAAAE,WAAA,mBAAAvrB,eAAAiF,IAAAqmB,cAAA5O,WACA,IAAA1O,IAAAjJ,GAAA,gBAAAkJ,GAAAlJ,GAAA,sBAAAmJ,GAAAnJ,GAAA,kBAAAqJ,GAAArJ,GAAA,iBAAAM,GAAA,GAAAwR,KAAAzR,GAAA,GAAAyR,KAAA2U,IAAA,gBAAAxd,GAAA,eAAAC,GAAA,qBAAAC,GAAA,+TACA,0KAAAE,GAAA,qCAA8Vqd,GAAAprC,GAAAqrC,YAAsBD,KAAK,IAWjNE,IAAAC,GAAAC,GAXiNlrC,GAAA,EAKpQmlB,GAAA9V,KAAA87B,MAAA97B,KAAA87B,MAAAvlB,GAAAC,GAAAxW,KAAAlJ,IAAA2f,GAAAzW,KAAA+7B,IAAyGjlB,GAAAzmB,GAAA2rC,8BAAAnlB,GAAAxmB,GAAAujB,yBAAAmD,MAEoEM,GAAA,KAAAD,GAAA,KAAAD,GAAA,KAIlS8kB,IAAQC,WAAA,EAAAC,QAAA,EAAAC,WAAA,EAAAC,UAAA,SAAA3sC,GAA0D,MAAAA,GAAA2sC,WAAAC,KAAAC,OAA+BvkB,iBAAA,EAAAwkB,UAAA,GAAgCviB,GAAAtC,GAAAskB,IAAAQ,GAAAn+C,MAAkB29C,IAAKS,KAAA,EAAA3jB,OAAA,IAAgBuF,GAAA3G,GAAA8kB,IAAAE,GAAAr+C,MAA4Bm+C,IAAKG,QAAA,EAAAC,QAAA,EAAAC,QAAA,EAAAC,QAAA,EAAAC,MAAA,EAAAC,MAAA,EAAA1jB,QAAA,EAAA2jB,SAAA,EAAA1jB,OAAA,EAAAC,QAAA,EAAAhB,iBAAAE,GAAAiF,OAAA,EAAAuf,QAAA,EAAAxe,cAAA,SAAAjvB,GAAiK,gBAAAA,EAAAivB,cAAAjvB,EAAAkvB,cAAAlvB,EAAAqgB,WAAArgB,EAAAqvB,UAAArvB,EAAAkvB,YAAAlvB,EAAAivB,eAAuGye,UAAA,SAAA1tC,GAAuB,mBACxeA,KAAA0tC,WAAqB1tC,IAAAmsC,SAAA,cAAAnsC,EAAA/D,MAAAgwC,GAAAjsC,EAAAktC,QAAAf,GAAAe,QAAAhB,GAAAlsC,EAAAmtC,QAAAhB,GAAAgB,SAAAjB,GAAAD,GAAA,EAAAE,GAAAnsC,GAAkGisC,KAAU0B,UAAA,SAAA3tC,GAAuB,mBAAAA,KAAA2tC,UAAAzB,MAAsC/d,GAAAlG,GAAAglB,IAAAW,GAAAh/C,MAAmBq+C,IAAKY,aAAA,IAAezf,GAAAnG,GAAA2lB,IAAAE,GAAAl/C,MAAmBm+C,IAAK9d,cAAA,IAAgBhB,GAAAhG,GAAA6lB,IAAAC,GAAAn/C,MAAmB29C,IAAKyB,cAAA,EAAAC,YAAA,EAAAC,cAAA,IAA8Czf,GAAAxG,GAAA8lB,IAAAI,GAAAv/C,MAAmB29C,IAAK6B,cAAA,SAAApuC,GAA0B,uBAAAA,KAAAouC,cAAA9tB,OAAA8tB,iBAAgEtf,GAAA7G,GAAAkmB,IAAAE,GAAAz/C,MAAmB29C,IAAKl4B,KAAA,IAAOqb,GAAAzH,GAAAomB,IAAAC,IAAgBC,IAAA,SACpfC,SAAA,IAAAC,KAAA,YAAAC,GAAA,UAAAC,MAAA,aAAAC,KAAA,YAAAC,IAAA,SAAAC,IAAA,KAAAC,KAAA,cAAAC,KAAA,cAAAC,OAAA,aAAAC,gBAAA,gBAA8LC,IAAKC,EAAA,YAAAC,EAAA,MAAAC,GAAA,QAAAC,GAAA,QAAAC,GAAA,QAAAC,GAAA,UAAAC,GAAA,MAAAC,GAAA,QAAAC,GAAA,WAAAC,GAAA,SAAAC,GAAA,IAAAC,GAAA,SAAAC,GAAA,WAAAC,GAAA,MAAAC,GAAA,OAAAC,GAAA,YAAAC,GAAA,UAAAC,GAAA,aAAAC,GAAA,YAAAC,GAAA,SAAAC,GAAA,SAAAC,IAAA,KAAAC,IAAA,KAAAC,IAAA,KAAAC,IAAA,KAAAC,IAAA,KAAAC,IAAA,KAAAC,IAAA,KACnMC,IAAA,KAAAC,IAAA,KAAAC,IAAA,MAAAC,IAAA,MAAAC,IAAA,MAAAC,IAAA,UAAAC,IAAA,aAAAC,IAAA,QAA0FvoB,IAAKwoB,IAAA,SAAAC,QAAA,UAAAC,KAAA,UAAAC,MAAA,YAC/FC,GAAAhjD,MAAWm+C,IAAKt6C,IAAA,SAAAuN,GAAgB,GAAAA,EAAAvN,IAAA,CAAU,GAAA4N,GAAAiuC,GAAAtuC,EAAAvN,MAAAuN,EAAAvN,GAAuB,qBAAA4N,EAAA,MAAAA,GAA+B,mBAAAL,EAAA/D,MAAA+D,EAAA4nB,GAAA5nB,GAAA,KAAAA,EAAA,QAAA1G,OAAAG,aAAAuG,IAAA,YAAAA,EAAA/D,MAAA,UAAA+D,EAAA/D,KAAAkzC,GAAAnvC,EAAA6nB,UAAA,mBAAgJgqB,KAAA,EAAA14B,SAAA,EAAA0Q,QAAA,EAAA2jB,SAAA,EAAA1jB,OAAA,EAAAC,QAAA,EAAA+nB,OAAA,EAAA5nB,OAAA,EAAAnB,iBAAAE,GAAAnB,SAAA,SAAA9nB,GAAsH,mBAAAA,EAAA/D,KAAA2rB,GAAA5nB,GAAA,GAAkC6nB,QAAA,SAAA7nB,GAAqB,kBAAAA,EAAA/D,MAAA,UAAA+D,EAAA/D,KAAA+D,EAAA6nB,QAAA,GAAuD0B,MAAA,SAAAvpB,GAAmB,mBACveA,EAAA/D,KAAA2rB,GAAA5nB,GAAA,YAAAA,EAAA/D,MAAA,UAAA+D,EAAA/D,KAAA+D,EAAA6nB,QAAA,KAA+DmG,GAAA/F,GAAA2pB,IAAAG,GAAAnjD,MAAmBq+C,IAAKxpB,UAAA,EAAA1c,MAAA,EAAAC,OAAA,EAAAgrC,SAAA,EAAAC,mBAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,MAAA,EAAAC,YAAA,EAAAC,UAAA,IAA+GvjB,GAAA9G,GAAA8pB,IAAAQ,GAAA3jD,MAAmBm+C,IAAKyF,QAAA,EAAAC,cAAA,EAAAC,eAAA,EAAA5oB,OAAA,EAAAC,QAAA,EAAAF,QAAA,EAAA2jB,SAAA,EAAAzkB,iBAAAE,KAAuGoF,GAAApG,GAAAsqB,IAAAI,GAAA/jD,MAAmB29C,IAAK/xB,aAAA,EAAAyzB,YAAA,EAAAC,cAAA,IAA6Cvf,GAAA1G,GAAA0qB,IAAAC,GAAAhkD,MAAmBq+C,IAAK4F,OAAA,SAAA7yC,GAAmB,gBAAAA,KAAA6yC,OAAA,eAAA7yC,MAAA8yC,YAAA,GACrbC,OAAA,SAAA/yC,GAAmB,gBAAAA,KAAA+yC,OAAA,eAAA/yC,MAAAgzC,YAAA,cAAAhzC,MAAAizC,WAAA,GAA8FC,OAAA,EAAAC,UAAA,IAAsBtkB,GAAA5G,GAAA2qB,IAAAzpB,IAAA,YAAAS,GAAA5nB,IAAA,oBAAAse,QAAA8yB,GAAA,IAAuEpxC,KAAA,gBAAApS,YAAAwjD,GAAAxjD,SAAAyjD,aAA0D,IAAA1jB,IAAA3tB,IAAA,aAAAse,UAAA8yB,GAAAnpB,GAAAjoB,MAAA4nB,IAAAwpB,IAAA,EAAAA,IAAA,IAAAA,IAAA3pB,GAAAnwB,OAAAG,aAAA,IAAA+vB,MACDG,MAEvQS,IAAQvjB,SAAAysC,QAAAC,YAAAC,oBAAAC,SAAAC,SAAA3gC,UAAA4gC,YAAA7sC,SAAA8sC,UAAAC,OAAA3/B,QAAA4/B,QAAAxmC,OAAAymC,SAAqY/oB,GAAA,KAAAG,GAAA,KACnWqE,KAAU,IAAAxtB,GAAA,CAAO,GAAAgyC,GAAO,IAAAhyC,GAAA,CAAO,GAAAiyC,IAAA,WAAArkD,SAA4B,KAAAqkD,GAAA,CAAQ,GAAAC,IAAAtkD,SAAAD,cAAA,MAAqCukD,IAAA98C,aAAA,qBAAqC68C,GAAA,kBAAAC,IAAAC,QAAkCH,GAAAC,OAAMD,MAAWxkB,IAAAwkB,MAAApkD,SAAAyjD,cAAA,EAAAzjD,SAAAyjD,cAC6H,GAAA1nB,IAAA,kBAAA/5B,QAAAuuB,GAAAvuB,OAAAuuB,GAAAsL,GAAAG,GAAAh6B,OAAA6B,UAAA0G,eAIvWs1B,GAAAztB,IAAA,gBAAApS,WAAA,IAAAA,SAAAyjD,aAAA3mB,GAAA,KAAAU,GAAA,KAAAD,GAAA,KAAAV,KAEAhH,IAAA,mjBAAAzwB,MAAA,KACA,GAAGywB,GAAA,oRAAAzwB,MAAA,QAAqSywB,GAAAqmB,GAAA,EAAS,QAAAsI,IAAA,qFAAAp/C,MAAA,KAAAq/C,GAAA,EAAgHA,GAAAD,GAAAhjD,OAAaijD,KAAA3uB,GAAAliB,IAAA4wC,GAAAC,IAAA,EAAsBtyC,GAAA,yCACpcA,EAAA,yCAA4CA,EAAA,+CAAkDA,EAAA,+CAAkDD,EAAA,+EAAA9M,MAAA,MAA8F8M,EAAA,kGAAA9M,MAAA,MAAiH8M,EAAA,mEAAsEA,EAAA,8EAAA9M,MAAA,MACra8M,EAAA,kFAAA9M,MAAA,MAAiG8M,EAAA,oFAAA9M,MAAA,KAAmG,IAkGkJwrC,IAAAX,GAAAC,GAAAY,GAlGlJX,GAAA,sNAAA/qC,MAAA,KAAA24B,GAAA,GAAAiD,KAAA,0CAAA57B,MAAA,KAAA0nC,OAAAqD,KAGvHrS,GAAA,kBAAApd,KAAAgkC,SAAA72C,SAAA,IAAAua,MAAA,GAY4OwuB,GAAA,KAAAE,GAAA,KAClEvB,GAAA,kBAAAhE,uBAAA,OAAAwE,GAAA,kBAAA4O,2BAAA,OACiCC,GAAA,EAAiEC,GAAAnkC,KAAAgkC,SAAA72C,SAAA,IAAAua,MAAA,GAAAyY,GAAA,gBAAAgkB,GAAA/jB,GAAA,gBAAA+jB,GAAAtlB,GAAA,oBAAAslB,GAAA9jB,GAAA,iBAAA8jB,GAEvR1jB,MAAAD,MAA2JI,MAASpxB,GAAA+wB,GAAAK,IAAA/vB,GAAA0vB,OAAAgB,GAAAX,GAGtOqR,GAAA,KAAAF,GAAA,KAAA7P,GAAA7xB,GAAAujB,yBAAAwO,GAAA/xB,GAAAqkB,0BAAA6N,GAAAlyB,GAAA+zC,wBAAAtO,GAAAzlC,GAAAg0C,qBAAAC,GAAAj0C,GAAAk0C,sBAAAC,GAAAn0C,GAAAqrC,aAAAha,GAAArxB,GAAAo0C,iCAAA9iB,GAAAtxB,GAAAq0C,2BAAA9iB,GAAAvxB,GAAA2rC,8BAAAna,GAAAxxB,GAAAskB,wBAAAmN,GAAAzxB,GAAAs0C,qBAAA5iB,GAAA1xB,GAAAu0C,sBAAA9Q,MAAqXuD,GAAA,SAAAiN,MAAA,aAA+B5hB,GAAA,KAAAJ,GAAA,KAAAG,MAAAoiB,GAAAL,KAAAtzC,GAAA,IAAA2zC,GAAAL,GAAA,WAAsD,MAAAA,MAAAK,IAE7O1R,GAAAoG,GAAAuL,wBAAgK7hB,GAAA1C,GAAA,MAAAwC,GAAA,KAAAD,GAAA,KAAAD,GAAA,KAE5FiC,MAMgIkB,OAAAzzB,IAAAvF,WAAA+4B,KAEjaP,IAAQuf,UAAA,SAAAr1C,GAAsB,SAAAA,IAAA+1B,kBAAA9T,GAAAjiB,QAAyCs1C,gBAAA,SAAAt1C,EAAAK,EAAAxR,GAAiCmR,IAAA+1B,eAAoB,IAAAh2B,GAAAk9B,KAAA7kC,EAAAsjC,GAAA17B,GAAAgB,EAAA4zB,GAAA70B,EAAA3H,EAA6B4I,GAAA+zB,QAAA10B,EAAY,SAAAxR,GAAA,OAAAA,IAAAmS,EAAAg0B,SAAAnmC,GAAqComC,GAAAj1B,EAAAgB,GAAQk8B,GAAAl9B,EAAA5H,EAAA2H,IAAUo2B,oBAAA,SAAAn2B,EAAAK,EAAAxR,GAAqCmR,IAAA+1B,eAAoB,IAAAh2B,GAAAk9B,KAAA7kC,EAAAsjC,GAAA17B,GAAAgB,EAAA4zB,GAAA70B,EAAA3H,EAA6B4I,GAAAhK,IAAA,EAAQgK,EAAA+zB,QAAA10B,EAAY,SAAAxR,GAAA,OAAAA,IAAAmS,EAAAg0B,SAAAnmC,GAAqComC,GAAAj1B,EAAAgB,GAAQk8B,GAAAl9B,EAAA5H,EAAA2H,IAAUw1C,mBAAA,SAAAv1C,EAAAK,GAAkCL,IAAA+1B,eAAoB,IAAAlnC,GAAAouC,KAAAl9B,EAAA27B,GAAA17B,GAAA5H,EAAAw8B,GAAA/lC,EAAAkR,EAA6B3H,GAAApB,IAAA,EAAQ,SAAAqJ,GAAA,OAAAA,IAAAjI,EAAA48B,SACxd30B,GAAG40B,GAAAj1B,EAAA5H,GAAQ8kC,GAAAl9B,EAAAD,EAAAlR,KAI+R+oC,GAAA3mC,MAAAC,QAYoHmsC,GAAAtG,OAAAqG,GAAArG,OAAAe,MAA6BI,GAAArH,GAAAiH,IAAAG,GAAApH,GAAAiH,IAAAE,GAAAnH,GAAAiH,IACU31B,GAAA0uB,GAAA,GACRsI,GAAA,KAAAD,GAAA,KAAAD,MAI9ZO,MAAyGM,GAAA+P,GAAA2L,uBAAAzY,GAAA8M,GAAAuL,wBAAAvb,GAAA,EAAA52B,GAAA,KAAAG,GAAA,KAAAC,GAAA,KAAA+2B,MAAAH,MAexIE,IAAQsb,YAAAzhB,GAAA0hB,YAAAhc,GAAAic,WAAAjc,GAAA1wB,UAAA0wB,GAAAkc,oBAAAlc,GAAAmc,gBAAAnc,GAAAoc,QAAApc,GAAAqc,WAAArc,GAAAsc,OAAAtc,GAAA9wB,SAAA8wB,GAAAuc,cAAAvc,GAAAwc,iBAAAxc,GAAAyc,cAAAzc,GAAA0c,iBAAA1c,GAAA2c,oBAAA3c,GAAA4c,6BAA+Qvc,IAAK0b,YAAAzhB,GAAA0hB,YAAA,SAAA11C,EAAAK,GAAkF,MAAzCg6B,MAAAhY,eAAAriB,EAAA,SAAAK,EAAA,KAAAA,GAAyCL,GAAS21C,WAAA3hB,GAAAhrB,UAAAqzB,GAAAuZ,oBAAA,SAAA51C,EAAAK,EAAAxR,GAA0G,MAA1CA,GAAA,OAAAA,GAAA,SAAAA,IAAA6tC,QAAA18B,IAAA,KAA0Cm8B,GAAA,IAAAK,GAAAvhC,KAAA,KACjeoF,EAAAL,GAAAnR,IAAQgnD,gBAAA,SAAA71C,EAAAK,GAA+B,MAAA87B,IAAA,IAAAn8B,EAAAK,IAAmBy1C,QAAA,SAAA91C,EAAAK,GAAuB,GAAAxR,GAAAwrC,IAA2D,OAAhDh6B,GAAA,SAAAA,EAAA,KAAAA,EAAoBL,MAAMnR,EAAAwzB,eAAAriB,EAAAK,GAAsBL,GAAS+1C,WAAA,SAAA/1C,EAAAK,EAAAxR,GAA4B,GAAAkR,GAAAs6B,IAA6K,OAAlKh6B,GAAA,SAAAxR,IAAAwR,KAAoBN,EAAAsiB,cAAAtiB,EAAAs0B,UAAAh0B,EAA8BL,EAAAD,EAAAw6B,OAAW9F,QAAA,KAAAuG,SAAA,KAAAL,oBAAA36B,EAAA+6B,kBAAA16B,GAAsEL,IAAAg7B,SAAAW,GAAA1gC,KAAA,KAAAgI,GAAAjD,IAA+BD,EAAAsiB,cAAAriB,IAA0Bg2C,OAAA/Z,GAAArzB,SAAAizB,GAAAoa,cAAAtZ,GAAAuZ,iBAAA,SAAAl2C,GAAqE,GAAAK,GAAAw7B,GAAA77B,GAAAnR,EAAAwR,EAAA,GAAAN,EAAAM,EAAA,EACrY,OAD+Zg8B,IAAA,WAAc,GAAAh8B,GAAA08B,GAAAC,UACreD,IAAAC,WAAA,CAAgB,KAAIj9B,EAAAC,GAAK,QAAQ+8B,GAAAC,WAAA38B,KAAiBL,IAAMnR,GAASsnD,cAAA,WAA0B,GAAAn2C,GAAA67B,OAAAx7B,EAAAL,EAAA,EAA+C,OAA3BA,GAAA88B,GAAA7hC,KAAA,KAAA+E,EAAA,IAAqBi8B,GAAAj8B,IAAMA,EAAAK,IAAY+1C,iBAAA,SAAAp2C,EAAAK,EAAAxR,GAAkC,GAAAkR,GAAAs6B,IAAwF,OAA7Et6B,GAAAsiB,eAAiBgU,MAAMkF,YAAAl7B,EAAAo7B,YAAA,MAA+BlhC,OAAAyF,EAAAw7B,UAAA3sC,GAAuBysC,GAAAv7B,EAAAC,EAAAK,EAAAxR,IAAmBwnD,oBAAA,WAAgC,GAAApd,GAAA,CAAO,GAAAj5B,MAAAK,EAAAiwB,GAAA,WAA+D,KAAtCtwB,UAAAnR,EAAA,MAAA2lD,MAAA/2C,SAAA,MAAsCqa,MAAA3X,EAAA,QAAqBtR,EAAAgtC,GAAAx7B,GAAA,EAChZ,OAD6Z,QAAA4C,GAAAq0B,QAAAr0B,GAAAkf,OAAA,IAAA2Z,GAAA,aAA8CjtC,EAAA,MAAA2lD,MAAA/2C,SAAA,MACzd,cAAc4C,EAA0C,MAAjCA,GAAA,MAAAm0C,MAAA/2C,SAAA,IAA2Bo+B,GAAAx7B,GAAMA,GAASi2C,6BAA6Btc,IAAKyb,YAAAzhB,GAAA0hB,YAAA9Y,GAAA+Y,WAAA3hB,GAAAhrB,UAAAszB,GAAAsZ,oBAAAnZ,GAAAoZ,gBAAAtZ,GAAAuZ,QAAAjZ,GAAAkZ,WAAArb,GAAAsb,OAAA9Z,GAAAtzB,SAAA,WAA0J,MAAA8xB,IAAAD,KAAcwb,cAAAtZ,GAAAuZ,iBAAA,SAAAl2C,GAA+C,GAAAK,GAAAq6B,GAAAD,IAAA5rC,EAAAwR,EAAA,GAAAN,EAAAM,EAAA,EAAqH,OAA1Fi8B,IAAA,WAAc,GAAAj8B,GAAA08B,GAAAC,UAAoBD,IAAAC,WAAA,CAAgB,KAAIj9B,EAAAC,GAAK,QAAQ+8B,GAAAC,WAAA38B,KAAiBL,IAAMnR,GAASsnD,cAAA,WAA0B,GAAAn2C,GAAA06B,GAAAD,IAAA,EAAgB,QAAAyB,KAAAloC,QAClegM,IAAGo2C,iBAAAxa,GAAAya,oBAAA,WAAoD,MAAA3b,IAAAD,IAAA,IAAiB6b,6BAA6Bpc,IAAKub,YAAAzhB,GAAA0hB,YAAA9Y,GAAA+Y,WAAA3hB,GAAAhrB,UAAAszB,GAAAsZ,oBAAAnZ,GAAAoZ,gBAAAtZ,GAAAuZ,QAAAjZ,GAAAkZ,WAAA9a,GAAA+a,OAAA9Z,GAAAtzB,SAAA,WAA0J,MAAAqyB,IAAAR,KAAcwb,cAAAtZ,GAAAuZ,iBAAA,SAAAl2C,GAA+C,GAAAK,GAAA46B,GAAAR,IAAA5rC,EAAAwR,EAAA,GAAAN,EAAAM,EAAA,EAAqH,OAA1Fi8B,IAAA,WAAc,GAAAj8B,GAAA08B,GAAAC,UAAoBD,IAAAC,WAAA,CAAgB,KAAIj9B,EAAAC,GAAK,QAAQ+8B,GAAAC,WAAA38B,KAAiBL,IAAMnR,GAASsnD,cAAA,WAA0B,GAAAn2C,GAAAi7B,GAAAR,IAAA,EAAgB,QAAAyB,KAAAloC,QACzegM,IAAGo2C,iBAAAxa,GAAAya,oBAAA,WAAoD,MAAApb,IAAAR,IAAA,IAAiB6b,6BAA6BjY,GAAAwL,GAAA0M,kBAAAxiB,MAYrG8K,IAAQvc,WAAA,KAAA0mB,UAAA,EAURxI,IAAA,SAAAxgC,EAAAK,GAAiB,OAAAxR,GAAAwR,EAAAoiB,MAAkB,OAAA5zB,GAAS,CAAE,OAAAA,EAAAmI,KAAA,IAAAnI,EAAAmI,IAAAgJ,EAAAhK,YAAAnH,EAAA8xB,eAAmD,QAAA9xB,EAAAmI,KAAA,OAAAnI,EAAA4zB,MAAA,CAAmC5zB,EAAA4zB,MAAAza,OAAAnZ,EAAiBA,IAAA4zB,KAAU,UAAS,GAAA5zB,IAAAwR,EAAA,KAAe,MAAK,OAAAxR,EAAA6zB,SAAiB,CAAE,UAAA7zB,EAAAmZ,QAAAnZ,EAAAmZ,SAAA3H,EAAA,MAAwCxR,KAAAmZ,OAAWnZ,EAAA6zB,QAAA1a,OAAAnZ,EAAAmZ,OAA0BnZ,IAAA6zB,UAAcmd,GAAA,aAC1SC,GAAA,SAAA9/B,EAAAK,EAAAxR,EAAAkR,GAAqB,GAAA3H,GAAA4H,EAAA04B,aAAsB,IAAAtgC,IAAA2H,EAAA,CAAUC,EAAAK,EAAAsgB,UAAckX,GAAAK,GAAAlkC,QAAe,IAAAgN,GAAA,IAAW,QAAAnS,GAAU,YAAAuJ,EAAAwlB,EAAA5d,EAAA5H,GAAuB2H,EAAA6d,EAAA5d,EAAAD,GAAUiB,IAAK,MAAM,cAAA5I,EAAAumB,EAAA3e,EAAA5H,GAAwB2H,EAAA4e,EAAA3e,EAAAD,GAAUiB,IAAK,MAAM,cAAA5I,EAAAxJ,MAAoBwJ,GAAI9G,MAAA,SAAeyO,EAAAnR,MAAMmR,GAAIzO,MAAA,SAAe0P,IAAK,MAAM,gBAAA5I,EAAA4mB,EAAAhf,EAAA5H,GAA0B2H,EAAAif,EAAAhf,EAAAD,GAAUiB,IAAK,MAAM,2BAAA5I,GAAAqR,SAAA,kBAAA1J,GAAA0J,UAAAzJ,EAAAkgC,QAAArQ,IAAqF7P,EAAAnxB,EAAAkR,EAAQ,IAAAG,EAAMrR,GAAA,IAAO,KAAA6R,IAAAtI,GAAA,IAAA2H,EAAA5F,eAAAuG,IAAAtI,EAAA+B,eAAAuG,IAAA,MAAAtI,EAAAsI,GAAA,aACpaA,EAAA,CAAG,GAAAhB,GAAAtH,EAAAsI,EAAW,KAAAR,IAAAR,KAAAvF,eAAA+F,KAAArR,UAAyCA,EAAAqR,GAAA,QAAW,4BAAAQ,GAAA,aAAAA,GAAA,mCAAAA,GAAA,6BAAAA,GAAA,cAAAA,IAAAa,GAAApH,eAAAuG,GAAAM,oBAAAhJ,KAAA0I,EAAA,MAAkM,KAAAA,IAAAX,GAAA,CAAY,GAAAhC,GAAAgC,EAAAW,EAAiC,IAAtBhB,EAAA,MAAAtH,IAAAsI,GAAA,OAAsBX,EAAA5F,eAAAuG,IAAA3C,IAAA2B,IAAA,MAAA3B,GAAA,MAAA2B,GAAA,aAAAgB,EAAA,GAAAhB,EAAA,CAAuE,IAAAQ,IAAAR,MAAAvF,eAAA+F,IAAAnC,KAAA5D,eAAA+F,KAAArR,UAAkEA,EAAAqR,GAAA,GAAW,KAAAA,IAAAnC,KAAA5D,eAAA+F,IAAAR,EAAAQ,KAAAnC,EAAAmC,KAAArR,IACrcA,MAAKA,EAAAqR,GAAAnC,EAAAmC,QAAarR,KAAAmS,YAAAhJ,KAAA0I,EAAA7R,MAAAkP,MAAoC,4BAAA2C,GAAA3C,MAAAkyB,OAAA,OAAAvwB,MAAAuwB,OAAA,aAAAlyB,GAAA2B,IAAA3B,IAAAiD,SAAAhJ,KAAA0I,EAAA3C,IAAA,aAAA2C,EAAA,gBAAA3C,IAAA,gBAAAA,KAAAiD,SAAAhJ,KAAA0I,EAAA,GAAA3C,GAAA,mCAAA2C,GAAA,6BAAAA,IAAAa,GAAApH,eAAAuG,IAAA,MAAA3C,GAAA,aAAA2C,GAAAQ,GAAA,SAAAlB,GAAAgB,GAAAtB,IAAA3B,IAAAiD,OAAA,gBAAAjD,IAAA,OAAAA,KAAAqe,WAAAmU,GAAAxyB,EAAAN,YAAAuD,SAAAhJ,KAAA0I,EAAA3C,IAAualP,IAAAmS,SAAAhJ,KAAA,QAC7dnJ,EAAG,IAAA6R,GAAAM,GAAQX,EAAA+zB,YAAA1zB,KAAAL,EAAA8hB,OAAA,KAAgCue,GAAA,SAAA1gC,EAAAK,EAAAxR,EAAAkR,GAAqBlR,IAAAkR,IAAAM,EAAA8hB,OAAA,GAciM,IAiDsJkkB,IAjDtJP,GAAA,kBAAAt/B,iBAAA2wB,IAC4J+L,GAAA,kBAAAsT,iBAAA5lB,IAkBpRwU,GAAA90B,KAAAmmC,KAAA7R,GAAAiF,GAAA2L,uBAAA5P,GAAAiE,GAAA0M,kBAAA70C,GAAA,EAAA4B,GAAA,KAAAlB,GAAA,KAAAvC,GAAA,EAAA6lC,GAAA,EAAAD,GAAA5U,GAAA,GAAAttB,GAAA,EAAAuhC,GAAA,KAAAtB,GAAA,EAAAnO,GAAA,EAAAsL,GAAA,EAAA0E,GAAA,EAAA1B,GAAA,KAAAX,GAAA,EAAAnC,GAAAroB,IAA4L/V,GAAA,KAAA4+B,MAAAC,GAAA,KAAAG,GAAA,KAAAmG,MAAArB,GAAA,KAAAsB,GAAA,GAAAG,MAAAC,MAAAhE,GAAA,KAAAL,GAAA,EAAAC,GAAA,KAAAP,MAAAC,GAAA,EAAAG,GAAA,EAAAmD,GAAA,KAAAC,KA+BrUT,IAAA,SAAArmC,EAAAK,EAAAxR,GAAmB,GAAAkR,GAAAM,EAAAyzB,KAAc,WAAA9zB,EAAA,GAAAA,EAAA04B,gBAAAr4B,EAAA04B,cAAA53B,GAAAnN,QAAA+/B,UAAiE,SAAAllC,EAAAkR,GAA+C,CAAW,OAANg0B,MAAM1zB,EAAArJ,KAAc,OAAAunC,GAAAl+B,GAAai5B,IAAK,MAAM,QAAAf,GAAAl4B,EAAa,MAAM,QAAAgxB,GAAAhxB,EAAApE,OAAA01B,GAAAtxB,EAAyB,MAAM,QAAA03B,GAAA13B,IAAAsgB,UAAA2D,cAAuC,MAAM,SAAAvkB,EAAAM,EAAAq4B,cAAApnC,KAAgC,IAAA8G,GAAAiI,EAAApE,KAAAsgB,QAAsB3b,IAAA2yB,GAAAn7B,EAAAo7B,eAAsBp7B,EAAAo7B,cAAAzzB,CAAkB,MAAM,mBAAAM,EAAAgiB,cAAmC,YAAAxzB,EAAAwR,EAAAoiB,MAAAiR,YAAA+K,GAAAz+B,EAAAK,EAAAxR,IAA+C+R,GAAAuB,GAAA,EAAAA,GAAAnO,SAAiBqM,EAAAk9B,GAAAv9B,EAAAK,EAAAxR,GAAY,OACpfwR,IAAAqiB,QAAA,KAAiB9hB,IAAAuB,GAAA,EAAAA,GAAAnO,QAAiB,MAAM,SAA+B,GAA/B+L,EAAA,KAAAlR,EAAAwR,EAAAqzB,YAA+B,QAAA1zB,EAAAmiB,OAAA,CAAqB,GAAApiB,EAAA,MAAA2/B,IAAA1/B,EAAAK,EAAAxR,EAAsBwR,GAAA8hB,OAAA,GAAwG,GAA5F/pB,EAAAiI,EAAAgiB,cAAkB,OAAAjqB,MAAAinC,UAAA,KAAAjnC,EAAAonC,KAAA,KAAApnC,EAAA4+B,WAAA,MAA2Dp2B,GAAAuB,MAAAnO,SAAe+L,EAAA,KAAW,YAAiB,uBAAAM,GAAAyzB,MAAA,EAAA+J,GAAA79B,EAAAK,EAAAxR,GAA2C,MAAA0uC,IAAAv9B,EAAAK,EAAAxR,GAD/LklC,GAAA,WAAA/zB,EAAAmiB,WACgN4R,MAAqB,QAAV1zB,EAAAyzB,MAAA,EAAUzzB,EAAArJ,KAAc,OAAoJ,GAApJ+I,EAAAM,EAAApE,KAAgB,OAAA+D,MAAAkiB,UAAA,KAAA7hB,EAAA6hB,UAAA,KAAA7hB,EAAA8hB,OAAA,GAAyDniB,EAAAK,EAAA04B,aAAiB3gC,EAAA44B,GAAA3wB,EAAAP,GAAA9L,SAAkB2/B,GAAAtzB,EAAAxR,GAAQuJ,EAAAwhC,GAAA,KAAAv5B,EAAAN,EAAAC,EAAA5H,EAAAvJ,GAAqBwR,EAAA8hB,OAAA,EAAW,gBACze/pB,IAAA,OAAAA,GAAA,kBAAAA,GAAA1I,QAAA,SAAA0I,EAAAgkB,SAAA,CAAuH,GAAhD/b,EAAArJ,IAAA,EAAQqJ,EAAAgiB,cAAA,KAAqBhiB,EAAA+zB,YAAA,KAAmB/C,GAAAtxB,GAAA,CAAU,GAAAiB,KAAS2wB,IAAAtxB,OAAMW,KAAUX,GAAAgiB,cAAA,OAAAjqB,EAAAy9B,OAAA,SAAAz9B,EAAAy9B,MAAAz9B,EAAAy9B,MAAA,KAA8D1B,GAAA9zB,EAAM,IAAAH,GAAAH,EAAAw2B,wBAAiC,mBAAAr2B,IAAAq1B,GAAAl1B,EAAAN,EAAAG,EAAAF,GAAmC5H,EAAA0E,QAAAg5B,GAAaz1B,EAAAsgB,UAAAvoB,EAAcA,EAAA29B,gBAAA11B,EAAoB+1B,GAAA/1B,EAAAN,EAAAC,EAAAnR,GAAYwR,EAAA+9B,GAAA,KAAA/9B,EAAAN,KAAAiB,EAAAnS,OAAsBwR,GAAArJ,IAAA,EAAAmmC,GAAA,KAAA98B,EAAAjI,EAAAvJ,GAAAwR,IAAAoiB,KAAsC,OAAApiB,EAAS,SAAAjI,EAAAiI,EAAAuZ,WAAwB5Z,GAAA,CAC9W,OADiX,OAAAA,MAAAkiB,UAAA,KAAA7hB,EAAA6hB,UAAA,KAAA7hB,EAAA8hB,OAAA,GAC7bniB,EAAAK,EAAA04B,aAAiB/3B,EAAA5I,EAAAykB,MAAUzkB,EAAA4I,EAAA5I,EAAAwkB,UAAgBvc,EAAApE,KAAA7D,EAAS4I,EAAAX,EAAArJ,IAAAqxC,GAAAjwC,GAAc4H,EAAAizB,GAAA76B,EAAA4H,GAAUgB,GAAU,OAAAX,EAAAu9B,GAAA,KAAAv9B,EAAAjI,EAAA4H,EAAAnR,EAA0B,MAAAmR,EAAQ,QAAAK,EAAA49B,GAAA,KAAA59B,EAAAjI,EAAA4H,EAAAnR,EAA0B,MAAAmR,EAAQ,SAAAK,EAAAi9B,GAAA,KAAAj9B,EAAAjI,EAAA4H,EAAAnR,EAA2B,MAAAmR,EAAQ,SAAAK,EAAAm9B,GAAA,KAAAn9B,EAAAjI,EAAA66B,GAAA76B,EAAA6D,KAAA+D,GAAAD,EAAAlR,EAAwC,MAAAmR,GAAQ,KAAA8X,OAAA3X,EAAA,IAAA/H,EAAA,KAA0B,MAAAiI,EAAS,cAAAN,GAAAM,EAAApE,KAAA7D,EAAAiI,EAAA04B,aAAA3gC,EAAAiI,EAAAuZ,cAAA7Z,EAAA3H,EAAA66B,GAAAlzB,EAAA3H,GAAAwlC,GAAA59B,EAAAK,EAAAN,EAAA3H,EAAAvJ,EAAoF,cAAAkR,GAAAM,EAAApE,KAAA7D,EAAAiI,EAAA04B,aAAA3gC,EAAAiI,EAAAuZ,cAAA7Z,EAAA3H,EAAA66B,GAAAlzB,EAAA3H,GAAA6lC,GAAAj+B,EAAAK,EAAAN,EAAA3H,EAAAvJ,EAAoF,QAA6B,GAA7B0vC,GAAAl+B,GAAaN,EAAAM,EAAA+zB,YAAgB,OAAAp0B,GAAA,OAAAD,EAAA,KAAA+X,OAAA3X,EAAA,KACvW,IAA9GJ,EAAAM,EAAA04B,aAAiB3gC,EAAAiI,EAAAgiB,cAAkBjqB,EAAA,OAAAA,IAAA+E,QAAA,KAA0Bw3B,GAAA30B,EAAAK,GAAQ80B,GAAA90B,EAAAN,EAAA,KAAAlR,GAAekR,EAAAM,EAAAgiB,cAAAllB,QAA0B4C,IAAA3H,EAAAkhC,KAAAj5B,EAAAk9B,GAAAv9B,EAAAK,EAAAxR,OAA0B,CAA2F,GAAtFuJ,EAAAiI,EAAAsgB,WAAc3f,EAAA5I,EAAAisB,WAAA6U,GAAA/I,GAAA9vB,EAAAsgB,UAAA2D,cAAAnT,YAAAgoB,GAAA94B,EAAAW,EAAAi4B,OAAwEj4B,EAAA,CAA0C,GAApChB,EAAA5H,EAAAuwC,gCAAoC,MAAA3oC,EAAA,IAAA5H,EAAA,EAAmBA,EAAA4H,EAAA5O,OAAWgH,GAAA,EAAA4I,EAAAhB,EAAA5H,GAAA4I,EAAAy4B,8BAAAz5B,EAAA5H,EAAA,GAAAohC,GAAAxhC,KAAAgJ,EAA+E,KAAjBnS,EAAAuuC,GAAA/8B,EAAA,KAAAN,EAAAlR,GAAiBwR,EAAAoiB,MAAA5zB,EAAcA,GAAEA,EAAAszB,MAAAtzB,EAAAszB,SAAA,KAAAtzB,IAAA6zB,YAAqCya,IAAAn9B,EAAAK,EAAAN,EAAAlR,GAAAyqC,IAAsBj5B,KAAAoiB,MAAU,MAAApiB,EAAS,cAAAk4B,IAAAl4B,GAAA,OAAAL,GACxdg5B,GAAA34B,GAAAN,EAAAM,EAAApE,KAAA7D,EAAAiI,EAAA04B,aAAA/3B,EAAA,OAAAhB,IAAA04B,cAAA,KAAAx4B,EAAA9H,EAAAmG,SAAAyxB,GAAAjwB,EAAA3H,GAAA8H,EAAA,YAAAc,GAAAgvB,GAAAjwB,EAAAiB,KAAAX,EAAA8hB,OAAA,IAAA6b,GAAAh+B,EAAAK,GAAA88B,GAAAn9B,EAAAK,EAAAH,EAAArR,GAAAwR,EAAAoiB,KAAyJ,sBAAAziB,GAAAg5B,GAAA34B,GAAA,IAAmC,eAAAo+B,IAAAz+B,EAAAK,EAAAxR,EAAyB,cAAAkpC,IAAA13B,IAAAsgB,UAAA2D,eAAAvkB,EAAAM,EAAA04B,aAAA,OAAA/4B,EAAAK,EAAAoiB,MAAA4a,GAAAh9B,EAAA,KAAAN,EAAAlR,GAAAsuC,GAAAn9B,EAAAK,EAAAN,EAAAlR,GAAAwR,EAAAoiB,KAAmH,eAAA1iB,GAAAM,EAAApE,KAAA7D,EAAAiI,EAAA04B,aAAA3gC,EAAAiI,EAAAuZ,cAAA7Z,EAAA3H,EAAA66B,GAAAlzB,EAAA3H,GAAAklC,GAAAt9B,EAAAK,EAAAN,EAAA3H,EAAAvJ,EAAqF,cAAAsuC,IAAAn9B,EAAAK,IAAA04B,aAAAlqC,GAAAwR,EAAAoiB,KAA+C,cAAA0a,IAAAn9B,EAAAK,IAAA04B,aAAAx6B,SAC5c1P,GAAAwR,EAAAoiB,KAAW,eAAA0a,IAAAn9B,EAAAK,IAAA04B,aAAAx6B,SAAA1P,GAAAwR,EAAAoiB,KAAyD,SAAAziB,EAAA,CAAWD,EAAAM,EAAApE,KAAAsgB,SAAkBnkB,EAAAiI,EAAA04B,aAAiB74B,EAAAG,EAAAq4B,cAAkB13B,EAAA5I,EAAA9G,KAAU,IAAAoO,GAAAW,EAAApE,KAAAsgB,QAA8D,IAAxC3b,GAAA2yB,GAAA7zB,EAAA8zB,eAAsB9zB,EAAA8zB,cAAAxyB,EAAkB,OAAAd,EAAA,GAAAR,EAAAQ,EAAA5O,MAAA0P,EAAA2qB,GAAAjsB,EAAAsB,GAAA,uBAAAjB,GAAA22C,sBAAA32C,EAAA22C,sBAAAh3C,EAAAsB,GAAA,gBAAAA,GAAoI,GAAAd,EAAA3B,WAAAnG,EAAAmG,WAAA4C,GAAAnN,QAAA,CAAwCqM,EAAAk9B,GAAAv9B,EAAAK,EAAAxR,EAAY,MAAAmR,QAAS,KAAAN,EAAAW,EAAAoiB,MAAA,OAAA/iB,MAAAsI,OAAA3H,GAA0C,OAAAX,GAAS,CAAE,GAAA3B,GAAA2B,EAAAk0B,YAAqB,WAAA71B,EAAA,CAAamC,EAAAR,EAAA+iB,KAAU,QAAA/hB,GAC9e3C,EAAA81B,aAAe,OAAAnzB,GAAS,CAAE,GAAAA,EAAAnM,UAAAwL,GAAA,KAAAW,EAAAuzB,aAAAjzB,GAAA,CAA0C,IAAAtB,EAAA1I,MAAA0J,EAAAk0B,MAAA/lC,MAAA6R,EAAA1J,IAAA,EAAAi+B,GAAAv1B,EAAAgB,IAA2ChB,EAAAo0B,OAAAjlC,EAAW6R,EAAAhB,EAAAwiB,UAAc,OAAAxhB,MAAAozB,OAAAjlC,GAAuB4kC,GAAA/zB,EAAAsI,OAAAnZ,GAAekP,EAAA+1B,OAAAjlC,CAAW,OAAM6R,IAAA/P,UAAUuP,GAAA,KAAAR,EAAA1I,KAAA0I,EAAAzD,OAAAoE,EAAApE,KAAA,KAAAyD,EAAA+iB,KAAuD,WAAAviB,IAAA8H,OAAAtI,MAAuB,KAAAQ,EAAAR,EAAa,OAAAQ,GAAS,CAAE,GAAAA,IAAAG,EAAA,CAAUH,EAAA,IAAO,OAAkB,GAAZR,EAAAQ,EAAAwiB,QAAY,OAAAhjB,EAAA,CAAaA,EAAAsI,OAAA9H,EAAA8H,OAAkB9H,EAAAR,CAAI,OAAMQ,IAAA8H,OAAWtI,EAAAQ,EAAIi9B,GAAAn9B,EAAAK,EAAAjI,EAAAmG,SAAA1P,GAAqBwR,IAAAoiB,MAAU,MAAApiB,EAAS,cAAAjI,GAAAiI,EAAApE,KAAA+E,EAAAX,EAAA04B,aAAAh5B,EAAAiB,EAAAzC,SAAAo1B,GAAAtzB,EAAAxR,GAAAuJ,EAAA47B,GAAA57B,EAClb4I,EAAA21C,uBAAA52C,IAAA3H,GAAAiI,EAAA8hB,OAAA,EAAAgb,GAAAn9B,EAAAK,EAAAN,EAAAlR,GAAAwR,EAAAoiB,KAA+D,eAAArqB,GAAAiI,EAAApE,KAAA+E,EAAAiyB,GAAA76B,EAAAiI,EAAA04B,cAAA/3B,EAAAiyB,GAAA76B,EAAA6D,KAAA+E,GAAAw8B,GAAAx9B,EAAAK,EAAAjI,EAAA4I,EAAAjB,EAAAlR,EAA8E,eAAA8uC,IAAA39B,EAAAK,IAAApE,KAAAoE,EAAA04B,aAAAh5B,EAAAlR,EAAiD,eAAAkR,GAAAM,EAAApE,KAAA7D,EAAAiI,EAAA04B,aAAA3gC,EAAAiI,EAAAuZ,cAAA7Z,EAAA3H,EAAA66B,GAAAlzB,EAAA3H,GAAA,OAAA4H,MAAAkiB,UAAA,KAAA7hB,EAAA6hB,UAAA,KAAA7hB,EAAA8hB,OAAA,GAAA9hB,EAAArJ,IAAA,EAAAq6B,GAAAtxB,IAAAC,KAAA2xB,GAAAtxB,IAAAL,KAAA2zB,GAAAtzB,EAAAxR,GAAA8mC,GAAAt1B,EAAAN,EAAA3H,GAAAg+B,GAAA/1B,EAAAN,EAAA3H,EAAAvJ,GAAAuvC,GAAA,KAAA/9B,EAAAN,KAAAC,EAAAnR,EAAkN,eAAA6wC,IAAA1/B,EAAAK,EAAAxR,EAAyB,eAAAgvC,IAAA79B,EAAAK,EAAAxR,EAAyB,eAAAgvC,IAAA79B,EAAAK,EAAAxR,GAAyB,KAAAipB,OAAA3X,EAAA,IAAAE,EAAArJ,OAa3dmyC,GAAA11C,UAAA/D,OAAA,SAAAsQ,GAAgC6oC,GAAA7oC,EAAA1I,KAAAgyC,cAAA,YAAoCH,GAAA11C,UAAAmjD,QAAA,WAAgC,GAAA52C,GAAA1I,KAAAgyC,cAAAjpC,EAAAL,EAAAskB,aAA2CukB,IAAA,KAAA7oC,EAAA,gBAA0BK,EAAA8uB,IAAA,QAE8JrK,GAAA,SAAA9kB,GAAe,QAAAA,EAAAhJ,IAAA,CAAe,GAAAqJ,GAAA48B,IAAWC,IAAAl9B,EAAA,EAAAK,GAAU4oC,GAAAjpC,EAAA,KAAU4jB,GAAA,SAAA5jB,GAAe,QAAAA,EAAAhJ,IAAA,CAAe,GAAAqJ,GAAA48B,IAAWC,IAAAl9B,EAAA,SAAAK,GAAiB4oC,GAAAjpC,EAAA,YAC9bokB,GAAA,SAAApkB,GAAe,QAAAA,EAAAhJ,IAAA,CAAe,GAAAqJ,GAAA48B,KAAApuC,EAAA6sC,GAAA17B,EAAmBk9B,IAAAl9B,EAAAnR,EAAAwR,GAAU4oC,GAAAjpC,EAAAnR,KAAUm1B,GAAA,SAAAhkB,EAAAK,GAAiB,MAAAA,MACtFqgB,GAAA,SAAA1gB,EAAAK,EAAAxR,GAAmB,OAAAwR,GAAU,YAA8B,GAA9Bge,EAAAre,EAAAnR,GAAqBwR,EAAAxR,EAAA4B,KAAS,UAAA5B,EAAAoN,MAAA,MAAAoE,EAAA,CAA8B,IAAAxR,EAAAmR,EAAQnR,EAAAkH,YAAalH,IAAAkH,UAA2F,KAA3ElH,IAAA8G,iBAAA,cAAA6c,KAAAC,UAAA,GAAApS,GAAA,mBAA2EA,EAAA,EAAQA,EAAAxR,EAAAuC,OAAWiP,IAAA,CAAK,GAAAN,GAAAlR,EAAAwR,EAAW,IAAAN,IAAAC,GAAAD,EAAA82C,OAAA72C,EAAA62C,KAAA,CAA2B,GAAAz+C,GAAAwoB,GAAA7gB,EAAY,KAAA3H,EAAA,KAAA0f,OAAA3X,EAAA,IAAyBqd,GAAAzd,GAAMse,EAAAte,EAAA3H,KAAU,KAAM,gBAAA+mB,EAAAnf,EAAAnR,EAAwB,MAAM,cAAAwR,EAAAxR,EAAAyC,MAAA,MAAA+O,GAAAue,EAAA5e,IAAAnR,EAAAoxC,SAAA5/B,QAA2D4gB,EAAAskB,GAC3ZrkB,EAAA,SAAAlhB,EAAAK,EAAAxR,EAAAkR,EAAA3H,GAAuB,GAAA4I,GAAAU,EAAQA,KAAA,CAAK,KAAI,MAAA6wB,IAAA,GAAAvyB,EAAA/E,KAAA,KAAAoF,EAAAxR,EAAAkR,EAAA3H,IAAmC,QAAQsJ,GAAAV,EAAA,IAAAU,KAAA2hC,KAAA1Q,QAAyBxR,EAAA,WAAc,QAAAzf,MAAA4jC,KAAAf,OAAyBhjB,GAAA,SAAAvhB,EAAAK,GAAiB,GAAAxR,GAAA6S,EAAQA,KAAA,CAAK,KAAI,MAAA1B,GAAAK,GAAY,QAAQqB,GAAA7S,EAAA,IAAA6S,KAAA2hC,KAAA1Q,OAAgK,IAAAmkB,KAAQC,QAAAt2B,GAAAoK,GAAAjK,GAAAC,EAAAG,EAAAujB,IAA2BvwC,cAAagjD,IAAKC,wBAAAlzB,GAAAmzB,WAAA,EAAAC,QAAA,SAAAC,oBAAA,aAC9ZC,IAAQH,WAAAF,GAAAE,WAAAC,QAAAH,GAAAG,QAAAC,oBAAAJ,GAAAI,oBAAAE,eAAAN,GAAAM,eAAAC,kBAAA,KAAAC,4BAAA,KAAAC,4BAAA,KAAAC,cAAA,KAAAC,wBAAA,KAAAC,wBAAA,KAAAC,mBAAA,KAAAC,eAAA,KAAAC,qBAAAlO,GAAA2L,uBAAAwC,wBAAA,SAAAh4C,GAAqa,MAARA,GAAA2iB,GAAA3iB,GAAQ,OAAAA,EAAA,KAAAA,EAAA2gB,WAAiCs2B,wBAAAD,GAAAC,yBAC9c/N,GAAA+O,4BAAA,KAAAC,gBAAA,KAAAC,aAAA,KAAAC,kBAAA,KAAAC,gBAAA,KAAwH,uBAAAx9C,gCAAA,CAAwD,GAAAy9C,IAAAz9C,8BAAsC,KAAAy9C,GAAAC,YAAAD,GAAAE,cAAA,IAAwCjW,GAAA+V,GAAAG,OAAApB,IAAAhV,GAAAiW,GAAuB,MAAAt4C,KAAWzR,EAAAu7C,mDAAAgN,GAA8DvoD,EAAAmqD,aAAA/O,GAC9Vp7C,EAAAsiB,YAAA,SAAA7Q,GAAgC,SAAAA,EAAA,WAAuB,QAAAA,EAAA0f,SAAA,MAAA1f,EAA2B,IAAAK,GAAAL,EAAA+1B,eAAwB,aAAA11B,EAAA,CAAe,qBAAAL,GAAAtQ,OAAA,KAAAooB,OAAA3X,EAAA,KAAoD,MAAA2X,OAAA3X,EAAA,IAAAvO,OAAAoI,KAAAgG,KAAwE,MAApCA,GAAA2iB,GAAAtiB,GAAQL,EAAA,OAAAA,EAAA,KAAAA,EAAA2gB,WAAsCpyB,EAAAoqD,UAAA,SAAA34C,EAAAK,GAAgC,GAAAxR,GAAA6S,EAAQ,YAAA7S,GAAA,MAAAmR,GAAAK,EAA0BqB,KAAA,CAAK,KAAI,GAAA1B,EAAA,MAAAuyB,IAAA,GAAAvyB,EAAA/E,KAAA,KAAAoF,IAAkC,QAAQqB,GAAA7S,EAAA8jC,OAAWpkC,EAAA81B,QAAA,SAAArkB,EAAAK,EAAAxR,GAAgC,IAAA06C,GAAAlpC,GAAA,KAAAyX,OAAA3X,EAAA,KAA8B,OAAAupC,IAAA,KAAA1pC,EAAAK,KAAAxR,IAC7bN,EAAAmB,OAAA,SAAAsQ,EAAAK,EAAAxR,GAA+B,IAAA06C,GAAAlpC,GAAA,KAAAyX,OAAA3X,EAAA,KAA8B,OAAAupC,IAAA,KAAA1pC,EAAAK,KAAAxR,IAA0BN,EAAAqqD,uBAAA,SAAA54C,GAA2C,IAAAupC,GAAAvpC,GAAA,KAAA8X,OAAA3X,EAAA,IAA6B,SAAAH,EAAA8iC,sBAAA0C,GAAA,WAA4CkE,GAAA,UAAA1pC,KAAA,WAA6BA,EAAA8iC,oBAAA,KAA2B9iC,EAAAmvB,IAAA,cAAuB5gC,EAAAsqD,wBAAAtT,GAAmCh3C,EAAAuqD,sBAAA,SAAA94C,EAAAK,GAA4C,MAAAspC,IAAA3pC,EAAAK,EAAA,EAAAxJ,UAAAzF,QAAA,SAAAyF,UAAA,GAAAA,UAAA,UACzWtI,EAAAwqD,oCAAA,SAAA/4C,EAAAK,EAAAxR,EAAAkR,GAA8D,IAAAwpC,GAAA16C,GAAA,KAAAipB,OAAA3X,EAAA,KAA8B,UAAAH,GAAA,SAAAA,EAAA+1B,gBAAA,KAAAje,OAAA3X,EAAA,IAA0D,OAAAupC,IAAA1pC,EAAAK,EAAAxR,KAAAkR,IAAuBxR,EAAA4oD,QAAA,U9B63GvK,SAAU3oD,EAAQD,EAASH,G+BrqHjC,YAEA,SAAA0B,GAAAC,GAA+B,MAAAA,IAAA,gBAAAA,IAAA,WAAAA,KAAAb,QAAAa,EAQ/B,QAAAipD,GAAA5gD,GACA,GAAAo6C,GAAAp6C,EAAAo6C,OAEA,IAAAA,KAAAphD,OAAA,CACA,GAAA6nD,GAAAzG,EAAA,EACA,QACAjyC,EAAA04C,EAAA7L,QACAjtC,EAAA84C,EAAA5L,SAIA,OACA9sC,EAAAnI,EAAAg1C,QACAjtC,EAAA/H,EAAAi1C,SAnBA,GAAA6L,GAAAppD,EAAA1B,EAAA,IACA4M,EAAAlL,EAAA1B,EAAA,KACA+M,EAAArL,EAAA1B,EAAA,KACA+qD,EAAA/qD,EAAA,IACAgrD,EAAAhrD,EAAA,GAmBAi9C,GACAl+B,SAAA,WACA9D,QAAA,eACAZ,gBAAA,OACA4wC,aAAA,EACAC,WAAA,OACAC,UAAA,cAEAC,GACArsC,SAAA,WACA1E,gBAAA,UACA4wC,aAAA,EACAC,WAAA,OACAC,UAAA,cAEAE,GACAtsC,SAAA,WACA9D,QAAA,QACA7U,QAAA,KACAuS,MAAA,GACAC,OAAA,GACAyB,gBAAA,OACA4wC,aAAA,MACAK,UAAA,2BACAJ,WAAA,OACA9oD,OAAA,UACA+oD,UAAA,cAEA7oD,GACA6P,GACA8qC,MAAArwC,KAAsBqwC,GACtBtkC,MAAA,IACAC,OAAA,KAEAwyC,OAAAx+C,KAAuBw+C,GACvB/R,IAAA,EACAzgC,OAAA,SAEAyyC,MAAAz+C,KAAsBy+C,IAEtBt5C,GACAkrC,MAAArwC,KAAsBqwC,GACtBtkC,MAAA,GACAC,OAAA,MAEAwyC,OAAAx+C,KAAuBw+C,GACvBjS,KAAA,EACAxgC,MAAA,SAEA0yC,MAAAz+C,KAAsBy+C,IAEtBE,IACAtO,OACAl+B,SAAA,WACAyF,SAAA,SACA7L,MAAA,IACAC,OAAA,IACAyB,gBAAA,UACA4wC,aAAA,GAEAG,UACAC,MAAAz+C,KAAsBy+C,IAEtB16B,UACAxZ,QAAA,KAIAq0C,EAAA,SAAA5vC,GAwBA,QAAA6vC,KACA,GAAApS,IAAAtnC,EAAA25C,IAAAC,EAAAD,GAAA,IACAvS,GAAAhnC,EAAAsJ,IAAAC,EAAAD,GAAA,GAOA,OANA49B,GAAA,MAAAA,EAAA,KACAA,EAAA,IAAAA,EAAA,GACA,MAAA99B,IAAA89B,EAAA,GACAF,EAAA,MAAAA,EAAA,KACAA,EAAA,IAAAA,EAAA,GACA,MAAA59B,IAAA49B,EAAA,IAEAE,MACAF,QAIA,QAAAyS,GAAAC,GACA,GAAAxS,GAAAwS,EAAAxS,IACAF,EAAA0S,EAAA1S,IACA,IAAAx9B,EAAA,CAEA,GAAAmwC,GAAA5kD,EAAAtB,QAAAmmD,wBACApzC,EAAAmzC,EAAAnzC,MACAC,EAAAkzC,EAAAlzC,OAEAozC,EAAA,EACAC,EAAA,CACA9S,GAAA,IAAAA,EAAA,GACAA,EAAAxgC,IAAAwgC,EAAAxgC,GACA0gC,EAAA,IAAAA,EAAA,GACAA,EAAAzgC,IAAAygC,EAAAzgC,GAEA,MAAA2C,GAAA,OAAAA,IACAywC,EAAA7S,EAAAxgC,GAAA+C,EAAAD,IAGA,MAAAF,GAAA,OAAAA,IACA0wC,EAAA5S,EAAAzgC,GAAA+yC,EAAAD,GAGA,IAAAv5C,IAAA,IAAA65C,EAAAE,SAAAF,EAAAxwC,EAAA,IAAAA,EAAA,GAAAC,EACA1J,GAAA,IAAAk6C,EAAAC,SAAAD,EAAAE,EAAA,IAAAA,EAAA,GAAAT,CACA/vC,IACAxJ,EAAAi6C,EAAA1wC,EAAAvJ,EAAAsJ,EAAAtJ,EACAJ,EAAAs6C,EAAAV,EAAA55C,EAAA25C,EAAA35C,KAIA,QAAAu6C,GAAAtiD,GACA,IAAA2mB,EAAA,CACA3mB,EAAAqwB,iBACArwB,EAAAswB,kBACAtwB,EAAA6qB,YAAA03B,0BACA,IAAAC,GAAAC,EAAA7mD,QACA8mD,EAAA9B,EAAA5gD,EACA8d,GAAAliB,SACAuM,EAAAq6C,EAAAG,WACA56C,EAAAy6C,EAAAI,WAEAnlC,EAAA7hB,SACAuM,EAAAu6C,EAAAv6C,EACAJ,EAAA26C,EAAA36C,GAEAvQ,SAAAmhB,iBAAA,YAAAkqC,GACArrD,SAAAmhB,iBAAA,UAAAmqC,GACAtrD,SAAAmhB,iBAAA,YAAAkqC,GACAltB,aAEAn+B,SAAAmhB,iBAAA,WAAAmqC,GACAtrD,SAAAmhB,iBAAA,cAAAmqC,GAEAC,GACAA,EAAA/iD,IAIA,QAAAgjD,GAAAhjD,GACA,GAAA0iD,GAAA9B,EAAA5gD,GACAmvC,EAAAuT,EAAAv6C,EAAA2V,EAAAliB,QAAAuM,EAAAsV,EAAA7hB,QAAAuM,EACAknC,EAAAqT,EAAA36C,EAAA+V,EAAAliB,QAAAmM,EAAA0V,EAAA7hB,QAAAmM,CACA,QACAonC,OACAE,OAIA,QAAAwT,GAAA7iD,GACA2mB,IACA3mB,EAAAqwB,iBACAuxB,EAAAoB,EAAAhjD,KAGA,QAAA8iD,GAAA9iD,GACA2mB,IACA3mB,EAAAqwB,iBACA74B,SAAA47C,oBAAA,YAAAyP,GACArrD,SAAA47C,oBAAA,UAAA0P,GACAtrD,SAAA47C,oBAAA,YAAAyP,GACAltB,aAEAn+B,SAAA47C,oBAAA,WAAA0P,GACAtrD,SAAA47C,oBAAA,cAAA0P,GAEAG,GACAA,EAAAjjD,IAIA,QAAAkjD,GAAAljD,GACA,IAAA2mB,EAAA,CACA3mB,EAAAqwB,gBACA,IAAAqyB,GAAA9B,EAAA5gD,GACAmjD,EAAAjmD,EAAAtB,QAAAmmD,uBACAjkC,GAAAliB,SACAuM,EAAAu6C,EAAAv6C,EAAAg7C,EAAAhU,KACApnC,EAAA26C,EAAA36C,EAAAo7C,EAAA9T,KAEA5xB,EAAA7hB,SACAuM,EAAAu6C,EAAAv6C,EACAJ,EAAA26C,EAAA36C,GAEAvQ,SAAAmhB,iBAAA,YAAAkqC,GACArrD,SAAAmhB,iBAAA,UAAAmqC,GACAtrD,SAAAmhB,iBAAA,YAAAkqC,GACAltB,aAEAn+B,SAAAmhB,iBAAA,WAAAmqC,GACAtrD,SAAAmhB,iBAAA,cAAAmqC,GACAlB,GACAzS,KAAAuT,EAAAv6C,EAAAg7C,EAAAhU,KACAE,IAAAqT,EAAA36C,EAAAo7C,EAAA9T,MAGA0T,GACAA,EAAA/iD,IA5JA,GAAA2mB,GAAA/U,EAAA+U,SACApV,EAAAK,EAAAL,KACApJ,EAAAyJ,EAAAzJ,EACAJ,EAAA6J,EAAA7J,EACA0J,EAAAG,EAAAH,KACAC,EAAAE,EAAAF,KACAgwC,EAAA9vC,EAAA8vC,KACAC,EAAA/vC,EAAA+vC,KACAnwC,EAAAI,EAAAJ,MACA2wC,EAAAvwC,EAAAuwC,MACAxwC,EAAAC,EAAAD,SACAoxC,EAAAnxC,EAAAmxC,YACAE,EAAArxC,EAAAqxC,UACAb,EAAAxwC,EAAAwwC,SACAC,EAAAzwC,EAAAywC,SACAe,EAAAxxC,EAAAtZ,OACAwL,EAAAf,EAAA6O,GAAA,4IAEA1U,EAAA8jD,EAAApD,OAAA,MACA6E,EAAAzB,EAAApD,OAAA,MACA9/B,EAAAkjC,EAAApD,WACAngC,EAAAujC,EAAApD,WA2IAyF,EAAA5B,IACA6B,IACA,OAAA/xC,IAAA+xC,EAAA30C,MAAA00C,EAAAlU,KAAA,KACA,MAAA59B,IAAA+xC,EAAA10C,OAAAy0C,EAAAhU,IAAA,KACA+S,IAAAkB,EAAAnU,KAAA,IAAAkU,EAAAlU,KAAA,KACAkT,IAAAiB,EAAAjU,IAAA,IAAAgU,EAAAhU,IAAA,IACA,IAAAkU,IACAxuC,SAAA,WACAyuC,UAAA,wBACArU,KAAAiT,EAAA,IAAAiB,EAAAlU,KAAA,IAAAkU,EAAAlU,KAAA,IACAE,IAAAgT,EAAA,IAAAgB,EAAAhU,IAAA,IAAAgU,EAAAhU,IAAA,IAGA,OAAA99B,EACAgyC,EAAAlU,IAAA,MACG,MAAA99B,IACHgyC,EAAApU,KAAA,MAGA,IAAAsU,IACAxQ,MAAArwC,KAAsBtK,EAAAiZ,GAAA0hC,SAAwBmQ,EAAAnQ,OAC9CmO,OAAAx+C,KAAuBtK,EAAAiZ,GAAA6vC,UAAyBgC,EAAAhC,QAChDC,MAAAz+C,KAAsBtK,EAAAiZ,GAAA8vC,SAAwB+B,EAAA/B,OAC9C16B,SAAA/jB,KAAyBtK,EAAAquB,YAAqBy8B,EAAAz8B,UAE9C,OAAAo6B,GAAAn9C,IAAA,MAAAhB,KAAoCkB,GACpCiD,IAAA7J,EACAqB,IAAAuiD,GAAA2C,EAAAxQ,MAAAtsB,GAAA88B,EAAA98B,UAAA,kBACA+8B,aAAAR,EACAS,YAAAT,IACGnC,EAAAn9C,IAAA,OACHrF,IAAAklD,EAAArC,OACArwC,MAAAuyC,IACGvC,EAAAn9C,IAAA,OACHmD,IAAA07C,EACA1xC,MAAAwyC,EACAG,aAAApB,EACAqB,YAAArB,EACAjxC,QAAA,SAAArR,GACAA,EAAAswB,kBACAtwB,EAAA6qB,YAAA03B,6BAEGxB,EAAAn9C,IAAA,OACHrF,IAAAklD,EAAApC,UAIAG,GAAArmC,cACAwL,YACApV,KAAA,IACApJ,EAAA,GACAsJ,KAAA,EACAC,KAAA,IACA3J,EAAA,GACA25C,KAAA,EACAC,KAAA,IACAnwC,MAAA,EACA2wC,MAAA,EACAC,YACAC,YACA/pD,WAGAlC,EAAAD,QAAAqrD,G/B4qHM,SAAUprD,EAAQD,EAASH;;;;;;;;AgCn+HjC,YAEA,SAAA+R,GAAAH,GAAc,cAAAA,GAAA,gBAAAA,GAAA,MAA6CA,EAAAO,GAAAP,EAAAO,IAAAP,EAAA,cAA2B,kBAAAA,KAAA,MAAmC,QAAA6B,GAAA7B,GAAc,OAAAK,GAAA,yDAAAL,EAAAnR,EAAA,EAAyEA,EAAAgI,UAAAzF,OAAmBvC,IAAAwR,GAAA,WAAA6Z,mBAAArjB,UAAAhI,GAAmD,gCAAAmR,EAAA,WAAmCK,EAAA,iHAC/K,QAAAD,GAAAJ,EAAAK,EAAAxR,GAAkByI,KAAA4E,MAAA8D,EAAa1I,KAAA/C,QAAA8L,EAAe/I,KAAA++B,KAAAv1B,EAAYxJ,KAAAwF,QAAAjO,GAAA4S,EACpM,QAAAG,MAAsC,QAAAS,GAAArC,EAAAK,EAAAxR,GAAkByI,KAAA4E,MAAA8D,EAAa1I,KAAA/C,QAAA8L,EAAe/I,KAAA++B,KAAAv1B,EAAYxJ,KAAAwF,QAAAjO,GAAA4S,EAChG,QAAAV,GAAAf,EAAAK,EAAAxR,GAAkB,GAAAuJ,GAAA2H,KAAUhC,EAAA,KAAA2B,EAAA,IAAe,UAAAW,EAAA,IAAAjI,IAAA,UAAAiI,EAAAlB,MAAAO,EAAAW,EAAAlB,KAAA,SAAAkB,EAAA5N,MAAAsL,EAAA,GAAAsC,EAAA5N,KAAA4N,EAAAsB,EAAAhT,KAAA0R,EAAAjI,KAAAwI,EAAAzG,eAAA/B,KAAA2H,EAAA3H,GAAAiI,EAAAjI,GAA4H,IAAA8H,GAAArJ,UAAAzF,OAAA,CAAyB,QAAA8O,EAAAH,EAAAxB,SAAA1P,MAAsB,MAAAqR,EAAA,CAAa,OAAAc,GAAA/P,MAAAiP,GAAAtR,EAAA,EAAuBA,EAAAsR,EAAItR,IAAAoS,EAAApS,GAAAiI,UAAAjI,EAAA,EAAwBmR,GAAAxB,SAAAyC,EAAa,GAAAhB,KAAAuT,aAAA,IAAAnb,IAAA8H,GAAAF,EAAAuT,aAAA,SAAAxT,EAAA3H,KAAA2H,EAAA3H,GAAA8H,EAAA9H,GAA4E,QAAOgkB,SAAAxiB,EAAAqC,KAAA+D,EAAAvN,IAAAsL,EAAAoB,IAAAO,EAAAxD,MAAA6D,EAAA62B,OAAA11B,EAAAlN,SACtX,QAAAwM,GAAAR,EAAAK,GAAgB,OAAO+b,SAAAxiB,EAAAqC,KAAA+D,EAAA/D,KAAAxJ,IAAA4N,EAAAlB,IAAAa,EAAAb,IAAAjD,MAAA8D,EAAA9D,MAAA06B,OAAA52B,EAAA42B,QAAsE,QAAA10B,GAAAlC,GAAc,sBAAAA,IAAA,OAAAA,KAAAoc,WAAAxiB,EAAoD,QAAAoiD,GAAAh8C,GAAmB,GAAAK,IAAO47C,IAAA,KAAAC,IAAA,KAAmB,WAAAl8C,EAAAzN,QAAA,iBAAAyN,GAAwC,MAAAK,GAAAL,KAA2B,QAAAmB,GAAAnB,EAAAK,GAAgB,sBAAAL,IAAA,OAAAA,GAAA,MAAAA,EAAAvN,IAAAupD,EAAA,GAAAh8C,EAAAvN,KAAA4N,EAAA5C,SAAA,IAC/R,QAAA+D,GAAAxB,EAAAK,EAAAxR,EAAAuJ,EAAA2H,GAAsB,GAAAhC,SAAAiC,EAAe,eAAAjC,GAAA,YAAAA,IAAAiC,EAAA,KAAyC,IAAAN,KAAS,WAAAM,EAAAN,SAAiB,QAAA3B,GAAe,0BAAA2B,IAAiC,MAAM,qBAAAM,EAAAoc,UAAiC,IAAAxiB,GAAA,IAAA9K,GAAA4Q,MAAoB,GAAAA,EAAA,MAAAA,GAAAM,EAAAD,IAAAL,GAAAM,EAAA,KAAA5H,EAAA,IAAA+I,EAAAzB,EAAA,GAAAtH,EAAAnH,MAAAC,QAAA6O,IAAAlR,EAAA,SAAAmR,IAAAnR,EAAAmR,EAAAzN,QAAAuN,EAAA,YAAA0B,EAAAzB,EAAAM,EAAAxR,EAAA,YAAAmR,GAA+H,MAAAA,MAAS,MAAAD,IAAAmC,EAAAnC,OAAAS,EAAAT,EAAAlR,IAAAkR,EAAAtN,KAAAiN,KAAAjN,MAAAsN,EAAAtN,IAAA,OAAAsN,EAAAtN,KAAAF,QAAAuN,EAAA,YAAAE,IAAAK,EAAArI,KAAA+H,IAAA,CAAkI,IAAvBL,EAAA,EAAItH,EAAA,KAAAA,EAAA,IAAAA,EAAA,IAAmBnH,MAAAC,QAAA8O,GAAA,OAAAE,GAC7d,EAAEA,EAAAF,EAAA5O,OAAW8O,IAAA,CAAKnC,EAAAiC,EAAAE,EAAO,IAAAc,GAAA5I,EAAA+I,EAAApD,EAAAmC,EAAeR,IAAA8B,EAAAzD,EAAAsC,EAAAxR,EAAAmS,EAAAjB,OAAgB,IAAAiB,EAAAb,EAAAH,GAAA,kBAAAgB,GAAA,IAAAhB,EAAAgB,EAAArS,KAAAqR,GAAAE,EAAA,IAAyDnC,EAAAiC,EAAArP,QAAAoX,MAAmBhK,IAAAzM,MAAA0P,EAAA5I,EAAA+I,EAAApD,EAAAmC,KAAAR,GAAA8B,EAAAzD,EAAAsC,EAAAxR,EAAAmS,EAAAjB,OAAwC,eAAAhC,EAAA,KAAAsC,GAAA,GAAAL,EAAA8X,MAAAjW,EAAA,uBAAAxB,EAAA,qBAAsFzO,OAAAoI,KAAAgG,GAAAnG,KAAA,UAA8BwG,GAAM,OAAAX,GAAS,QAAAyC,GAAAnC,EAAAK,EAAAxR,GAAkB,SAAAmR,EAAA,MAAAA,EAAoB,IAAA5H,MAAA2H,EAAA,CAA8D,OAAjDyB,GAAAxB,EAAA5H,EAAA,eAAA4H,GAAwB,MAAAK,GAAA1R,KAAAE,EAAAmR,EAAAD,OAAyB3H,EACnZ,QAAAmK,GAAAvC,GAAc,QAAAA,EAAAm8C,QAAA,CAAmB,GAAA97C,GAAAL,EAAAo8C,OAAgB/7C,OAAML,EAAAm8C,QAAA,EAAYn8C,EAAAo8C,QAAA/7C,EAAYA,EAAAkO,KAAA,SAAAlO,GAAmB,IAAAL,EAAAm8C,UAAA97C,IAAAnR,QAAA8Q,EAAAm8C,QAAA,EAAAn8C,EAAAo8C,QAAA/7C,IAAqD,SAAAA,GAAa,IAAAL,EAAAm8C,UAAAn8C,EAAAm8C,QAAA,EAAAn8C,EAAAo8C,QAAA/7C,KAA2C,OAAAL,EAAAm8C,QAAA,MAAAn8C,GAAAo8C,OAAkC,MAAAp8C,GAAAo8C,QAAsC,QAAAh5C,KAAa,GAAApD,GAAAiD,EAAAjP,OAAgB,WAAAgM,EAAA,KAAA8X,OAAAjW,EAAA,KAAgC,OAAA7B,GATvU,GAAAU,GAAAtS,EAAA,GAAAwL,EAAA,MAAA9K,EAAA,KAA+CP,GAAAkQ,SAAA,MAAuBlQ,EAAA8tD,WAAA,MAAyB9tD,EAAA+tD,SAAA,KAAuB,IAAAr8C,GAAA,MAAAU,EAAA,MAAAE,EAAA,KAA4BtS,GAAAguD,SAAA,KAAuB,IAAA97C,GAAA,MAAAH,EAAA,KACtL,sBAAAuH,gBAAAkiC,IAAA,CAA2C,GAAA9nC,GAAA4F,OAAAkiC,GAAiBnwC,GAAAqI,EAAA,iBAAqBnT,EAAAmT,EAAA,gBAAoB1T,EAAAkQ,SAAAwD,EAAA,kBAAqC1T,EAAA8tD,WAAAp6C,EAAA,qBAA0C1T,EAAA+tD,SAAAr6C,EAAA,kBAAqChC,EAAAgC,EAAA,kBAAsBtB,EAAAsB,EAAA,iBAAqBpB,EAAAoB,EAAA,qBAAyB1T,EAAAguD,SAAAt6C,EAAA,kBAAqCxB,EAAAwB,EAAA,cAAkB3B,EAAA2B,EAAA,cAAkB,GAAA1B,GAAA,kBAAAsH,gBAAAC,SAEtWrG,GAAO4zC,UAAA,WAAqB,UAASE,mBAAA,aAAgCpf,oBAAA,aAAiCmf,gBAAA,cAA8Bx0C,IAAkFV,GAAA3M,UAAA20C,oBAAgChoC,EAAA3M,UAAA+oD,SAAA,SAAAx8C,EAAAK,GAAmC,mBAAAL,IAAA,kBAAAA,IAAA,MAAAA,EAAA,KAAA8X,OAAAjW,EAAA,IAA0EvK,MAAAwF,QAAAw4C,gBAAAh+C,KAAA0I,EAAAK,EAAA,aAAmDD,EAAA3M,UAAAgpD,YAAA,SAAAz8C,GAAoC1I,KAAAwF,QAAAy4C,mBAAAj+C,KAAA0I,EAAA,gBAC5a4B,EAAAnO,UAAA2M,EAAA3M,SAAoG,IAAAwN,GAAAoB,EAAA5O,UAAA,GAAAmO,EAAwBX,GAAAtN,YAAA0O,EAAgB3B,EAAAO,EAAAb,EAAA3M,WAAiBwN,EAAAy0B,uBAA0B,IAAAx0B,IAAOlN,QAAA,MAAa2N,EAAA/P,OAAA6B,UAAA0G,eAAAyG,GAAsCnO,OAAA0M,OAAAu9C,UAAAC,aAEG78C,EAAA,OAGAmD,GAAOjP,QAAA,MAAoFqP,GAAOmyC,uBAAAvyC,EAAAmyC,yBAAkDpY,WAAA,GAAauZ,kBAAAr1C,EAAA07C,sBAA2C5oD,YAAWoF,OAAAsH,EACzdnS,GAAAmwB,UAAkB/kB,IAAAwI,EAAAlN,QAAA,SAAA+K,EAAAK,EAAAxR,GAA8BsT,EAAAnC,EAAA,WAAeK,EAAAnF,MAAA5D,KAAAT,YAAwBhI,IAAIguD,MAAA,SAAA78C,GAAmB,GAAAK,GAAA,CAA6B,OAArB8B,GAAAnC,EAAA,WAAeK,MAAMA,GAASy8C,QAAA,SAAA98C,GAAqB,MAAAmC,GAAAnC,EAAA,SAAAA,GAAuB,MAAAA,UAAe+8C,KAAA,SAAA/8C,GAAkB,IAAAkC,EAAAlC,GAAA,KAAA8X,OAAAjW,EAAA,KAA6B,OAAA7B,KAAWzR,EAAA+O,UAAA8C,EAAoB7R,EAAAyuD,cAAA36C,EAAwB9T,EAAAu7C,mDAAAzmC,EACrT9U,EAAA0uD,aAAA,SAAAj9C,EAAAK,EAAAxR,GAAqC,UAAAmR,GAAA,SAAAA,EAAA,KAAA8X,OAAAjW,EAAA,IAAA7B,GAA8C,IAAA5H,GAAAsI,KAAUV,EAAA9D,OAAA6D,EAAAC,EAAAvN,IAAAsL,EAAAiC,EAAAb,IAAAO,EAAAM,EAAA42B,MAAqC,UAAAv2B,EAAA,CAA+E,GAAnE,SAAAA,EAAAlB,MAAApB,EAAAsC,EAAAlB,IAAAO,EAAAwB,EAAAlN,SAAsC,SAAAqM,EAAA5N,MAAAsN,EAAA,GAAAM,EAAA5N,KAA6BuN,EAAA/D,MAAA+D,EAAA/D,KAAAsX,aAAA,GAAArT,GAAAF,EAAA/D,KAAAsX,YAAyD,KAAAvS,IAAAX,GAAAsB,EAAAhT,KAAA0R,EAAAW,KAAAJ,EAAAzG,eAAA6G,KAAA5I,EAAA4I,GAAA,SAAAX,EAAAW,IAAA,SAAAd,IAAAc,GAAAX,EAAAW,IAAyF,GAAAA,GAAAnK,UAAAzF,OAAA,CAAyB,QAAA4P,EAAA5I,EAAAmG,SAAA1P,MAAsB,MAAAmS,EAAA,CAAad,EAAAjP,MAAA+P,EAAW,QAAApS,GAAA,EAAYA,EAAAoS,EAAIpS,IAAAsR,EAAAtR,GAAAiI,UAAAjI,EAAA,EAAwBwJ,GAAAmG,SAAA2B,EAAa,OAAOkc,SAAAxiB,EAAAqC,KAAA+D,EAAA/D,KACtexJ,IAAAsN,EAAAZ,IAAApB,EAAA7B,MAAA9D,EAAAw+B,OAAAl3B,IAA+BnR,EAAAwQ,cAAA,SAAAiB,EAAAK,GAA+M,MAA3K,UAAAA,MAAA,MAAqBL,GAAGoc,SAAAzb,EAAA+1C,sBAAAr2C,EAAAmzB,cAAAxzB,EAAAk9C,eAAAl9C,EAAAm9C,aAAA,EAAAl+C,SAAA,KAAAvC,SAAA,MAAgHsD,EAAAf,UAAYmd,SAAAnc,EAAAsc,SAAAvc,GAAuBA,EAAAtD,SAAAsD,GAAqBzR,EAAAoB,cAAAoR,EAAwBxS,EAAA6uD,cAAA,SAAAp9C,GAAkC,GAAAK,GAAAU,EAAA9F,KAAA,KAAA+E,EAA8B,OAATK,GAAApE,KAAA+D,EAASK,GAAU9R,EAAA8uD,UAAA,WAA6B,OAAOrpD,QAAA,OAAezF,EAAA6Q,WAAA,SAAAY,GAA+B,OAAOoc,SAAAvb,EAAAnR,OAAAsQ,IAAsBzR,EAAA+uD,eAAAp7C,EACpd3T,EAAAgvD,KAAA,SAAAv9C,GAAyB,OAAOoc,SAAA9b,EAAAsc,UAAqBu/B,WAAAC,QAAAp8C,GAAqB6c,MAAAta,IAAWhU,EAAAivD,KAAA,SAAAx9C,EAAAK,GAA2B,OAAO+b,SAAA3b,EAAAxE,KAAA+D,EAAA09B,QAAA,SAAAr9B,EAAA,KAAAA,IAA8C9R,EAAAmnD,YAAA,SAAA11C,EAAAK,GAAkC,MAAA+C,KAAAsyC,YAAA11C,EAAAK,IAA6B9R,EAAAonD,WAAA,SAAA31C,EAAAK,GAAiC,MAAA+C,KAAAuyC,WAAA31C,EAAAK,IAA4B9R,EAAA0nD,cAAA,aAAmC1nD,EAAAya,UAAA,SAAAhJ,EAAAK,GAAgC,MAAA+C,KAAA4F,UAAAhJ,EAAAK,IAA2B9R,EAAAqnD,oBAAA,SAAA51C,EAAAK,EAAAxR,GAA4C,MAAAuU,KAAAwyC,oBAAA51C,EAAAK,EAAAxR,IAC3aN,EAAAsnD,gBAAA,SAAA71C,EAAAK,GAAsC,MAAA+C,KAAAyyC,gBAAA71C,EAAAK,IAAiC9R,EAAAunD,QAAA,SAAA91C,EAAAK,GAA8B,MAAA+C,KAAA0yC,QAAA91C,EAAAK,IAAyB9R,EAAAwnD,WAAA,SAAA/1C,EAAAK,EAAAxR,GAAmC,MAAAuU,KAAA2yC,WAAA/1C,EAAAK,EAAAxR,IAA8BN,EAAAynD,OAAA,SAAAh2C,GAA2B,MAAAoD,KAAA4yC,OAAAh2C,IAAsBzR,EAAAqa,SAAA,SAAA5I,GAA6B,MAAAoD,KAAAwF,SAAA5I,IAAwBzR,EAAA4oD,QAAA,UhCk/H/R,SAAU3oD,EAAQD;;;;;;;;AiChgIxB,YAIoE,SAAAoT,GAAA3B,EAAAK,GAAgB,GAAAxR,GAAAmR,EAAA5O,MAAe4O,GAAAhI,KAAAqI,EAAUL,GAAA,OAAQ,CAAE,GAAAD,GAAAlR,EAAA,MAAAuJ,EAAA4H,EAAAD,EAAqB,eAAA3H,GAAA,EAAAwI,EAAAxI,EAAAiI,IAA0C,KAAAL,EAA1CA,GAAAD,GAAAM,EAAAL,EAAAnR,GAAAuJ,EAAAvJ,EAAAkR,GAAwD,QAAAgB,GAAAf,GAAqB,MAAPA,KAAA,GAAO,SAAAA,EAAA,KAAAA,EACzN,QAAAQ,GAAAR,GAAc,GAAAK,GAAAL,EAAA,EAAW,aAAAK,EAAA,CAAe,GAAAxR,GAAAmR,EAAAy9C,KAAc,IAAA5uD,IAAAwR,EAAA,CAAUL,EAAA,GAAAnR,CAAOmR,GAAA,OAAAD,GAAA,EAAA3H,EAAA4H,EAAA5O,OAAyB2O,EAAA3H,GAAI,CAAE,GAAAxJ,GAAA,GAAAmR,EAAA,KAAAnG,EAAAoG,EAAApR,GAAA0R,EAAA1R,EAAA,EAAA+R,EAAAX,EAAAM,EAAoC,aAAA1G,GAAA,EAAAgH,EAAAhH,EAAA/K,GAAA,SAAA8R,GAAA,EAAAC,EAAAD,EAAA/G,IAAAoG,EAAAD,GAAAY,EAAAX,EAAAM,GAAAzR,EAAAkR,EAAAO,IAAAN,EAAAD,GAAAnG,EAAAoG,EAAApR,GAAAC,EAAAkR,EAAAnR,OAAqF,eAAA+R,GAAA,EAAAC,EAAAD,EAAA9R,IAA+C,KAAAmR,EAA/CA,GAAAD,GAAAY,EAAAX,EAAAM,GAAAzR,EAAAkR,EAAAO,IAA6D,MAAAD,GAAS,YAAY,QAAAO,GAAAZ,EAAAK,GAAgB,GAAAxR,GAAAmR,EAAA09C,UAAAr9C,EAAAq9C,SAA8B,YAAA7uD,IAAAmR,EAAAvR,GAAA4R,EAAA5R,GAC/V,QAAA4U,GAAArD,GAAc,OAAAK,GAAAU,EAAAjB,GAAe,OAAAO,GAAS,CAAE,UAAAA,EAAA20B,SAAAx0B,EAAAV,OAA0B,MAAAO,EAAAs9C,WAAA39C,GAAgE,KAAhEQ,GAAAV,GAAAO,EAAAq9C,UAAAr9C,EAAAu9C,eAAAj8C,EAAAO,EAAA7B,GAA2EA,EAAAU,EAAAjB,IAAQ,QAAAwD,GAAAtD,GAAwB,GAAVoD,KAAKC,EAAArD,IAAKiD,EAAA,UAAAlC,EAAAmB,GAAAe,KAAAjC,EAAAuC,OAA+B,CAAK,GAAAlD,GAAAU,EAAAjB,EAAW,QAAAO,GAAAH,EAAAoD,EAAAjD,EAAAs9C,UAAA39C,IAC5N,QAAAuD,GAAAvD,EAAAK,GAAgB4C,KAAKG,SAAA1D,KAAc6C,IAAK,IAAA1T,GAAAsT,CAAQ,KAAS,IAALkB,EAAAhD,GAAKmB,EAAAT,EAAAmB,GAAW,OAAAV,QAAAo8C,eAAAv9C,IAAAL,IAAAzR,EAAAomD,yBAAsE,CAAE,GAAA50C,GAAAyB,EAAAwzB,QAAiB,sBAAAj1B,GAAA,CAA0ByB,EAAAwzB,SAAA,KAAgB7yB,EAAAX,EAAAq8C,aAAkB,IAAAzlD,GAAA2H,EAAAyB,EAAAo8C,gBAAAv9C,EAA6BA,GAAA9R,EAAAy9C,eAAyB,kBAAA5zC,GAAAoJ,EAAAwzB,SAAA58B,EAAAoJ,IAAAT,EAAAmB,IAAA1B,EAAA0B,GAAkDmB,EAAAhD,OAAKG,GAAA0B,EAAUV,GAAAT,EAAAmB,GAAO,UAAAV,EAAA,GAAA5S,UAAqB,CAAK,GAAAgL,GAAAmH,EAAAjB,EAAW,QAAAlG,GAAAsG,EAAAoD,EAAA1J,EAAA+jD,UAAAt9C,GAA6BzR,KAAK,MAAAA,GAAS,QAAQ4S,EAAA,KAAAW,EAAAtT,EAAA0T,MAPla,GAAAvB,GAAAd,EAAAR,EAAA3B,CAAY,oBAAA+/C,cAAA,kBAAAA,aAAAjR,IAAA,CAAuE,GAAAnsC,GAAAo9C,WAAkBvvD,GAAAy9C,aAAA,WAAgC,MAAAtrC,GAAAmsC,WAAgB,CAAK,GAAA/9C,GAAA89C,KAAA3sC,EAAAnR,EAAA+9C,KAAqBt+C,GAAAy9C,aAAA,WAAgC,MAAAl9C,GAAA+9C,MAAA5sC,GAC5N,sBAAAqgB,SAAA,kBAAAy9B,gBAAA,CAAoE,GAAAl9C,GAAA,KAAAJ,EAAA,KAAAwB,EAAA,WAA+B,UAAApB,EAAA,IAAgB,GAAAb,GAAAzR,EAAAy9C,cAA6BnrC,MAAAb,GAAQa,EAAA,KAAO,MAAAR,GAAS,KAAA8gC,YAAAl/B,EAAA,GAAA5B,GAA2BW,GAAA,SAAAhB,GAAc,OAAAa,EAAAsgC,WAAAngC,EAAA,EAAAhB,IAAAa,EAAAb,EAAAmhC,WAAAl/B,EAAA,KAAkD/B,EAAA,SAAAF,EAAAK,GAAgBI,EAAA0gC,WAAAnhC,EAAAK,IAAmBX,EAAA,WAAa60C,aAAA9zC,IAAiBlS,EAAAomD,qBAAA,WAAwC,UAAU52C,EAAAxP,EAAAyvD,wBAAA,iBAA+C,CAAK,GAAAz9C,GAAA+f,OAAA6gB,WAAAhhC,EAAAmgB,OAAAi0B,YAA8C,uBAAAz5C,SAAA,CAAiC,GAAA+G,GACzfye,OAAA5T,oBAA4B,mBAAA4T,QAAAlP,uBAAAtW,QAAAC,MAAA,sJAAsN,kBAAA8G,IAAA/G,QAAAC,MAAA,qJAA0L,GAAA0G,MAAAX,EAAA,KAAAV,KAAAwB,EAAA,EAAAS,EAAA,CAA6B9T,GAAAomD,qBAAA,WAAwC,MAAApmD,GAAAy9C,gBACjf3pC,GAAGtE,EAAA,aAAexP,EAAAyvD,wBAAA,SAAAh+C,GAA4C,EAAAA,GAAA,IAAAA,EAAAlF,QAAAC,MAAA,mHAAA6G,EAAA,EAAA5B,EAAAsQ,KAAA2tC,MAAA,IAAAj+C,GAAA,EAAuK,IAAAiB,GAAA,GAAA88C,gBAAA78C,EAAAD,EAAAi9C,KAAmCj9C,GAAAk9C,MAAAC,UAAA,WAA6B,UAAAt9C,EAAA,CAAa,GAAAd,GAAAzR,EAAAy9C,cAA6B3pC,GAAArC,EAAA4B,CAAM,KAAId,KAAAd,GAAAkB,EAAAm9C,YAAA,OAAA58C,KAAAX,EAAA,MAA0C,MAAAT,GAAS,KAAAa,GAAAm9C,YAAA,MAAAh+C,OAA8BoB,OAAWT,EAAA,SAAAhB,GAAcc,EAAAd,EAAIyB,SAAAP,EAAAm9C,YAAA,QAA+Bn+C,EAAA,SAAAF,EAAAK,GAAgBD,EACtfG,EAAA,WAAaP,EAAAzR,EAAAy9C,iBAA0B3rC,IAAKX,EAAA,WAAaS,EAAAC,GAAKA,MAC0T,GAAA8B,MAAApC,KAAAqB,EAAA,EAAAK,EAAA,KAAAW,EAAA,EAAAI,KAAAU,KAAAG,KAEwEvD,EAAA9B,CAAQxP,GAAA2mD,sBAAA,EACxc3mD,EAAAymD,2BAAA,EAAqCzmD,EAAA0mD,qBAAA,EAA+B1mD,EAAA02B,wBAAA,EAAkC12B,EAAA+vD,mBAAA,KAAgC/vD,EAAA+9C,8BAAA,EAAwC/9C,EAAAmmD,wBAAA,SAAA10C,GAA4CA,EAAAg1B,SAAA,MAAiBzmC,EAAAgwD,2BAAA,WAA8Ct7C,GAAAV,IAAAU,KAAAjC,EAAAuC,KAAmBhV,EAAAwmD,iCAAA,WAAoD,MAAA5yC,IAAU5T,EAAAiwD,8BAAA,WAAiD,MAAAz9C,GAAAmB,IAC3Z3T,EAAAkwD,cAAA,SAAAz+C,GAAkC,OAAAmC,GAAU,wBAAA9B,GAAA,CAA6B,MAAM,SAAAA,EAAA8B,EAAY,GAAAtT,GAAAsT,CAAQA,GAAA9B,CAAI,KAAI,MAAAL,KAAW,QAAQmC,EAAAtT,IAAMN,EAAAmwD,wBAAA,aAA6CnwD,EAAAsmD,sBAAAh1C,EAAgCtR,EAAA21B,yBAAA,SAAAlkB,EAAAK,GAA+C,OAAAL,GAAU,wCAAyC,SAAAA,EAAA,EAAY,GAAAnR,GAAAsT,CAAQA,GAAAnC,CAAI,KAAI,MAAAK,KAAW,QAAQ8B,EAAAtT,IAClWN,EAAAy2B,0BAAA,SAAAhlB,EAAAK,EAAAxR,GAAkD,GAAAkR,GAAAxR,EAAAy9C,cAA4G,QAA/E,gBAAAn9C,IAAA,OAAAA,OAAA8vD,MAAA9vD,EAAA,gBAAAA,IAAA,EAAAA,EAAAkR,EAAAlR,EAAAkR,GAAAlR,EAAAkR,EAA+EC,GAAU,UAAA5H,KAAgB,MAAM,QAAAA,EAAA,GAAa,MAAM,QAAAA,EAAA,UAAoB,MAAM,QAAAA,EAAA,GAAa,MAAM,SAAAA,EAAA,IAAqN,MAAvMA,GAAAvJ,EAAAuJ,EAAM4H,GAAGvR,GAAA0S,IAAA6zB,SAAA30B,EAAAw9C,cAAA79C,EAAA29C,UAAA9uD,EAAA+uD,eAAAxlD,EAAAslD,cAA6E7uD,EAAAkR,GAAAC,EAAA09C,UAAA7uD,EAAA8S,EAAA7B,EAAAE,GAAA,OAAAe,EAAAmB,IAAAlC,IAAAe,EAAAjB,KAAAsD,EAAA1D,IAAA0D,KAAAlD,EAAAoD,EAAAzU,EAAAkR,MAAAC,EAAA09C,UAAAtlD,EAAAuJ,EAAAO,EAAAlC,GAAAiD,GAAAV,IAAAU,KAAAjC,EAAAuC,KAAiHvD,GACndzR,EAAAqwD,sBAAA,SAAA5+C,GAA0C,GAAAK,GAAA8B,CAAQ,mBAAkB,GAAAtT,GAAAsT,CAAQA,GAAA9B,CAAI,KAAI,MAAAL,GAAA9E,MAAA5D,KAAAT,WAA+B,QAAQsL,EAAAtT,MjC+gIrH,SAAUL,EAAQD,EAASH,GkCliIjC,YAGAI,GAAAD,QAAAH,EAAA,KlC4iIM,SAAUI,EAAQD,GmC/iIxBC,EAAAD,QAAA,SAAA4c,GAcA,QAAA0zC,GAAAplC,GAEAniB,KAAAmiB,SAIAniB,KAAAgD,OAAA,GAAA6Q,GAAA8L,QAGA3f,KAAAwnD,YAAA,EACAxnD,KAAAynD,YAAAvmC,IAGAlhB,KAAA0nD,QAAA,EACA1nD,KAAA2nD,QAAAzmC,IAIAlhB,KAAA4nD,cAAA,EACA5nD,KAAA6nD,cAAA7uC,KAAA8uC,GAIA9nD,KAAA+nD,kBAAA7mC,KACAlhB,KAAAgoD,gBAAA9mC,IAIAlhB,KAAAioD,iBACAjoD,KAAAkoD,cAAA,GAKA,IAKAC,GACAC,EANA7rC,EAAAvc,KAEAqoD,EAAA,KAOAC,EAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,GAAA50C,GAAA8L,QACA+oC,IAIA1oD,MAAA2oD,cAAA,WAEA,MAAAP,IAIApoD,KAAA4oD,kBAAA,WAEA,MAAAT,IAIAnoD,KAAA6oD,WAAA,SAAAC,GAEAP,GAAAO,GAIA9oD,KAAA+oD,SAAA,SAAAD,GAEAR,GAAAQ,GAKA9oD,KAAAgpD,QAAA,WAEA,GAAAhgD,GAAA,GAAA6K,GAAA8L,OAEA,iBAAAtK,GAEA,GAAAie,GAAAtzB,KAAAmiB,OAAA8mC,OAAAC,QAGAlgD,GAAAkD,IAAAonB,EAAA,GAAAA,EAAA,GAAAA,EAAA,IACAtqB,EAAAmgD,gBAAA9zC,GAEAozC,EAAA1yC,IAAA/M,OAOAhJ,KAAAopD,MAAA,WAEA,GAAApgD,GAAA,GAAA6K,GAAA8L,OAEA,iBAAAtK,GAEA,GAAAie,GAAAtzB,KAAAmiB,OAAA8mC,OAAAC,QAGAlgD,GAAAkD,IAAAonB,EAAA,GAAAA,EAAA,GAAAA,EAAA,IACAtqB,EAAAmgD,eAAA9zC,GAEAozC,EAAA1yC,IAAA/M,OAQAhJ,KAAAqpD,IAAA,SAAA9N,EAAAE,EAAA6N,EAAAC,GAEA,GAAAhtC,EAAA4F,iBAAAtO,GAAAkF,kBAAA,CAGA,GAAAlD,GAAA0G,EAAA4F,OAAAtM,SACA0I,EAAA1I,EAAA2zC,QAAAC,IAAAltC,EAAAvZ,QACA0mD,EAAAnrC,EAAAzkB,QAGA4vD,IAAA1wC,KAAA2wC,IAAAptC,EAAA4F,OAAAynC,IAAA,EAAA5wC,KAAA8uC,GAAA,KAGAvrC,EAAAysC,QAAA,EAAAzN,EAAAmO,EAAAH,GACAhtC,EAAA6sC,MAAA,EAAA3N,EAAAiO,EAAAH,OAEIhtC,GAAA4F,iBAAAtO,GAAAg2C,oBAGJttC,EAAAysC,QAAAzN,GAAAh/B,EAAA4F,OAAA2nC,MAAAvtC,EAAA4F,OAAA8tB,MAAAqZ,GACA/sC,EAAA6sC,MAAA3N,GAAAl/B,EAAA4F,OAAAguB,IAAA5zB,EAAA4F,OAAA4nC,QAAAR,IAKA/lD,QAAAwmD,KAAA,iFAMAhqD,KAAAiqD,QAAA,SAAAC,GAEA3tC,EAAA4F,iBAAAtO,GAAAkF,kBAEAyvC,GAAA0B,EAEI3tC,EAAA4F,iBAAAtO,GAAAg2C,oBAEJttC,EAAA4F,OAAA5T,KAAAyK,KAAAZ,IAAApY,KAAA0nD,QAAA1uC,KAAA02B,IAAA1vC,KAAA2nD,QAAA3nD,KAAAmiB,OAAA5T,KAAA27C,IACA3tC,EAAA4F,OAAAgoC,yBACAzB,MAIAllD,QAAAwmD,KAAA,wFAMAhqD,KAAAoqD,SAAA,SAAAF,GAEA3tC,EAAA4F,iBAAAtO,GAAAkF,kBAEAyvC,GAAA0B,EAEI3tC,EAAA4F,iBAAAtO,GAAAg2C,oBAEJttC,EAAA4F,OAAA5T,KAAAyK,KAAAZ,IAAApY,KAAA0nD,QAAA1uC,KAAA02B,IAAA1vC,KAAA2nD,QAAA3nD,KAAAmiB,OAAA5T,KAAA27C,IACA3tC,EAAA4F,OAAAgoC,yBACAzB,MAIAllD,QAAAwmD,KAAA,wFAMAhqD,KAAA+Z,OAAA,WAEA,GAAAwE,GAAA,GAAA1K,GAAA8L,QAGA0qC,MAAAx2C,GAAAy2C,YAAAC,mBAAApoC,EAAAqoC,GAAA,GAAA32C,GAAA8L,QAAA,QACA8qC,EAAAJ,EAAAb,QAAAkB,UAEAC,EAAA,GAAA92C,GAAA8L,QACAirC,EAAA,GAAA/2C,GAAAy2C,UAEA,mBAEA,GAAAz0C,GAAA7V,KAAAmiB,OAAAtM,QAEA0I,GAAA9F,KAAA5C,GAAA4zC,IAAAzpD,KAAAgD,QAGAub,EAAAssC,gBAAAR,GAIAlC,EAAAnvC,KAAA8xC,MAAAvsC,EAAAtV,EAAAsV,EAAAhU,GAIA69C,EAAApvC,KAAA8xC,MAAA9xC,KAAA+xC,KAAAxsC,EAAAtV,EAAAsV,EAAAtV,EAAAsV,EAAAhU,EAAAgU,EAAAhU,GAAAgU,EAAA1V,GAEAs/C,GAAAI,EACAH,GAAAE,EAGAH,EAAAnvC,KAAAZ,IAAApY,KAAA+nD,gBAAA/uC,KAAA02B,IAAA1vC,KAAAgoD,gBAAAG,IAGAC,EAAApvC,KAAAZ,IAAApY,KAAA4nD,cAAA5uC,KAAA02B,IAAA1vC,KAAA6nD,cAAAO,IAGAA,EAAApvC,KAAAZ,IAAAiwC,EAAArvC,KAAA02B,IAAA12B,KAAA8uC,GAAAO,EAAAD,GAEA,IAAA4C,GAAAzsC,EAAAzkB,SAAA0uD,CAsCA,OAnCAwC,GAAAhyC,KAAAZ,IAAApY,KAAAwnD,YAAAxuC,KAAA02B,IAAA1vC,KAAAynD,YAAAuD,IAGAhrD,KAAAgD,OAAA+S,IAAA0yC,GAEAlqC,EAAAtV,EAAA+hD,EAAAhyC,KAAAiyC,IAAA7C,GAAApvC,KAAAiyC,IAAA9C,GACA5pC,EAAA1V,EAAAmiD,EAAAhyC,KAAAkyC,IAAA9C,GACA7pC,EAAAhU,EAAAygD,EAAAhyC,KAAAiyC,IAAA7C,GAAApvC,KAAAkyC,IAAA/C,GAGA5pC,EAAAssC,gBAAAJ,GAEA50C,EAAA4C,KAAAzY,KAAAgD,QAAA+S,IAAAwI,GAEAve,KAAAmiB,OAAAlJ,OAAAjZ,KAAAgD,QAEAhD,KAAAioD,oBAEAM,GAAA,EAAAvoD,KAAAkoD,cACAI,GAAA,EAAAtoD,KAAAkoD,gBAIAK,EAAA,EACAD,EAAA,GAIAE,EAAA,EACAC,EAAAv8C,IAAA,UAMAw8C,GACAiC,EAAAQ,kBAAAnrD,KAAAmiB,OAAAtM,UAAAwyC,GACA,KAAAuC,EAAAQ,IAAAprD,KAAAmiB,OAAAkpC,aAAAhD,KAEAsC,EAAAlyC,KAAAzY,KAAAmiB,OAAAtM,UACA+0C,EAAAnyC,KAAAzY,KAAAmiB,OAAAkpC,YACA3C,MAAA,OAuBA,QAAA90C,GAAAuO,EAAAvI,GAmGA,QAAAyvC,GAAA9N,EAAAE,GAEA,GAAA51C,GAAA0W,EAAA3C,aAAAthB,SAAAikB,EAAA3C,WAAAyM,KAAA9J,EAAA3C,UAEA0xC,GAAAjC,IAAA9N,EAAAE,EAAA51C,EAAA0lD,YAAA1lD,EAAA2lD,cAmCA,QAAAC,KAEA,SAAAzyC,KAAA8uC,GAAA,MAAAvrC,EAAAmvC,gBAIA,QAAAC,KAEA,MAAA3yC,MAAAgI,IAAA,IAAAzE,EAAAqvC,WAIA,QAAAnH,GAAAvxB,GAEA,GAAA3W,EAAAsvC,aAAA,CAIA,GAFA34B,EAAA/B,iBAEA+B,EAAA0D,SAAAra,EAAAuvC,aAAAC,MAAA,CAEA,GAAAxvC,EAAAyvC,kBAAA,MAEAztB,GAAA0tB,EAAAC,OAEAC,EAAAjgD,IAAAgnB,EAAA4iB,QAAA5iB,EAAA6iB,aAEI,IAAA7iB,EAAA0D,SAAAra,EAAAuvC,aAAAM,KAAA,CAEJ,GAAA7vC,EAAA8vC,gBAAA,MAEA9tB,GAAA0tB,EAAAK,MAEAC,EAAArgD,IAAAgnB,EAAA4iB,QAAA5iB,EAAA6iB,aAEI,IAAA7iB,EAAA0D,SAAAra,EAAAuvC,aAAAU,IAAA,CAEJ,GAAAjwC,EAAAkwC,eAAA,MAEAluB,GAAA0tB,EAAAO,IAEAE,EAAAxgD,IAAAgnB,EAAA4iB,QAAA5iB,EAAA6iB,SAIAxX,IAAA0tB,EAAAU,OAEAr0D,SAAAmhB,iBAAA,YAAAmzC,MACAt0D,SAAAmhB,iBAAA,UAAAozC,MACAtwC,EAAAuwC,cAAAC,KAMA,QAAAH,GAAA15B,GAEA,GAAA3W,EAAAsvC,aAAA,CAEA34B,EAAA/B,gBAEA,IAAAtrB,GAAA0W,EAAA3C,aAAAthB,SAAAikB,EAAA3C,WAAAyM,KAAA9J,EAAA3C,UAEA,IAAA2kB,IAAA0tB,EAAAC,OAAA,CAEA,GAAA3vC,EAAAyvC,kBAAA,MAEAgB,GAAA9gD,IAAAgnB,EAAA4iB,QAAA5iB,EAAA6iB,SACAkX,EAAAC,WAAAF,EAAAb,GAGAb,EAAAzC,WAAA,EAAA7vC,KAAA8uC,GAAAmF,EAAAhkD,EAAApD,EAAA0lD,YAAAhvC,EAAA4wC,aAGA7B,EAAAvC,SAAA,EAAA/vC,KAAA8uC,GAAAmF,EAAApkD,EAAAhD,EAAA2lD,aAAAjvC,EAAA4wC,aAEAhB,EAAA1zC,KAAAu0C,OAEI,IAAAzuB,IAAA0tB,EAAAK,MAAA,CAEJ,GAAA/vC,EAAA8vC,gBAAA,MAEAe,GAAAlhD,IAAAgnB,EAAA4iB,QAAA5iB,EAAA6iB,SACAsX,EAAAH,WAAAE,EAAAb,GAEAc,EAAAxkD,EAAA,EAEAyiD,EAAArB,QAAA0B,KAEK0B,EAAAxkD,EAAA,GAELyiD,EAAAlB,SAAAuB,KAIAY,EAAA9zC,KAAA20C,OAEI,IAAA7uB,IAAA0tB,EAAAO,IAAA,CAEJ,GAAAjwC,EAAAkwC,eAAA,MAEAa,GAAAphD,IAAAgnB,EAAA4iB,QAAA5iB,EAAA6iB,SACAwX,EAAAL,WAAAI,EAAAZ,GAEArD,EAAAkE,EAAAtkD,EAAAskD,EAAA1kD,GAEA6jD,EAAAj0C,KAAA60C,GAIA/uB,IAAA0tB,EAAAU,MAAApwC,EAAAxC,UAIA,QAAA8yC,KAEAtwC,EAAAsvC,eAEAvzD,SAAA47C,oBAAA,YAAA0Y,MACAt0D,SAAA47C,oBAAA,UAAA2Y,MACAtwC,EAAAuwC,cAAAU,GACAjvB,EAAA0tB,EAAAU,MAIA,QAAAc,GAAAv6B,GAEA,GAAA3W,EAAAsvC,cAAAtvC,EAAA8vC,iBAAA9tB,IAAA0tB,EAAAU,KAAA,CAEAz5B,EAAA/B,iBACA+B,EAAA9B,iBAEA,IAAAs8B,GAAA,CAEA30D,UAAAm6B,EAAAyoB,WAIA+R,EAAAx6B,EAAAyoB,WAEI5iD,SAAAm6B,EAAAnB,SAIJ27B,GAAAx6B,EAAAnB,QAIA27B,EAAA,EAEApC,EAAAlB,SAAAuB,KAEI+B,EAAA,GAEJpC,EAAArB,QAAA0B,KAIApvC,EAAAxC,SACAwC,EAAAuwC,cAAAC,GACAxwC,EAAAuwC,cAAAU,IAIA,QAAAG,GAAAz6B,GAEA,GAAA3W,EAAAsvC,cAAAtvC,EAAA/C,iBAAA+C,EAAAkwC,eAEA,OAAAv5B,EAAA3C,SAEA,IAAAhU,GAAA7Z,KAAAkrD,GACAvE,EAAA,EAAA9sC,EAAAsxC,aACAtxC,EAAAxC,QACA,MAEA,KAAAwC,GAAA7Z,KAAAorD,OACAzE,EAAA,GAAA9sC,EAAAsxC,aACAtxC,EAAAxC,QACA,MAEA,KAAAwC,GAAA7Z,KAAAqrD,KACA1E,EAAA9sC,EAAAsxC,YAAA,GACAtxC,EAAAxC,QACA,MAEA,KAAAwC,GAAA7Z,KAAAsrD,MACA3E,GAAA9sC,EAAAsxC,YAAA,GACAtxC,EAAAxC,UAOA,QAAAk0C,GAAA/6B,GAEA,GAAA3W,EAAAsvC,aAAA,CAEA,OAAA34B,EAAAgoB,QAAAphD,QAEA,OAEA,GAAAyiB,EAAAyvC,kBAAA,MAEAztB,GAAA0tB,EAAAiC,aAEA/B,EAAAjgD,IAAAgnB,EAAAgoB,QAAA,GAAAlF,MAAA9iB,EAAAgoB,QAAA,GAAAjF,MACA,MAEA,QAEA,GAAA15B,EAAA8vC,gBAAA,MAEA9tB,GAAA0tB,EAAAkC,WAEA,IAAArL,GAAA5vB,EAAAgoB,QAAA,GAAAlF,MAAA9iB,EAAAgoB,QAAA,GAAAlF,MACA+M,EAAA7vB,EAAAgoB,QAAA,GAAAjF,MAAA/iB,EAAAgoB,QAAA,GAAAjF,MACA5gC,EAAA2D,KAAA+xC,KAAAjI,IAAAC,IACAwJ,GAAArgD,IAAA,EAAAmJ,EACA,MAEA,QAEA,GAAAkH,EAAAkwC,eAAA,MAEAluB,GAAA0tB,EAAAmC,UAEA1B,EAAAxgD,IAAAgnB,EAAAgoB,QAAA,GAAAlF,MAAA9iB,EAAAgoB,QAAA,GAAAjF,MACA,MAEA,SAEA1X,EAAA0tB,EAAAU,KAIApuB,IAAA0tB,EAAAU,MAAApwC,EAAAuwC,cAAAC,IAIA,QAAAsB,GAAAn7B,GAEA,GAAA3W,EAAAsvC,aAAA,CAEA34B,EAAA/B,iBACA+B,EAAA9B,iBAEA,IAAAvrB,GAAA0W,EAAA3C,aAAAthB,SAAAikB,EAAA3C,WAAAyM,KAAA9J,EAAA3C,UAEA,QAAAsZ,EAAAgoB,QAAAphD,QAEA,OAEA,GAAAyiB,EAAAyvC,kBAAA,MACA,IAAAztB,IAAA0tB,EAAAiC,aAAA,MAEAlB,GAAA9gD,IAAAgnB,EAAAgoB,QAAA,GAAAlF,MAAA9iB,EAAAgoB,QAAA,GAAAjF,OACAgX,EAAAC,WAAAF,EAAAb,GAGAb,EAAAzC,WAAA,EAAA7vC,KAAA8uC,GAAAmF,EAAAhkD,EAAApD,EAAA0lD,YAAAhvC,EAAA4wC,aAEA7B,EAAAvC,SAAA,EAAA/vC,KAAA8uC,GAAAmF,EAAApkD,EAAAhD,EAAA2lD,aAAAjvC,EAAA4wC,aAEAhB,EAAA1zC,KAAAu0C,GAEAzwC,EAAAxC,QACA,MAEA,QAEA,GAAAwC,EAAA8vC,gBAAA,MACA,IAAA9tB,IAAA0tB,EAAAkC,YAAA,MAEA,IAAArL,GAAA5vB,EAAAgoB,QAAA,GAAAlF,MAAA9iB,EAAAgoB,QAAA,GAAAlF,MACA+M,EAAA7vB,EAAAgoB,QAAA,GAAAjF,MAAA/iB,EAAAgoB,QAAA,GAAAjF,MACA5gC,EAAA2D,KAAA+xC,KAAAjI,IAAAC,IAEAqK,GAAAlhD,IAAA,EAAAmJ,GACAg4C,EAAAH,WAAAE,EAAAb,GAEAc,EAAAxkD,EAAA,EAEAyiD,EAAAlB,SAAAuB,KAEM0B,EAAAxkD,EAAA,GAENyiD,EAAArB,QAAA0B,KAIAY,EAAA9zC,KAAA20C,GAEA7wC,EAAAxC,QACA,MAEA,QAEA,GAAAwC,EAAAkwC,eAAA,MACA,IAAAluB,IAAA0tB,EAAAmC,UAAA,MAEAd,GAAAphD,IAAAgnB,EAAAgoB,QAAA,GAAAlF,MAAA9iB,EAAAgoB,QAAA,GAAAjF,OACAsX,EAAAL,WAAAI,EAAAZ,GAEArD,EAAAkE,EAAAtkD,EAAAskD,EAAA1kD,GAEA6jD,EAAAj0C,KAAA60C,GAEA/wC,EAAAxC,QACA,MAEA,SAEAwkB,EAAA0tB,EAAAU,OAMA,QAAA2B,KAEA/xC,EAAAsvC,eAEAtvC,EAAAuwC,cAAAU,GACAjvB,EAAA0tB,EAAAU,MAIA,QAAA4B,GAAAr7B,GAEAA,EAAA/B,iBAjdA,GAAAm6B,GAAA,GAAA/D,GAAAplC,EAEAniB,MAAA4Z,WAAA7gB,SAAA6gB,IAAAthB,SAIAgC,OAAAC,eAAAyF,KAAA,cAEAsH,IAAA,WAEA,MAAAgkD,MAMAtrD,KAAA2oD,cAAA,WAEA,MAAA2C,GAAA3C,iBAIA3oD,KAAA4oD,kBAAA,WAEA,MAAA0C,GAAA1C,qBAKA5oD,KAAA6rD,WAGA7rD,KAAAwuD,OAAAxuD,KAAAgD,OAKAhD,KAAAqsD,cACArsD,KAAA4rD,UAAA,EAGA5rD,KAAAgsD,gBACAhsD,KAAAmtD,YAAA,EAGAntD,KAAAysD,aACAzsD,KAAA6tD,YAAA,EAIA7tD,KAAAyuD,cACAzuD,KAAA0rD,gBAAA,EAGA1rD,KAAAwZ,cAGAxZ,KAAA0C,MAAeqrD,KAAA,GAAAH,GAAA,GAAAI,MAAA,GAAAF,OAAA,IAGf9tD,KAAA8rD,cAAuBC,MAAAl4C,EAAA66C,MAAAX,KAAA3B,KAAAv4C,EAAA66C,MAAAC,OAAAnC,IAAA34C,EAAA66C,MAAAV,MAKvB,IAAAzxC,GAAAvc,KAEAmsD,EAAA,GAAAt4C,GAAA+6C,QACA5B,EAAA,GAAAn5C,GAAA+6C,QACA3B,EAAA,GAAAp5C,GAAA+6C,QAEAlC,EAAA,GAAA74C,GAAA+6C,QACAtB,EAAA,GAAAz5C,GAAA+6C,QACArB,EAAA,GAAA15C,GAAA+6C,QAEArC,EAAA,GAAA14C,GAAA+6C,QACAxB,EAAA,GAAAv5C,GAAA+6C,QACAvB,EAAA,GAAAx5C,GAAA+6C,QAEA3C,GAAeU,QAAAT,OAAA,EAAAI,MAAA,EAAAE,IAAA,EAAA0B,aAAA,EAAAC,YAAA,EAAAC,UAAA,GAEf7vB,EAAA0tB,EAAAU,IAIA3sD,MAAA6uD,QAAA7uD,KAAAgD,OAAAwmD,QACAxpD,KAAA8uD,UAAA9uD,KAAAmiB,OAAAtM,SAAA2zC,QACAxpD,KAAA+uD,MAAA/uD,KAAAmiB,OAAA5T,IAIA,IAAAygD,IAAqBrqD,KAAA,UACrBooD,GAAoBpoD,KAAA,SACpB6oD,GAAkB7oD,KAAA,MAYlB3E,MAAA+Z,OAAA,WAEA/Z,KAAAyuD,YAAAlwB,IAAA0tB,EAAAU,MAEArB,EAAAzC,WAAA4C,KAIAH,EAAAvxC,eAEA/Z,KAAA8sD,cAAAkC,IAMAhvD,KAAAivD,MAAA,WAEA1wB,EAAA0tB,EAAAU,KAEA3sD,KAAAgD,OAAAyV,KAAAzY,KAAA6uD,SACA7uD,KAAAmiB,OAAAtM,SAAA4C,KAAAzY,KAAA8uD,WACA9uD,KAAAmiB,OAAA5T,KAAAvO,KAAA+uD,MAEA/uD,KAAAmiB,OAAAgoC,yBACAnqD,KAAA8sD,cAAAkC,GAEAhvD,KAAA+Z,UAiVA/Z,KAAAsZ,QAAA,WAEAtZ,KAAA4Z,WAAAs6B,oBAAA,cAAAqa,MACAvuD,KAAA4Z,WAAAs6B,oBAAA,YAAAuQ,MACAzkD,KAAA4Z,WAAAs6B,oBAAA,aAAAuZ,MACAztD,KAAA4Z,WAAAs6B,oBAAA,sBAAAuZ,MAEAztD,KAAA4Z,WAAAs6B,oBAAA,aAAA+Z,MACAjuD,KAAA4Z,WAAAs6B,oBAAA,WAAAoa,MACAtuD,KAAA4Z,WAAAs6B,oBAAA,YAAAma,MAEA/1D,SAAA47C,oBAAA,YAAA0Y,MACAt0D,SAAA47C,oBAAA,UAAA2Y,MAEA7jC,OAAAkrB,oBAAA,UAAAyZ,OAIA3tD,KAAA4Z,WAAAH,iBAAA,cAAA80C,MAEAvuD,KAAA4Z,WAAAH,iBAAA,YAAAgrC,MACAzkD,KAAA4Z,WAAAH,iBAAA,aAAAg0C,MACAztD,KAAA4Z,WAAAH,iBAAA,sBAAAg0C,MAEAztD,KAAA4Z,WAAAH,iBAAA,aAAAw0C,MACAjuD,KAAA4Z,WAAAH,iBAAA,WAAA60C,MACAtuD,KAAA4Z,WAAAH,iBAAA,YAAA40C,MAEArlC,OAAAvP,iBAAA,UAAAk0C,MAGA3tD,KAAA+Z,SAxyBA,GAAA20C,GAAA76C,EAAA66C,KA4lCA,OA3lCAA,KACAA,GAAWX,KAAA,EAAAY,OAAA,EAAAX,MAAA,IA0yBXp6C,EAAAzX,UAAA7B,OAAA8B,OAAAyX,EAAAq7C,gBAAA/yD,WACAyX,EAAAzX,UAAAE,YAAAuX,EAEAtZ,OAAA8Y,iBAAAQ,EAAAzX,WAEAgmB,QAEA7a,IAAA,WAEA,MAAAtH,MAAAsrD,WAAAnpC,SAMAnf,QAEAsE,IAAA,WAEA,MAAAtH,MAAAsrD,WAAAtoD,QAIAkJ,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,2EACAhqD,KAAAsrD,WAAAtoD,OAAAyV,KAAAze,KAMAwtD,aAEAlgD,IAAA,WAEA,MAAAtH,MAAAsrD,WAAA9D,aAIAt7C,IAAA,SAAAlS,GAEAgG,KAAAsrD,WAAA9D,YAAAxtD,IAMAytD,aAEAngD,IAAA,WAEA,MAAAtH,MAAAsrD,WAAA7D,aAIAv7C,IAAA,SAAAlS,GAEAgG,KAAAsrD,WAAA7D,YAAAztD,IAMA0tD,SAEApgD,IAAA,WAEA,MAAAtH,MAAAsrD,WAAA5D,SAIAx7C,IAAA,SAAAlS,GAEAgG,KAAAsrD,WAAA5D,QAAA1tD,IAMA2tD,SAEArgD,IAAA,WAEA,MAAAtH,MAAAsrD,WAAA3D,SAIAz7C,IAAA,SAAAlS,GAEAgG,KAAAsrD,WAAA3D,QAAA3tD,IAMA4tD,eAEAtgD,IAAA,WAEA,MAAAtH,MAAAsrD,WAAA1D,eAIA17C,IAAA,SAAAlS,GAEAgG,KAAAsrD,WAAA1D,cAAA5tD,IAMA6tD,eAEAvgD,IAAA,WAEA,MAAAtH,MAAAsrD,WAAAzD,eAIA37C,IAAA,SAAAlS,GAEAgG,KAAAsrD,WAAAzD,cAAA7tD,IAMA+tD,iBAEAzgD,IAAA,WAEA,MAAAtH,MAAAsrD,WAAAvD,iBAIA77C,IAAA,SAAAlS,GAEAgG,KAAAsrD,WAAAvD,gBAAA/tD,IAMAguD,iBAEA1gD,IAAA,WAEA,MAAAtH,MAAAsrD,WAAAtD,iBAIA97C,IAAA,SAAAlS,GAEAgG,KAAAsrD,WAAAtD,gBAAAhuD,IAMAiuD,eAEA3gD,IAAA,WAEA,MAAAtH,MAAAsrD,WAAArD,eAIA/7C,IAAA,SAAAlS,GAEAgG,KAAAsrD,WAAArD,cAAAjuD,IAMAkuD,eAEA5gD,IAAA,WAEA,MAAAtH,MAAAsrD,WAAApD,eAIAh8C,IAAA,SAAAlS,GAEAgG,KAAAsrD,WAAApD,cAAAluD,IAQAm1D,QAEA7nD,IAAA,WAGA,MADA9D,SAAAwmD,KAAA,+EACAhqD,KAAAqsD,YAIAngD,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,8EACAhqD,KAAAqsD,YAAAryD,IAMAo1D,UAEA9nD,IAAA,WAGA,MADA9D,SAAAwmD,KAAA,mFACAhqD,KAAAgsD,cAIA9/C,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,kFACAhqD,KAAAgsD,cAAAhyD,IAMAq1D,OAEA/nD,IAAA,WAGA,MADA9D,SAAAwmD,KAAA,6EACAhqD,KAAAysD,WAIAvgD,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,4EACAhqD,KAAAysD,WAAAzyD,IAMAs1D,QAEAhoD,IAAA,WAGA,MADA9D,SAAAwmD,KAAA,+EACAhqD,KAAAwZ,YAIAtN,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,8EACAhqD,KAAAwZ,YAAAxf,IAMAu1D,cAEAjoD,IAAA,WAGA,MADA9D,SAAAwmD,KAAA,wFACAhqD,KAAAsrD,WAAArD,eAIA/7C,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,uFACAhqD,KAAAsrD,WAAArD,eAAAjuD,IAMAw1D,sBAEAloD,IAAA,WAGA,MADA9D,SAAAwmD,KAAA,4FACAhqD,KAAAsrD,WAAApD,eAIAh8C,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,4FACAhqD,KAAAsrD,WAAApD,cAAAluD,MAQA4Z,InCujIM,SAAU1c,EAAQD,EAASH,GoCppKjC,GAAA24D,GAAAC,EAAAt1C,QAMAvG,GAAa87C,SAAA,KAMbF,GAAA/mD,EAAAgnD,EAAA,kBAAAD,KAAAp4D,KAAAJ,EAAAH,EAAAG,EAAAC,GAAAu4D,IAAA12D,SAAA22D,IAAAx4D,EAAAD,QAAAy4D,IAWA32D,SAAAqhB,EAAAN,uBAAA/gB,SAAAqhB,EAAAhF,uBAIA,WAKA,OAHAw6C,GAAA,EACAC,GAAA,yBAEA5mD,EAAA,EAAkBA,EAAA4mD,EAAA/1D,SAAAsgB,EAAAN,wBAAoD7Q,EAEtEmR,EAAAN,sBAAAM,EAAAy1C,EAAA5mD,GAAA,yBACAmR,EAAAhF,qBAAAgF,EAAAy1C,EAAA5mD,GAAA,yBAAAmR,EAAAy1C,EAAA5mD,GAAA,8BAIAlQ,UAAAqhB,EAAAN,uBAAA/gB,SAAAqhB,EAAAyvB,aAEAzvB,EAAAN,sBAAA,SAAA4jB,GAEA,GAAAoyB,GAAAxa,KAAAC,MAAAwa,EAAA/2C,KAAAZ,IAAA,MAAA03C,EAAAF,IACAz4D,EAAAijB,EAAAyvB,WAAA,WAEAnM,EAAAoyB,EAAAC,IAEKA,EAEL,OADAH,GAAAE,EAAAC,EACA54D,IAMA4B,SAAAqhB,EAAAhF,sBAAArc,SAAAqhB,EAAA6iC,eAEA7iC,EAAAhF,qBAAA,SAAAje,GAEAijB,EAAA6iC,aAAA9lD,QAUA4B,SAAAigB,KAAA6H,OAIA7H,KAAA6H,KAAA,SAAA5X,GAEA,MAAAA,GAAA,KAAAA,EAAA,KAAAA,IAMAlQ,SAAAi3D,SAAA7zD,UAAAhD,MAAAJ,SAAAuB,OAAAC,gBAKAD,OAAAC,eAAAy1D,SAAA7zD,UAAA,QAEAmL,IAAA,WAEA,MAAAtH,MAAAmG,WAAA/K,MAAA,mCAUAyY,EAAA66C,OAAeX,KAAA,EAAAY,OAAA,EAAAX,MAAA,GAIfn6C,EAAAo8C,aAAA,EACAp8C,EAAAq8C,aAAA,EACAr8C,EAAAs8C,cAAA,EACAt8C,EAAAu8C,kBAAA,EAEAv8C,EAAAw8C,qBAAA,EACAx8C,EAAAy8C,sBAAA,EAIAz8C,EAAA08C,eAAA,EACA18C,EAAA28C,aAAA,EACA38C,EAAA48C,iBAAA,EAMA58C,EAAA68C,UAAA,EACA78C,EAAA88C,SAAA,EACA98C,EAAA0D,WAAA,EAIA1D,EAAA+8C,YAAA,EACA/8C,EAAAg9C,cAAA,EAIAh9C,EAAAi9C,SAAA,EACAj9C,EAAAk9C,WAAA,EACAl9C,EAAAgE,aAAA,EAIAhE,EAAAm9C,WAAA,EACAn9C,EAAAo9C,eAAA,EACAp9C,EAAAq9C,iBAAA,EACAr9C,EAAAs9C,oBAAA,EACAt9C,EAAAu9C,iBAAA,EACAv9C,EAAAw9C,eAAA,EAMAx9C,EAAAy9C,YAAA,IACAz9C,EAAA09C,iBAAA,IACA19C,EAAA29C,wBAAA,IACA39C,EAAA49C,YAAA,IACA59C,EAAA69C,YAAA,IAIA79C,EAAA89C,WAAA,IACA99C,EAAA+9C,UAAA,IACA/9C,EAAAg+C,eAAA,IACAh+C,EAAAi+C,uBAAA,IACAj+C,EAAAk+C,eAAA,IACAl+C,EAAAm+C,uBAAA,IACAn+C,EAAAo+C,eAAA,IACAp+C,EAAAq+C,uBAAA,IAUAr+C,EAAAs+C,eAAA,IACAt+C,EAAAu+C,uBAAA,IACAv+C,EAAAw+C,uBAAA,IAIAx+C,EAAAy+C,WAAA,EACAz+C,EAAA0+C,YAAA,EACA1+C,EAAA2+C,UAAA,EACA3+C,EAAA4+C,eAAA,EACA5+C,EAAA6+C,WAAA,EACA7+C,EAAA8+C,kBAAA,EACA9+C,EAAA++C,aAAA,EACA/+C,EAAAg/C,cAAA,EAKAh/C,EAAAi/C,kBAAA,EACAj/C,EAAAk/C,aAAA,EACAl/C,EAAAm/C,aAAA,EAIAn/C,EAAAo/C,UAAA,IAEAp/C,EAAAq/C,sBAAA,IACAr/C,EAAAs/C,sBAAA,IAEAt/C,EAAAu/C,iCAAA,IACAv/C,EAAAw/C,iCAAA,IAEAx/C,EAAAy/C,2BAAA,IAIAz/C,EAAA0/C,eAAA,IACA1/C,EAAA2/C,oBAAA,KACA3/C,EAAA4/C,uBAAA,KAIA5/C,EAAA6/C,cAAA,KACA7/C,EAAA8/C,2BAAA,KACA9/C,EAAA+/C,0BAAA,KACA//C,EAAAggD,aAAA,KACAhgD,EAAAigD,0BAAA,KACAjgD,EAAAkgD,yBAAA,KAIAlgD,EAAAmgD,iBAAA,KACAngD,EAAAogD,SAAA,KACApgD,EAAAqgD,UAAA,KACArgD,EAAAsgD,kBAAA,KACAtgD,EAAAugD,QAAA,KACAvgD,EAAAwgD,gBAAA,KACAxgD,EAAAygD,UAAA,KACAzgD,EAAA0gD,cAAA,KAKA1gD,EAAA2gD,sBAAA,KACA3gD,EAAA4gD,sBAAA,KACA5gD,EAAA6gD,qBAAA,KAIA7gD,EAAA8gD,YAAA,KACA9gD,EAAA+gD,UAAA,KACA/gD,EAAAghD,WAAA,KACAhhD,EAAAihD,gBAAA,KACAjhD,EAAAkhD,qBAAA,KAEAlhD,EAAAmhD,WAAAnhD,EAAAghD,WAIAhhD,EAAAohD,qBAAA,KACAphD,EAAAqhD,sBAAA,KACArhD,EAAAshD,sBAAA,KACAthD,EAAAuhD,sBAAA,KAKAvhD,EAAAwhD,wBAAA,KACAxhD,EAAAyhD,wBAAA,KACAzhD,EAAA0hD,yBAAA,KACA1hD,EAAA2hD,yBAAA,KAKA3hD,EAAA4hD,UAAA,WAEAjyD,QAAAC,MAAA,0EAEAzD,KAAA01D,cAAA,SAAAC,EAAAj9C,GAEAlV,QAAAwmD,KAAA,8DACA2L,EAAAC,QAAAl9C,IAIA1Y,KAAA61D,gBAAA,SAAAF,EAAAj9C,GAEAlV,QAAAwmD,KAAA,kEACA2L,EAAAG,UAAAp9C,IAIA1Y,KAAA+1D,WAAA,SAAAJ,EAAAj9C,GAEAlV,QAAAC,MAAA,sEAMAoQ,EAAAmiD,eAAA,WAEAxyD,QAAAC,MAAA,mFAEAzD,KAAA4Z,WAAAthB,SAAAD,cAAA,UACA2H,KAAAi2D,MAAA,aACAj2D,KAAA5H,OAAA,aACA4H,KAAAoZ,cAAA,aACApZ,KAAAmZ,QAAA,cAUAtF,EAAAqiD,MAAA,SAAA3mD,GAEA,WAAAhQ,UAAAzF,OAEAkG,KAAAm2D,OAAA52D,UAAA,GAAAA,UAAA,GAAAA,UAAA,IAIAS,KAAAkM,IAAAqD,IAIAsE,EAAAqiD,MAAA/5D,WAEAE,YAAAwX,EAAAqiD,MAEA7sD,EAAA,EAAAT,EAAA,EAAAG,EAAA,EAEAmD,IAAA,SAAAlS,GAgBA,MAdAA,aAAA6Z,GAAAqiD,MAEAl2D,KAAAyY,KAAAze,GAEG,gBAAAA,GAEHgG,KAAAo2D,OAAAp8D,GAEG,gBAAAA,IAEHgG,KAAAq2D,SAAAr8D,GAIAgG,MAIAo2D,OAAA,SAAAE,GAQA,MANAA,GAAAt9C,KAAA2tC,MAAA2P,GAEAt2D,KAAAqJ,GAAAitD,GAAA,YACAt2D,KAAA4I,GAAA0tD,GAAA,WACAt2D,KAAA+I,GAAA,IAAAutD,GAAA,IAEAt2D,MAIAm2D,OAAA,SAAA9sD,EAAAT,EAAAG,GAMA,MAJA/I,MAAAqJ,IACArJ,KAAA4I,IACA5I,KAAA+I,IAEA/I,MAIAu2D,OAAA,WAEA,QAAAC,GAAAh/D,EAAAmR,EAAAY,GAIA,MAFAA,GAAA,IAAAA,GAAA,GACAA,EAAA,IAAAA,GAAA,GACAA,EAAA,IAAA/R,EAAA,GAAAmR,EAAAnR,GAAA+R,EACAA,EAAA,GAAAZ,EACAY,EAAA,IAAA/R,EAAA,GAAAmR,EAAAnR,IAAA,IAAA+R,GACA/R,EAIA,gBAAA4Q,EAAA/E,EAAA+F,GAOA,GAJAhB,EAAAyL,EAAAmF,KAAAy9C,gBAAAruD,EAAA,GACA/E,EAAAwQ,EAAAmF,KAAA09C,MAAArzD,EAAA,KACA+F,EAAAyK,EAAAmF,KAAA09C,MAAAttD,EAAA,KAEA,IAAA/F,EAEArD,KAAAqJ,EAAArJ,KAAA4I,EAAA5I,KAAA+I,EAAAK,MAEI,CAEJ,GAAA5R,GAAA4R,GAAA,GAAAA,GAAA,EAAA/F,GAAA+F,EAAA/F,EAAA+F,EAAA/F,EACAsF,EAAA,EAAAS,EAAA5R,CAEAwI,MAAAqJ,EAAAmtD,EAAA7tD,EAAAnR,EAAA4Q,EAAA,KACApI,KAAA4I,EAAA4tD,EAAA7tD,EAAAnR,EAAA4Q,GACApI,KAAA+I,EAAAytD,EAAA7tD,EAAAnR,EAAA4Q,EAAA,KAIA,MAAApI,UAMAq2D,SAAA,SAAAxkD,GAEA,GAeAva,GAfAq/D,EAAA,SAAAC,GAEA,GAAAj/C,GAAAhF,WAAAikD,EAQA,OANAj/C,GAAA,GAEAnU,QAAAwmD,KAAA,yCAAAn4C,EAAA,qBAIA8F,EAOA,IAAArgB,EAAA,kCAAAyE,KAAA8V,GAAA,CAIA,GAAAtC,GACApW,EAAA7B,EAAA,GACAu/D,EAAAv/D,EAAA,EAEA,QAAA6B,GAEA,UAEA,GAAAoW,EAAA,qCAAAxT,KAAA86D,GAOA,MAJA72D,MAAAqJ,EAAA2P,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YACAvP,KAAA4I,EAAAoQ,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YACAvP,KAAA+I,EAAAiQ,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YAEAvP,IAIA,IAAAuP,EAAA,2CAAAxT,KAAA86D,GAOA,MAJA72D,MAAAqJ,EAAA2P,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YACAvP,KAAA4I,EAAAoQ,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YACAvP,KAAA+I,EAAAiQ,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YAEAvP,IAIA,MAEA,YAEA,GAAAuP,EAAA,6DAAAxT,KAAA86D,GAQA,MALA72D,MAAAqJ,EAAA2P,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YACAvP,KAAA4I,EAAAoQ,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YACAvP,KAAA+I,EAAAiQ,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YACAonD,EAAApnD,EAAA,IAEAvP,IAIA,IAAAuP,EAAA,mEAAAxT,KAAA86D,GAQA,MALA72D,MAAAqJ,EAAA2P,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YACAvP,KAAA4I,EAAAoQ,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YACAvP,KAAA+I,EAAAiQ,KAAA02B,IAAA,IAAAsT,SAAAzzC,EAAA,YACAonD,EAAApnD,EAAA,IAEAvP,IAIA,MAEA,WAEA,GAAAuP,EAAA,qDAAAxT,KAAA86D,GAAA,CAGA,GAAAzuD,GAAAuK,WAAApD,EAAA,IACAlM,EAAA2/C,SAAAzzC,EAAA,WACAnG,EAAA45C,SAAAzzC,EAAA,UAEA,OAAAvP,MAAAu2D,OAAAnuD,EAAA/E,EAAA+F,GAIA,KAEA,YAEA,GAAAmG,EAAA,6EAAAxT,KAAA86D,GAAA,CAGA,GAAAzuD,GAAAuK,WAAApD,EAAA,IACAlM,EAAA2/C,SAAAzzC,EAAA,WACAnG,EAAA45C,SAAAzzC,EAAA,UAGA,OAFAonD,GAAApnD,EAAA,IAEAvP,KAAAu2D,OAAAnuD,EAAA/E,EAAA+F,SAQG,IAAA9R,EAAA,qBAAAyE,KAAA8V,GAAA,CAIH,GAAAykD,GAAAh/D,EAAA,GACA0xC,EAAAstB,EAAAx8D,MAEA,QAAAkvC,EAOA,MAJAhpC,MAAAqJ,EAAA25C,SAAAsT,EAAAvsD,OAAA,GAAAusD,EAAAvsD,OAAA,WACA/J,KAAA4I,EAAAo6C,SAAAsT,EAAAvsD,OAAA,GAAAusD,EAAAvsD,OAAA,WACA/J,KAAA+I,EAAAi6C,SAAAsT,EAAAvsD,OAAA,GAAAusD,EAAAvsD,OAAA,WAEA/J,IAEI,QAAAgpC,EAOJ,MAJAhpC,MAAAqJ,EAAA25C,SAAAsT,EAAAvsD,OAAA,GAAAusD,EAAAvsD,OAAA,WACA/J,KAAA4I,EAAAo6C,SAAAsT,EAAAvsD,OAAA,GAAAusD,EAAAvsD,OAAA,WACA/J,KAAA+I,EAAAi6C,SAAAsT,EAAAvsD,OAAA,GAAAusD,EAAAvsD,OAAA,WAEA/J,KAMA,GAAA6R,KAAA/X,OAAA,GAGA,GAAAw8D,GAAAziD,EAAAijD,cAAAjlD,EAEA9Y,UAAAu9D,EAGAt2D,KAAAo2D,OAAAE,GAKA9yD,QAAAwmD,KAAA,8BAAAn4C,GAMA,MAAA7R,OAIAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAqJ,EAAArJ,KAAA4I,EAAA5I,KAAA+I,IAIA0P,KAAA,SAAAlJ,GAMA,MAJAvP,MAAAqJ,EAAAkG,EAAAlG,EACArJ,KAAA4I,EAAA2G,EAAA3G,EACA5I,KAAA+I,EAAAwG,EAAAxG,EAEA/I,MAIA+2D,kBAAA,SAAAxnD,EAAAynD,GAQA,MANAj+D,UAAAi+D,MAAA,GAEAh3D,KAAAqJ,EAAA2P,KAAAgI,IAAAzR,EAAAlG,EAAA2tD,GACAh3D,KAAA4I,EAAAoQ,KAAAgI,IAAAzR,EAAA3G,EAAAouD,GACAh3D,KAAA+I,EAAAiQ,KAAAgI,IAAAzR,EAAAxG,EAAAiuD,GAEAh3D,MAIAi3D,kBAAA,SAAA1nD,EAAAynD,GAEAj+D,SAAAi+D,MAAA,EAEA,IAAAE,GAAAF,EAAA,IAAAA,EAAA,CAMA,OAJAh3D,MAAAqJ,EAAA2P,KAAAgI,IAAAzR,EAAAlG,EAAA6tD,GACAl3D,KAAA4I,EAAAoQ,KAAAgI,IAAAzR,EAAA3G,EAAAsuD,GACAl3D,KAAA+I,EAAAiQ,KAAAgI,IAAAzR,EAAAxG,EAAAmuD,GAEAl3D,MAIAm3D,qBAAA,WAEA,GAAA9tD,GAAArJ,KAAAqJ,EAAAT,EAAA5I,KAAA4I,EAAAG,EAAA/I,KAAA+I,CAMA,OAJA/I,MAAAqJ,MACArJ,KAAA4I,MACA5I,KAAA+I,MAEA/I,MAIAo3D,qBAAA,WAMA,MAJAp3D,MAAAqJ,EAAA2P,KAAA+xC,KAAA/qD,KAAAqJ,GACArJ,KAAA4I,EAAAoQ,KAAA+xC,KAAA/qD,KAAA4I,GACA5I,KAAA+I,EAAAiQ,KAAA+xC,KAAA/qD,KAAA+I,GAEA/I,MAIAq3D,OAAA,WAEA,WAAAr3D,KAAAqJ,GAAA,OAAArJ,KAAA4I,GAAA,MAAA5I,KAAA+I,GAAA,GAIAuuD,aAAA,WAEA,gBAAAt3D,KAAAq3D,SAAAlxD,SAAA,KAAAua,WAIA62C,OAAA,SAAAC,GAIA,GAOAC,GAAAC,EAPAC,EAAAH,IAA+BpvD,EAAA,EAAA/E,EAAA,EAAA+F,EAAA,GAE/BC,EAAArJ,KAAAqJ,EAAAT,EAAA5I,KAAA4I,EAAAG,EAAA/I,KAAA+I,EAEAqP,EAAAY,KAAAZ,IAAA/O,EAAAT,EAAAG,GACA2mC,EAAA12B,KAAA02B,IAAArmC,EAAAT,EAAAG,GAGA6uD,GAAAloB,EAAAt3B,GAAA,CAEA,IAAAs3B,IAAAt3B,EAEAq/C,EAAA,EACAC,EAAA,MAEG,CAEH,GAAAhK,GAAAt1C,EAAAs3B,CAIA,QAFAgoB,EAAAE,GAAA,GAAAlK,GAAAt1C,EAAAs3B,GAAAge,GAAA,EAAAt1C,EAAAs3B,GAEAt3B,GAEA,IAAA/O,GAAAouD,GAAA7uD,EAAAG,GAAA2kD,GAAA9kD,EAAAG,EAAA,IAAwD,MACxD,KAAAH,GAAA6uD,GAAA1uD,EAAAM,GAAAqkD,EAAA,CAAwC,MACxC,KAAA3kD,GAAA0uD,GAAApuD,EAAAT,GAAA8kD,EAAA,EAIA+J,GAAA,EAQA,MAJAE,GAAAvvD,EAAAqvD,EACAE,EAAAt0D,EAAAq0D,EACAC,EAAAvuD,EAAAwuD,EAEAD,GAIAE,SAAA,WAEA,kBAAA73D,KAAAqJ,EAAA,YAAArJ,KAAA4I,EAAA,YAAA5I,KAAA+I,EAAA,QAIA+uD,UAAA,SAAA1vD,EAAA/E,EAAA+F,GAEA,GAAAuuD,GAAA33D,KAAAu3D,QAMA,OAJAI,GAAAvvD,KAAauvD,EAAAt0D,KAAYs0D,EAAAvuD,KAEzBpJ,KAAAu2D,OAAAoB,EAAAvvD,EAAAuvD,EAAAt0D,EAAAs0D,EAAAvuD,GAEApJ,MAIA+V,IAAA,SAAAxG,GAMA,MAJAvP,MAAAqJ,GAAAkG,EAAAlG,EACArJ,KAAA4I,GAAA2G,EAAA3G,EACA5I,KAAA+I,GAAAwG,EAAAxG,EAEA/I,MAIA+3D,UAAA,SAAAC,EAAAC,GAMA,MAJAj4D,MAAAqJ,EAAA2uD,EAAA3uD,EAAA4uD,EAAA5uD,EACArJ,KAAA4I,EAAAovD,EAAApvD,EAAAqvD,EAAArvD,EACA5I,KAAA+I,EAAAivD,EAAAjvD,EAAAkvD,EAAAlvD,EAEA/I,MAIAk4D,UAAA,SAAA70D,GAMA,MAJArD,MAAAqJ,GAAAhG,EACArD,KAAA4I,GAAAvF,EACArD,KAAA+I,GAAA1F,EAEArD,MAIAm4D,SAAA,SAAA5oD,GAMA,MAJAvP,MAAAqJ,GAAAkG,EAAAlG,EACArJ,KAAA4I,GAAA2G,EAAA3G,EACA5I,KAAA+I,GAAAwG,EAAAxG,EAEA/I,MAIAmpD,eAAA,SAAA9lD,GAMA,MAJArD,MAAAqJ,GAAAhG,EACArD,KAAA4I,GAAAvF,EACArD,KAAA+I,GAAA1F,EAEArD,MAIAo4D,KAAA,SAAA7oD,EAAAoI,GAMA,MAJA3X,MAAAqJ,IAAAkG,EAAAlG,EAAArJ,KAAAqJ,GAAAsO,EACA3X,KAAA4I,IAAA2G,EAAA3G,EAAA5I,KAAA4I,GAAA+O,EACA3X,KAAA+I,IAAAwG,EAAAxG,EAAA/I,KAAA+I,GAAA4O,EAEA3X,MAIAq4D,OAAA,SAAA9gE,GAEA,MAAAA,GAAA8R,IAAArJ,KAAAqJ,GAAA9R,EAAAqR,IAAA5I,KAAA4I,GAAArR,EAAAwR,IAAA/I,KAAA+I,GAIAuvD,UAAA,SAAA38C,GAMA,MAJA3b,MAAAqJ,EAAAsS,EAAA,GACA3b,KAAA4I,EAAA+S,EAAA,GACA3b,KAAA+I,EAAA4S,EAAA,GAEA3b,MAIAwlD,QAAA,SAAA7pC,EAAA4C,GASA,MAPAxlB,UAAA4iB,UACA5iB,SAAAwlB,MAAA,GAEA5C,EAAA4C,GAAAve,KAAAqJ,EACAsS,EAAA4C,EAAA,GAAAve,KAAA4I,EACA+S,EAAA4C,EAAA,GAAAve,KAAA+I,EAEA4S,IAMA9H,EAAAijD,eAAuByB,UAAA,SAAAC,aAAA,SAAAC,KAAA,MAAAC,WAAA,QAAAC,MAAA,SACvBC,MAAA,SAAAC,OAAA,SAAAC,MAAA,EAAAC,eAAA,SAAAC,KAAA,IAAAC,WAAA,QACAC,MAAA,SAAAC,UAAA,SAAAC,UAAA,QAAAC,WAAA,QAAAC,UAAA,SAAAC,MAAA,SACAC,eAAA,QAAAC,SAAA,SAAAC,QAAA,SAAAC,KAAA,MAAAC,SAAA,IAAAC,SAAA,MACAC,cAAA,SAAAC,SAAA,SAAAC,UAAA,MAAAC,SAAA,SAAAC,UAAA,SAAAC,YAAA,QACAC,eAAA,QAAAC,WAAA,SAAAC,WAAA,SAAAC,QAAA,QAAAC,WAAA,SAAAC,aAAA,QACAC,cAAA,QAAAC,cAAA,QAAAC,cAAA,QAAAC,cAAA,MAAAC,WAAA,QACAC,SAAA,SAAAC,YAAA,MAAAC,QAAA,QAAAC,QAAA,QAAAC,WAAA,QAAAC,UAAA,SACAC,YAAA,SAAAC,YAAA,QAAAC,QAAA,SAAAC,UAAA,SAAAC,WAAA,SAAAC,KAAA,SACAC,UAAA,SAAAC,KAAA,QAAAC,MAAA,MAAAC,YAAA,SAAAC,KAAA,QAAAC,SAAA,SAAAC,QAAA,SACAC,UAAA,SAAAC,OAAA,QAAAC,MAAA,SAAAC,MAAA,SAAAC,SAAA,SAAAC,cAAA,SAAAC,UAAA,QACAC,aAAA,SAAAC,UAAA,SAAAC,WAAA,SAAAC,UAAA,SAAAC,qBAAA,SAAAC,UAAA,SACAC,WAAA,QAAAC,UAAA,SAAAC,UAAA,SAAAC,YAAA,SAAAC,cAAA,QAAAC,aAAA,QACAC,eAAA,QAAAC,eAAA,QAAAC,eAAA,SAAAC,YAAA,SAAAC,KAAA,MAAAC,UAAA,QACAC,MAAA,SAAAC,QAAA,SAAAC,OAAA,QAAAC,iBAAA,QAAAC,WAAA,IAAAC,aAAA,SACAC,aAAA,QAAAC,eAAA,QAAAC,gBAAA,QAAAC,kBAAA,MAAAC,gBAAA,QACAC,gBAAA,SAAAC,aAAA,QAAAC,UAAA,SAAAC,UAAA,SAAAC,SAAA,SAAAC,YAAA,SACAC,KAAA,IAAAC,QAAA,SAAAC,MAAA,QAAAC,UAAA,QAAAC,OAAA,SAAAC,UAAA,SAAAC,OAAA,SACAC,cAAA,SAAAC,UAAA,SAAAC,cAAA,SAAAC,cAAA,SAAAC,WAAA,SAAAC,UAAA,SACAC,KAAA,SAAAC,KAAA,SAAAC,KAAA,SAAAC,WAAA,SAAAC,OAAA,QAAAC,IAAA,SAAAC,UAAA,SACAC,UAAA,QAAAC,YAAA,QAAAC,OAAA,SAAAC,WAAA,SAAAC,SAAA,QAAAC,SAAA,SACAC,OAAA,SAAAC,OAAA,SAAAC,QAAA,QAAAC,UAAA,QAAAC,UAAA,QAAAC,UAAA,QAAAC,KAAA,SACAC,YAAA,MAAAC,UAAA,QAAAnX,IAAA,SAAAoX,KAAA,MAAAC,QAAA,SAAAC,OAAA,SAAAC,UAAA,QACAC,OAAA,SAAAC,MAAA,SAAAC,MAAA,SAAAC,WAAA,SAAAC,OAAA,SAAAC,YAAA,UAWA3tD,EAAAy2C,WAAA,SAAArhD,EAAAJ,EAAA0B,EAAAI,GAEA3K,KAAAyhE,GAAAx4D,GAAA,EACAjJ,KAAA0hE,GAAA74D,GAAA,EACA7I,KAAA2hE,GAAAp3D,GAAA,EACAvK,KAAA4hE,GAAA7oE,SAAA4R,IAAA,GAIAkJ,EAAAy2C,WAAAnuD,WAEAE,YAAAwX,EAAAy2C,WAEArhD,QAEA,MAAAjJ,MAAAyhE,IAIAx4D,MAAAjP,GAEAgG,KAAAyhE,GAAAznE,EACAgG,KAAA6hE,oBAIAh5D,QAEA,MAAA7I,MAAA0hE,IAIA74D,MAAA7O,GAEAgG,KAAA0hE,GAAA1nE,EACAgG,KAAA6hE,oBAIAt3D,QAEA,MAAAvK,MAAA2hE,IAIAp3D,MAAAvQ,GAEAgG,KAAA2hE,GAAA3nE,EACAgG,KAAA6hE,oBAIAl3D,QAEA,MAAA3K,MAAA4hE,IAIAj3D,MAAA3Q,GAEAgG,KAAA4hE,GAAA5nE,EACAgG,KAAA6hE,oBAIA31D,IAAA,SAAAjD,EAAAJ,EAAA0B,EAAAI,GASA,MAPA3K,MAAAyhE,GAAAx4D,EACAjJ,KAAA0hE,GAAA74D,EACA7I,KAAA2hE,GAAAp3D,EACAvK,KAAA4hE,GAAAj3D,EAEA3K,KAAA6hE,mBAEA7hE,MAIAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAyhE,GAAAzhE,KAAA0hE,GAAA1hE,KAAA2hE,GAAA3hE,KAAA4hE,KAIAnpD,KAAA,SAAA4yC,GASA,MAPArrD,MAAAyhE,GAAApW,EAAApiD,EACAjJ,KAAA0hE,GAAArW,EAAAxiD,EACA7I,KAAA2hE,GAAAtW,EAAA9gD,EACAvK,KAAA4hE,GAAAvW,EAAA1gD,EAEA3K,KAAA6hE,mBAEA7hE,MAIA8hE,aAAA,SAAAC,EAAAhoD,GAEA,GAAAgoD,YAAAluD,GAAAmuD,SAEA,SAAAxhD,OAAA,kGAQA,IAAAyhD,GAAAjpD,KAAAkyC,IAAA6W,EAAAN,GAAA,GACAS,EAAAlpD,KAAAkyC,IAAA6W,EAAAL,GAAA,GACAS,EAAAnpD,KAAAkyC,IAAA6W,EAAAJ,GAAA,GACAS,EAAAppD,KAAAiyC,IAAA8W,EAAAN,GAAA,GACAY,EAAArpD,KAAAiyC,IAAA8W,EAAAL,GAAA,GACAY,EAAAtpD,KAAAiyC,IAAA8W,EAAAJ,GAAA,GAEAzzD,EAAA6zD,EAAA7zD,KAgDA,OA9CA,QAAAA,GAEAlO,KAAAyhE,GAAAW,EAAAF,EAAAC,EAAAF,EAAAI,EAAAC,EACAtiE,KAAA0hE,GAAAO,EAAAI,EAAAF,EAAAC,EAAAF,EAAAI,EACAtiE,KAAA2hE,GAAAM,EAAAC,EAAAI,EAAAF,EAAAC,EAAAF,EACAniE,KAAA4hE,GAAAK,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAEG,QAAAp0D,GAEHlO,KAAAyhE,GAAAW,EAAAF,EAAAC,EAAAF,EAAAI,EAAAC,EACAtiE,KAAA0hE,GAAAO,EAAAI,EAAAF,EAAAC,EAAAF,EAAAI,EACAtiE,KAAA2hE,GAAAM,EAAAC,EAAAI,EAAAF,EAAAC,EAAAF,EACAniE,KAAA4hE,GAAAK,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAEG,QAAAp0D,GAEHlO,KAAAyhE,GAAAW,EAAAF,EAAAC,EAAAF,EAAAI,EAAAC,EACAtiE,KAAA0hE,GAAAO,EAAAI,EAAAF,EAAAC,EAAAF,EAAAI,EACAtiE,KAAA2hE,GAAAM,EAAAC,EAAAI,EAAAF,EAAAC,EAAAF,EACAniE,KAAA4hE,GAAAK,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAEG,QAAAp0D,GAEHlO,KAAAyhE,GAAAW,EAAAF,EAAAC,EAAAF,EAAAI,EAAAC,EACAtiE,KAAA0hE,GAAAO,EAAAI,EAAAF,EAAAC,EAAAF,EAAAI,EACAtiE,KAAA2hE,GAAAM,EAAAC,EAAAI,EAAAF,EAAAC,EAAAF,EACAniE,KAAA4hE,GAAAK,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAEG,QAAAp0D,GAEHlO,KAAAyhE,GAAAW,EAAAF,EAAAC,EAAAF,EAAAI,EAAAC,EACAtiE,KAAA0hE,GAAAO,EAAAI,EAAAF,EAAAC,EAAAF,EAAAI,EACAtiE,KAAA2hE,GAAAM,EAAAC,EAAAI,EAAAF,EAAAC,EAAAF,EACAniE,KAAA4hE,GAAAK,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAEG,QAAAp0D,IAEHlO,KAAAyhE,GAAAW,EAAAF,EAAAC,EAAAF,EAAAI,EAAAC,EACAtiE,KAAA0hE,GAAAO,EAAAI,EAAAF,EAAAC,EAAAF,EAAAI,EACAtiE,KAAA2hE,GAAAM,EAAAC,EAAAI,EAAAF,EAAAC,EAAAF,EACAniE,KAAA4hE,GAAAK,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAIAvoD,QAAA/Z,KAAA6hE,mBAEA7hE,MAIAuiE,iBAAA,SAAAlwD,EAAAy2C,GAMA,GAAA0Z,GAAA1Z,EAAA,EAAAzlD,EAAA2V,KAAAiyC,IAAAuX,EASA,OAPAxiE,MAAAyhE,GAAApvD,EAAApJ,EAAA5F,EACArD,KAAA0hE,GAAArvD,EAAAxJ,EAAAxF,EACArD,KAAA2hE,GAAAtvD,EAAA9H,EAAAlH,EACArD,KAAA4hE,GAAA5oD,KAAAkyC,IAAAsX,GAEAxiE,KAAA6hE,mBAEA7hE,MAIAyiE,sBAAA,SAAAnrE,GAMA,GAOA+L,GAPAiwB,EAAAh8B,EAAA4xD,SAEAwZ,EAAApvC,EAAA,GAAAqvC,EAAArvC,EAAA,GAAAsvC,EAAAtvC,EAAA,GACAuvC,EAAAvvC,EAAA,GAAAwvC,EAAAxvC,EAAA,GAAAyvC,EAAAzvC,EAAA,GACA0vC,EAAA1vC,EAAA,GAAA2vC,EAAA3vC,EAAA,GAAA4vC,EAAA5vC,EAAA,IAEA6vC,EAAAT,EAAAI,EAAAI,CA2CA,OAxCAC,GAAA,GAEA9/D,EAAA,GAAA2V,KAAA+xC,KAAAoY,EAAA,GAEAnjE,KAAA4hE,GAAA,IAAAv+D,EACArD,KAAAyhE,IAAAwB,EAAAF,GAAA1/D,EACArD,KAAA0hE,IAAAkB,EAAAI,GAAA3/D,EACArD,KAAA2hE,IAAAkB,EAAAF,GAAAt/D,GAEGq/D,EAAAI,GAAAJ,EAAAQ,GAEH7/D,EAAA,EAAA2V,KAAA+xC,KAAA,EAAA2X,EAAAI,EAAAI,GAEAljE,KAAA4hE,IAAAqB,EAAAF,GAAA1/D,EACArD,KAAAyhE,GAAA,IAAAp+D,EACArD,KAAA0hE,IAAAiB,EAAAE,GAAAx/D,EACArD,KAAA2hE,IAAAiB,EAAAI,GAAA3/D,GAEGy/D,EAAAI,GAEH7/D,EAAA,EAAA2V,KAAA+xC,KAAA,EAAA+X,EAAAJ,EAAAQ,GAEAljE,KAAA4hE,IAAAgB,EAAAI,GAAA3/D,EACArD,KAAAyhE,IAAAkB,EAAAE,GAAAx/D,EACArD,KAAA0hE,GAAA,IAAAr+D,EACArD,KAAA2hE,IAAAoB,EAAAE,GAAA5/D,IAIAA,EAAA,EAAA2V,KAAA+xC,KAAA,EAAAmY,EAAAR,EAAAI,GAEA9iE,KAAA4hE,IAAAiB,EAAAF,GAAAt/D,EACArD,KAAAyhE,IAAAmB,EAAAI,GAAA3/D,EACArD,KAAA0hE,IAAAqB,EAAAE,GAAA5/D,EACArD,KAAA2hE,GAAA,IAAAt+D,GAIArD,KAAA6hE,mBAEA7hE,MAIAuqD,mBAAA,WAMA,GAAA6Y,GAAA/5D,EAEAg/C,EAAA,IAEA,iBAAAgb,EAAAC,GAiCA,MA/BAvqE,UAAAqqE,MAAA,GAAAvvD,GAAA8L,SAEAtW,EAAAg6D,EAAAjY,IAAAkY,GAAA,EAEAj6D,EAAAg/C,GAEAh/C,EAAA,EAEA2P,KAAAuqD,IAAAF,EAAAp6D,GAAA+P,KAAAuqD,IAAAF,EAAA94D,GAEA64D,EAAAl3D,KAAAm3D,EAAAx6D,EAAAw6D,EAAAp6D,EAAA,GAIAm6D,EAAAl3D,IAAA,GAAAm3D,EAAA94D,EAAA84D,EAAAx6D,IAMAu6D,EAAAI,aAAAH,EAAAC,GAIAtjE,KAAAyhE,GAAA2B,EAAAn6D,EACAjJ,KAAA0hE,GAAA0B,EAAAv6D,EACA7I,KAAA2hE,GAAAyB,EAAA74D,EACAvK,KAAA4hE,GAAAv4D,EAEArJ,KAAA8V,YAEA9V,SAMA0qD,QAAA,WAIA,MAFA1qD,MAAAyjE,YAAA3tD,YAEA9V,MAIAyjE,UAAA,WAQA,MANAzjE,MAAAyhE,OACAzhE,KAAA0hE,OACA1hE,KAAA2hE,OAEA3hE,KAAA6hE,mBAEA7hE,MAIAorD,IAAA,SAAApiD,GAEA,MAAAhJ,MAAAyhE,GAAAz4D,EAAAy4D,GAAAzhE,KAAA0hE,GAAA14D,EAAA04D,GAAA1hE,KAAA2hE,GAAA34D,EAAA24D,GAAA3hE,KAAA4hE,GAAA54D,EAAA44D,IAIA8B,SAAA,WAEA,MAAA1jE,MAAAyhE,GAAAzhE,KAAAyhE,GAAAzhE,KAAA0hE,GAAA1hE,KAAA0hE,GAAA1hE,KAAA2hE,GAAA3hE,KAAA2hE,GAAA3hE,KAAA4hE,GAAA5hE,KAAA4hE,IAIA9nE,OAAA,WAEA,MAAAkf,MAAA+xC,KAAA/qD,KAAAyhE,GAAAzhE,KAAAyhE,GAAAzhE,KAAA0hE,GAAA1hE,KAAA0hE,GAAA1hE,KAAA2hE,GAAA3hE,KAAA2hE,GAAA3hE,KAAA4hE,GAAA5hE,KAAA4hE,KAIA9rD,UAAA,WAEA,GAAA1M,GAAApJ,KAAAlG,QAsBA,OApBA,KAAAsP,GAEApJ,KAAAyhE,GAAA,EACAzhE,KAAA0hE,GAAA,EACA1hE,KAAA2hE,GAAA,EACA3hE,KAAA4hE,GAAA,IAIAx4D,EAAA,EAAAA,EAEApJ,KAAAyhE,GAAAzhE,KAAAyhE,GAAAr4D,EACApJ,KAAA0hE,GAAA1hE,KAAA0hE,GAAAt4D,EACApJ,KAAA2hE,GAAA3hE,KAAA2hE,GAAAv4D,EACApJ,KAAA4hE,GAAA5hE,KAAA4hE,GAAAx4D,GAIApJ,KAAA6hE,mBAEA7hE,MAIAm4D,SAAA,SAAAxvD,EAAAnR,GAEA,MAAAuB,UAAAvB,GAEAgM,QAAAwmD,KAAA,0GACAhqD,KAAA2jE,oBAAAh7D,EAAAnR,IAIAwI,KAAA2jE,oBAAA3jE,KAAA2I,IAIAg7D,oBAAA,SAAAj7D,EAAAK,GAIA,GAAA66D,GAAAl7D,EAAA+4D,GAAAoC,EAAAn7D,EAAAg5D,GAAAoC,EAAAp7D,EAAAi5D,GAAAoC,EAAAr7D,EAAAk5D,GACAoC,EAAAj7D,EAAA04D,GAAAwC,EAAAl7D,EAAA24D,GAAAwC,EAAAn7D,EAAA44D,GAAAwC,EAAAp7D,EAAA64D,EASA,OAPA5hE,MAAAyhE,GAAAmC,EAAAO,EAAAJ,EAAAC,EAAAH,EAAAK,EAAAJ,EAAAG,EACAjkE,KAAA0hE,GAAAmC,EAAAM,EAAAJ,EAAAE,EAAAH,EAAAE,EAAAJ,EAAAM,EACAlkE,KAAA2hE,GAAAmC,EAAAK,EAAAJ,EAAAG,EAAAN,EAAAK,EAAAJ,EAAAG,EACAhkE,KAAA4hE,GAAAmC,EAAAI,EAAAP,EAAAI,EAAAH,EAAAI,EAAAH,EAAAI,EAEAlkE,KAAA6hE,mBAEA7hE,MAIAokE,gBAAA,SAAAzO,GAGA,MADAnyD,SAAAwmD,KAAA,mHACA2L,EAAA9K,gBAAA7qD,OAIAqkE,MAAA,SAAA97C,EAAAhf,GAEA,OAAAA,EAAA,MAAAvJ,KACA,QAAAuJ,EAAA,MAAAvJ,MAAAyY,KAAA8P,EAEA,IAAAtf,GAAAjJ,KAAAyhE,GAAA54D,EAAA7I,KAAA0hE,GAAAn3D,EAAAvK,KAAA2hE,GAAAh3D,EAAA3K,KAAA4hE,GAIA0C,EAAA35D,EAAA4d,EAAAq5C,GAAA34D,EAAAsf,EAAAk5C,GAAA54D,EAAA0f,EAAAm5C,GAAAn3D,EAAAge,EAAAo5C,EAiBA,IAfA2C,EAAA,GAEAtkE,KAAA4hE,IAAAr5C,EAAAq5C,GACA5hE,KAAAyhE,IAAAl5C,EAAAk5C,GACAzhE,KAAA0hE,IAAAn5C,EAAAm5C,GACA1hE,KAAA2hE,IAAAp5C,EAAAo5C,GAEA2C,MAIAtkE,KAAAyY,KAAA8P,GAIA+7C,GAAA,EAOA,MALAtkE,MAAA4hE,GAAAj3D,EACA3K,KAAAyhE,GAAAx4D,EACAjJ,KAAA0hE,GAAA74D,EACA7I,KAAA2hE,GAAAp3D,EAEAvK,IAIA,IAAAukE,GAAAvrD,KAAAwrD,KAAAF,GACAG,EAAAzrD,KAAA+xC,KAAA,EAAAuZ,IAEA,IAAAtrD,KAAAuqD,IAAAkB,GAAA,KAOA,MALAzkE,MAAA4hE,GAAA,IAAAj3D,EAAA3K,KAAA4hE,IACA5hE,KAAAyhE,GAAA,IAAAx4D,EAAAjJ,KAAAyhE,IACAzhE,KAAA0hE,GAAA,IAAA74D,EAAA7I,KAAA0hE;AACA1hE,KAAA2hE,GAAA,IAAAp3D,EAAAvK,KAAA2hE,IAEA3hE,IAIA,IAAA0kE,GAAA1rD,KAAAiyC,KAAA,EAAA1hD,GAAAg7D,GAAAE,EACAE,EAAA3rD,KAAAiyC,IAAA1hD,EAAAg7D,GAAAE,CASA,OAPAzkE,MAAA4hE,GAAAj3D,EAAA+5D,EAAA1kE,KAAA4hE,GAAA+C,EACA3kE,KAAAyhE,GAAAx4D,EAAAy7D,EAAA1kE,KAAAyhE,GAAAkD,EACA3kE,KAAA0hE,GAAA74D,EAAA67D,EAAA1kE,KAAA0hE,GAAAiD,EACA3kE,KAAA2hE,GAAAp3D,EAAAm6D,EAAA1kE,KAAA2hE,GAAAgD,EAEA3kE,KAAA6hE,mBAEA7hE,MAIAq4D,OAAA,SAAAhN,GAEA,MAAAA,GAAAoW,KAAAzhE,KAAAyhE,IAAApW,EAAAqW,KAAA1hE,KAAA0hE,IAAArW,EAAAsW,KAAA3hE,KAAA2hE,IAAAtW,EAAAuW,KAAA5hE,KAAA4hE,IAIAtJ,UAAA,SAAA38C,EAAA4C,GAWA,MATAxlB,UAAAwlB,MAAA,GAEAve,KAAAyhE,GAAA9lD,EAAA4C,GACAve,KAAA0hE,GAAA/lD,EAAA4C,EAAA,GACAve,KAAA2hE,GAAAhmD,EAAA4C,EAAA,GACAve,KAAA4hE,GAAAjmD,EAAA4C,EAAA,GAEAve,KAAA6hE,mBAEA7hE,MAIAwlD,QAAA,SAAA7pC,EAAA4C,GAUA,MARAxlB,UAAA4iB,UACA5iB,SAAAwlB,MAAA,GAEA5C,EAAA4C,GAAAve,KAAAyhE,GACA9lD,EAAA4C,EAAA,GAAAve,KAAA0hE,GACA/lD,EAAA4C,EAAA,GAAAve,KAAA2hE,GACAhmD,EAAA4C,EAAA,GAAAve,KAAA4hE,GAEAjmD,GAIAlJ,SAAA,SAAAirB,GAIA,MAFA19B,MAAA6hE,iBAAAnkC,EAEA19B,MAIA6hE,iBAAA,cAIAhuD,EAAAy2C,WAAA+Z,MAAA,SAAA9gD,EAAAgF,EAAAq8C,EAAAr7D,GAEA,MAAAq7D,GAAAnsD,KAAA8K,GAAA8gD,MAAA97C,EAAAhf,IAaAsK,EAAA+6C,QAAA,SAAA3lD,EAAAJ,GAEA7I,KAAAiJ,KAAA,EACAjJ,KAAA6I,KAAA,GAIAgL,EAAA+6C,QAAAzyD,WAEAE,YAAAwX,EAAA+6C,QAEA1iD,IAAA,SAAAjD,EAAAJ,GAKA,MAHA7I,MAAAiJ,IACAjJ,KAAA6I,IAEA7I,MAIA6kE,KAAA,SAAA57D,GAIA,MAFAjJ,MAAAiJ,IAEAjJ,MAIA8kE,KAAA,SAAAj8D,GAIA,MAFA7I,MAAA6I,IAEA7I,MAIA+kE,aAAA,SAAAnzD,EAAA5X,GAEA,OAAA4X,GAEA,OAAA5R,KAAAiJ,EAAAjP,CAA0B,MAC1B,QAAAgG,KAAA6I,EAAA7O,CAA0B,MAC1B,kBAAAwmB,OAAA,0BAAA5O,KAMAozD,aAAA,SAAApzD,GAEA,OAAAA,GAEA,aAAA5R,MAAAiJ,CACA,cAAAjJ,MAAA6I,CACA,kBAAA2X,OAAA,0BAAA5O,KAMA43C,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAiJ,EAAAjJ,KAAA6I,IAIA4P,KAAA,SAAAzP,GAKA,MAHAhJ,MAAAiJ,EAAAD,EAAAC,EACAjJ,KAAA6I,EAAAG,EAAAH,EAEA7I,MAIA+V,IAAA,SAAA/M,EAAA2B,GAEA,MAAA5R,UAAA4R,GAEAnH,QAAAwmD,KAAA,yFACAhqD,KAAAilE,WAAAj8D,EAAA2B,KAIA3K,KAAAiJ,GAAAD,EAAAC,EACAjJ,KAAA6I,GAAAG,EAAAH,EAEA7I,OAIAk4D,UAAA,SAAA70D,GAKA,MAHArD,MAAAiJ,GAAA5F,EACArD,KAAA6I,GAAAxF,EAEArD,MAIAilE,WAAA,SAAAv8D,EAAAK,GAKA,MAHA/I,MAAAiJ,EAAAP,EAAAO,EAAAF,EAAAE,EACAjJ,KAAA6I,EAAAH,EAAAG,EAAAE,EAAAF,EAEA7I,MAIAklE,gBAAA,SAAAl8D,EAAA3F,GAKA,MAHArD,MAAAiJ,GAAAD,EAAAC,EAAA5F,EACArD,KAAA6I,GAAAG,EAAAH,EAAAxF,EAEArD,MAIAypD,IAAA,SAAAzgD,EAAA2B,GAEA,MAAA5R,UAAA4R,GAEAnH,QAAAwmD,KAAA,yFACAhqD,KAAAktD,WAAAlkD,EAAA2B,KAIA3K,KAAAiJ,GAAAD,EAAAC,EACAjJ,KAAA6I,GAAAG,EAAAH,EAEA7I,OAIAmlE,UAAA,SAAA9hE,GAKA,MAHArD,MAAAiJ,GAAA5F,EACArD,KAAA6I,GAAAxF,EAEArD,MAIAktD,WAAA,SAAAxkD,EAAAK,GAKA,MAHA/I,MAAAiJ,EAAAP,EAAAO,EAAAF,EAAAE,EACAjJ,KAAA6I,EAAAH,EAAAG,EAAAE,EAAAF,EAEA7I,MAIAm4D,SAAA,SAAAnvD,GAKA,MAHAhJ,MAAAiJ,GAAAD,EAAAC,EACAjJ,KAAA6I,GAAAG,EAAAH,EAEA7I,MAIAmpD,eAAA,SAAA9lD,GAKA,MAHArD,MAAAiJ,GAAA5F,EACArD,KAAA6I,GAAAxF,EAEArD,MAIAolE,OAAA,SAAAp8D,GAKA,MAHAhJ,MAAAiJ,GAAAD,EAAAC,EACAjJ,KAAA6I,GAAAG,EAAAH,EAEA7I,MAIAqlE,aAAA,SAAAC,GAEA,OAAAA,EAAA,CAEA,GAAAC,GAAA,EAAAD,CAEAtlE,MAAAiJ,GAAAs8D,EACAvlE,KAAA6I,GAAA08D,MAIAvlE,MAAAiJ,EAAA,EACAjJ,KAAA6I,EAAA,CAIA,OAAA7I,OAIA0vC,IAAA,SAAA1mC,GAcA,MAZAhJ,MAAAiJ,EAAAD,EAAAC,IAEAjJ,KAAAiJ,EAAAD,EAAAC,GAIAjJ,KAAA6I,EAAAG,EAAAH,IAEA7I,KAAA6I,EAAAG,EAAAH,GAIA7I,MAIAoY,IAAA,SAAApP,GAcA,MAZAhJ,MAAAiJ,EAAAD,EAAAC,IAEAjJ,KAAAiJ,EAAAD,EAAAC,GAIAjJ,KAAA6I,EAAAG,EAAAH,IAEA7I,KAAA6I,EAAAG,EAAAH,GAIA7I,MAIA02D,MAAA,SAAAhnB,EAAAt3B,GAwBA,MApBApY,MAAAiJ,EAAAymC,EAAAzmC,EAEAjJ,KAAAiJ,EAAAymC,EAAAzmC,EAEGjJ,KAAAiJ,EAAAmP,EAAAnP,IAEHjJ,KAAAiJ,EAAAmP,EAAAnP,GAIAjJ,KAAA6I,EAAA6mC,EAAA7mC,EAEA7I,KAAA6I,EAAA6mC,EAAA7mC,EAEG7I,KAAA6I,EAAAuP,EAAAvP,IAEH7I,KAAA6I,EAAAuP,EAAAvP,GAIA7I,MAIAwlE,YAAA,WAEA,GAAA91B,GAAAt3B,CAEA,iBAAAqtD,EAAAC,GAYA,MAVA3sE,UAAA22C,IAEAA,EAAA,GAAA77B,GAAA+6C,QACAx2C,EAAA,GAAAvE,GAAA+6C,SAIAlf,EAAAxjC,IAAAu5D,KACArtD,EAAAlM,IAAAw5D,KAEA1lE,KAAA02D,MAAAhnB,EAAAt3B,OAMAuuC,MAAA,WAKA,MAHA3mD,MAAAiJ,EAAA+P,KAAA2tC,MAAA3mD,KAAAiJ,GACAjJ,KAAA6I,EAAAmQ,KAAA2tC,MAAA3mD,KAAA6I,GAEA7I,MAIAm/C,KAAA,WAKA,MAHAn/C,MAAAiJ,EAAA+P,KAAAmmC,KAAAn/C,KAAAiJ,GACAjJ,KAAA6I,EAAAmQ,KAAAmmC,KAAAn/C,KAAA6I,GAEA7I,MAIA2lE,MAAA,WAKA,MAHA3lE,MAAAiJ,EAAA+P,KAAA2sD,MAAA3lE,KAAAiJ,GACAjJ,KAAA6I,EAAAmQ,KAAA2sD,MAAA3lE,KAAA6I,GAEA7I,MAIA4lE,YAAA,WAKA,MAHA5lE,MAAAiJ,EAAAjJ,KAAAiJ,EAAA,EAAA+P,KAAAmmC,KAAAn/C,KAAAiJ,GAAA+P,KAAA2tC,MAAA3mD,KAAAiJ,GACAjJ,KAAA6I,EAAA7I,KAAA6I,EAAA,EAAAmQ,KAAAmmC,KAAAn/C,KAAA6I,GAAAmQ,KAAA2tC,MAAA3mD,KAAA6I,GAEA7I,MAIA6lE,OAAA,WAKA,MAHA7lE,MAAAiJ,GAAAjJ,KAAAiJ,EACAjJ,KAAA6I,GAAA7I,KAAA6I,EAEA7I,MAIAorD,IAAA,SAAApiD,GAEA,MAAAhJ,MAAAiJ,EAAAD,EAAAC,EAAAjJ,KAAA6I,EAAAG,EAAAH,GAIA66D,SAAA,WAEA,MAAA1jE,MAAAiJ,EAAAjJ,KAAAiJ,EAAAjJ,KAAA6I,EAAA7I,KAAA6I,GAIA/O,OAAA,WAEA,MAAAkf,MAAA+xC,KAAA/qD,KAAAiJ,EAAAjJ,KAAAiJ,EAAAjJ,KAAA6I,EAAA7I,KAAA6I,IAIAi9D,gBAAA,WAEA,MAAA9sD,MAAAuqD,IAAAvjE,KAAAiJ,GAAA+P,KAAAuqD,IAAAvjE,KAAA6I,IAIAiN,UAAA,WAEA,MAAA9V,MAAAqlE,aAAArlE,KAAAlG,WAIAisE,WAAA,SAAA/8D,GAEA,MAAAgQ,MAAA+xC,KAAA/qD,KAAAmrD,kBAAAniD,KAIAmiD,kBAAA,SAAAniD,GAEA,GAAA85C,GAAA9iD,KAAAiJ,EAAAD,EAAAC,EAAA85C,EAAA/iD,KAAA6I,EAAAG,EAAAH,CACA,OAAAi6C,KAAAC,KAIAijB,UAAA,SAAA58D,GAEA,GAAA68D,GAAAjmE,KAAAlG,QAQA,OANA,KAAAmsE,GAAA78D,IAAA68D,GAEAjmE,KAAAmpD,eAAA//C,EAAA68D,GAIAjmE,MAIAo4D,KAAA,SAAApvD,EAAA2O,GAKA,MAHA3X,MAAAiJ,IAAAD,EAAAC,EAAAjJ,KAAAiJ,GAAA0O,EACA3X,KAAA6I,IAAAG,EAAAH,EAAA7I,KAAA6I,GAAA8O,EAEA3X,MAIAkmE,YAAA,SAAA9C,EAAA+C,EAAAxuD,GAIA,MAFA3X,MAAAktD,WAAAiZ,EAAA/C,GAAAja,eAAAxxC,GAAA5B,IAAAqtD,GAEApjE,MAIAq4D,OAAA,SAAArvD,GAEA,MAAAA,GAAAC,IAAAjJ,KAAAiJ,GAAAD,EAAAH,IAAA7I,KAAA6I,GAIAyvD,UAAA,SAAA38C,EAAA4C,GAOA,MALAxlB,UAAAwlB,MAAA,GAEAve,KAAAiJ,EAAA0S,EAAA4C,GACAve,KAAA6I,EAAA8S,EAAA4C,EAAA,GAEAve,MAIAwlD,QAAA,SAAA7pC,EAAA4C,GAQA,MANAxlB,UAAA4iB,UACA5iB,SAAAwlB,MAAA,GAEA5C,EAAA4C,GAAAve,KAAAiJ,EACA0S,EAAA4C,EAAA,GAAAve,KAAA6I,EAEA8S,GAIAyqD,cAAA,SAAAC,EAAAz0D,EAAA2M,GASA,MAPAxlB,UAAAwlB,MAAA,GAEA3M,IAAAy0D,EAAAC,SAAA/nD,EAEAve,KAAAiJ,EAAAo9D,EAAA1qD,MAAA/J,GACA5R,KAAA6I,EAAAw9D,EAAA1qD,MAAA/J,EAAA,GAEA5R,OAiBA6T,EAAA8L,QAAA,SAAA1W,EAAAJ,EAAA0B,GAEAvK,KAAAiJ,KAAA,EACAjJ,KAAA6I,KAAA,EACA7I,KAAAuK,KAAA,GAIAsJ,EAAA8L,QAAAxjB,WAEAE,YAAAwX,EAAA8L,QAEAzT,IAAA,SAAAjD,EAAAJ,EAAA0B,GAMA,MAJAvK,MAAAiJ,IACAjJ,KAAA6I,IACA7I,KAAAuK,IAEAvK,MAIA6kE,KAAA,SAAA57D,GAIA,MAFAjJ,MAAAiJ,IAEAjJ,MAIA8kE,KAAA,SAAAj8D,GAIA,MAFA7I,MAAA6I,IAEA7I,MAIAumE,KAAA,SAAAh8D,GAIA,MAFAvK,MAAAuK,IAEAvK,MAIA+kE,aAAA,SAAAnzD,EAAA5X,GAEA,OAAA4X,GAEA,OAAA5R,KAAAiJ,EAAAjP,CAA0B,MAC1B,QAAAgG,KAAA6I,EAAA7O,CAA0B,MAC1B,QAAAgG,KAAAuK,EAAAvQ,CAA0B,MAC1B,kBAAAwmB,OAAA,0BAAA5O,KAMAozD,aAAA,SAAApzD,GAEA,OAAAA,GAEA,aAAA5R,MAAAiJ,CACA,cAAAjJ,MAAA6I,CACA,cAAA7I,MAAAuK,CACA,kBAAAiW,OAAA,0BAAA5O,KAMA43C,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAiJ,EAAAjJ,KAAA6I,EAAA7I,KAAAuK,IAIAkO,KAAA,SAAAzP,GAMA,MAJAhJ,MAAAiJ,EAAAD,EAAAC,EACAjJ,KAAA6I,EAAAG,EAAAH,EACA7I,KAAAuK,EAAAvB,EAAAuB,EAEAvK,MAIA+V,IAAA,SAAA/M,EAAA2B,GAEA,MAAA5R,UAAA4R,GAEAnH,QAAAwmD,KAAA,yFACAhqD,KAAAilE,WAAAj8D,EAAA2B,KAIA3K,KAAAiJ,GAAAD,EAAAC,EACAjJ,KAAA6I,GAAAG,EAAAH,EACA7I,KAAAuK,GAAAvB,EAAAuB,EAEAvK,OAIAk4D,UAAA,SAAA70D,GAMA,MAJArD,MAAAiJ,GAAA5F,EACArD,KAAA6I,GAAAxF,EACArD,KAAAuK,GAAAlH,EAEArD,MAIAilE,WAAA,SAAAv8D,EAAAK,GAMA,MAJA/I,MAAAiJ,EAAAP,EAAAO,EAAAF,EAAAE,EACAjJ,KAAA6I,EAAAH,EAAAG,EAAAE,EAAAF,EACA7I,KAAAuK,EAAA7B,EAAA6B,EAAAxB,EAAAwB,EAEAvK,MAIAklE,gBAAA,SAAAl8D,EAAA3F,GAMA,MAJArD,MAAAiJ,GAAAD,EAAAC,EAAA5F,EACArD,KAAA6I,GAAAG,EAAAH,EAAAxF,EACArD,KAAAuK,GAAAvB,EAAAuB,EAAAlH,EAEArD,MAIAypD,IAAA,SAAAzgD,EAAA2B,GAEA,MAAA5R,UAAA4R,GAEAnH,QAAAwmD,KAAA,yFACAhqD,KAAAktD,WAAAlkD,EAAA2B,KAIA3K,KAAAiJ,GAAAD,EAAAC,EACAjJ,KAAA6I,GAAAG,EAAAH,EACA7I,KAAAuK,GAAAvB,EAAAuB,EAEAvK,OAIAmlE,UAAA,SAAA9hE,GAMA,MAJArD,MAAAiJ,GAAA5F,EACArD,KAAA6I,GAAAxF,EACArD,KAAAuK,GAAAlH,EAEArD,MAIAktD,WAAA,SAAAxkD,EAAAK,GAMA,MAJA/I,MAAAiJ,EAAAP,EAAAO,EAAAF,EAAAE,EACAjJ,KAAA6I,EAAAH,EAAAG,EAAAE,EAAAF,EACA7I,KAAAuK,EAAA7B,EAAA6B,EAAAxB,EAAAwB,EAEAvK,MAIAm4D,SAAA,SAAAnvD,EAAA2B,GAEA,MAAA5R,UAAA4R,GAEAnH,QAAAwmD,KAAA,mGACAhqD,KAAAwmE,gBAAAx9D,EAAA2B,KAIA3K,KAAAiJ,GAAAD,EAAAC,EACAjJ,KAAA6I,GAAAG,EAAAH,EACA7I,KAAAuK,GAAAvB,EAAAuB,EAEAvK,OAIAmpD,eAAA,SAAAmc,GAMA,MAJAtlE,MAAAiJ,GAAAq8D,EACAtlE,KAAA6I,GAAAy8D,EACAtlE,KAAAuK,GAAA+6D,EAEAtlE,MAIAwmE,gBAAA,SAAA99D,EAAAK,GAMA,MAJA/I,MAAAiJ,EAAAP,EAAAO,EAAAF,EAAAE,EACAjJ,KAAA6I,EAAAH,EAAAG,EAAAE,EAAAF,EACA7I,KAAAuK,EAAA7B,EAAA6B,EAAAxB,EAAAwB,EAEAvK,MAIAymE,WAAA,WAEA,GAAApb,EAEA,iBAAA0W,GAYA,MAVAA,aAAAluD,GAAAmuD,UAEAx+D,QAAAC,MAAA,8FAIA1K,SAAAsyD,MAAA,GAAAx3C,GAAAy2C,YAEAtqD,KAAA6qD,gBAAAQ,EAAAyW,aAAAC,IAEA/hE,SAMA0mE,eAAA,WAEA,GAAArb,EAEA,iBAAAh5C,EAAAy2C,GAMA,MAJA/vD,UAAAsyD,MAAA,GAAAx3C,GAAAy2C,YAEAtqD,KAAA6qD,gBAAAQ,EAAAkX,iBAAAlwD,EAAAy2C,IAEA9oD,SAMA2mE,aAAA,SAAArvE,GAEA,GAAA2R,GAAAjJ,KAAAiJ,EACAJ,EAAA7I,KAAA6I,EACA0B,EAAAvK,KAAAuK,EAEAzJ,EAAAxJ,EAAA4xD,QAMA,OAJAlpD,MAAAiJ,EAAAnI,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EACAvK,KAAA6I,EAAA/H,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EACAvK,KAAAuK,EAAAzJ,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EAEAvK,MAIA4mE,aAAA,SAAAtvE,GAIA,GAAA2R,GAAAjJ,KAAAiJ,EAAAJ,EAAA7I,KAAA6I,EAAA0B,EAAAvK,KAAAuK,EAEAzJ,EAAAxJ,EAAA4xD,QAMA,OAJAlpD,MAAAiJ,EAAAnI,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EAAAzJ,EAAA,IACAd,KAAA6I,EAAA/H,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EAAAzJ,EAAA,IACAd,KAAAuK,EAAAzJ,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,IAAAyJ,EAAAzJ,EAAA,IAEAd,MAIA6mE,gBAAA,SAAAvvE,GAIA,GAAA2R,GAAAjJ,KAAAiJ,EAAAJ,EAAA7I,KAAA6I,EAAA0B,EAAAvK,KAAAuK,EAEAzJ,EAAAxJ,EAAA4xD,SACAzgD,EAAA,GAAA3H,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,IAAAyJ,EAAAzJ,EAAA,IAMA,OAJAd,MAAAiJ,GAAAnI,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EAAAzJ,EAAA,KAAA2H,EACAzI,KAAA6I,GAAA/H,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EAAAzJ,EAAA,KAAA2H,EACAzI,KAAAuK,GAAAzJ,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,IAAAyJ,EAAAzJ,EAAA,KAAA2H,EAEAzI,MAIA6qD,gBAAA,SAAAliD,GAEA,GAAAM,GAAAjJ,KAAAiJ,EACAJ,EAAA7I,KAAA6I,EACA0B,EAAAvK,KAAAuK,EAEAu8D,EAAAn+D,EAAAM,EACA89D,EAAAp+D,EAAAE,EACAm+D,EAAAr+D,EAAA4B,EACA08D,EAAAt+D,EAAAgC,EAIAu8D,EAAAD,EAAAh+D,EAAA89D,EAAAx8D,EAAAy8D,EAAAn+D,EACAs+D,EAAAF,EAAAp+D,EAAAm+D,EAAA/9D,EAAA69D,EAAAv8D,EACA68D,EAAAH,EAAA18D,EAAAu8D,EAAAj+D,EAAAk+D,EAAA99D,EACAo+D,GAAAP,EAAA79D,EAAA89D,EAAAl+D,EAAAm+D,EAAAz8D,CAQA,OAJAvK,MAAAiJ,EAAAi+D,EAAAD,EAAAI,GAAAP,EAAAK,GAAAH,EAAAI,GAAAL,EACA/mE,KAAA6I,EAAAs+D,EAAAF,EAAAI,GAAAN,EAAAK,GAAAN,EAAAI,GAAAF,EACAhnE,KAAAuK,EAAA68D,EAAAH,EAAAI,GAAAL,EAAAE,GAAAH,EAAAI,GAAAL,EAEA9mE,MAIA41D,QAAA,WAEA,GAAA3M,EAEA,iBAAAvwC,GAKA,MAHA3f,UAAAkwD,MAAA,GAAAp1C,GAAAyzD,SAEAre,EAAAse,iBAAA7uD,EAAA8uD,iBAAAve,EAAAwe,WAAA/uD,EAAAgvD,cACA1nE,KAAA6mE,gBAAA5d,OAMA6M,UAAA,WAEA,GAAA7M,EAEA,iBAAAvwC,GAKA,MAHA3f,UAAAkwD,MAAA,GAAAp1C,GAAAyzD,SAEAre,EAAAse,iBAAA7uD,EAAAgvD,YAAAze,EAAAwe,WAAA/uD,EAAA8uD,mBACAxnE,KAAA6mE,gBAAA5d,OAMA0e,mBAAA,SAAArwE,GAKA,GAAA2R,GAAAjJ,KAAAiJ,EAAAJ,EAAA7I,KAAA6I,EAAA0B,EAAAvK,KAAAuK,EAEAzJ,EAAAxJ,EAAA4xD,QAQA,OANAlpD,MAAAiJ,EAAAnI,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EACAvK,KAAA6I,EAAA/H,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EACAvK,KAAAuK,EAAAzJ,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,IAAAyJ,EAEAvK,KAAA8V,YAEA9V,MAIAolE,OAAA,SAAAp8D,GAMA,MAJAhJ,MAAAiJ,GAAAD,EAAAC,EACAjJ,KAAA6I,GAAAG,EAAAH,EACA7I,KAAAuK,GAAAvB,EAAAuB,EAEAvK,MAIAqlE,aAAA,SAAAC,GAEA,OAAAA,EAAA,CAEA,GAAAC,GAAA,EAAAD,CAEAtlE,MAAAiJ,GAAAs8D,EACAvlE,KAAA6I,GAAA08D,EACAvlE,KAAAuK,GAAAg7D,MAIAvlE,MAAAiJ,EAAA,EACAjJ,KAAA6I,EAAA,EACA7I,KAAAuK,EAAA,CAIA,OAAAvK,OAIA0vC,IAAA,SAAA1mC,GAoBA,MAlBAhJ,MAAAiJ,EAAAD,EAAAC,IAEAjJ,KAAAiJ,EAAAD,EAAAC,GAIAjJ,KAAA6I,EAAAG,EAAAH,IAEA7I,KAAA6I,EAAAG,EAAAH,GAIA7I,KAAAuK,EAAAvB,EAAAuB,IAEAvK,KAAAuK,EAAAvB,EAAAuB,GAIAvK,MAIAoY,IAAA,SAAApP,GAoBA,MAlBAhJ,MAAAiJ,EAAAD,EAAAC,IAEAjJ,KAAAiJ,EAAAD,EAAAC,GAIAjJ,KAAA6I,EAAAG,EAAAH,IAEA7I,KAAA6I,EAAAG,EAAAH,GAIA7I,KAAAuK,EAAAvB,EAAAuB,IAEAvK,KAAAuK,EAAAvB,EAAAuB,GAIAvK,MAIA02D,MAAA,SAAAhnB,EAAAt3B,GAkCA,MA9BApY,MAAAiJ,EAAAymC,EAAAzmC,EAEAjJ,KAAAiJ,EAAAymC,EAAAzmC,EAEGjJ,KAAAiJ,EAAAmP,EAAAnP,IAEHjJ,KAAAiJ,EAAAmP,EAAAnP,GAIAjJ,KAAA6I,EAAA6mC,EAAA7mC,EAEA7I,KAAA6I,EAAA6mC,EAAA7mC,EAEG7I,KAAA6I,EAAAuP,EAAAvP,IAEH7I,KAAA6I,EAAAuP,EAAAvP,GAIA7I,KAAAuK,EAAAmlC,EAAAnlC,EAEAvK,KAAAuK,EAAAmlC,EAAAnlC,EAEGvK,KAAAuK,EAAA6N,EAAA7N,IAEHvK,KAAAuK,EAAA6N,EAAA7N,GAIAvK,MAIAwlE,YAAA,WAEA,GAAA91B,GAAAt3B,CAEA,iBAAAqtD,EAAAC,GAYA,MAVA3sE,UAAA22C,IAEAA,EAAA,GAAA77B,GAAA8L,QACAvH,EAAA,GAAAvE,GAAA8L,SAIA+vB,EAAAxjC,IAAAu5D,OACArtD,EAAAlM,IAAAw5D,OAEA1lE,KAAA02D,MAAAhnB,EAAAt3B,OAMAuuC,MAAA,WAMA,MAJA3mD,MAAAiJ,EAAA+P,KAAA2tC,MAAA3mD,KAAAiJ,GACAjJ,KAAA6I,EAAAmQ,KAAA2tC,MAAA3mD,KAAA6I,GACA7I,KAAAuK,EAAAyO,KAAA2tC,MAAA3mD,KAAAuK,GAEAvK,MAIAm/C,KAAA,WAMA,MAJAn/C,MAAAiJ,EAAA+P,KAAAmmC,KAAAn/C,KAAAiJ,GACAjJ,KAAA6I,EAAAmQ,KAAAmmC,KAAAn/C,KAAA6I,GACA7I,KAAAuK,EAAAyO,KAAAmmC,KAAAn/C,KAAAuK,GAEAvK,MAIA2lE,MAAA,WAMA,MAJA3lE,MAAAiJ,EAAA+P,KAAA2sD,MAAA3lE,KAAAiJ,GACAjJ,KAAA6I,EAAAmQ,KAAA2sD,MAAA3lE,KAAA6I,GACA7I,KAAAuK,EAAAyO,KAAA2sD,MAAA3lE,KAAAuK,GAEAvK,MAIA4lE,YAAA,WAMA,MAJA5lE,MAAAiJ,EAAAjJ,KAAAiJ,EAAA,EAAA+P,KAAAmmC,KAAAn/C,KAAAiJ,GAAA+P,KAAA2tC,MAAA3mD,KAAAiJ,GACAjJ,KAAA6I,EAAA7I,KAAA6I,EAAA,EAAAmQ,KAAAmmC,KAAAn/C,KAAA6I,GAAAmQ,KAAA2tC,MAAA3mD,KAAA6I,GACA7I,KAAAuK,EAAAvK,KAAAuK,EAAA,EAAAyO,KAAAmmC,KAAAn/C,KAAAuK,GAAAyO,KAAA2tC,MAAA3mD,KAAAuK,GAEAvK,MAIA6lE,OAAA,WAMA,MAJA7lE,MAAAiJ,GAAAjJ,KAAAiJ,EACAjJ,KAAA6I,GAAA7I,KAAA6I,EACA7I,KAAAuK,GAAAvK,KAAAuK,EAEAvK,MAIAorD,IAAA,SAAApiD,GAEA,MAAAhJ,MAAAiJ,EAAAD,EAAAC,EAAAjJ,KAAA6I,EAAAG,EAAAH,EAAA7I,KAAAuK,EAAAvB,EAAAuB,GAIAm5D,SAAA,WAEA,MAAA1jE,MAAAiJ,EAAAjJ,KAAAiJ,EAAAjJ,KAAA6I,EAAA7I,KAAA6I,EAAA7I,KAAAuK,EAAAvK,KAAAuK,GAIAzQ,OAAA,WAEA,MAAAkf,MAAA+xC,KAAA/qD,KAAAiJ,EAAAjJ,KAAAiJ,EAAAjJ,KAAA6I,EAAA7I,KAAA6I,EAAA7I,KAAAuK,EAAAvK,KAAAuK,IAIAu7D,gBAAA,WAEA,MAAA9sD,MAAAuqD,IAAAvjE,KAAAiJ,GAAA+P,KAAAuqD,IAAAvjE,KAAA6I,GAAAmQ,KAAAuqD,IAAAvjE,KAAAuK,IAIAuL,UAAA,WAEA,MAAA9V,MAAAqlE,aAAArlE,KAAAlG,WAIAksE,UAAA,SAAA58D,GAEA,GAAA68D,GAAAjmE,KAAAlG,QAQA,OANA,KAAAmsE,GAAA78D,IAAA68D,GAEAjmE,KAAAmpD,eAAA//C,EAAA68D,GAIAjmE,MAIAo4D,KAAA,SAAApvD,EAAA2O,GAMA,MAJA3X,MAAAiJ,IAAAD,EAAAC,EAAAjJ,KAAAiJ,GAAA0O,EACA3X,KAAA6I,IAAAG,EAAAH,EAAA7I,KAAA6I,GAAA8O,EACA3X,KAAAuK,IAAAvB,EAAAuB,EAAAvK,KAAAuK,GAAAoN,EAEA3X,MAIAkmE,YAAA,SAAA9C,EAAA+C,EAAAxuD,GAIA,MAFA3X,MAAAktD,WAAAiZ,EAAA/C,GAAAja,eAAAxxC,GAAA5B,IAAAqtD,GAEApjE,MAIA4nE,MAAA,SAAA5+D,EAAA2B,GAEA,GAAA5R,SAAA4R,EAGA,MADAnH,SAAAwmD,KAAA,6FACAhqD,KAAAwjE,aAAAx6D,EAAA2B,EAIA,IAAA1B,GAAAjJ,KAAAiJ,EAAAJ,EAAA7I,KAAA6I,EAAA0B,EAAAvK,KAAAuK,CAMA,OAJAvK,MAAAiJ,EAAAJ,EAAAG,EAAAuB,IAAAvB,EAAAH,EACA7I,KAAA6I,EAAA0B,EAAAvB,EAAAC,IAAAD,EAAAuB,EACAvK,KAAAuK,EAAAtB,EAAAD,EAAAH,IAAAG,EAAAC,EAEAjJ,MAIAwjE,aAAA,SAAA96D,EAAAK,GAEA,GAAA8+D,GAAAn/D,EAAAO,EAAA6+D,EAAAp/D,EAAAG,EAAAk/D,EAAAr/D,EAAA6B,EACAy9D,EAAAj/D,EAAAE,EAAAg/D,EAAAl/D,EAAAF,EAAAq/D,EAAAn/D,EAAAwB,CAMA,OAJAvK,MAAAiJ,EAAA6+D,EAAAI,EAAAH,EAAAE,EACAjoE,KAAA6I,EAAAk/D,EAAAC,EAAAH,EAAAK,EACAloE,KAAAuK,EAAAs9D,EAAAI,EAAAH,EAAAE,EAEAhoE,MAIAmoE,gBAAA,WAEA,GAAA/E,GAAAhY,CAEA,iBAAAuK,GAQA,MANA58D,UAAAqqE,MAAA,GAAAvvD,GAAA8L,SAEAyjD,EAAA3qD,KAAAk9C,GAAA7/C,YAEAs1C,EAAAprD,KAAAorD,IAAAgY,GAEApjE,KAAAyY,KAAA2qD,GAAAja,eAAAiC,OAMAgd,eAAA,WAEA,GAAAhF,EAEA,iBAAAiF,GAMA,MAJAtvE,UAAAqqE,MAAA,GAAAvvD,GAAA8L,SAEAyjD,EAAA3qD,KAAAzY,MAAAmoE,gBAAAE,GAEAroE,KAAAypD,IAAA2Z,OAMAkF,QAAA,WAKA,GAAAlF,EAEA,iBAAA9jD,GAIA,MAFAvmB,UAAAqqE,MAAA,GAAAvvD,GAAA8L,SAEA3f,KAAAypD,IAAA2Z,EAAA3qD,KAAA6G,GAAA6pC,eAAA,EAAAnpD,KAAAorD,IAAA9rC,SAMAipD,QAAA,SAAAv/D,GAEA,GAAAm/C,GAAAnoD,KAAAorD,IAAApiD,IAAAhJ,KAAAlG,SAAAkP,EAAAlP,SAIA,OAAAkf,MAAAwrD,KAAA3wD,EAAAmF,KAAA09C,MAAAvO,KAAA,KAIA4d,WAAA,SAAA/8D,GAEA,MAAAgQ,MAAA+xC,KAAA/qD,KAAAmrD,kBAAAniD,KAIAmiD,kBAAA,SAAAniD,GAEA,GAAA85C,GAAA9iD,KAAAiJ,EAAAD,EAAAC,EACA85C,EAAA/iD,KAAA6I,EAAAG,EAAAH,EACA2/D,EAAAxoE,KAAAuK,EAAAvB,EAAAuB,CAEA,OAAAu4C,KAAAC,IAAAylB,KAIAC,2BAAA,SAAAnxE,EAAA4W,GAEA1K,QAAAC,MAAA,8GAIAilE,uBAAA,SAAA//D,EAAAuF,GAEA1K,QAAAC,MAAA,sGAIAklE,sBAAA,SAAArxE,GAIA,MAFAkM,SAAAwmD,KAAA,yFAEAhqD,KAAA4oE,sBAAAtxE,IAIAuxE,mBAAA,SAAAvxE,GAIA,MAFAkM,SAAAwmD,KAAA,mFAEAhqD,KAAA8oE,mBAAAxxE,IAIAyxE,oBAAA,SAAAn3D,EAAAq3C,GAIA,MAFAzlD,SAAAwmD,KAAA,qFAEAhqD,KAAAgpE,oBAAAp3D,EAAAq3C,IAIA2f,sBAAA,SAAAtxE,GAMA,MAJA0I,MAAAiJ,EAAA3R,EAAA4xD,SAAA,IACAlpD,KAAA6I,EAAAvR,EAAA4xD,SAAA,IACAlpD,KAAAuK,EAAAjT,EAAA4xD,SAAA,IAEAlpD,MAIA8oE,mBAAA,SAAAxxE,GAEA,GAAA2xE,GAAAjpE,KAAAkM,IAAA5U,EAAA4xD,SAAA,GAAA5xD,EAAA4xD,SAAA,GAAA5xD,EAAA4xD,SAAA,IAAApvD,SACAovE,EAAAlpE,KAAAkM,IAAA5U,EAAA4xD,SAAA,GAAA5xD,EAAA4xD,SAAA,GAAA5xD,EAAA4xD,SAAA,IAAApvD,SACAqvE,EAAAnpE,KAAAkM,IAAA5U,EAAA4xD,SAAA,GAAA5xD,EAAA4xD,SAAA,GAAA5xD,EAAA4xD,SAAA,KAAApvD,QAMA,OAJAkG,MAAAiJ,EAAAggE,EACAjpE,KAAA6I,EAAAqgE,EACAlpE,KAAAuK,EAAA4+D,EAEAnpE,MAIAgpE,oBAAA,SAAAp3D,EAAAq3C,GAEA,GAAA1qC,GAAA,EAAA3M,EAEAihB,EAAAo2B,EAAAC,QAMA,OAJAlpD,MAAAiJ,EAAA4pB,EAAAtU,GACAve,KAAA6I,EAAAgqB,EAAAtU,EAAA,GACAve,KAAAuK,EAAAsoB,EAAAtU,EAAA,GAEAve,MAIAq4D,OAAA,SAAArvD,GAEA,MAAAA,GAAAC,IAAAjJ,KAAAiJ,GAAAD,EAAAH,IAAA7I,KAAA6I,GAAAG,EAAAuB,IAAAvK,KAAAuK,GAIA+tD,UAAA,SAAA38C,EAAA4C,GAQA,MANAxlB,UAAAwlB,MAAA,GAEAve,KAAAiJ,EAAA0S,EAAA4C,GACAve,KAAA6I,EAAA8S,EAAA4C,EAAA,GACAve,KAAAuK,EAAAoR,EAAA4C,EAAA,GAEAve,MAIAwlD,QAAA,SAAA7pC,EAAA4C,GASA,MAPAxlB,UAAA4iB,UACA5iB,SAAAwlB,MAAA,GAEA5C,EAAA4C,GAAAve,KAAAiJ,EACA0S,EAAA4C,EAAA,GAAAve,KAAA6I,EACA8S,EAAA4C,EAAA,GAAAve,KAAAuK,EAEAoR,GAIAyqD,cAAA,SAAAC,EAAAz0D,EAAA2M,GAUA,MARAxlB,UAAAwlB,MAAA,GAEA3M,IAAAy0D,EAAAC,SAAA/nD,EAEAve,KAAAiJ,EAAAo9D,EAAA1qD,MAAA/J,GACA5R,KAAA6I,EAAAw9D,EAAA1qD,MAAA/J,EAAA,GACA5R,KAAAuK,EAAA87D,EAAA1qD,MAAA/J,EAAA,GAEA5R,OAgBA6T,EAAAu1D,QAAA,SAAAngE,EAAAJ,EAAA0B,EAAAI,GAEA3K,KAAAiJ,KAAA,EACAjJ,KAAA6I,KAAA,EACA7I,KAAAuK,KAAA,EACAvK,KAAA2K,EAAA5R,SAAA4R,IAAA,GAIAkJ,EAAAu1D,QAAAjtE,WAEAE,YAAAwX,EAAAu1D,QAEAl9D,IAAA,SAAAjD,EAAAJ,EAAA0B,EAAAI,GAOA,MALA3K,MAAAiJ,IACAjJ,KAAA6I,IACA7I,KAAAuK,IACAvK,KAAA2K,IAEA3K,MAIA6kE,KAAA,SAAA57D,GAIA,MAFAjJ,MAAAiJ,IAEAjJ,MAIA8kE,KAAA,SAAAj8D,GAIA,MAFA7I,MAAA6I,IAEA7I,MAIAumE,KAAA,SAAAh8D,GAIA,MAFAvK,MAAAuK,IAEAvK,MAIAqpE,KAAA,SAAA1+D,GAIA,MAFA3K,MAAA2K,IAEA3K,MAIA+kE,aAAA,SAAAnzD,EAAA5X,GAEA,OAAA4X,GAEA,OAAA5R,KAAAiJ,EAAAjP,CAA0B,MAC1B,QAAAgG,KAAA6I,EAAA7O,CAA0B,MAC1B,QAAAgG,KAAAuK,EAAAvQ,CAA0B,MAC1B,QAAAgG,KAAA2K,EAAA3Q,CAA0B,MAC1B,kBAAAwmB,OAAA,0BAAA5O,KAMAozD,aAAA,SAAApzD,GAEA,OAAAA,GAEA,aAAA5R,MAAAiJ,CACA,cAAAjJ,MAAA6I,CACA,cAAA7I,MAAAuK,CACA,cAAAvK,MAAA2K,CACA,kBAAA6V,OAAA,0BAAA5O,KAMA43C,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAiJ,EAAAjJ,KAAA6I,EAAA7I,KAAAuK,EAAAvK,KAAA2K,IAIA8N,KAAA,SAAAzP,GAOA,MALAhJ,MAAAiJ,EAAAD,EAAAC,EACAjJ,KAAA6I,EAAAG,EAAAH,EACA7I,KAAAuK,EAAAvB,EAAAuB,EACAvK,KAAA2K,EAAA5R,SAAAiQ,EAAA2B,EAAA3B,EAAA2B,EAAA,EAEA3K,MAIA+V,IAAA,SAAA/M,EAAA2B,GAEA,MAAA5R,UAAA4R,GAEAnH,QAAAwmD,KAAA,yFACAhqD,KAAAilE,WAAAj8D,EAAA2B,KAIA3K,KAAAiJ,GAAAD,EAAAC,EACAjJ,KAAA6I,GAAAG,EAAAH,EACA7I,KAAAuK,GAAAvB,EAAAuB,EACAvK,KAAA2K,GAAA3B,EAAA2B,EAEA3K,OAIAk4D,UAAA,SAAA70D,GAOA,MALArD,MAAAiJ,GAAA5F,EACArD,KAAA6I,GAAAxF,EACArD,KAAAuK,GAAAlH,EACArD,KAAA2K,GAAAtH,EAEArD,MAIAilE,WAAA,SAAAv8D,EAAAK,GAOA,MALA/I,MAAAiJ,EAAAP,EAAAO,EAAAF,EAAAE,EACAjJ,KAAA6I,EAAAH,EAAAG,EAAAE,EAAAF,EACA7I,KAAAuK,EAAA7B,EAAA6B,EAAAxB,EAAAwB,EACAvK,KAAA2K,EAAAjC,EAAAiC,EAAA5B,EAAA4B,EAEA3K,MAIAklE,gBAAA,SAAAl8D,EAAA3F,GAOA,MALArD,MAAAiJ,GAAAD,EAAAC,EAAA5F,EACArD,KAAA6I,GAAAG,EAAAH,EAAAxF,EACArD,KAAAuK,GAAAvB,EAAAuB,EAAAlH,EACArD,KAAA2K,GAAA3B,EAAA2B,EAAAtH,EAEArD,MAIAypD,IAAA,SAAAzgD,EAAA2B,GAEA,MAAA5R,UAAA4R,GAEAnH,QAAAwmD,KAAA,yFACAhqD,KAAAktD,WAAAlkD,EAAA2B,KAIA3K,KAAAiJ,GAAAD,EAAAC,EACAjJ,KAAA6I,GAAAG,EAAAH,EACA7I,KAAAuK,GAAAvB,EAAAuB,EACAvK,KAAA2K,GAAA3B,EAAA2B,EAEA3K,OAIAmlE,UAAA,SAAA9hE,GAOA,MALArD,MAAAiJ,GAAA5F,EACArD,KAAA6I,GAAAxF,EACArD,KAAAuK,GAAAlH,EACArD,KAAA2K,GAAAtH,EAEArD,MAIAktD,WAAA,SAAAxkD,EAAAK,GAOA,MALA/I,MAAAiJ,EAAAP,EAAAO,EAAAF,EAAAE,EACAjJ,KAAA6I,EAAAH,EAAAG,EAAAE,EAAAF,EACA7I,KAAAuK,EAAA7B,EAAA6B,EAAAxB,EAAAwB,EACAvK,KAAA2K,EAAAjC,EAAAiC,EAAA5B,EAAA4B,EAEA3K,MAIAmpD,eAAA,SAAAmc,GAOA,MALAtlE,MAAAiJ,GAAAq8D,EACAtlE,KAAA6I,GAAAy8D,EACAtlE,KAAAuK,GAAA+6D,EACAtlE,KAAA2K,GAAA26D,EAEAtlE,MAIA4mE,aAAA,SAAAtvE,GAEA,GAAA2R,GAAAjJ,KAAAiJ,EACAJ,EAAA7I,KAAA6I,EACA0B,EAAAvK,KAAAuK,EACAI,EAAA3K,KAAA2K,EAEA7J,EAAAxJ,EAAA4xD,QAOA,OALAlpD,MAAAiJ,EAAAnI,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EAAAzJ,EAAA,IAAA6J,EACA3K,KAAA6I,EAAA/H,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,GAAAyJ,EAAAzJ,EAAA,IAAA6J,EACA3K,KAAAuK,EAAAzJ,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,IAAAyJ,EAAAzJ,EAAA,IAAA6J,EACA3K,KAAA2K,EAAA7J,EAAA,GAAAmI,EAAAnI,EAAA,GAAA+H,EAAA/H,EAAA,IAAAyJ,EAAAzJ,EAAA,IAAA6J,EAEA3K,MAIAqlE,aAAA,SAAAC,GAEA,OAAAA,EAAA,CAEA,GAAAC,GAAA,EAAAD,CAEAtlE,MAAAiJ,GAAAs8D,EACAvlE,KAAA6I,GAAA08D,EACAvlE,KAAAuK,GAAAg7D,EACAvlE,KAAA2K,GAAA46D,MAIAvlE,MAAAiJ,EAAA,EACAjJ,KAAA6I,EAAA,EACA7I,KAAAuK,EAAA,EACAvK,KAAA2K,EAAA,CAIA,OAAA3K,OAIAspE,2BAAA,SAAA3gE,GAMA3I,KAAA2K,EAAA,EAAAqO,KAAAwrD,KAAA77D,EAAAgC,EAEA,IAAAtH,GAAA2V,KAAA+xC,KAAA,EAAApiD,EAAAgC,EAAAhC,EAAAgC,EAgBA,OAdAtH,GAAA,MAEArD,KAAAiJ,EAAA,EACAjJ,KAAA6I,EAAA,EACA7I,KAAAuK,EAAA,IAIAvK,KAAAiJ,EAAAN,EAAAM,EAAA5F,EACArD,KAAA6I,EAAAF,EAAAE,EAAAxF,EACArD,KAAAuK,EAAA5B,EAAA4B,EAAAlH,GAIArD,MAIAupE,+BAAA,SAAAjyE,GAMA,GAAAwxD,GAAA7/C,EAAAJ,EAAA0B,EACAi/D,EAAA,IACAC,EAAA,GAEAn2C,EAAAh8B,EAAA4xD,SAEAwZ,EAAApvC,EAAA,GAAAqvC,EAAArvC,EAAA,GAAAsvC,EAAAtvC,EAAA,GACAuvC,EAAAvvC,EAAA,GAAAwvC,EAAAxvC,EAAA,GAAAyvC,EAAAzvC,EAAA,GACA0vC,EAAA1vC,EAAA,GAAA2vC,EAAA3vC,EAAA,GAAA4vC,EAAA5vC,EAAA,GAEA,IAAAta,KAAAuqD,IAAAZ,EAAAE,GAAA2G,GACAxwD,KAAAuqD,IAAAX,EAAAI,GAAAwG,GACAxwD,KAAAuqD,IAAAR,EAAAE,GAAAuG,EAAA,CAMA,GAAAxwD,KAAAuqD,IAAAZ,EAAAE,GAAA4G,GACAzwD,KAAAuqD,IAAAX,EAAAI,GAAAyG,GACAzwD,KAAAuqD,IAAAR,EAAAE,GAAAwG,GACAzwD,KAAAuqD,IAAAb,EAAAI,EAAAI,EAAA,GAAAuG,EAMA,MAFAzpE,MAAAkM,IAAA,SAEAlM,IAMA8oD,GAAA9vC,KAAA8uC,EAEA,IAAA4hB,IAAAhH,EAAA,KACAiH,GAAA7G,EAAA,KACA8G,GAAA1G,EAAA,KACA7gB,GAAAsgB,EAAAE,GAAA,EACAgH,GAAAjH,EAAAI,GAAA,EACA8G,GAAA/G,EAAAE,GAAA,CA4DA,OA1DAyG,GAAAC,GAAAD,EAAAE,EAIAF,EAAAF,GAEAvgE,EAAA,EACAJ,EAAA,WACA0B,EAAA,aAIAtB,EAAA+P,KAAA+xC,KAAA2e,GACA7gE,EAAAw5C,EAAAp5C,EACAsB,EAAAs/D,EAAA5gE,GAII0gE,EAAAC,EAIJD,EAAAH,GAEAvgE,EAAA,WACAJ,EAAA,EACA0B,EAAA,aAIA1B,EAAAmQ,KAAA+xC,KAAA4e,GACA1gE,EAAAo5C,EAAAx5C,EACA0B,EAAAu/D,EAAAjhE,GAQA+gE,EAAAJ,GAEAvgE,EAAA,WACAJ,EAAA,WACA0B,EAAA,IAIAA,EAAAyO,KAAA+xC,KAAA6e,GACA3gE,EAAA4gE,EAAAt/D,EACA1B,EAAAihE,EAAAv/D,GAMAvK,KAAAkM,IAAAjD,EAAAJ,EAAA0B,EAAAu+C,GAEA9oD,KAMA,GAAAqD,GAAA2V,KAAA+xC,MAAAkY,EAAAF,IAAAE,EAAAF,IACAH,EAAAI,IAAAJ,EAAAI,IACAH,EAAAF,IAAAE,EAAAF,GAYA,OAVA3pD,MAAAuqD,IAAAlgE,GAAA,OAAAA,EAAA,GAKArD,KAAAiJ,GAAAg6D,EAAAF,GAAA1/D,EACArD,KAAA6I,GAAA+5D,EAAAI,GAAA3/D,EACArD,KAAAuK,GAAAs4D,EAAAF,GAAAt/D,EACArD,KAAA2K,EAAAqO,KAAAwrD,MAAA9B,EAAAI,EAAAI,EAAA,MAEAljE,MAIA0vC,IAAA,SAAA1mC,GA0BA,MAxBAhJ,MAAAiJ,EAAAD,EAAAC,IAEAjJ,KAAAiJ,EAAAD,EAAAC,GAIAjJ,KAAA6I,EAAAG,EAAAH,IAEA7I,KAAA6I,EAAAG,EAAAH,GAIA7I,KAAAuK,EAAAvB,EAAAuB,IAEAvK,KAAAuK,EAAAvB,EAAAuB,GAIAvK,KAAA2K,EAAA3B,EAAA2B,IAEA3K,KAAA2K,EAAA3B,EAAA2B,GAIA3K,MAIAoY,IAAA,SAAApP,GA0BA,MAxBAhJ,MAAAiJ,EAAAD,EAAAC,IAEAjJ,KAAAiJ,EAAAD,EAAAC,GAIAjJ,KAAA6I,EAAAG,EAAAH,IAEA7I,KAAA6I,EAAAG,EAAAH,GAIA7I,KAAAuK,EAAAvB,EAAAuB,IAEAvK,KAAAuK,EAAAvB,EAAAuB,GAIAvK,KAAA2K,EAAA3B,EAAA2B,IAEA3K,KAAA2K,EAAA3B,EAAA2B,GAIA3K,MAIA02D,MAAA,SAAAhnB,EAAAt3B,GA4CA,MAxCApY,MAAAiJ,EAAAymC,EAAAzmC,EAEAjJ,KAAAiJ,EAAAymC,EAAAzmC,EAEGjJ,KAAAiJ,EAAAmP,EAAAnP,IAEHjJ,KAAAiJ,EAAAmP,EAAAnP,GAIAjJ,KAAA6I,EAAA6mC,EAAA7mC,EAEA7I,KAAA6I,EAAA6mC,EAAA7mC,EAEG7I,KAAA6I,EAAAuP,EAAAvP,IAEH7I,KAAA6I,EAAAuP,EAAAvP,GAIA7I,KAAAuK,EAAAmlC,EAAAnlC,EAEAvK,KAAAuK,EAAAmlC,EAAAnlC,EAEGvK,KAAAuK,EAAA6N,EAAA7N,IAEHvK,KAAAuK,EAAA6N,EAAA7N,GAIAvK,KAAA2K,EAAA+kC,EAAA/kC,EAEA3K,KAAA2K,EAAA+kC,EAAA/kC,EAEG3K,KAAA2K,EAAAyN,EAAAzN,IAEH3K,KAAA2K,EAAAyN,EAAAzN,GAIA3K,MAIAwlE,YAAA,WAEA,GAAA91B,GAAAt3B,CAEA,iBAAAqtD,EAAAC,GAYA,MAVA3sE,UAAA22C,IAEAA,EAAA,GAAA77B,GAAAu1D,QACAhxD,EAAA,GAAAvE,GAAAu1D,SAIA15B,EAAAxjC,IAAAu5D,SACArtD,EAAAlM,IAAAw5D,SAEA1lE,KAAA02D,MAAAhnB,EAAAt3B,OAMAuuC,MAAA,WAOA,MALA3mD,MAAAiJ,EAAA+P,KAAA2tC,MAAA3mD,KAAAiJ,GACAjJ,KAAA6I,EAAAmQ,KAAA2tC,MAAA3mD,KAAA6I,GACA7I,KAAAuK,EAAAyO,KAAA2tC,MAAA3mD,KAAAuK,GACAvK,KAAA2K,EAAAqO,KAAA2tC,MAAA3mD,KAAA2K,GAEA3K,MAIAm/C,KAAA,WAOA,MALAn/C,MAAAiJ,EAAA+P,KAAAmmC,KAAAn/C,KAAAiJ,GACAjJ,KAAA6I,EAAAmQ,KAAAmmC,KAAAn/C,KAAA6I,GACA7I,KAAAuK,EAAAyO,KAAAmmC,KAAAn/C,KAAAuK,GACAvK,KAAA2K,EAAAqO,KAAAmmC,KAAAn/C,KAAA2K,GAEA3K,MAIA2lE,MAAA,WAOA,MALA3lE,MAAAiJ,EAAA+P,KAAA2sD,MAAA3lE,KAAAiJ,GACAjJ,KAAA6I,EAAAmQ,KAAA2sD,MAAA3lE,KAAA6I,GACA7I,KAAAuK,EAAAyO,KAAA2sD,MAAA3lE,KAAAuK,GACAvK,KAAA2K,EAAAqO,KAAA2sD,MAAA3lE,KAAA2K,GAEA3K,MAIA4lE,YAAA,WAOA,MALA5lE,MAAAiJ,EAAAjJ,KAAAiJ,EAAA,EAAA+P,KAAAmmC,KAAAn/C,KAAAiJ,GAAA+P,KAAA2tC,MAAA3mD,KAAAiJ,GACAjJ,KAAA6I,EAAA7I,KAAA6I,EAAA,EAAAmQ,KAAAmmC,KAAAn/C,KAAA6I,GAAAmQ,KAAA2tC,MAAA3mD,KAAA6I,GACA7I,KAAAuK,EAAAvK,KAAAuK,EAAA,EAAAyO,KAAAmmC,KAAAn/C,KAAAuK,GAAAyO,KAAA2tC,MAAA3mD,KAAAuK,GACAvK,KAAA2K,EAAA3K,KAAA2K,EAAA,EAAAqO,KAAAmmC,KAAAn/C,KAAA2K,GAAAqO,KAAA2tC,MAAA3mD,KAAA2K,GAEA3K,MAIA6lE,OAAA,WAOA,MALA7lE,MAAAiJ,GAAAjJ,KAAAiJ,EACAjJ,KAAA6I,GAAA7I,KAAA6I,EACA7I,KAAAuK,GAAAvK,KAAAuK,EACAvK,KAAA2K,GAAA3K,KAAA2K,EAEA3K,MAIAorD,IAAA,SAAApiD,GAEA,MAAAhJ,MAAAiJ,EAAAD,EAAAC,EAAAjJ,KAAA6I,EAAAG,EAAAH,EAAA7I,KAAAuK,EAAAvB,EAAAuB,EAAAvK,KAAA2K,EAAA3B,EAAA2B,GAIA+4D,SAAA,WAEA,MAAA1jE,MAAAiJ,EAAAjJ,KAAAiJ,EAAAjJ,KAAA6I,EAAA7I,KAAA6I,EAAA7I,KAAAuK,EAAAvK,KAAAuK,EAAAvK,KAAA2K,EAAA3K,KAAA2K,GAIA7Q,OAAA,WAEA,MAAAkf,MAAA+xC,KAAA/qD,KAAAiJ,EAAAjJ,KAAAiJ,EAAAjJ,KAAA6I,EAAA7I,KAAA6I,EAAA7I,KAAAuK,EAAAvK,KAAAuK,EAAAvK,KAAA2K,EAAA3K,KAAA2K,IAIAm7D,gBAAA,WAEA,MAAA9sD,MAAAuqD,IAAAvjE,KAAAiJ,GAAA+P,KAAAuqD,IAAAvjE,KAAA6I,GAAAmQ,KAAAuqD,IAAAvjE,KAAAuK,GAAAyO,KAAAuqD,IAAAvjE,KAAA2K,IAIAmL,UAAA,WAEA,MAAA9V,MAAAqlE,aAAArlE,KAAAlG,WAIAksE,UAAA,SAAA58D,GAEA,GAAA68D,GAAAjmE,KAAAlG,QAQA,OANA,KAAAmsE,GAAA78D,IAAA68D,GAEAjmE,KAAAmpD,eAAA//C,EAAA68D,GAIAjmE,MAIAo4D,KAAA,SAAApvD,EAAA2O,GAOA,MALA3X,MAAAiJ,IAAAD,EAAAC,EAAAjJ,KAAAiJ,GAAA0O,EACA3X,KAAA6I,IAAAG,EAAAH,EAAA7I,KAAA6I,GAAA8O,EACA3X,KAAAuK,IAAAvB,EAAAuB,EAAAvK,KAAAuK,GAAAoN,EACA3X,KAAA2K,IAAA3B,EAAA2B,EAAA3K,KAAA2K,GAAAgN,EAEA3X,MAIAkmE,YAAA,SAAA9C,EAAA+C,EAAAxuD,GAIA,MAFA3X,MAAAktD,WAAAiZ,EAAA/C,GAAAja,eAAAxxC,GAAA5B,IAAAqtD,GAEApjE,MAIAq4D,OAAA,SAAArvD,GAEA,MAAAA,GAAAC,IAAAjJ,KAAAiJ,GAAAD,EAAAH,IAAA7I,KAAA6I,GAAAG,EAAAuB,IAAAvK,KAAAuK,GAAAvB,EAAA2B,IAAA3K,KAAA2K,GAIA2tD,UAAA,SAAA38C,EAAA4C,GASA,MAPAxlB,UAAAwlB,MAAA,GAEAve,KAAAiJ,EAAA0S,EAAA4C,GACAve,KAAA6I,EAAA8S,EAAA4C,EAAA,GACAve,KAAAuK,EAAAoR,EAAA4C,EAAA,GACAve,KAAA2K,EAAAgR,EAAA4C,EAAA,GAEAve,MAIAwlD,QAAA,SAAA7pC,EAAA4C,GAUA,MARAxlB,UAAA4iB,UACA5iB,SAAAwlB,MAAA,GAEA5C,EAAA4C,GAAAve,KAAAiJ,EACA0S,EAAA4C,EAAA,GAAAve,KAAA6I,EACA8S,EAAA4C,EAAA,GAAAve,KAAAuK,EACAoR,EAAA4C,EAAA,GAAAve,KAAA2K,EAEAgR,GAIAyqD,cAAA,SAAAC,EAAAz0D,EAAA2M,GAWA,MATAxlB,UAAAwlB,MAAA,GAEA3M,IAAAy0D,EAAAC,SAAA/nD,EAEAve,KAAAiJ,EAAAo9D,EAAA1qD,MAAA/J,GACA5R,KAAA6I,EAAAw9D,EAAA1qD,MAAA/J,EAAA,GACA5R,KAAAuK,EAAA87D,EAAA1qD,MAAA/J,EAAA,GACA5R,KAAA2K,EAAA07D,EAAA1qD,MAAA/J,EAAA,GAEA5R,OAcA6T,EAAAmuD,MAAA,SAAA/4D,EAAAJ,EAAA0B,EAAA2D,GAEAlO,KAAAyhE,GAAAx4D,GAAA,EACAjJ,KAAA0hE,GAAA74D,GAAA,EACA7I,KAAA2hE,GAAAp3D,GAAA,EACAvK,KAAA+pE,OAAA77D,GAAA2F,EAAAmuD,MAAAgI,cAIAn2D,EAAAmuD,MAAAiI,gBAAA,qCAEAp2D,EAAAmuD,MAAAgI,aAAA,MAEAn2D,EAAAmuD,MAAA7lE,WAEAE,YAAAwX,EAAAmuD,MAEA/4D,QAEA,MAAAjJ,MAAAyhE,IAIAx4D,MAAAjP,GAEAgG,KAAAyhE,GAAAznE,EACAgG,KAAA6hE,oBAIAh5D,QAEA,MAAA7I,MAAA0hE,IAIA74D,MAAA7O,GAEAgG,KAAA0hE,GAAA1nE,EACAgG,KAAA6hE,oBAIAt3D,QAEA,MAAAvK,MAAA2hE,IAIAp3D,MAAAvQ,GAEAgG,KAAA2hE,GAAA3nE,EACAgG,KAAA6hE,oBAIA3zD,YAEA,MAAAlO,MAAA+pE,QAIA77D,UAAAlU,GAEAgG,KAAA+pE,OAAA/vE,EACAgG,KAAA6hE,oBAIA31D,IAAA,SAAAjD,EAAAJ,EAAA0B,EAAA2D,GASA,MAPAlO,MAAAyhE,GAAAx4D,EACAjJ,KAAA0hE,GAAA74D,EACA7I,KAAA2hE,GAAAp3D,EACAvK,KAAA+pE,OAAA77D,GAAAlO,KAAA+pE,OAEA/pE,KAAA6hE,mBAEA7hE,MAIAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAyhE,GAAAzhE,KAAA0hE,GAAA1hE,KAAA2hE,GAAA3hE,KAAA+pE,SAIAtxD,KAAA,SAAAspD,GASA,MAPA/hE,MAAAyhE,GAAAM,EAAAN,GACAzhE,KAAA0hE,GAAAK,EAAAL,GACA1hE,KAAA2hE,GAAAI,EAAAJ,GACA3hE,KAAA+pE,OAAAhI,EAAAgI,OAEA/pE,KAAA6hE,mBAEA7hE,MAIAyiE,sBAAA,SAAAnrE,EAAA4W,EAAA6L,GAEA,GAAA28C,GAAA7iD,EAAAmF,KAAA09C,MAIApjC,EAAAh8B,EAAA4xD,SACAwZ,EAAApvC,EAAA,GAAAqvC,EAAArvC,EAAA,GAAAsvC,EAAAtvC,EAAA,GACAuvC,EAAAvvC,EAAA,GAAAwvC,EAAAxvC,EAAA,GAAAyvC,EAAAzvC,EAAA,GACA0vC,EAAA1vC,EAAA,GAAA2vC,EAAA3vC,EAAA,GAAA4vC,EAAA5vC,EAAA,GA8GA,OA5GAplB,MAAAlO,KAAA+pE,OAEA,QAAA77D,GAEAlO,KAAA0hE,GAAA1oD,KAAAkxD,KAAAxT,EAAAkM,KAAA,IAEA5pD,KAAAuqD,IAAAX,GAAA,QAEA5iE,KAAAyhE,GAAAzoD,KAAA8xC,OAAAiY,EAAAG,GACAljE,KAAA2hE,GAAA3oD,KAAA8xC,OAAA6X,EAAAD,KAIA1iE,KAAAyhE,GAAAzoD,KAAA8xC,MAAAmY,EAAAH,GACA9iE,KAAA2hE,GAAA,IAIG,QAAAzzD,GAEHlO,KAAAyhE,GAAAzoD,KAAAkxD,MAAAxT,EAAAqM,KAAA,IAEA/pD,KAAAuqD,IAAAR,GAAA,QAEA/iE,KAAA0hE,GAAA1oD,KAAA8xC,MAAA8X,EAAAM,GACAljE,KAAA2hE,GAAA3oD,KAAA8xC,MAAA+X,EAAAC,KAIA9iE,KAAA0hE,GAAA1oD,KAAA8xC,OAAAkY,EAAAN,GACA1iE,KAAA2hE,GAAA,IAIG,QAAAzzD,GAEHlO,KAAAyhE,GAAAzoD,KAAAkxD,KAAAxT,EAAAuM,KAAA,IAEAjqD,KAAAuqD,IAAAN,GAAA,QAEAjjE,KAAA0hE,GAAA1oD,KAAA8xC,OAAAkY,EAAAE,GACAljE,KAAA2hE,GAAA3oD,KAAA8xC,OAAA6X,EAAAG,KAIA9iE,KAAA0hE,GAAA,EACA1hE,KAAA2hE,GAAA3oD,KAAA8xC,MAAA+X,EAAAH,KAIG,QAAAx0D,GAEHlO,KAAA0hE,GAAA1oD,KAAAkxD,MAAAxT,EAAAsM,KAAA,IAEAhqD,KAAAuqD,IAAAP,GAAA,QAEAhjE,KAAAyhE,GAAAzoD,KAAA8xC,MAAAmY,EAAAC,GACAljE,KAAA2hE,GAAA3oD,KAAA8xC,MAAA+X,EAAAH,KAIA1iE,KAAAyhE,GAAA,EACAzhE,KAAA2hE,GAAA3oD,KAAA8xC,OAAA6X,EAAAG,KAIG,QAAA50D,GAEHlO,KAAA2hE,GAAA3oD,KAAAkxD,KAAAxT,EAAAmM,KAAA,IAEA7pD,KAAAuqD,IAAAV,GAAA,QAEA7iE,KAAAyhE,GAAAzoD,KAAA8xC,OAAAiY,EAAAD,GACA9iE,KAAA0hE,GAAA1oD,KAAA8xC,OAAAkY,EAAAN,KAIA1iE,KAAAyhE,GAAA,EACAzhE,KAAA0hE,GAAA1oD,KAAA8xC,MAAA8X,EAAAM,KAIG,QAAAh1D,GAEHlO,KAAA2hE,GAAA3oD,KAAAkxD,MAAAxT,EAAAiM,KAAA,IAEA3pD,KAAAuqD,IAAAZ,GAAA,QAEA3iE,KAAAyhE,GAAAzoD,KAAA8xC,MAAAmY,EAAAH,GACA9iE,KAAA0hE,GAAA1oD,KAAA8xC,MAAA8X,EAAAF,KAIA1iE,KAAAyhE,GAAAzoD,KAAA8xC,OAAAiY,EAAAG,GACAljE,KAAA0hE,GAAA,IAMAl+D,QAAAwmD,KAAA,kEAAA97C,GAIAlO,KAAA+pE,OAAA77D,EAEA6L,QAAA/Z,KAAA6hE,mBAEA7hE,MAIAmqE,kBAAA,WAEA,GAAAlhB,EAEA,iBAAAtgD,EAAAuF,EAAA6L,GAMA,MAJAhhB,UAAAkwD,MAAA,GAAAp1C,GAAAyzD,SACAre,EAAAmhB,2BAAAzhE,GACA3I,KAAAyiE,sBAAAxZ,EAAA/6C,EAAA6L,GAEA/Z,SAMAqqE,eAAA,SAAArhE,EAAAkF,GAEA,MAAAlO,MAAAkM,IAAAlD,EAAAC,EAAAD,EAAAH,EAAAG,EAAAuB,EAAA2D,GAAAlO,KAAA+pE,SAIAO,QAAA,WAIA,GAAA3hE,GAAA,GAAAkL,GAAAy2C,UAEA,iBAAAigB,GAEA5hE,EAAAm5D,aAAA9hE,MACAA,KAAAmqE,kBAAAxhE,EAAA4hE,OAMAlS,OAAA,SAAA0J,GAEA,MAAAA,GAAAN,KAAAzhE,KAAAyhE,IAAAM,EAAAL,KAAA1hE,KAAA0hE,IAAAK,EAAAJ,KAAA3hE,KAAA2hE,IAAAI,EAAAgI,SAAA/pE,KAAA+pE,QAIAzR,UAAA,SAAA38C,GASA,MAPA3b,MAAAyhE,GAAA9lD,EAAA,GACA3b,KAAA0hE,GAAA/lD,EAAA,GACA3b,KAAA2hE,GAAAhmD,EAAA,GACA5iB,SAAA4iB,EAAA,KAAA3b,KAAA+pE,OAAApuD,EAAA,IAEA3b,KAAA6hE,mBAEA7hE,MAIAwlD,QAAA,SAAA7pC,EAAA4C,GAUA,MARAxlB,UAAA4iB,UACA5iB,SAAAwlB,MAAA,GAEA5C,EAAA4C,GAAAve,KAAAyhE,GACA9lD,EAAA4C,EAAA,GAAAve,KAAA0hE,GACA/lD,EAAA4C,EAAA,GAAAve,KAAA2hE,GACAhmD,EAAA4C,EAAA,GAAAve,KAAA+pE,OAEApuD,GAIA6uD,UAAA,SAAAC,GAEA,MAAAA,GAEAA,EAAAv+D,IAAAlM,KAAAyhE,GAAAzhE,KAAA0hE,GAAA1hE,KAAA2hE,IAIA,GAAA9tD,GAAA8L,QAAA3f,KAAAyhE,GAAAzhE,KAAA0hE,GAAA1hE,KAAA2hE,KAMAlvD,SAAA,SAAAirB,GAIA,MAFA19B,MAAA6hE,iBAAAnkC,EAEA19B,MAIA6hE,iBAAA,cAUAhuD,EAAA62D,MAAA,SAAA9rD,EAAAuB,GAEAngB,KAAA4e,MAAA7lB,SAAA6lB,IAAA,GAAA/K,GAAA8L,QACA3f,KAAAmgB,IAAApnB,SAAAonB,IAAA,GAAAtM,GAAA8L,SAIA9L,EAAA62D,MAAAvuE,WAEAE,YAAAwX,EAAA62D,MAEAx+D,IAAA,SAAA0S,EAAAuB,GAKA,MAHAngB,MAAA4e,MAAAnG,KAAAmG,GACA5e,KAAAmgB,IAAA1H,KAAA0H,GAEAngB,MAIAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAApb,GAKA,MAHA2C,MAAA4e,MAAAnG,KAAApb,EAAAuhB,OACA5e,KAAAmgB,IAAA1H,KAAApb,EAAA8iB,KAEAngB,MAIAwuD,OAAA,SAAAgJ,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OACA,OAAAnmB,GAAAyrE,WAAAjlE,KAAA4e,MAAA5e,KAAAmgB,KAAAgpC,eAAA,KAIAuE,MAAA,SAAA8J,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OACA,OAAAnmB,GAAA0zD,WAAAltD,KAAAmgB,IAAAngB,KAAA4e,QAIA+rD,WAAA,WAEA,MAAA3qE,MAAA4e,MAAAusC,kBAAAnrD,KAAAmgB,MAIA9K,SAAA,WAEA,MAAArV,MAAA4e,MAAAmnD,WAAA/lE,KAAAmgB,MAIA1iB,GAAA,SAAA8L,EAAAiuD,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OAEA,OAAA3f,MAAA0tD,MAAAl0D,GAAA2vD,eAAA5/C,GAAAwM,IAAA/V,KAAA4e,QAIAgsD,6BAAA,WAEA,GAAAC,GAAA,GAAAh3D,GAAA8L,QACAmrD,EAAA,GAAAj3D,GAAA8L,OAEA,iBAAAorD,EAAAC,GAEAH,EAAA3d,WAAA6d,EAAA/qE,KAAA4e,OACAksD,EAAA5d,WAAAltD,KAAAmgB,IAAAngB,KAAA4e,MAEA,IAAAqsD,GAAAH,EAAA1f,IAAA0f,GACAI,EAAAJ,EAAA1f,IAAAyf,GAEAthE,EAAA2hE,EAAAD,CAQA,OANAD,KAEAzhE,EAAAsK,EAAAmF,KAAA09C,MAAAntD,EAAA,MAIAA,MAMA4hE,oBAAA,SAAAJ,EAAAC,EAAAxT,GAEA,GAAAjuD,GAAAvJ,KAAA4qE,6BAAAG,EAAAC,GAEAxxE,EAAAg+D,GAAA,GAAA3jD,GAAA8L,OAEA,OAAA3f,MAAA0tD,MAAAl0D,GAAA2vD,eAAA5/C,GAAAwM,IAAA/V,KAAA4e,QAIAgoD,aAAA,SAAA3d,GAKA,MAHAjpD,MAAA4e,MAAAgoD,aAAA3d,GACAjpD,KAAAmgB,IAAAymD,aAAA3d,GAEAjpD,MAIAq4D,OAAA,SAAAh7D,GAEA,MAAAA,GAAAuhB,MAAAy5C,OAAAr4D,KAAA4e,QAAAvhB,EAAA8iB,IAAAk4C,OAAAr4D,KAAAmgB,OAYAtM,EAAAu3D,KAAA,SAAA17B,EAAAt3B,GAEApY,KAAA0vC,IAAA32C,SAAA22C,IAAA,GAAA77B,GAAA+6C,QAAA1tC,SACAlhB,KAAAoY,IAAArf,SAAAqf,IAAA,GAAAvE,GAAA+6C,UAAA1tC,cAIArN,EAAAu3D,KAAAjvE,WAEAE,YAAAwX,EAAAu3D,KAEAl/D,IAAA,SAAAwjC,EAAAt3B,GAKA,MAHApY,MAAA0vC,IAAAj3B,KAAAi3B,GACA1vC,KAAAoY,IAAAK,KAAAL,GAEApY,MAIAqrE,cAAA,SAAAC,GAEAtrE,KAAAurE,WAEA,QAAA1xE,GAAA,EAAA2xE,EAAAF,EAAAxxE,OAAsCD,EAAA2xE,EAAQ3xE,IAE9CmG,KAAAyrE,cAAAH,EAAAzxE,GAIA,OAAAmG,OAIA0rE,qBAAA,WAEA,GAAAtI,GAAA,GAAAvvD,GAAA+6C,OAEA,iBAAAJ,EAAAxlB,GAEA,GAAA2iC,GAAAvI,EAAA3qD,KAAAuwB,GAAAmgB,eAAA,GAIA,OAHAnpD,MAAA0vC,IAAAj3B,KAAA+1C,GAAA/E,IAAAkiB,GACA3rE,KAAAoY,IAAAK,KAAA+1C,GAAAz4C,IAAA41D,GAEA3rE,SAMAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAmzD,GAKA,MAHA5rE,MAAA0vC,IAAAj3B,KAAAmzD,EAAAl8B,KACA1vC,KAAAoY,IAAAK,KAAAmzD,EAAAxzD,KAEApY,MAIAurE,UAAA,WAKA,MAHAvrE,MAAA0vC,IAAAzmC,EAAAjJ,KAAA0vC,IAAA7mC,EAAAqY,IACAlhB,KAAAoY,IAAAnP,EAAAjJ,KAAAoY,IAAAvP,IAAAqY,KAEAlhB,MAIA6rE,MAAA,WAIA,MAAA7rE,MAAAoY,IAAAnP,EAAAjJ,KAAA0vC,IAAAzmC,GAAAjJ,KAAAoY,IAAAvP,EAAA7I,KAAA0vC,IAAA7mC,GAIA2lD,OAAA,SAAAgJ,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA+6C,OACA,OAAAp1D,GAAAyrE,WAAAjlE,KAAA0vC,IAAA1vC,KAAAoY,KAAA+wC,eAAA,KAIAngB,KAAA,SAAAwuB,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA+6C,OACA,OAAAp1D,GAAA0zD,WAAAltD,KAAAoY,IAAApY,KAAA0vC,MAIA+7B,cAAA,SAAAV,GAKA,MAHA/qE,MAAA0vC,QAAAq7B,GACA/qE,KAAAoY,QAAA2yD,GAEA/qE,MAIA8rE,eAAA,SAAAnW,GAKA,MAHA31D,MAAA0vC,IAAA+Z,IAAAkM,GACA31D,KAAAoY,IAAArC,IAAA4/C,GAEA31D,MAIA+rE,eAAA,SAAAzG,GAKA,MAHAtlE,MAAA0vC,IAAAwoB,WAAAoN,GACAtlE,KAAAoY,IAAA8/C,UAAAoN,GAEAtlE,MAIAgsE,cAAA,SAAAjB,GAEA,QAAAA,EAAA9hE,EAAAjJ,KAAA0vC,IAAAzmC,GAAA8hE,EAAA9hE,EAAAjJ,KAAAoY,IAAAnP,GACA8hE,EAAAliE,EAAA7I,KAAA0vC,IAAA7mC,GAAAkiE,EAAAliE,EAAA7I,KAAAoY,IAAAvP,IAUAojE,YAAA,SAAAL,GAEA,MAAA5rE,MAAA0vC,IAAAzmC,GAAA2iE,EAAAl8B,IAAAzmC,GAAA2iE,EAAAxzD,IAAAnP,GAAAjJ,KAAAoY,IAAAnP,GACAjJ,KAAA0vC,IAAA7mC,GAAA+iE,EAAAl8B,IAAA7mC,GAAA+iE,EAAAxzD,IAAAvP,GAAA7I,KAAAoY,IAAAvP,GAUAqjE,aAAA,SAAAnB,EAAAvT,GAKA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA+6C,OAEA,OAAAp1D,GAAA0S,KACA6+D,EAAA9hE,EAAAjJ,KAAA0vC,IAAAzmC,IAAAjJ,KAAAoY,IAAAnP,EAAAjJ,KAAA0vC,IAAAzmC,IACA8hE,EAAAliE,EAAA7I,KAAA0vC,IAAA7mC,IAAA7I,KAAAoY,IAAAvP,EAAA7I,KAAA0vC,IAAA7mC,KAKAsjE,kBAAA,SAAAP,GAIA,QAAAA,EAAAxzD,IAAAnP,EAAAjJ,KAAA0vC,IAAAzmC,GAAA2iE,EAAAl8B,IAAAzmC,EAAAjJ,KAAAoY,IAAAnP,GACA2iE,EAAAxzD,IAAAvP,EAAA7I,KAAA0vC,IAAA7mC,GAAA+iE,EAAAl8B,IAAA7mC,EAAA7I,KAAAoY,IAAAvP,IAUAujE,WAAA,SAAArB,EAAAvT,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA+6C,OACA,OAAAp1D,GAAAif,KAAAsyD,GAAArU,MAAA12D,KAAA0vC,IAAA1vC,KAAAoY,MAIAi0D,gBAAA,WAEA,GAAAjJ,GAAA,GAAAvvD,GAAA+6C,OAEA,iBAAAmc,GAEA,GAAAuB,GAAAlJ,EAAA3qD,KAAAsyD,GAAArU,MAAA12D,KAAA0vC,IAAA1vC,KAAAoY,IACA,OAAAk0D,GAAA7iB,IAAAshB,GAAAjxE,aAMAyyE,UAAA,SAAAX,GAKA,MAHA5rE,MAAA0vC,IAAAt3B,IAAAwzD,EAAAl8B,KACA1vC,KAAAoY,IAAAs3B,IAAAk8B,EAAAxzD,KAEApY,MAIAwsE,MAAA,SAAAZ,GAKA,MAHA5rE,MAAA0vC,QAAAk8B,EAAAl8B,KACA1vC,KAAAoY,QAAAwzD,EAAAxzD,KAEApY,MAIAysE,UAAA,SAAAluD,GAKA,MAHAve,MAAA0vC,IAAA35B,IAAAwI,GACAve,KAAAoY,IAAArC,IAAAwI,GAEAve,MAIAq4D,OAAA,SAAAuT,GAEA,MAAAA,GAAAl8B,IAAA2oB,OAAAr4D,KAAA0vC,MAAAk8B,EAAAxzD,IAAAigD,OAAAr4D,KAAAoY,OAaAvE,EAAA64D,KAAA,SAAAh9B,EAAAt3B,GAEApY,KAAA0vC,IAAA32C,SAAA22C,IAAA,GAAA77B,GAAA8L,QAAAuB,aACAlhB,KAAAoY,IAAArf,SAAAqf,IAAA,GAAAvE,GAAA8L,UAAAuB,qBAIArN,EAAA64D,KAAAvwE,WAEAE,YAAAwX,EAAA64D,KAEAxgE,IAAA,SAAAwjC,EAAAt3B,GAKA,MAHApY,MAAA0vC,IAAAj3B,KAAAi3B,GACA1vC,KAAAoY,IAAAK,KAAAL,GAEApY,MAIAqrE,cAAA,SAAAC,GAEAtrE,KAAAurE,WAEA,QAAA1xE,GAAA,EAAA2xE,EAAAF,EAAAxxE,OAAsCD,EAAA2xE,EAAQ3xE,IAE9CmG,KAAAyrE,cAAAH,EAAAzxE,GAIA,OAAAmG,OAIA0rE,qBAAA,WAEA,GAAAtI,GAAA,GAAAvvD,GAAA8L,OAEA,iBAAA6uC,EAAAxlB,GAEA,GAAA2iC,GAAAvI,EAAA3qD,KAAAuwB,GAAAmgB,eAAA,GAKA,OAHAnpD,MAAA0vC,IAAAj3B,KAAA+1C,GAAA/E,IAAAkiB,GACA3rE,KAAAoY,IAAAK,KAAA+1C,GAAAz4C,IAAA41D,GAEA3rE,SAMA2sE,cAAA,WAKA,GAAAvJ,GAAA,GAAAvvD,GAAA8L,OAEA,iBAAAwC,GAEA,GAAA5F,GAAAvc,IA8CA,OA5CAmiB,GAAAyqD,sBAEA5sE,KAAAurE,YAEAppD,EAAA0qD,SAAA,SAAAvuE,GAEA,GAAAiY,GAAAjY,EAAAiY,QAEA,IAAAxd,SAAAwd,EAEA,GAAAA,YAAA1C,GAAA6L,SAIA,OAFAjB,GAAAlI,EAAAkI,SAEA5kB,EAAA,EAAA2xE,EAAA/sD,EAAA3kB,OAA4CD,EAAA2xE,EAAQ3xE,IAEpDupE,EAAA3qD,KAAAgG,EAAA5kB,IAEAupE,EAAAwD,aAAAtoE,EAAAopE,aAEAnrD,EAAAkvD,cAAArI,OAIM,IAAA7sD,YAAA1C,GAAA2K,gBAAAzlB,SAAAwd,EAAAu2D,WAAAj3D,SAIN,OAFAk3D,GAAAx2D,EAAAu2D,WAAAj3D,SAAA8F,MAEA9hB,EAAA,EAAA2xE,EAAAuB,EAAAjzE,OAA6CD,EAAA2xE,EAAQ3xE,GAAA,EAErDupE,EAAAl3D,IAAA6gE,EAAAlzE,GAAAkzE,EAAAlzE,EAAA,GAAAkzE,EAAAlzE,EAAA,IAEAupE,EAAAwD,aAAAtoE,EAAAopE,aAEAnrD,EAAAkvD,cAAArI,KAUApjE,SAMAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAmzD,GAKA,MAHA5rE,MAAA0vC,IAAAj3B,KAAAmzD,EAAAl8B,KACA1vC,KAAAoY,IAAAK,KAAAmzD,EAAAxzD,KAEApY,MAIAurE,UAAA,WAKA,MAHAvrE,MAAA0vC,IAAAzmC,EAAAjJ,KAAA0vC,IAAA7mC,EAAA7I,KAAA0vC,IAAAnlC,EAAA2W,IACAlhB,KAAAoY,IAAAnP,EAAAjJ,KAAAoY,IAAAvP,EAAA7I,KAAAoY,IAAA7N,IAAA2W,KAEAlhB,MAIA6rE,MAAA,WAIA,MAAA7rE,MAAAoY,IAAAnP,EAAAjJ,KAAA0vC,IAAAzmC,GAAAjJ,KAAAoY,IAAAvP,EAAA7I,KAAA0vC,IAAA7mC,GAAA7I,KAAAoY,IAAA7N,EAAAvK,KAAA0vC,IAAAnlC,GAIAikD,OAAA,SAAAgJ,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OACA,OAAAnmB,GAAAyrE,WAAAjlE,KAAA0vC,IAAA1vC,KAAAoY,KAAA+wC,eAAA,KAIAngB,KAAA,SAAAwuB,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OACA,OAAAnmB,GAAA0zD,WAAAltD,KAAAoY,IAAApY,KAAA0vC,MAIA+7B,cAAA,SAAAV,GAKA,MAHA/qE,MAAA0vC,QAAAq7B,GACA/qE,KAAAoY,QAAA2yD,GAEA/qE,MAIA8rE,eAAA,SAAAnW,GAKA,MAHA31D,MAAA0vC,IAAA+Z,IAAAkM,GACA31D,KAAAoY,IAAArC,IAAA4/C,GAEA31D,MAIA+rE,eAAA,SAAAzG,GAKA,MAHAtlE,MAAA0vC,IAAAwoB,WAAAoN,GACAtlE,KAAAoY,IAAA8/C,UAAAoN,GAEAtlE,MAIAgsE,cAAA,SAAAjB,GAEA,QAAAA,EAAA9hE,EAAAjJ,KAAA0vC,IAAAzmC,GAAA8hE,EAAA9hE,EAAAjJ,KAAAoY,IAAAnP,GACA8hE,EAAAliE,EAAA7I,KAAA0vC,IAAA7mC,GAAAkiE,EAAAliE,EAAA7I,KAAAoY,IAAAvP,GACAkiE,EAAAxgE,EAAAvK,KAAA0vC,IAAAnlC,GAAAwgE,EAAAxgE,EAAAvK,KAAAoY,IAAA7N,IAUA0hE,YAAA,SAAAL,GAEA,MAAA5rE,MAAA0vC,IAAAzmC,GAAA2iE,EAAAl8B,IAAAzmC,GAAA2iE,EAAAxzD,IAAAnP,GAAAjJ,KAAAoY,IAAAnP,GACAjJ,KAAA0vC,IAAA7mC,GAAA+iE,EAAAl8B,IAAA7mC,GAAA+iE,EAAAxzD,IAAAvP,GAAA7I,KAAAoY,IAAAvP,GACA7I,KAAA0vC,IAAAnlC,GAAAqhE,EAAAl8B,IAAAnlC,GAAAqhE,EAAAxzD,IAAA7N,GAAAvK,KAAAoY,IAAA7N,GAUA2hE,aAAA,SAAAnB,EAAAvT,GAKA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OAEA,OAAAnmB,GAAA0S,KACA6+D,EAAA9hE,EAAAjJ,KAAA0vC,IAAAzmC,IAAAjJ,KAAAoY,IAAAnP,EAAAjJ,KAAA0vC,IAAAzmC,IACA8hE,EAAAliE,EAAA7I,KAAA0vC,IAAA7mC,IAAA7I,KAAAoY,IAAAvP,EAAA7I,KAAA0vC,IAAA7mC,IACAkiE,EAAAxgE,EAAAvK,KAAA0vC,IAAAnlC,IAAAvK,KAAAoY,IAAA7N,EAAAvK,KAAA0vC,IAAAnlC,KAKA4hE,kBAAA,SAAAP,GAIA,QAAAA,EAAAxzD,IAAAnP,EAAAjJ,KAAA0vC,IAAAzmC,GAAA2iE,EAAAl8B,IAAAzmC,EAAAjJ,KAAAoY,IAAAnP,GACA2iE,EAAAxzD,IAAAvP,EAAA7I,KAAA0vC,IAAA7mC,GAAA+iE,EAAAl8B,IAAA7mC,EAAA7I,KAAAoY,IAAAvP,GACA+iE,EAAAxzD,IAAA7N,EAAAvK,KAAA0vC,IAAAnlC,GAAAqhE,EAAAl8B,IAAAnlC,EAAAvK,KAAAoY,IAAA7N,IAUA6hE,WAAA,SAAArB,EAAAvT,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OACA,OAAAnmB,GAAAif,KAAAsyD,GAAArU,MAAA12D,KAAA0vC,IAAA1vC,KAAAoY,MAIAi0D,gBAAA,WAEA,GAAAjJ,GAAA,GAAAvvD,GAAA8L,OAEA,iBAAAorD,GAEA,GAAAuB,GAAAlJ,EAAA3qD,KAAAsyD,GAAArU,MAAA12D,KAAA0vC,IAAA1vC,KAAAoY,IACA,OAAAk0D,GAAA7iB,IAAAshB,GAAAjxE,aAMAkzE,kBAAA,WAEA,GAAA5J,GAAA,GAAAvvD,GAAA8L,OAEA,iBAAA63C,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAAo5D,MAKA,OAHAzzE,GAAAg1D,OAAAxuD,KAAAwuD,SACAh1D,EAAAwxD,OAAA,GAAAhrD,KAAAgpC,KAAAo6B,GAAAtpE,SAEAN,MAMA+yE,UAAA,SAAAX,GAKA,MAHA5rE,MAAA0vC,IAAAt3B,IAAAwzD,EAAAl8B,KACA1vC,KAAAoY,IAAAs3B,IAAAk8B,EAAAxzD,KAEApY,MAIAwsE,MAAA,SAAAZ,GAKA,MAHA5rE,MAAA0vC,QAAAk8B,EAAAl8B,KACA1vC,KAAAoY,QAAAwzD,EAAAxzD,KAEApY,MAIA4mE,aAAA,WAEA,GAAA0E,IACA,GAAAz3D,GAAA8L,QACA,GAAA9L,GAAA8L,QACA,GAAA9L,GAAA8L,QACA,GAAA9L,GAAA8L,QACA,GAAA9L,GAAA8L,QACA,GAAA9L,GAAA8L,QACA,GAAA9L,GAAA8L,QACA,GAAA9L,GAAA8L,QAGA,iBAAAspC,GAeA,MAZAqiB,GAAA,GAAAp/D,IAAAlM,KAAA0vC,IAAAzmC,EAAAjJ,KAAA0vC,IAAA7mC,EAAA7I,KAAA0vC,IAAAnlC,GAAAq8D,aAAA3d,GACAqiB,EAAA,GAAAp/D,IAAAlM,KAAA0vC,IAAAzmC,EAAAjJ,KAAA0vC,IAAA7mC,EAAA7I,KAAAoY,IAAA7N,GAAAq8D,aAAA3d,GACAqiB,EAAA,GAAAp/D,IAAAlM,KAAA0vC,IAAAzmC,EAAAjJ,KAAAoY,IAAAvP,EAAA7I,KAAA0vC,IAAAnlC,GAAAq8D,aAAA3d,GACAqiB,EAAA,GAAAp/D,IAAAlM,KAAA0vC,IAAAzmC,EAAAjJ,KAAAoY,IAAAvP,EAAA7I,KAAAoY,IAAA7N,GAAAq8D,aAAA3d,GACAqiB,EAAA,GAAAp/D,IAAAlM,KAAAoY,IAAAnP,EAAAjJ,KAAA0vC,IAAA7mC,EAAA7I,KAAA0vC,IAAAnlC,GAAAq8D,aAAA3d,GACAqiB,EAAA,GAAAp/D,IAAAlM,KAAAoY,IAAAnP,EAAAjJ,KAAA0vC,IAAA7mC,EAAA7I,KAAAoY,IAAA7N,GAAAq8D,aAAA3d,GACAqiB,EAAA,GAAAp/D,IAAAlM,KAAAoY,IAAAnP,EAAAjJ,KAAAoY,IAAAvP,EAAA7I,KAAA0vC,IAAAnlC,GAAAq8D,aAAA3d,GACAqiB,EAAA,GAAAp/D,IAAAlM,KAAAoY,IAAAnP,EAAAjJ,KAAAoY,IAAAvP,EAAA7I,KAAAoY,IAAA7N,GAAAq8D,aAAA3d,GAEAjpD,KAAAurE,YACAvrE,KAAAqrE,cAAAC,GAEAtrE,SAMAysE,UAAA,SAAAluD,GAKA,MAHAve,MAAA0vC,IAAA35B,IAAAwI,GACAve,KAAAoY,IAAArC,IAAAwI,GAEAve,MAIAq4D,OAAA,SAAAuT,GAEA,MAAAA,GAAAl8B,IAAA2oB,OAAAr4D,KAAA0vC,MAAAk8B,EAAAxzD,IAAAigD,OAAAr4D,KAAAoY,OAcAvE,EAAAq5D,QAAA,WAEAltE,KAAAkpD,SAAA,GAAA9qC,eAEA,MACA,MACA,QAIA7e,UAAAzF,OAAA,GAEA0J,QAAAC,MAAA,kFAMAoQ,EAAAq5D,QAAA/wE,WAEAE,YAAAwX,EAAAq5D,QAEAhhE,IAAA,SAAAihE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAEA,GAAAr6C,GAAAtzB,KAAAkpD,QAMA,OAJA51B,GAAA,GAAA65C,EAAgB75C,EAAA,GAAA85C,EAAe95C,EAAA,GAAA+5C,EAC/B/5C,EAAA,GAAAg6C,EAAgBh6C,EAAA,GAAAi6C,EAAej6C,EAAA,GAAAk6C,EAC/Bl6C,EAAA,GAAAm6C,EAAgBn6C,EAAA,GAAAo6C,EAAep6C,EAAA,GAAAq6C,EAE/B3tE,MAIA4tE,SAAA,WAUA,MARA5tE,MAAAkM,IAEA,MACA,MACA,OAIAlM,MAIAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAi8D,UAAAt4D,KAAAkpD,WAIAzwC,KAAA,SAAAnhB,GAEA,GAAAu7B,GAAAv7B,EAAA4xD,QAUA,OARAlpD,MAAAkM,IAEA2mB,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAIA7yB,MAIAokE,gBAAA,SAAAzO,GAGA,MADAnyD,SAAAwmD,KAAA,kGACA2L,EAAAgR,aAAA3mE,OAIA6tE,qBAAA,SAAAnlE,GAGA,MADAlF,SAAAwmD,KAAA,6GACAhqD,KAAA8tE,oBAAAplE,IAIAolE,oBAAA,WAEA,GAAA1K,EAEA,iBAAAznD,EAAA4C,EAAAzkB,GAEAf,SAAAqqE,MAAA,GAAAvvD,GAAA8L,SACA5mB,SAAAwlB,MAAA,GACAxlB,SAAAe,MAAA6hB,EAAA7hB,OAEA,QAAAD,GAAA,EAAAk0E,EAAAxvD,EAA+B1kB,EAAAC,EAAYD,GAAA,EAAAk0E,GAAA,EAE3C3K,EAAA9K,UAAA38C,EAAAoyD,GACA3K,EAAAuD,aAAA3mE,MACAojE,EAAA5d,QAAA7pC,EAAAoyD,EAIA,OAAApyD,OAMAqyD,cAAA,WAEA,GAAA5K,EAEA,iBAAAtmD,EAAAyB,EAAAzkB,GAEAf,SAAAqqE,MAAA,GAAAvvD,GAAA8L,SACA5mB,SAAAwlB,MAAA,GACAxlB,SAAAe,MAAAgjB,EAAAhjB,OAAAgjB,EAAAwpD,SAEA,QAAAzsE,GAAA,EAAAk0E,EAAAxvD,EAA+B1kB,EAAAC,EAAYD,IAAAk0E,IAE3C3K,EAAAn6D,EAAA6T,EAAAmxD,KAAAF,GACA3K,EAAAv6D,EAAAiU,EAAAoxD,KAAAH,GACA3K,EAAA74D,EAAAuS,EAAAqxD,KAAAJ,GAEA3K,EAAAuD,aAAA3mE,MAEA8c,EAAAsxD,OAAAhL,EAAAn6D,EAAAm6D,EAAAv6D,EAAAu6D,EAAA74D,EAIA,OAAAuS,OAMAqsC,eAAA,SAAA9lD,GAEA,GAAAiwB,GAAAtzB,KAAAkpD,QAMA,OAJA51B,GAAA,IAAAjwB,EAAeiwB,EAAA,IAAAjwB,EAAciwB,EAAA,IAAAjwB,EAC7BiwB,EAAA,IAAAjwB,EAAeiwB,EAAA,IAAAjwB,EAAciwB,EAAA,IAAAjwB,EAC7BiwB,EAAA,IAAAjwB,EAAeiwB,EAAA,IAAAjwB,EAAciwB,EAAA,IAAAjwB,EAE7BrD,MAIAquE,YAAA,WAEA,GAAA/6C,GAAAtzB,KAAAkpD,SAEAxgD,EAAA4qB,EAAA,GAAAvqB,EAAAuqB,EAAA,GAAA/7B,EAAA+7B,EAAA,GACA7qB,EAAA6qB,EAAA,GAAAxyB,EAAAwyB,EAAA,GAAA5pB,EAAA4pB,EAAA,GACA1qB,EAAA0qB,EAAA,GAAAlrB,EAAAkrB,EAAA,GAAAz5B,EAAAy5B,EAAA,EAEA,OAAA5qB,GAAA5H,EAAAjH,EAAA6O,EAAAgB,EAAAtB,EAAAW,EAAAN,EAAA5O,EAAAkP,EAAAW,EAAAd,EAAArR,EAAAkR,EAAAL,EAAA7Q,EAAAuJ,EAAA8H,GAIA6+D,WAAA,SAAAxe,EAAAqlB,GAKA,GAAAz7C,GAAAo2B,EAAAC,SACA51B,EAAAtzB,KAAAkpD,QAEA51B,GAAA,GAAAT,EAAA,IAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAS,EAAA,IAAAT,EAAA,IAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAS,EAAA,GAAAT,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAS,EAAA,IAAAT,EAAA,IAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAS,EAAA,GAAAT,EAAA,IAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAS,EAAA,IAAAT,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAS,EAAA,GAAAT,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAS,EAAA,IAAAT,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAS,EAAA,GAAAT,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,EAEA,IAAA07C,GAAA17C,EAAA,GAAAS,EAAA,GAAAT,EAAA,GAAAS,EAAA,GAAAT,EAAA,GAAAS,EAAA,EAIA,QAAAi7C,EAAA,CAEA,GAAAC,GAAA,6DAEA,IAAAF,EAEA,SAAA9tD,OAAAguD,EAUA,OANAhrE,SAAAwmD,KAAAwkB,GAIAxuE,KAAA4tE,WAEA5tE,KAMA,MAFAA,MAAAmpD,eAAA,EAAAolB,GAEAvuE,MAIAyuE,UAAA,WAEA,GAAAC,GAAAp3E,EAAA0I,KAAAkpD,QAMA,OAJAwlB,GAAAp3E,EAAA,GAAeA,EAAA,GAAAA,EAAA,GAAiBA,EAAA,GAAAo3E,EAChCA,EAAAp3E,EAAA,GAAeA,EAAA,GAAAA,EAAA,GAAiBA,EAAA,GAAAo3E,EAChCA,EAAAp3E,EAAA,GAAeA,EAAA,GAAAA,EAAA,GAAiBA,EAAA,GAAAo3E,EAEhC1uE,MAIA2uE,qBAAA,SAAAhzD,EAAA4C,GAEA,GAAA+U,GAAAtzB,KAAAkpD,QAcA,OAZAvtC,GAAA4C,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GAEA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GAEA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GAEA3X,GAIAizD,gBAAA,SAAAt3E,GAMA,MAFA0I,MAAAynE,WAAAnwE,GAAAm3E,YAEAzuE,MAIA6uE,mBAAA,SAAAxlE,GAEA,GAAA/R,GAAA0I,KAAAkpD,QAYA,OAVA7/C,GAAA,GAAA/R,EAAA,GACA+R,EAAA,GAAA/R,EAAA,GACA+R,EAAA,GAAA/R,EAAA,GACA+R,EAAA,GAAA/R,EAAA,GACA+R,EAAA,GAAA/R,EAAA,GACA+R,EAAA,GAAA/R,EAAA,GACA+R,EAAA,GAAA/R,EAAA,GACA+R,EAAA,GAAA/R,EAAA,GACA+R,EAAA,GAAA/R,EAAA,GAEA0I,MAIAs4D,UAAA,SAAA38C,GAIA,MAFA3b,MAAAkpD,SAAAh9C,IAAAyP,GAEA3b,MAIAwlD,QAAA,WAEA,GAAAlyB,GAAAtzB,KAAAkpD,QAEA,QACA51B,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,MAsBAzf,EAAAyzD,QAAA,WAEAtnE,KAAAkpD,SAAA,GAAA9qC,eAEA,QACA,QACA,QACA,UAIA7e,UAAAzF,OAAA,GAEA0J,QAAAC,MAAA,kFAMAoQ,EAAAyzD,QAAAnrE,WAEAE,YAAAwX,EAAAyzD,QAEAp7D,IAAA,SAAAihE,EAAAC,EAAAC,EAAAyB,EAAAxB,EAAAC,EAAAC,EAAAuB,EAAAtB,EAAAC,EAAAC,EAAAqB,EAAAC,EAAAC,EAAAC,EAAAC,GAEA,GAAA97C,GAAAtzB,KAAAkpD,QAOA,OALA51B,GAAA,GAAA65C,EAAgB75C,EAAA,GAAA85C,EAAe95C,EAAA,GAAA+5C,EAAe/5C,EAAA,IAAAw7C,EAC9Cx7C,EAAA,GAAAg6C,EAAgBh6C,EAAA,GAAAi6C,EAAej6C,EAAA,GAAAk6C,EAAel6C,EAAA,IAAAy7C,EAC9Cz7C,EAAA,GAAAm6C,EAAgBn6C,EAAA,GAAAo6C,EAAep6C,EAAA,IAAAq6C,EAAgBr6C,EAAA,IAAA07C,EAC/C17C,EAAA,GAAA27C,EAAgB37C,EAAA,GAAA47C,EAAe57C,EAAA,IAAA67C,EAAgB77C,EAAA,IAAA87C,EAE/CpvE,MAIA4tE,SAAA,WAWA,MATA5tE,MAAAkM,IAEA,QACA,QACA,QACA;AAIAlM,MAIAwpD,MAAA,WAEA,UAAA31C,GAAAyzD,SAAAhP,UAAAt4D,KAAAkpD,WAIAzwC,KAAA,SAAAnhB,GAIA,MAFA0I,MAAAkpD,SAAAh9C,IAAA5U,EAAA4xD,UAEAlpD,MAIAqvE,gBAAA,SAAA/3E,GAGA,MADAkM,SAAAwmD,KAAA,0EACAhqD,KAAAsvE,aAAAh4E,IAIAg4E,aAAA,SAAAh4E,GAEA,GAAAg8B,GAAAtzB,KAAAkpD,SACAr2B,EAAAv7B,EAAA4xD,QAMA,OAJA51B,GAAA,IAAAT,EAAA,IACAS,EAAA,IAAAT,EAAA,IACAS,EAAA,IAAAT,EAAA,IAEA7yB,MAIAuvE,aAAA,SAAAC,EAAAC,EAAAC,GAEA,GAAAp8C,GAAAtzB,KAAAkpD,QAMA,OAJAsmB,GAAAtjE,IAAAonB,EAAA,GAAAA,EAAA,GAAAA,EAAA,IACAm8C,EAAAvjE,IAAAonB,EAAA,GAAAA,EAAA,GAAAA,EAAA,IACAo8C,EAAAxjE,IAAAonB,EAAA,GAAAA,EAAA,GAAAA,EAAA,KAEAtzB,MAIA2vE,UAAA,SAAAH,EAAAC,EAAAC,GASA,MAPA1vE,MAAAkM,IACAsjE,EAAAvmE,EAAAwmE,EAAAxmE,EAAAymE,EAAAzmE,EAAA,EACAumE,EAAA3mE,EAAA4mE,EAAA5mE,EAAA6mE,EAAA7mE,EAAA,EACA2mE,EAAAjlE,EAAAklE,EAAAllE,EAAAmlE,EAAAnlE,EAAA,EACA,SAGAvK,MAIA4vE,gBAAA,WAEA,GAAAxM,EAEA,iBAAA9rE,GAEAyB,SAAAqqE,MAAA,GAAAvvD,GAAA8L,QAEA,IAAA2T,GAAAtzB,KAAAkpD,SACAr2B,EAAAv7B,EAAA4xD,SAEA2mB,EAAA,EAAAzM,EAAAl3D,IAAA2mB,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAAA/4B,SACAg2E,EAAA,EAAA1M,EAAAl3D,IAAA2mB,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAAA/4B,SACAi2E,EAAA,EAAA3M,EAAAl3D,IAAA2mB,EAAA,GAAAA,EAAA,GAAAA,EAAA,KAAA/4B,QAcA,OAZAw5B,GAAA,GAAAT,EAAA,GAAAg9C,EACAv8C,EAAA,GAAAT,EAAA,GAAAg9C,EACAv8C,EAAA,GAAAT,EAAA,GAAAg9C,EAEAv8C,EAAA,GAAAT,EAAA,GAAAi9C,EACAx8C,EAAA,GAAAT,EAAA,GAAAi9C,EACAx8C,EAAA,GAAAT,EAAA,GAAAi9C,EAEAx8C,EAAA,GAAAT,EAAA,GAAAk9C,EACAz8C,EAAA,GAAAT,EAAA,GAAAk9C,EACAz8C,EAAA,IAAAT,EAAA,IAAAk9C,EAEA/vE,SAMAgwE,sBAAA,SAAAjO,GAEAA,YAAAluD,GAAAmuD,UAEAx+D,QAAAC,MAAA,uGAIA,IAAA6vB,GAAAtzB,KAAAkpD,SAEAjgD,EAAA84D,EAAA94D,EAAAJ,EAAAk5D,EAAAl5D,EAAA0B,EAAAw3D,EAAAx3D,EACA7B,EAAAsQ,KAAAkyC,IAAAjiD,GAAAF,EAAAiQ,KAAAiyC,IAAAhiD,GACA1R,EAAAyhB,KAAAkyC,IAAAriD,GAAAJ,EAAAuQ,KAAAiyC,IAAApiD,GACA/H,EAAAkY,KAAAkyC,IAAA3gD,GAAAb,EAAAsP,KAAAiyC,IAAA1gD,EAEA,YAAAw3D,EAAA7zD,MAAA,CAEA,GAAAokB,GAAA5pB,EAAA5H,EAAAo1B,EAAAxtB,EAAAgB,EAAAoyC,EAAA/yC,EAAAjI,EAAAs1B,EAAArtB,EAAAW,CAEA4pB,GAAA,GAAA/7B,EAAAuJ,EACAwyB,EAAA,IAAA/7B,EAAAmS,EACA4pB,EAAA,GAAA7qB,EAEA6qB,EAAA,GAAA4C,EAAA4lB,EAAArzC,EACA6qB,EAAA,GAAAhB,EAAA8D,EAAA3tB,EACA6qB,EAAA,IAAAvqB,EAAAxR,EAEA+7B,EAAA,GAAA8C,EAAA9D,EAAA7pB,EACA6qB,EAAA,GAAAwoB,EAAA5lB,EAAAztB,EACA6qB,EAAA,IAAA5qB,EAAAnR,MAEG,YAAAwqE,EAAA7zD,MAAA,CAEH,GAAAmqB,GAAA9gC,EAAAuJ,EAAAq1B,EAAA5+B,EAAAmS,EAAAipB,EAAAlqB,EAAA3H,EAAAw1B,EAAA7tB,EAAAiB,CAEA4pB,GAAA,GAAA+E,EAAA/B,EAAAvtB,EACAuqB,EAAA,GAAAX,EAAA5pB,EAAAotB,EACA7C,EAAA,GAAA5qB,EAAAD,EAEA6qB,EAAA,GAAA5qB,EAAAgB,EACA4pB,EAAA,GAAA5qB,EAAA5H,EACAwyB,EAAA,IAAAvqB,EAEAuqB,EAAA,GAAA6C,EAAAptB,EAAA4pB,EACAW,EAAA,GAAAgD,EAAA+B,EAAAtvB,EACAuqB,EAAA,IAAA5qB,EAAAnR,MAEG,YAAAwqE,EAAA7zD,MAAA,CAEH,GAAAmqB,GAAA9gC,EAAAuJ,EAAAq1B,EAAA5+B,EAAAmS,EAAAipB,EAAAlqB,EAAA3H,EAAAw1B,EAAA7tB,EAAAiB,CAEA4pB,GAAA,GAAA+E,EAAA/B,EAAAvtB,EACAuqB,EAAA,IAAA5qB,EAAAgB,EACA4pB,EAAA,GAAAX,EAAAwD,EAAAptB,EAEAuqB,EAAA,GAAA6C,EAAAxD,EAAA5pB,EACAuqB,EAAA,GAAA5qB,EAAA5H,EACAwyB,EAAA,GAAAgD,EAAA+B,EAAAtvB,EAEAuqB,EAAA,IAAA5qB,EAAAD,EACA6qB,EAAA,GAAAvqB,EACAuqB,EAAA,IAAA5qB,EAAAnR,MAEG,YAAAwqE,EAAA7zD,MAAA,CAEH,GAAAokB,GAAA5pB,EAAA5H,EAAAo1B,EAAAxtB,EAAAgB,EAAAoyC,EAAA/yC,EAAAjI,EAAAs1B,EAAArtB,EAAAW,CAEA4pB,GAAA,GAAA/7B,EAAAuJ,EACAwyB,EAAA,GAAAwoB,EAAArzC,EAAAytB,EACA5C,EAAA,GAAAhB,EAAA7pB,EAAA2tB,EAEA9C,EAAA,GAAA/7B,EAAAmS,EACA4pB,EAAA,GAAA8C,EAAA3tB,EAAA6pB,EACAgB,EAAA,GAAA4C,EAAAztB,EAAAqzC,EAEAxoB,EAAA,IAAA7qB,EACA6qB,EAAA,GAAAvqB,EAAAxR,EACA+7B,EAAA,IAAA5qB,EAAAnR,MAEG,YAAAwqE,EAAA7zD,MAAA,CAEH,GAAA+c,GAAAviB,EAAAnR,EAAAg4B,EAAA7mB,EAAAD,EAAAyiB,EAAAniB,EAAAxR,EAAAi4B,EAAAzmB,EAAAN,CAEA6qB,GAAA,GAAA/7B,EAAAuJ,EACAwyB,EAAA,GAAA9D,EAAAvE,EAAAvhB,EACA4pB,EAAA,GAAApI,EAAAxhB,EAAA6lB,EAEA+D,EAAA,GAAA5pB,EACA4pB,EAAA,GAAA5qB,EAAA5H,EACAwyB,EAAA,IAAAvqB,EAAAjI,EAEAwyB,EAAA,IAAA7qB,EAAA3H,EACAwyB,EAAA,GAAA/D,EAAA7lB,EAAAwhB,EACAoI,EAAA,IAAArI,EAAAuE,EAAA9lB,MAEG,YAAAq4D,EAAA7zD,MAAA,CAEH,GAAA+c,GAAAviB,EAAAnR,EAAAg4B,EAAA7mB,EAAAD,EAAAyiB,EAAAniB,EAAAxR,EAAAi4B,EAAAzmB,EAAAN,CAEA6qB,GAAA,GAAA/7B,EAAAuJ,EACAwyB,EAAA,IAAA5pB,EACA4pB,EAAA,GAAA7qB,EAAA3H,EAEAwyB,EAAA,GAAArI,EAAAvhB,EAAA8lB,EACA8D,EAAA,GAAA5qB,EAAA5H,EACAwyB,EAAA,GAAA/D,EAAA7lB,EAAAwhB,EAEAoI,EAAA,GAAApI,EAAAxhB,EAAA6lB,EACA+D,EAAA,GAAAvqB,EAAAjI,EACAwyB,EAAA,IAAA9D,EAAA9lB,EAAAuhB,EAeA,MAVAqI,GAAA,KACAA,EAAA,KACAA,EAAA,MAGAA,EAAA,MACAA,EAAA,MACAA,EAAA,MACAA,EAAA,MAEAtzB,MAIAiwE,0BAAA,SAAAtnE,GAIA,MAFAnF,SAAAwmD,KAAA,kGAEAhqD,KAAAoqE,2BAAAzhE,IAIAyhE,2BAAA,SAAAzhE,GAEA,GAAA2qB,GAAAtzB,KAAAkpD,SAEAjgD,EAAAN,EAAAM,EAAAJ,EAAAF,EAAAE,EAAA0B,EAAA5B,EAAA4B,EAAAI,EAAAhC,EAAAgC,EACAulE,EAAAjnE,IAAAknE,EAAAtnE,IAAAunE,EAAA7lE,IACAm/D,EAAAzgE,EAAAinE,EAAA7tB,EAAAp5C,EAAAknE,EAAAtG,EAAA5gE,EAAAmnE,EACAzG,EAAA9gE,EAAAsnE,EAAArG,EAAAjhE,EAAAunE,EAAAxG,EAAAr/D,EAAA6lE,EACAC,EAAA1lE,EAAAulE,EAAAI,EAAA3lE,EAAAwlE,EAAAI,EAAA5lE,EAAAylE,CAyBA,OAvBA98C,GAAA,MAAAq2C,EAAAC,GACAt2C,EAAA,GAAA+uB,EAAAkuB,EACAj9C,EAAA,GAAAu2C,EAAAyG,EAEAh9C,EAAA,GAAA+uB,EAAAkuB,EACAj9C,EAAA,MAAAo2C,EAAAE,GACAt2C,EAAA,GAAAw2C,EAAAuG,EAEA/8C,EAAA,GAAAu2C,EAAAyG,EACAh9C,EAAA,GAAAw2C,EAAAuG,EACA/8C,EAAA,OAAAo2C,EAAAC,GAGAr2C,EAAA,KACAA,EAAA,KACAA,EAAA,MAGAA,EAAA,MACAA,EAAA,MACAA,EAAA,MACAA,EAAA,MAEAtzB,MAIAiZ,OAAA,WAEA,GAAAhQ,GAAAJ,EAAA0B,CAEA,iBAAAimE,EAAAxtE,EAAAwnD,GAEAzxD,SAAAkQ,MAAA,GAAA4K,GAAA8L,SACA5mB,SAAA8P,MAAA,GAAAgL,GAAA8L,SACA5mB,SAAAwR,MAAA,GAAAsJ,GAAA8L,QAEA,IAAA2T,GAAAtzB,KAAAkpD,QA0BA,OAxBA3+C,GAAA2iD,WAAAsjB,EAAAxtE,GAAA8S,YAEA,IAAAvL,EAAAzQ,WAEAyQ,IAAA,GAIAtB,EAAAu6D,aAAAhZ,EAAAjgD,GAAAuL,YAEA,IAAA7M,EAAAnP,WAEAyQ,EAAAtB,GAAA,KACAA,EAAAu6D,aAAAhZ,EAAAjgD,GAAAuL,aAIAjN,EAAA26D,aAAAj5D,EAAAtB,GAGAqqB,EAAA,GAAArqB,IAAiBqqB,EAAA,GAAAzqB,EAAAI,EAAeqqB,EAAA,GAAA/oB,EAAAtB,EAChCqqB,EAAA,GAAArqB,EAAAJ,EAAiByqB,EAAA,GAAAzqB,IAAeyqB,EAAA,GAAA/oB,EAAA1B,EAChCyqB,EAAA,GAAArqB,EAAAsB,EAAiB+oB,EAAA,GAAAzqB,EAAA0B,EAAe+oB,EAAA,IAAA/oB,IAEhCvK,SAMAm4D,SAAA,SAAA7gE,EAAAgL,GAEA,MAAAvJ,UAAAuJ,GAEAkB,QAAAwmD,KAAA,oGACAhqD,KAAAunE,iBAAAjwE,EAAAgL,IAIAtC,KAAAunE,iBAAAvnE,KAAA1I,IAIAiwE,iBAAA,SAAA7+D,EAAAK,GAEA,GAAAupB,GAAA5pB,EAAAwgD,SACApN,EAAA/yC,EAAAmgD,SACA51B,EAAAtzB,KAAAkpD,SAEAunB,EAAAn+C,EAAA,GAAAo+C,EAAAp+C,EAAA,GAAAq+C,EAAAr+C,EAAA,GAAAs+C,EAAAt+C,EAAA,IACAu+C,EAAAv+C,EAAA,GAAAw+C,EAAAx+C,EAAA,GAAAy+C,EAAAz+C,EAAA,GAAA0+C,EAAA1+C,EAAA,IACA2+C,EAAA3+C,EAAA,GAAA4+C,EAAA5+C,EAAA,GAAA6+C,EAAA7+C,EAAA,IAAA8+C,EAAA9+C,EAAA,IACA++C,EAAA/+C,EAAA,GAAAg/C,EAAAh/C,EAAA,GAAAi/C,EAAAj/C,EAAA,IAAAk/C,EAAAl/C,EAAA,IAEAm/C,EAAA31B,EAAA,GAAA41B,EAAA51B,EAAA,GAAA61B,EAAA71B,EAAA,GAAA81B,EAAA91B,EAAA,IACA+1B,EAAA/1B,EAAA,GAAAg2B,EAAAh2B,EAAA,GAAAi2B,EAAAj2B,EAAA,GAAAk2B,EAAAl2B,EAAA,IACAm2B,EAAAn2B,EAAA,GAAAo2B,EAAAp2B,EAAA,GAAAq2B,EAAAr2B,EAAA,IAAAs2B,EAAAt2B,EAAA,IACAu2B,EAAAv2B,EAAA,GAAAw2B,EAAAx2B,EAAA,GAAAy2B,EAAAz2B,EAAA,IAAA02B,EAAA12B,EAAA,GAsBA,OApBAxoB,GAAA,GAAAm9C,EAAAgB,EAAAf,EAAAmB,EAAAlB,EAAAsB,EAAArB,EAAAyB,EACA/+C,EAAA,GAAAm9C,EAAAiB,EAAAhB,EAAAoB,EAAAnB,EAAAuB,EAAAtB,EAAA0B,EACAh/C,EAAA,GAAAm9C,EAAAkB,EAAAjB,EAAAqB,EAAApB,EAAAwB,EAAAvB,EAAA2B,EACAj/C,EAAA,IAAAm9C,EAAAmB,EAAAlB,EAAAsB,EAAArB,EAAAyB,EAAAxB,EAAA4B,EAEAl/C,EAAA,GAAAu9C,EAAAY,EAAAX,EAAAe,EAAAd,EAAAkB,EAAAjB,EAAAqB,EACA/+C,EAAA,GAAAu9C,EAAAa,EAAAZ,EAAAgB,EAAAf,EAAAmB,EAAAlB,EAAAsB,EACAh/C,EAAA,GAAAu9C,EAAAc,EAAAb,EAAAiB,EAAAhB,EAAAoB,EAAAnB,EAAAuB,EACAj/C,EAAA,IAAAu9C,EAAAe,EAAAd,EAAAkB,EAAAjB,EAAAqB,EAAApB,EAAAwB,EAEAl/C,EAAA,GAAA29C,EAAAQ,EAAAP,EAAAW,EAAAV,EAAAc,EAAAb,EAAAiB,EACA/+C,EAAA,GAAA29C,EAAAS,EAAAR,EAAAY,EAAAX,EAAAe,EAAAd,EAAAkB,EACAh/C,EAAA,IAAA29C,EAAAU,EAAAT,EAAAa,EAAAZ,EAAAgB,EAAAf,EAAAmB,EACAj/C,EAAA,IAAA29C,EAAAW,EAAAV,EAAAc,EAAAb,EAAAiB,EAAAhB,EAAAoB,EAEAl/C,EAAA,GAAA+9C,EAAAI,EAAAH,EAAAO,EAAAN,EAAAU,EAAAT,EAAAa,EACA/+C,EAAA,GAAA+9C,EAAAK,EAAAJ,EAAAQ,EAAAP,EAAAW,EAAAV,EAAAc,EACAh/C,EAAA,IAAA+9C,EAAAM,EAAAL,EAAAS,EAAAR,EAAAY,EAAAX,EAAAe,EACAj/C,EAAA,IAAA+9C,EAAAO,EAAAN,EAAAU,EAAAT,EAAAa,EAAAZ,EAAAgB,EAEAxyE,MAIAyyE,gBAAA,SAAA/pE,EAAAK,EAAAM,GAEA,GAAAiqB,GAAAtzB,KAAAkpD,QASA,OAPAlpD,MAAAunE,iBAAA7+D,EAAAK,GAEAM,EAAA,GAAAiqB,EAAA,GAAmBjqB,EAAA,GAAAiqB,EAAA,GAAkBjqB,EAAA,GAAAiqB,EAAA,GAAkBjqB,EAAA,GAAAiqB,EAAA,GACvDjqB,EAAA,GAAAiqB,EAAA,GAAmBjqB,EAAA,GAAAiqB,EAAA,GAAkBjqB,EAAA,GAAAiqB,EAAA,GAAkBjqB,EAAA,GAAAiqB,EAAA,GACvDjqB,EAAA,GAAAiqB,EAAA,GAAoBjqB,EAAA,GAAAiqB,EAAA,GAAmBjqB,EAAA,IAAAiqB,EAAA,IAAoBjqB,EAAA,IAAAiqB,EAAA,IAC3DjqB,EAAA,IAAAiqB,EAAA,IAAqBjqB,EAAA,IAAAiqB,EAAA,IAAoBjqB,EAAA,IAAAiqB,EAAA,IAAoBjqB,EAAA,IAAAiqB,EAAA,IAE7DtzB,MAIAmpD,eAAA,SAAA9lD,GAEA,GAAAiwB,GAAAtzB,KAAAkpD,QAOA,OALA51B,GAAA,IAAAjwB,EAAeiwB,EAAA,IAAAjwB,EAAciwB,EAAA,IAAAjwB,EAAciwB,EAAA,KAAAjwB,EAC3CiwB,EAAA,IAAAjwB,EAAeiwB,EAAA,IAAAjwB,EAAciwB,EAAA,IAAAjwB,EAAciwB,EAAA,KAAAjwB,EAC3CiwB,EAAA,IAAAjwB,EAAeiwB,EAAA,IAAAjwB,EAAciwB,EAAA,KAAAjwB,EAAeiwB,EAAA,KAAAjwB,EAC5CiwB,EAAA,IAAAjwB,EAAeiwB,EAAA,IAAAjwB,EAAciwB,EAAA,KAAAjwB,EAAeiwB,EAAA,KAAAjwB,EAE5CrD,MAIAokE,gBAAA,SAAAzO,GAGA,MADAnyD,SAAAwmD,KAAA,sIACA2L,EAAAkR,gBAAA7mE,OAIA0yE,gBAAA,SAAA/c,GAGA,MADAnyD,SAAAwmD,KAAA,kGACA2L,EAAAiR,aAAA5mE,OAIA6tE,qBAAA,SAAAnlE,GAGA,MADAlF,SAAAwmD,KAAA,6GACAhqD,KAAA8tE,oBAAAplE,IAIAolE,oBAAA,WAEA,GAAA1K,EAEA,iBAAAznD,EAAA4C,EAAAzkB,GAEAf,SAAAqqE,MAAA,GAAAvvD,GAAA8L,SACA5mB,SAAAwlB,MAAA,GACAxlB,SAAAe,MAAA6hB,EAAA7hB,OAEA,QAAAD,GAAA,EAAAk0E,EAAAxvD,EAA+B1kB,EAAAC,EAAYD,GAAA,EAAAk0E,GAAA,EAE3C3K,EAAA9K,UAAA38C,EAAAoyD,GACA3K,EAAAwD,aAAA5mE,MACAojE,EAAA5d,QAAA7pC,EAAAoyD,EAIA,OAAApyD,OAMAqyD,cAAA,WAEA,GAAA5K,EAEA,iBAAAtmD,EAAAyB,EAAAzkB,GAEAf,SAAAqqE,MAAA,GAAAvvD,GAAA8L,SACA5mB,SAAAwlB,MAAA,GACAxlB,SAAAe,MAAAgjB,EAAAhjB,OAAAgjB,EAAAwpD,SAEA,QAAAzsE,GAAA,EAAAk0E,EAAAxvD,EAA+B1kB,EAAAC,EAAYD,IAAAk0E,IAE3C3K,EAAAn6D,EAAA6T,EAAAmxD,KAAAF,GACA3K,EAAAv6D,EAAAiU,EAAAoxD,KAAAH,GACA3K,EAAA74D,EAAAuS,EAAAqxD,KAAAJ,GAEA3K,EAAAwD,aAAA5mE,MAEA8c,EAAAsxD,OAAAhL,EAAAn6D,EAAAm6D,EAAAv6D,EAAAu6D,EAAA74D,EAIA,OAAAuS,OAMA61D,WAAA,SAAA3pE,GAEAxF,QAAAwmD,KAAA,oGAEAhhD,EAAA2+D,mBAAA3nE,OAIA4yE,YAAA,SAAAjd,GAGA,MADAnyD,SAAAwmD,KAAA,8FACA2L,EAAAiR,aAAA5mE,OAIAquE,YAAA,WAEA,GAAA/6C,GAAAtzB,KAAAkpD,SAEAikB,EAAA75C,EAAA,GAAA85C,EAAA95C,EAAA,GAAA+5C,EAAA/5C,EAAA,GAAAw7C,EAAAx7C,EAAA,IACAg6C,EAAAh6C,EAAA,GAAAi6C,EAAAj6C,EAAA,GAAAk6C,EAAAl6C,EAAA,GAAAy7C,EAAAz7C,EAAA,IACAm6C,EAAAn6C,EAAA,GAAAo6C,EAAAp6C,EAAA,GAAAq6C,EAAAr6C,EAAA,IAAA07C,EAAA17C,EAAA,IACA27C,EAAA37C,EAAA,GAAA47C,EAAA57C,EAAA,GAAA67C,EAAA77C,EAAA,IAAA87C,EAAA97C,EAAA,GAKA,OACA27C,KACAH,EAAAtB,EAAAE,EACAL,EAAA0B,EAAArB,EACAoB,EAAAvB,EAAAI,EACAP,EAAA2B,EAAApB,EACAN,EAAAE,EAAAyB,EACA5B,EAAAI,EAAAwB,GAEAE,IACA/B,EAAAK,EAAAwB,EACA7B,EAAA4B,EAAApB,EACAmB,EAAAxB,EAAAK,EACAN,EAAAC,EAAA0B,EACA3B,EAAA0B,EAAAtB,EACAqB,EAAAtB,EAAAC,GAEA0B,IACAhC,EAAA4B,EAAArB,EACAP,EAAAI,EAAAyB,EACAF,EAAAxB,EAAAI,EACAN,EAAAE,EAAA0B,EACAF,EAAAvB,EAAAE,EACAL,EAAA2B,EAAAtB,GAEA2B,IACA/B,EAAAE,EAAAE,EACAN,EAAAK,EAAAE,EACAP,EAAAI,EAAAI,EACAN,EAAAC,EAAAI,EACAN,EAAAE,EAAAK,EACAP,EAAAI,EAAAC,IAOAgB,UAAA,WAEA,GACAC,GADAp7C,EAAAtzB,KAAAkpD,QAWA,OARAwlB,GAAAp7C,EAAA,GAAgBA,EAAA,GAAAA,EAAA,GAAmBA,EAAA,GAAAo7C,EACnCA,EAAAp7C,EAAA,GAAgBA,EAAA,GAAAA,EAAA,GAAmBA,EAAA,GAAAo7C,EACnCA,EAAAp7C,EAAA,GAAgBA,EAAA,GAAAA,EAAA,GAAmBA,EAAA,GAAAo7C,EAEnCA,EAAAp7C,EAAA,GAAgBA,EAAA,GAAAA,EAAA,IAAoBA,EAAA,IAAAo7C,EACpCA,EAAAp7C,EAAA,GAAgBA,EAAA,GAAAA,EAAA,IAAoBA,EAAA,IAAAo7C,EACpCA,EAAAp7C,EAAA,IAAiBA,EAAA,IAAAA,EAAA,IAAqBA,EAAA,IAAAo7C,EAEtC1uE,MAIA2uE,qBAAA,SAAAhzD,EAAA4C,GAEA,GAAA+U,GAAAtzB,KAAAkpD,QAsBA,OApBAvtC,GAAA4C,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GAEA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GAEA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,GAAA+U,EAAA,GACA3X,EAAA4C,EAAA,IAAA+U,EAAA,IACA3X,EAAA4C,EAAA,IAAA+U,EAAA,IAEA3X,EAAA4C,EAAA,IAAA+U,EAAA,IACA3X,EAAA4C,EAAA,IAAA+U,EAAA,IACA3X,EAAA4C,EAAA,IAAA+U,EAAA,IACA3X,EAAA4C,EAAA,IAAA+U,EAAA,IAEA3X,GAIA4mC,YAAA,WAEA,GAAA6gB,EAEA,mBAEArqE,SAAAqqE,MAAA,GAAAvvD,GAAA8L,SACAnc,QAAAwmD,KAAA,uGAEA,IAAA12B,GAAAtzB,KAAAkpD,QACA,OAAAka,GAAAl3D,IAAAonB,EAAA,IAAAA,EAAA,IAAAA,EAAA,SAMAu/C,YAAA,SAAA7pE,GAEA,GAAAsqB,GAAAtzB,KAAAkpD,QAMA,OAJA51B,GAAA,IAAAtqB,EAAAC,EACAqqB,EAAA,IAAAtqB,EAAAH,EACAyqB,EAAA,IAAAtqB,EAAAuB,EAEAvK,MAIAynE,WAAA,SAAAnwE,EAAAg3E,GAGA,GAAAh7C,GAAAtzB,KAAAkpD,SACAr2B,EAAAv7B,EAAA4xD,SAEAikB,EAAAt6C,EAAA,GAAAu6C,EAAAv6C,EAAA,GAAAw6C,EAAAx6C,EAAA,GAAAi8C,EAAAj8C,EAAA,IACAy6C,EAAAz6C,EAAA,GAAA06C,EAAA16C,EAAA,GAAA26C,EAAA36C,EAAA,GAAAk8C,EAAAl8C,EAAA,IACA46C,EAAA56C,EAAA,GAAA66C,EAAA76C,EAAA,GAAA86C,EAAA96C,EAAA,IAAAm8C,EAAAn8C,EAAA,IACAo8C,EAAAp8C,EAAA,GAAAq8C,EAAAr8C,EAAA,GAAAs8C,EAAAt8C,EAAA,IAAAu8C,EAAAv8C,EAAA,GAEAS,GAAA,GAAAk6C,EAAAwB,EAAAE,EAAAH,EAAApB,EAAAuB,EAAAH,EAAArB,EAAAyB,EAAA5B,EAAAyB,EAAAG,EAAA3B,EAAAE,EAAA0B,EAAA7B,EAAAI,EAAAyB,EACA97C,EAAA,GAAAw7C,EAAAnB,EAAAuB,EAAA7B,EAAA2B,EAAAE,EAAAJ,EAAApB,EAAAyB,EAAA/B,EAAA4B,EAAAG,EAAA9B,EAAAK,EAAA0B,EAAAhC,EAAAO,EAAAyB,EACA97C,EAAA,GAAA+5C,EAAA0B,EAAAG,EAAAJ,EAAAtB,EAAA0B,EAAAJ,EAAAvB,EAAA4B,EAAA/B,EAAA2B,EAAAI,EAAA9B,EAAAE,EAAA6B,EAAAhC,EAAAI,EAAA4B,EACA97C,EAAA,IAAAw7C,EAAAtB,EAAAE,EAAAL,EAAA0B,EAAArB,EAAAoB,EAAAvB,EAAAI,EAAAP,EAAA2B,EAAApB,EAAAN,EAAAE,EAAAyB,EAAA5B,EAAAI,EAAAwB,EACA17C,EAAA,GAAAy7C,EAAApB,EAAAsB,EAAAzB,EAAAwB,EAAAC,EAAAF,EAAAtB,EAAA0B,EAAA7B,EAAA0B,EAAAG,EAAA3B,EAAAC,EAAA2B,EAAA9B,EAAAK,EAAAyB,EACA97C,EAAA,GAAA+5C,EAAA2B,EAAAC,EAAAH,EAAAnB,EAAAsB,EAAAH,EAAArB,EAAA0B,EAAAhC,EAAA6B,EAAAG,EAAA9B,EAAAI,EAAA2B,EAAAjC,EAAAQ,EAAAyB,EACA97C,EAAA,GAAAw7C,EAAAtB,EAAAyB,EAAA5B,EAAA0B,EAAAE,EAAAH,EAAAxB,EAAA6B,EAAAhC,EAAA4B,EAAAI,EAAA9B,EAAAC,EAAA8B,EAAAjC,EAAAK,EAAA4B,EACA97C,EAAA,IAAA+5C,EAAA0B,EAAAtB,EAAAqB,EAAAtB,EAAAC,EAAAqB,EAAAxB,EAAAK,EAAAR,EAAA4B,EAAApB,EAAAN,EAAAC,EAAA0B,EAAA7B,EAAAK,EAAAwB,EACA17C,EAAA,GAAAi6C,EAAAyB,EAAAC,EAAAF,EAAArB,EAAAuB,EAAAF,EAAAtB,EAAAyB,EAAA5B,EAAA0B,EAAAE,EAAA3B,EAAAE,EAAA2B,EAAA9B,EAAAI,EAAA0B,EACA97C,EAAA,GAAAw7C,EAAApB,EAAAuB,EAAA7B,EAAA4B,EAAAC,EAAAH,EAAArB,EAAAyB,EAAA/B,EAAA6B,EAAAE,EAAA9B,EAAAK,EAAA2B,EAAAjC,EAAAO,EAAA0B,EACA97C,EAAA,IAAA85C,EAAA2B,EAAAE,EAAAH,EAAAvB,EAAA0B,EAAAH,EAAAxB,EAAA4B,EAAA/B,EAAA4B,EAAAG,EAAA9B,EAAAE,EAAA8B,EAAAjC,EAAAI,EAAA6B,EACA97C,EAAA,IAAAw7C,EAAAvB,EAAAE,EAAAL,EAAA2B,EAAAtB,EAAAqB,EAAAxB,EAAAI,EAAAP,EAAA4B,EAAArB,EAAAN,EAAAE,EAAA0B,EAAA7B,EAAAI,EAAAyB,EACA17C,EAAA,GAAAk6C,EAAAE,EAAAuB,EAAA1B,EAAAI,EAAAsB,EAAAzB,EAAAC,EAAAyB,EAAA5B,EAAAK,EAAAuB,EAAA3B,EAAAE,EAAA0B,EAAA7B,EAAAI,EAAAyB,EACA77C,EAAA,GAAA85C,EAAAO,EAAAsB,EAAA5B,EAAAK,EAAAuB,EAAA5B,EAAAI,EAAAyB,EAAA/B,EAAAQ,EAAAuB,EAAA9B,EAAAK,EAAA0B,EAAAhC,EAAAO,EAAAyB,EACA77C,EAAA,IAAA+5C,EAAAE,EAAA0B,EAAA7B,EAAAI,EAAAyB,EAAA5B,EAAAC,EAAA4B,EAAA/B,EAAAK,EAAA0B,EAAA9B,EAAAE,EAAA6B,EAAAhC,EAAAI,EAAA4B,EACA77C,EAAA,IAAA85C,EAAAI,EAAAC,EAAAJ,EAAAE,EAAAE,EAAAJ,EAAAC,EAAAI,EAAAP,EAAAK,EAAAE,EAAAN,EAAAE,EAAAK,EAAAR,EAAAI,EAAAI,CAEA,IAAAY,GAAApB,EAAA75C,EAAA,GAAAg6C,EAAAh6C,EAAA,GAAAm6C,EAAAn6C,EAAA,GAAA27C,EAAA37C,EAAA,GAEA,QAAAi7C,EAAA,CAEA,GAAAC,GAAA,mEAEA,IAAAF,EAEA,SAAA9tD,OAAAguD,EAUA,OANAhrE,SAAAwmD,KAAAwkB,GAIAxuE,KAAA4tE,WAEA5tE,KAMA,MAFAA,MAAAmpD,eAAA,EAAAolB,GAEAvuE,MAIAysE,UAAA,SAAAzjE,GAEAxF,QAAAC,MAAA,kDAIAqvE,QAAA,SAAAhqB,GAEAtlD,QAAAC,MAAA,gDAIAsvE,QAAA,SAAAjqB,GAEAtlD,QAAAC,MAAA,gDAIAuvE,QAAA,SAAAlqB,GAEAtlD,QAAAC,MAAA,gDAIAwvE,aAAA,SAAA5gE,EAAAy2C,GAEAtlD,QAAAC,MAAA,qDAIA+kD,MAAA,SAAAx/C,GAEA,GAAAsqB,GAAAtzB,KAAAkpD,SACAjgD,EAAAD,EAAAC,EAAAJ,EAAAG,EAAAH,EAAA0B,EAAAvB,EAAAuB,CAOA,OALA+oB,GAAA,IAAArqB,EAAeqqB,EAAA,IAAAzqB,EAAcyqB,EAAA,IAAA/oB,EAC7B+oB,EAAA,IAAArqB,EAAeqqB,EAAA,IAAAzqB,EAAcyqB,EAAA,IAAA/oB,EAC7B+oB,EAAA,IAAArqB,EAAeqqB,EAAA,IAAAzqB,EAAcyqB,EAAA,KAAA/oB,EAC7B+oB,EAAA,IAAArqB,EAAeqqB,EAAA,IAAAzqB,EAAcyqB,EAAA,KAAA/oB,EAE7BvK,MAIAkzE,kBAAA,WAEA,GAAA5/C,GAAAtzB,KAAAkpD,SAEAiqB,EAAA7/C,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACA8/C,EAAA9/C,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACA+/C,EAAA//C,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAAAA,EAAA,GAEA,OAAAta,MAAA+xC,KAAA/xC,KAAAZ,IAAA+6D,EAAAn6D,KAAAZ,IAAAg7D,EAAAC,MAIAC,gBAAA,SAAArqE,EAAAJ,EAAA0B,GAWA,MATAvK,MAAAkM,IAEA,MAAAjD,EACA,MAAAJ,EACA,MAAA0B,EACA,SAIAvK,MAIAuzE,cAAA,SAAAprB,GAEA,GAAA5wD,GAAAyhB,KAAAkyC,IAAA/C,GAAA9kD,EAAA2V,KAAAiyC,IAAA9C,EAWA,OATAnoD,MAAAkM,IAEA,QACA,EAAA3U,GAAA8L,EAAA,EACA,EAAAA,EAAA9L,EAAA,EACA,SAIAyI,MAIAwzE,cAAA,SAAArrB,GAEA,GAAA5wD,GAAAyhB,KAAAkyC,IAAA/C,GAAA9kD,EAAA2V,KAAAiyC,IAAA9C,EAWA,OATAnoD,MAAAkM,IAEA3U,EAAA,EAAA8L,EAAA,EACA,SACAA,EAAA,EAAA9L,EAAA,EACA,SAIAyI,MAIAyzE,cAAA,SAAAtrB,GAEA,GAAA5wD,GAAAyhB,KAAAkyC,IAAA/C,GAAA9kD,EAAA2V,KAAAiyC,IAAA9C,EAWA,OATAnoD,MAAAkM,IAEA3U,GAAA8L,EAAA,IACAA,EAAA9L,EAAA,IACA,QACA,SAIAyI,MAIA0zE,iBAAA,SAAArhE,EAAAy2C,GAIA,GAAAvxD,GAAAyhB,KAAAkyC,IAAApC,GACAzlD,EAAA2V,KAAAiyC,IAAAnC,GACAv/C,EAAA,EAAAhS,EACA0R,EAAAoJ,EAAApJ,EAAAJ,EAAAwJ,EAAAxJ,EAAA0B,EAAA8H,EAAA9H,EACAopE,EAAApqE,EAAAN,EAAA2qE,EAAArqE,EAAAV,CAWA,OATA7I,MAAAkM,IAEAynE,EAAA1qE,EAAA1R,EAAAo8E,EAAA9qE,EAAAxF,EAAAkH,EAAAopE,EAAAppE,EAAAlH,EAAAwF,EAAA,EACA8qE,EAAA9qE,EAAAxF,EAAAkH,EAAAqpE,EAAA/qE,EAAAtR,EAAAq8E,EAAArpE,EAAAlH,EAAA4F,EAAA,EACA0qE,EAAAppE,EAAAlH,EAAAwF,EAAA+qE,EAAArpE,EAAAlH,EAAA4F,EAAAM,EAAAgB,IAAAhT,EAAA,EACA,SAIAyI,MAIA6zE,UAAA,SAAA5qE,EAAAJ,EAAA0B,GAWA,MATAvK,MAAAkM,IAEAjD,EAAA,MACA,EAAAJ,EAAA,IACA,IAAA0B,EAAA,EACA,SAIAvK,MAIA8zE,QAAA,SAAAj+D,EAAAw1C,EAAA7C,GAMA,MAJAxoD,MAAAoqE,2BAAA/e,GACArrD,KAAAwoD,SACAxoD,KAAA6yE,YAAAh9D,GAEA7V,MAIA+zE,UAAA,WAEA,GAAApe,GAAA1M,CAEA,iBAAApzC,EAAAw1C,EAAA7C,GAEAzvD,SAAA48D,MAAA,GAAA9hD,GAAA8L,SACA5mB,SAAAkwD,MAAA,GAAAp1C,GAAAyzD,QAEA,IAAAh0C,GAAAtzB,KAAAkpD,SAEA+f,EAAAtT,EAAAzpD,IAAAonB,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAAAx5B,SACAovE,EAAAvT,EAAAzpD,IAAAonB,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAAAx5B,SACAqvE,EAAAxT,EAAAzpD,IAAAonB,EAAA,GAAAA,EAAA,GAAAA,EAAA,KAAAx5B,SAGAy0E,EAAAvuE,KAAAquE,aACAE,GAAA,IAEAtF,MAIApzD,EAAA5M,EAAAqqB,EAAA,IACAzd,EAAAhN,EAAAyqB,EAAA,IACAzd,EAAAtL,EAAA+oB,EAAA,IAIA21B,EAAAC,SAAAh9C,IAAAlM,KAAAkpD,SAEA,IAAA8qB,GAAA,EAAA/K,EACAgL,EAAA,EAAA/K,EACAgL,EAAA,EAAA/K,CAoBA,OAlBAlgB,GAAAC,SAAA,IAAA8qB,EACA/qB,EAAAC,SAAA,IAAA8qB,EACA/qB,EAAAC,SAAA,IAAA8qB,EAEA/qB,EAAAC,SAAA,IAAA+qB,EACAhrB,EAAAC,SAAA,IAAA+qB,EACAhrB,EAAAC,SAAA,IAAA+qB,EAEAhrB,EAAAC,SAAA,IAAAgrB,EACAjrB,EAAAC,SAAA,IAAAgrB,EACAjrB,EAAAC,SAAA,KAAAgrB,EAEA7oB,EAAAoX,sBAAAxZ,GAEAT,EAAAv/C,EAAAggE,EACAzgB,EAAA3/C,EAAAqgE,EACA1gB,EAAAj+C,EAAA4+D,EAEAnpE,SAMAm0E,YAAA,SAAAlkC,EAAA6Z,EAAAC,EAAA5Z,EAAAikC,EAAAC,GAEA,GAAA/gD,GAAAtzB,KAAAkpD,SACAjgD,EAAA,EAAAmrE,GAAAtqB,EAAA7Z,GACApnC,EAAA,EAAAurE,GAAAjkC,EAAA4Z,GAEArhD,GAAAohD,EAAA7Z,IAAA6Z,EAAA7Z,GACAlnC,GAAAonC,EAAA4Z,IAAA5Z,EAAA4Z,GACAxyD,IAAA88E,EAAAD,IAAAC,EAAAD,GACA3rE,KAAA4rE,EAAAD,GAAAC,EAAAD,EAOA,OALA9gD,GAAA,GAAArqB,EAAcqqB,EAAA,KAAaA,EAAA,GAAA5qB,EAAa4qB,EAAA,MACxCA,EAAA,KAAcA,EAAA,GAAAzqB,EAAayqB,EAAA,GAAAvqB,EAAauqB,EAAA,MACxCA,EAAA,KAAcA,EAAA,KAAaA,EAAA,IAAA/7B,EAAc+7B,EAAA,IAAA7qB,EACzC6qB,EAAA,KAAcA,EAAA,KAAaA,EAAA,OAAgBA,EAAA,MAE3CtzB,MAIAs0E,gBAAA,SAAA1qB,EAAA2qB,EAAAH,EAAAC,GAEA,GAAA5xB,GAAA2xB,EAAAp7D,KAAA2wC,IAAA91C,EAAAmF,KAAAw7D,SAAA,GAAA5qB,IACApH,GAAAC,EACAlwC,EAAAiwC,EAAA+xB,EACA/hE,EAAAiwC,EAAA8xB,CAEA,OAAAv0E,MAAAm0E,YAAA5hE,EAAAC,EAAAgwC,EAAAC,EAAA2xB,EAAAC,IAIAI,iBAAA,SAAAxkC,EAAA6Z,EAAA3Z,EAAA4Z,EAAAqqB,EAAAC,GAEA,GAAA/gD,GAAAtzB,KAAAkpD,SACAv+C,EAAAm/C,EAAA7Z,EACA7nC,EAAA+nC,EAAA4Z,EACAvyD,EAAA68E,EAAAD,EAEAnrE,GAAA6gD,EAAA7Z,GAAAtlC,EACA9B,GAAAsnC,EAAA4Z,GAAA3hD,EACAmC,GAAA8pE,EAAAD,GAAA58E,CAOA,OALA87B,GAAA,KAAA3oB,EAAkB2oB,EAAA,KAAaA,EAAA,KAAaA,EAAA,KAAArqB,EAC5CqqB,EAAA,KAAcA,EAAA,KAAAlrB,EAAiBkrB,EAAA,KAAaA,EAAA,KAAAzqB,EAC5CyqB,EAAA,KAAcA,EAAA,KAAaA,EAAA,OAAA97B,EAAoB87B,EAAA,KAAA/oB,EAC/C+oB,EAAA,KAAcA,EAAA,KAAaA,EAAA,MAAcA,EAAA,MAEzCtzB,MAIAq4D,OAAA,SAAApP,GAKA,OAHA31B,GAAAtzB,KAAAkpD,SACAr2B,EAAAo2B,EAAAC,SAEArvD,EAAA,EAAkBA,EAAA,GAAQA,IAE1B,GAAAy5B,EAAAz5B,KAAAg5B,EAAAh5B,GAAA,QAIA,WAIAy+D,UAAA,SAAA38C,GAIA,MAFA3b,MAAAkpD,SAAAh9C,IAAAyP,GAEA3b,MAIAwlD,QAAA,WAEA,GAAAlyB,GAAAtzB,KAAAkpD,QAEA,QACA51B,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAAAA,EAAA,IACAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,IAAAA,EAAA,OAaAzf,EAAA6gE,IAAA,SAAAC,EAAAC,GAEA50E,KAAA20E,OAAA57E,SAAA47E,IAAA,GAAA9gE,GAAA8L,QACA3f,KAAA40E,UAAA77E,SAAA67E,IAAA,GAAA/gE,GAAA8L,SAIA9L,EAAA6gE,IAAAv4E,WAEAE,YAAAwX,EAAA6gE,IAEAxoE,IAAA,SAAAyoE,EAAAC,GAKA,MAHA50E,MAAA20E,OAAAl8D,KAAAk8D,GACA30E,KAAA40E,UAAAn8D,KAAAm8D,GAEA50E,MAIAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAo8D,GAKA,MAHA70E,MAAA20E,OAAAl8D,KAAAo8D,EAAAF,QACA30E,KAAA40E,UAAAn8D,KAAAo8D,EAAAD,WAEA50E,MAIAvC,GAAA,SAAA8L,EAAAiuD,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OAEA,OAAAnmB,GAAAif,KAAAzY,KAAA40E,WAAAzrB,eAAA5/C,GAAAwM,IAAA/V,KAAA20E,SAIAG,OAAA,WAEA,GAAA1R,GAAA,GAAAvvD,GAAA8L,OAEA,iBAAApW,GAIA,MAFAvJ,MAAA20E,OAAAl8D,KAAAzY,KAAAvC,GAAA8L,EAAA65D,IAEApjE,SAMAmrE,oBAAA,SAAAJ,EAAAvT,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OACAnmB,GAAA0zD,WAAA6d,EAAA/qE,KAAA20E,OACA,IAAAI,GAAAv7E,EAAA4xD,IAAAprD,KAAA40E,UAEA,OAAAG,GAAA,EAEAv7E,EAAAif,KAAAzY,KAAA20E,QAIAn7E,EAAAif,KAAAzY,KAAA40E,WAAAzrB,eAAA4rB,GAAAh/D,IAAA/V,KAAA20E,SAIAtI,gBAAA,SAAAtB,GAEA,MAAA/xD,MAAA+xC,KAAA/qD,KAAAg1E,kBAAAjK,KAIAiK,kBAAA,WAEA,GAAA5R,GAAA,GAAAvvD,GAAA8L,OAEA,iBAAAorD,GAEA,GAAAgK,GAAA3R,EAAAlW,WAAA6d,EAAA/qE,KAAA20E,QAAAvpB,IAAAprD,KAAA40E,UAIA,OAAAG,GAAA,EAEA/0E,KAAA20E,OAAAxpB,kBAAA4f,IAIA3H,EAAA3qD,KAAAzY,KAAA40E,WAAAzrB,eAAA4rB,GAAAh/D,IAAA/V,KAAA20E,QAEAvR,EAAAjY,kBAAA4f,QAMAkK,oBAAA,WAEA,GAAAC,GAAA,GAAArhE,GAAA8L,QACAw1D,EAAA,GAAAthE,GAAA8L,QACAy1D,EAAA,GAAAvhE,GAAA8L,OAEA,iBAAA01D,EAAAjS,EAAAkS,EAAAC,GASAL,EAAAz8D,KAAA48D,GAAAt/D,IAAAqtD,GAAAja,eAAA,IACAgsB,EAAA18D,KAAA2qD,GAAA3Z,IAAA4rB,GAAAv/D,YACAs/D,EAAA38D,KAAAzY,KAAA20E,QAAAlrB,IAAAyrB,EAEA,IAMAM,GAAApT,EAAAqT,EAAAC,EANAC,EAAA,GAAAN,EAAAtP,WAAA3C,GACAwS,GAAA51E,KAAA40E,UAAAxpB,IAAA+pB,GACAU,EAAAT,EAAAhqB,IAAAprD,KAAA40E,WACAkB,GAAAV,EAAAhqB,IAAA+pB,GACA59E,EAAA69E,EAAA1R,WACA6K,EAAAv1D,KAAAuqD,IAAA,EAAAqS,IAGA,IAAArH,EAAA,EAQA,GAJAiH,EAAAI,EAAAE,EAAAD,EACAzT,EAAAwT,EAAAC,EAAAC,EACAJ,EAAAC,EAAApH,EAEAiH,GAAA,EAEA,GAAApT,IAAAsT,EAEA,GAAAtT,GAAAsT,EAAA,CAKA,GAAAK,GAAA,EAAAxH,CACAiH,IAAAO,EACA3T,GAAA2T,EACAN,EAAAD,KAAAI,EAAAxT,EAAA,EAAAyT,GAAAzT,GAAAwT,EAAAJ,EAAApT,EAAA,EAAA0T,GAAAv+E,MAMA6qE,GAAAuT,EACAH,EAAAx8D,KAAAZ,IAAA,IAAAw9D,EAAAxT,EAAAyT,IACAJ,GAAAD,IAAApT,KAAA,EAAA0T,GAAAv+E,MAQA6qE,IAAAuT,EACAH,EAAAx8D,KAAAZ,IAAA,IAAAw9D,EAAAxT,EAAAyT,IACAJ,GAAAD,IAAApT,KAAA,EAAA0T,GAAAv+E,MAMA6qE,KAAAsT,GAIAF,EAAAx8D,KAAAZ,IAAA,KAAAw9D,EAAAD,EAAAE,IACAzT,EAAAoT,EAAA,GAAAG,EAAA38D,KAAA02B,IAAA12B,KAAAZ,KAAAu9D,GAAAG,GAAAH,GACAF,GAAAD,IAAApT,KAAA,EAAA0T,GAAAv+E,GAEM6qE,GAAAsT,GAINF,EAAA,EACApT,EAAAppD,KAAA02B,IAAA12B,KAAAZ,KAAAu9D,GAAAG,GAAAH,GACAF,EAAArT,KAAA,EAAA0T,GAAAv+E,IAMAi+E,EAAAx8D,KAAAZ,IAAA,IAAAw9D,EAAAD,EAAAE,IACAzT,EAAAoT,EAAA,EAAAG,EAAA38D,KAAA02B,IAAA12B,KAAAZ,KAAAu9D,GAAAG,GAAAH,GACAF,GAAAD,IAAApT,KAAA,EAAA0T,GAAAv+E,OAUA6qE,GAAAwT,EAAA,GAAAD,IACAH,EAAAx8D,KAAAZ,IAAA,IAAAw9D,EAAAxT,EAAAyT,IACAJ,GAAAD,IAAApT,KAAA,EAAA0T,GAAAv+E,CAgBA,OAZA+9E,IAEAA,EAAA78D,KAAAzY,KAAA40E,WAAAzrB,eAAAqsB,GAAAz/D,IAAA/V,KAAA20E,QAIAY,GAEAA,EAAA98D,KAAA08D,GAAAhsB,eAAAiZ,GAAArsD,IAAAm/D,GAIAO,MAOAO,qBAAA,SAAAC,GAEA,MAAAj2E,MAAAqsE,gBAAA4J,EAAAznB,SAAAynB,EAAAjrB,QAIAkrB,gBAAA,WAIA,GAAA9S,GAAA,GAAAvvD,GAAA8L,OAEA,iBAAAs2D,EAAAze,GAEA4L,EAAAlW,WAAA+oB,EAAAznB,OAAAxuD,KAAA20E,OAEA,IAAAwB,GAAA/S,EAAAhY,IAAAprD,KAAA40E,WAEAwB,EAAAhT,EAAAhY,IAAAgY,GAAA+S,IAEAE,EAAAJ,EAAAjrB,OAAAirB,EAAAjrB,MAEA,IAAAorB,EAAAC,EAAA,WAEA,IAAAC,GAAAt9D,KAAA+xC,KAAAsrB,EAAAD,GAGAG,EAAAJ,EAAAG,EAGAE,EAAAL,EAAAG,CAGA,OAAAC,GAAA,GAAAC,EAAA,OAKAD,EAAA,EAAAv2E,KAAAvC,GAAA+4E,EAAAhf,GAGAx3D,KAAAvC,GAAA84E,EAAA/e,OAMAif,oBAAA,SAAAC,GAIA,GAAAC,GAAAD,EAAArK,gBAAArsE,KAAA20E,OAEA,QAAAgC,EAEA,QAIA,IAAAC,GAAAF,EAAAp3D,OAAA8rC,IAAAprD,KAAA40E,UAEA,OAAAgC,GAAAD,EAAA,GAYAE,gBAAA,SAAAH,GAEA,GAAAE,GAAAF,EAAAp3D,OAAA8rC,IAAAprD,KAAA40E,UACA,QAAAgC,EAGA,WAAAF,EAAArK,gBAAArsE,KAAA20E,QAEA,EAMA,IAIA,IAAAprE,KAAAvJ,KAAA20E,OAAAvpB,IAAAsrB,EAAAp3D,QAAAo3D,EAAAI,UAAAF,CAIA,OAAArtE,IAAA,EAAAA,EAAA,MAIAwtE,eAAA,SAAAL,EAAAlf,GAEA,GAAAjuD,GAAAvJ,KAAA62E,gBAAAH,EAEA,eAAAntE,EAEA,KAIAvJ,KAAAvC,GAAA8L,EAAAiuD,IAIA2U,kBAAA,WAEA,GAAAnjE,GAAA,GAAA6K,GAAA8L,OAEA,iBAAAisD,GAEA,cAAA5rE,KAAAg3E,aAAApL,EAAA5iE,OAMAguE,aAAA,SAAApL,EAAApU,GAIA,GAAAyf,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAEAC,EAAA,EAAAv3E,KAAA40E,UAAA3rE,EACAuuE,EAAA,EAAAx3E,KAAA40E,UAAA/rE,EACA4uE,EAAA,EAAAz3E,KAAA40E,UAAArqE,EAEAoqE,EAAA30E,KAAA20E,MA0BA,OAxBA4C,IAAA,GAEAN,GAAArL,EAAAl8B,IAAAzmC,EAAA0rE,EAAA1rE,GAAAsuE,EACAL,GAAAtL,EAAAxzD,IAAAnP,EAAA0rE,EAAA1rE,GAAAsuE,IAIAN,GAAArL,EAAAxzD,IAAAnP,EAAA0rE,EAAA1rE,GAAAsuE,EACAL,GAAAtL,EAAAl8B,IAAAzmC,EAAA0rE,EAAA1rE,GAAAsuE,GAIAC,GAAA,GAEAL,GAAAvL,EAAAl8B,IAAA7mC,EAAA8rE,EAAA9rE,GAAA2uE,EACAJ,GAAAxL,EAAAxzD,IAAAvP,EAAA8rE,EAAA9rE,GAAA2uE,IAIAL,GAAAvL,EAAAxzD,IAAAvP,EAAA8rE,EAAA9rE,GAAA2uE,EACAJ,GAAAxL,EAAAl8B,IAAA7mC,EAAA8rE,EAAA9rE,GAAA2uE,GAIAP,EAAAG,GAAAD,EAAAD,EAAA,OAKAC,EAAAF,cAAAE,IAEAC,EAAAF,cAAAE,GAEAK,GAAA,GAEAJ,GAAAzL,EAAAl8B,IAAAnlC,EAAAoqE,EAAApqE,GAAAktE,EACAH,GAAA1L,EAAAxzD,IAAA7N,EAAAoqE,EAAApqE,GAAAktE,IAIAJ,GAAAzL,EAAAxzD,IAAA7N,EAAAoqE,EAAApqE,GAAAktE,EACAH,GAAA1L,EAAAl8B,IAAAnlC,EAAAoqE,EAAApqE,GAAAktE,GAIAR,EAAAK,GAAAD,EAAAH,EAAA,OAEAG,EAAAJ,cAAAI,IAEAC,EAAAJ,cAAAI,GAIAJ,EAAA,OAEAl3E,KAAAvC,GAAAw5E,GAAA,EAAAA,EAAAC,EAAA1f,MAIAkgB,kBAAA,WAGA,GAAAtC,GAAA,GAAAvhE,GAAA8L,QACAg4D,EAAA,GAAA9jE,GAAA8L,QACAi4D,EAAA,GAAA/jE,GAAA8L,QACAL,EAAA,GAAAzL,GAAA8L,OAEA,iBAAAjX,EAAAK,EAAAxR,EAAAsgF,EAAArgB,GAIAmgB,EAAAzqB,WAAAnkD,EAAAL,GACAkvE,EAAA1qB,WAAA31D,EAAAmR,GACA4W,EAAAkkD,aAAAmU,EAAAC,EAOA,IACA/2D,GADAi3D,EAAA93E,KAAA40E,UAAAxpB,IAAA9rC,EAGA,IAAAw4D,EAAA,GAEA,GAAAD,EAAA,WACAh3D,GAAA,MAEI,MAAAi3D,EAAA,GAOJ,WALAj3D,MACAi3D,KAQA1C,EAAAloB,WAAAltD,KAAA20E,OAAAjsE,EACA,IAAAqvE,GAAAl3D,EAAA7gB,KAAA40E,UAAAxpB,IAAAwsB,EAAApU,aAAA4R,EAAAwC,GAGA,IAAAG,EAAA,EAEA,WAIA,IAAAC,GAAAn3D,EAAA7gB,KAAA40E,UAAAxpB,IAAAusB,EAAA/P,MAAAwN,GAGA,IAAA4C,EAAA,EAEA,WAKA,IAAAD,EAAAC,EAAAF,EAEA,WAKA,IAAAG,IAAAp3D,EAAAu0D,EAAAhqB,IAAA9rC,EAGA,OAAA24D,GAAA,EAEA,KAKAj4E,KAAAvC,GAAAw6E,EAAAH,EAAAtgB,OAMAoP,aAAA,SAAAsR,GAOA,MALAl4E,MAAA40E,UAAA7+D,IAAA/V,KAAA20E,QAAA/N,aAAAsR,GACAl4E,KAAA20E,OAAA/N,aAAAsR,GACAl4E,KAAA40E,UAAAnrB,IAAAzpD,KAAA20E,QACA30E,KAAA40E,UAAA9+D,YAEA9V,MAIAq4D,OAAA,SAAAwc,GAEA,MAAAA,GAAAF,OAAAtc,OAAAr4D,KAAA20E,SAAAE,EAAAD,UAAAvc,OAAAr4D,KAAA40E,aAaA/gE,EAAAo5D,OAAA,SAAAze,EAAAxD,GAEAhrD,KAAAwuD,OAAAz1D,SAAAy1D,IAAA,GAAA36C,GAAA8L,QACA3f,KAAAgrD,OAAAjyD,SAAAiyD,IAAA,GAIAn3C,EAAAo5D,OAAA9wE,WAEAE,YAAAwX,EAAAo5D,OAEA/gE,IAAA,SAAAsiD,EAAAxD,GAKA,MAHAhrD,MAAAwuD,OAAA/1C,KAAA+1C,GACAxuD,KAAAgrD,SAEAhrD,MAIAqrE,cAAA,WAEA,GAAAO,GAAA,GAAA/3D,GAAA64D,IAEA,iBAAApB,EAAA6M,GAEA,GAAA3pB,GAAAxuD,KAAAwuD,MAEAz1D,UAAAo/E,EAEA3pB,EAAA/1C,KAAA0/D,GAIAvM,EAAAP,cAAAC,GAAA9c,SAMA,QAFA4pB,GAAA,EAEAv+E,EAAA,EAAA2xE,EAAAF,EAAAxxE,OAAuCD,EAAA2xE,EAAQ3xE,IAE/Cu+E,EAAAp/D,KAAAZ,IAAAggE,EAAA5pB,EAAArD,kBAAAmgB,EAAAzxE,IAMA,OAFAmG,MAAAgrD,OAAAhyC,KAAA+xC,KAAAqtB,GAEAp4E,SAMAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAw9D,GAKA,MAHAj2E,MAAAwuD,OAAA/1C,KAAAw9D,EAAAznB,QACAxuD,KAAAgrD,OAAAirB,EAAAjrB,OAEAhrD,MAIA6rE,MAAA,WAEA,MAAA7rE,MAAAgrD,QAAA,GAIAghB,cAAA,SAAAjB,GAEA,MAAAA,GAAA5f,kBAAAnrD,KAAAwuD,SAAAxuD,KAAAgrD,OAAAhrD,KAAAgrD,QAIAqhB,gBAAA,SAAAtB,GAEA,MAAAA,GAAAhF,WAAA/lE,KAAAwuD,QAAAxuD,KAAAgrD,QAIAqtB,iBAAA,SAAApC,GAEA,GAAAqC,GAAAt4E,KAAAgrD,OAAAirB,EAAAjrB,MAEA,OAAAirB,GAAAznB,OAAArD,kBAAAnrD,KAAAwuD,SAAA8pB,KAIAlM,WAAA,SAAArB,EAAAvT,GAEA,GAAA+gB,GAAAv4E,KAAAwuD,OAAArD,kBAAA4f,GAEAvxE,EAAAg+D,GAAA,GAAA3jD,GAAA8L,OAUA,OATAnmB,GAAAif,KAAAsyD,GAEAwN,EAAAv4E,KAAAgrD,OAAAhrD,KAAAgrD,SAEAxxD,EAAAiwD,IAAAzpD,KAAAwuD,QAAA14C,YACAtc,EAAA2vD,eAAAnpD,KAAAgrD,QAAAj1C,IAAA/V,KAAAwuD,SAIAh1D,GAIAg/E,eAAA,SAAAhhB,GAEA,GAAAoU,GAAApU,GAAA,GAAA3jD,GAAA64D,IAKA,OAHAd,GAAA1/D,IAAAlM,KAAAwuD,OAAAxuD,KAAAwuD,QACAod,EAAAG,eAAA/rE,KAAAgrD,QAEA4gB,GAIAhF,aAAA,SAAA3d,GAKA,MAHAjpD,MAAAwuD,OAAAoY,aAAA3d,GACAjpD,KAAAgrD,OAAAhrD,KAAAgrD,OAAA/B,EAAAiqB,oBAEAlzE,MAIAysE,UAAA,SAAAluD,GAIA,MAFAve,MAAAwuD,OAAAz4C,IAAAwI,GAEAve,MAIAq4D,OAAA,SAAA4d,GAEA,MAAAA,GAAAznB,OAAA6J,OAAAr4D,KAAAwuD,SAAAynB,EAAAjrB,SAAAhrD,KAAAgrD,SAcAn3C,EAAA4kE,QAAA,SAAAC,EAAAr9E,EAAAC,EAAAq9E,EAAAC,EAAAC,GAEA74E,KAAA84E,QAEA//E,SAAA2/E,IAAA,GAAA7kE,GAAAklE,MACAhgF,SAAAsC,IAAA,GAAAwY,GAAAklE,MACAhgF,SAAAuC,IAAA,GAAAuY,GAAAklE,MACAhgF,SAAA4/E,IAAA,GAAA9kE,GAAAklE,MACAhgF,SAAA6/E,IAAA,GAAA/kE,GAAAklE,MACAhgF,SAAA8/E,IAAA,GAAAhlE,GAAAklE,QAMAllE,EAAA4kE,QAAAt8E,WAEAE,YAAAwX,EAAA4kE,QAEAvsE,IAAA,SAAAwsE,EAAAr9E,EAAAC,EAAAq9E,EAAAC,EAAAC,GAEA,GAAAC,GAAA94E,KAAA84E,MASA,OAPAA,GAAA,GAAArgE,KAAAigE,GACAI,EAAA,GAAArgE,KAAApd,GACAy9E,EAAA,GAAArgE,KAAAnd,GACAw9E,EAAA,GAAArgE,KAAAkgE,GACAG,EAAA,GAAArgE,KAAAmgE,GACAE,EAAA,GAAArgE,KAAAogE,GAEA74E,MAIAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAugE,GAIA,OAFAF,GAAA94E,KAAA84E,OAEAj/E,EAAA,EAAkBA,EAAA,EAAOA,IAEzBi/E,EAAAj/E,GAAA4e,KAAAugE,EAAAF,OAAAj/E,GAIA,OAAAmG,OAIAi5E,cAAA,SAAA3hF,GAEA,GAAAwhF,GAAA94E,KAAA84E,OACAjmD,EAAAv7B,EAAA4xD,SACAgwB,EAAArmD,EAAA,GAAAsmD,EAAAtmD,EAAA,GAAAumD,EAAAvmD,EAAA,GAAAwmD,EAAAxmD,EAAA,GACAymD,EAAAzmD,EAAA,GAAA0mD,EAAA1mD,EAAA,GAAA2mD,EAAA3mD,EAAA,GAAA4mD,EAAA5mD,EAAA,GACA6mD,EAAA7mD,EAAA,GAAA8mD,EAAA9mD,EAAA,GAAA+mD,EAAA/mD,EAAA,IAAAgnD,EAAAhnD,EAAA,IACAinD,EAAAjnD,EAAA,IAAAknD,EAAAlnD,EAAA,IAAAmnD,EAAAnnD,EAAA,IAAAonD,EAAApnD,EAAA,GASA,OAPAimD,GAAA,GAAAoB,cAAAb,EAAAH,EAAAO,EAAAH,EAAAO,EAAAH,EAAAO,EAAAH,GAAAhkE,YACAgjE,EAAA,GAAAoB,cAAAb,EAAAH,EAAAO,EAAAH,EAAAO,EAAAH,EAAAO,EAAAH,GAAAhkE,YACAgjE,EAAA,GAAAoB,cAAAb,EAAAF,EAAAM,EAAAF,EAAAM,EAAAF,EAAAM,EAAAF,GAAAjkE,YACAgjE,EAAA,GAAAoB,cAAAb,EAAAF,EAAAM,EAAAF,EAAAM,EAAAF,EAAAM,EAAAF,GAAAjkE,YACAgjE,EAAA,GAAAoB,cAAAb,EAAAD,EAAAK,EAAAD,EAAAK,EAAAD,EAAAK,EAAAD,GAAAlkE,YACAgjE,EAAA,GAAAoB,cAAAb,EAAAD,EAAAK,EAAAD,EAAAK,EAAAD,EAAAK,EAAAD,GAAAlkE,YAEA9V,MAIAm6E,iBAAA,WAEA,GAAAlE,GAAA,GAAApiE,GAAAo5D,MAEA,iBAAA9qD,GAEA,GAAA5L,GAAA4L,EAAA5L,QAOA,OALA,QAAAA,EAAA6jE,gBAAA7jE,EAAA0B,wBAEAg+D,EAAAx9D,KAAAlC,EAAA6jE,gBACAnE,EAAArP,aAAAzkD,EAAAulD,aAEA1nE,KAAAq4E,iBAAApC,OAMAoC,iBAAA,SAAApC,GAMA,OAJA6C,GAAA94E,KAAA84E,OACAtqB,EAAAynB,EAAAznB,OACA6rB,GAAApE,EAAAjrB,OAEAnxD,EAAA,EAAkBA,EAAA,EAAOA,IAAA,CAEzB,GAAAwb,GAAAyjE,EAAAj/E,GAAAwyE,gBAAA7d,EAEA,IAAAn5C,EAAAglE,EAEA,SAMA,UAIAC,cAAA,WAEA,GAAAj/E,GAAA,GAAAwY,GAAA8L,QACArkB,EAAA,GAAAuY,GAAA8L,OAEA,iBAAAisD,GAIA,OAFAkN,GAAA94E,KAAA84E,OAEAj/E,EAAA,EAAmBA,EAAA,EAAQA,IAAA,CAE3B,GAAA68E,GAAAoC,EAAAj/E,EAEAwB,GAAA4N,EAAAytE,EAAAp3D,OAAArW,EAAA,EAAA2iE,EAAAl8B,IAAAzmC,EAAA2iE,EAAAxzD,IAAAnP,EACA3N,EAAA2N,EAAAytE,EAAAp3D,OAAArW,EAAA,EAAA2iE,EAAAxzD,IAAAnP,EAAA2iE,EAAAl8B,IAAAzmC,EACA5N,EAAAwN,EAAA6tE,EAAAp3D,OAAAzW,EAAA,EAAA+iE,EAAAl8B,IAAA7mC,EAAA+iE,EAAAxzD,IAAAvP,EACAvN,EAAAuN,EAAA6tE,EAAAp3D,OAAAzW,EAAA,EAAA+iE,EAAAxzD,IAAAvP,EAAA+iE,EAAAl8B,IAAA7mC,EACAxN,EAAAkP,EAAAmsE,EAAAp3D,OAAA/U,EAAA,EAAAqhE,EAAAl8B,IAAAnlC,EAAAqhE,EAAAxzD,IAAA7N,EACAjP,EAAAiP,EAAAmsE,EAAAp3D,OAAA/U,EAAA,EAAAqhE,EAAAxzD,IAAA7N,EAAAqhE,EAAAl8B,IAAAnlC,CAEA,IAAAgwE,GAAA7D,EAAArK,gBAAAhxE,GACA+6E,EAAAM,EAAArK,gBAAA/wE,EAIA,IAAAi/E,EAAA,GAAAnE,EAAA,EAEA,SAMA,aAOApK,cAAA,SAAAjB,GAIA,OAFA+N,GAAA94E,KAAA84E,OAEAj/E,EAAA,EAAkBA,EAAA,EAAOA,IAEzB,GAAAi/E,EAAAj/E,GAAAwyE,gBAAAtB,GAAA,EAEA,QAMA,YAYAl3D,EAAAklE,MAAA,SAAAz5D,EAAAw3D,GAEA92E,KAAAsf,OAAAvmB,SAAAumB,IAAA,GAAAzL,GAAA8L,QAAA,OACA3f,KAAA82E,SAAA/9E,SAAA+9E,IAAA,GAIAjjE,EAAAklE,MAAA58E,WAEAE,YAAAwX,EAAAklE,MAEA7sE,IAAA,SAAAoT,EAAAw3D,GAKA,MAHA92E,MAAAsf,OAAA7G,KAAA6G,GACAtf,KAAA82E,WAEA92E,MAIAk6E,cAAA,SAAAjxE,EAAAJ,EAAA0B,EAAAI,GAKA,MAHA3K,MAAAsf,OAAApT,IAAAjD,EAAAJ,EAAA0B,GACAvK,KAAA82E,SAAAnsE,EAEA3K,MAIAw6E,8BAAA,SAAAl7D,EAAAyrD,GAKA,MAHA/qE,MAAAsf,OAAA7G,KAAA6G,GACAtf,KAAA82E,UAAA/L,EAAA3f,IAAAprD,KAAAsf,QAEAtf,MAIAy6E,sBAAA,WAEA,GAAArX,GAAA,GAAAvvD,GAAA8L,QACAwmD,EAAA,GAAAtyD,GAAA8L,OAEA,iBAAAjX,EAAAK,EAAAxR,GAEA,GAAA+nB,GAAA8jD,EAAAlW,WAAA31D,EAAAwR,GAAA6+D,MAAAzB,EAAAjZ,WAAAxkD,EAAAK,IAAA+M,WAMA,OAFA9V,MAAAw6E,8BAAAl7D,EAAA5W,GAEA1I,SAMAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAi+D,GAKA,MAHA12E,MAAAsf,OAAA7G,KAAAi+D,EAAAp3D,QACAtf,KAAA82E,SAAAJ,EAAAI,SAEA92E,MAIA8V,UAAA,WAIA,GAAA4kE,GAAA,EAAA16E,KAAAsf,OAAAxlB,QAIA,OAHAkG,MAAAsf,OAAA6pC,eAAAuxB,GACA16E,KAAA82E,UAAA4D,EAEA16E,MAIA6lE,OAAA,WAKA,MAHA7lE,MAAA82E,aACA92E,KAAAsf,OAAAumD,SAEA7lE,MAIAqsE,gBAAA,SAAAtB,GAEA,MAAA/qE,MAAAsf,OAAA8rC,IAAA2f,GAAA/qE,KAAA82E,UAIA6D,iBAAA,SAAA1E,GAEA,MAAAj2E,MAAAqsE,gBAAA4J,EAAAznB,QAAAynB,EAAAjrB,QAIA4vB,aAAA,SAAA7P,EAAAvT,GAEA,MAAAx3D,MAAA66E,WAAA9P,EAAAvT,GAAA/N,IAAAshB,GAAAlF,UAIAgV,WAAA,SAAA9P,EAAAvT,GAEA,GAAAsjB,GAAA96E,KAAAqsE,gBAAAtB,GAEAvxE,EAAAg+D,GAAA,GAAA3jD,GAAA8L,OACA,OAAAnmB,GAAAif,KAAAzY,KAAAsf,QAAA6pC,eAAA2xB,IAIAC,mBAAA,SAAA19E,GAIA,GAAA29E,GAAAh7E,KAAAqsE,gBAAAhvE,EAAAuhB,OACAq8D,EAAAj7E,KAAAqsE,gBAAAhvE,EAAA8iB,IAEA,OAAA66D,GAAA,GAAAC,EAAA,GAAAA,EAAA,GAAAD,EAAA,GAIAE,cAAA,WAEA,GAAA9X,GAAA,GAAAvvD,GAAA8L,OAEA,iBAAAtiB,EAAAm6D,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,QAEAi1D,EAAAv3E,EAAAqwD,MAAA0V,GAEAwT,EAAA52E,KAAAsf,OAAA8rC,IAAAwpB,EAEA,QAAAgC,EAAA,CAcA,GAAArtE,KAAAlM,EAAAuhB,MAAAwsC,IAAAprD,KAAAsf,QAAAtf,KAAA82E,UAAAF,CAEA,MAAArtE,EAAA,GAAAA,EAAA,GAMA,MAAA/P,GAAAif,KAAAm8D,GAAAzrB,eAAA5/C,GAAAwM,IAAA1Y,EAAAuhB,WAnBA,QAAA5e,KAAAqsE,gBAAAhvE,EAAAuhB,OAEA,MAAAplB,GAAAif,KAAApb,EAAAuhB,WAwBAu8D,cAAA,SAAA3jB,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OACA,OAAAnmB,GAAAif,KAAAzY,KAAAsf,QAAA6pC,gBAAAnpD,KAAA82E,WAIAlQ,aAAA,WAEA,GAAAxD,GAAA,GAAAvvD,GAAA8L,QACAwmD,EAAA,GAAAtyD,GAAA8L,QACAy7D,EAAA,GAAAvnE,GAAAq5D,OAEA,iBAAAjkB,EAAAoyB,GAIA,GAAAC,GAAAD,GAAAD,EAAAxM,gBAAA3lB,GACAsyB,EAAAnY,EAAA3qD,KAAAzY,KAAAsf,QAAAqnD,aAAA2U,GAEAE,EAAAx7E,KAAAm7E,cAAAhV,EAKA,OAJAqV,GAAA5U,aAAA3d,GAEAjpD,KAAAw6E,8BAAAe,EAAAC,GAEAx7E,SAMAysE,UAAA,SAAAluD,GAIA,MAFAve,MAAA82E,SAAA92E,KAAA82E,SAAAv4D,EAAA6sC,IAAAprD,KAAAsf,QAEAtf,MAIAq4D,OAAA,SAAAqe,GAEA,MAAAA,GAAAp3D,OAAA+4C,OAAAr4D,KAAAsf,SAAAo3D,EAAAI,WAAA92E,KAAA82E,WAaAjjE,EAAAmF,MAEAyiE,aAAA,WAIA,GAEApyE,GAFAqyE,EAAA,iEAAAh+E,MAAA,IACAi+E,EAAA,GAAAhiF,OAAA,IACAiiF,EAAA,CAEA,mBAEA,OAAA/hF,GAAA,EAAmBA,EAAA,GAAQA,IAE3B,IAAAA,GAAA,KAAAA,GAAA,KAAAA,GAAA,KAAAA,EAEA8hF,EAAA9hF,GAAA,IAEK,KAAAA,EAEL8hF,EAAA9hF,GAAA,KAIA+hF,GAAA,IAAAA,EAAA,kBAAA5iE,KAAAgkC,SAAA,GACA3zC,EAAA,GAAAuyE,EACAA,IAAA,EACAD,EAAA9hF,GAAA6hF,EAAA,KAAA7hF,EAAA,EAAAwP,EAAA,EAAAA,GAMA,OAAAsyE,GAAAp5E,KAAA,QAQAm0D,MAAA,SAAAztD,EAAAP,EAAAK,GAEA,MAAAE,GAAAP,IAAAO,EAAAF,IAAAE,GAMA4yE,YAAA,SAAA5yE,EAAAP,GAEA,MAAAO,GAAAP,IAAAO,GAOAwtD,gBAAA,SAAAn0D,EAAAhL,GAEA,OAAAgL,EAAAhL,QAMAwkF,UAAA,SAAA7yE,EAAA8yE,EAAAC,EAAAlG,EAAAmG,GAEA,MAAAnG,IAAA7sE,EAAA8yE,IAAAE,EAAAnG,IAAAkG,EAAAD,IAMAG,WAAA,SAAAjzE,EAAAymC,EAAAt3B,GAEA,MAAAnP,IAAAymC,EAAA,EACAzmC,GAAAmP,EAAA,GAEAnP,KAAAymC,IAAAt3B,EAAAs3B,GAEAzmC,KAAA,IAAAA,KAIAkzE,aAAA,SAAAlzE,EAAAymC,EAAAt3B,GAEA,MAAAnP,IAAAymC,EAAA,EACAzmC,GAAAmP,EAAA,GAEAnP,KAAAymC,IAAAt3B,EAAAs3B,GAEAzmC,UAAA,EAAAA,EAAA,UAOAmzE,SAAA,WAEA,aAAApjE,KAAAgkC,SAAA,IAAAhkC,KAAAgkC,UAAA,OAMAq/B,QAAA,SAAAC,EAAAC,GAEA,MAAAD,GAAAtjE,KAAA2tC,MAAA3tC,KAAAgkC,UAAAu/B,EAAAD,EAAA,KAMAE,UAAA,SAAAF,EAAAC,GAEA,MAAAD,GAAAtjE,KAAAgkC,UAAAu/B,EAAAD,IAMAG,gBAAA,SAAAjtE,GAEA,MAAAA,IAAA,GAAAwJ,KAAAgkC,WAIAw3B,SAAA,WAEA,GAAAkI,GAAA1jE,KAAA8uC,GAAA,GAEA,iBAAA60B,GAEA,MAAAA,GAAAD,MAMAE,SAAA,WAEA,GAAAC,GAAA,IAAA7jE,KAAA8uC,EAEA,iBAAAg1B,GAEA,MAAAA,GAAAD,MAMAE,aAAA,SAAA/iF,GAEA,YAAAA,IAAA,QAAAA,GAIAgjF,eAAA,SAAAhjF,GAUA,MARAA,KACAA,MAAA,EACAA,MAAA,EACAA,MAAA,EACAA,MAAA,EACAA,MAAA,GACAA,IAEAA,IAgBA6Z,EAAAopE,OAAA,SAAA3R,GA8JA,QAAA4R,GAAAxE,EAAAr9E,EAAAC,EAAAq9E,EAAApvE,EAAA4zE,EAAAC,GAEA,GAAA/H,GAAA,IAAA/5E,EAAAo9E,GACAtV,EAAA,IAAAuV,EAAAt9E,EAEA,WAAAA,EAAAC,GAAA+5E,EAAAjS,GAAAga,OAAA/hF,EAAAC,GAAA,EAAA+5E,EAAAjS,GAAA+Z,EAAA9H,EAAA9rE,EAAAlO,EAjKA2E,KAAAsrE,QAEA,IACAP,GAAAsS,EAAAC,EAAAC,EAAAC,EACAn6D,EAAA6E,EAAA2F,EAAA4C,EAFAl5B,KAAAkmF,GAAmBx0E,EAAA,EAAAJ,EAAA,EAAA0B,EAAA,EAInBvK,MAAA09E,cAAA,SAAAh1E,GAEA1I,KAAAsrE,SAEA,QAAAzxE,GAAA,EAAkBA,EAAA6O,EAAA5O,OAAcD,IAEhCmG,KAAAsrE,OAAAzxE,IAAuBoP,EAAAP,EAAA7O,GAAA,GAAAgP,EAAAH,EAAA7O,GAAA,GAAA0Q,EAAA7B,EAAA7O,GAAA,KAMvBmG,KAAA29E,SAAA,SAAAl3E,GAuBA,MArBAskE,IAAA/qE,KAAAsrE,OAAAxxE,OAAA,GAAA2M,EACA42E,EAAArkE,KAAA2tC,MAAAokB,GACAuS,EAAAvS,EAAAsS,EAEA9lF,EAAA,OAAA8lF,MAAA,EACA9lF,EAAA,GAAA8lF,EACA9lF,EAAA,GAAA8lF,EAAAr9E,KAAAsrE,OAAAxxE,OAAA,EAAAkG,KAAAsrE,OAAAxxE,OAAA,EAAAujF,EAAA,EACA9lF,EAAA,GAAA8lF,EAAAr9E,KAAAsrE,OAAAxxE,OAAA,EAAAkG,KAAAsrE,OAAAxxE,OAAA,EAAAujF,EAAA,EAEAh6D,EAAArjB,KAAAsrE,OAAA/zE,EAAA,IACA2wB,EAAAloB,KAAAsrE,OAAA/zE,EAAA,IACAs2B,EAAA7tB,KAAAsrE,OAAA/zE,EAAA,IACAk5B,EAAAzwB,KAAAsrE,OAAA/zE,EAAA,IAEAgmF,EAAAD,IACAE,EAAAF,EAAAC,EAEAE,EAAAx0E,EAAAi0E,EAAA75D,EAAApa,EAAAif,EAAAjf,EAAA4kB,EAAA5kB,EAAAwnB,EAAAxnB,EAAAq0E,EAAAC,EAAAC,GACAC,EAAA50E,EAAAq0E,EAAA75D,EAAAxa,EAAAqf,EAAArf,EAAAglB,EAAAhlB,EAAA4nB,EAAA5nB,EAAAy0E,EAAAC,EAAAC,GACAC,EAAAlzE,EAAA2yE,EAAA75D,EAAA9Y,EAAA2d,EAAA3d,EAAAsjB,EAAAtjB,EAAAkmB,EAAAlmB,EAAA+yE,EAAAC,EAAAC,GAEAC,GAIAz9E,KAAA49E,sBAAA,WAEA,GAAA/jF,GAAArC,EAAA4R,EAAApJ,KAAAsrE,OAAAxxE,OACA+jF,IAEA,KAAAhkF,EAAA,EAAcA,EAAAuP,EAAOvP,IAErBrC,EAAAwI,KAAAsrE,OAAAzxE,GACAgkF,EAAAhkF,IAAArC,EAAAyR,EAAAzR,EAAAqR,EAAArR,EAAA+S,EAIA,OAAAszE,IAMA79E,KAAA89E,UAAA,SAAAC,GAEA,GAAAlkF,GAAA+X,EAAAosE,EAAAnoE,EACAk1D,EAAA,EAAAsS,EAAA,EAAAY,EAAA,EACAC,EAAA,GAAArqE,GAAA8L,QACAw+D,EAAA,GAAAtqE,GAAA8L,QACAy+D,KACAC,EAAA,CAYA,KARAD,EAAA,KAEAL,MAAA,KAEAC,EAAAh+E,KAAAsrE,OAAAxxE,OAAAikF,EAEAG,EAAAzlE,KAAAzY,KAAAsrE,OAAA,IAEAzxE,EAAA,EAAcA,EAAAmkF,EAAcnkF,IAE5B+X,EAAA/X,EAAAmkF,EAEAnoE,EAAA7V,KAAA29E,SAAA/rE,GACAusE,EAAA1lE,KAAA5C,GAEAwoE,GAAAF,EAAApY,WAAAmY,GAEAA,EAAAzlE,KAAA5C,GAEAk1D,GAAA/qE,KAAAsrE,OAAAxxE,OAAA,GAAA8X,EACAyrE,EAAArkE,KAAA2tC,MAAAokB,GAEAsS,IAAAY,IAEAG,EAAAf,GAAAgB,EACAJ,EAAAZ,EAUA,OAFAe,KAAAtkF,QAAAukF,GAEUC,OAAAF,EAAAG,MAAAF,IAIVr+E,KAAAw+E,yBAAA,SAAAC,GAEA,GAAA5kF,GAAAk0E,EACAn8D,EAAA8sE,EAAAC,EACAC,EACAC,EAAAhpE,EACAipE,KACAX,EAAA,GAAAtqE,GAAA8L,QACAo/D,EAAA/+E,KAAA89E,WAIA,KAFAgB,EAAAp+E,KAAAy9E,EAAA1lE,KAAAzY,KAAAsrE,OAAA,IAAA9hB,SAEA3vD,EAAA,EAAcA,EAAAmG,KAAAsrE,OAAAxxE,OAAwBD,IAAA,CAYtC,IAPA+kF,EAAAG,EAAAT,OAAAzkF,GAAAklF,EAAAT,OAAAzkF,EAAA,GAEAglF,EAAA7lE,KAAAmmC,KAAAs/B,EAAAG,EAAAG,EAAAR,OAEAG,GAAA7kF,EAAA,IAAAmG,KAAAsrE,OAAAxxE,OAAA,GACA6kF,EAAA9kF,GAAAmG,KAAAsrE,OAAAxxE,OAAA,GAEAi0E,EAAA,EAAeA,EAAA8Q,EAAA,EAAkB9Q,IAEjCn8D,EAAA8sE,EAAA3Q,GAAA,EAAA8Q,IAAAF,EAAAD,GAEA7oE,EAAA7V,KAAA29E,SAAA/rE,GACAktE,EAAAp+E,KAAAy9E,EAAA1lE,KAAA5C,GAAA2zC,QAIAs1B,GAAAp+E,KAAAy9E,EAAA1lE,KAAAzY,KAAAsrE,OAAAzxE,IAAA2vD,SAIAxpD,KAAAsrE,OAAAwT,IAwBAjrE,EAAAmrE,SAAA,SAAAt2E,EAAAK,EAAAxR,GAEAyI,KAAA0I,EAAA3P,SAAA2P,IAAA,GAAAmL,GAAA8L,QACA3f,KAAA+I,EAAAhQ,SAAAgQ,IAAA,GAAA8K,GAAA8L,QACA3f,KAAAzI,EAAAwB,SAAAxB,IAAA,GAAAsc,GAAA8L,SAIA9L,EAAAmrE,SAAA1/D,OAAA,WAEA,GAAA+1D,GAAA,GAAAxhE,GAAA8L,OAEA,iBAAAjX,EAAAK,EAAAxR,EAAAigE,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OAEAnmB,GAAA0zD,WAAA31D,EAAAwR,GACAssE,EAAAnoB,WAAAxkD,EAAAK,GACAvP,EAAAouE,MAAAyN,EAEA,IAAA4J,GAAAzlF,EAAAkqE,UACA,OAAAub,GAAA,EAEAzlF,EAAA2vD,eAAA,EAAAnwC,KAAA+xC,KAAAk0B,IAIAzlF,EAAA0S,IAAA,WAQA2H,EAAAmrE,SAAAE,mBAAA,WAEA,GAAA7J,GAAA,GAAAxhE,GAAA8L,QACAyjD,EAAA,GAAAvvD,GAAA8L,QACAwmD,EAAA,GAAAtyD,GAAA8L,OAEA,iBAAAorD,EAAAriE,EAAAK,EAAAxR,EAAAigE,GAEA6d,EAAAnoB,WAAA31D,EAAAmR,GACA06D,EAAAlW,WAAAnkD,EAAAL,GACAy9D,EAAAjZ,WAAA6d,EAAAriE,EAEA,IAAAy2E,GAAA9J,EAAAjqB,IAAAiqB,GACA+J,EAAA/J,EAAAjqB,IAAAgY,GACAic,EAAAhK,EAAAjqB,IAAA+a,GACAmZ,EAAAlc,EAAAhY,IAAAgY,GACAmc,EAAAnc,EAAAhY,IAAA+a,GAEAqZ,EAAAL,EAAAG,EAAAF,IAEA5lF,EAAAg+D,GAAA,GAAA3jD,GAAA8L,OAGA,QAAA6/D,EAIA,MAAAhmF,GAAA0S,QAAA,KAIA,IAAAuzE,GAAA,EAAAD,EACAr2E,GAAAm2E,EAAAD,EAAAD,EAAAG,GAAAE,EACAz2E,GAAAm2E,EAAAI,EAAAH,EAAAC,GAAAI,CAGA,OAAAjmF,GAAA0S,IAAA,EAAA/C,EAAAH,IAAAG,OAMA0K,EAAAmrE,SAAAhT,cAAA,WAEA,GAAA5I,GAAA,GAAAvvD,GAAA8L,OAEA,iBAAAorD,EAAAriE,EAAAK,EAAAxR,GAEA,GAAAiC,GAAAqa,EAAAmrE,SAAAE,mBAAAnU,EAAAriE,EAAAK,EAAAxR,EAAA6rE,EAEA,OAAA5pE,GAAAyP,GAAA,GAAAzP,EAAAqP,GAAA,GAAArP,EAAAyP,EAAAzP,EAAAqP,GAAA,MAMAgL,EAAAmrE,SAAA7iF,WAEAE,YAAAwX,EAAAmrE,SAEA9yE,IAAA,SAAAxD,EAAAK,EAAAxR,GAMA,MAJAyI,MAAA0I,EAAA+P,KAAA/P,GACA1I,KAAA+I,EAAA0P,KAAA1P,GACA/I,KAAAzI,EAAAkhB,KAAAlhB,GAEAyI,MAIA0/E,wBAAA,SAAApU,EAAAqU,EAAAC,EAAAC,GAMA,MAJA7/E,MAAA0I,EAAA+P,KAAA6yD,EAAAqU,IACA3/E,KAAA+I,EAAA0P,KAAA6yD,EAAAsU,IACA5/E,KAAAzI,EAAAkhB,KAAA6yD,EAAAuU,IAEA7/E,MAIAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAqnE,GAMA,MAJA9/E,MAAA0I,EAAA+P,KAAAqnE,EAAAp3E,GACA1I,KAAA+I,EAAA0P,KAAAqnE,EAAA/2E,GACA/I,KAAAzI,EAAAkhB,KAAAqnE,EAAAvoF,GAEAyI,MAIAmzC,KAAA,WAEA,GAAAkiC,GAAA,GAAAxhE,GAAA8L,QACAyjD,EAAA,GAAAvvD,GAAA8L,OAEA,mBAKA,MAHA01D,GAAAnoB,WAAAltD,KAAAzI,EAAAyI,KAAA+I,GACAq6D,EAAAlW,WAAAltD,KAAA0I,EAAA1I,KAAA+I,GAEA,GAAAssE,EAAAzN,MAAAxE,GAAAtpE,aAMAimF,SAAA,SAAAvoB,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OACA,OAAAnmB,GAAAyrE,WAAAjlE,KAAA0I,EAAA1I,KAAA+I,GAAAgN,IAAA/V,KAAAzI,GAAA4xD,eAAA,MAIA7pC,OAAA,SAAAk4C,GAEA,MAAA3jD,GAAAmrE,SAAA1/D,OAAAtf,KAAA0I,EAAA1I,KAAA+I,EAAA/I,KAAAzI,EAAAigE,IAIAkf,MAAA,SAAAlf,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAAklE,KAEA,OAAAv/E,GAAAihF,sBAAAz6E,KAAA0I,EAAA1I,KAAA+I,EAAA/I,KAAAzI,IAIA2nF,mBAAA,SAAAnU,EAAAvT,GAEA,MAAA3jD,GAAAmrE,SAAAE,mBAAAnU,EAAA/qE,KAAA0I,EAAA1I,KAAA+I,EAAA/I,KAAAzI,EAAAigE,IAIAwU,cAAA,SAAAjB,GAEA,MAAAl3D,GAAAmrE,SAAAhT,cAAAjB,EAAA/qE,KAAA0I,EAAA1I,KAAA+I,EAAA/I,KAAAzI,IAIA8gE,OAAA,SAAAynB,GAEA,MAAAA,GAAAp3E,EAAA2vD,OAAAr4D,KAAA0I,IAAAo3E,EAAA/2E,EAAAsvD,OAAAr4D,KAAA+I,IAAA+2E,EAAAvoF,EAAA8gE,OAAAr4D,KAAAzI,KAYAsc,EAAAmsE,MAAA,SAAAC,GAEAjgF,KAAAigF,UAAAlnF,SAAAknF,KAEAjgF,KAAAqmD,UAAA,EACArmD,KAAAkgF,QAAA,EACAlgF,KAAA22C,YAAA,EAEA32C,KAAAmgF,YAIAtsE,EAAAmsE,MAAA7jF,WAEAE,YAAAwX,EAAAmsE,MAEAphE,MAAA,WAEA5e,KAAAqmD,UAAAttD,SAAAqhB,EAAAosC,aAAAztD,SAAAqhB,EAAAosC,YAAAjR,IACAn7B,EAAAosC,YAAAjR,MACAD,KAAAC,MAEAv1C,KAAAkgF,QAAAlgF,KAAAqmD,UACArmD,KAAAmgF,YAIAC,KAAA,WAEApgF,KAAAqgF,iBACArgF,KAAAmgF,YAIAE,eAAA,WAGA,MADArgF,MAAAsgF,WACAtgF,KAAA22C,aAIA2pC,SAAA,WAEA,GAAAlL,GAAA,CAQA,IANAp1E,KAAAigF,YAAAjgF,KAAAmgF,SAEAngF,KAAA4e,QAIA5e,KAAAmgF,QAAA,CAEA,GAAAI,GAAAxnF,SAAAqhB,EAAAosC,aAAAztD,SAAAqhB,EAAAosC,YAAAjR,IACAn7B,EAAAosC,YAAAjR,MACAD,KAAAC,KAEA6/B,GAAA,MAAAmL,EAAAvgF,KAAAkgF,SACAlgF,KAAAkgF,QAAAK,EAEAvgF,KAAA22C,aAAAy+B,EAIA,MAAAA,KAYAvhE,EAAAq7C,gBAAA,aAEAr7C,EAAAq7C,gBAAA/yD,WAEAE,YAAAwX,EAAAq7C,gBAEAtrD,MAAA,SAAAue,GAEAA,EAAA1I,iBAAA5F,EAAAq7C,gBAAA/yD,UAAAsd,iBACA0I,EAAAq+D,iBAAA3sE,EAAAq7C,gBAAA/yD,UAAAqkF,iBACAr+D,EAAA+xB,oBAAArgC,EAAAq7C,gBAAA/yD,UAAA+3C,oBACA/xB,EAAA2qC,cAAAj5C,EAAAq7C,gBAAA/yD,UAAA2wD,eAIArzC,iBAAA,SAAA9U,EAAAqxB,GAEAj9B,SAAAiH,KAAAygF,aAAAzgF,KAAAygF,cAEA,IAAAttD,GAAAnzB,KAAAygF,UAEA1nF,UAAAo6B,EAAAxuB,KAEAwuB,EAAAxuB,OAIAwuB,EAAAxuB,GAAAX,QAAAgyB,SAEA7C,EAAAxuB,GAAAjE,KAAAs1B,IAMAwqD,iBAAA,SAAA77E,EAAAqxB,GAEA,GAAAj9B,SAAAiH,KAAAygF,WAAA,QAEA,IAAAttD,GAAAnzB,KAAAygF,UAEA,OAAA1nF,UAAAo6B,EAAAxuB,IAAAwuB,EAAAxuB,GAAAX,QAAAgyB,SAUAke,oBAAA,SAAAvvC,EAAAqxB,GAEA,GAAAj9B,SAAAiH,KAAAygF,WAAA,CAEA,GAAAttD,GAAAnzB,KAAAygF,WACAC,EAAAvtD,EAAAxuB,EAEA,IAAA5L,SAAA2nF,EAAA,CAEA,GAAA9uE,GAAA8uE,EAAA18E,QAAAgyB,EAEApkB,SAEA8uE,EAAAC,OAAA/uE,EAAA,MAQAk7C,cAAA,SAAA55B,GAEA,GAAAn6B,SAAAiH,KAAAygF,WAAA,CAEA,GAAAttD,GAAAnzB,KAAAygF,WACAC,EAAAvtD,EAAAD,EAAAvuB,KAEA,IAAA5L,SAAA2nF,EAAA,CAEAxtD,EAAAlwB,OAAAhD,IAKA,QAHA2b,MACA7hB,EAAA4mF,EAAA5mF,OAEAD,EAAA,EAAmBA,EAAAC,EAAYD,IAE/B8hB,EAAA9hB,GAAA6mF,EAAA7mF,EAIA,QAAAA,GAAA,EAAmBA,EAAAC,EAAYD,IAE/B8hB,EAAA9hB,GAAAxC,KAAA2I,KAAAkzB,OAkBA,SAAArf,GA6BA,QAAA+sE,GAAAl4E,EAAAK,GAEA,MAAAL,GAAA2M,SAAAtM,EAAAsM,SA7BAxB,EAAAgtE,UAAA,SAAAlM,EAAAC,EAAAR,EAAAC,GAEAr0E,KAAA60E,IAAA,GAAAhhE,GAAA6gE,IAAAC,EAAAC,GAGA50E,KAAAo0E,QAAA,EACAp0E,KAAAq0E,OAAAnzD,IAEAlhB,KAAA8gF,QACA/oE,QACAgpE,QACAC,OACAC,QAAYC,UAAA,GACZC,WAGA7mF,OAAA8Y,iBAAApT,KAAA8gF,QACAM,YACA95E,IAAA,WAEA,MADA9D,SAAAwmD,KAAA,yEACAhqD,KAAAihF,WAaA,IAAAI,GAAA,SAAAl/D,EAAAm/D,EAAAC,EAAAC,GAEA,GAAAr/D,EAAA3K,eAEA2K,EAAAs/D,QAAAH,EAAAC,GAEAC,QAIA,OAFAv6E,GAAAkb,EAAAlb,SAEApN,EAAA,EAAAuP,EAAAnC,EAAAnN,OAAwCD,EAAAuP,EAAOvP,IAE/CwnF,EAAAp6E,EAAApN,GAAAynF,EAAAC,MAUA1tE,GAAAgtE,UAAA1kF,WAEAE,YAAAwX,EAAAgtE,UAEAa,cAAA,EAEAx1E,IAAA,SAAAyoE,EAAAC,GAIA50E,KAAA60E,IAAA3oE,IAAAyoE,EAAAC,IAIA+M,cAAA,SAAA9D,EAAAnlE,GAEAA,YAAA7E,GAAAkF,mBAEA/Y,KAAA60E,IAAAF,OAAA/L,sBAAAlwD,EAAAgvD,aACA1nE,KAAA60E,IAAAD,UAAA1oE,IAAA2xE,EAAA50E,EAAA40E,EAAAh1E,EAAA,IAAAitD,UAAAp9C,GAAA+wC,IAAAzpD,KAAA60E,IAAAF,QAAA7+D,aAEI4C,YAAA7E,GAAAg2C,oBAEJ7pD,KAAA60E,IAAAF,OAAAzoE,IAAA2xE,EAAA50E,EAAA40E,EAAAh1E,MAAAitD,UAAAp9C,GACA1Y,KAAA60E,IAAAD,UAAA1oE,IAAA,QAAAy7D,mBAAAjvD,EAAAgvD,cAIAlkE,QAAAC,MAAA,8CAMA49E,gBAAA,SAAAl/D,EAAAq/D,GAEA,GAAAD,KAMA,OAJAF,GAAAl/D,EAAAniB,KAAAuhF,EAAAC,GAEAD,EAAAK,KAAAhB,GAEAW,GAIAM,iBAAA,SAAAC,EAAAN,GAEA,GAAAD,KAEA,IAAA5nF,MAAAC,QAAAkoF,QAGA,MADAt+E,SAAAwmD,KAAA,8DACAu3B,CAIA,QAAA1nF,GAAA,EAAAuP,EAAA04E,EAAAhoF,OAAuCD,EAAAuP,EAAOvP,IAE9CwnF,EAAAS,EAAAjoF,GAAAmG,KAAAuhF,EAAAC,EAMA,OAFAD,GAAAK,KAAAhB,GAEAW,KAMC1tE,GAYDA,EAAAkuE,SAAA,WAEAznF,OAAAC,eAAAyF,KAAA,MAAqChG,MAAA6Z,EAAAmuE,oBAErChiF,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAA7G,KAAA,GACA6G,KAAA2E,KAAA,WAEA3E,KAAAiiF,OAAA,KACAjiF,KAAAiH,YAEAjH,KAAAwqD,GAAA32C,EAAAkuE,SAAAG,UAAA14B,OAEA,IAAA3zC,GAAA,GAAAhC,GAAA8L,QACApH,EAAA,GAAA1E,GAAAmuD,MACA3W,EAAA,GAAAx3C,GAAAy2C,WACA9B,EAAA,GAAA30C,GAAA8L,QAAA,OAEAwiE,EAAA,WAEA92B,EAAAyW,aAAAvpD,OAIA6pE,EAAA,WAEA7pE,EAAA4xD,kBAAA9e,EAAAtyD,WAIAwf,GAAA9F,SAAA0vE,GACA92B,EAAA54C,SAAA2vE,GAEA9nF,OAAA8Y,iBAAApT,MACA6V,UACAxO,cACArN,MAAA6b,GAEA0C,UACAlR,cACArN,MAAAue,GAEA8yC,YACAhkD,cACArN,MAAAqxD,GAEA7C,OACAnhD,cACArN,MAAAwuD,GAEA65B,iBACAroF,MAAA,GAAA6Z,GAAAyzD,SAEAgU,cACAthF,MAAA,GAAA6Z,GAAAq5D,WAIAltE,KAAAsiF,sBAEAtiF,KAAAipD,OAAA,GAAAp1C,GAAAyzD,QACAtnE,KAAA0nE,YAAA,GAAA7zD,GAAAyzD,QAEAtnE,KAAAuiF,iBAAA1uE,EAAAkuE,SAAAS,wBACAxiF,KAAAyiF,0BAEAziF,KAAAwX,WAEAxX,KAAA0iF,cACA1iF,KAAA2iF,iBAEA3iF,KAAA4iF,iBACA5iF,KAAA6iF,YAAA,EAEA7iF,KAAA8iF,aAIAjvE,EAAAkuE,SAAAG,UAAA,GAAAruE,GAAA8L,QAAA,OACA9L,EAAAkuE,SAAAS,2BAEA3uE,EAAAkuE,SAAA5lF,WAEAE,YAAAwX,EAAAkuE,SAEAgB,iBAIA,MAFAv/E,SAAAwmD,KAAA,kEAEAhqD,KAAAuY,SAAArK,OAIA60E,eAAA/oF,GAEAwJ,QAAAwmD,KAAA,kEAEAhqD,KAAAuY,SAAArK,MAAAlU,GAIAgpF,oBAEAx/E,QAAAwmD,KAAA,kGAIAg5B,kBAAAhpF,GAEAwJ,QAAAwmD,KAAA,kGAIAi5B,gBAAAjpF,GAEAwJ,QAAAwmD,KAAA,8EAIAk5B,YAAA,SAAAj6B,GAEAjpD,KAAAipD,OAAAse,iBAAAte,EAAAjpD,KAAAipD,QAEAjpD,KAAAipD,OAAA8qB,UAAA/zE,KAAA6V,SAAA7V,KAAAqrD,WAAArrD,KAAAwoD,QAIA26B,yBAAA,SAAA9wE,EAAAy2C,GAIA9oD,KAAAqrD,WAAAkX,iBAAAlwD,EAAAy2C,IAIAs6B,qBAAA,SAAArhB,GAEA/hE,KAAAqrD,WAAAyW,aAAAC,OAIAshB,sBAAA,SAAA/rF,GAIA0I,KAAAqrD,WAAAoX,sBAAAnrE,IAIA24E,0BAAA,SAAAtnE,GAIA3I,KAAAqrD,WAAA5yC,KAAA9P,IAIA26E,aAAA,WAKA,GAAAC,GAAA,GAAA1vE,GAAAy2C,UAEA,iBAAAj4C,EAAAy2C,GAMA,MAJAy6B,GAAAhhB,iBAAAlwD,EAAAy2C,GAEA9oD,KAAAqrD,WAAA8M,SAAAorB,GAEAvjF,SAMA8yE,QAAA,WAEA,GAAA1P,GAAA,GAAAvvD,GAAA8L,QAAA,MAEA,iBAAAmpC,GAEA,MAAA9oD,MAAAsjF,aAAAlgB,EAAAta,OAMAiqB,QAAA,WAEA,GAAA3P,GAAA,GAAAvvD,GAAA8L,QAAA,MAEA,iBAAAmpC,GAEA,MAAA9oD,MAAAsjF,aAAAlgB,EAAAta,OAMAkqB,QAAA,WAEA,GAAA5P,GAAA,GAAAvvD,GAAA8L,QAAA,MAEA,iBAAAmpC,GAEA,MAAA9oD,MAAAsjF,aAAAlgB,EAAAta,OAMA06B,gBAAA,WAKA,GAAApgB,GAAA,GAAAvvD,GAAA8L,OAEA,iBAAAtN,EAAAgD,GAMA,MAJA+tD,GAAA3qD,KAAApG,GAAAw4C,gBAAA7qD,KAAAqrD,YAEArrD,KAAA6V,SAAAE,IAAAqtD,EAAAja,eAAA9zC,IAEArV,SAMAysE,UAAA,SAAAp3D,EAAAhD,GAGA,MADA7O,SAAAwmD,KAAA,kGACAhqD,KAAAwjF,gBAAAnxE,EAAAgD,IAIAouE,WAAA,WAEA,GAAArgB,GAAA,GAAAvvD,GAAA8L,QAAA,MAEA,iBAAAtK,GAEA,MAAArV,MAAAwjF,gBAAApgB,EAAA/tD,OAMAquE,WAAA,WAEA,GAAAtgB,GAAA,GAAAvvD,GAAA8L,QAAA,MAEA,iBAAAtK,GAEA,MAAArV,MAAAwjF,gBAAApgB,EAAA/tD,OAMAsuE,WAAA,WAEA,GAAAvgB,GAAA,GAAAvvD,GAAA8L,QAAA,MAEA,iBAAAtK,GAEA,MAAArV,MAAAwjF,gBAAApgB,EAAA/tD,OAMAuuE,aAAA,SAAAjuB,GAEA,MAAAA,GAAAiR,aAAA5mE,KAAA0nE,cAIAmc,aAAA,WAEA,GAAAzI,GAAA,GAAAvnE,GAAAyzD,OAEA,iBAAA3R;AAEA,MAAAA,GAAAiR,aAAAwU,EAAA3T,WAAAznE,KAAA0nE,kBAMAzuD,OAAA,WAIA,GAAAmiE,GAAA,GAAAvnE,GAAAyzD,OAEA,iBAAA3R,GAEAylB,EAAAniE,OAAA08C,EAAA31D,KAAA6V,SAAA7V,KAAAwqD,IAEAxqD,KAAAqrD,WAAAoX,sBAAA2Y,OAMArlE,IAAA,SAAAoM,GAEA,GAAA5iB,UAAAzF,OAAA,GAEA,OAAAD,GAAA,EAAmBA,EAAA0F,UAAAzF,OAAsBD,IAEzCmG,KAAA+V,IAAAxW,UAAA1F,GAIA,OAAAmG,MAIA,MAAAmiB,KAAAniB,MAEAwD,QAAAC,MAAA,kEAAA0e,GACAniB,OAIAmiB,YAAAtO,GAAAkuE,UAEA,OAAA5/D,EAAA8/D,QAEA9/D,EAAA8/D,OAAAtyE,OAAAwS,GAIAA,EAAA8/D,OAAAjiF,KACAmiB,EAAA2qC,eAA0BnoD,KAAA,UAE1B3E,KAAAiH,SAAAvG,KAAAyhB,IAIA3e,QAAAC,MAAA,gEAAA0e,GAIAniB,OAIA2P,OAAA,SAAAwS,GAEA,GAAA5iB,UAAAzF,OAAA,EAEA,OAAAD,GAAA,EAAmBA,EAAA0F,UAAAzF,OAAsBD,IAEzCmG,KAAA2P,OAAApQ,UAAA1F,GAMA,IAAA+X,GAAA5R,KAAAiH,SAAAjD,QAAAme,EAEAvQ,UAEAuQ,EAAA8/D,OAAA,KAEA9/D,EAAA2qC,eAA0BnoD,KAAA,YAE1B3E,KAAAiH,SAAA05E,OAAA/uE,EAAA,KAMAkyE,eAAA,SAAA3qF,GAGA,MADAqK,SAAAwmD,KAAA,6EACAhqD,KAAAga,gBAAA7gB,IAIA4qF,cAAA,SAAA5sF,GAEA,MAAA6I,MAAAgkF,oBAAA,KAAA7sF,IAIA6iB,gBAAA,SAAA7gB,GAEA,MAAA6G,MAAAgkF,oBAAA,OAAA7qF,IAIA6qF,oBAAA,SAAA7qF,EAAAa,GAEA,GAAAgG,KAAA7G,KAAAa,EAAA,MAAAgG,KAEA,QAAAnG,GAAA,EAAAuP,EAAApJ,KAAAiH,SAAAnN,OAA4CD,EAAAuP,EAAOvP,IAAA,CAEnD,GAAAsxB,GAAAnrB,KAAAiH,SAAApN,GACAsoB,EAAAgJ,EAAA64D,oBAAA7qF,EAAAa,EAEA,IAAAjB,SAAAopB,EAEA,MAAAA,KAUA8hE,iBAAA,SAAAzsB,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OAIA,OAFA3f,MAAA4sE,sBAEApzE,EAAAovE,sBAAA5oE,KAAA0nE,cAIAwc,mBAAA,WAEA,GAAAruE,GAAA,GAAAhC,GAAA8L,QACA6oC,EAAA,GAAA30C,GAAA8L,OAEA,iBAAA63C,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAAy2C,UAMA,OAJAtqD,MAAA4sE,sBAEA5sE,KAAA0nE,YAAAqM,UAAAl+D,EAAArc,EAAAgvD,GAEAhvD,MAMA2qF,iBAAA,WAEA,GAAA94B,GAAA,GAAAx3C,GAAAy2C,UAEA,iBAAAkN,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAAmuD,KAIA,OAFAhiE,MAAAkkF,mBAAA74B,GAEA7xD,EAAA2wE,kBAAA9e,EAAArrD,KAAAuY,SAAArK,cAMAk2E,cAAA,WAEA,GAAAvuE,GAAA,GAAAhC,GAAA8L,QACA0rC,EAAA,GAAAx3C,GAAAy2C,UAEA,iBAAAkN,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OAMA,OAJA3f,MAAA4sE,sBAEA5sE,KAAA0nE,YAAAqM,UAAAl+D,EAAAw1C,EAAA7xD,GAEAA,MAMA6qF,kBAAA,WAEA,GAAAh5B,GAAA,GAAAx3C,GAAAy2C,UAEA,iBAAAkN,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OAIA,OAFA3f,MAAAkkF,mBAAA74B,GAEA7xD,EAAA0S,IAAA,OAAA2+C,gBAAAQ,OAMAo2B,QAAA,aAEA5U,SAAA,SAAAnvC,GAEAA,EAAA19B,KAIA,QAFAiH,GAAAjH,KAAAiH,SAEApN,EAAA,EAAAuP,EAAAnC,EAAAnN,OAAuCD,EAAAuP,EAAOvP,IAE9CoN,EAAApN,GAAAgzE,SAAAnvC,IAMA4mD,gBAAA,SAAA5mD,GAEA,GAAA19B,KAAAwX,aAAA,CAEAkmB,EAAA19B,KAIA,QAFAiH,GAAAjH,KAAAiH,SAEApN,EAAA,EAAAuP,EAAAnC,EAAAnN,OAAuCD,EAAAuP,EAAOvP,IAE9CoN,EAAApN,GAAAyqF,gBAAA5mD,KAMA6mD,kBAAA,SAAA7mD,GAEA,GAAAukD,GAAAjiF,KAAAiiF,MAEA,QAAAA,IAEAvkD,EAAAukD,GAEAA,EAAAsC,kBAAA7mD,KAMAhoB,aAAA,WAEA1V,KAAAipD,OAAA6qB,QAAA9zE,KAAA6V,SAAA7V,KAAAqrD,WAAArrD,KAAAwoD,OAEAxoD,KAAAyiF,2BAIA7V,kBAAA,SAAA4X,GAEAxkF,KAAAuiF,uBAAAviF,KAAA0V,eAEA1V,KAAAyiF,6BAAA+B,SAEA,OAAAxkF,KAAAiiF,OAEAjiF,KAAA0nE,YAAAjvD,KAAAzY,KAAAipD,QAIAjpD,KAAA0nE,YAAAH,iBAAAvnE,KAAAiiF,OAAAva,YAAA1nE,KAAAipD,QAIAjpD,KAAAyiF,0BAEA+B,KAMA,QAAA3qF,GAAA,EAAAuP,EAAApJ,KAAAiH,SAAAnN,OAA4CD,EAAAuP,EAAOvP,IAEnDmG,KAAAiH,SAAApN,GAAA+yE,kBAAA4X,IAMAC,OAAA,SAAA5wC,GAyEA,QAAA6wC,GAAAzlF,GAEA,GAAA0lF,KACA,QAAAxpF,KAAA8D,GAAA,CAEA,GAAA8d,GAAA9d,EAAA9D,SACA4hB,GAAA6nE,SACAD,EAAAjkF,KAAAqc,GAGA,MAAA4nE,GAjFA,GAAAE,GAAA9rF,SAAA86C,EAEA92B,IAkCA,IA7BA8nE,IAGAhxC,GACAixC,cACAC,aACAC,YACAC,WAGAloE,EAAA6nE,UACA/kC,QAAA,IACAl7C,KAAA,SACAugF,UAAA,oBAOAnoE,EAAA4+D,KAAA37E,KAAA27E,KACA5+D,EAAApY,KAAA3E,KAAA2E,KAEA,KAAA3E,KAAA7G,OAAA4jB,EAAA5jB,KAAA6G,KAAA7G,MACA,OAAA+hB,KAAAC,UAAAnb,KAAA8iF,YAA8C/lE,EAAA+lE,SAAA9iF,KAAA8iF,UAC9C9iF,KAAAwX,eAAAuF,EAAAvF,QAAAxX,KAAAwX,SAEAuF,EAAAksC,OAAAjpD,KAAAipD,OAAAzD,UAEAxlD,KAAAiH,SAAAnN,OAAA,GAEAijB,EAAA9V,WAEA,QAAApN,GAAA,EAAmBA,EAAAmG,KAAAiH,SAAAnN,OAA0BD,IAE7CkjB,EAAA9V,SAAAvG,KAAAV,KAAAiH,SAAApN,GAAA4qF,OAAA5wC,GAAA1xB,QAMA,GAAAgjE,KAEA,IAAAN,EAAA,CAEA,GAAAC,GAAAJ,EAAA7wC,EAAAixC,YACAC,EAAAL,EAAA7wC,EAAAkxC,WACAC,EAAAN,EAAA7wC,EAAAmxC,UACAC,EAAAP,EAAA7wC,EAAAoxC,OAEAH,GAAAhrF,OAAA,IAAAqrF,EAAAL,cACAC,EAAAjrF,OAAA,IAAAqrF,EAAAJ,aACAC,EAAAlrF,OAAA,IAAAqrF,EAAAH,YACAC,EAAAnrF,OAAA,IAAAqrF,EAAAF,UAMA,MAFAE,GAAAhjE,OAAApF,EAEAooE,GAqBA37B,MAAA,SAAAg4B,GAEA,UAAAxhF,MAAA3D,aAAAoc,KAAAzY,KAAAwhF,IAIA/oE,KAAA,SAAAxV,EAAAu+E,GA8BA,GA5BAzoF,SAAAyoF,UAEAxhF,KAAA7G,KAAA8J,EAAA9J,KAEA6G,KAAAwqD,GAAA/xC,KAAAxV,EAAAunD,IAEAxqD,KAAA6V,SAAA4C,KAAAxV,EAAA4S,UACA7V,KAAAqrD,WAAA5yC,KAAAxV,EAAAooD,YACArrD,KAAAwoD,MAAA/vC,KAAAxV,EAAAulD,OAEAxoD,KAAAsiF,mBAAAr/E,EAAAq/E,mBAEAtiF,KAAAipD,OAAAxwC,KAAAxV,EAAAgmD,QACAjpD,KAAA0nE,YAAAjvD,KAAAxV,EAAAykE,aAEA1nE,KAAAuiF,iBAAAt/E,EAAAs/E,iBACAviF,KAAAyiF,uBAAAx/E,EAAAw/E,uBAEAziF,KAAAwX,QAAAvU,EAAAuU,QAEAxX,KAAA0iF,WAAAz/E,EAAAy/E,WACA1iF,KAAA2iF,cAAA1/E,EAAA0/E,cAEA3iF,KAAA4iF,cAAA3/E,EAAA2/E,cACA5iF,KAAA6iF,YAAA5/E,EAAA4/E,YAEA7iF,KAAA8iF,SAAA5nE,KAAA2B,MAAA3B,KAAAC,UAAAlY,EAAA6/E,WAEAtB,OAEA,OAAA3nF,GAAA,EAAmBA,EAAAoJ,EAAAgE,SAAAnN,OAA4BD,IAAA,CAE/C,GAAAsxB,GAAAloB,EAAAgE,SAAApN,EACAmG,MAAA+V,IAAAoV,EAAAq+B,SAMA,MAAAxpD,QAMA6T,EAAAq7C,gBAAA/yD,UAAAyH,MAAAiQ,EAAAkuE,SAAA5lF,WAEA0X,EAAAmuE,gBAAA,EASAnuE,EAAA+L,MAAA,SAAAlX,EAAAK,EAAAxR,EAAA+nB,EAAA/P,EAAA61E,GAEAplF,KAAA0I,IACA1I,KAAA+I,IACA/I,KAAAzI,IAEAyI,KAAAsf,mBAAAzL,GAAA8L,QAAAL,EAAA,GAAAzL,GAAA8L,QACA3f,KAAAqlF,cAAA1rF,MAAAC,QAAA0lB,QAEAtf,KAAAuP,kBAAAsE,GAAAqiD,MAAA3mD,EAAA,GAAAsE,GAAAqiD,MACAl2D,KAAA4X,aAAAje,MAAAC,QAAA2V,QAEAvP,KAAAolF,cAAArsF,SAAAqsF,IAAA,GAIAvxE,EAAA+L,MAAAzjB,WAEAE,YAAAwX,EAAA+L,MAEA4pC,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAxV,GAEAjD,KAAA0I,EAAAzF,EAAAyF,EACA1I,KAAA+I,EAAA9F,EAAA8F,EACA/I,KAAAzI,EAAA0L,EAAA1L,EAEAyI,KAAAsf,OAAA7G,KAAAxV,EAAAqc,QACAtf,KAAAuP,MAAAkJ,KAAAxV,EAAAsM,OAEAvP,KAAAolF,cAAAniF,EAAAmiF,aAEA,QAAAvrF,GAAA,EAAA2xE,EAAAvoE,EAAAoiF,cAAAvrF,OAAoDD,EAAA2xE,EAAQ3xE,IAE5DmG,KAAAqlF,cAAAxrF,GAAAoJ,EAAAoiF,cAAAxrF,GAAA2vD,OAIA,QAAA3vD,GAAA,EAAA2xE,EAAAvoE,EAAA2U,aAAA9d,OAAmDD,EAAA2xE,EAAQ3xE,IAE3DmG,KAAA4X,aAAA/d,GAAAoJ,EAAA2U,aAAA/d,GAAA2vD,OAIA,OAAAxpD,QAYA6T,EAAAyxE,MAAA,SAAA58E,EAAAK,EAAAxR,EAAAkR,EAAA6W,EAAA/P,EAAA61E,GAGA,MADA5hF,SAAAwmD,KAAA,wEACA,GAAAn2C,GAAA+L,MAAAlX,EAAAK,EAAAxR,EAAA+nB,EAAA/P,EAAA61E,IAUAvxE,EAAAwL,gBAAA,SAAA1D,EAAA2qD,GAEAtmE,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAA2b,QACA3b,KAAAsmE,WAEAtmE,KAAAulF,WACAvlF,KAAAwlF,aAAqBjnE,OAAA,EAAAgnC,UAErBvlD,KAAA6/C,QAAA,GAIAhsC,EAAAwL,gBAAAljB,WAEAE,YAAAwX,EAAAwL,gBAEAvlB,aAGA,MADA0J,SAAAwmD,KAAA,0EACAhqD,KAAA2b,MAAA7hB,QAIAyrD,YAEA,MAAAvlD,MAAA2b,MAAA7hB,OAAAkG,KAAAsmE,UAIAmf,gBAAAzrF,GAEAA,QAAAgG,KAAA6/C,WAIA6lC,WAAA,SAAA1rF,GAIA,MAFAgG,MAAAulF,QAAAvrF,EAEAgG,MAIAyY,KAAA,SAAAxV,GAOA,MALAjD,MAAA2b,MAAA,GAAA1Y,GAAA0Y,MAAAtf,YAAA4G,EAAA0Y,OACA3b,KAAAsmE,SAAArjE,EAAAqjE,SAEAtmE,KAAAulF,QAAAtiF,EAAAsiF,QAEAvlF,MAIA2lF,OAAA,SAAAC,EAAAvf,EAAAwf,GAEAD,GAAA5lF,KAAAsmE,SACAuf,GAAAxf,EAAAC,QAEA,QAAAzsE,GAAA,EAAAuP,EAAApJ,KAAAsmE,SAAqCzsE,EAAAuP,EAAOvP,IAE5CmG,KAAA2b,MAAAiqE,EAAA/rF,GAAAwsE,EAAA1qD,MAAAkqE,EAAAhsF,EAIA,OAAAmG,OAIA8lF,UAAA,SAAAnqE,GAIA,MAFA3b,MAAA2b,MAAAzP,IAAAyP,GAEA3b,MAIA+lF,gBAAA,SAAAhoE,GAIA,OAFApC,GAAA3b,KAAA2b,MAAA4C,EAAA,EAEA1kB,EAAA,EAAAuP,EAAA2U,EAAAjkB,OAAqCD,EAAAuP,EAAOvP,IAAA,CAE5C,GAAA0V,GAAAwO,EAAAlkB,EAEAd,UAAAwW,IAEA/L,QAAAwmD,KAAA,8DAAAnwD,GACA0V,EAAA,GAAAsE,GAAAqiD,OAIAv6C,EAAA4C,KAAAhP,EAAAlG,EACAsS,EAAA4C,KAAAhP,EAAA3G,EACA+S,EAAA4C,KAAAhP,EAAAxG,EAIA,MAAA/I,OAIAgmF,iBAAA,SAAAC,GAIA,OAFAtqE,GAAA3b,KAAA2b,MAAA4C,EAAA,EAEA1kB,EAAA,EAAAuP,EAAA68E,EAAAnsF,OAAsCD,EAAAuP,EAAOvP,IAAA,CAE7C,GAAA+X,GAAAq0E,EAAApsF,EAEA8hB,GAAA4C,KAAA3M,EAAAlJ,EACAiT,EAAA4C,KAAA3M,EAAA7I,EACA4S,EAAA4C,KAAA3M,EAAAra,EAIA,MAAAyI,OAIAkmF,kBAAA,SAAAC,GAIA,OAFAxqE,GAAA3b,KAAA2b,MAAA4C,EAAA,EAEA1kB,EAAA,EAAAuP,EAAA+8E,EAAArsF,OAAsCD,EAAAuP,EAAOvP,IAAA,CAE7C,GAAA87D,GAAAwwB,EAAAtsF,EAEAd,UAAA48D,IAEAnyD,QAAAwmD,KAAA,iEAAAnwD,GACA87D,EAAA,GAAA9hD,GAAA+6C,SAIAjzC,EAAA4C,KAAAo3C,EAAA1sD,EACA0S,EAAA4C,KAAAo3C,EAAA9sD,EAIA,MAAA7I,OAIAomF,kBAAA,SAAAD,GAIA,OAFAxqE,GAAA3b,KAAA2b,MAAA4C,EAAA,EAEA1kB,EAAA,EAAAuP,EAAA+8E,EAAArsF,OAAsCD,EAAAuP,EAAOvP,IAAA,CAE7C,GAAA87D,GAAAwwB,EAAAtsF,EAEAd,UAAA48D,IAEAnyD,QAAAwmD,KAAA,iEAAAnwD,GACA87D,EAAA,GAAA9hD,GAAA8L,SAIAhE,EAAA4C,KAAAo3C,EAAA1sD,EACA0S,EAAA4C,KAAAo3C,EAAA9sD,EACA8S,EAAA4C,KAAAo3C,EAAAprD,EAIA,MAAAvK,OAIAqmF,kBAAA,SAAAF,GAIA,OAFAxqE,GAAA3b,KAAA2b,MAAA4C,EAAA,EAEA1kB,EAAA,EAAAuP,EAAA+8E,EAAArsF,OAAsCD,EAAAuP,EAAOvP,IAAA,CAE7C,GAAA87D,GAAAwwB,EAAAtsF,EAEAd,UAAA48D,IAEAnyD,QAAAwmD,KAAA,iEAAAnwD,GACA87D,EAAA,GAAA9hD,GAAAu1D,SAIAztD,EAAA4C,KAAAo3C,EAAA1sD,EACA0S,EAAA4C,KAAAo3C,EAAA9sD,EACA8S,EAAA4C,KAAAo3C,EAAAprD,EACAoR,EAAA4C,KAAAo3C,EAAAhrD,EAIA,MAAA3K,OAIAkM,IAAA,SAAAlS,EAAAukB,GAMA,MAJAxlB,UAAAwlB,MAAA,GAEAve,KAAA2b,MAAAzP,IAAAlS,EAAAukB,GAEAve,MAIAiuE,KAAA,SAAAr8D,GAEA,MAAA5R,MAAA2b,MAAA/J,EAAA5R,KAAAsmE,WAIAzB,KAAA,SAAAjzD,EAAA3I,GAIA,MAFAjJ,MAAA2b,MAAA/J,EAAA5R,KAAAsmE,UAAAr9D,EAEAjJ,MAIAkuE,KAAA,SAAAt8D,GAEA,MAAA5R,MAAA2b,MAAA/J,EAAA5R,KAAAsmE,SAAA,IAIAxB,KAAA,SAAAlzD,EAAA/I,GAIA,MAFA7I,MAAA2b,MAAA/J,EAAA5R,KAAAsmE,SAAA,GAAAz9D,EAEA7I,MAIAmuE,KAAA,SAAAv8D,GAEA,MAAA5R,MAAA2b,MAAA/J,EAAA5R,KAAAsmE,SAAA,IAIAC,KAAA,SAAA30D,EAAArH,GAIA,MAFAvK,MAAA2b,MAAA/J,EAAA5R,KAAAsmE,SAAA,GAAA/7D,EAEAvK,MAIAsmF,KAAA,SAAA10E,GAEA,MAAA5R,MAAA2b,MAAA/J,EAAA5R,KAAAsmE,SAAA,IAIA+C,KAAA,SAAAz3D,EAAAjH,GAIA,MAFA3K,MAAA2b,MAAA/J,EAAA5R,KAAAsmE,SAAA,GAAA37D,EAEA3K,MAIAumF,MAAA,SAAA30E,EAAA3I,EAAAJ,GAOA,MALA+I,IAAA5R,KAAAsmE,SAEAtmE,KAAA2b,MAAA/J,EAAA,GAAA3I,EACAjJ,KAAA2b,MAAA/J,EAAA,GAAA/I,EAEA7I,MAIAouE,OAAA,SAAAx8D,EAAA3I,EAAAJ,EAAA0B,GAQA,MANAqH,IAAA5R,KAAAsmE,SAEAtmE,KAAA2b,MAAA/J,EAAA,GAAA3I,EACAjJ,KAAA2b,MAAA/J,EAAA,GAAA/I,EACA7I,KAAA2b,MAAA/J,EAAA,GAAArH,EAEAvK,MAIAwmF,QAAA,SAAA50E,EAAA3I,EAAAJ,EAAA0B,EAAAI,GASA,MAPAiH,IAAA5R,KAAAsmE,SAEAtmE,KAAA2b,MAAA/J,EAAA,GAAA3I,EACAjJ,KAAA2b,MAAA/J,EAAA,GAAA/I,EACA7I,KAAA2b,MAAA/J,EAAA,GAAArH,EACAvK,KAAA2b,MAAA/J,EAAA,GAAAjH,EAEA3K,MAIAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,QAQA6T,EAAA4yE,cAAA,SAAA9qE,EAAA2qD,GAEA,UAAAzyD,GAAAwL,gBAAA,GAAAqnE,WAAA/qE,GAAA2qD,IAIAzyD,EAAA8yE,eAAA,SAAAhrE,EAAA2qD,GAEA,UAAAzyD,GAAAwL,gBAAA,GAAAU,YAAApE,GAAA2qD,IAIAzyD,EAAA+yE,sBAAA,SAAAjrE,EAAA2qD,GAEA,UAAAzyD,GAAAwL,gBAAA,GAAAwnE,mBAAAlrE,GAAA2qD,IAIAzyD,EAAAizE,eAAA,SAAAnrE,EAAA2qD,GAEA,UAAAzyD,GAAAwL,gBAAA,GAAA0nE,YAAAprE,GAAA2qD,IAIAzyD,EAAAmzE,gBAAA,SAAArrE,EAAA2qD,GAEA,UAAAzyD,GAAAwL,gBAAA,GAAA4nE,aAAAtrE,GAAA2qD,IAIAzyD,EAAAqzE,eAAA,SAAAvrE,EAAA2qD,GAEA,UAAAzyD,GAAAwL,gBAAA,GAAA8nE,YAAAxrE,GAAA2qD,IAIAzyD,EAAAuzE,gBAAA,SAAAzrE,EAAA2qD,GAEA,UAAAzyD,GAAAwL,gBAAA,GAAAgoE,aAAA1rE,GAAA2qD,IAIAzyD,EAAAyzE,iBAAA,SAAA3rE,EAAA2qD,GAEA,UAAAzyD,GAAAwL,gBAAA,GAAAjB,cAAAzC,GAAA2qD,IAIAzyD,EAAA0zE,iBAAA,SAAA5rE,EAAA2qD,GAEA,UAAAzyD,GAAAwL,gBAAA,GAAAmoE,cAAA7rE,GAAA2qD,IAOAzyD,EAAA4zE,uBAAA,SAAA9rE,EAAA2qD,GAGA,MADA9iE,SAAAwmD,KAAA,8GACA,GAAAn2C,GAAAwL,gBAAA1D,EAAA2qD,GAAAof,gBAUA7xE,EAAA6zE,yBAAA,SAAA/rE,EAAA2qD,EAAAqhB,GAEA9zE,EAAAwL,gBAAAhoB,KAAA2I,KAAA2b,EAAA2qD,GAEAtmE,KAAA2nF,oBAAA,GAIA9zE,EAAA6zE,yBAAAvrF,UAAA7B,OAAA8B,OAAAyX,EAAAwL,gBAAAljB,WACA0X,EAAA6zE,yBAAAvrF,UAAAE,YAAAwX,EAAA6zE,yBAEA7zE,EAAA6zE,yBAAAvrF,UAAAsc,KAAA,SAAAxV,GAMA,MAJA4Q,GAAAwL,gBAAAljB,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAA2nF,iBAAA1kF,EAAA0kF,iBAEA3nF,MAUA6T,EAAA+zE,kBAAA,SAAAjsE,EAAAksE,GAEA7nF,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAA2b,QACA3b,KAAA6nF,SAEA7nF,KAAAulF,WACAvlF,KAAAwlF,aAAqBjnE,OAAA,EAAAgnC,UAErBvlD,KAAA6/C,QAAA,GAIAhsC,EAAA+zE,kBAAAzrF,WAEAE,YAAAwX,EAAA+zE,kBAEA9tF,aAEA,MAAAkG,MAAA2b,MAAA7hB,QAIAyrD,YAEA,MAAAvlD,MAAA2b,MAAA7hB,OAAAkG,KAAA6nF,QAIApC,gBAAAzrF,GAEAA,QAAAgG,KAAA6/C,WAIA6lC,WAAA,SAAA1rF,GAIA,MAFAgG,MAAAulF,QAAAvrF,EAEAgG,MAIAyY,KAAA,SAAAxV,GAEAjD,KAAA2b,MAAA,GAAA1Y,GAAA0Y,MAAAtf,YAAA4G,EAAA0Y,OACA3b,KAAA6nF,OAAA5kF,EAAA4kF,OACA7nF,KAAAulF,QAAAtiF,EAAAsiF,SAIAI,OAAA,SAAAC,EAAAvf,EAAAwf,GAEAD,GAAA5lF,KAAA6nF,OACAhC,GAAAxf,EAAAwhB,MAEA,QAAAhuF,GAAA,EAAAuP,EAAApJ,KAAA6nF,OAAmChuF,EAAAuP,EAAOvP,IAE1CmG,KAAA2b,MAAAiqE,EAAA/rF,GAAAwsE,EAAA1qD,MAAAkqE,EAAAhsF,EAIA,OAAAmG,OAIAkM,IAAA,SAAAlS,EAAAukB,GAMA,MAJAxlB,UAAAwlB,MAAA,GAEAve,KAAA2b,MAAAzP,IAAAlS,EAAAukB,GAEAve,MAIAwpD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,QAYA6T,EAAAi0E,2BAAA,SAAAnsE,EAAAksE,EAAAF,GAEA9zE,EAAA+zE,kBAAAvwF,KAAA2I,KAAA2b,EAAAksE,GAEA7nF,KAAA2nF,oBAAA,GAIA9zE,EAAAi0E,2BAAA3rF,UAAA7B,OAAA8B,OAAAyX,EAAA+zE,kBAAAzrF,WACA0X,EAAAi0E,2BAAA3rF,UAAAE,YAAAwX,EAAAi0E,2BAEAj0E,EAAAi0E,2BAAA3rF,UAAAsc,KAAA,SAAAxV,GAMA,MAJA4Q,GAAA+zE,kBAAAzrF,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAA2nF,iBAAA1kF,EAAA0kF,iBAEA3nF,MAUA6T,EAAAk0E,2BAAA,SAAAC,EAAA1hB,EAAA/nD,GAEAve,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAA+c,KAAAirE,EACAhoF,KAAAsmE,WACAtmE,KAAAue,UAKA1K,EAAAk0E,2BAAA5rF,WAEAE,YAAAwX,EAAAk0E,2BAEAjuF,aAGA,MADA0J,SAAAwmD,KAAA,0EACAhqD,KAAA2b,MAAA7hB,QAIAyrD,YAEA,MAAAvlD,MAAA+c,KAAApB,MAAA7hB,OAAAkG,KAAA+c,KAAA8qE,QAIAhjB,KAAA,SAAAjzD,EAAA3I,GAIA,MAFAjJ,MAAA+c,KAAApB,MAAA/J,EAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,QAAAtV,EAEAjJ,MAIA8kE,KAAA,SAAAlzD,EAAA/I,GAIA,MAFA7I,MAAA+c,KAAApB,MAAA/J,EAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,OAAA,GAAA1V,EAEA7I,MAIAumE,KAAA,SAAA30D,EAAArH,GAIA,MAFAvK,MAAA+c,KAAApB,MAAA/J,EAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,OAAA,GAAAhU,EAEAvK,MAIAqpE,KAAA,SAAAz3D,EAAAjH,GAIA,MAFA3K,MAAA+c,KAAApB,MAAA/J,EAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,OAAA,GAAA5T,EAEA3K,MAIAiuE,KAAA,SAAAr8D,GAEA,MAAA5R,MAAA+c,KAAApB,MAAA/J,EAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,SAIA2vD,KAAA,SAAAt8D,GAEA,MAAA5R,MAAA+c,KAAApB,MAAA/J,EAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,OAAA,IAIA4vD,KAAA,SAAAv8D,GAEA,MAAA5R,MAAA+c,KAAApB,MAAA/J,EAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,OAAA,IAIA+nE,KAAA,SAAA10E,GAEA,MAAA5R,MAAA+c,KAAApB,MAAA/J,EAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,OAAA,IAIAgoE,MAAA,SAAA30E,EAAA3I,EAAAJ,GAOA,MALA+I,KAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,OAEAve,KAAA+c,KAAApB,MAAA/J,EAAA,GAAA3I,EACAjJ,KAAA+c,KAAApB,MAAA/J,EAAA,GAAA/I,EAEA7I,MAIAouE,OAAA,SAAAx8D,EAAA3I,EAAAJ,EAAA0B,GAQA,MANAqH,KAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,OAEAve,KAAA+c,KAAApB,MAAA/J,EAAA,GAAA3I,EACAjJ,KAAA+c,KAAApB,MAAA/J,EAAA,GAAA/I,EACA7I,KAAA+c,KAAApB,MAAA/J,EAAA,GAAArH,EAEAvK,MAIAwmF,QAAA,SAAA50E,EAAA3I,EAAAJ,EAAA0B,EAAAI,GASA,MAPAiH,KAAA5R,KAAA+c,KAAA8qE,OAAA7nF,KAAAue,OAEAve,KAAA+c,KAAApB,MAAA/J,EAAA,GAAA3I,EACAjJ,KAAA+c,KAAApB,MAAA/J,EAAA,GAAA/I,EACA7I,KAAA+c,KAAApB,MAAA/J,EAAA,GAAArH,EACAvK,KAAA+c,KAAApB,MAAA/J,EAAA,GAAAjH,EAEA3K,OAiBA6T,EAAA6L,SAAA,WAEAplB,OAAAC,eAAAyF,KAAA,MAAqChG,MAAA6Z,EAAAo0E,oBAErCjoF,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAA7G,KAAA,GACA6G,KAAA2E,KAAA,WAEA3E,KAAAye,YACAze,KAAA+d,UACA/d,KAAAme,SACAne,KAAAkoF,mBAEAloF,KAAAmoF,gBACAnoF,KAAAooF,eACApoF,KAAAqoF,gBAEAroF,KAAAsoF,eACAtoF,KAAAuoF,eAEAvoF,KAAAwoF,iBAEAxoF,KAAAmY,YAAA,KACAnY,KAAAo6E,eAAA,KAIAp6E,KAAAyoF,sBACAzoF,KAAA0oF,sBACA1oF,KAAA2oF,iBACA3oF,KAAA4oF,qBACA5oF,KAAA6oF,oBACA7oF,KAAA8oF,2BACA9oF,KAAA+oF,qBAIAl1E,EAAA6L,SAAAvjB,WAEAE,YAAAwX,EAAA6L,SAEAwjE,YAAA,SAAAj6B,GAIA,OAFAqyB,OAAAznE,GAAAq5D,SAAA0B,gBAAA3lB,GAEApvD,EAAA,EAAA2xE,EAAAxrE,KAAAye,SAAA3kB,OAA6CD,EAAA2xE,EAAQ3xE,IAAA,CAErD,GAAAmvF,GAAAhpF,KAAAye,SAAA5kB,EACAmvF,GAAApiB,aAAA3d,GAIA,OAAApvD,GAAA,EAAA2xE,EAAAxrE,KAAAme,MAAArkB,OAA0CD,EAAA2xE,EAAQ3xE,IAAA,CAElD,GAAA8kB,GAAA3e,KAAAme,MAAAtkB,EACA8kB,GAAAW,OAAAqnD,aAAA2U,GAAAxlE,WAEA,QAAAi4D,GAAA,EAAAkb,EAAAtqE,EAAA0mE,cAAAvrF,OAAmDi0E,EAAAkb,EAAQlb,IAE3DpvD,EAAA0mE,cAAAtX,GAAApH,aAAA2U,GAAAxlE,YAMA,OAAA9V,KAAAmY,aAEAnY,KAAAgY,qBAIA,OAAAhY,KAAAo6E,gBAEAp6E,KAAAiY,wBAIAjY,KAAAyoF,sBACAzoF,KAAA4oF,sBAIA9V,QAAA,WAIA,GAAAsI,EAEA,iBAAAtyB,GAQA,MANA/vD,UAAAqiF,MAAA,GAAAvnE,GAAAyzD,SAEA8T,EAAA7H,cAAAzqB,GAEA9oD,KAAAkjF,YAAA9H,GAEAp7E,SAMA+yE,QAAA,WAIA,GAAAqI,EAEA,iBAAAtyB,GAQA,MANA/vD,UAAAqiF,MAAA,GAAAvnE,GAAAyzD,SAEA8T,EAAA5H,cAAA1qB,GAEA9oD,KAAAkjF,YAAA9H,GAEAp7E,SAMAgzE,QAAA,WAIA,GAAAoI,EAEA,iBAAAtyB,GAQA,MANA/vD,UAAAqiF,MAAA,GAAAvnE,GAAAyzD,SAEA8T,EAAA3H,cAAA3qB,GAEA9oD,KAAAkjF,YAAA9H,GAEAp7E,SAMAysE,UAAA,WAIA,GAAA2O,EAEA,iBAAAnyE,EAAAJ,EAAA0B,GAQA,MANAxR,UAAAqiF,MAAA,GAAAvnE,GAAAyzD,SAEA8T,EAAA9H,gBAAArqE,EAAAJ,EAAA0B,GAEAvK,KAAAkjF,YAAA9H,GAEAp7E,SAMAwoD,MAAA,WAIA,GAAA4yB,EAEA,iBAAAnyE,EAAAJ,EAAA0B,GAQA,MANAxR,UAAAqiF,MAAA,GAAAvnE,GAAAyzD,SAEA8T,EAAAvH,UAAA5qE,EAAAJ,EAAA0B,GAEAvK,KAAAkjF,YAAA9H,GAEAp7E,SAMAiZ,OAAA,WAEA,GAAAvhB,EAEA,iBAAAi+D,GAEA58D,SAAArB,MAAA,GAAAmc,GAAAkuE,UAEArqF,EAAAuhB,OAAA08C,GAEAj+D,EAAAge,eAEA1V,KAAAkjF,YAAAxrF,EAAAuxD,YAMAigC,mBAAA,SAAA3yE,GAEA,GAAAgG,GAAAvc,KAEAimF,EAAA,OAAA1vE,EAAA3E,MAAA2E,EAAA3E,MAAA+J,MAAA5iB,OACA+zE,EAAAv2D,EAAAu2D,WAEAruD,EAAAquD,EAAAj3D,SAAA8F,MACA+C,EAAA3lB,SAAA+zE,EAAAxtD,OAAAwtD,EAAAxtD,OAAA3D,MAAA5iB,OACAglB,EAAAhlB,SAAA+zE,EAAAv9D,MAAAu9D,EAAAv9D,MAAAoM,MAAA5iB,OACAowF,EAAApwF,SAAA+zE,EAAAsc,GAAAtc,EAAAsc,GAAAztE,MAAA5iB,OACAswF,EAAAtwF,SAAA+zE,EAAAwc,IAAAxc,EAAAwc,IAAA3tE,MAAA5iB,MAEAA,UAAAswF,IAAArpF,KAAAkoF,cAAA,MAMA,QAJAqB,MACAC,KACAC,KAEA5vF,EAAA,EAAAk0E,EAAA,EAAAtnE,EAAA,EAAgC5M,EAAA4kB,EAAA3kB,OAAqBD,GAAA,EAAAk0E,GAAA,EAAAtnE,GAAA,EAErD8V,EAAAkC,SAAA/d,KAAA,GAAAmT,GAAA8L,QAAAlB,EAAA5kB,GAAA4kB,EAAA5kB,EAAA,GAAA4kB,EAAA5kB,EAAA,KAEAd,SAAA2lB,GAEA6qE,EAAA7oF,KAAA,GAAAmT,GAAA8L,QAAAjB,EAAA7kB,GAAA6kB,EAAA7kB,EAAA,GAAA6kB,EAAA7kB,EAAA,KAIAd,SAAAglB,GAEAxB,EAAAwB,OAAArd,KAAA,GAAAmT,GAAAqiD,MAAAn4C,EAAAlkB,GAAAkkB,EAAAlkB,EAAA,GAAAkkB,EAAAlkB,EAAA,KAIAd,SAAAowF,GAEAK,EAAA9oF,KAAA,GAAAmT,GAAA+6C,QAAAu6B,EAAApb,GAAAob,EAAApb,EAAA,KAIAh1E,SAAAswF,GAEAI,EAAA/oF,KAAA,GAAAmT,GAAA+6C,QAAAy6B,EAAAtb,GAAAsb,EAAAtb,EAAA,IAMA,IAAA2b,GAAA,SAAAhhF,EAAAK,EAAAxR,GAEA,GAAA8tF,GAAAtsF,SAAA2lB,GAAA6qE,EAAA7gF,GAAA8gD,QAAA+/B,EAAAxgF,GAAAygD,QAAA+/B,EAAAhyF,GAAAiyD,YACA5xC,EAAA7e,SAAAglB,GAAAxB,EAAAwB,OAAArV,GAAA8gD,QAAAjtC,EAAAwB,OAAAhV,GAAAygD,QAAAjtC,EAAAwB,OAAAxmB,GAAAiyD,YAEA7qC,EAAA,GAAA9K,GAAA+L,MAAAlX,EAAAK,EAAAxR,EAAA8tF,EAAAztE,EAEA2E,GAAA4B,MAAAzd,KAAAie,GAEA5lB,SAAAowF,GAEA5sE,EAAA2rE,cAAA,GAAAxnF,MAAA8oF,EAAA9gF,GAAA8gD,QAAAggC,EAAAzgF,GAAAygD,QAAAggC,EAAAjyF,GAAAiyD,UAIAzwD,SAAAswF,GAEA9sE,EAAA2rE,cAAA,GAAAxnF,MAAA+oF,EAAA/gF,GAAA8gD,QAAAigC,EAAA1gF,GAAAygD,QAAAigC,EAAAlyF,GAAAiyD,UAMA,IAAAzwD,SAAAktF,EAAA,CAEA,GAAA0D,GAAApzE,EAAAozE,MAEA,IAAAA,EAAA7vF,OAAA,EAEA,OAAAD,GAAA,EAAoBA,EAAA8vF,EAAA7vF,OAAmBD,IAOvC,OALA+vF,GAAAD,EAAA9vF,GAEA+kB,EAAAgrE,EAAAhrE,MACA2mC,EAAAqkC,EAAArkC,MAEAwoB,EAAAnvD,EAAAqqE,EAAArqE,EAAA2mC,EAA6CwoB,EAAAkb,EAAQlb,GAAA,EAErD2b,EAAAzD,EAAAlY,GAAAkY,EAAAlY,EAAA,GAAAkY,EAAAlY,EAAA,QAQA,QAAAl0E,GAAA,EAAoBA,EAAAosF,EAAAnsF,OAAoBD,GAAA,EAExC6vF,EAAAzD,EAAApsF,GAAAosF,EAAApsF,EAAA,GAAAosF,EAAApsF,EAAA,QAQA,QAAAA,GAAA,EAAmBA,EAAA4kB,EAAA3kB,OAAA,EAAyBD,GAAA,EAE5C6vF,EAAA7vF,IAAA,EAAAA,EAAA,EAoBA,OAdAmG,MAAAkX,qBAEA,OAAAX,EAAA4B,cAEAnY,KAAAmY,YAAA5B,EAAA4B,YAAAqxC,SAIA,OAAAjzC,EAAA6jE,iBAEAp6E,KAAAo6E,eAAA7jE,EAAA6jE,eAAA5wB,SAIAxpD,MAIAwuD,OAAA,WAEAxuD,KAAAgY,oBAEA,IAAAuG,GAAAve,KAAAmY,YAAAq2C,SAAAqX,QAIA,OAFA7lE,MAAAysE,UAAAluD,EAAAtV,EAAAsV,EAAA1V,EAAA0V,EAAAhU,GAEAgU,GAIAzI,UAAA,WAEA9V,KAAAiY,uBAEA,IAAAu2C,GAAAxuD,KAAAo6E,eAAA5rB,OACAxD,EAAAhrD,KAAAo6E,eAAApvB,OAEA3nD,EAAA,IAAA2nD,EAAA,IAAAA,EAEA/B,EAAA,GAAAp1C,GAAAyzD,OAUA,OATAre,GAAA/8C,IACA7I,EAAA,KAAAA,EAAAmrD,EAAAvlD,EACA,EAAA5F,EAAA,GAAAA,EAAAmrD,EAAA3lD,EACA,IAAAxF,KAAAmrD,EAAAjkD,EACA,SAGAvK,KAAAkjF,YAAAj6B,GAEAjpD,MAIAkX,mBAAA,WAIA,OAFA+P,GAAA,GAAApT,GAAA8L,QAAAoH,EAAA,GAAAlT,GAAA8L,QAEAjW,EAAA,EAAAmgF,EAAA7pF,KAAAme,MAAArkB,OAA0C4P,EAAAmgF,EAAQngF,IAAA,CAElD,GAAAiV,GAAA3e,KAAAme,MAAAzU,GAEAogF,EAAA9pF,KAAAye,SAAAE,EAAAjW,GACAqhF,EAAA/pF,KAAAye,SAAAE,EAAA5V,GACAihF,EAAAhqF,KAAAye,SAAAE,EAAApnB,EAEA0vB,GAAAimC,WAAA88B,EAAAD,GACAhjE,EAAAmmC,WAAA48B,EAAAC,GACA9iE,EAAA2gD,MAAA7gD,GAEAE,EAAAnR,YAEA6I,EAAAW,OAAA7G,KAAAwO,KAMA9P,qBAAA,SAAA8yE,GAEA,GAAAjhF,GAAAkhF,EAAAxgF,EAAAmgF,EAAAlrE,EAAAF,CAIA,KAFAA,EAAA,GAAA9kB,OAAAqG,KAAAye,SAAA3kB,QAEAkP,EAAA,EAAAkhF,EAAAlqF,KAAAye,SAAA3kB,OAAyCkP,EAAAkhF,EAAQlhF,IAEjDyV,EAAAzV,GAAA,GAAA6K,GAAA8L,OAIA,IAAAsqE,EAAA,CAKA,GAAAH,GAAAC,EAAAC,EACA/iE,EAAA,GAAApT,GAAA8L,QAAAoH,EAAA,GAAAlT,GAAA8L,OAEA,KAAAjW,EAAA,EAAAmgF,EAAA7pF,KAAAme,MAAArkB,OAAuC4P,EAAAmgF,EAAQngF,IAE/CiV,EAAA3e,KAAAme,MAAAzU,GAEAogF,EAAA9pF,KAAAye,SAAAE,EAAAjW,GACAqhF,EAAA/pF,KAAAye,SAAAE,EAAA5V,GACAihF,EAAAhqF,KAAAye,SAAAE,EAAApnB,GAEA0vB,EAAAimC,WAAA88B,EAAAD,GACAhjE,EAAAmmC,WAAA48B,EAAAC,GACA9iE,EAAA2gD,MAAA7gD,GAEAtI,EAAAE,EAAAjW,GAAAqN,IAAAkR,GACAxI,EAAAE,EAAA5V,GAAAgN,IAAAkR,GACAxI,EAAAE,EAAApnB,GAAAwe,IAAAkR,OAMA,KAAAvd,EAAA,EAAAmgF,EAAA7pF,KAAAme,MAAArkB,OAAuC4P,EAAAmgF,EAAQngF,IAE/CiV,EAAA3e,KAAAme,MAAAzU,GAEA+U,EAAAE,EAAAjW,GAAAqN,IAAA4I,EAAAW,QACAb,EAAAE,EAAA5V,GAAAgN,IAAA4I,EAAAW,QACAb,EAAAE,EAAApnB,GAAAwe,IAAA4I,EAAAW,OAMA,KAAAtW,EAAA,EAAAkhF,EAAAlqF,KAAAye,SAAA3kB,OAAyCkP,EAAAkhF,EAAQlhF,IAEjDyV,EAAAzV,GAAA8M,WAIA,KAAApM,EAAA,EAAAmgF,EAAA7pF,KAAAme,MAAArkB,OAAsC4P,EAAAmgF,EAAQngF,IAAA,CAE9CiV,EAAA3e,KAAAme,MAAAzU,EAEA,IAAA27E,GAAA1mE,EAAA0mE,aAEA,KAAAA,EAAAvrF,QAEAurF,EAAA,GAAA5sE,KAAAgG,EAAAE,EAAAjW,IACA28E,EAAA,GAAA5sE,KAAAgG,EAAAE,EAAA5V,IACAs8E,EAAA,GAAA5sE,KAAAgG,EAAAE,EAAApnB,MAIA8tF,EAAA,GAAA5mE,EAAAE,EAAAjW,GAAA8gD,QACA67B,EAAA,GAAA5mE,EAAAE,EAAA5V,GAAAygD,QACA67B,EAAA,GAAA5mE,EAAAE,EAAApnB,GAAAiyD,WAQA2gC,oBAAA,WAEA,GAAAtwF,GAAA2xE,EAAA9hE,EAAAmgF,EAAAlrE,CAMA,KAAAjV,EAAA,EAAAmgF,EAAA7pF,KAAAme,MAAArkB,OAAsC4P,EAAAmgF,EAAQngF,IAgB9C,IAdAiV,EAAA3e,KAAAme,MAAAzU,GAEAiV,EAAAyrE,qBAMAzrE,EAAAyrE,qBAAA3xE,KAAAkG,EAAAW,QAJAX,EAAAyrE,qBAAAzrE,EAAAW,OAAAkqC,QAQA7qC,EAAA0rE,0BAAA1rE,EAAA0rE,4BAEAxwF,EAAA,EAAA2xE,EAAA7sD,EAAA0mE,cAAAvrF,OAA+CD,EAAA2xE,EAAQ3xE,IAEvD8kB,EAAA0rE,wBAAAxwF,GAMA8kB,EAAA0rE,wBAAAxwF,GAAA4e,KAAAkG,EAAA0mE,cAAAxrF,IAJA8kB,EAAA0rE,wBAAAxwF,GAAA8kB,EAAA0mE,cAAAxrF,GAAA2vD,OAcA,IAAA8gC,GAAA,GAAAz2E,GAAA6L,QAGA,KAFA4qE,EAAAnsE,MAAAne,KAAAme,MAEAtkB,EAAA,EAAA2xE,EAAAxrE,KAAAmoF,aAAAruF,OAA6CD,EAAA2xE,EAAQ3xE,IAAA,CAIrD,IAAAmG,KAAAqoF,aAAAxuF,GAAA,CAEAmG,KAAAqoF,aAAAxuF,MACAmG,KAAAqoF,aAAAxuF,GAAA0wF,eACAvqF,KAAAqoF,aAAAxuF,GAAAwrF,gBAEA,IAGAmF,GAAAnF,EAHAoF,EAAAzqF,KAAAqoF,aAAAxuF,GAAA0wF,YACAG,EAAA1qF,KAAAqoF,aAAAxuF,GAAAwrF,aAIA,KAAA37E,EAAA,EAAAmgF,EAAA7pF,KAAAme,MAAArkB,OAAwC4P,EAAAmgF,EAAQngF,IAEhD8gF,EAAA,GAAA32E,GAAA8L,QACA0lE,GAAsB38E,EAAA,GAAAmL,GAAA8L,QAAA5W,EAAA,GAAA8K,GAAA8L,QAAApoB,EAAA,GAAAsc,GAAA8L,SAEtB8qE,EAAA/pF,KAAA8pF,GACAE,EAAAhqF,KAAA2kF,GAMA,GAAAgD,GAAAroF,KAAAqoF,aAAAxuF,EAIAywF,GAAA7rE,SAAAze,KAAAmoF,aAAAtuF,GAAA4kB,SAIA6rE,EAAApzE,qBACAozE,EAAAnzE,sBAIA,IAAAqzE,GAAAnF,CAEA,KAAA37E,EAAA,EAAAmgF,EAAA7pF,KAAAme,MAAArkB,OAAuC4P,EAAAmgF,EAAQngF,IAE/CiV,EAAA3e,KAAAme,MAAAzU,GAEA8gF,EAAAnC,EAAAkC,YAAA7gF,GACA27E,EAAAgD,EAAAhD,cAAA37E,GAEA8gF,EAAA/xE,KAAAkG,EAAAW,QAEA+lE,EAAA38E,EAAA+P,KAAAkG,EAAA0mE,cAAA,IACAA,EAAAt8E,EAAA0P,KAAAkG,EAAA0mE,cAAA,IACAA,EAAA9tF,EAAAkhB,KAAAkG,EAAA0mE,cAAA,IAQA,IAAA37E,EAAA,EAAAmgF,EAAA7pF,KAAAme,MAAArkB,OAAsC4P,EAAAmgF,EAAQngF,IAE9CiV,EAAA3e,KAAAme,MAAAzU,GAEAiV,EAAAW,OAAAX,EAAAyrE,qBACAzrE,EAAA0mE,cAAA1mE,EAAA0rE,yBAMAM,gBAAA,WAEAnnF,QAAAwmD,KAAA,yDAIA4gC,qBAAA,WAKA,OAHAniF,GAAA,EACAgW,EAAAze,KAAAye,SAEA5kB,EAAA,EAAA2xE,EAAA/sD,EAAA3kB,OAAwCD,EAAA2xE,EAAQ3xE,IAEhDA,EAAA,IAEA4O,GAAAgW,EAAA5kB,GAAAksE,WAAAtnD,EAAA5kB,EAAA,KAIAmG,KAAAwoF,cAAA3uF,GAAA4O,GAMAuP,mBAAA,WAEA,OAAAhY,KAAAmY,cAEAnY,KAAAmY,YAAA,GAAAtE,GAAA64D,MAIA1sE,KAAAmY,YAAAkzD,cAAArrE,KAAAye,WAIAxG,sBAAA,WAEA,OAAAjY,KAAAo6E,iBAEAp6E,KAAAo6E,eAAA,GAAAvmE,GAAAo5D,QAIAjtE,KAAAo6E,eAAA/O,cAAArrE,KAAAye,WAIAra,MAAA,SAAAmS,EAAA0yC,EAAA4hC,GAEA,GAAAt0E,YAAA1C,GAAA6L,YAGA,WADAlc,SAAAC,MAAA,sEAAA8S,EAKA,IAAA+kE,GACAwP,EAAA9qF,KAAAye,SAAA3kB,OACAixF,EAAA/qF,KAAAye,SACAusE,EAAAz0E,EAAAkI,SACAwsE,EAAAjrF,KAAAme,MACA+sE,EAAA30E,EAAA4H,MACAgtE,EAAAnrF,KAAAkoF,cAAA,GACAmB,EAAA9yE,EAAA2xE,cAAA,EAEAnvF,UAAA8xF,MAAA,GAEA9xF,SAAAkwD,IAEAqyB,MAAAznE,GAAAq5D,SAAA0B,gBAAA3lB,GAMA,QAAApvD,GAAA,EAAA2xE,EAAAwf,EAAAlxF,OAAyCD,EAAA2xE,EAAQ3xE,IAAA,CAEjD,GAAAmvF,GAAAgC,EAAAnxF,GAEAuxF,EAAApC,EAAAx/B,OAEAzwD,UAAAkwD,GAAAmiC,EAAAxkB,aAAA3d,GAEA8hC,EAAArqF,KAAA0qF,GAMA,IAAAvxF,EAAA,EAAA2xE,EAAA0f,EAAApxF,OAAkCD,EAAA2xE,EAAQ3xE,IAAA,CAE1C,GAAAwxF,GAAA/rE,EAAA/P,EAAAoP,EAAAusE,EAAArxF,GACAyxF,EAAA3sE,EAAA0mE,cACAkG,EAAA5sE,EAAA/G,YAEAyzE,GAAA,GAAAx3E,GAAA+L,MAAAjB,EAAAjW,EAAAoiF,EAAAnsE,EAAA5V,EAAA+hF,EAAAnsE,EAAApnB,EAAAuzF,GACAO,EAAA/rE,OAAA7G,KAAAkG,EAAAW,QAEAvmB,SAAAuiF,GAEA+P,EAAA/rE,OAAAqnD,aAAA2U,GAAAxlE,WAIA,QAAAi4D,GAAA,EAAAkb,EAAAqC,EAAAxxF,OAAkDi0E,EAAAkb,EAAQlb,IAE1DzuD,EAAAgsE,EAAAvd,GAAAvkB,QAEAzwD,SAAAuiF,GAEAh8D,EAAAqnD,aAAA2U,GAAAxlE,YAIAu1E,EAAAhG,cAAA3kF,KAAA4e,EAIA+rE,GAAA97E,MAAAkJ,KAAAkG,EAAApP,MAEA,QAAAw+D,GAAA,EAAAkb,EAAAsC,EAAAzxF,OAAiDi0E,EAAAkb,EAAQlb,IAEzDx+D,EAAAg8E,EAAAxd,GACAsd,EAAAzzE,aAAAlX,KAAA6O,EAAAi6C,QAIA6hC,GAAAjG,cAAAzmE,EAAAymE,cAAAyF,EAEAI,EAAAvqF,KAAA2qF,GAMA,IAAAxxF,EAAA,EAAA2xE,EAAA6d,EAAAvvF,OAAgCD,EAAA2xE,EAAQ3xE,IAAA,CAExC,GAAAuvF,GAAAC,EAAAxvF,GAAA2xF,IAEA,IAAAzyF,SAAAqwF,EAAA,CAMA,OAAArb,GAAA,EAAAkb,EAAAG,EAAAtvF,OAAmCi0E,EAAAkb,EAAQlb,IAE3Cyd,EAAA9qF,KAAA0oF,EAAArb,GAAAvkB,QAIA2hC,GAAAzqF,KAAA8qF,MAMAC,UAAA,SAAA3zE,GAEA,MAAAA,aAAAjE,GAAAkE,YAEAvU,SAAAC,MAAA,kEAAAqU,IAKAA,EAAAyqE,kBAAAzqE,EAAApC,mBAEA1V,MAAAoE,MAAA0T,EAAAvB,SAAAuB,EAAAmxC,UAUAyiC,cAAA,WAEA,GAGA1iF,GAAA7N,EAGAtB,EAAA2xE,EAAA7sD,EACAsnE,EAAAlY,EAAAkb,EAPA0C,KACAC,KAAAC,KAGAC,EAAA,EACAC,EAAA/yE,KAAAgI,IAAA,GAAA8qE,EAIA,KAAAjyF,EAAA,EAAA2xE,EAAAxrE,KAAAye,SAAA3kB,OAAyCD,EAAA2xE,EAAQ3xE,IAEjDmP,EAAAhJ,KAAAye,SAAA5kB,GACAsB,EAAA6d,KAAA2sD,MAAA38D,EAAAC,EAAA8iF,GAAA,IAAA/yE,KAAA2sD,MAAA38D,EAAAH,EAAAkjF,GAAA,IAAA/yE,KAAA2sD,MAAA38D,EAAAuB,EAAAwhF,GAEAhzF,SAAA4yF,EAAAxwF,IAEAwwF,EAAAxwF,GAAAtB,EACA+xF,EAAAlrF,KAAAV,KAAAye,SAAA5kB,IACAgyF,EAAAhyF,GAAA+xF,EAAA9xF,OAAA,GAKA+xF,EAAAhyF,GAAAgyF,EAAAF,EAAAxwF,GASA,IAAA6wF,KAEA,KAAAnyF,EAAA,EAAA2xE,EAAAxrE,KAAAme,MAAArkB,OAAsCD,EAAA2xE,EAAQ3xE,IAAA,CAE9C8kB,EAAA3e,KAAAme,MAAAtkB,GAEA8kB,EAAAjW,EAAAmjF,EAAAltE,EAAAjW,GACAiW,EAAA5V,EAAA8iF,EAAAltE,EAAA5V,GACA4V,EAAApnB,EAAAs0F,EAAAltE,EAAApnB,GAEA0uF,GAAAtnE,EAAAjW,EAAAiW,EAAA5V,EAAA4V,EAAApnB,EAMA,QAJA00F,MAIA3pF,EAAA,EAAmBA,EAAA,EAAOA,IAE1B,GAAA2jF,EAAA3jF,KAAA2jF,GAAA3jF,EAAA,OAEA2pF,EAAA3pF,EACA0pF,EAAAtrF,KAAA7G,EACA,QAQA,IAAAA,EAAAmyF,EAAAlyF,OAAA,EAA2CD,GAAA,EAAQA,IAAA,CAEnD,GAAAqyF,GAAAF,EAAAnyF,EAIA,KAFAmG,KAAAme,MAAAwiE,OAAAuL,EAAA,GAEAne,EAAA,EAAAkb,EAAAjpF,KAAAkoF,cAAApuF,OAA+Ci0E,EAAAkb,EAAQlb,IAEvD/tE,KAAAkoF,cAAAna,GAAA4S,OAAAuL,EAAA,GAQA,GAAA9W,GAAAp1E,KAAAye,SAAA3kB,OAAA8xF,EAAA9xF,MAEA,OADAkG,MAAAye,SAAAmtE,EACAxW,GAIAqP,OAAA,WA2HA,QAAA0H,GAAAnyF,EAAA6b,EAAAg2C,GAEA,MAAAA,GAAA7xD,EAAA,GAAA6b,EAAA7b,IAAA,GAAA6b,GAIA,QAAAu2E,GAAA9sE,GAEA,GAAA+sE,GAAA/sE,EAAArW,EAAA9C,WAAAmZ,EAAAzW,EAAA1C,WAAAmZ,EAAA/U,EAAApE,UAEA,OAAApN,UAAAuzF,EAAAD,GAEAC,EAAAD,IAIAC,EAAAD,GAAA3tE,EAAA5kB,OAAA,EACA4kB,EAAAhe,KAAA4e,EAAArW,EAAAqW,EAAAzW,EAAAyW,EAAA/U,GAEA+hF,EAAAD,IAIA,QAAAE,GAAAh9E,GAEA,GAAA88E,GAAA98E,EAAAlG,EAAAlD,WAAAoJ,EAAA3G,EAAAzC,WAAAoJ,EAAAxG,EAAA5C,UAEA,OAAApN,UAAAyzF,EAAAH,GAEAG,EAAAH,IAIAG,EAAAH,GAAAtuE,EAAAjkB,OACAikB,EAAArd,KAAA6O,EAAA8nD,UAEAm1B,EAAAH,IAIA,QAAAI,GAAArD,GAEA,GAAAiD,GAAAjD,EAAAngF,EAAA9C,WAAAijF,EAAAvgF,EAAA1C,UAEA,OAAApN,UAAA2zF,EAAAL,GAEAK,EAAAL,IAIAK,EAAAL,GAAAlD,EAAArvF,OAAA,EACAqvF,EAAAzoF,KAAA0oF,EAAAngF,EAAAmgF,EAAAvgF,GAEA6jF,EAAAL,IA9KA,GAAAtvE,IACA6nE,UACA/kC,QAAA,IACAl7C,KAAA,WACAugF,UAAA,mBAUA,IAJAnoE,EAAA4+D,KAAA37E,KAAA27E,KACA5+D,EAAApY,KAAA3E,KAAA2E,KACA,KAAA3E,KAAA7G,OAAA4jB,EAAA5jB,KAAA6G,KAAA7G,MAEAJ,SAAAiH,KAAA2sF,WAAA,CAEA,GAAAA,GAAA3sF,KAAA2sF,UAEA,QAAAxxF,KAAAwxF,GAEA5zF,SAAA4zF,EAAAxxF,KAAA4hB,EAAA5hB,GAAAwxF,EAAAxxF,GAIA,OAAA4hB,GAMA,OAFA0B,MAEA5kB,EAAA,EAAkBA,EAAAmG,KAAAye,SAAA3kB,OAA0BD,IAAA,CAE5C,GAAAmvF,GAAAhpF,KAAAye,SAAA5kB,EACA4kB,GAAA/d,KAAAsoF,EAAA//E,EAAA+/E,EAAAngF,EAAAmgF,EAAAz+E,GAYA,OARA4T,MACAO,KACA4tE,KACAvuE,KACAyuE,KACArD,KACAuD,KAEA7yF,EAAA,EAAkBA,EAAAmG,KAAAme,MAAArkB,OAAuBD,IAAA,CAEzC,GAAA8kB,GAAA3e,KAAAme,MAAAtkB,GAEA+yF,KACAC,KACAC,EAAA/zF,SAAAiH,KAAAkoF,cAAA,GAAAruF,GACAkzF,EAAApuE,EAAAW,OAAAxlB,SAAA,EACAkzF,EAAAruE,EAAA0mE,cAAAvrF,OAAA,EACAmzF,EAAA,IAAAtuE,EAAApP,MAAAlG,GAAA,IAAAsV,EAAApP,MAAA3G,GAAA,IAAA+V,EAAApP,MAAAxG,EACAmkF,EAAAvuE,EAAA/G,aAAA9d,OAAA,EAEAqzF,EAAA,CAcA,IAZAA,EAAAhB,EAAAgB,EAAA,KACAA,EAAAhB,EAAAgB,EAAA,EAAAP,GACAO,EAAAhB,EAAAgB,EAAA,EAAAN,GACAM,EAAAhB,EAAAgB,EAAA,EAAAL,GACAK,EAAAhB,EAAAgB,EAAA,EAAAJ,GACAI,EAAAhB,EAAAgB,EAAA,EAAAH,GACAG,EAAAhB,EAAAgB,EAAA,EAAAF,GACAE,EAAAhB,EAAAgB,EAAA,EAAAD,GAEA/uE,EAAAzd,KAAAysF,GACAhvE,EAAAzd,KAAAie,EAAAjW,EAAAiW,EAAA5V,EAAA4V,EAAApnB,GAEAu1F,EAAA,CAEA,GAAA5E,GAAAloF,KAAAkoF,cAAA,GAAAruF,EAEAskB,GAAAzd,KACA+rF,EAAAvE,EAAA,IACAuE,EAAAvE,EAAA,IACAuE,EAAAvE,EAAA,KAWA,GANA6E,GAEA5uE,EAAAzd,KAAA0rF,EAAAztE,EAAAW,SAIA0tE,EAAA,CAEA,GAAA3H,GAAA1mE,EAAA0mE,aAEAlnE,GAAAzd,KACA0rF,EAAA/G,EAAA,IACA+G,EAAA/G,EAAA,IACA+G,EAAA/G,EAAA,KAWA,GANA4H,GAEA9uE,EAAAzd,KAAA6rF,EAAA5tE,EAAApP,QAIA29E,EAAA,CAEA,GAAAt1E,GAAA+G,EAAA/G,YAEAuG,GAAAzd,KACA6rF,EAAA30E,EAAA,IACA20E,EAAA30E,EAAA,IACA20E,EAAA30E,EAAA,MAwEA,MARAmF,WAEAA,OAAA0B,WACA1B,OAAA2B,UACAX,EAAAjkB,OAAA,IAAAijB,OAAAgB,UACAorE,EAAArvF,OAAA,IAAAijB,OAAAosE,SACApsE,OAAAoB,QAEApB,GAIAysC,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAxV,GAEAjD,KAAAye,YACAze,KAAAme,SACAne,KAAAkoF,kBAIA,QAFAzpE,GAAAxb,EAAAwb,SAEA5kB,EAAA,EAAA2xE,EAAA/sD,EAAA3kB,OAAwCD,EAAA2xE,EAAQ3xE,IAEhDmG,KAAAye,SAAA/d,KAAA+d,EAAA5kB,GAAA2vD,QAMA,QAFArrC,GAAAlb,EAAAkb,MAEAtkB,EAAA,EAAA2xE,EAAArtD,EAAArkB,OAAqCD,EAAA2xE,EAAQ3xE,IAE7CmG,KAAAme,MAAAzd,KAAAyd,EAAAtkB,GAAA2vD,QAIA,QAAA3vD,GAAA,EAAA2xE,EAAAvoE,EAAAilF,cAAApuF,OAAoDD,EAAA2xE,EAAQ3xE,IAAA,CAE5D,GAAAquF,GAAAjlF,EAAAilF,cAAAruF,EAEAd,UAAAiH,KAAAkoF,cAAAruF,KAEAmG,KAAAkoF,cAAAruF,MAIA,QAAAk0E,GAAA,EAAAkb,EAAAf,EAAApuF,OAA8Ci0E,EAAAkb,EAAQlb,IAAA,CAItD,OAFAob,GAAAjB,EAAAna,GAAAqf,KAEA3mF,EAAA,EAAA4mF,EAAAlE,EAAArvF,OAAqC2M,EAAA4mF,EAAQ5mF,IAAA,CAE7C,GAAA2iF,GAAAD,EAAA1iF,EAEA2mF,GAAA1sF,KAAA0oF,EAAA5/B,SAIAxpD,KAAAkoF,cAAAruF,GAAA6G,KAAA0sF,IAMA,MAAAptF,OAIAsZ,QAAA,WAEAtZ,KAAA8sD,eAAuBnoD,KAAA,cAMvBkP,EAAAq7C,gBAAA/yD,UAAAyH,MAAAiQ,EAAA6L,SAAAvjB,WAEA0X,EAAAo0E,gBAAA,EAQAp0E,EAAAy5E,eAAA,WAEAhzF,OAAAC,eAAAyF,KAAA,MAAqChG,MAAA6Z,EAAAo0E,oBAErCjoF,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAA7G,KAAA,GACA6G,KAAA2E,KAAA,iBAEA3E,KAAAimF,WACAjmF,KAAAye,YACAze,KAAA0e,WACA1e,KAAA+d,UACA/d,KAAAmpF,OACAnpF,KAAAqpF,QAEArpF,KAAA2pF,UAEA3pF,KAAAmoF,gBAEAnoF,KAAAsoF,eACAtoF,KAAAuoF,eAIAvoF,KAAAmY,YAAA,KACAnY,KAAAo6E,eAAA,KAIAp6E,KAAAyoF,sBACAzoF,KAAA4oF,qBACA5oF,KAAA6oF,oBACA7oF,KAAA2oF,iBACA3oF,KAAA+oF,qBAIAl1E,EAAAy5E,eAAAnxF,WAEAE,YAAAwX,EAAAy5E,eAEAt1E,mBAAAnE,EAAA6L,SAAAvjB,UAAA6b,mBACAC,sBAAApE,EAAA6L,SAAAvjB,UAAA8b,sBAEAf,mBAAA,WAEA1T,QAAAwmD,KAAA,yFAIA7yC,qBAAA,WAEA3T,QAAAwmD,KAAA,2FAIAujC,cAAA,SAAAh3E,GAQA,OANAqzE,GAEAxE,EADAuE,KAGAxrE,EAAA5H,EAAA4H,MAEAtkB,EAAA,EAAkBA,EAAAskB,EAAArkB,OAAkBD,IAAA,CAEpC,GAAA8kB,GAAAR,EAAAtkB,EAIA8kB,GAAAymE,oBAEAA,EAAAzmE,EAAAymE,cAEArsF,SAAA6wF,IAEAA,EAAArkC,MAAA,EAAA1rD,EAAA+vF,EAAAhrE,MACA+qE,EAAAjpF,KAAAkpF,IAIAA,GACAhrE,MAAA,EAAA/kB,EACAurF,kBAOArsF,SAAA6wF,IAEAA,EAAArkC,MAAA,EAAA1rD,EAAA+vF,EAAAhrE,MACA+qE,EAAAjpF,KAAAkpF,IAIA5pF,KAAA2pF,UAIA6D,aAAA,SAAAj3E,GAEA,GAAA4H,GAAA5H,EAAA4H,MACAM,EAAAlI,EAAAkI,SACAypE,EAAA3xE,EAAA2xE,cAEA4E,EAAA5E,EAAA,IAAAA,EAAA,GAAApuF,OAAA,EACA2zF,EAAAvF,EAAA,IAAAA,EAAA,GAAApuF,OAAA,EAIAquF,EAAA5xE,EAAA4xE,aACAuF,EAAAvF,EAAAruF,MAEA,IAAA4zF,EAAA,GAIA,OAFAC,MAEA9zF,EAAA,EAAmBA,EAAA6zF,EAAwB7zF,IAE3C8zF,EAAA9zF,KAIAmG,MAAAmoF,aAAAtyE,SAAA83E,EAIA,GAAAtF,GAAA9xE,EAAA8xE,aACAuF,EAAAvF,EAAAvuF,MAEA,IAAA8zF,EAAA,GAIA,OAFAC,MAEAh0F,EAAA,EAAmBA,EAAA+zF,EAAwB/zF,IAE3Cg0F,EAAAh0F,KAIAmG,MAAAmoF,aAAA7oE,OAAAuuE,EAcA,OARAtF,GAAAhyE,EAAAgyE,YACAD,EAAA/xE,EAAA+xE,YAEAwF,EAAAvF,EAAAzuF,SAAA2kB,EAAA3kB,OACAi0F,EAAAzF,EAAAxuF,SAAA2kB,EAAA3kB,OAIAD,EAAA,EAAkBA,EAAAskB,EAAArkB,OAAkBD,IAAA,CAEpC,GAAA8kB,GAAAR,EAAAtkB,EAEAmG,MAAAye,SAAA/d,KAAA+d,EAAAE,EAAAjW,GAAA+V,EAAAE,EAAA5V,GAAA0V,EAAAE,EAAApnB,GAEA,IAAA8tF,GAAA1mE,EAAA0mE,aAEA,QAAAA,EAAAvrF,OAEAkG,KAAA0e,QAAAhe,KAAA2kF,EAAA,GAAAA,EAAA,GAAAA,EAAA,QAEI,CAEJ,GAAA/lE,GAAAX,EAAAW,MAEAtf,MAAA0e,QAAAhe,KAAA4e,OAIA,GAAA1H,GAAA+G,EAAA/G,YAEA,QAAAA,EAAA9d,OAEAkG,KAAA+d,OAAArd,KAAAkX,EAAA,GAAAA,EAAA,GAAAA,EAAA,QAEI,CAEJ,GAAArI,GAAAoP,EAAApP,KAEAvP,MAAA+d,OAAArd,KAAA6O,OAIA,GAAAu9E,OAAA,CAEA,GAAAkB,GAAA9F,EAAA,GAAAruF,EAEAd,UAAAi1F,EAEAhuF,KAAAmpF,IAAAzoF,KAAAstF,EAAA,GAAAA,EAAA,GAAAA,EAAA,KAIAxqF,QAAAwmD,KAAA,2DAAAnwD,GAEAmG,KAAAmpF,IAAAzoF,KAAA,GAAAmT,GAAA+6C,QAAA,GAAA/6C,GAAA+6C,QAAA,GAAA/6C,GAAA+6C,UAMA,GAAA6+B,OAAA,CAEA,GAAAO,GAAA9F,EAAA,GAAAruF,EAEAd,UAAAi1F,EAEAhuF,KAAAqpF,KAAA3oF,KAAAstF,EAAA,GAAAA,EAAA,GAAAA,EAAA,KAIAxqF,QAAAwmD,KAAA,4DAAAnwD,GAEAmG,KAAAqpF,KAAA3oF,KAAA,GAAAmT,GAAA+6C,QAAA,GAAA/6C,GAAA+6C,QAAA,GAAA/6C,GAAA+6C,UAQA,OAAAmf,GAAA,EAAmBA,EAAA2f,EAAwB3f,IAAA,CAE3C,GAAAkgB,GAAA9F,EAAApa,GAAAtvD,QAEAkvE,GAAA5f,GAAArtE,KAAAutF,EAAAtvE,EAAAjW,GAAAulF,EAAAtvE,EAAA5V,GAAAklF,EAAAtvE,EAAApnB,IAIA,OAAAw2E,GAAA,EAAmBA,EAAA6f,EAAwB7f,IAAA,CAE3C,GAAAmgB,GAAA7F,EAAAta,GAAAsX,cAAAxrF,EAEAg0F,GAAA9f,GAAArtE,KAAAwtF,EAAAxlF,EAAAwlF,EAAAnlF,EAAAmlF,EAAA32F,GAMAu2F,GAEA9tF,KAAAuoF,YAAA7nF,KAAA6nF,EAAA5pE,EAAAjW,GAAA6/E,EAAA5pE,EAAA5V,GAAAw/E,EAAA5pE,EAAApnB,IAIAw2F,GAEA/tF,KAAAsoF,YAAA5nF,KAAA4nF,EAAA3pE,EAAAjW,GAAA4/E,EAAA3pE,EAAA5V,GAAAu/E,EAAA3pE,EAAApnB,IAcA,MARAyI,MAAAutF,cAAAh3E,GAEAvW,KAAAyoF,mBAAAlyE,EAAAkyE,mBACAzoF,KAAA4oF,kBAAAryE,EAAAqyE,kBACA5oF,KAAA6oF,iBAAAtyE,EAAAsyE,iBACA7oF,KAAA2oF,cAAApyE,EAAAoyE,cACA3oF,KAAA+oF,iBAAAxyE,EAAAwyE,iBAEA/oF,MAIAsZ,QAAA,WAEAtZ,KAAA8sD,eAAuBnoD,KAAA,cAMvBkP,EAAAq7C,gBAAA/yD,UAAAyH,MAAAiQ,EAAAy5E,eAAAnxF,WASA0X,EAAA2K,eAAA,WAEAlkB,OAAAC,eAAAyF,KAAA,MAAqChG,MAAA6Z,EAAAo0E,oBAErCjoF,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAA7G,KAAA,GACA6G,KAAA2E,KAAA,iBAEA3E,KAAA4R,MAAA,KACA5R,KAAA8sE,cAEA9sE,KAAAmuF,mBAEAnuF,KAAA2pF,UAEA3pF,KAAAmY,YAAA,KACAnY,KAAAo6E,eAAA,KAEAp6E,KAAAouF,WAAmBxvE,MAAA,EAAA2mC,MAAArkC,MAInBrN,EAAA2K,eAAAriB,WAEAE,YAAAwX,EAAA2K,eAEA6vE,SAAA,SAAAz8E,GAEApO,QAAAwmD,KAAA,sEACAhqD,KAAAsuF,SAAA18E,IAIA28E,SAAA,WAEA,MAAAvuF,MAAA4R,OAIA08E,SAAA,SAAA18E,GAEA5R,KAAA4R,SAIAwN,aAAA,SAAAjmB,EAAAktE,GAEA,MAAAA,aAAAxyD,GAAAwL,oBAAAgnD,YAAAxyD,GAAAk0E,+BAEAvkF,QAAAwmD,KAAA,8EAEAhqD,MAAAof,aAAAjmB,EAAA,GAAA0a,GAAAwL,gBAAA9f,UAAA,GAAAA,UAAA,OAMA,UAAApG,IAEAqK,QAAAwmD,KAAA,2EACAhqD,KAAAsuF,SAAAjoB,SAIArmE,KAAA8sE,WAAA3zE,GAAAktE,KAIA7nE,aAAA,SAAArF,GAEA,MAAA6G,MAAA8sE,WAAA3zE,IAIAqqB,gBAAA,SAAArqB,SAEA6G,MAAA8sE,WAAA3zE,IAIAq1F,gBAGA,MADAhrF,SAAAC,MAAA,iEACAzD,KAAA2pF,QAIA8E,cAGA,MADAjrF,SAAAwmD,KAAA,+DACAhqD,KAAA2pF,QAIA+E,YAAA,SAAA9vE,EAAA2mC,EAAAopC,GAEA51F,SAAA41F,GAEAnrF,QAAAwmD,KAAA,wEAIAxmD,QAAAwmD,KAAA,4DACAhqD,KAAA4uF,SAAAhwE,EAAA2mC,IAIAspC,eAAA,WAEArrF,QAAAwmD,KAAA,kEACAhqD,KAAA8uF,eAIAF,SAAA,SAAAhwE,EAAA2mC,EAAA6/B,GAEAplF,KAAA2pF,OAAAjpF,MAEAke,QACA2mC,QACA6/B,cAAArsF,SAAAqsF,IAAA,KAMA0J,YAAA,WAEA9uF,KAAA2pF,WAIAoF,aAAA,SAAAnwE,EAAA2mC,GAEAvlD,KAAAouF,UAAAxvE,QACA5e,KAAAouF,UAAA7oC,SAIA29B,YAAA,SAAAj6B,GAEA,GAAApzC,GAAA7V,KAAA8sE,WAAAj3D,QAEA9c,UAAA8c,IAEAozC,EAAA6kB,oBAAAj4D,EAAA8F,OACA9F,EAAA4vE,eAIA,IAAAnmE,GAAAtf,KAAA8sE,WAAAxtD,MAEA,IAAAvmB,SAAAumB,EAAA,CAEA,GAAAg8D,OAAAznE,GAAAq5D,SAAA0B,gBAAA3lB,EAEAqyB,GAAAxN,oBAAAxuD,EAAA3D,OACA2D,EAAAmmE,eAIA,OAAAzlF,KAAAmY,aAEAnY,KAAAgY,qBAIA,OAAAhY,KAAAo6E,gBAEAp6E,KAAAiY,yBAMA66D,QAAA,WAIA,GAAAsI,EAEA,iBAAAtyB,GAQA,MANA/vD,UAAAqiF,MAAA,GAAAvnE,GAAAyzD,SAEA8T,EAAA7H,cAAAzqB,GAEA9oD,KAAAkjF,YAAA9H,GAEAp7E,SAMA+yE,QAAA,WAIA,GAAAqI,EAEA,iBAAAtyB,GAQA,MANA/vD,UAAAqiF,MAAA,GAAAvnE,GAAAyzD,SAEA8T,EAAA5H,cAAA1qB,GAEA9oD,KAAAkjF,YAAA9H,GAEAp7E,SAMAgzE,QAAA,WAIA,GAAAoI,EAEA,iBAAAtyB,GAQA,MANA/vD,UAAAqiF,MAAA,GAAAvnE,GAAAyzD,SAEA8T,EAAA3H,cAAA3qB,GAEA9oD,KAAAkjF,YAAA9H,GAEAp7E,SAMAysE,UAAA,WAIA,GAAA2O,EAEA,iBAAAnyE,EAAAJ,EAAA0B,GAQA,MANAxR,UAAAqiF,MAAA,GAAAvnE,GAAAyzD,SAEA8T,EAAA9H,gBAAArqE,EAAAJ,EAAA0B,GAEAvK,KAAAkjF,YAAA9H,GAEAp7E,SAMAwoD,MAAA,WAIA,GAAA4yB,EAEA,iBAAAnyE,EAAAJ,EAAA0B,GAQA,MANAxR,UAAAqiF,MAAA,GAAAvnE,GAAAyzD,SAEA8T,EAAAvH,UAAA5qE,EAAAJ,EAAA0B,GAEAvK,KAAAkjF,YAAA9H,GAEAp7E,SAMAiZ,OAAA,WAEA,GAAAvhB,EAEA,iBAAAi+D,GAEA58D,SAAArB,MAAA,GAAAmc,GAAAkuE,UAEArqF,EAAAuhB,OAAA08C,GAEAj+D,EAAAge,eAEA1V,KAAAkjF,YAAAxrF,EAAAuxD,YAMAuF,OAAA,WAEAxuD,KAAAgY,oBAEA,IAAAuG,GAAAve,KAAAmY,YAAAq2C,SAAAqX,QAIA,OAFA7lE,MAAAysE,UAAAluD,EAAAtV,EAAAsV,EAAA1V,EAAA0V,EAAAhU,GAEAgU,GAIAouD,cAAA,SAAAxqD,GAIA,GAAA5L,GAAA4L,EAAA5L,QAEA,IAAA4L,YAAAtO,GAAAotE,QAAA9+D,YAAAtO,GAAAktE,KAAA,CAEA,GAAAhU,GAAA,GAAAl5D,GAAAyzE,iBAAA,EAAA/wE,EAAAkI,SAAA3kB,OAAA,GACAikB,EAAA,GAAAlK,GAAAyzE,iBAAA,EAAA/wE,EAAAwH,OAAAjkB,OAAA,EAKA,IAHAkG,KAAAof,aAAA,WAAA2tD,EAAAqZ,kBAAA7vE,EAAAkI,WACAze,KAAAof,aAAA,QAAArB,EAAAgoE,gBAAAxvE,EAAAwH,SAEAxH,EAAAiyE,eAAAjyE,EAAAiyE,cAAA1uF,SAAAyc,EAAAkI,SAAA3kB,OAAA,CAEA,GAAA0uF,GAAA,GAAA30E,GAAAyzE,iBAAA/wE,EAAAiyE,cAAA1uF,OAAA,EAEAkG,MAAAof,aAAA,eAAAopE,EAAA1C,UAAAvvE,EAAAiyE,gBAIA,OAAAjyE,EAAA6jE,iBAEAp6E,KAAAo6E,eAAA7jE,EAAA6jE,eAAA5wB,SAIA,OAAAjzC,EAAA4B,cAEAnY,KAAAmY,YAAA5B,EAAA4B,YAAAqxC,aAIGrnC,aAAAtO,GAAAkE,MAEHxB,YAAA1C,GAAA6L,UAEA1f,KAAAwtF,aAAAj3E,EAMA,OAAAvW,OAIAgvF,iBAAA,SAAA7sE,GAEA,GAAA5L,GAAA4L,EAAA5L,QAEA,IAAA4L,YAAAtO,GAAAkE,KAAA,CAEA,GAAAk3E,GAAA14E,EAAA24E,gBAEA,IAAAn2F,SAAAk2F,EAEA,MAAAjvF,MAAAwtF,aAAAj3E,EAIA04E,GAAAxG,mBAAAlyE,EAAAkyE,mBACAwG,EAAArG,kBAAAryE,EAAAqyE,kBACAqG,EAAApG,iBAAAtyE,EAAAsyE,iBACAoG,EAAAtG,cAAApyE,EAAAoyE,cACAsG,EAAAlG,iBAAAxyE,EAAAwyE,iBAEAxyE,EAAAkyE,sBACAlyE,EAAAqyE,qBACAryE,EAAAsyE,oBACAtyE,EAAAoyE,iBACApyE,EAAAwyE,oBAEAxyE,EAAA04E,EAIA,GAAA14E,EAAAkyE,wBAAA,CAEA,GAAApiB,GAAArmE,KAAA8sE,WAAAj3D,QAEA9c,UAAAstE,IAEAA,EAAA+f,kBAAA7vE,EAAAkI,UACA4nD,EAAAof,gBAIAlvE,EAAAkyE,sBAIA,GAAAlyE,EAAAqyE,uBAAA,CAEA,GAAAviB,GAAArmE,KAAA8sE,WAAAxtD,MAEAvmB,UAAAstE,IAEAA,EAAA+f,kBAAA7vE,EAAAmI,SACA2nD,EAAAof,gBAIAlvE,EAAAqyE,qBAIA,GAAAryE,EAAAsyE,sBAAA,CAEA,GAAAxiB,GAAArmE,KAAA8sE,WAAAv9D,KAEAxW,UAAAstE,IAEAA,EAAA0f,gBAAAxvE,EAAAwH,QACAsoD,EAAAof,gBAIAlvE,EAAAsyE,oBAIA,GAAAtyE,EAAAuyE,wBAAA,CAEA,GAAAziB,GAAArmE,KAAA8sE,WAAAqiB,YAEAp2F,UAAAstE,IAEAA,EAAAyf,UAAAvvE,EAAAiyE,eACAniB,EAAAof,gBAIAlvE,EAAAuyE,2BAaA,MATAvyE,GAAAwyE,mBAEAxyE,EAAAg3E,cAAAprE,EAAA5L,UACAvW,KAAA2pF,OAAApzE,EAAAozE,OAEApzE,EAAAwyE,qBAIA/oF,MAIAwtF,aAAA,SAAAj3E,GAIA,MAFAA,GAAA24E,qBAAAr7E,GAAAy5E,gBAAAE,aAAAj3E,GAEAvW,KAAAovF,mBAAA74E,EAAA24E,mBAIAE,mBAAA,SAAA74E,GAEA,GAAAw2D,GAAA,GAAA3uD,cAAA,EAAA7H,EAAAkI,SAAA3kB,OAGA,IAFAkG,KAAAof,aAAA,cAAAvL,GAAAwL,gBAAA0tD,EAAA,GAAAqZ,kBAAA7vE,EAAAkI,WAEAlI,EAAAmI,QAAA5kB,OAAA,GAEA,GAAA4kB,GAAA,GAAAN,cAAA,EAAA7H,EAAAmI,QAAA5kB,OACAkG,MAAAof,aAAA,YAAAvL,GAAAwL,gBAAAX,EAAA,GAAA0nE,kBAAA7vE,EAAAmI,UAIA,GAAAnI,EAAAwH,OAAAjkB,OAAA,GAEA,GAAAikB,GAAA,GAAAK,cAAA,EAAA7H,EAAAwH,OAAAjkB,OACAkG,MAAAof,aAAA,WAAAvL,GAAAwL,gBAAAtB,EAAA,GAAAgoE,gBAAAxvE,EAAAwH,SAIA,GAAAxH,EAAA4yE,IAAArvF,OAAA,GAEA,GAAAqvF,GAAA,GAAA/qE,cAAA,EAAA7H,EAAA4yE,IAAArvF,OACAkG,MAAAof,aAAA,QAAAvL,GAAAwL,gBAAA8pE,EAAA,GAAAjD,kBAAA3vE,EAAA4yE,MAIA,GAAA5yE,EAAA8yE,KAAAvvF,OAAA,GAEA,GAAAuvF,GAAA,GAAAjrE,cAAA,EAAA7H,EAAA8yE,KAAAvvF,OACAkG,MAAAof,aAAA,SAAAvL,GAAAwL,gBAAAgqE,EAAA,GAAAnD,kBAAA3vE,EAAA8yE,OAIA,GAAA9yE,EAAA0vE,QAAAnsF,OAAA,GAEA,GAAAu1F,GAAA94E,EAAAkI,SAAA3kB,OAAA,MAAAutF,YAAAJ,YACAhB,EAAA,GAAAoJ,GAAA,EAAA94E,EAAA0vE,QAAAnsF,OACAkG,MAAAsuF,SAAA,GAAAz6E,GAAAwL,gBAAA4mE,EAAA,GAAAD,iBAAAzvE,EAAA0vE,UAMAjmF,KAAA2pF,OAAApzE,EAAAozE,MAIA,QAAAxwF,KAAAod,GAAA4xE,aAAA,CAKA,OAHAxsE,MACAwsE,EAAA5xE,EAAA4xE,aAAAhvF,GAEAU,EAAA,EAAAuP,EAAA++E,EAAAruF,OAA4CD,EAAAuP,EAAOvP,IAAA,CAEnD,GAAAo0F,GAAA9F,EAAAtuF,GAEAwsE,EAAA,GAAAxyD,GAAAyzE,iBAAA,EAAA2G,EAAAn0F,OAAA;AAEA6hB,EAAAjb,KAAA2lE,EAAA+f,kBAAA6H,IAIAjuF,KAAAmuF,gBAAAh1F,GAAAwiB,EAMA,GAAApF,EAAAgyE,YAAAzuF,OAAA,GAEA,GAAAyuF,GAAA,GAAA10E,GAAAyzE,iBAAA,EAAA/wE,EAAAgyE,YAAAzuF,OAAA,EACAkG,MAAAof,aAAA,YAAAmpE,EAAAlC,kBAAA9vE,EAAAgyE,cAIA,GAAAhyE,EAAA+xE,YAAAxuF,OAAA,GAEA,GAAAwuF,GAAA,GAAAz0E,GAAAyzE,iBAAA,EAAA/wE,EAAA+xE,YAAAxuF,OAAA,EACAkG,MAAAof,aAAA,aAAAkpE,EAAAjC,kBAAA9vE,EAAA+xE,cAkBA,MAZA,QAAA/xE,EAAA6jE,iBAEAp6E,KAAAo6E,eAAA7jE,EAAA6jE,eAAA5wB,SAIA,OAAAjzC,EAAA4B,cAEAnY,KAAAmY,YAAA5B,EAAA4B,YAAAqxC,SAIAxpD,MAIAgY,mBAAA,WAEA,GAAA29C,GAAA,GAAA9hD,GAAA8L,OAEA,mBAEA,OAAA3f,KAAAmY,cAEAnY,KAAAmY,YAAA,GAAAtE,GAAA64D,KAIA,IAAAK,GAAA/sE,KAAA8sE,WAAAj3D,SAAA8F,KAEA,IAAAoxD,EAAA,CAEA,GAAA/lD,GAAAhnB,KAAAmY,WACA6O,GAAAukD,WAEA,QAAA1xE,GAAA,EAAA2xE,EAAAuB,EAAAjzE,OAA2CD,EAAA2xE,EAAQ3xE,GAAA,EAEnD87D,EAAA2C,UAAAyU,EAAAlzE,GACAmtB,EAAAykD,cAAA9V,GAMA58D,SAAAg0E,GAAA,IAAAA,EAAAjzE,SAEAkG,KAAAmY,YAAAu3B,IAAAxjC,IAAA,OACAlM,KAAAmY,YAAAC,IAAAlM,IAAA,SAIA4W,MAAA9iB,KAAAmY,YAAAu3B,IAAAzmC,IAAA6Z,MAAA9iB,KAAAmY,YAAAu3B,IAAA7mC,IAAAia,MAAA9iB,KAAAmY,YAAAu3B,IAAAnlC,KAEA/G,QAAAC,MAAA,oIAAAzD,UAQAiY,sBAAA,WAEA,GAAA2zD,GAAA,GAAA/3D,GAAA64D,KACA/W,EAAA,GAAA9hD,GAAA8L,OAEA,mBAEA,OAAA3f,KAAAo6E,iBAEAp6E,KAAAo6E,eAAA,GAAAvmE,GAAAo5D,OAIA,IAAAF,GAAA/sE,KAAA8sE,WAAAj3D,SAAA8F,KAEA,IAAAoxD,EAAA,CAEAnB,EAAAL,WAIA,QAFA/c,GAAAxuD,KAAAo6E,eAAA5rB,OAEA30D,EAAA,EAAA2xE,EAAAuB,EAAAjzE,OAA2CD,EAAA2xE,EAAQ3xE,GAAA,EAEnD87D,EAAA2C,UAAAyU,EAAAlzE,GACA+xE,EAAAH,cAAA9V,EAIAiW,GAAApd,SAOA,QAFA4pB,GAAA,EAEAv+E,EAAA,EAAA2xE,EAAAuB,EAAAjzE,OAA2CD,EAAA2xE,EAAQ3xE,GAAA,EAEnD87D,EAAA2C,UAAAyU,EAAAlzE,GACAu+E,EAAAp/D,KAAAZ,IAAAggE,EAAA5pB,EAAArD,kBAAAwK,GAIA31D,MAAAo6E,eAAApvB,OAAAhyC,KAAA+xC,KAAAqtB,GAEAt1D,MAAA9iB,KAAAo6E,eAAApvB,SAEAxnD,QAAAC,MAAA,+HAAAzD,WAUAkX,mBAAA,aAMAC,qBAAA,WAEA,GAAAvF,GAAA5R,KAAA4R,MACAk7D,EAAA9sE,KAAA8sE,WACA6c,EAAA3pF,KAAA2pF,MAEA,IAAA7c,EAAAj3D,SAAA,CAEA,GAAAk3D,GAAAD,EAAAj3D,SAAA8F,KAEA,IAAA5iB,SAAA+zE,EAAAxtD,OAEAtf,KAAAof,aAAA,YAAAvL,GAAAwL,gBAAA,GAAAjB,cAAA2uD,EAAAjzE,QAAA,QAQA,QAFA4kB,GAAAouD,EAAAxtD,OAAA3D,MAEA9hB,EAAA,EAAA2xE,EAAA9sD,EAAA5kB,OAAyCD,EAAA2xE,EAAQ3xE,IAEjD6kB,EAAA7kB,GAAA,CAMA,IAEAiwF,GAAAC,EAAAC,EAFAtrE,EAAAouD,EAAAxtD,OAAA3D,MAIA2zE,EAAA,GAAAz7E,GAAA8L,QACA4vE,EAAA,GAAA17E,GAAA8L,QACA6vE,EAAA,GAAA37E,GAAA8L,QAEAsH,EAAA,GAAApT,GAAA8L,QACAoH,EAAA,GAAAlT,GAAA8L,OAIA,IAAA/N,EAAA,CAEA,GAAAq0E,GAAAr0E,EAAA+J,KAEA,KAAAguE,EAAA7vF,QAEAkG,KAAA4uF,SAAA,EAAA3I,EAAAnsF,OAIA,QAAAi0E,GAAA,EAAAkb,EAAAU,EAAA7vF,OAAwCi0E,EAAAkb,IAAQlb,EAOhD,OALA6b,GAAAD,EAAA5b,GAEAnvD,EAAAgrE,EAAAhrE,MACA2mC,EAAAqkC,EAAArkC,MAEA1rD,EAAA+kB,EAAA4sD,EAAA5sD,EAAA2mC,EAA6C1rD,EAAA2xE,EAAQ3xE,GAAA,EAErDiwF,EAAA,EAAA7D,EAAApsF,EAAA,GACAkwF,EAAA,EAAA9D,EAAApsF,EAAA,GACAmwF,EAAA,EAAA/D,EAAApsF,EAAA,GAEAy1F,EAAAh3B,UAAAyU,EAAA+c,GACAyF,EAAAj3B,UAAAyU,EAAAgd,GACAyF,EAAAl3B,UAAAyU,EAAAid,GAEA/iE,EAAAimC,WAAAsiC,EAAAD,GACAxoE,EAAAmmC,WAAAoiC,EAAAC,GACAtoE,EAAA2gD,MAAA7gD,GAEArI,EAAAorE,IAAA7iE,EAAAhe,EACAyV,EAAAorE,EAAA,IAAA7iE,EAAApe,EACA6V,EAAAorE,EAAA,IAAA7iE,EAAA1c,EAEAmU,EAAAqrE,IAAA9iE,EAAAhe,EACAyV,EAAAqrE,EAAA,IAAA9iE,EAAApe,EACA6V,EAAAqrE,EAAA,IAAA9iE,EAAA1c,EAEAmU,EAAAsrE,IAAA/iE,EAAAhe,EACAyV,EAAAsrE,EAAA,IAAA/iE,EAAApe,EACA6V,EAAAsrE,EAAA,IAAA/iE,EAAA1c,MAUA,QAAA1Q,GAAA,EAAA2xE,EAAAuB,EAAAjzE,OAA2CD,EAAA2xE,EAAQ3xE,GAAA,EAEnDy1F,EAAAh3B,UAAAyU,EAAAlzE,GACA01F,EAAAj3B,UAAAyU,EAAAlzE,EAAA,GACA21F,EAAAl3B,UAAAyU,EAAAlzE,EAAA,GAEAotB,EAAAimC,WAAAsiC,EAAAD,GACAxoE,EAAAmmC,WAAAoiC,EAAAC,GACAtoE,EAAA2gD,MAAA7gD,GAEArI,EAAA7kB,GAAAotB,EAAAhe,EACAyV,EAAA7kB,EAAA,GAAAotB,EAAApe,EACA6V,EAAA7kB,EAAA,GAAAotB,EAAA1c,EAEAmU,EAAA7kB,EAAA,GAAAotB,EAAAhe,EACAyV,EAAA7kB,EAAA,GAAAotB,EAAApe,EACA6V,EAAA7kB,EAAA,GAAAotB,EAAA1c,EAEAmU,EAAA7kB,EAAA,GAAAotB,EAAAhe,EACAyV,EAAA7kB,EAAA,GAAAotB,EAAApe,EACA6V,EAAA7kB,EAAA,GAAAotB,EAAA1c,CAMAvK,MAAAyvF,mBAEA3iB,EAAAxtD,OAAAmmE,iBAMAkF,gBAAA,WAEAnnF,QAAAwmD,KAAA,+DAIA0lC,eAAA,SAAA1mD,GAEAxlC,QAAAwmD,KAAA,8DAIA5lD,MAAA,SAAAmS,EAAAgI,GAEA,GAAAhI,YAAA1C,GAAA2K,kBAGA,WADAhb,SAAAC,MAAA,kFAAA8S,EAKAxd,UAAAwlB,MAAA,EAEA,IAAAuuD,GAAA9sE,KAAA8sE,UAEA,QAAA3xE,KAAA2xE,GAEA,GAAA/zE,SAAAwd,EAAAu2D,WAAA3xE,GAUA,OARAw0F,GAAA7iB,EAAA3xE,GACAy0F,EAAAD,EAAAh0E,MAEAk0E,EAAAt5E,EAAAu2D,WAAA3xE,GACA20F,EAAAD,EAAAl0E,MAEAo0E,EAAAF,EAAAvpB,SAEAzsE,EAAA,EAAAk0E,EAAAgiB,EAAAxxE,EAA+C1kB,EAAAi2F,EAAAh2F,OAA4BD,IAAAk0E,IAE3E6hB,EAAA7hB,GAAA+hB,EAAAj2F,EAMA,OAAAmG,OAIAyvF,iBAAA,WAMA,OAFAxmF,GAAAJ,EAAA0B,EAAAjI,EAFAoc,EAAA1e,KAAA8sE,WAAAxtD,OAAA3D,MAIA9hB,EAAA,EAAA2xE,EAAA9sD,EAAA5kB,OAAuCD,EAAA2xE,EAAQ3xE,GAAA,EAE/CoP,EAAAyV,EAAA7kB,GACAgP,EAAA6V,EAAA7kB,EAAA,GACA0Q,EAAAmU,EAAA7kB,EAAA,GAEAyI,EAAA,EAAA0W,KAAA+xC,KAAA9hD,IAAAJ,IAAA0B,KAEAmU,EAAA7kB,IAAAyI,EACAoc,EAAA7kB,EAAA,IAAAyI,EACAoc,EAAA7kB,EAAA,IAAAyI,GAMAmiF,OAAA,WAEA,GAAA1nE,IACA6nE,UACA/kC,QAAA,IACAl7C,KAAA,iBACAugF,UAAA,yBAUA,IAJAnoE,EAAA4+D,KAAA37E,KAAA27E,KACA5+D,EAAApY,KAAA3E,KAAA2E,KACA,KAAA3E,KAAA7G,OAAA4jB,EAAA5jB,KAAA6G,KAAA7G,MAEAJ,SAAAiH,KAAA2sF,WAAA,CAEA,GAAAA,GAAA3sF,KAAA2sF,UAEA,QAAAxxF,KAAAwxF,GAEA5zF,SAAA4zF,EAAAxxF,KAAA4hB,EAAA5hB,GAAAwxF,EAAAxxF,GAIA,OAAA4hB,GAIAA,QAAe+vD,cAEf,IAAAl7D,GAAA5R,KAAA4R,KAEA,WAAAA,EAAA,CAEA,GAAA+J,GAAAhiB,MAAAwC,UAAAukB,MAAArpB,KAAAua,EAAA+J,MAEAoB,QAAAnL,OACAjN,KAAAiN,EAAA+J,MAAAtf,YAAAlD,KACAwiB,SAKA,GAAAmxD,GAAA9sE,KAAA8sE,UAEA,QAAA3xE,KAAA2xE,GAAA,CAEA,GAAAzG,GAAAyG,EAAA3xE,GAEAwgB,EAAAhiB,MAAAwC,UAAAukB,MAAArpB,KAAAgvE,EAAA1qD,MAEAoB,QAAA+vD,WAAA3xE,IACAmrE,SAAAD,EAAAC,SACA3hE,KAAA0hE,EAAA1qD,MAAAtf,YAAAlD,KACAwiB,SAKA,GAAAguE,GAAA3pF,KAAA2pF,MAEAA,GAAA7vF,OAAA,IAEAijB,OAAA4sE,OAAAzuE,KAAA2B,MAAA3B,KAAAC,UAAAwuE,IAIA,IAAAvP,GAAAp6E,KAAAo6E,cAWA,OATA,QAAAA,IAEAr9D,OAAAq9D,gBACA5rB,OAAA4rB,EAAA5rB,OAAAhJ,UACAwF,OAAAovB,EAAApvB,SAKAjuC,GAIAysC,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAxV,GAEA,GAAA2O,GAAA3O,EAAA2O,KAEA,QAAAA,GAEA5R,KAAAsuF,SAAA18E,EAAA43C,QAIA,IAAAsjB,GAAA7pE,EAAA6pE,UAEA,QAAA3zE,KAAA2zE,GAAA,CAEA,GAAAzG,GAAAyG,EAAA3zE,EACA6G,MAAAof,aAAAjmB,EAAAktE,EAAA7c,SAMA,OAFAmgC,GAAA1mF,EAAA0mF,OAEA9vF,EAAA,EAAAuP,EAAAugF,EAAA7vF,OAAqCD,EAAAuP,EAAOvP,IAAA,CAE5C,GAAA+vF,GAAAD,EAAA9vF,EACAmG,MAAA4uF,SAAAhF,EAAAhrE,MAAAgrE,EAAArkC,OAIA,MAAAvlD,OAIAsZ,QAAA,WAEAtZ,KAAA8sD,eAAuBnoD,KAAA,cAMvBkP,EAAAq7C,gBAAA/yD,UAAAyH,MAAAiQ,EAAA2K,eAAAriB,WAEA0X,EAAA2K,eAAAwxE,SAAA,MAQAn8E,EAAAo8E,wBAAA,WAEAp8E,EAAA2K,eAAAnnB,KAAA2I,MAEAA,KAAA2E,KAAA,0BACA3E,KAAAkwF,kBAAAn3F,QAIA8a,EAAAo8E,wBAAA9zF,UAAA7B,OAAA8B,OAAAyX,EAAA2K,eAAAriB,WACA0X,EAAAo8E,wBAAA9zF,UAAAE,YAAAwX,EAAAo8E,wBAEAp8E,EAAAo8E,wBAAA9zF,UAAAyyF,SAAA,SAAAhwE,EAAA2mC,EAAA4qC,GAEAnwF,KAAA2pF,OAAAjpF,MAEAke,QACA2mC,QACA4qC,eAMAt8E,EAAAo8E,wBAAA9zF,UAAAsc,KAAA,SAAAxV,GAEA,GAAA2O,GAAA3O,EAAA2O,KAEA,QAAAA,GAEA5R,KAAAsuF,SAAA18E,EAAA43C,QAIA,IAAAsjB,GAAA7pE,EAAA6pE,UAEA,QAAA3zE,KAAA2zE,GAAA,CAEA,GAAAzG,GAAAyG,EAAA3zE,EACA6G,MAAAof,aAAAjmB,EAAAktE,EAAA7c,SAMA,OAFAmgC,GAAA1mF,EAAA0mF,OAEA9vF,EAAA,EAAAuP,EAAAugF,EAAA7vF,OAAoCD,EAAAuP,EAAOvP,IAAA,CAE3C,GAAA+vF,GAAAD,EAAA9vF,EACAmG,MAAA4uF,SAAAhF,EAAAhrE,MAAAgrE,EAAArkC,MAAAqkC,EAAAuG,WAIA,MAAAnwF,OAIA6T,EAAAq7C,gBAAA/yD,UAAAyH,MAAAiQ,EAAAo8E,wBAAA9zF,WAUA0X,EAAAu8E,OAAA,WAEAv8E,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,SAEA3E,KAAAqwF,mBAAA,GAAAx8E,GAAAyzD,QACAtnE,KAAAwnE,iBAAA,GAAA3zD,GAAAyzD,SAIAzzD,EAAAu8E,OAAAj0F,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAu8E,OAAAj0F,UAAAE,YAAAwX,EAAAu8E,OAEAv8E,EAAAu8E,OAAAj0F,UAAAkoF,kBAAA,WAEA,GAAAh5B,GAAA,GAAAx3C,GAAAy2C,UAEA,iBAAAkN,GAEA,GAAAh+D,GAAAg+D,GAAA,GAAA3jD,GAAA8L,OAIA,OAFA3f,MAAAkkF,mBAAA74B,GAEA7xD,EAAA0S,IAAA,QAAA2+C,gBAAAQ,OAMAx3C,EAAAu8E,OAAAj0F,UAAA8c,OAAA,WAIA,GAAAmiE,GAAA,GAAAvnE,GAAAyzD,OAEA,iBAAA3R,GAEAylB,EAAAniE,OAAAjZ,KAAA6V,SAAA8/C,EAAA31D,KAAAwqD,IAEAxqD,KAAAqrD,WAAAoX,sBAAA2Y,OAMAvnE,EAAAu8E,OAAAj0F,UAAAqtD,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIA6T,EAAAu8E,OAAAj0F,UAAAsc,KAAA,SAAAxV,GAOA,MALA4Q,GAAAkuE,SAAA5lF,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAqwF,mBAAA53E,KAAAxV,EAAAotF,oBACArwF,KAAAwnE,iBAAA/uD,KAAAxV,EAAAukE,kBAEAxnE,MAaA6T,EAAAy8E,WAAA,SAAAlc,EAAAC,EAAAkc,GAEA18E,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,YAEA,IAAAilD,GAAA,GAAA2qB,EAAA,EAEAic,EAAA,GAAA38E,GAAAkF,kBAAA6wC,EAAA2qB,EAAAH,EAAAC,EACAmc,GAAAhmC,GAAAt+C,IAAA,QACAskF,EAAAv3E,OAAA,GAAApF,GAAA8L,QAAA,QACA3f,KAAA+V,IAAAy6E,EAEA,IAAAC,GAAA,GAAA58E,GAAAkF,kBAAA6wC,EAAA2qB,EAAAH,EAAAC,EACAoc,GAAAjmC,GAAAt+C,IAAA,QACAukF,EAAAx3E,OAAA,GAAApF,GAAA8L,WAAA,MACA3f,KAAA+V,IAAA06E,EAEA,IAAAC,GAAA,GAAA78E,GAAAkF,kBAAA6wC,EAAA2qB,EAAAH,EAAAC,EACAqc,GAAAlmC,GAAAt+C,IAAA,OACAwkF,EAAAz3E,OAAA,GAAApF,GAAA8L,QAAA,QACA3f,KAAA+V,IAAA26E,EAEA,IAAAC,GAAA,GAAA98E,GAAAkF,kBAAA6wC,EAAA2qB,EAAAH,EAAAC,EACAsc,GAAAnmC,GAAAt+C,IAAA,QACAykF,EAAA13E,OAAA,GAAApF,GAAA8L,QAAA,SACA3f,KAAA+V,IAAA46E,EAEA,IAAAC,GAAA,GAAA/8E,GAAAkF,kBAAA6wC,EAAA2qB,EAAAH,EAAAC,EACAuc,GAAApmC,GAAAt+C,IAAA,QACA0kF,EAAA33E,OAAA,GAAApF,GAAA8L,QAAA,QACA3f,KAAA+V,IAAA66E,EAEA,IAAAC,GAAA,GAAAh9E,GAAAkF,kBAAA6wC,EAAA2qB,EAAAH,EAAAC,EACAwc,GAAArmC,GAAAt+C,IAAA,QACA2kF,EAAA53E,OAAA,GAAApF,GAAA8L,QAAA,SACA3f,KAAA+V,IAAA86E,GAEA7wF,KAAA8wF,aAAA,GAAAj9E,GAAAk9E,sBAAAR,KAAuFS,OAAAn9E,EAAA+gD,UAAAq8B,UAAAp9E,EAAAggD,aAAAq9B,UAAAr9E,EAAAggD,eAEvF7zD,KAAAmxF,cAAA,SAAA/8E,EAAAF,GAEA,OAAAlU,KAAAiiF,QAAAjiF,KAAA4sE,mBAEA,IAAAkkB,GAAA9wF,KAAA8wF,aACAM,EAAAN,EAAAM,eAEAN,GAAAM,mBAEAN,EAAAO,eAAA,EACAj9E,EAAAhc,OAAA8b,EAAAs8E,EAAAM,GAEAA,EAAAO,eAAA,EACAj9E,EAAAhc,OAAA8b,EAAAu8E,EAAAK,GAEAA,EAAAO,eAAA,EACAj9E,EAAAhc,OAAA8b,EAAAw8E,EAAAI,GAEAA,EAAAO,eAAA,EACAj9E,EAAAhc,OAAA8b,EAAAy8E,EAAAG,GAEAA,EAAAO,eAAA,EACAj9E,EAAAhc,OAAA8b,EAAA08E,EAAAE,GAEAA,EAAAM,kBAEAN,EAAAO,eAAA,EACAj9E,EAAAhc,OAAA8b,EAAA28E,EAAAC,GAEA18E,EAAAk9E,gBAAA,QAMAz9E,EAAAy8E,WAAAn0F,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAy8E,WAAAn0F,UAAAE,YAAAwX,EAAAy8E,WAQAz8E,EAAAg2C,mBAAA,SAAA5Z,EAAA6Z,EAAA3Z,EAAA4Z,EAAAqqB,EAAAC,GAEAxgE,EAAAu8E,OAAA/4F,KAAA2I,MAEAA,KAAA2E,KAAA,qBAEA3E,KAAAuO,KAAA,EAEAvO,KAAAiwC,OACAjwC,KAAA8pD,QACA9pD,KAAAmwC,MACAnwC,KAAA+pD,SAEA/pD,KAAAo0E,KAAAr7E,SAAAq7E,IAAA,GACAp0E,KAAAq0E,IAAAt7E,SAAAs7E,IAAA,IAEAr0E,KAAAmqD,0BAIAt2C,EAAAg2C,mBAAA1tD,UAAA7B,OAAA8B,OAAAyX,EAAAu8E,OAAAj0F,WACA0X,EAAAg2C,mBAAA1tD,UAAAE,YAAAwX,EAAAg2C,mBAEAh2C,EAAAg2C,mBAAA1tD,UAAAguD,uBAAA,WAEA,GAAArH,IAAA9iD,KAAA8pD,MAAA9pD,KAAAiwC,OAAA,EAAAjwC,KAAAuO,MACAw0C,GAAA/iD,KAAAmwC,IAAAnwC,KAAA+pD,SAAA,EAAA/pD,KAAAuO,MACA1H,GAAA7G,KAAA8pD,MAAA9pD,KAAAiwC,MAAA,EACAshD,GAAAvxF,KAAAmwC,IAAAnwC,KAAA+pD,QAAA,CAEA/pD,MAAAwnE,iBAAAiN,iBAAA5tE,EAAAi8C,EAAAj8C,EAAAi8C,EAAAyuC,EAAAxuC,EAAAwuC,EAAAxuC,EAAA/iD,KAAAo0E,KAAAp0E,KAAAq0E,MAIAxgE,EAAAg2C,mBAAA1tD,UAAAsc,KAAA,SAAAxV,GAaA,MAXA4Q,GAAAu8E,OAAAj0F,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAiwC,KAAAhtC,EAAAgtC,KACAjwC,KAAA8pD,MAAA7mD,EAAA6mD,MACA9pD,KAAAmwC,IAAAltC,EAAAktC,IACAnwC,KAAA+pD,OAAA9mD,EAAA8mD,OACA/pD,KAAAo0E,KAAAnxE,EAAAmxE,KACAp0E,KAAAq0E,IAAApxE,EAAAoxE,IAEAr0E,KAAAuO,KAAAtL,EAAAsL,KAEAvO,MAIA6T,EAAAg2C,mBAAA1tD,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAUA,OARA92B,GAAAoF,OAAA5T,KAAAvO,KAAAuO,KACAwO,EAAAoF,OAAA8tB,KAAAjwC,KAAAiwC,KACAlzB,EAAAoF,OAAA2nC,MAAA9pD,KAAA8pD,MACA/sC,EAAAoF,OAAAguB,IAAAnwC,KAAAmwC,IACApzB,EAAAoF,OAAA4nC,OAAA/pD,KAAA+pD,OACAhtC,EAAAoF,OAAAiyD,KAAAp0E,KAAAo0E,KACAr3D,EAAAoF,OAAAkyD,IAAAr0E,KAAAq0E,IAEAt3D,GAYAlJ,EAAAkF,kBAAA,SAAA6wC,EAAA2qB,EAAAH,EAAAC,GAEAxgE,EAAAu8E,OAAA/4F,KAAA2I,MAEAA,KAAA2E,KAAA,oBAEA3E,KAAAuO,KAAA,EAEAvO,KAAA4pD,IAAA7wD,SAAA6wD,IAAA,GACA5pD,KAAAu0E,OAAAx7E,SAAAw7E,IAAA,EACAv0E,KAAAo0E,KAAAr7E,SAAAq7E,IAAA,GACAp0E,KAAAq0E,IAAAt7E,SAAAs7E,IAAA,IAEAr0E,KAAAmqD,0BAIAt2C,EAAAkF,kBAAA5c,UAAA7B,OAAA8B,OAAAyX,EAAAu8E,OAAAj0F,WACA0X,EAAAkF,kBAAA5c,UAAAE,YAAAwX,EAAAkF,kBASAlF,EAAAkF,kBAAA5c,UAAAq1F,QAAA,SAAAC,EAAAC,GAEA34F,SAAA24F,MAAA,IAEA1xF,KAAA4pD,IAAA,EAAA/1C,EAAAmF,KAAA4jE,SAAA5jE,KAAA24E,KAAAD,GAAA,EAAAD,KACAzxF,KAAAmqD,0BAyCAt2C,EAAAkF,kBAAA5c,UAAAy1F,cAAA,SAAAC,EAAAC,EAAA7oF,EAAAJ,EAAA4G,EAAAC,GAEA1P,KAAA6xF,YACA7xF,KAAA8xF,aACA9xF,KAAAiJ,IACAjJ,KAAA6I,IACA7I,KAAAyP,QACAzP,KAAA0P,SAEA1P,KAAAmqD,0BAKAt2C,EAAAkF,kBAAA5c,UAAAguD,uBAAA,WAEA,GAAAP,GAAA/1C,EAAAmF,KAAA4jE,SAAA,EAAA5jE,KAAA24E,KAAA34E,KAAA2wC,IAAA,GAAA91C,EAAAmF,KAAAw7D,SAAAx0E,KAAA4pD,MAAA5pD,KAAAuO,MAEA,IAAAvO,KAAA6xF,UAAA,CAEA,GAAAtd,GAAAv0E,KAAA6xF,UAAA7xF,KAAA8xF,WACA3hD,EAAAn3B,KAAA2wC,IAAA91C,EAAAmF,KAAAw7D,SAAA,GAAA5qB,IAAA5pD,KAAAo0E,KACArqB,GAAA5Z,EACAF,EAAAskC,EAAAxqB,EACAD,EAAAyqB,EAAApkC,EACA1gC,EAAAuJ,KAAAuqD,IAAAzZ,EAAA7Z,GACAvgC,EAAAsJ,KAAAuqD,IAAApzB,EAAA4Z,EAEA/pD,MAAAwnE,iBAAA2M,YACAlkC,EAAAjwC,KAAAiJ,EAAAwG,EAAAzP,KAAA6xF,UACA5hD,GAAAjwC,KAAAiJ,EAAAjJ,KAAAyP,SAAAzP,KAAA6xF,UACA1hD,GAAAnwC,KAAA6I,EAAA7I,KAAA0P,UAAA1P,KAAA8xF,WACA3hD,EAAAnwC,KAAA6I,EAAA6G,EAAA1P,KAAA8xF,WACA9xF,KAAAo0E,KACAp0E,KAAAq0E,SAKAr0E,MAAAwnE,iBAAA8M,gBAAA1qB,EAAA5pD,KAAAu0E,OAAAv0E,KAAAo0E,KAAAp0E,KAAAq0E,MAMAxgE,EAAAkF,kBAAA5c,UAAAsc,KAAA,SAAAxV,GAWA,MATA4Q,GAAAu8E,OAAAj0F,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAA4pD,IAAA3mD,EAAA2mD,IACA5pD,KAAAu0E,OAAAtxE,EAAAsxE,OACAv0E,KAAAo0E,KAAAnxE,EAAAmxE,KACAp0E,KAAAq0E,IAAApxE,EAAAoxE,IAEAr0E,KAAAuO,KAAAtL,EAAAsL,KAEAvO,MAIA6T,EAAAkF,kBAAA5c,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAQA,OANA92B,GAAAoF,OAAA5T,KAAAvO,KAAAuO,KACAwO,EAAAoF,OAAAynC,IAAA5pD,KAAA4pD,IACA7sC,EAAAoF,OAAAoyD,OAAAv0E,KAAAu0E,OACAx3D,EAAAoF,OAAAiyD,KAAAp0E,KAAAo0E,KACAr3D,EAAAoF,OAAAkyD,IAAAr0E,KAAAq0E,IAEAt3D,GAWAlJ,EAAAk+E,MAAA,SAAAxiF,GAEAsE,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,QAEA3E,KAAAuP,MAAA,GAAAsE,GAAAqiD,MAAA3mD,IAIAsE,EAAAk+E,MAAA51F,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAk+E,MAAA51F,UAAAE,YAAAwX,EAAAk+E,MAEAl+E,EAAAk+E,MAAA51F,UAAAsc,KAAA,SAAAxV,GAMA,MAJA4Q,GAAAkuE,SAAA5lF,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAuP,MAAAkJ,KAAAxV,EAAAsM,OAEAvP,MASA6T,EAAAm+E,aAAA,SAAAziF,GAEAsE,EAAAk+E,MAAA16F,KAAA2I,KAAAuP,GAEAvP,KAAA2E,KAAA,gBAIAkP,EAAAm+E,aAAA71F,UAAA7B,OAAA8B,OAAAyX,EAAAk+E,MAAA51F,WACA0X,EAAAm+E,aAAA71F,UAAAE,YAAAwX,EAAAm+E,aAEAn+E,EAAAm+E,aAAA71F,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAIA,OAFA92B,GAAAoF,OAAA5S,MAAAvP,KAAAuP,MAAA8nD,SAEAt6C,GAWAlJ,EAAA+B,iBAAA,SAAArG,EAAA0iF,GAEAp+E,EAAAk+E,MAAA16F,KAAA2I,KAAAuP,GAEAvP,KAAA2E,KAAA,mBAEA3E,KAAA6V,SAAA3J,IAAA,OACAlM,KAAA0V,eAEA1V,KAAAgD,OAAA,GAAA6Q,GAAAkuE,SAEA/hF,KAAAiyF,UAAAl5F,SAAAk5F,IAAA,EAEAjyF,KAAA0iF,cACA1iF,KAAAkyF,cAEAlyF,KAAAmyF,iBAAA,GACAnyF,KAAAoyF,gBAAA,IAEApyF,KAAAqyF,sBACAryF,KAAAsyF,kBAAA,IACAtyF,KAAAuyF,gBAAA,IACAvyF,KAAAwyF,wBAEAxyF,KAAAyyF,uBAEAzyF,KAAA0yF,WAAA,EACA1yF,KAAA2yF,eAAA,GAEA3yF,KAAA4yF,eAAA,IACA5yF,KAAA6yF,gBAAA,IAEA7yF,KAAA8yF,UAAA,KACA9yF,KAAA+yF,cAAA,KACA/yF,KAAAgzF,aAAA,KACAhzF,KAAAizF,aAAA,MAIAp/E,EAAA+B,iBAAAzZ,UAAA7B,OAAA8B,OAAAyX,EAAAk+E,MAAA51F,WACA0X,EAAA+B,iBAAAzZ,UAAAE,YAAAwX,EAAA+B,iBAEA/B,EAAA+B,iBAAAzZ,UAAAsc,KAAA,SAAAxV,GA0BA,MAxBA4Q,GAAAk+E,MAAA51F,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAiyF,UAAAhvF,EAAAgvF,UACAjyF,KAAAgD,OAAAC,EAAAD,OAAAwmD,QAEAxpD,KAAA0iF,WAAAz/E,EAAAy/E,WACA1iF,KAAAkyF,WAAAjvF,EAAAivF,WAEAlyF,KAAAmyF,iBAAAlvF,EAAAkvF,iBACAnyF,KAAAoyF,gBAAAnvF,EAAAmvF,gBAEApyF,KAAAqyF,iBAAApvF,EAAAovF,iBACAryF,KAAAsyF,kBAAArvF,EAAAqvF,kBACAtyF,KAAAuyF,gBAAAtvF,EAAAsvF,gBACAvyF,KAAAwyF,mBAAAvvF,EAAAuvF,mBAEAxyF,KAAAyyF,oBAAAxvF,EAAAwvF,oBAEAzyF,KAAA0yF,WAAAzvF,EAAAyvF,WACA1yF,KAAA2yF,eAAA1vF,EAAA0vF,eAEA3yF,KAAA4yF,eAAA3vF,EAAA2vF,eACA5yF,KAAA6yF,gBAAA5vF,EAAA4vF,gBAEA7yF,MAIA6T,EAAA+B,iBAAAzZ,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAKA,OAHA92B,GAAAoF,OAAA5S,MAAAvP,KAAAuP,MAAA8nD,SACAt6C,EAAAoF,OAAA8vE,UAAAjyF,KAAAiyF,UAEAl1E,GAUAlJ,EAAAq/E,gBAAA,SAAAC,EAAAC,EAAAnB,GAEAp+E,EAAAk+E,MAAA16F,KAAA2I,KAAAmzF,GAEAnzF,KAAA2E,KAAA,kBAEA3E,KAAA6V,SAAA3J,IAAA,OACAlM,KAAA0V,eAEA1V,KAAAozF,YAAA,GAAAv/E,GAAAqiD,MAAAk9B,GACApzF,KAAAiyF,UAAAl5F,SAAAk5F,IAAA,GAIAp+E,EAAAq/E,gBAAA/2F,UAAA7B,OAAA8B,OAAAyX,EAAAk+E,MAAA51F,WACA0X,EAAAq/E,gBAAA/2F,UAAAE,YAAAwX,EAAAq/E,gBAEAr/E,EAAAq/E,gBAAA/2F,UAAAsc,KAAA,SAAAxV,GAOA,MALA4Q,GAAAk+E,MAAA51F,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAozF,YAAA36E,KAAAxV,EAAAmwF,aACApzF,KAAAiyF,UAAAhvF,EAAAgvF,UAEAjyF,MAIA6T,EAAAq/E,gBAAA/2F,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAMA,OAJA92B,GAAAoF,OAAA5S,MAAAvP,KAAAuP,MAAA8nD,SACAt6C,EAAAoF,OAAAixE,YAAApzF,KAAAozF,YAAA/7B,SACAt6C,EAAAoF,OAAA8vE,UAAAjyF,KAAAiyF,UAEAl1E,GAUAlJ,EAAAw/E,WAAA,SAAA9jF,EAAA0iF,EAAA58E,EAAAi+E,GAEAz/E,EAAAk+E,MAAA16F,KAAA2I,KAAAuP,GAEAvP,KAAA2E,KAAA,aAEA3E,KAAAiyF,UAAAl5F,SAAAk5F,IAAA,EACAjyF,KAAAqV,SAAAtc,SAAAsc,IAAA,EACArV,KAAAszF,MAAAv6F,SAAAu6F,IAAA,GAIAz/E,EAAAw/E,WAAAl3F,UAAA7B,OAAA8B,OAAAyX,EAAAk+E,MAAA51F,WACA0X,EAAAw/E,WAAAl3F,UAAAE,YAAAwX,EAAAw/E,WAEAx/E,EAAAw/E,WAAAl3F,UAAAsc,KAAA,SAAAxV,GAQA,MANA4Q,GAAAk+E,MAAA51F,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAiyF,UAAAhvF,EAAAgvF,UACAjyF,KAAAqV,SAAApS,EAAAoS,SACArV,KAAAszF,MAAArwF,EAAAqwF,MAEAtzF,MAIA6T,EAAAw/E,WAAAl3F,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAOA,OALA92B,GAAAoF,OAAA5S,MAAAvP,KAAAuP,MAAA8nD,SACAt6C,EAAAoF,OAAA8vE,UAAAjyF,KAAAiyF,UACAl1E,EAAAoF,OAAA9M,SAAArV,KAAAqV,SACA0H,EAAAoF,OAAAmxE,MAAAtzF,KAAAszF,MAEAv2E,GAUAlJ,EAAA0/E,UAAA,SAAAhkF,EAAA0iF,EAAA58E,EAAAyzC,EAAAhoC,EAAAwyE,GAEAz/E,EAAAk+E,MAAA16F,KAAA2I,KAAAuP,GAEAvP,KAAA2E,KAAA,YAEA3E,KAAA6V,SAAA3J,IAAA,OACAlM,KAAA0V,eAEA1V,KAAAgD,OAAA,GAAA6Q,GAAAkuE,SAEA/hF,KAAAiyF,UAAAl5F,SAAAk5F,IAAA,EACAjyF,KAAAqV,SAAAtc,SAAAsc,IAAA,EACArV,KAAA8oD,MAAA/vD,SAAA+vD,IAAA9vC,KAAA8uC,GAAA,EACA9nD,KAAA8gB,SAAA/nB,SAAA+nB,IAAA,GACA9gB,KAAAszF,MAAAv6F,SAAAu6F,IAAA,EAEAtzF,KAAA0iF,cACA1iF,KAAAkyF,cAEAlyF,KAAAmyF,iBAAA,GACAnyF,KAAAoyF,gBAAA,IACApyF,KAAAwzF,gBAAA,GAEAxzF,KAAAyyF,uBAEAzyF,KAAA0yF,WAAA,EACA1yF,KAAA2yF,eAAA,GAEA3yF,KAAA4yF,eAAA,IACA5yF,KAAA6yF,gBAAA,IAEA7yF,KAAA8yF,UAAA,KACA9yF,KAAA+yF,cAAA,KACA/yF,KAAAgzF,aAAA,KACAhzF,KAAAizF,aAAA,MAIAp/E,EAAA0/E,UAAAp3F,UAAA7B,OAAA8B,OAAAyX,EAAAk+E,MAAA51F,WACA0X,EAAA0/E,UAAAp3F,UAAAE,YAAAwX,EAAA0/E,UAEA1/E,EAAA0/E,UAAAp3F,UAAAsc,KAAA,SAAAxV,GA2BA,MAzBA4Q,GAAAk+E,MAAA51F,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAiyF,UAAAhvF,EAAAgvF,UACAjyF,KAAAqV,SAAApS,EAAAoS,SACArV,KAAA8oD,MAAA7lD,EAAA6lD,MACA9oD,KAAA8gB,SAAA7d,EAAA6d,SACA9gB,KAAAszF,MAAArwF,EAAAqwF,MAEAtzF,KAAAgD,OAAAC,EAAAD,OAAAwmD,QAEAxpD,KAAA0iF,WAAAz/E,EAAAy/E,WACA1iF,KAAAkyF,WAAAjvF,EAAAivF,WAEAlyF,KAAAmyF,iBAAAlvF,EAAAkvF,iBACAnyF,KAAAoyF,gBAAAnvF,EAAAmvF,gBACApyF,KAAAwzF,gBAAAvwF,EAAAuwF,gBAEAxzF,KAAAyyF,oBAAAxvF,EAAAwvF,oBAEAzyF,KAAA0yF,WAAAzvF,EAAAyvF,WACA1yF,KAAA2yF,eAAA1vF,EAAA0vF,eAEA3yF,KAAA4yF,eAAA3vF,EAAA2vF,eACA5yF,KAAA6yF,gBAAA5vF,EAAA4vF,gBAEA7yF,MAGA6T,EAAA0/E,UAAAp3F,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EASA,OAPA92B,GAAAoF,OAAA5S,MAAAvP,KAAAuP,MAAA8nD,SACAt6C,EAAAoF,OAAA8vE,UAAAjyF,KAAAiyF,UACAl1E,EAAAoF,OAAA9M,SAAArV,KAAAqV,SACA0H,EAAAoF,OAAA2mC,MAAA9oD,KAAA8oD,MACA/rC,EAAAoF,OAAArB,SAAA9gB,KAAA8gB,SACA/D,EAAAoF,OAAAmxE,MAAAtzF,KAAAszF,MAEAv2E,GAUAlJ,EAAA4/E,OAEA5nC,WAEA6nC,SAEA39E,IAAA,SAAA5a,EAAAqb,GAEAxW,KAAA6rD,eAIA7rD,KAAA0zF,MAAAv4F,GAAAqb,IAIAlP,IAAA,SAAAnM,GAEA,GAAA6E,KAAA6rD,aAIA,MAAA7rD,MAAA0zF,MAAAv4F,IAIAwU,OAAA,SAAAxU,SAEA6E,MAAA0zF,MAAAv4F,IAIA86D,MAAA,WAEAj2D,KAAA0zF,WAYA7/E,EAAA8/E,OAAA,WAEA3zF,KAAA4zF,YAAA,aACA5zF,KAAA6zF,eAAA,aACA7zF,KAAA8zF,eAAA,cAIAjgF,EAAA8/E,OAAAx3F,WAEAE,YAAAwX,EAAA8/E,OAEAt9E,YAAAtd,OAEAg7F,eAAA,SAAA/9E,GAEA,GAAAg+E,GAAAh+E,EAAAtY,MAAA,IAEA,YAAAs2F,EAAAl6F,OAAA,MAEAk6F,EAAA7tC,MAEA6tC,EAAAzxF,KAAA,WAIA0xF,cAAA,SAAAlP,EAAAmP,EAAA79E,GAIA,OAFAsF,MAEA9hB,EAAA,EAAkBA,EAAAkrF,EAAAjrF,SAAsBD,EAExC8hB,EAAA9hB,GAAAmG,KAAAm0F,eAAApP,EAAAlrF,GAAAq6F,EAAA79E,EAIA,OAAAsF,IAIAw4E,eAAA,WAEA,GAAAC,EAEA,iBAAA98F,EAAA48F,EAAA79E,GAQA,QAAAg+E,GAAA/xF,GAEA,GAAA8G,GAAA4P,KAAAlJ,IAAAxN,GAAA0W,KAAA+7B,GACA,OAAA/7B,MAAAgI,IAAA,EAAAhI,KAAA2sD,MAAAv8D,IAIA,QAAAkrF,GAAAC,EAAAp7F,EAAAq7F,EAAAh6C,EAAAj8B,EAAAk2E,EAAAC,GAEA,GAEAC,GAFAC,EAAAV,EAAAM,EAIAxgF,EAAAH,EAAA8/E,OAAAkB,SAAAvtF,IAAAstF,EA0DA,IAxDA,OAAA5gF,EAEA2gF,EAAA3gF,EAAA2I,KAAAi4E,IAIAD,EAAA,GAAA9gF,GAAAihF,QAEA9gF,EAAAogF,EACApgF,EAAAyI,eAAApG,GACArC,EAAA2I,KAAAi4E,EAAA,SAAAG,GAEA,GAAAlhF,EAAAmF,KAAA+jE,aAAAgY,EAAAtlF,aACAoE,EAAAmF,KAAA+jE,aAAAgY,EAAArlF,aAAA,CAEA,GAAAD,GAAA4kF,EAAAU,EAAAtlF,OACAC,EAAA2kF,EAAAU,EAAArlF,QAEAslF,EAAA18F,SAAAD,cAAA,SACA28F,GAAAvlF,QACAulF,EAAAtlF,QAEA,IAAAzS,GAAA+3F,EAAAC,WAAA,KACAh4F,GAAAi4F,UAAAH,EAAA,IAAAtlF,EAAAC,GAEAilF,EAAAI,MAAAC,MAIAL,GAAAI,OAIAJ,GAAAlP,kBAMAkP,EAAAH,aAEAh6C,IAEAm6C,EAAAn6C,OAAAtuC,IAAAsuC,EAAA,GAAAA,EAAA,IAEA,IAAAA,EAAA,KAAAm6C,EAAAQ,MAAAthF,EAAA0/C,gBACA,IAAA/Y,EAAA,KAAAm6C,EAAAS,MAAAvhF,EAAA0/C,iBAIAh1C,GAEAo2E,EAAAp2E,OAAArS,IAAAqS,EAAA,GAAAA,EAAA,IAIAk2E,EAAA,CAEA,GAAAY,IACA76C,OAAA3mC,EAAA0/C,eACA+hC,OAAAzhF,EAAA4/C,uBAGA16D,UAAAs8F,EAAAZ,EAAA,MAAAE,EAAAQ,MAAAE,EAAAZ,EAAA,KACA17F,SAAAs8F,EAAAZ,EAAA,MAAAE,EAAAS,MAAAC,EAAAZ,EAAA,KAIAC,IAEAC,EAAAD,cAIAH,EAAAp7F,GAAAw7F,EAIA,QAAAY,GAAAC,GAEA,WAAAA,EAAA,aAAAA,EAAA,WAAAA,EAAA,GArGA,GAAAj5E,GAAAvc,IAEAjH,UAAAsd,GAAAtd,SAAAwjB,EAAAlG,gBAAAkG,EAAAlG,aAEAtd,SAAAq7F,MAAA,GAAAvgF,GAAA4hF,YAuGA,IAAAC,GAAA,sBACAC,IAIA,IAAAr+F,EAAAs+F,QAAA,CAEA,GAAAA,GAAAt+F,EAAAs+F,QAAA16F,aAEA,WAAA06F,EAAAF,EAAA,oBACA,UAAAE,IAAAF,EAAA,qBAIA38F,SAAAzB,EAAAu+F,UAAA98F,SAAA8a,EAAAvc,EAAAu+F,YAEAF,EAAAE,SAAAhiF,EAAAvc,EAAAu+F,WAIA98F,SAAAzB,EAAA+f,cAEAs+E,EAAAt+E,YAAA/f,EAAA+f,aAIAte,SAAAzB,EAAA2W,SAAA3W,EAAA2W,QAAA,IAEA0nF,EAAAt+E,gBAIAte,SAAAzB,EAAAw+F,YAEAH,EAAAG,UAAAx+F,EAAAw+F,WAIA/8F,SAAAzB,EAAAy+F,aAEAJ,EAAAI,WAAAz+F,EAAAy+F,YAIAh9F,SAAAzB,EAAAkgB,UAEAm+E,EAAAn+E,QAAAlgB,EAAAkgB,SAIAze,SAAAzB,EAAA0+F,YAEAL,EAAAr+E,KAAAzD,EAAA88C,UAIA53D,SAAAzB,EAAA2+F,cAEAN,EAAAr+E,KAAAzD,EAAA0D,YAIAxe,SAAAzB,EAAA4+F,YAEAP,EAAAO,UAAA5+F,EAAA4+F,WAIAn9F,SAAAzB,EAAAsgB,eAEA,SAAAtgB,EAAAsgB,aAEA+9E,EAAA/9E,aAAA/D,EAAAk9C,WAEKz5D,EAAAsgB,eAEL+9E,EAAA/9E,aAAA/D,EAAAgE,eAQAvgB,EAAA6+F,aAEAR,EAAApmF,MAAAgmF,EAAAj+F,EAAA6+F,cAEI7+F,EAAA8+F,WAEJT,EAAApmF,MAAAjY,EAAA8+F,UAIA9+F,EAAA++F,gBAEAV,EAAAW,SAAAf,EAAAj+F,EAAA++F,gBAIA,sBAAAX,IAEAp+F,EAAAi/F,gBAEAZ,EAAAa,SAAAjB,EAAAj+F,EAAAi/F,gBAIAj/F,EAAAm/F,eAEAd,EAAAe,UAAAp/F,EAAAm/F,eAQA19F,SAAAzB,EAAAq/F,eAEAnzF,QAAAwmD,KAAA,0DACA1yD,EAAA2W,QAAA3W,EAAAq/F,cAIA59F,SAAAzB,EAAA2W,UAEA0nF,EAAA1nF,QAAA3W,EAAA2W,SAMAimF,IAEA58F,EAAAs/F,YAEAtC,EAAAqB,EAAA,MAAAr+F,EAAAs/F,WAAAt/F,EAAAu/F,iBAAAv/F,EAAAw/F,iBAAAx/F,EAAAy/F,eAAAz/F,EAAA0/F,sBAIA1/F,EAAA2/F,UAEA3C,EAAAqB,EAAA,WAAAr+F,EAAA2/F,SAAA3/F,EAAA4/F,eAAA5/F,EAAA6/F,eAAA7/F,EAAA8/F,aAAA9/F,EAAA+/F,oBAIA//F,EAAAggG,OAEAhD,EAAAqB,EAAA,QAAAr+F,EAAAggG,MAAAhgG,EAAAigG,YAAAjgG,EAAAkgG,YAAAlgG,EAAAmgG,UAAAngG,EAAAogG,iBAIApgG,EAAAqgG,SAEArD,EAAAqB,EAAA,UAAAr+F,EAAAqgG,QAAArgG,EAAAsgG,cAAAtgG,EAAAugG,cAAAvgG,EAAAwgG,YAAAxgG,EAAAygG,mBAIAzgG,EAAA0gG,WAEA1D,EAAAqB,EAAA,YAAAr+F,EAAA0gG,UAAA1gG,EAAA2gG,gBAAA3gG,EAAA4gG,gBAAA5gG,EAAA6gG,cAAA7gG,EAAA8gG,qBAIA9gG,EAAA+gG,aAEA/D,EAAAqB,EAAA,cAAAr+F,EAAA+gG,YAAA/gG,EAAAghG,kBAAAhhG,EAAAihG,kBAAAjhG,EAAAkhG,gBAAAlhG,EAAAmhG,uBAIAnhG,EAAAohG,UAEApE,EAAAqB,EAAA,WAAAr+F,EAAAohG,SAAAphG,EAAAqhG,eAAArhG,EAAAshG,eAAAthG,EAAAuhG,aAAAvhG,EAAAwhG,qBAQAxhG,EAAAyhG,eAEApD,EAAAqD,UAAA1hG,EAAAyhG,cAIAzhG,EAAA2hG,kBAEAtD,EAAAuD,YAAA,GAAArlF,GAAA+6C,QAAAt3D,EAAA2hG,gBAAA3hG,EAAA2hG,iBAIA,IAAAxjF,GAAA,GAAA5B,GAAA6hF,GAAAC,EAIA,OAFA58F,UAAAzB,EAAA6hG,UAAA1jF,EAAAtc,KAAA7B,EAAA6hG,SAEA1jF,OAQA5B,EAAA8/E,OAAAkB,UAEAuE,YAEArjF,IAAA,SAAAsjF,EAAArlF,GAEAhU,KAAAo5F,SAAA14F,KAAA24F,EAAArlF,IAIA1M,IAAA,SAAAkP,GAEA,OAAA3c,GAAA,EAAAuP,EAAApJ,KAAAo5F,SAAAt/F,OAA4CD,EAAAuP,EAAOvP,GAAA,GAEnD,GAAAw/F,GAAAr5F,KAAAo5F,SAAAv/F,GACAma,EAAAhU,KAAAo5F,SAAAv/F,EAAA,EAEA,IAAAw/F,EAAA/tF,KAAAkL,GAEA,MAAAxC,GAMA,cAYAH,EAAA2I,UAAA,SAAAN,GAEAlc,KAAAkc,QAAAnjB,SAAAmjB,IAAArI,EAAAsI,uBAIAtI,EAAA2I,UAAArgB,WAEAE,YAAAwX,EAAA2I,UAEAG,KAAA,SAAA3G,EAAAoG,EAAAC,EAAAC,GAEA,GAAAC,GAAAvc,KAEAvG,EAAAoa,EAAA4/E,MAAAnsF,IAAA0O,EAEA,IAAAjd,SAAAU,EAYA,MAVA2iB,IAEAytB,WAAA,WAEAztB,EAAA3iB,IAEK,GAILA,CAIA,IAAA6/F,GAAA,GAAAC,eAuCA,OAtCAD,GAAAE,KAAA,MAAAxjF,MAEAsjF,EAAA7/E,iBAAA,gBAAAyZ,GAEArf,EAAA4/E,MAAA19E,IAAAC,EAAAhW,KAAAy5F,UAEAr9E,KAAApc,KAAAy5F,UAEAl9E,EAAAL,QAAAw9E,QAAA1jF,QAIAjd,SAAAsjB,GAEAi9E,EAAA7/E,iBAAA,oBAAAyZ,GAEA7W,EAAA6W,QAMAomE,EAAA7/E,iBAAA,iBAAAyZ,GAEA5W,KAAA4W,GAEA3W,EAAAL,QAAAy9E,UAAA3jF,QAIAjd,SAAAiH,KAAAqW,cAAAijF,EAAAjjF,YAAArW,KAAAqW,aACAtd,SAAAiH,KAAA45F,eAAAN,EAAAM,aAAA55F,KAAA45F,cACA7gG,SAAAiH,KAAA65F,kBAAAP,EAAAO,gBAAA75F,KAAA65F,iBAEAP,EAAAQ,KAAA,MAEAv9E,EAAAL,QAAA69E,UAAA/jF,GAEAsjF,GAIA58E,gBAAA,SAAA1iB,GAEAgG,KAAA45F,aAAA5/F,GAIAyiB,eAAA,SAAAziB,GAEAgG,KAAAqW,YAAArc,GAIAggG,mBAAA,SAAAhgG,GAEAgG,KAAA65F,gBAAA7/F,IAYA6Z,EAAA4hF,YAAA,SAAAv5E,GAEAlc,KAAAkc,QAAAnjB,SAAAmjB,IAAArI,EAAAsI,uBAIAtI,EAAA4hF,YAAAt5F,WAEAE,YAAAwX,EAAA4hF,YAEA94E,KAAA,SAAA3G,EAAAoG,EAAAC,EAAAC,GAEA,GAAAC,GAAAvc,KAEAvG,EAAAoa,EAAA4/E,MAAAnsF,IAAA0O,EAEA,IAAAjd,SAAAU,EAYA,MAVA2iB,IAEAytB,WAAA,WAEAztB,EAAA3iB,IAEK,GAILA,CAIA,IAAAs7F,GAAAz8F,SAAAD,cAAA,MAoCA,OAlCA08F,GAAAt7E,iBAAA,gBAAAyZ,GAEArf,EAAA4/E,MAAA19E,IAAAC,EAAAhW,MAEAoc,KAAApc,MAEAuc,EAAAL,QAAAw9E,QAAA1jF,QAIAjd,SAAAsjB,GAEA04E,EAAAt7E,iBAAA,oBAAAyZ,GAEA7W,EAAA6W,QAMA6hE,EAAAt7E,iBAAA,iBAAAyZ,GAEA5W,KAAA4W,GAEA3W,EAAAL,QAAAy9E,UAAA3jF,QAIAjd,SAAAiH,KAAAqW,cAAA0+E,EAAA1+E,YAAArW,KAAAqW,aAEAkG,EAAAL,QAAA69E,UAAA/jF,GAEA++E,EAAAjiF,IAAAkD,EAEA++E,GAIAt4E,eAAA,SAAAziB,GAEAgG,KAAAqW,YAAArc,IAaA6Z,EAAAomF,WAAA,SAAA/9E,GAEA,iBAAAA,KAEA1Y,QAAAwmD,KAAA,6EACA9tC,EAAAnjB,QAIAiH,KAAAkc,QAAAnjB,SAAAmjB,IAAArI,EAAAsI,sBAEAnc,KAAA65F,oBAIAhmF,EAAAomF,WAAA99F,WAEAE,YAAAwX,EAAAomF,WAIAC,uBASA,MAPAnhG,UAAAiH,KAAAm6F,oBAEAn6F,KAAAm6F,kBAAA7hG,SAAAD,cAAA,QAIAmL,QAAAwmD,KAAA,yDACAhqD,KAAAm6F,mBAIAx9E,KAAA,SAAA3G,EAAAoG,EAAAC,EAAAC,GAEA,GAAAC,GAAAvc,KAEAk0F,EAAAl0F,KAAAk0F,aAAA,gBAAAl0F,MAAAk0F,YAAAl0F,KAAAk0F,YAAArgF,EAAA8/E,OAAAx3F,UAAA43F,eAAA/9E,GAEAhC,EAAA,GAAAH,GAAA2I,UAAAxc,KAAAkc,QACAlI,GAAAyI,eAAAzc,KAAAqW,aACArC,EAAAgmF,mBAAAh6F,KAAA65F,iBACA7lF,EAAA2I,KAAA3G,EAAA,SAAA4G,GAEA,GAAAw9E,GAAAl/E,KAAA2B,MAAAD,GACAgoE,EAAAwV,EAAAxV,QAEA,IAAA7rF,SAAA6rF,EAAA,CAEA,cAAAA,EAAAjgF,KAGA,WADAnB,SAAAC,MAAA,qBAAAuS,EAAA,qDAKA,cAAA4uE,EAAAjgF,KAGA,WADAnB,SAAAC,MAAA,qBAAAuS,EAAA,qDAOA,GAAAmM,GAAA5F,EAAAM,MAAAu9E,EAAAlG,EACA93E,GAAA+F,EAAA5L,SAAA4L,EAAA4iE,cAMAtoE,eAAA,SAAAziB,GAEAgG,KAAAqW,YAAArc,GAIAqgG,eAAA,SAAArgG,GAEAgG,KAAAk0F,YAAAl6F,GAIA6iB,MAAA,SAAAu9E,EAAAlG,GAaA,QAAAoG,GAAA9xC,GAEA,QAAA+xC,GAAAvgG,EAAA6b,GAEA,MAAA7b,GAAA,GAAA6b,EAIA,GAAAhc,GAAAk0E,EAAAloC,EAEAtnB,EAAAi8E,EAEAC,EAAAC,EAAAC,EAAAvV,EAEAzgF,EACAi2F,EACAhO,EACAE,EACAC,EAAAC,EACAC,EAAAC,EAEAlE,EAAArqE,EAAAk8E,EAAAC,EAAAxkC,EAAAh3C,EAEAy7E,EAAA3R,EAAAjgF,EAAAH,EAEAmV,EAAAi8E,EAAAj8E,MACAM,EAAA27E,EAAA37E,SACAC,EAAA07E,EAAA17E,QACAX,EAAAq8E,EAAAr8E,OAEAi9E,EAAA,CAEA,IAAAjiG,SAAAqhG,EAAAjR,IAAA,CAIA,IAAAtvF,EAAA,EAAgBA,EAAAugG,EAAAjR,IAAArvF,OAAqBD,IAErCugG,EAAAjR,IAAAtvF,GAAAC,QAAAkhG,GAIA,KAAAnhG,EAAA,EAAgBA,EAAAmhG,EAAenhG,IAE/B0c,EAAA2xE,cAAAruF,MASA,IAHA0kB,EAAA,EACAi8E,EAAA/7E,EAAA3kB,OAEAykB,EAAAi8E,GAEAxR,EAAA,GAAAn1E,GAAA8L,QAEAqpE,EAAA//E,EAAAwV,EAAAF,KAAAiqC,EACAwgC,EAAAngF,EAAA4V,EAAAF,KAAAiqC,EACAwgC,EAAAz+E,EAAAkU,EAAAF,KAAAiqC,EAEAjyC,EAAAkI,SAAA/d,KAAAsoF,EAOA,KAHAzqE,EAAA,EACAi8E,EAAAr8E,EAAArkB,OAEAykB,EAAAi8E,GAeA,GAbA71F,EAAAwZ,EAAAI,KAGAq8E,EAAAL,EAAA51F,EAAA,GACAioF,EAAA2N,EAAA51F,EAAA,GACAmoF,EAAAyN,EAAA51F,EAAA,GACAooF,EAAAwN,EAAA51F,EAAA,GACAqoF,EAAAuN,EAAA51F,EAAA,GACAsoF,EAAAsN,EAAA51F,EAAA,GACAuoF,EAAAqN,EAAA51F,EAAA,GAIAi2F,EAAA,CA0BA,GAxBAC,EAAA,GAAAhnF,GAAA+L,MACAi7E,EAAAnyF,EAAAyV,EAAAI,GACAs8E,EAAA9xF,EAAAoV,EAAAI,EAAA,GACAs8E,EAAAtjG,EAAA4mB,EAAAI,EAAA,GAEAu8E,EAAA,GAAAjnF,GAAA+L,MACAk7E,EAAApyF,EAAAyV,EAAAI,EAAA,GACAu8E,EAAA/xF,EAAAoV,EAAAI,EAAA,GACAu8E,EAAAvjG,EAAA4mB,EAAAI,EAAA,GAEAA,GAAA,EAEAquE,IAEAxH,EAAAjnE,EAAAI,KACAs8E,EAAAzV,gBACA0V,EAAA1V,iBAMAv/C,EAAAtvB,EAAA4H,MAAArkB,OAEAgzF,EAEA,IAAAjzF,EAAA,EAAkBA,EAAAmhG,EAAenhG,IAOjC,IALAkhG,EAAAX,EAAAjR,IAAAtvF,GAEA0c,EAAA2xE,cAAAruF,GAAAgsC,MACAtvB,EAAA2xE,cAAAruF,GAAAgsC,EAAA,MAEAkoC,EAAA,EAAmBA,EAAA,EAAOA,IAE1B4sB,EAAAx8E,EAAAI,KAEApV,EAAA4xF,EAAA,EAAAJ,GACA3xF,EAAA+xF,EAAA,EAAAJ,EAAA,GAEAvR,EAAA,GAAAv1E,GAAA+6C,QAAAzlD,EAAAH,GAEA,IAAA+kE,GAAAx3D,EAAA2xE,cAAAruF,GAAAgsC,GAAAnlC,KAAA0oF,GACA,IAAArb,GAAAx3D,EAAA2xE,cAAAruF,GAAAgsC,EAAA,GAAAnlC,KAAA0oF,EAsBA,IAdA2D,IAEA2N,EAAA,EAAAv8E,EAAAI,KAEAs8E,EAAAv7E,OAAApT,IACAwS,EAAAg8E,KACAh8E,EAAAg8E,KACAh8E,EAAAg8E,IAGAI,EAAAx7E,OAAA7G,KAAAoiF,EAAAv7E,SAIA0tE,EAEA,IAAAnzF,EAAA,EAAkBA,EAAA,EAAOA,IAEzB6gG,EAAA,EAAAv8E,EAAAI,KAEAe,EAAA,GAAAzL,GAAA8L,QACAjB,EAAAg8E,KACAh8E,EAAAg8E,KACAh8E,EAAAg8E,IAIA,IAAA7gG,GAAAghG,EAAAxV,cAAA3kF,KAAA4e,GACA,IAAAzlB,GAAAihG,EAAAzV,cAAA3kF,KAAA4e,EAkBA,IAXA2tE,IAEAwN,EAAAt8E,EAAAI,KACA+3C,EAAAv4C,EAAA08E,GAEAI,EAAAtrF,MAAA6mD,OAAAE,GACAwkC,EAAAvrF,MAAA6mD,OAAAE,IAKA42B,EAEA,IAAArzF,EAAA,EAAkBA,EAAA,EAAOA,IAEzB4gG,EAAAt8E,EAAAI,KACA+3C,EAAAv4C,EAAA08E,GAEA,IAAA5gG,GAAAghG,EAAAjjF,aAAAlX,KAAA,GAAAmT,GAAAqiD,MAAAI,IACA,IAAAz8D,GAAAihG,EAAAljF,aAAAlX,KAAA,GAAAmT,GAAAqiD,MAAAI,GAMA//C,GAAA4H,MAAAzd,KAAAm6F,GACAtkF,EAAA4H,MAAAzd,KAAAo6F,OAEK,CAkBL,GAhBAn8E,EAAA,GAAA9K,GAAA+L,MACAjB,EAAAjW,EAAAyV,EAAAI,KACAI,EAAA5V,EAAAoV,EAAAI,KACAI,EAAApnB,EAAA4mB,EAAAI,KAEAquE,IAEAxH,EAAAjnE,EAAAI,KACAI,EAAAymE,iBAMAv/C,EAAAtvB,EAAA4H,MAAArkB,OAEAgzF,EAEA,IAAAjzF,EAAA,EAAkBA,EAAAmhG,EAAenhG,IAMjC,IAJAkhG,EAAAX,EAAAjR,IAAAtvF,GAEA0c,EAAA2xE,cAAAruF,GAAAgsC,MAEAkoC,EAAA,EAAmBA,EAAA,EAAOA,IAE1B4sB,EAAAx8E,EAAAI,KAEApV,EAAA4xF,EAAA,EAAAJ,GACA3xF,EAAA+xF,EAAA,EAAAJ,EAAA,GAEAvR,EAAA,GAAAv1E,GAAA+6C,QAAAzlD,EAAAH,GAEAuN,EAAA2xE,cAAAruF,GAAAgsC,GAAAnlC,KAAA0oF,EAoBA,IAZA2D,IAEA2N,EAAA,EAAAv8E,EAAAI,KAEAI,EAAAW,OAAApT,IACAwS,EAAAg8E,KACAh8E,EAAAg8E,KACAh8E,EAAAg8E,KAKA1N,EAEA,IAAAnzF,EAAA,EAAkBA,EAAA,EAAOA,IAEzB6gG,EAAA,EAAAv8E,EAAAI,KAEAe,EAAA,GAAAzL,GAAA8L,QACAjB,EAAAg8E,KACAh8E,EAAAg8E,KACAh8E,EAAAg8E,IAGA/7E,EAAA0mE,cAAA3kF,KAAA4e,EAeA,IARA2tE,IAEAwN,EAAAt8E,EAAAI,KACAI,EAAApP,MAAA6mD,OAAAr4C,EAAA08E,KAKAvN,EAEA,IAAArzF,EAAA,EAAkBA,EAAA,EAAOA,IAEzB4gG,EAAAt8E,EAAAI,KACAI,EAAA/G,aAAAlX,KAAA,GAAAmT,GAAAqiD,MAAAn4C,EAAA08E,IAMAlkF,GAAA4H,MAAAzd,KAAAie,IAQA,QAAAs8E,KAEA,GAAAC,GAAAniG,SAAAqhG,EAAAc,oBAAAd,EAAAc,oBAAA,CAEA,IAAAd,EAAA9R,YAEA,OAAAzuF,GAAA,EAAAuP,EAAAgxF,EAAA9R,YAAAxuF,OAAiDD,EAAAuP,EAAOvP,GAAAqhG,EAAA,CAExD,GAAAjyF,GAAAmxF,EAAA9R,YAAAzuF,GACAgP,EAAAqyF,EAAA,EAAAd,EAAA9R,YAAAzuF,EAAA,KACA0Q,EAAA2wF,EAAA,EAAAd,EAAA9R,YAAAzuF,EAAA,KACA8Q,EAAAuwF,EAAA,EAAAd,EAAA9R,YAAAzuF,EAAA,IAEA0c,GAAA+xE,YAAA5nF,KAAA,GAAAmT,GAAAu1D,QAAAngE,EAAAJ,EAAA0B,EAAAI,IAMA,GAAAyvF,EAAA7R,YAEA,OAAA1uF,GAAA,EAAAuP,EAAAgxF,EAAA7R,YAAAzuF,OAAiDD,EAAAuP,EAAOvP,GAAAqhG,EAAA,CAExD,GAAAxyF,GAAA0xF,EAAA7R,YAAA1uF,GACAkP,EAAAmyF,EAAA,EAAAd,EAAA7R,YAAA1uF,EAAA,KACAtC,EAAA2jG,EAAA,EAAAd,EAAA7R,YAAA1uF,EAAA,KACA4O,EAAAyyF,EAAA,EAAAd,EAAA7R,YAAA1uF,EAAA,IAEA0c,GAAAgyE,YAAA7nF,KAAA,GAAAmT,GAAAu1D,QAAA1gE,EAAAK,EAAAxR,EAAAkR,IAMA8N,EAAA4kF,MAAAf,EAAAe,MAEA5kF,EAAA4kF,OAAA5kF,EAAA4kF,MAAArhG,OAAA,IAAAyc,EAAA+xE,YAAAxuF,SAAAyc,EAAAgyE,YAAAzuF,QAAAyc,EAAAgyE,YAAAzuF,SAAAyc,EAAAkI,SAAA3kB,SAEA0J,QAAAwmD,KAAA,sCAAAzzC,EAAAkI,SAAA3kB,OAAA,mBACAyc,EAAAgyE,YAAAzuF,OAAA,uBAAAyc,EAAA+xE,YAAAxuF,OAAA,mBAOAyc,EAAAg+B,UAAA6lD,EAAA7lD,UACAh+B,EAAA6kF,WAAAhB,EAAAgB,WAIA,QAAAC,GAAA7yC,GAEA,GAAAzvD,SAAAqhG,EAAAjS,aAAA,CAEA,GAAAtuF,GAAAuP,EAAAJ,EAAAkhF,EAAAoR,EAAAC,CAEA,KAAA1hG,EAAA,EAAAuP,EAAAgxF,EAAAjS,aAAAruF,OAA8CD,EAAAuP,EAAOvP,IASrD,IAPA0c,EAAA4xE,aAAAtuF,MACA0c,EAAA4xE,aAAAtuF,GAAAV,KAAAihG,EAAAjS,aAAAtuF,GAAAV,KACAod,EAAA4xE,aAAAtuF,GAAA4kB,YAEA68E,EAAA/kF,EAAA4xE,aAAAtuF,GAAA4kB,SACA88E,EAAAnB,EAAAjS,aAAAtuF,GAAA4kB,SAEAzV,EAAA,EAAAkhF,EAAAqR,EAAAzhG,OAA0CkP,EAAAkhF,EAAQlhF,GAAA,GAElD,GAAAggF,GAAA,GAAAn1E,GAAA8L,OACAqpE,GAAA//E,EAAAsyF,EAAAvyF,GAAAw/C,EACAwgC,EAAAngF,EAAA0yF,EAAAvyF,EAAA,GAAAw/C,EACAwgC,EAAAz+E,EAAAgxF,EAAAvyF,EAAA,GAAAw/C,EAEA8yC,EAAA56F,KAAAsoF,IAQA,GAAAjwF,SAAAqhG,EAAAhS,YAAA,CAEA,GAAAvuF,GAAAuP,EAAA7R,EAAAikG,EAAAC,EAAAC,EAAAnsF,CAEA,KAAA1V,EAAA,EAAAuP,EAAAgxF,EAAAhS,YAAAtuF,OAA6CD,EAAAuP,EAAOvP,IASpD,IAPA0c,EAAA6xE,YAAAvuF,MACA0c,EAAA6xE,YAAAvuF,GAAAV,KAAAihG,EAAAhS,YAAAvuF,GAAAV,KACAod,EAAA6xE,YAAAvuF,GAAAkkB,UAEA09E,EAAAllF,EAAA6xE,YAAAvuF,GAAAkkB,OACA29E,EAAAtB,EAAAhS,YAAAvuF,GAAAkkB,OAEAxmB,EAAA,EAAAikG,EAAAE,EAAA5hG,OAAwCvC,EAAAikG,EAAQjkG,GAAA,EAEhDgY,EAAA,GAAAsE,GAAAqiD,MAAA,UACA3mD,EAAA4mD,OAAAulC,EAAAnkG,GAAAmkG,EAAAnkG,EAAA,GAAAmkG,EAAAnkG,EAAA,IACAkkG,EAAA/6F,KAAA6O,IAzZA,GAAAgH,GAAA,GAAA1C,GAAA6L,SACA8oC,EAAAzvD,SAAAqhG,EAAA5xC,MAAA,EAAA4xC,EAAA5xC,MAAA,CAkaA,IAhaA8xC,EAAA9xC,GAEAyyC,IACAI,EAAA7yC,GAEAjyC,EAAAW,qBACAX,EAAA0B,wBA0ZAlf,SAAAqhG,EAAArV,WAAA,IAAAqV,EAAArV,UAAAjrF,OAEA,OAAWyc,WAIX,IAAAwuE,GAAAlxE,EAAA8/E,OAAAx3F,UAAA83F,cAAAmG,EAAArV,UAAAmP,EAAAl0F,KAAAqW,YAEA,QAAWE,WAAAwuE,eAcXlxE,EAAA8nF,eAAA,SAAAv/E,EAAAC,EAAAC,GAEA,GAAAC,GAAAvc,KAEA47F,KAAAC,EAAA,EAAAC,EAAA,CAEA97F,MAAA+7F,QAAAhjG,OACAiH,KAAAoc,SACApc,KAAAqc,aACArc,KAAAsc,UAEAtc,KAAA+5F,UAAA,SAAA/jF,GAEA8lF,IAEAF,QAEA7iG,SAAAwjB,EAAAw/E,SAEAx/E,EAAAw/E,QAAA/lF,EAAA6lF,EAAAC,GAMAF,MAIA57F,KAAA05F,QAAA,SAAA1jF,GAEA6lF,IAEA9iG,SAAAwjB,EAAAF,YAEAE,EAAAF,WAAArG,EAAA6lF,EAAAC,GAIAD,IAAAC,IAEAF,KAEA7iG,SAAAwjB,EAAAH,QAEAG,EAAAH,WAQApc,KAAA25F,UAAA,SAAA3jF,GAEAjd,SAAAwjB,EAAAD,SAEAC,EAAAD,QAAAtG,KAQAnC,EAAAsI,sBAAA,GAAAtI,GAAA8nF,eAQA9nF,EAAAmoF,qBAAA,SAAA9/E,GAEAlc,KAAAkc,QAAAnjB,SAAAmjB,IAAArI,EAAAsI,uBAIAtI,EAAAmoF,qBAAA7/F,WAEAE,YAAAwX,EAAAmoF,qBAEAr/E,KAAA,SAAA3G,EAAAoG,EAAAC,EAAAC,GAEA,GAAAC,GAAAvc,KAEAgU,EAAA,GAAAH,GAAA2I,UAAAD,EAAAL,QACAlI,GAAAyI,eAAAzc,KAAAqW,aACArC,EAAA2I,KAAA3G,EAAA,SAAA4G,GAEAR,EAAAG,EAAAM,MAAA3B,KAAA2B,MAAAD,MAEGP,EAAAC,IAIHG,eAAA,SAAAziB,GAEAgG,KAAAqW,YAAArc,GAIA6iB,MAAA,SAAAu9E,GAEA,GAAA7jF,GAAA,GAAA1C,GAAA2K,eAEA5M,EAAAwoF,EAAAr9E,KAAAnL,KAEA,IAAA7Y,SAAA6Y,EAAA,CAEA,GAAAqqF,GAAA,GAAA7hF,GAAAxI,EAAAjN,MAAAiN,EAAA+J,MACApF,GAAA+3E,SAAA,GAAAz6E,GAAAwL,gBAAA48E,EAAA,IAIA,GAAAnvB,GAAAstB,EAAAr9E,KAAA+vD,UAEA,QAAA3xE,KAAA2xE,GAAA,CAEA,GAAAzG,GAAAyG,EAAA3xE,GACA8gG,EAAA,GAAA7hF,GAAAisD,EAAA1hE,MAAA0hE,EAAA1qD,MAEApF,GAAA6I,aAAAjkB,EAAA,GAAA0Y,GAAAwL,gBAAA48E,EAAA51B,EAAAC,WAIA,GAAAqjB,GAAAyQ,EAAAr9E,KAAA4sE,QAAAyQ,EAAAr9E,KAAAyxE,WAAA4L,EAAAr9E,KAAA0xE,OAEA,IAAA11F,SAAA4wF,EAEA,OAAA9vF,GAAA,EAAAyI,EAAAqnF,EAAA7vF,OAAsCD,IAAAyI,IAASzI,EAAA,CAE/C,GAAA+vF,GAAAD,EAAA9vF,EAEA0c,GAAAq4E,SAAAhF,EAAAhrE,MAAAgrE,EAAArkC,OAMA,GAAA60B,GAAAggB,EAAAr9E,KAAAq9D,cAEA,IAAArhF,SAAAqhF,EAAA,CAEA,GAAA5rB,GAAA,GAAA36C,GAAA8L,OAEA5mB,UAAAqhF,EAAA5rB,QAEAA,EAAA8J,UAAA8hB,EAAA5rB,QAIAj4C,EAAA6jE,eAAA,GAAAvmE,GAAAo5D,OAAAze,EAAA4rB,EAAApvB,QAIA,MAAAz0C,KAYA1C,EAAAqoF,eAAA,SAAAhgF,GAEAlc,KAAAkc,QAAAnjB,SAAAmjB,IAAArI,EAAAsI,sBACAnc,KAAAglF,aAIAnxE,EAAAqoF,eAAA//F,WAEAE,YAAAwX,EAAAqoF,eAEAv/E,KAAA,SAAA3G,EAAAoG,EAAAC,EAAAC,GAEA,GAAAC,GAAAvc,KAEAgU,EAAA,GAAAH,GAAA2I,UAAAD,EAAAL,QACAlI,GAAAyI,eAAAzc,KAAAqW,aACArC,EAAA2I,KAAA3G,EAAA,SAAA4G,GAEAR,EAAAG,EAAAM,MAAA3B,KAAA2B,MAAAD,MAEGP,EAAAC,IAIHG,eAAA,SAAAziB,GAEAgG,KAAAqW,YAAArc,GAIAmiG,YAAA,SAAAniG,GAEAgG,KAAAglF,SAAAhrF,GAIAoiG,WAAA,SAAAjjG,GAEA,GAAA6rF,GAAAhlF,KAAAglF,QAQA,OANAjsF,UAAAisF,EAAA7rF,IAEAqK,QAAAwmD,KAAA,0CAAA7wD,GAIA6rF,EAAA7rF,IAIA0jB,MAAA,SAAAu9E,GAEA,GAAA3kF,GAAA,GAAA5B,GAAAumF,EAAAz1F,KAmEA,IAlEA8Q,EAAAkmE,KAAAye,EAAAze,KAEA5iF,SAAAqhG,EAAAjhG,OAAAsc,EAAAtc,KAAAihG,EAAAjhG,MACAJ,SAAAqhG,EAAA7qF,OAAAkG,EAAAlG,MAAA6mD,OAAAgkC,EAAA7qF,OACAxW,SAAAqhG,EAAA9D,UAAA7gF,EAAA6gF,SAAAlgC,OAAAgkC,EAAA9D,UACAv9F,SAAAqhG,EAAA5D,UAAA/gF,EAAA+gF,SAAApgC,OAAAgkC,EAAA5D,UACAz9F,SAAAqhG,EAAA1D,YAAAjhF,EAAAihF,UAAA0D,EAAA1D,WACA39F,SAAAqhG,EAAAiC,WAAA5mF,EAAA4mF,SAAAjC,EAAAiC,UACAtjG,SAAAqhG,EAAAkC,eAAA7mF,EAAA6mF,aAAAlC,EAAAkC,cACAvjG,SAAAqhG,EAAAmC,iBAAA9mF,EAAA8mF,eAAAnC,EAAAmC,gBACAxjG,SAAAqhG,EAAAxiF,eAAAnC,EAAAmC,aAAAwiF,EAAAxiF,cACA7e,SAAAqhG,EAAAxE,UAAAngF,EAAAmgF,QAAAwE,EAAAxE,SACA78F,SAAAqhG,EAAAvE,WAAApgF,EAAAogF,SAAAuE,EAAAvE,UACA98F,SAAAqhG,EAAA9iF,OAAA7B,EAAA6B,KAAA8iF,EAAA9iF,MACAve,SAAAqhG,EAAAnsF,UAAAwH,EAAAxH,QAAAmsF,EAAAnsF,SACAlV,SAAAqhG,EAAA/iF,cAAA5B,EAAA4B,YAAA+iF,EAAA/iF,aACAte,SAAAqhG,EAAAoC,YAAA/mF,EAAA+mF,UAAApC,EAAAoC,WACAzjG,SAAAqhG,EAAAtE,YAAArgF,EAAAqgF,UAAAsE,EAAAtE,WACA/8F,SAAAqhG,EAAArE,aAAAtgF,EAAAsgF,WAAAqE,EAAArE,YACAh9F,SAAAqhG,EAAAlE,YAAAzgF,EAAAygF,UAAAkE,EAAAlE,WACAn9F,SAAAqhG,EAAAqC,qBAAAhnF,EAAAgnF,mBAAArC,EAAAqC,oBAGA1jG,SAAAqhG,EAAApxD,OAAAvzB,EAAAuzB,KAAAoxD,EAAApxD,MACAjwC,SAAAqhG,EAAAsC,kBAAAjnF,EAAAinF,gBAAAtC,EAAAsC,iBAIA3jG,SAAAqhG,EAAA/3F,MAAAoT,EAAApT,IAAArC,KAAAo8F,WAAAhC,EAAA/3F,MAEAtJ,SAAAqhG,EAAAuC,WAEAlnF,EAAAknF,SAAA38F,KAAAo8F,WAAAhC,EAAAuC,UACAlnF,EAAA4B,gBAIAte,SAAAqhG,EAAAwC,UAAAnnF,EAAAmnF,QAAA58F,KAAAo8F,WAAAhC,EAAAwC,UACA7jG,SAAAqhG,EAAApB,YAAAvjF,EAAAujF,UAAAoB,EAAApB,WAEAjgG,SAAAqhG,EAAAyC,YAAApnF,EAAAonF,UAAA78F,KAAAo8F,WAAAhC,EAAAyC,YACAzC,EAAAlB,cAAAzjF,EAAAyjF,YAAA,GAAArlF,GAAA+6C,QAAAwrC,EAAAlB,YAAAkB,EAAAlB,cAEAngG,SAAAqhG,EAAA0C,kBAAArnF,EAAAqnF,gBAAA98F,KAAAo8F,WAAAhC,EAAA0C,kBACA/jG,SAAAqhG,EAAA2C,oBAAAtnF,EAAAsnF,kBAAA3C,EAAA2C,mBACAhkG,SAAAqhG,EAAA4C,mBAAAvnF,EAAAunF,iBAAA5C,EAAA4C,kBAEAjkG,SAAAqhG,EAAA6C,cAAAxnF,EAAAwnF,YAAAj9F,KAAAo8F,WAAAhC,EAAA6C,cAEAlkG,SAAAqhG,EAAA8C,SAEAznF,EAAAynF,OAAAl9F,KAAAo8F,WAAAhC,EAAA8C,QACAznF,EAAA0nF,QAAAtpF,EAAAi/C,mBAIAsnC,EAAAgD,eAAA3nF,EAAA2nF,aAAAhD,EAAAgD,cAEArkG,SAAAqhG,EAAAiD,WAAA5nF,EAAA4nF,SAAAr9F,KAAAo8F,WAAAhC,EAAAiD,WACAtkG,SAAAqhG,EAAAkD,oBAAA7nF,EAAA6nF,kBAAAlD,EAAAkD,mBAEAvkG,SAAAqhG,EAAAmD,QAAA9nF,EAAA8nF,MAAAv9F,KAAAo8F,WAAAhC,EAAAmD,QACAxkG,SAAAqhG,EAAAoD,iBAAA/nF,EAAA+nF,eAAApD,EAAAoD,gBAIAzkG,SAAAqhG,EAAArV,UAEA,OAAAlrF,GAAA,EAAAuP,EAAAgxF,EAAArV,UAAAjrF,OAA8CD,EAAAuP,EAAOvP,IAErD4b,EAAAsvE,UAAArkF,KAAAV,KAAA6c,MAAAu9E,EAAArV,UAAAlrF,IAMA,OAAA4b,KAYA5B,EAAA4pF,aAAA,SAAAvhF,GAEAlc,KAAAkc,QAAAnjB,SAAAmjB,IAAArI,EAAAsI,sBACAnc,KAAAk0F,YAAA,IAIArgF,EAAA4pF,aAAAthG,WAEAE,YAAAwX,EAAA4pF,aAEA9gF,KAAA,SAAA3G,EAAAoG,EAAAC,EAAAC,GAEA,KAAAtc,KAAAk0F,cAEAl0F,KAAAk0F,YAAAl+E,EAAAhM,UAAA,EAAAgM,EAAA0nF,YAAA,QAIA,IAAAnhF,GAAAvc,KAEAgU,EAAA,GAAAH,GAAA2I,UAAAD,EAAAL,QACAlI,GAAAyI,eAAAzc,KAAAqW,aACArC,EAAA2I,KAAA3G,EAAA,SAAA4G,GAEAL,EAAAM,MAAA3B,KAAA2B,MAAAD,GAAAR,IAEGC,EAAAC,IAIH+9E,eAAA,SAAArgG,GAEAgG,KAAAk0F,YAAAl6F,GAIAyiB,eAAA,SAAAziB,GAEAgG,KAAAqW,YAAArc,GAIA6iB,MAAA,SAAAu9E,EAAAh+E,GAEA,GAAA0oE,GAAA9kF,KAAA29F,gBAAAvD,EAAAtV,YAEAG,EAAAjlF,KAAA49F,YAAAxD,EAAAnV,OAAA,WAEAlsF,SAAAqjB,KAAA+F,KAIA6iE,EAAAhlF,KAAA69F,cAAAzD,EAAApV,SAAAC,GACAF,EAAA/kF,KAAA89F,eAAA1D,EAAArV,UAAAC,GACA7iE,EAAAniB,KAAA+9F,YAAA3D,EAAAj4E,OAAA2iE,EAAAC,EAQA,OANAhsF,UAAAqhG,EAAAnV,QAAA,IAAAmV,EAAAnV,OAAAnrF,QAEAf,SAAAqjB,KAAA+F,GAIAA,GAIAw7E,gBAAA,SAAAvD,GAEA,GAAAtV,KAEA,IAAA/rF,SAAAqhG,EAKA,OAHA4D,GAAA,GAAAnqF,GAAAomF,WACAgE,EAAA,GAAApqF,GAAAmoF,qBAEAniG,EAAA,EAAAuP,EAAAgxF,EAAAtgG,OAAoCD,EAAAuP,EAAOvP,IAAA,CAE3C,GAAA0c,GACAwG,EAAAq9E,EAAAvgG,EAEA,QAAAkjB,EAAApY,MAEA,oBACA,0BAEA4R,EAAA,GAAA1C,GAAAkJ,EAAApY,MACAoY,EAAAtN,MACAsN,EAAArN,OACAqN,EAAAmhF,cACAnhF,EAAAohF,eAGA,MAEA,mBACA,mBAEA5nF,EAAA,GAAA1C,GAAAuqF,YACArhF,EAAAtN,MACAsN,EAAArN,OACAqN,EAAAvf,MACAuf,EAAAmhF,cACAnhF,EAAAohF,eACAphF,EAAAshF,cAGA,MAEA,4BAEA9nF,EAAA,GAAA1C,GAAAyqF,qBACAvhF,EAAAiuC,OACAjuC,EAAAwhF,SACAxhF,EAAAyhF,WACAzhF,EAAA0hF,YAGA,MAEA,sBAEAloF,EAAA,GAAA1C,GAAA6qF,eACA3hF,EAAAiuC,OACAjuC,EAAAwhF,SACAxhF,EAAAyhF,WACAzhF,EAAA0hF,YAGA,MAEA,wBAEAloF,EAAA,GAAA1C,GAAA8qF,iBACA5hF,EAAA6hF,UACA7hF,EAAA8hF,aACA9hF,EAAArN,OACAqN,EAAA+hF,eACA/hF,EAAAohF,eACAphF,EAAAgiF,UACAhiF,EAAAyhF,WACAzhF,EAAA0hF,YAGA,MAEA,sBAEAloF,EAAA,GAAA1C,GAAAmrF,eACAjiF,EAAAiuC,OACAjuC,EAAAmhF,cACAnhF,EAAAohF,eACAphF,EAAAkiF,SACAliF,EAAAmiF,UACAniF,EAAAyhF,WACAzhF,EAAA0hF,YAGA,MAEA,4BAEAloF,EAAA,GAAA1C,GAAAsrF,qBACApiF,EAAAiuC,OACAjuC,EAAAmhF,cACAnhF,EAAAohF,eACAphF,EAAAkiF,SACAliF,EAAAmiF,UACAniF,EAAAyhF,WACAzhF,EAAA0hF,YAGA,MAEA,4BAEAloF,EAAA,GAAA1C,GAAAurF,qBACAriF,EAAAiuC,OACAjuC,EAAAgV,OAGA,MAEA,2BAEAxb,EAAA,GAAA1C,GAAAwrF,oBACAtiF,EAAAiuC,OACAjuC,EAAAgV;AAGA,KAEA,0BAEAxb,EAAA,GAAA1C,GAAAyrF,mBACAviF,EAAAiuC,OACAjuC,EAAAgV,OAGA,MAEA,2BAEAxb,EAAA,GAAA1C,GAAA0rF,oBACAxiF,EAAAiuC,OACAjuC,EAAAgV,OAGA,MAEA,oBAEAxb,EAAA,GAAA1C,GAAA2rF,aACAziF,EAAA0iF,YACA1iF,EAAA2iF,YACA3iF,EAAA4iF,cACA5iF,EAAA6iF,YACA7iF,EAAAyhF,WACAzhF,EAAA0hF,YAGA,MAEA,qBAEAloF,EAAA,GAAA1C,GAAAgsF,cACA9iF,EAAAiuC,OACAjuC,EAAA+iF,KACA/iF,EAAA+hF,eACA/hF,EAAAgjF,gBACAhjF,EAAAijF,IAGA,MAEA,yBAEAzpF,EAAA,GAAA1C,GAAAosF,kBACAljF,EAAAiuC,OACAjuC,EAAA+iF,KACA/iF,EAAA+hF,eACA/hF,EAAAgjF,gBACAhjF,EAAAvlB,EACAulB,EAAApU,EACAoU,EAAAmjF,YAGA,MAEA,oBAEA3pF,EAAA,GAAA1C,GAAAssF,aACApjF,EAAAH,KACAG,OAGA,MAEA,sBAEAxG,EAAA0nF,EAAAphF,MAAAE,EAEA,MAEA,gBAEAxG,EAAAynF,EAAAnhF,MAAAE,OAAA/c,KAAAk0F,aAAA39E,QAEA,MAEA,SAEA/S,QAAAwmD,KAAA,kDAAAjtC,EAAApY,KAAA,IAEA,UAIA4R,EAAAolE,KAAA5+D,EAAA4+D,KAEA5iF,SAAAgkB,EAAA5jB,OAAAod,EAAApd,KAAA4jB,EAAA5jB,MAEA2rF,EAAA/nE,EAAA4+D,MAAAplE,EAMA,MAAAuuE,IAIAgZ,eAAA,SAAA1D,EAAApV,GAEA,GAAAD,KAEA,IAAAhsF,SAAAqhG,EAAA,CAEA,GAAApmF,GAAA,GAAAH,GAAAqoF,cACAloF,GAAAmoF,YAAAnX,EAEA,QAAAnrF,GAAA,EAAAuP,EAAAgxF,EAAAtgG,OAAoCD,EAAAuP,EAAOvP,IAAA,CAE3C,GAAA4b,GAAAzB,EAAA6I,MAAAu9E,EAAAvgG,GACAkrF,GAAAtvE,EAAAkmE,MAAAlmE,GAMA,MAAAsvE,IAIA6Y,YAAA,SAAAxD,EAAAh+E,GAKA,QAAAgkF,GAAApqF,GAIA,MAFAuG,GAAAL,QAAA69E,UAAA/jF,GAEAhC,EAAA2I,KAAA3G,EAAA,WAEAuG,EAAAL,QAAAw9E,QAAA1jF,KATA,GAAAuG,GAAAvc,KACAilF,IAcA,IAAAlsF,SAAAqhG,KAAAtgG,OAAA,GAEA,GAAAoiB,GAAA,GAAArI,GAAA8nF,eAAAv/E,GAEApI,EAAA,GAAAH,GAAA4hF,YAAAv5E,EACAlI,GAAAyI,eAAAzc,KAAAqW,YAEA,QAAAxc,GAAA,EAAAuP,EAAAgxF,EAAAtgG,OAAoCD,EAAAuP,EAAOvP,IAAA,CAE3C,GAAAk7F,GAAAqF,EAAAvgG,GACAwmG,EAAA,4BAAA/0F,KAAAypF,EAAA/+E,KAAA++E,EAAA/+E,IAAAuG,EAAA23E,YAAAa,EAAA/+E,GAEAivE,GAAA8P,EAAApZ,MAAAykB,EAAAC,IAMA,MAAApb,IAIA4Y,cAAA,SAAAzD,EAAAnV,GAEA,QAAAqb,GAAAtmG,GAEA,sBAAA8G,GAAA9G,GAEAwJ,QAAAwmD,KAAA,uEAAAhwD,GAEA6Z,EAAA7Z,IAIA,GAAAgrF,KAEA,IAAAjsF,SAAAqhG,EAEA,OAAAvgG,GAAA,EAAAuP,EAAAgxF,EAAAtgG,OAAoCD,EAAAuP,EAAOvP,IAAA,CAE3C,GAAAkjB,GAAAq9E,EAAAvgG,EAEAd,UAAAgkB,EAAAg4E,OAEAvxF,QAAAwmD,KAAA,+CAAAjtC,EAAA4+D,MAIA5iF,SAAAksF,EAAAloE,EAAAg4E,QAEAvxF,QAAAwmD,KAAA,sCAAAjtC,EAAAg4E,MAIA,IAAAJ,GAAA,GAAA9gF,GAAAihF,QAAA7P,EAAAloE,EAAAg4E,OACAJ,GAAAlP,eAEAkP,EAAAhZ,KAAA5+D,EAAA4+D,KAEA5iF,SAAAgkB,EAAA5jB,OAAAw7F,EAAAx7F,KAAA4jB,EAAA5jB,MACAJ,SAAAgkB,EAAAwjF,UAAA5L,EAAA4L,QAAAD,EAAAvjF,EAAAwjF,UACAxnG,SAAAgkB,EAAAwB,SAAAo2E,EAAAp2E,OAAA,GAAA1K,GAAA+6C,QAAA7xC,EAAAwB,OAAA,GAAAxB,EAAAwB,OAAA,KACAxlB,SAAAgkB,EAAAy9B,SAAAm6C,EAAAn6C,OAAA,GAAA3mC,GAAA+6C,QAAA7xC,EAAAy9B,OAAA,GAAAz9B,EAAAy9B,OAAA,KACAzhD,SAAAgkB,EAAAm0E,YAAAyD,EAAAzD,UAAAoP,EAAAvjF,EAAAm0E,YACAn4F,SAAAgkB,EAAAk0E,YAAA0D,EAAA1D,UAAAqP,EAAAvjF,EAAAk0E,YACAl4F,SAAAgkB,EAAA23E,aAAAC,EAAAD,WAAA33E,EAAA23E,YACA/6F,MAAAC,QAAAmjB,EAAA03E,QAEAE,EAAAQ,MAAAmL,EAAAvjF,EAAA03E,KAAA,IACAE,EAAAS,MAAAkL,EAAAvjF,EAAA03E,KAAA,KAIAzP,EAAAjoE,EAAA4+D,MAAAgZ,EAMA,MAAA3P,IAIA+Y,YAAA,WAEA,GAAA90C,GAAA,GAAAp1C,GAAAyzD,OAEA,iBAAAvqD,EAAA+nE,EAAAC,GAEA,GAAA5iE,GAEAq+E,EAAA,SAAArnG,GAQA,MANAJ,UAAA+rF,EAAA3rF,IAEAqK,QAAAwmD,KAAA,yCAAA7wD,GAIA2rF,EAAA3rF,IAIAsnG,EAAA,SAAAtnG,GAQA,MANAJ,UAAAgsF,EAAA5rF,IAEAqK,QAAAwmD,KAAA,yCAAA7wD,GAIA4rF,EAAA5rF,GAIA,QAAA4jB,EAAApY,MAEA,YAEAwd,EAAA,GAAAtO,GAAAM,KAEA,MAEA,yBAEAgO,EAAA,GAAAtO,GAAAkF,kBAAAgE,EAAA6sC,IAAA7sC,EAAAw3D,OAAAx3D,EAAAq3D,KAAAr3D,EAAAs3D,IAEA,MAEA,0BAEAlyD,EAAA,GAAAtO,GAAAg2C,mBAAA9sC,EAAAkzB,KAAAlzB,EAAA+sC,MAAA/sC,EAAAozB,IAAApzB,EAAAgtC,OAAAhtC,EAAAq3D,KAAAr3D,EAAAs3D,IAEA,MAEA,oBAEAlyD,EAAA,GAAAtO,GAAAm+E,aAAAj1E,EAAAxN,MAEA,MAEA,wBAEA4S,EAAA,GAAAtO,GAAA+B,iBAAAmH,EAAAxN,MAAAwN,EAAAk1E,UAEA,MAEA,kBAEA9vE,EAAA,GAAAtO,GAAAw/E,WAAAt2E,EAAAxN,MAAAwN,EAAAk1E,UAAAl1E,EAAA1H,SAAA0H,EAAAu2E,MAEA,MAEA,iBAEAnxE,EAAA,GAAAtO,GAAA0/E,UAAAx2E,EAAAxN,MAAAwN,EAAAk1E,UAAAl1E,EAAA1H,SAAA0H,EAAA+rC,MAAA/rC,EAAA+D,SAAA/D,EAAAu2E,MAEA,MAEA,uBAEAnxE,EAAA,GAAAtO,GAAAq/E,gBAAAn2E,EAAAxN,MAAAwN,EAAAq2E,YAAAr2E,EAAAk1E,UAEA,MAEA,YAEA9vE,EAAA,GAAAtO,GAAAkE,KAAAyoF,EAAAzjF,EAAAxG,UAAAkqF,EAAA1jF,EAAAtH,UAEA,MAEA,WAEA0M,EAAA,GAAAtO,GAAAmtE,GAEA,MAEA,YAEA7+D,EAAA,GAAAtO,GAAAktE,KAAAyf,EAAAzjF,EAAAxG,UAAAkqF,EAAA1jF,EAAAtH,UAAAsH,EAAAijB,KAEA,MAEA,kBACA,aAEA7d,EAAA,GAAAtO,GAAAotE,OAAAuf,EAAAzjF,EAAAxG,UAAAkqF,EAAA1jF,EAAAtH,UAEA,MAEA,cAEA0M,EAAA,GAAAtO,GAAAstE,OAAAsf,EAAA1jF,EAAAtH,UAEA,MAEA,aAEA0M,EAAA,GAAAtO,GAAA6sF,KAEA,MAEA,SAEAv+E,EAAA,GAAAtO,GAAAkuE,SA0BA,GAtBA5/D,EAAAw5D,KAAA5+D,EAAA4+D,KAEA5iF,SAAAgkB,EAAA5jB,OAAAgpB,EAAAhpB,KAAA4jB,EAAA5jB,MACAJ,SAAAgkB,EAAAksC,QAEAA,EAAAqP,UAAAv7C,EAAAksC,QACAA,EAAA8qB,UAAA5xD,EAAAtM,SAAAsM,EAAAkpC,WAAAlpC,EAAAqmC,SAIAzvD,SAAAgkB,EAAAlH,UAAAsM,EAAAtM,SAAAyiD,UAAAv7C,EAAAlH,UACA9c,SAAAgkB,EAAAxE,UAAA4J,EAAA5J,SAAA+/C,UAAAv7C,EAAAxE,UACAxf,SAAAgkB,EAAAyrC,OAAArmC,EAAAqmC,MAAA8P,UAAAv7C,EAAAyrC,QAIAzvD,SAAAgkB,EAAA2lE,aAAAvgE,EAAAugE,WAAA3lE,EAAA2lE,YACA3pF,SAAAgkB,EAAA4lE,gBAAAxgE,EAAAwgE,cAAA5lE,EAAA4lE,eAEA5pF,SAAAgkB,EAAAvF,UAAA2K,EAAA3K,QAAAuF,EAAAvF,SACAze,SAAAgkB,EAAA+lE,WAAA3gE,EAAA2gE,SAAA/lE,EAAA+lE,UAEA/pF,SAAAgkB,EAAA9V,SAEA,OAAAkkB,KAAApO,GAAA9V,SAEAkb,EAAApM,IAAA/V,KAAA+9F,YAAAhhF,EAAA9V,SAAAkkB,GAAA25D,EAAAC,GAMA,YAAAhoE,EAAApY,KAIA,OAFAg8F,GAAA5jF,EAAA4jF,OAEAv3F,EAAA,EAAoBA,EAAAu3F,EAAA7mG,OAAmBsP,IAAA,CAEvC,GAAAw3F,GAAAD,EAAAv3F,GACA+hB,EAAAhJ,EAAA6hE,oBAAA,OAAA4c,EAAAz+E,OAEAppB,UAAAoyB,GAEAhJ,EAAA0+E,SAAA11E,EAAAy1E,EAAAvrF,UAQA,MAAA8M,QAcAtO,EAAAitF,cAAA,SAAA5kF,GAEAlc,KAAAkc,QAAAnjB,SAAAmjB,IAAArI,EAAAsI,uBAIAtI,EAAAitF,cAAA3kG,WAEAE,YAAAwX,EAAAitF,cAEAnkF,KAAA,SAAA3G,EAAAoG,EAAAC,EAAAC,GAEA,GAAAC,GAAAvc,KAEAgU,EAAA,GAAAH,GAAA4hF,YAAAl5E,EAAAL,QACAlI,GAAAyI,eAAAzc,KAAAqW,aACArC,EAAA2I,KAAA3G,EAAA,SAAA++E,GAEA,GAAAJ,GAAA,GAAA9gF,GAAAihF,QAAAC,EACAJ,GAAAlP,eAEA1sF,SAAAqjB,GAEAA,EAAAu4E,IAIGt4E,EAAAC,IAIHG,eAAA,SAAAziB,GAEAgG,KAAAqW,YAAArc,IAcA6Z,EAAAktF,kBAAAltF,EAAAmtF,oBAAA,SAAA9kF,GAEAlc,KAAAkc,QAAAnjB,SAAAmjB,IAAArI,EAAAsI,sBAGAnc,KAAAihG,QAAA,MAIAptF,EAAAmtF,oBAAA7kG,WAEAE,YAAAwX,EAAAmtF,oBAEArkF,KAAA,SAAA3G,EAAAoG,EAAAC,EAAAC,GAEA,GAAAC,GAAAvc,KAEA20F,EAAA,GAAA9gF,GAAAqtF,YAEAltF,EAAA,GAAAH,GAAA2I,UAAAxc,KAAAkc,QA4DA,OA3DAlI,GAAAyI,eAAAzc,KAAAqW,aACArC,EAAA0I,gBAAA,eAEA1I,EAAA2I,KAAA3G,EAAA,SAAA8G,GAEA,GAAAqkF,GAAA5kF,EAAA0kF,QAAAnkF,EAEAqkF,KAEApoG,SAAAooG,EAAApM,MAEAJ,EAAAI,MAAAoM,EAAApM,MAEIh8F,SAAAooG,EAAApkF,OAEJ43E,EAAAI,MAAAtlF,MAAA0xF,EAAA1xF,MACAklF,EAAAI,MAAArlF,OAAAyxF,EAAAzxF,OACAilF,EAAAI,MAAAh4E,KAAAokF,EAAApkF,MAIA43E,EAAAQ,MAAAp8F,SAAAooG,EAAAhM,MAAAgM,EAAAhM,MAAAthF,EAAA2/C,oBACAmhC,EAAAS,MAAAr8F,SAAAooG,EAAA/L,MAAA+L,EAAA/L,MAAAvhF,EAAA2/C,oBAEAmhC,EAAA1D,UAAAl4F,SAAAooG,EAAAlQ,UAAAkQ,EAAAlQ,UAAAp9E,EAAAggD,aACA8gC,EAAAzD,UAAAn4F,SAAAooG,EAAAjQ,UAAAiQ,EAAAjQ,UAAAr9E,EAAAkgD,yBAEA4gC,EAAAD,WAAA37F,SAAAooG,EAAAzM,WAAAyM,EAAAzM,WAAA,EAEA37F,SAAAooG,EAAAnQ,SAEA2D,EAAA3D,OAAAmQ,EAAAnQ,QAGAj4F,SAAAooG,EAAAx8F,OAEAgwF,EAAAhwF,KAAAw8F,EAAAx8F,MAIA5L,SAAAooG,EAAAC,UAEAzM,EAAAyM,QAAAD,EAAAC,SAIA,IAAAD,EAAAE,cAEA1M,EAAAzD,UAAAr9E,EAAAggD,cAIA8gC,EAAAlP,eAEArpE,KAAAu4E,EAAAwM,KAEG9kF,EAAAC,GAGHq4E,GAIAl4E,eAAA,SAAAziB,GAEAgG,KAAAqW,YAAArc,IAcA6Z,EAAAytF,wBAAA,SAAAplF,GAEAlc,KAAAkc,QAAAnjB,SAAAmjB,IAAArI,EAAAsI,sBAGAnc,KAAAihG,QAAA,MAKAptF,EAAAytF,wBAAAnlG,WAEAE,YAAAwX,EAAAytF,wBAEA3kF,KAAA,SAAA3G,EAAAoG,EAAAC,EAAAC,GAEA,GAAAC,GAAAvc,KAEAilF,KAEA0P,EAAA,GAAA9gF,GAAA0tF,iBACA5M,GAAAI,MAAA9P,CAEA,IAAAjxE,GAAA,GAAAH,GAAA2I,UAAAxc,KAAAkc,QAIA,IAHAlI,EAAAyI,eAAAzc,KAAAqW,aACArC,EAAA0I,gBAAA,eAEA/iB,MAAAC,QAAAoc,GAmCA,OAjCA5e,GAAA,EAEAoqG,EAAA,SAAA3nG,GAEAma,EAAA2I,KAAA3G,EAAAnc,GAAA,SAAAijB,GAEA,GAAA2kF,GAAAllF,EAAA0kF,QAAAnkF,KAEAmoE,GAAAprF,IACA4V,MAAAgyF,EAAAhyF,MACAC,OAAA+xF,EAAA/xF,OACAshF,OAAAyQ,EAAAzQ,OACAoQ,QAAAK,EAAAL,SAGAhqG,GAAA,EAEA,IAAAA,IAEA,IAAAqqG,EAAAJ,cACA1M,EAAAzD,UAAAr9E,EAAAggD,cAEA8gC,EAAA3D,OAAAyQ,EAAAzQ,OACA2D,EAAAlP,eAEArpE,KAAAu4E,KAIKt4E,EAAAC,IAILziB,EAAA,EAAA2xE,EAAAx1D,EAAAlc,OAAoCD,EAAA2xE,IAAQ3xE,EAE5C2nG,EAAA3nG,OAQAma,GAAA2I,KAAA3G,EAAA,SAAA8G,GAEA,GAAA2kF,GAAAllF,EAAA0kF,QAAAnkF,KAEA,IAAA2kF,EAAAC,UAIA,OAFAvjF,GAAAsjF,EAAAL,QAAAtnG,OAAA2nG,EAAAJ,YAEA33F,EAAA,EAAqBA,EAAAyU,EAAWzU,IAAA,CAEhCu7E,EAAAv7E,IAAqB03F,WAErB,QAAAvnG,GAAA,EAAsBA,EAAA4nG,EAAAJ,YAA0BxnG,IAEhDorF,EAAAv7E,GAAA03F,QAAA1gG,KAAA+gG,EAAAL,QAAA13F,EAAA+3F,EAAAJ,YAAAxnG,IACAorF,EAAAv7E,GAAAsnF,OAAAyQ,EAAAzQ,OACA/L,EAAAv7E,GAAA+F,MAAAgyF,EAAAhyF,MACAw1E,EAAAv7E,GAAAgG,OAAA+xF,EAAA/xF,WAQAilF,GAAAI,MAAAtlF,MAAAgyF,EAAAhyF,MACAklF,EAAAI,MAAArlF,OAAA+xF,EAAA/xF,OACAilF,EAAAyM,QAAAK,EAAAL,OAIA,KAAAK,EAAAJ,cAEA1M,EAAAzD,UAAAr9E,EAAAggD,cAIA8gC,EAAA3D,OAAAyQ,EAAAzQ,OACA2D,EAAAlP,eAEArpE,KAAAu4E,IAEIt4E,EAAAC,EAIJ,OAAAq4E,IAIAl4E,eAAA,SAAAziB,GAEAgG,KAAAqW,YAAArc,IAaA6Z,EAAA8tF,SAAA,WAEArnG,OAAAC,eAAAyF,KAAA,MAAqChG,MAAA6Z,EAAA+tF,oBAErC5hG,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAA7G,KAAA,GACA6G,KAAA2E,KAAA,WAEA3E,KAAAsX,KAAAzD,EAAA68C,UAEA1wD,KAAAiO,QAAA,EACAjO,KAAAqX,eAEArX,KAAA61F,SAAAhiF,EAAAo9C,eAEAjxD,KAAA6hG,SAAAhuF,EAAAk+C,eACA/xD,KAAA8hG,SAAAjuF,EAAAm+C,uBACAhyD,KAAA+hG,cAAAluF,EAAAy9C,YACAtxD,KAAAgiG,cAAA,KACAhiG,KAAAiiG,cAAA,KACAjiG,KAAAkiG,mBAAA,KAEAliG,KAAAmiG,UAAAtuF,EAAA4+C,eACAzyD,KAAA81F,aACA91F,KAAA+1F,cAEA/1F,KAAAoiG,cAEApiG,KAAA+rF,UAAA,KAEA/rF,KAAAqiG,iBACAriG,KAAAsiG,oBAAA,EACAtiG,KAAAuiG,mBAAA,EAEAviG,KAAAw8F,UAAA,EAEAx8F,KAAAwiG,SAAA,EAEAxiG,KAAAwX,WAEAxX,KAAAyiG,iBAIA5uF,EAAA8tF,SAAAxlG,WAEAE,YAAAwX,EAAA8tF,SAEAlc,kBAEA,MAAAzlF,MAAAyiG,cAIAhd,gBAAAzrF,GAEAA,QAAAgG,KAAA+Z,SAEA/Z,KAAAyiG,aAAAzoG,GAIA0oG,UAAA,SAAA/d,GAEA,GAAA5rF,SAAA4rF,EAEA,OAAAxpF,KAAAwpF,GAAA,CAEA,GAAAge,GAAAhe,EAAAxpF,EAEA,IAAApC,SAAA4pG,EAAA,CAOA,GAAAC,GAAA5iG,KAAA7E,EAEApC,UAAA6pG,EAOAA,YAAA/uF,GAAAqiD,MAEA0sC,EAAA12F,IAAAy2F,GAEIC,YAAA/uF,GAAA8L,SAAAgjF,YAAA9uF,GAAA8L,QAEJijF,EAAAnqF,KAAAkqF,GAEI,aAAAxnG,EAGJ6E,KAAA7E,GAAA0nG,OAAAF,GAIA3iG,KAAA7E,GAAAwnG,EApBAn/F,QAAAwmD,KAAA,SAAAhqD,KAAA2E,KAAA,MAAAxJ,EAAA,6CATAqI,SAAAwmD,KAAA,oBAAA7uD,EAAA,+BAqCAspF,OAAA,SAAA5wC,GAEA,GAAA92B,IACA6nE,UACA/kC,QAAA,IACAl7C,KAAA,WACAugF,UAAA,mBA0DA,OArDAnoE,GAAA4+D,KAAA37E,KAAA27E,KACA5+D,EAAApY,KAAA3E,KAAA2E,KACA,KAAA3E,KAAA7G,OAAA4jB,EAAA5jB,KAAA6G,KAAA7G,MAEA6G,KAAAuP,gBAAAsE,GAAAqiD,QAAAn5C,EAAAxN,MAAAvP,KAAAuP,MAAA8nD,UACAr3D,KAAAs2F,mBAAAziF,GAAAqiD,QAAAn5C,EAAAu5E,SAAAt2F,KAAAs2F,SAAAj/B,UACAr3D,KAAAw2F,mBAAA3iF,GAAAqiD,QAAAn5C,EAAAy5E,SAAAx2F,KAAAw2F,SAAAn/B,UACAt+D,SAAAiH,KAAA02F,YAAA35E,EAAA25E,UAAA12F,KAAA02F,WAEA12F,KAAAqC,cAAAwR,GAAAihF,UAAA/3E,EAAA1a,IAAArC,KAAAqC,IAAAoiF,OAAA5wC,GAAA8nC,MACA37E,KAAA28F,mBAAA9oF,GAAAihF,UAAA/3E,EAAA4/E,SAAA38F,KAAA28F,SAAAlY,OAAA5wC,GAAA8nC,MACA37E,KAAAq9F,mBAAAxpF,GAAAihF,UAAA/3E,EAAAsgF,SAAAr9F,KAAAq9F,SAAA5Y,OAAA5wC,GAAA8nC,MACA37E,KAAA48F,kBAAA/oF,GAAAihF,UAEA/3E,EAAA6/E,QAAA58F,KAAA48F,QAAAnY,OAAA5wC,GAAA8nC,KACA5+D,EAAAi8E,UAAAh5F,KAAAg5F,WAGAh5F,KAAA68F,oBAAAhpF,GAAAihF,UAEA/3E,EAAA8/E,UAAA78F,KAAA68F,UAAApY,OAAA5wC,GAAA8nC,KACA5+D,EAAAm8E,YAAAl5F,KAAAk5F,aAGAl5F,KAAA88F,0BAAAjpF,GAAAihF,UAEA/3E,EAAA+/E,gBAAA98F,KAAA88F,gBAAArY,OAAA5wC,GAAA8nC,KACA5+D,EAAAggF,kBAAA/8F,KAAA+8F,kBACAhgF,EAAAigF,iBAAAh9F,KAAAg9F,kBAGAh9F,KAAAi9F,sBAAAppF,GAAAihF,UAAA/3E,EAAAkgF,YAAAj9F,KAAAi9F,YAAAxY,OAAA5wC,GAAA8nC,MACA37E,KAAAk9F,iBAAArpF,GAAAihF,UAEA/3E,EAAAmgF,OAAAl9F,KAAAk9F,OAAAzY,OAAA5wC,GAAA8nC,KACA5+D,EAAAqgF,aAAAp9F,KAAAo9F,cAIArkG,SAAAiH,KAAAgpC,OAAAjsB,EAAAisB,KAAAhpC,KAAAgpC,MACAjwC,SAAAiH,KAAA08F,kBAAA3/E,EAAA2/E,gBAAA18F,KAAA08F,iBAEA3jG,SAAAiH,KAAA4X,cAAA5X,KAAA4X,eAAA/D,EAAAi9C,WAAA/zC,EAAAnF,aAAA5X,KAAA4X,cACA7e,SAAAiH,KAAA41F,SAAA51F,KAAA41F,UAAA/hF,EAAAg9C,gBAAA9zC,EAAA64E,QAAA51F,KAAA41F,SACA78F,SAAAiH,KAAA61F,UAAA71F,KAAA61F,WAAAhiF,EAAAo9C,iBAAAl0C,EAAA84E,SAAA71F,KAAA61F,UACA98F,SAAAiH,KAAAsX,MAAAtX,KAAAsX,OAAAzD,EAAA68C,YAAA3zC,EAAAzF,KAAAtX,KAAAsX,MAEAtX,KAAAiO,QAAA,IAAA8O,EAAA9O,QAAAjO,KAAAiO,SACAjO,KAAAqX,mBAAA0F,EAAA1F,YAAArX,KAAAqX,aACArX,KAAAw8F,UAAA,IAAAz/E,EAAAy/E,UAAAx8F,KAAAw8F,WACAx8F,KAAAk2F,iBAAAn5E,EAAAm5E,UAAAl2F,KAAAk2F,WACAl2F,KAAAy8F,mBAAA,IAAA1/E,EAAA0/E,mBAAAz8F,KAAAy8F,oBAEA1/E,GAIAysC,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAxV,GAkCA,MAhCAjD,MAAA7G,KAAA8J,EAAA9J,KAEA6G,KAAAsX,KAAArU,EAAAqU,KAEAtX,KAAAiO,QAAAhL,EAAAgL,QACAjO,KAAAqX,YAAApU,EAAAoU,YAEArX,KAAA61F,SAAA5yF,EAAA4yF,SAEA71F,KAAA6hG,SAAA5+F,EAAA4+F,SACA7hG,KAAA8hG,SAAA7+F,EAAA6+F,SACA9hG,KAAA+hG,cAAA9+F,EAAA8+F,cACA/hG,KAAAgiG,cAAA/+F,EAAA++F,cACAhiG,KAAAiiG,cAAAh/F,EAAAg/F,cACAjiG,KAAAkiG,mBAAAj/F,EAAAi/F,mBAEAliG,KAAAmiG,UAAAl/F,EAAAk/F,UACAniG,KAAA81F,UAAA7yF,EAAA6yF,UACA91F,KAAA+1F,WAAA9yF,EAAA8yF,WAEA/1F,KAAA+rF,UAAA9oF,EAAA8oF,UAEA/rF,KAAAqiG,cAAAp/F,EAAAo/F,cACAriG,KAAAsiG,oBAAAr/F,EAAAq/F,oBACAtiG,KAAAuiG,mBAAAt/F,EAAAs/F,mBAEAviG,KAAAw8F,UAAAv5F,EAAAu5F,UAEAx8F,KAAAwiG,SAAAv/F,EAAAu/F,SAEAxiG,KAAAwX,QAAAvU,EAAAuU,QAEAxX,MAIA+Z,OAAA,WAEA/Z,KAAA8sD,eAAuBnoD,KAAA,YAIvB2U,QAAA,WAEAtZ,KAAA8sD,eAAuBnoD,KAAA,aAMvBm+F,iBAEAt/F,QAAAwmD,KAAA,SAAAhqD,KAAA2E,KAAA,oCAIAm+F,eAAAC,GAEAv/F,QAAAwmD,KAAA,SAAAhqD,KAAA2E,KAAA,oCAIAq+F,cAGA,MADAx/F,SAAAwmD,KAAA,SAAAhqD,KAAA2E,KAAA,gCACA,GAAAkP,GAAAqiD,QAMAriD,EAAAq7C,gBAAA/yD,UAAAyH,MAAAiQ,EAAA8tF,SAAAxlG,WAEA0X,EAAA+tF,gBAAA,EA0BA/tF,EAAAovF,kBAAA,SAAAtW,GAEA94E,EAAA8tF,SAAAtqG,KAAA2I,MAEAA,KAAA2E,KAAA,oBAEA3E,KAAAuP,MAAA,GAAAsE,GAAAqiD,MAAA,UAEAl2D,KAAAkjG,UAAA,EACAljG,KAAAmjG,QAAA,QACAnjG,KAAAojG,SAAA,QAEApjG,KAAA4X,aAAA/D,EAAAi9C,SAEA9wD,KAAAqjG,OAEArjG,KAAA0iG,UAAA/V,IAIA94E,EAAAovF,kBAAA9mG,UAAA7B,OAAA8B,OAAAyX,EAAA8tF,SAAAxlG,WACA0X,EAAAovF,kBAAA9mG,UAAAE,YAAAwX,EAAAovF,kBAEApvF,EAAAovF,kBAAA9mG,UAAAsc,KAAA,SAAAxV,GAcA,MAZA4Q,GAAA8tF,SAAAxlG,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAuP,MAAAkJ,KAAAxV,EAAAsM,OAEAvP,KAAAkjG,UAAAjgG,EAAAigG,UACAljG,KAAAmjG,QAAAlgG,EAAAkgG,QACAnjG,KAAAojG,SAAAngG,EAAAmgG,SAEApjG,KAAA4X,aAAA3U,EAAA2U,aAEA5X,KAAAqjG,IAAApgG,EAAAogG,IAEArjG,MA6BA6T,EAAAyvF,mBAAA,SAAA3W,GAEA94E,EAAA8tF,SAAAtqG,KAAA2I,MAEAA,KAAA2E,KAAA,qBAEA3E,KAAAuP,MAAA,GAAAsE,GAAAqiD,MAAA,UAEAl2D,KAAAkjG,UAAA,EAEAljG,KAAAwoD,MAAA,EACAxoD,KAAAujG,SAAA,EACAvjG,KAAAwjG,QAAA,EAEAxjG,KAAA4X,gBAEA5X,KAAAqjG,OAEArjG,KAAA0iG,UAAA/V,IAIA94E,EAAAyvF,mBAAAnnG,UAAA7B,OAAA8B,OAAAyX,EAAA8tF,SAAAxlG,WACA0X,EAAAyvF,mBAAAnnG,UAAAE,YAAAwX,EAAAyvF,mBAEAzvF,EAAAyvF,mBAAAnnG,UAAAsc,KAAA,SAAAxV,GAgBA,MAdA4Q,GAAA8tF,SAAAxlG,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAuP,MAAAkJ,KAAAxV,EAAAsM,OAEAvP,KAAAkjG,UAAAjgG,EAAAigG,UAEAljG,KAAAwoD,MAAAvlD,EAAAulD,MACAxoD,KAAAujG,SAAAtgG,EAAAsgG,SACAvjG,KAAAwjG,QAAAvgG,EAAAugG,QAEAxjG,KAAA4X,aAAA3U,EAAA2U,aAEA5X,KAAAqjG,IAAApgG,EAAAogG,IAEArjG,MA4CA6T,EAAA4vF,kBAAA,SAAA9W,GAEA94E,EAAA8tF,SAAAtqG,KAAA2I,MAEAA,KAAA2E,KAAA,oBAEA3E,KAAAuP,MAAA,GAAAsE,GAAAqiD,MAAA,UAEAl2D,KAAAqC,IAAA,KAEArC,KAAAu9F,MAAA,KACAv9F,KAAAw9F,eAAA,EAEAx9F,KAAAi9F,YAAA,KAEAj9F,KAAA28F,SAAA,KAEA38F,KAAAk9F,OAAA,KACAl9F,KAAAm9F,QAAAtpF,EAAAi/C,kBACA9yD,KAAAo9F,aAAA,EACAp9F,KAAA0jG,gBAAA,IAEA1jG,KAAAqjG,OAEArjG,KAAA41F,QAAA/hF,EAAAg9C,cAEA7wD,KAAAk2F,aACAl2F,KAAAy8F,mBAAA,EACAz8F,KAAA2jG,iBAAA,QACA3jG,KAAA4jG,kBAAA,QAEA5jG,KAAA4X,aAAA/D,EAAAi9C,SAEA9wD,KAAA6jG,YACA7jG,KAAAmoF,gBAEAnoF,KAAA0iG,UAAA/V,IAIA94E,EAAA4vF,kBAAAtnG,UAAA7B,OAAA8B,OAAAyX,EAAA8tF,SAAAxlG,WACA0X,EAAA4vF,kBAAAtnG,UAAAE,YAAAwX,EAAA4vF,kBAEA5vF,EAAA4vF,kBAAAtnG,UAAAsc,KAAA,SAAAxV,GAkCA,MAhCA4Q,GAAA8tF,SAAAxlG,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAuP,MAAAkJ,KAAAxV,EAAAsM,OAEAvP,KAAAqC,IAAAY,EAAAZ,IAEArC,KAAAu9F,MAAAt6F,EAAAs6F,MACAv9F,KAAAw9F,eAAAv6F,EAAAu6F,eAEAx9F,KAAAi9F,YAAAh6F,EAAAg6F,YAEAj9F,KAAA28F,SAAA15F,EAAA05F,SAEA38F,KAAAk9F,OAAAj6F,EAAAi6F,OACAl9F,KAAAm9F,QAAAl6F,EAAAk6F,QACAn9F,KAAAo9F,aAAAn6F,EAAAm6F,aACAp9F,KAAA0jG,gBAAAzgG,EAAAygG,gBAEA1jG,KAAAqjG,IAAApgG,EAAAogG,IAEArjG,KAAA41F,QAAA3yF,EAAA2yF,QAEA51F,KAAAk2F,UAAAjzF,EAAAizF,UACAl2F,KAAAy8F,mBAAAx5F,EAAAw5F,mBACAz8F,KAAA2jG,iBAAA1gG,EAAA0gG,iBACA3jG,KAAA4jG,kBAAA3gG,EAAA2gG,kBAEA5jG,KAAA4X,aAAA3U,EAAA2U,aAEA5X,KAAA6jG,SAAA5gG,EAAA4gG,SACA7jG,KAAAmoF,aAAAllF,EAAAklF,aAEAnoF,MA2CA6T,EAAAuD,oBAAA,SAAAu1E,GAEA94E,EAAA8tF,SAAAtqG,KAAA2I,MAEAA,KAAA2E,KAAA,sBAEA3E,KAAAuP,MAAA,GAAAsE,GAAAqiD,MAAA,UACAl2D,KAAAs2F,SAAA,GAAAziF,GAAAqiD,MAAA,GAEAl2D,KAAAqC,IAAA,KAEArC,KAAAi9F,YAAA,KAEAj9F,KAAA28F,SAAA,KAEA38F,KAAAk9F,OAAA,KACAl9F,KAAAm9F,QAAAtpF,EAAAi/C,kBACA9yD,KAAAo9F,aAAA,EACAp9F,KAAA0jG,gBAAA,IAEA1jG,KAAAqjG,OAEArjG,KAAAk2F,aACAl2F,KAAAy8F,mBAAA,EACAz8F,KAAA2jG,iBAAA,QACA3jG,KAAA4jG,kBAAA,QAEA5jG,KAAA4X,aAAA/D,EAAAi9C,SAEA9wD,KAAA6jG,YACA7jG,KAAAmoF,gBACAnoF,KAAAqoF,gBAEAroF,KAAA0iG,UAAA/V,IAIA94E,EAAAuD,oBAAAjb,UAAA7B,OAAA8B,OAAAyX,EAAA8tF,SAAAxlG,WACA0X,EAAAuD,oBAAAjb,UAAAE,YAAAwX,EAAAuD,oBAEAvD,EAAAuD,oBAAAjb,UAAAsc,KAAA,SAAAxV,GA+BA,MA7BA4Q,GAAA8tF,SAAAxlG,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAuP,MAAAkJ,KAAAxV,EAAAsM,OACAvP,KAAAs2F,SAAA79E,KAAAxV,EAAAqzF,UAEAt2F,KAAAqC,IAAAY,EAAAZ,IAEArC,KAAAi9F,YAAAh6F,EAAAg6F,YAEAj9F,KAAA28F,SAAA15F,EAAA05F,SAEA38F,KAAAk9F,OAAAj6F,EAAAi6F,OACAl9F,KAAAm9F,QAAAl6F,EAAAk6F,QACAn9F,KAAAo9F,aAAAn6F,EAAAm6F,aACAp9F,KAAA0jG,gBAAAzgG,EAAAygG,gBAEA1jG,KAAAqjG,IAAApgG,EAAAogG,IAEArjG,KAAAk2F,UAAAjzF,EAAAizF,UACAl2F,KAAAy8F,mBAAAx5F,EAAAw5F,mBACAz8F,KAAA2jG,iBAAA1gG,EAAA0gG,iBACA3jG,KAAA4jG,kBAAA3gG,EAAA2gG,kBAEA5jG,KAAA4X,aAAA3U,EAAA2U,aAEA5X,KAAA6jG,SAAA5gG,EAAA4gG,SACA7jG,KAAAmoF,aAAAllF,EAAAklF,aACAnoF,KAAAqoF,aAAAplF,EAAAolF,aAEAroF,MAgEA6T,EAAA6D,kBAAA,SAAAi1E,GAEA94E,EAAA8tF,SAAAtqG,KAAA2I,MAEAA,KAAA2E,KAAA,oBAEA3E,KAAAuP,MAAA,GAAAsE,GAAAqiD,MAAA,UACAl2D,KAAAs2F,SAAA,GAAAziF,GAAAqiD,MAAA,GACAl2D,KAAAw2F,SAAA,GAAA3iF,GAAAqiD,MAAA,SACAl2D,KAAA02F,UAAA,GAEA12F,KAAA8jG,SAEA9jG,KAAAqC,IAAA,KAEArC,KAAAq9F,SAAA,KACAr9F,KAAAs9F,kBAAA,EAEAt9F,KAAAu9F,MAAA,KACAv9F,KAAAw9F,eAAA,EAEAx9F,KAAA+jG,YAAA,KAEA/jG,KAAA48F,QAAA,KACA58F,KAAAg5F,UAAA,EAEAh5F,KAAA68F,UAAA,KACA78F,KAAAk5F,YAAA,GAAArlF,GAAA+6C,QAAA,KAEA5uD,KAAA88F,gBAAA,KACA98F,KAAA+8F,kBAAA,EACA/8F,KAAAg9F,iBAAA,EAEAh9F,KAAAi9F,YAAA,KAEAj9F,KAAA28F,SAAA,KAEA38F,KAAAk9F,OAAA,KACAl9F,KAAAm9F,QAAAtpF,EAAAi/C,kBACA9yD,KAAAo9F,aAAA,EACAp9F,KAAA0jG,gBAAA,IAEA1jG,KAAAqjG,OAEArjG,KAAA41F,QAAA/hF,EAAAg9C,cAEA7wD,KAAAk2F,aACAl2F,KAAAy8F,mBAAA,EACAz8F,KAAA2jG,iBAAA,QACA3jG,KAAA4jG,kBAAA,QAEA5jG,KAAA4X,aAAA/D,EAAAi9C,SAEA9wD,KAAA6jG,YACA7jG,KAAAmoF,gBACAnoF,KAAAqoF,gBAEAroF,KAAA0iG,UAAA/V,IAIA94E,EAAA6D,kBAAAvb,UAAA7B,OAAA8B,OAAAyX,EAAA8tF,SAAAxlG,WACA0X,EAAA6D,kBAAAvb,UAAAE,YAAAwX,EAAA6D,kBAEA7D,EAAA6D,kBAAAvb,UAAAsc,KAAA,SAAAxV,GAuDA,MArDA4Q,GAAA8tF,SAAAxlG,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAuP,MAAAkJ,KAAAxV,EAAAsM,OACAvP,KAAAs2F,SAAA79E,KAAAxV,EAAAqzF,UACAt2F,KAAAw2F,SAAA/9E,KAAAxV,EAAAuzF,UACAx2F,KAAA02F,UAAAzzF,EAAAyzF,UAEA12F,KAAA8jG,MAAA7gG,EAAA6gG,MAEA9jG,KAAAqC,IAAAY,EAAAZ,IAEArC,KAAAq9F,SAAAp6F,EAAAo6F,SACAr9F,KAAAs9F,kBAAAr6F,EAAAq6F,kBAEAt9F,KAAAu9F,MAAAt6F,EAAAs6F,MACAv9F,KAAAw9F,eAAAv6F,EAAAu6F,eAEAx9F,KAAA+jG,YAAA9gG,EAAA8gG,YAEA/jG,KAAA48F,QAAA35F,EAAA25F,QACA58F,KAAAg5F,UAAA/1F,EAAA+1F,UAEAh5F,KAAA68F,UAAA55F,EAAA45F,UACA78F,KAAAk5F,YAAAzgF,KAAAxV,EAAAi2F,aAEAl5F,KAAA88F,gBAAA75F,EAAA65F,gBACA98F,KAAA+8F,kBAAA95F,EAAA85F,kBACA/8F,KAAAg9F,iBAAA/5F,EAAA+5F,iBAEAh9F,KAAAi9F,YAAAh6F,EAAAg6F,YAEAj9F,KAAA28F,SAAA15F,EAAA05F,SAEA38F,KAAAk9F,OAAAj6F,EAAAi6F,OACAl9F,KAAAm9F,QAAAl6F,EAAAk6F,QACAn9F,KAAAo9F,aAAAn6F,EAAAm6F,aACAp9F,KAAA0jG,gBAAAzgG,EAAAygG,gBAEA1jG,KAAAqjG,IAAApgG,EAAAogG,IAEArjG,KAAA41F,QAAA3yF,EAAA2yF,QAEA51F,KAAAk2F,UAAAjzF,EAAAizF,UACAl2F,KAAAy8F,mBAAAx5F,EAAAw5F,mBACAz8F,KAAA2jG,iBAAA1gG,EAAA0gG,iBACA3jG,KAAA4jG,kBAAA3gG,EAAA2gG,kBAEA5jG,KAAA4X,aAAA3U,EAAA2U,aAEA5X,KAAA6jG,SAAA5gG,EAAA4gG,SACA7jG,KAAAmoF,aAAAllF,EAAAklF,aACAnoF,KAAAqoF,aAAAplF,EAAAolF,aAEAroF,MAsBA6T,EAAAmwF,kBAAA,SAAArX,GAEA94E,EAAA8tF,SAAAtqG,KAAA2I,MAEAA,KAAA2E,KAAA,oBAEA3E,KAAAmoF,gBACAnoF,KAAAk2F,aACAl2F,KAAAy8F,mBAAA,EAEAz8F,KAAA0iG,UAAA/V,IAIA94E,EAAAmwF,kBAAA7nG,UAAA7B,OAAA8B,OAAAyX,EAAA8tF,SAAAxlG,WACA0X,EAAAmwF,kBAAA7nG,UAAAE,YAAAwX,EAAAmwF,kBAEAnwF,EAAAmwF,kBAAA7nG,UAAAsc,KAAA,SAAAxV,GAOA,MALA4Q,GAAA8tF,SAAAxlG,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAk2F,UAAAjzF,EAAAizF,UACAl2F,KAAAy8F,mBAAAx5F,EAAAw5F,mBAEAz8F,MAsBA6T,EAAAowF,mBAAA,SAAAtX,GAEA94E,EAAA8tF,SAAAtqG,KAAA2I,KAAA2sF,GAEA3sF,KAAA2E,KAAA,qBAEA3E,KAAAk2F,aACAl2F,KAAAy8F,mBAAA,EAEAz8F,KAAAmoF,gBAEAnoF,KAAA0iG,UAAA/V,IAIA94E,EAAAowF,mBAAA9nG,UAAA7B,OAAA8B,OAAAyX,EAAA8tF,SAAAxlG,WACA0X,EAAAowF,mBAAA9nG,UAAAE,YAAAwX,EAAAowF,mBAEApwF,EAAAowF,mBAAA9nG,UAAAsc,KAAA,SAAAxV,GAOA,MALA4Q,GAAA8tF,SAAAxlG,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAk2F,UAAAjzF,EAAAizF,UACAl2F,KAAAy8F,mBAAAx5F,EAAAw5F,mBAEAz8F,MAUA6T,EAAAqwF,cAAA,SAAAnf,GAEA/kF,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAA2E,KAAA,gBAEA3E,KAAA+kF,sBAAAprF,OAAAorF,KAEA/kF,KAAAwX,YAIA3D,EAAAqwF,cAAA/nG,WAEAE,YAAAwX,EAAAqwF,cAEAzf,OAAA,WAaA,OAXAU,IACAP,UACA/kC,QAAA,IACAl7C,KAAA,WACAugF,UAAA,oBAEAvJ,KAAA37E,KAAA27E,KACAh3E,KAAA3E,KAAA2E,KACAogF,cAGAlrF,EAAA,EAAAuP,EAAApJ,KAAA+kF,UAAAjrF,OAA6CD,EAAAuP,EAAOvP,IAEpDsrF,EAAAJ,UAAArkF,KAAAV,KAAA+kF,UAAAlrF,GAAA4qF,SAMA,OAFAU,GAAA3tE,QAAAxX,KAAAwX,QAEA2tE,GAIA37B,MAAA,WAIA,OAFA/zC,GAAA,GAAAzV,MAAA3D,YAEAxC,EAAA,EAAkBA,EAAAmG,KAAA+kF,UAAAjrF,OAA2BD,IAE7C4b,EAAAsvE,UAAArkF,KAAAV,KAAA+kF,UAAAlrF,GAAA2vD,QAMA,OAFA/zC,GAAA+B,QAAAxX,KAAAwX,QAEA/B,IAQA5B,EAAAswF,iBAAAtwF,EAAAqwF,cA0BArwF,EAAAuwF,eAAA,SAAAzX,GAEA94E,EAAA8tF,SAAAtqG,KAAA2I,MAEAA,KAAA2E,KAAA,iBAEA3E,KAAAuP,MAAA,GAAAsE,GAAAqiD,MAAA,UAEAl2D,KAAAqC,IAAA,KAEArC,KAAAgpC,KAAA,EACAhpC,KAAA08F,mBAEA18F,KAAA4X,aAAA/D,EAAAi9C,SAEA9wD,KAAAqjG,OAEArjG,KAAA0iG,UAAA/V,IAIA94E,EAAAuwF,eAAAjoG,UAAA7B,OAAA8B,OAAAyX,EAAA8tF,SAAAxlG,WACA0X,EAAAuwF,eAAAjoG,UAAAE,YAAAwX,EAAAuwF,eAEAvwF,EAAAuwF,eAAAjoG,UAAAsc,KAAA,SAAAxV,GAeA,MAbA4Q,GAAA8tF,SAAAxlG,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAuP,MAAAkJ,KAAAxV,EAAAsM,OAEAvP,KAAAqC,IAAAY,EAAAZ,IAEArC,KAAAgpC,KAAA/lC,EAAA+lC,KACAhpC,KAAA08F,gBAAAz5F,EAAAy5F,gBAEA18F,KAAA4X,aAAA3U,EAAA2U,aAEA5X,KAAAqjG,IAAApgG,EAAAogG,IAEArjG,MAMA6T,EAAAwwF,mBAAA,SAAA1X,GAGA,MADAnpF,SAAAwmD,KAAA,sEACA,GAAAn2C,GAAAuwF,eAAAzX,IAIA94E,EAAAywF,sBAAA,SAAA3X,GAGA,MADAnpF,SAAAwmD,KAAA,yEACA,GAAAn2C,GAAAuwF,eAAAzX,IAIA94E,EAAA0wF,uBAAA,SAAA5X,GAGA,MADAnpF,SAAAwmD,KAAA,0EACA,GAAAn2C,GAAAuwF,eAAAzX,IAoCA94E,EAAA2wF,eAAA,SAAA7X,GAEA94E,EAAA8tF,SAAAtqG,KAAA2I,MAEAA,KAAA2E,KAAA,iBAEA3E,KAAAykG,WACAzkG,KAAAq8F,YAEAr8F,KAAAs8F,aAAA,gGACAt8F,KAAAu8F,eAAA,iEAEAv8F,KAAA41F,QAAA/hF,EAAAg9C,cAEA7wD,KAAAkjG,UAAA,EAEAljG,KAAAk2F,aACAl2F,KAAAy8F,mBAAA,EAEAz8F,KAAAqjG,OAEArjG,KAAAgV,UAEAhV,KAAA4X,aAAA/D,EAAAi9C,SAEA9wD,KAAA6jG,YAEA7jG,KAAAmoF,gBACAnoF,KAAAqoF,gBAEAroF,KAAA0kG,eAIA1kG,KAAA2kG,wBACAp1F,OAAA,OACA65E,IAAA,KACAE,KAAA,MAGAtpF,KAAA4kG,oBAAA7rG,OAEAA,SAAA4zF,IAEA5zF,SAAA4zF,EAAA7f,YAEAtpE,QAAAC,MAAA,2FAIAzD,KAAA0iG,UAAA/V,KAMA94E,EAAA2wF,eAAAroG,UAAA7B,OAAA8B,OAAAyX,EAAA8tF,SAAAxlG,WACA0X,EAAA2wF,eAAAroG,UAAAE,YAAAwX,EAAA2wF,eAEA3wF,EAAA2wF,eAAAroG,UAAAsc,KAAA,SAAAxV,GA8BA,MA5BA4Q,GAAA8tF,SAAAxlG,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAu8F,eAAAt5F,EAAAs5F,eACAv8F,KAAAs8F,aAAAr5F,EAAAq5F,aAEAt8F,KAAAq8F,SAAAxoF,EAAAgxF,cAAAr7C,MAAAvmD,EAAAo5F,UAEAr8F,KAAA8sE,WAAA7pE,EAAA6pE,WACA9sE,KAAAykG,QAAAxhG,EAAAwhG,QAEAzkG,KAAA41F,QAAA3yF,EAAA2yF,QAEA51F,KAAAk2F,UAAAjzF,EAAAizF,UACAl2F,KAAAy8F,mBAAAx5F,EAAAw5F,mBAEAz8F,KAAAqjG,IAAApgG,EAAAogG,IAEArjG,KAAAgV,OAAA/R,EAAA+R,OAEAhV,KAAA4X,aAAA3U,EAAA2U,aAEA5X,KAAA6jG,SAAA5gG,EAAA4gG,SAEA7jG,KAAAmoF,aAAAllF,EAAAklF,aACAnoF,KAAAqoF,aAAAplF,EAAAolF,aAEAroF,KAAA0kG,YAAAzhG,EAAAyhG,YAEA1kG,MAIA6T,EAAA2wF,eAAAroG,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAA8tF,SAAAxlG,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAOA,OALA92B,GAAAs/E,SAAAr8F,KAAAq8F,SACAt/E,EAAA+vD,WAAA9sE,KAAA8sE,WACA/vD,EAAAu/E,aAAAt8F,KAAAs8F,aACAv/E,EAAAw/E,eAAAv8F,KAAAu8F,eAEAx/E,GAUAlJ,EAAAixF,kBAAA,SAAAnY,GAEA94E,EAAA2wF,eAAAntG,KAAA2I,KAAA2sF,GAEA3sF,KAAA2E,KAAA,qBAIAkP,EAAAixF,kBAAA3oG,UAAA7B,OAAA8B,OAAAyX,EAAA2wF,eAAAroG,WACA0X,EAAAixF,kBAAA3oG,UAAAE,YAAAwX,EAAAixF,kBAsBAjxF,EAAAkxF,eAAA,SAAApY,GAEA94E,EAAA8tF,SAAAtqG,KAAA2I,MAEAA,KAAA2E,KAAA,iBAEA3E,KAAAuP,MAAA,GAAAsE,GAAAqiD,MAAA,UACAl2D,KAAAqC,IAAA,KAEArC,KAAAuY,SAAA,EAEAvY,KAAAqjG,OAIArjG,KAAA0iG,UAAA/V,IAIA94E,EAAAkxF,eAAA5oG,UAAA7B,OAAA8B,OAAAyX,EAAA8tF,SAAAxlG,WACA0X,EAAAkxF,eAAA5oG,UAAAE,YAAAwX,EAAAkxF,eAEAlxF,EAAAkxF,eAAA5oG,UAAAsc,KAAA,SAAAxV,GAWA,MATA4Q,GAAA8tF,SAAAxlG,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAuP,MAAAkJ,KAAAxV,EAAAsM,OACAvP,KAAAqC,IAAAY,EAAAZ,IAEArC,KAAAuY,SAAAtV,EAAAsV,SAEAvY,KAAAqjG,IAAApgG,EAAAogG,IAEArjG,MAYA6T,EAAAihF,QAAA,SAAAC,EAAAwL,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAF,EAAArsF,EAAA+vF,GAEAp6F,OAAAC,eAAAyF,KAAA,MAAqChG,MAAA6Z,EAAAmxF,mBAErChlG,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAA7G,KAAA,GACA6G,KAAAw0F,WAAA,GAEAx0F,KAAA+0F,MAAAh8F,SAAAg8F,IAAAlhF,EAAAihF,QAAAmQ,cACAjlG,KAAAohG,WAEAphG,KAAAugG,QAAAxnG,SAAAwnG,IAAA1sF,EAAAihF,QAAAoQ,gBAEAllG,KAAAm1F,MAAAp8F,SAAAo8F,IAAAthF,EAAA2/C,oBACAxzD,KAAAo1F,MAAAr8F,SAAAq8F,IAAAvhF,EAAA2/C,oBAEAxzD,KAAAixF,UAAAl4F,SAAAk4F,IAAAp9E,EAAAggD,aACA7zD,KAAAkxF,UAAAn4F,SAAAm4F,IAAAr9E,EAAAkgD,yBAEA/zD,KAAA00F,WAAA37F,SAAA27F,IAAA,EAEA10F,KAAAgxF,OAAAj4F,SAAAi4F,IAAAn9E,EAAAghD,WACA70D,KAAA2E,KAAA5L,SAAA4L,IAAAkP,EAAAmgD,iBAEAh0D,KAAAue,OAAA,GAAA1K,GAAA+6C,QAAA,KACA5uD,KAAAw6C,OAAA,GAAA3mC,GAAA+6C,QAAA,KAEA5uD,KAAAoxF,mBACApxF,KAAAmlG,oBACAnlG,KAAAolG,SACAplG,KAAAqlG,gBAAA,EAEArlG,KAAA6/C,QAAA,EACA7/C,KAAAslG,SAAA,MAIAzxF,EAAAihF,QAAAmQ,cAAAlsG,OACA8a,EAAAihF,QAAAoQ,gBAAArxF,EAAAo/C,UAEAp/C,EAAAihF,QAAA34F,WAEAE,YAAAwX,EAAAihF,QAEArP,gBAAAzrF,GAEAA,QAAAgG,KAAA6/C,WAIA2J,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAxV,GA0BA,MAxBAjD,MAAA+0F,MAAA9xF,EAAA8xF,MACA/0F,KAAAohG,QAAAn+F,EAAAm+F,QAAA1gF,MAAA,GAEA1gB,KAAAugG,QAAAt9F,EAAAs9F,QAEAvgG,KAAAm1F,MAAAlyF,EAAAkyF,MACAn1F,KAAAo1F,MAAAnyF,EAAAmyF,MAEAp1F,KAAAixF,UAAAhuF,EAAAguF,UACAjxF,KAAAkxF,UAAAjuF,EAAAiuF,UAEAlxF,KAAA00F,WAAAzxF,EAAAyxF,WAEA10F,KAAAgxF,OAAA/tF,EAAA+tF,OACAhxF,KAAA2E,KAAA1B,EAAA0B,KAEA3E,KAAAue,OAAA9F,KAAAxV,EAAAsb,QACAve,KAAAw6C,OAAA/hC,KAAAxV,EAAAu3C,QAEAx6C,KAAAoxF,gBAAAnuF,EAAAmuF,gBACApxF,KAAAmlG,iBAAAliG,EAAAkiG,iBACAnlG,KAAAolG,MAAAniG,EAAAmiG,MACAplG,KAAAqlG,gBAAApiG,EAAAoiG,gBAEArlG,MAIAykF,OAAA,SAAA5wC,GAQA,QAAA0xD,GAAAxQ,GAEA,GAAAC,EAgBA,OAdAj8F,UAAAg8F,EAAAyQ,UAEAxQ,EAAAD,GAIAC,EAAA18F,SAAAD,cAAA,UACA28F,EAAAvlF,MAAAslF,EAAAtlF,MACAulF,EAAAtlF,OAAAqlF,EAAArlF,OAEAslF,EAAAC,WAAA,MAAAC,UAAAH,EAAA,IAAAA,EAAAtlF,MAAAslF,EAAArlF,SAIAslF,EAAAvlF,MAAA,MAAAulF,EAAAtlF,OAAA,KAEAslF,EAAAwQ,UAAA,iBAIAxQ,EAAAwQ,UAAA,aA9BA,GAAAzsG,SAAA86C,EAAAmxC,SAAAhlF,KAAA27E,MAEA,MAAA9nC,GAAAmxC,SAAAhlF,KAAA27E,KAkCA,IAAAwJ,IACAP,UACA/kC,QAAA,IACAl7C,KAAA,UACAugF,UAAA,kBAGAvJ,KAAA37E,KAAA27E,KACAxiF,KAAA6G,KAAA7G,KAEAonG,QAAAvgG,KAAAugG,QAEA/lD,QAAAx6C,KAAAw6C,OAAAvxC,EAAAjJ,KAAAw6C,OAAA3xC,GACA0V,QAAAve,KAAAue,OAAAtV,EAAAjJ,KAAAue,OAAA1V,GACA4rF,MAAAz0F,KAAAm1F,MAAAn1F,KAAAo1F,OAEAlE,UAAAlxF,KAAAkxF,UACAD,UAAAjxF,KAAAixF,UACAyD,WAAA10F,KAAA00F,WAGA,IAAA37F,SAAAiH,KAAA+0F,MAAA,CAIA,GAAAA,GAAA/0F,KAAA+0F,KAEAh8F,UAAAg8F,EAAApZ,OAEAoZ,EAAApZ,KAAA9nE,EAAAmF,KAAAyiE,gBAIA1iF,SAAA86C,EAAAoxC,OAAA8P,EAAApZ,QAEA9nC,EAAAoxC,OAAA8P,EAAApZ,OACAA,KAAAoZ,EAAApZ,KACA3lE,IAAAuvF,EAAAxQ,KAKA5P,EAAA4P,QAAApZ,KAMA,MAFA9nC,GAAAmxC,SAAAhlF,KAAA27E,MAAAwJ,EAEAA,GAIA7rE,QAAA,WAEAtZ,KAAA8sD,eAAuBnoD,KAAA,aAIvB8gG,YAAA,SAAArc,GAEA,GAAAppF,KAAAugG,UAAA1sF,EAAAo/C,UAAA,CAKA,GAHAm2B,EAAAjxB,SAAAn4D,KAAAw6C,QACA4uC,EAAArzE,IAAA/V,KAAAue,QAEA6qE,EAAAngF,EAAA,GAAAmgF,EAAAngF,EAAA,EAEA,OAAAjJ,KAAAm1F,OAEA,IAAAthF,GAAA0/C,eAEA61B,EAAAngF,EAAAmgF,EAAAngF,EAAA+P,KAAA2tC,MAAAyiC,EAAAngF,EACA,MAEA,KAAA4K,GAAA2/C,oBAEA41B,EAAAngF,EAAAmgF,EAAAngF,EAAA,KACA,MAEA,KAAA4K,GAAA4/C,uBAEA,IAAAz6C,KAAAuqD,IAAAvqD,KAAA2tC,MAAAyiC,EAAAngF,GAAA,GAEAmgF,EAAAngF,EAAA+P,KAAAmmC,KAAAiqC,EAAAngF,GAAAmgF,EAAAngF,EAIAmgF,EAAAngF,EAAAmgF,EAAAngF,EAAA+P,KAAA2tC,MAAAyiC,EAAAngF,GASA,GAAAmgF,EAAAvgF,EAAA,GAAAugF,EAAAvgF,EAAA,EAEA,OAAA7I,KAAAo1F,OAEA,IAAAvhF,GAAA0/C,eAEA61B,EAAAvgF,EAAAugF,EAAAvgF,EAAAmQ,KAAA2tC,MAAAyiC,EAAAvgF,EACA,MAEA,KAAAgL,GAAA2/C,oBAEA41B,EAAAvgF,EAAAugF,EAAAvgF,EAAA,KACA,MAEA,KAAAgL,GAAA4/C,uBAEA,IAAAz6C,KAAAuqD,IAAAvqD,KAAA2tC,MAAAyiC,EAAAvgF,GAAA,GAEAugF,EAAAvgF,EAAAmQ,KAAAmmC,KAAAiqC,EAAAvgF,GAAAugF,EAAAvgF,EAIAugF,EAAAvgF,EAAAugF,EAAAvgF,EAAAmQ,KAAA2tC,MAAAyiC,EAAAvgF,GASA7I,KAAAolG,QAEAhc,EAAAvgF,EAAA,EAAAugF,EAAAvgF,MAQAgL,EAAAq7C,gBAAA/yD,UAAAyH,MAAAiQ,EAAAihF,QAAA34F,WAEA0X,EAAAmxF,eAAA,EAQAnxF,EAAA6xF,cAAA,SAAA1Q,EAAAuL,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAF,EAAArsF,EAAA+vF,GAEA7gF,EAAAihF,QAAAz9F,KAAA2I,KAAAg1F,EAAAuL,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAF,EAAArsF,EAAA+vF,GAEA10F,KAAAylF,gBAIA5xE,EAAA6xF,cAAAvpG,UAAA7B,OAAA8B,OAAAyX,EAAAihF,QAAA34F,WACA0X,EAAA6xF,cAAAvpG,UAAAE,YAAAwX,EAAA6xF,cAQA7xF,EAAA8xF,YAAA,SAAA1gB,EAAAsb,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAF,EAAArsF,EAAA+vF,GAEA6L,EAAAxnG,SAAAwnG,IAAA1sF,EAAAq/C,sBAEAr/C,EAAAihF,QAAAz9F,KAAA2I,KAAAilF,EAAAsb,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAF,EAAArsF,EAAA+vF,GAEA10F,KAAAilF,SACAjlF,KAAAolG,UAIAvxF,EAAA8xF,YAAAxpG,UAAA7B,OAAA8B,OAAAyX,EAAAihF,QAAA34F,WACA0X,EAAA8xF,YAAAxpG,UAAAE,YAAAwX,EAAA8xF,YAEA9xF,EAAA8xF,YAAAxpG,UAAAsc,KAAA,SAAAxV,GAMA,MAJA4Q,GAAAihF,QAAA34F,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAilF,OAAAhiF,EAAAgiF,OAEAjlF,MASA6T,EAAA0tF,kBAAA,SAAAH,EAAA3xF,EAAAC,EAAAshF,EAAArsF,EAAA47F,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAwD,GAEA7gF,EAAAihF,QAAAz9F,KAAA2I,KAAA,KAAAugG,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAF,EAAArsF,EAAA+vF,GAEA10F,KAAA+0F,OAAetlF,QAAAC,UACf1P,KAAAohG,UAKAphG,KAAAolG,SAKAplG,KAAAoxF,oBAIAv9E,EAAA0tF,kBAAAplG,UAAA7B,OAAA8B,OAAAyX,EAAAihF,QAAA34F,WACA0X,EAAA0tF,kBAAAplG,UAAAE,YAAAwX,EAAA0tF,kBAQA1tF,EAAAqtF,YAAA,SAAAnkF,EAAAtN,EAAAC,EAAAshF,EAAArsF,EAAA47F,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAwD,GAEA7gF,EAAAihF,QAAAz9F,KAAA2I,KAAA,KAAAugG,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAF,EAAArsF,EAAA+vF,GAEA10F,KAAA+0F,OAAeh4E,OAAAtN,QAAAC,UAEf1P,KAAAixF,UAAAl4F,SAAAk4F,IAAAp9E,EAAA6/C,cACA1zD,KAAAkxF,UAAAn4F,SAAAm4F,IAAAr9E,EAAA6/C,cAEA1zD,KAAAolG,SACAplG,KAAAoxF,oBAIAv9E,EAAAqtF,YAAA/kG,UAAA7B,OAAA8B,OAAAyX,EAAAihF,QAAA34F,WACA0X,EAAAqtF,YAAA/kG,UAAAE,YAAAwX,EAAAqtF,YAQArtF,EAAA+xF,aAAA,SAAAC,EAAAtF,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAF,EAAArsF,EAAA+vF,GAEA7gF,EAAAihF,QAAAz9F,KAAA2I,KAAA6lG,EAAAtF,EAAApL,EAAAC,EAAAnE,EAAAC,EAAAF,EAAArsF,EAAA+vF,GAEA10F,KAAAoxF,kBAEA,IAAA70E,GAAAvc,KAEA+Z,EAAA,WAEAD,sBAAAC,GAEA8rF,EAAAC,aAAAD,EAAAE,mBAEAxpF,EAAAkpE,gBAMA1rE,MAIAlG,EAAA+xF,aAAAzpG,UAAA7B,OAAA8B,OAAAyX,EAAAihF,QAAA34F,WACA0X,EAAA+xF,aAAAzpG,UAAAE,YAAAwX,EAAA+xF,aAQA/xF,EAAA6sF,MAAA,WAEA7sF,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,SAIAkP,EAAA6sF,MAAAvkG,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAA6sF,MAAAvkG,UAAAE,YAAAwX,EAAA6sF,MAOA7sF,EAAAotE,OAAA,SAAA1qE,EAAAd,GAEA5B,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,SAEA3E,KAAAuW,SAAAxd,SAAAwd,IAAA,GAAA1C,GAAA6L,SACA1f,KAAAyV,SAAA1c,SAAA0c,IAAA,GAAA5B,GAAAuwF,gBAAgF70F,MAAA,SAAAyJ,KAAAgkC,YAIhFnpC,EAAAotE,OAAA9kF,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAotE,OAAA9kF,UAAAE,YAAAwX,EAAAotE,OAEAptE,EAAAotE,OAAA9kF,UAAAslF,QAAA,WAEA,GAAAukB,GAAA,GAAAnyF,GAAAyzD,QACAuN,EAAA,GAAAhhE,GAAA6gE,GAEA,iBAAA4M,EAAAC,GAuBA,QAAA0kB,GAAAl7B,EAAAn5D,GAEA,GAAAs0F,GAAArxB,EAAAG,kBAAAjK,EAEA,IAAAm7B,EAAAC,EAAA,CAEA,GAAAC,GAAAvxB,EAAA1J,oBAAAJ,EACAq7B,GAAAx/B,aAAAzkD,EAAAulD,YAEA,IAAAryD,GAAAisE,EAAAzM,IAAAF,OAAA5O,WAAAqgC,EAEA,IAAA/wF,EAAAisE,EAAAlN,MAAA/+D,EAAAisE,EAAAjN,IAAA,MAEAkN,GAAA7gF,MAEA2U,WACAgxF,cAAArtF,KAAA+xC,KAAAm7C,GACAn7B,MAAAq7B,EAAA58C,QACA53C,QACA+M,KAAA,KACAwD,YAzCA,GAAAA,GAAAniB,KACAuW,EAAA4L,EAAA5L,SACA2qE,EAAAI,EAAAR,OAAAG,OAAAC,SAKA,IAHA8kB,EAAAv+B,WAAAznE,KAAA0nE,aACAmN,EAAAp8D,KAAA6oE,EAAAzM,KAAAjO,aAAAo/B,GAEA,OAAAzvF,EAAA4B,aAEA08D,EAAA1I,kBAAA51D,EAAA4B,kBAFA,CAUA,GAAAmuF,GAAAplB,IAAAlhF,KAAAwoD,MAAAv/C,EAAAjJ,KAAAwoD,MAAA3/C,EAAA7I,KAAAwoD,MAAAj+C,GAAA,GACA47F,EAAAG,IACAzwF,EAAA,GAAAhC,GAAA8L,OA8BA,IAAApJ,YAAA1C,GAAA2K,eAAA,CAEA,GAAA5M,GAAA2E,EAAA3E,MACAk7D,EAAAv2D,EAAAu2D,WACAC,EAAAD,EAAAj3D,SAAA8F,KAEA,WAAA/J,EAIA,OAFAq0E,GAAAr0E,EAAA+J,MAEA9hB,EAAA,EAAA2xE,EAAAya,EAAAnsF,OAAyCD,EAAA2xE,EAAQ3xE,IAAA,CAEjD,GAAA6O,GAAAu9E,EAAApsF,EAEAgc,GAAAyiD,UAAAyU,EAAA,EAAArkE,GAEAu9F,EAAApwF,EAAAnN,OAMA,QAAA7O,GAAA,EAAAuP,EAAA2jE,EAAAjzE,OAAA,EAA8CD,EAAAuP,EAAOvP,IAErDgc,EAAAyiD,UAAAyU,EAAA,EAAAlzE,GAEAosG,EAAApwF,EAAAhc,OAUA,QAFA4kB,GAAAlI,EAAAkI,SAEA5kB,EAAA,EAAAuP,EAAAqV,EAAA3kB,OAAwCD,EAAAuP,EAAOvP,IAE/CosG,EAAAxnF,EAAA5kB,WAUAga,EAAAotE,OAAA9kF,UAAAqtD,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAuW,SAAAvW,KAAAyV,UAAAgD,KAAAzY,OAIA6T,EAAAotE,OAAA9kF,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAmBA,OAhBA96C,UAAA86C,EAAAixC,WAAA9kF,KAAAuW,SAAAolE,QAEA9nC,EAAAixC,WAAA9kF,KAAAuW,SAAAolE,MAAA37E,KAAAuW,SAAAkuE,UAKA1rF,SAAA86C,EAAAkxC,UAAA/kF,KAAAyV,SAAAkmE,QAEA9nC,EAAAkxC,UAAA/kF,KAAAyV,SAAAkmE,MAAA37E,KAAAyV,SAAAgvE,UAIA1nE,EAAAoF,OAAA5L,SAAAvW,KAAAuW,SAAAolE,KACA5+D,EAAAoF,OAAA1M,SAAAzV,KAAAyV,SAAAkmE,KAEA5+D,GAMAlJ,EAAAutE,WAAA,SAAA7qE,EAAAd,GAGA,MADAjS,SAAAwmD,KAAA,sDACA,GAAAn2C,GAAAotE,OAAA1qE,EAAAd,IAIA5B,EAAA0yF,eAAA,SAAAhwF,EAAAd,GAGA,MADAjS,SAAAwmD,KAAA,0DACA,GAAAn2C,GAAAotE,OAAA1qE,EAAAd,IAUA5B,EAAAktE,KAAA,SAAAxqE,EAAAd,EAAAuqB,GAEA,WAAAA,GAEAx8B,QAAAwmD,KAAA,mGACA,GAAAn2C,GAAA2yF,aAAAjwF,EAAAd,KAIA5B,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,OAEA3E,KAAAuW,SAAAxd,SAAAwd,IAAA,GAAA1C,GAAA6L,cACA1f,KAAAyV,SAAA1c,SAAA0c,IAAA,GAAA5B,GAAAovF,mBAAmF1zF,MAAA,SAAAyJ,KAAAgkC,cAInFnpC,EAAAktE,KAAA5kF,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAktE,KAAA5kF,UAAAE,YAAAwX,EAAAktE,KAEAltE,EAAAktE,KAAA5kF,UAAAslF,QAAA,WAEA,GAAAukB,GAAA,GAAAnyF,GAAAyzD,QACAuN,EAAA,GAAAhhE,GAAA6gE,IACAuB,EAAA,GAAApiE,GAAAo5D,MAEA,iBAAAqU,EAAAC,GAEA,GAAAwK,GAAAzK,EAAAI,cACA+kB,EAAA1a,IAEAx1E,EAAAvW,KAAAuW,QASA,IAPA,OAAAA,EAAA6jE,gBAAA7jE,EAAA0B,wBAIAg+D,EAAAx9D,KAAAlC,EAAA6jE,gBACAnE,EAAArP,aAAA5mE,KAAA0nE,aAEA4Z,EAAAzM,IAAAmB,qBAAAC,QAAA,CAMA+vB,EAAAv+B,WAAAznE,KAAA0nE,aACAmN,EAAAp8D,KAAA6oE,EAAAzM,KAAAjO,aAAAo/B,EAEA,IAAAU,GAAA,GAAA7yF,GAAA8L,QACAgnF,EAAA,GAAA9yF,GAAA8L,QACAinF,EAAA,GAAA/yF,GAAA8L,QACAknF,EAAA,GAAAhzF,GAAA8L,QACAmnF,EAAA9mG,eAAA6T,GAAA2yF,aAAA,GAEA,IAAAjwF,YAAA1C,GAAA2K,eAAA,CAEA,GAAA5M,GAAA2E,EAAA3E,MACAk7D,EAAAv2D,EAAAu2D,UAEA,WAAAl7D,EAKA,OAHAq0E,GAAAr0E,EAAA+J,MACAoxD,EAAAD,EAAAj3D,SAAA8F,MAEA9hB,EAAA,EAAAuP,EAAA68E,EAAAnsF,OAAA,EAA4CD,EAAAuP,EAAOvP,GAAAitG,EAAA,CAEnD,GAAAp+F,GAAAu9E,EAAApsF,GACAkP,EAAAk9E,EAAApsF,EAAA,EAEA6sG,GAAApuC,UAAAyU,EAAA,EAAArkE,GACAi+F,EAAAruC,UAAAyU,EAAA,EAAAhkE,EAEA,IAAAg+F,GAAAlyB,EAAAI,oBAAAyxB,EAAAC,EAAAE,EAAAD,EAEA,MAAAG,EAAAN,GAAA,CAEAI,EAAAjgC,aAAA5mE,KAAA0nE,YAEA,IAAAryD,GAAAisE,EAAAzM,IAAAF,OAAA5O,WAAA8gC,EAEAxxF,GAAAisE,EAAAlN,MAAA/+D,EAAAisE,EAAAjN,KAEAkN,EAAA7gF,MAEA2U,WAGA01D,MAAA67B,EAAAp9C,QAAAod,aAAA5mE,KAAA0nE,aACA91D,MAAA/X,EACA8kB,KAAA,KACAqoF,UAAA,KACA7kF,OAAAniB,YAUA,QAFA+sE,GAAAD,EAAAj3D,SAAA8F,MAEA9hB,EAAA,EAAAuP,EAAA2jE,EAAAjzE,OAAA,IAAkDD,EAAAuP,EAAOvP,GAAAitG,EAAA,CAEzDJ,EAAApuC,UAAAyU,EAAA,EAAAlzE,GACA8sG,EAAAruC,UAAAyU,EAAA,EAAAlzE,EAAA,EAEA,IAAAktG,GAAAlyB,EAAAI,oBAAAyxB,EAAAC,EAAAE,EAAAD,EAEA,MAAAG,EAAAN,GAAA,CAEAI,EAAAjgC,aAAA5mE,KAAA0nE,YAEA,IAAAryD,GAAAisE,EAAAzM,IAAAF,OAAA5O,WAAA8gC,EAEAxxF,GAAAisE,EAAAlN,MAAA/+D,EAAAisE,EAAAjN,KAEAkN,EAAA7gF,MAEA2U,WAGA01D,MAAA67B,EAAAp9C,QAAAod,aAAA5mE,KAAA0nE,aACA91D,MAAA/X,EACA8kB,KAAA,KACAqoF,UAAA,KACA7kF,OAAAniB,aAQG,IAAAuW,YAAA1C,GAAA6L,SAKH,OAHAjB,GAAAlI,EAAAkI,SACAwoF,EAAAxoF,EAAA3kB,OAEAD,EAAA,EAAmBA,EAAAotG,EAAA,EAAoBptG,GAAAitG,EAAA,CAEvC,GAAAC,GAAAlyB,EAAAI,oBAAAx2D,EAAA5kB,GAAA4kB,EAAA5kB,EAAA,GAAAgtG,EAAAD,EAEA,MAAAG,EAAAN,GAAA,CAEAI,EAAAjgC,aAAA5mE,KAAA0nE,YAEA,IAAAryD,GAAAisE,EAAAzM,IAAAF,OAAA5O,WAAA8gC,EAEAxxF,GAAAisE,EAAAlN,MAAA/+D,EAAAisE,EAAAjN,KAEAkN,EAAA7gF,MAEA2U,WAGA01D,MAAA67B,EAAAp9C,QAAAod,aAAA5mE,KAAA0nE,aACA91D,MAAA/X,EACA8kB,KAAA,KACAqoF,UAAA,KACA7kF,OAAAniB,cAYA6T,EAAAktE,KAAA5kF,UAAAqtD,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAuW,SAAAvW,KAAAyV,UAAAgD,KAAAzY,OAIA6T,EAAAktE,KAAA5kF,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAmBA,OAhBA96C,UAAA86C,EAAAixC,WAAA9kF,KAAAuW,SAAAolE,QAEA9nC,EAAAixC,WAAA9kF,KAAAuW,SAAAolE,MAAA37E,KAAAuW,SAAAkuE,UAKA1rF,SAAA86C,EAAAkxC,UAAA/kF,KAAAyV,SAAAkmE,QAEA9nC,EAAAkxC,UAAA/kF,KAAAyV,SAAAkmE,MAAA37E,KAAAyV,SAAAgvE,UAIA1nE,EAAAoF,OAAA5L,SAAAvW,KAAAuW,SAAAolE,KACA5+D,EAAAoF,OAAA1M,SAAAzV,KAAAyV,SAAAkmE,KAEA5+D,GAMAlJ,EAAAqzF,UAAA,EACArzF,EAAAszF,WAAA,EAQAtzF,EAAA2yF,aAAA,SAAAjwF,EAAAd,GAEA5B,EAAAktE,KAAA1pF,KAAA2I,KAAAuW,EAAAd,GAEAzV,KAAA2E,KAAA,gBAIAkP,EAAA2yF,aAAArqG,UAAA7B,OAAA8B,OAAAyX,EAAAktE,KAAA5kF,WACA0X,EAAA2yF,aAAArqG,UAAAE,YAAAwX,EAAA2yF,aAWA3yF,EAAAkE,KAAA,SAAAxB,EAAAd,GAEA5B,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,OAEA3E,KAAAuW,SAAAxd,SAAAwd,IAAA,GAAA1C,GAAA6L,SACA1f,KAAAyV,SAAA1c,SAAA0c,IAAA,GAAA5B,GAAA4vF,mBAAmFl0F,MAAA,SAAAyJ,KAAAgkC,WAEnFh9C,KAAAonG,sBAIAvzF,EAAAkE,KAAA5b,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAkE,KAAA5b,UAAAE,YAAAwX,EAAAkE,KAEAlE,EAAAkE,KAAA5b,UAAAirG,mBAAA,WAEA,GAAAruG,SAAAiH,KAAAuW,SAAA4xE,cAAAnoF,KAAAuW,SAAA4xE,aAAAruF,OAAA;AAEAkG,KAAAqnG,mBACArnG,KAAAsnG,yBACAtnG,KAAAunG,wBAEA,QAAAjwG,GAAA,EAAAkwG,EAAAxnG,KAAAuW,SAAA4xE,aAAAruF,OAA0DxC,EAAAkwG,EAAQlwG,IAElE0I,KAAAsnG,sBAAA5mG,KAAA,GACAV,KAAAunG,sBAAAvnG,KAAAuW,SAAA4xE,aAAA7wF,GAAA6B,MAAA7B,IAQAuc,EAAAkE,KAAA5b,UAAAsrG,0BAAA,SAAAtuG,GAEA,MAAAJ,UAAAiH,KAAAunG,sBAAApuG,GAEA6G,KAAAunG,sBAAApuG,IAIAqK,QAAAwmD,KAAA,sDAAA7wD,EAAA,iCAEA,IAKA0a,EAAAkE,KAAA5b,UAAAslF,QAAA,WAuBA,QAAAimB,GAAA38B,EAAA1vE,EAAAC,EAAAq9E,EAAAgvB,EAAAre,EAAAse,GAUA,MARA/zF,GAAAmrE,SAAAE,mBAAAnU,EAAA1vE,EAAAC,EAAAq9E,EAAAkvB,GAEAF,EAAAx+C,eAAA0+C,EAAA5+F,GACAqgF,EAAAngC,eAAA0+C,EAAAh/F,GACA++F,EAAAz+C,eAAA0+C,EAAAt9F,GAEAo9F,EAAA5xF,IAAAuzE,GAAAvzE,IAAA6xF,GAEAD,EAAAn+C,QA/BA,GAAAw8C,GAAA,GAAAnyF,GAAAyzD,QACAuN,EAAA,GAAAhhE,GAAA6gE,IACAuB,EAAA,GAAApiE,GAAAo5D,OAEA6c,EAAA,GAAAj2E,GAAA8L,QACAoqE,EAAA,GAAAl2E,GAAA8L,QACAqqE,EAAA,GAAAn2E,GAAA8L,QAEAmoF,EAAA,GAAAj0F,GAAA8L,QACAooF,EAAA,GAAAl0F,GAAA8L,QACAqoF,EAAA,GAAAn0F,GAAA8L,QAEAsoF,EAAA,GAAAp0F,GAAA+6C,QACAs5C,EAAA,GAAAr0F,GAAA+6C,QACAu5C,EAAA,GAAAt0F,GAAA+6C,QAEAi5C,EAAA,GAAAh0F,GAAA8L,QAEAyoF,EAAA,GAAAv0F,GAAA8L,QACA0oF,EAAA,GAAAx0F,GAAA8L,OAgBA,iBAAA2hE,EAAAC,GAEA,GAAAhrE,GAAAvW,KAAAuW,SACAd,EAAAzV,KAAAyV,QAEA,IAAA1c,SAAA0c,IAIA,OAAAc,EAAA6jE,gBAAA7jE,EAAA0B,wBAEAg+D,EAAAx9D,KAAAlC,EAAA6jE,gBACAnE,EAAArP,aAAA5mE,KAAA0nE,aAEA4Z,EAAAzM,IAAAmB,qBAAAC,UAQA+vB,EAAAv+B,WAAAznE,KAAA0nE,aACAmN,EAAAp8D,KAAA6oE,EAAAzM,KAAAjO,aAAAo/B,GAEA,OAAAzvF,EAAA4B,aAEA08D,EAAA1I,kBAAA51D,EAAA4B,oBAFA,CAUA,GAAAzP,GAAAK,EAAAxR,CAEA,IAAAgf,YAAA1C,GAAA2K,eAAA,CAEA,GAAA5M,GAAA2E,EAAA3E,MACAk7D,EAAAv2D,EAAAu2D,UAEA,WAAAl7D,EAKA,OAHAq0E,GAAAr0E,EAAA+J,MACAoxD,EAAAD,EAAAj3D,SAAA8F,MAEA9hB,EAAA,EAAAuP,EAAA68E,EAAAnsF,OAAwCD,EAAAuP,EAAOvP,GAAA,GAU/C,GARA6O,EAAAu9E,EAAApsF,GACAkP,EAAAk9E,EAAApsF,EAAA,GACAtC,EAAA0uF,EAAApsF,EAAA,GAEAiwF,EAAAxxB,UAAAyU,EAAA,EAAArkE,GACAqhF,EAAAzxB,UAAAyU,EAAA,EAAAhkE,GACAihF,EAAA1xB,UAAAyU,EAAA,EAAAx1E,GAEAke,EAAA6B,OAAAzD,EAAA88C,UAEA,UAAAkkB,EAAA6C,kBAAAsS,EAAAD,EAAAD,KAAAse,GAAA,aAIA,WAAAvzB,EAAA6C,kBAAAoS,EAAAC,EAAAC,EAAAv0E,EAAA6B,OAAAzD,EAAA0D,WAAA6wF,GAAA,QAIAC,GAAA5vF,KAAA2vF,GACAC,EAAAzhC,aAAA5mE,KAAA0nE,YAEA,IAAAryD,GAAAisE,EAAAzM,IAAAF,OAAA5O,WAAAsiC,EAEA,MAAAhzF,EAAAisE,EAAAlN,MAAA/+D,EAAAisE,EAAAjN,KAAA,CAEA,GAAA+U,EAEA,IAAArwF,SAAA+zE,EAAAsc,GAAA,CAEA,GAAAD,GAAArc,EAAAsc,GAAAztE,KACAssF,GAAA3vC,UAAA6wB,EAAA,EAAAzgF,GACAw/F,EAAA5vC,UAAA6wB,EAAA,EAAApgF,GACAo/F,EAAA7vC,UAAA6wB,EAAA,EAAA5xF,GACA6xF,EAAAse,EAAAU,EAAAte,EAAAC,EAAAC,EAAAie,EAAAC,EAAAC,GAIA5mB,EAAA7gF,MAEA2U,WACA01D,MAAAs9B,EAAA7+C,QACA4/B,KACAzqE,KAAA,GAAA9K,GAAA+L,MAAAlX,EAAAK,EAAAxR,EAAAsc,EAAAmrE,SAAA1/D,OAAAwqE,EAAAC,EAAAC,IACAgd,UAAAhuF,KAAA2tC,MAAA9sD,EAAA,GACAsoB,OAAAniB,YAUA,QAFA+sE,GAAAD,EAAAj3D,SAAA8F,MAEA9hB,EAAA,EAAAuP,EAAA2jE,EAAAjzE,OAA0CD,EAAAuP,EAAOvP,GAAA,GAMjD,GAJAiwF,EAAAxxB,UAAAyU,EAAAlzE,GACAkwF,EAAAzxB,UAAAyU,EAAAlzE,EAAA,GACAmwF,EAAA1xB,UAAAyU,EAAAlzE,EAAA,GAEA4b,EAAA6B,OAAAzD,EAAA88C,UAEA,UAAAkkB,EAAA6C,kBAAAsS,EAAAD,EAAAD,KAAAse,GAAA,aAIA,WAAAvzB,EAAA6C,kBAAAoS,EAAAC,EAAAC,EAAAv0E,EAAA6B,OAAAzD,EAAA0D,WAAA6wF,GAAA,QAIAC,GAAA5vF,KAAA2vF,GACAC,EAAAzhC,aAAA5mE,KAAA0nE,YAEA,IAAAryD,GAAAisE,EAAAzM,IAAAF,OAAA5O,WAAAsiC,EAEA,MAAAhzF,EAAAisE,EAAAlN,MAAA/+D,EAAAisE,EAAAjN,KAAA,CAEA,GAAA+U,EAEA,IAAArwF,SAAA+zE,EAAAsc,GAAA,CAEA,GAAAD,GAAArc,EAAAsc,GAAAztE,KACAssF,GAAA3vC,UAAA6wB,EAAAtvF,GACAquG,EAAA5vC,UAAA6wB,EAAAtvF,EAAA,GACAsuG,EAAA7vC,UAAA6wB,EAAAtvF,EAAA,GACAuvF,EAAAse,EAAAU,EAAAte,EAAAC,EAAAC,EAAAie,EAAAC,EAAAC,GAIAz/F,EAAA7O,EAAA,EACAkP,EAAAL,EAAA,EACAnR,EAAAmR,EAAA,EAEA64E,EAAA7gF,MAEA2U,WACA01D,MAAAs9B,EAAA7+C,QACA4/B,KACAzqE,KAAA,GAAA9K,GAAA+L,MAAAlX,EAAAK,EAAAxR,EAAAsc,EAAAmrE,SAAA1/D,OAAAwqE,EAAAC,EAAAC,IACAp4E,MAAAlJ,EACAyZ,OAAAniB,aAQG,IAAAuW,YAAA1C,GAAA6L,SAQH,OANA4oF,GAAA7yF,YAAA5B,GAAAswF,iBACApf,EAAAujB,OAAA7yF,EAAAsvE,UAAA,KAEAtmE,EAAAlI,EAAAkI,SACAN,EAAA5H,EAAA4H,MAEAzU,EAAA,EAAAmgF,EAAA1rE,EAAArkB,OAAsC4P,EAAAmgF,EAAQngF,IAAA,CAE9C,GAAAiV,GAAAR,EAAAzU,GACA6+F,EAAAD,OAAAvjB,EAAApmE,EAAAymE,eAAA3vE,CAEA,IAAA1c,SAAAwvG,EAAA,CAMA,GAJA7/F,EAAA+V,EAAAE,EAAAjW,GACAK,EAAA0V,EAAAE,EAAA5V,GACAxR,EAAAknB,EAAAE,EAAApnB,GAEAgxG,EAAApgB,kBAAA,CAEA,GAAAA,GAAA5xE,EAAA4xE,aACAqgB,EAAAxoG,KAAAsnG,qBAEAxd,GAAA59E,IAAA,OACA69E,EAAA79E,IAAA,OACA89E,EAAA99E,IAAA,MAEA,QAAA3C,GAAA,EAAAk/F,EAAAtgB,EAAAruF,OAA+CyP,EAAAk/F,EAAQl/F,IAAA,CAEvD,GAAAm/F,GAAAF,EAAAj/F,EAEA,QAAAm/F,EAAA,CAEA,GAAAC,GAAAxgB,EAAA5+E,GAAAkV,QAEAqrE,GAAA5kB,gBAAA4iC,EAAA56C,WAAAy7C,EAAAhqF,EAAAjW,MAAAggG,GACA3e,EAAA7kB,gBAAA6iC,EAAA76C,WAAAy7C,EAAAhqF,EAAA5V,MAAA2/F,GACA1e,EAAA9kB,gBAAA8iC,EAAA96C,WAAAy7C,EAAAhqF,EAAApnB,MAAAmxG,IAIA5e,EAAA/zE,IAAArN,GACAqhF,EAAAh0E,IAAAhN,GACAihF,EAAAj0E,IAAAxe,GAEAmR,EAAAohF,EACA/gF,EAAAghF,EACAxyF,EAAAyyF,EAIA,GAAAue,EAAAjxF,OAAAzD,EAAA88C,UAEA,UAAAkkB,EAAA6C,kBAAAngF,EAAAwR,EAAAL,KAAA0/F,GAAA,aAIA,WAAAvzB,EAAA6C,kBAAAhvE,EAAAK,EAAAxR,EAAAgxG,EAAAjxF,OAAAzD,EAAA0D,WAAA6wF,GAAA,QAIAC,GAAA5vF,KAAA2vF,GACAC,EAAAzhC,aAAA5mE,KAAA0nE,YAEA,IAAAryD,GAAAisE,EAAAzM,IAAAF,OAAA5O,WAAAsiC,EAEA,MAAAhzF,EAAAisE,EAAAlN,MAAA/+D,EAAAisE,EAAAjN,KAAA,CAEA,GAAA+U,EAEA,IAAA7yE,EAAA2xE,cAAA,GAAApuF,OAAA,GAEA,GAAAqvF,GAAA5yE,EAAA2xE,cAAA,GAAAx+E,EACAu+F,GAAAxvF,KAAA0wE,EAAA,IACA+e,EAAAzvF,KAAA0wE,EAAA,IACAgf,EAAA1vF,KAAA0wE,EAAA,IACAC,EAAAse,EAAAU,EAAA1/F,EAAAK,EAAAxR,EAAA0wG,EAAAC,EAAAC,GAIA5mB,EAAA7gF,MAEA2U,WACA01D,MAAAs9B,EAAA7+C,QACA4/B,KACAzqE,OACAqoF,UAAAt9F,EACAyY,OAAAniB,eAYA6T,EAAAkE,KAAA5b,UAAAqtD,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAuW,SAAAvW,KAAAyV,UAAAgD,KAAAzY,OAIA6T,EAAAkE,KAAA5b,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAmBA,OAhBA96C,UAAA86C,EAAAixC,WAAA9kF,KAAAuW,SAAAolE,QAEA9nC,EAAAixC,WAAA9kF,KAAAuW,SAAAolE,MAAA37E,KAAAuW,SAAAkuE,OAAA5wC,IAKA96C,SAAA86C,EAAAkxC,UAAA/kF,KAAAyV,SAAAkmE,QAEA9nC,EAAAkxC,UAAA/kF,KAAAyV,SAAAkmE,MAAA37E,KAAAyV,SAAAgvE,OAAA5wC,IAIA92B,EAAAoF,OAAA5L,SAAAvW,KAAAuW,SAAAolE,KACA5+D,EAAAoF,OAAA1M,SAAAzV,KAAAyV,SAAAkmE,KAEA5+D,GAYAlJ,EAAA+0F,KAAA,SAAAC,GAEAh1F,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,OAEA3E,KAAA6oG,QAIAh1F,EAAA+0F,KAAAzsG,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAA+0F,KAAAzsG,UAAAE,YAAAwX,EAAA+0F,KAEA/0F,EAAA+0F,KAAAzsG,UAAAsc,KAAA,SAAAxV,GAMA,MAJA4Q,GAAAkuE,SAAA5lF,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAA6oG,KAAA5lG,EAAA4lG,KAEA7oG,MAaA6T,EAAAi1F,SAAA,SAAA3N,EAAA4N,EAAAC,GAcA,GAZAhpG,KAAAgpG,iBAAAjwG,SAAAiwG,KAEAhpG,KAAAipG,eAAA,GAAAp1F,GAAAyzD,QAIA6zB,QAEAn7F,KAAAm7F,QAAAz6E,MAAA,GAIA1gB,KAAAgpG,iBAAA,CAUA,GAAAhgE,GAAAhwB,KAAA+xC,KAAA,EAAA/qD,KAAAm7F,MAAArhG,OACAkvC,GAAAn1B,EAAAmF,KAAAgkE,eAAAhkE,KAAAmmC,KAAAnW,IACAA,EAAAhwB,KAAAZ,IAAA4wB,EAAA,GAEAhpC,KAAAkpG,iBAAAlgE,EACAhpC,KAAAmpG,kBAAAngE,EAEAhpC,KAAAopG,aAAA,GAAAhrF,cAAApe,KAAAkpG,iBAAAlpG,KAAAmpG,kBAAA,GACAnpG,KAAAqpG,YAAA,GAAAx1F,GAAAqtF,YAAAlhG,KAAAopG,aAAAppG,KAAAkpG,iBAAAlpG,KAAAmpG,kBAAAt1F,EAAAghD,WAAAhhD,EAAAygD,eAIAt0D,MAAAopG,aAAA,GAAAhrF,cAAA,GAAApe,KAAAm7F,MAAArhG,OAMA,IAAAf,SAAAgwG,EAEA/oG,KAAAspG,wBAIA,IAAAtpG,KAAAm7F,MAAArhG,SAAAivG,EAAAjvG,OAEAkG,KAAA+oG,eAAAroF,MAAA,OAEG,CAEHld,QAAAwmD,KAAA,mDAEAhqD,KAAA+oG,eAEA,QAAAhgG,GAAA,EAAAwgG,EAAAvpG,KAAAm7F,MAAArhG,OAA2CiP,EAAAwgG,EAAQxgG,IAEnD/I,KAAA+oG,aAAAroG,KAAA,GAAAmT,GAAAyzD,WAUAzzD,EAAAi1F,SAAA3sG,UAAAmtG,kBAAA,WAEAtpG,KAAA+oG,eAEA,QAAAhgG,GAAA,EAAAwgG,EAAAvpG,KAAAm7F,MAAArhG,OAAyCiP,EAAAwgG,EAAQxgG,IAAA,CAEjD,GAAA2hD,GAAA,GAAA72C,GAAAyzD,OAEAtnE,MAAAm7F,MAAApyF,IAEA2hD,EAAA+c,WAAAznE,KAAAm7F,MAAApyF,GAAA2+D,aAIA1nE,KAAA+oG,aAAAroG,KAAAgqD,KAMA72C,EAAAi1F,SAAA3sG,UAAAqtG,KAAA,WAMA,OAJAC,GAIA1gG,EAAA,EAAAwgG,EAAAvpG,KAAAm7F,MAAArhG,OAAyCiP,EAAAwgG,EAAQxgG,IAEjD0gG,EAAAzpG,KAAAm7F,MAAApyF,GAEA0gG,GAEAA,EAAA/hC,YAAAD,WAAAznE,KAAA+oG,aAAAhgG,GAQA,QAAAA,GAAA,EAAAwgG,EAAAvpG,KAAAm7F,MAAArhG,OAAyCiP,EAAAwgG,EAAQxgG,IAEjD0gG,EAAAzpG,KAAAm7F,MAAApyF,GAEA0gG,IAEAA,EAAAxnB,QAEAwnB,EAAAxgD,OAAAwe,WAAAgiC,EAAAxnB,OAAAva,aACA+hC,EAAAxgD,OAAAkP,SAAAsxC,EAAA/hC,cAIA+hC,EAAAxgD,OAAAxwC,KAAAgxF,EAAA/hC,aAIA+hC,EAAAxgD,OAAA8qB,UAAA01B,EAAA5zF,SAAA4zF,EAAAp+C,WAAAo+C,EAAAjhD,SAQA30C,EAAAi1F,SAAA3sG,UAAA4d,OAAA,WAEA,GAAA2vF,GAAA,GAAA71F,GAAAyzD,OAEA,mBAIA,OAAAv+D,GAAA,EAAAwgG,EAAAvpG,KAAAm7F,MAAArhG,OAA0CiP,EAAAwgG,EAAQxgG,IAAA,CAIlD,GAAAkgD,GAAAjpD,KAAAm7F,MAAApyF,GAAA/I,KAAAm7F,MAAApyF,GAAA2+D,YAAA1nE,KAAAipG,cAEAS,GAAAniC,iBAAAte,EAAAjpD,KAAA+oG,aAAAhgG,IACA2gG,EAAA/6B,qBAAA3uE,KAAAopG,aAAA,GAAArgG,GAIA/I,KAAAgpG,mBAEAhpG,KAAAqpG,YAAA5jB,oBAQA5xE,EAAAi1F,SAAA3sG,UAAAqtD,MAAA,WAEA,UAAA31C,GAAAi1F,SAAA9oG,KAAAm7F,MAAAn7F,KAAA+oG,aAAA/oG,KAAAgpG,mBAYAn1F,EAAA81F,YAAA,SAAApzF,EAAAd,EAAAuzF,GAEAn1F,EAAAkE,KAAA1gB,KAAA2I,KAAAuW,EAAAd,GAEAzV,KAAA2E,KAAA,cAEA3E,KAAA4pG,SAAA,WACA5pG,KAAA6pG,WAAA,GAAAh2F,GAAAyzD,QACAtnE,KAAA8pG,kBAAA,GAAAj2F,GAAAyzD,OAOA,IAAA6zB,KAEA,IAAAn7F,KAAAuW,UAAAxd,SAAAiH,KAAAuW,SAAA4kF,MAAA,CAIA,OAFAsO,GAAAM,EAEAhhG,EAAA,EAAAwgG,EAAAvpG,KAAAuW,SAAA4kF,MAAArhG,OAAmDiP,EAAAwgG,IAAQxgG,EAE3DghG,EAAA/pG,KAAAuW,SAAA4kF,MAAApyF,GAEA0gG,EAAA,GAAA51F,GAAA+0F,KAAA5oG,MACAm7F,EAAAz6F,KAAA+oG,GAEAA,EAAAtwG,KAAA4wG,EAAA5wG,KACAswG,EAAA5zF,SAAAyiD,UAAAyxC,EAAA5lD,KACAslD,EAAAp+C,WAAAiN,UAAAyxC,EAAAC,MACAjxG,SAAAgxG,EAAAE,KAAAR,EAAAjhD,MAAA8P,UAAAyxC,EAAAE,IAIA,QAAAlhG,GAAA,EAAAwgG,EAAAvpG,KAAAuW,SAAA4kF,MAAArhG,OAAmDiP,EAAAwgG,IAAQxgG,EAE3DghG,EAAA/pG,KAAAuW,SAAA4kF,MAAApyF,GAEAghG,EAAA9nB,YAEAkZ,EAAA4O,EAAA9nB,QAAAlsE,IAAAolF,EAAApyF,IAIA/I,KAAA+V,IAAAolF,EAAApyF,IAQA/I,KAAAkqG,uBAEAlqG,KAAA4sE,sBACA5sE,KAAA2D,KAAA,GAAAkQ,GAAAi1F,SAAA3N,EAAApiG,OAAAiwG,GAAAhpG,KAAA0nE,cAKA7zD,EAAA81F,YAAAxtG,UAAA7B,OAAA8B,OAAAyX,EAAAkE,KAAA5b,WACA0X,EAAA81F,YAAAxtG,UAAAE,YAAAwX,EAAA81F,YAEA91F,EAAA81F,YAAAxtG,UAAAwH,KAAA,SAAAwmG,EAAAN,GAEA7pG,KAAAmqG,WAEApxG,SAAA8wG,IAEA7pG,KAAA4sE,sBAEA5sE,KAAAmqG,SAAAb,oBAEAO,EAAA7pG,KAAA0nE,aAIA1nE,KAAA6pG,WAAApxF,KAAAoxF,GACA7pG,KAAA8pG,kBAAAriC,WAAAoiC,IAIAh2F,EAAA81F,YAAAxtG,UAAAqtG,KAAA,WAEAxpG,KAAAmqG,SAAAX,QAIA31F,EAAA81F,YAAAxtG,UAAA+tG,qBAAA,WAEA,GAAAlqG,KAAAuW,mBAAA1C,GAAA6L,SAEA,OAAA7lB,GAAA,EAAkBA,EAAAmG,KAAAuW,SAAAgyE,YAAAzuF,OAAsCD,IAAA,CAExD,GAAAuwG,GAAApqG,KAAAuW,SAAA+xE,YAAAzuF,GAEA2uD,EAAA,EAAA4hD,EAAAtkC,iBAEAtd,KAAAtnC,IAEAkpF,EAAAjhD,eAAAX,GAIA4hD,EAAAl+F,IAAA,KAcA2H,EAAA81F,YAAAxtG,UAAAywE,kBAAA,SAAA4X,GAEA3wE,EAAAkE,KAAA5b,UAAAywE,kBAAAv1E,KAAA2I,SAEA,aAAAA,KAAA4pG,SAEA5pG,KAAA8pG,kBAAAriC,WAAAznE,KAAA0nE,aAEE,aAAA1nE,KAAA4pG,SAEF5pG,KAAA8pG,kBAAAriC,WAAAznE,KAAA6pG,YAIArmG,QAAAwmD,KAAA,4CAAAhqD,KAAA4pG,WAMA/1F,EAAA81F,YAAAxtG,UAAAqtD,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAuW,SAAAvW,KAAAyV,SAAAzV,KAAAgpG,kBAAAvwF,KAAAzY,OAUA6T,EAAAw2F,cAAA,SAAA9zF,EAAAd,GAEA5B,EAAAkE,KAAA1gB,KAAA2I,KAAAuW,EAAAd,GAEAzV,KAAA2E,KAAA,gBAIA3E,KAAAsqG,SAAA,IACAtqG,KAAAuqG,gBACAvqG,KAAAw8C,KAAA,EAIAx8C,KAAAwqG,aAAA,EACAxqG,KAAAyqG,gBAAA,EAEAzqG,KAAA40E,UAAA,EACA50E,KAAA0qG,sBAEA1qG,KAAA2qG,cAAA,EAAAp0F,EAAA4xE,aAAAruF,OAAA,IAIA+Z,EAAAw2F,cAAAluG,UAAA7B,OAAA8B,OAAAyX,EAAAkE,KAAA5b,WACA0X,EAAAw2F,cAAAluG,UAAAE,YAAAwX,EAAAw2F,cAEAx2F,EAAAw2F,cAAAluG,UAAAwuG,cAAA,SAAA/rF,EAAAuB,GAEAngB,KAAA4qG,cAAAhsF,EACA5e,KAAA6qG,YAAA1qF,EAEAngB,KAAAlG,OAAAkG,KAAA6qG,YAAA7qG,KAAA4qG,cAAA,GAIA/2F,EAAAw2F,cAAAluG,UAAA2uG,oBAAA,WAEA9qG,KAAA40E,UAAA,EACA50E,KAAA0qG,uBAIA72F,EAAAw2F,cAAAluG,UAAA4uG,qBAAA,WAEA/qG,KAAA40E,aACA50E,KAAA0qG,uBAIA72F,EAAAw2F,cAAAluG,UAAA6uG,gBAAA,WAEA,GAAAz0F,GAAAvW,KAAAuW,QAEAA,GAAA6kF,aAAA7kF,EAAA6kF,cAMA,QAJA6P,GAAA7P,EAAA7kF,EAAA6kF,WAEA8P,EAAA,kBAEArxG,EAAA,EAAA2xE,EAAAj1D,EAAA4xE,aAAAruF,OAAoDD,EAAA2xE,EAAQ3xE,IAAA,CAE5D,GAAAsxG,GAAA50F,EAAA4xE,aAAAtuF,GACAm6F,EAAAmX,EAAAhyG,KAAAiC,MAAA8vG,EAEA,IAAAlX,KAAAl6F,OAAA,GAEA,GAAAsxG,GAAApX,EAAA,EAEAoH,GAAAgQ,KAAAhQ,EAAAgQ,IAAuDxsF,MAAAsC,IAAAf,MAAAe,MAEvD,IAAAqzB,GAAA6mD,EAAAgQ,EAEAvxG,GAAA06C,EAAA31B,QAAA21B,EAAA31B,MAAA/kB,GACAA,EAAA06C,EAAAp0B,MAAAo0B,EAAAp0B,IAAAtmB,GAEAoxG,MAAAG,IAMA70F,EAAA00F,iBAIAp3F,GAAAw2F,cAAAluG,UAAAkvG,kBAAA,SAAAD,EAAAxsF,EAAAuB,GAEAngB,KAAAuW,SAAA6kF,aAAAp7F,KAAAuW,SAAA6kF,eAEAp7F,KAAAuW,SAAA6kF,WAAAgQ,IAAsCxsF,QAAAuB,OAItCtM,GAAAw2F,cAAAluG,UAAAmvG,cAAA,SAAAF,EAAAG,GAEA,GAAAh3D,GAAAv0C,KAAAuW,SAAA6kF,WAAAgQ,EAEA72D,IAEAv0C,KAAA2qG,cAAAp2D,EAAA31B,MAAA21B,EAAAp0B,KACAngB,KAAAsqG,SAAA,MAAA/1D,EAAAp0B,IAAAo0B,EAAA31B,OAAA2sF,GACAvrG,KAAAw8C,KAAA,GAIAh5C,QAAAwmD,KAAA,kCAAAohD,EAAA,oCAMAv3F,EAAAw2F,cAAAluG,UAAAqvG,gBAAA,SAAA99C,GAEA,GAAA+9C,GAAAzrG,KAAAsqG,SAAAtqG,KAAAlG,MAEAkG,MAAAw8C,MAAAx8C,KAAA40E,UAAAlnB,EAEA1tD,KAAAuqG,cAEAvqG,KAAAw8C,KAAAx8C,KAAAsqG,UAAAtqG,KAAAw8C,KAAA,KAEAx8C,KAAA40E,cAEA50E,KAAAw8C,KAAAx8C,KAAAsqG,WAEAtqG,KAAAw8C,KAAAx8C,KAAAsqG,SACAtqG,KAAA0qG,uBAIA1qG,KAAAw8C,KAAA,IAEAx8C,KAAAw8C,KAAA,EACAx8C,KAAA0qG,yBAQA1qG,KAAAw8C,KAAAx8C,KAAAw8C,KAAAx8C,KAAAsqG,SAEAtqG,KAAAw8C,KAAA,IAAAx8C,KAAAw8C,MAAAx8C,KAAAsqG,UAIA,IAAAoB,GAAA1rG,KAAA4qG,cAAA/2F,EAAAmF,KAAA09C,MAAA19C,KAAA2tC,MAAA3mD,KAAAw8C,KAAAivD,GAAA,EAAAzrG,KAAAlG,OAAA,GAEA6xG,EAAA3rG,KAAAsnG,qBAEAoE,KAAA1rG,KAAAyqG,kBAEAkB,EAAA3rG,KAAAwqG,cAAA,EACAmB,EAAA3rG,KAAAyqG,iBAAA,EACAkB,EAAAD,GAAA,EAEA1rG,KAAAwqG,aAAAxqG,KAAAyqG,gBACAzqG,KAAAyqG,gBAAAiB,EAIA,IAAAE,GAAA5rG,KAAAw8C,KAAAivD,GAEAzrG,MAAA0qG,qBAEAkB,EAAA,EAAAA,GAIAD,EAAA3rG,KAAAyqG,iBAAAmB,EACAD,EAAA3rG,KAAAwqG,cAAA,EAAAoB,GAIA/3F,EAAAw2F,cAAAluG,UAAA0vG,mBAAA,SAAAnjG,EAAAK,EAAAQ,GAIA,OAFAoiG,GAAA3rG,KAAAsnG,sBAEAztG,EAAA,EAAAuP,EAAAuiG,EAAA7xG,OAAwCD,EAAAuP,EAAOvP,IAE/C8xG,EAAA9xG,GAAA,CAIA6O,QAAAijG,EAAAjjG,GAAA,EAAAa,GACAR,OAAA4iG,EAAA5iG,GAAAQ,IAIAsK,EAAAw2F,cAAAluG,UAAAsc,KAAA,SAAAxV,GAcA,MAZA4Q,GAAAkE,KAAA5b,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAsqG,SAAArnG,EAAAqnG,SACAtqG,KAAAuqG,aAAAtnG,EAAAsnG,aACAvqG,KAAAw8C,KAAAv5C,EAAAu5C,KAEAx8C,KAAAwqG,aAAAvnG,EAAAunG,aACAxqG,KAAAyqG,gBAAAxnG,EAAAwnG,gBAEAzqG,KAAA40E,UAAA3xE,EAAA2xE,UACA50E,KAAA0qG,mBAAAznG,EAAAynG,mBAEA1qG,MAYA6T,EAAAmtE,IAAA,WAEAntE,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,MAEArK,OAAA8Y,iBAAApT,MACA2gG,QACAt5F,cACArN,UAEA8nF,SACAx6E,IAAA,WAGA,MADA9D,SAAAwmD,KAAA,oDACAhqD,KAAA2gG,YASA9sF,EAAAmtE,IAAA7kF,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAmtE,IAAA7kF,UAAAE,YAAAwX,EAAAmtE,IAEAntE,EAAAmtE,IAAA7kF,UAAA0kG,SAAA,SAAA1+E,EAAA9M,GAEAtc,SAAAsc,MAAA,GAEAA,EAAA2D,KAAAuqD,IAAAluD,EAIA,QAFAsrF,GAAA3gG,KAAA2gG,OAEAv3F,EAAA,EAAiBA,EAAAu3F,EAAA7mG,UAEjBub,EAAAsrF,EAAAv3F,GAAAiM,UAFoCjM,KAUpCu3F,EAAAhgB,OAAAv3E,EAAA,GAAuBiM,WAAA8M,WAEvBniB,KAAA+V,IAAAoM,IAIAtO,EAAAmtE,IAAA7kF,UAAA2vG,qBAAA,SAAAz2F,GAIA,OAFAsrF,GAAA3gG,KAAA2gG,OAEA9mG,EAAA,EAAAuP,EAAAu3F,EAAA7mG,OAAoCD,EAAAuP,KAEpCiM,EAAAsrF,EAAA9mG,GAAAwb,UAF2Cxb,KAU3C,MAAA8mG,GAAA9mG,EAAA,GAAAsoB,QAIAtO,EAAAmtE,IAAA7kF,UAAAslF,QAAA,WAEA,GAAAsqB,GAAA,GAAAl4F,GAAA8L,OAEA,iBAAA2hE,EAAAC,GAEAwqB,EAAAnjC,sBAAA5oE,KAAA0nE,YAEA,IAAAryD,GAAAisE,EAAAzM,IAAAF,OAAA5O,WAAAgmC,EAEA/rG,MAAA8rG,qBAAAz2F,GAAAosE,QAAAH,EAAAC,OAMA1tE,EAAAmtE,IAAA7kF,UAAA4d,OAAA,WAEA,GAAAqpD,GAAA,GAAAvvD,GAAA8L,QACAwmD,EAAA,GAAAtyD,GAAA8L,OAEA,iBAAAjH,GAEA,GAAAioF,GAAA3gG,KAAA2gG,MAEA,IAAAA,EAAA7mG,OAAA,GAEAspE,EAAAwF,sBAAAlwD,EAAAgvD,aACAvB,EAAAyC,sBAAA5oE,KAAA0nE,YAEA,IAAAryD,GAAA+tD,EAAA2C,WAAAI,EAEAw6B,GAAA,GAAAx+E,OAAA3K,UAEA,QAAA3d,GAAA,EAAAuP,EAAAu3F,EAAA7mG,OAAsCD,EAAAuP,GAEtCiM,GAAAsrF,EAAA9mG,GAAAwb,SAF6Cxb,IAI7C8mG,EAAA9mG,EAAA,GAAAsoB,OAAA3K,WACAmpF,EAAA9mG,GAAAsoB,OAAA3K,UAUA,MAAU3d,EAAAuP,EAAOvP,IAEjB8mG,EAAA9mG,GAAAsoB,OAAA3K,gBAUA3D,EAAAmtE,IAAA7kF,UAAAsc,KAAA,SAAAxV,GAEA4Q,EAAAkuE,SAAA5lF,UAAAsc,KAAAphB,KAAA2I,KAAAiD,KAIA,QAFA09F,GAAA19F,EAAA09F,OAEA9mG,EAAA,EAAAuP,EAAAu3F,EAAA7mG,OAAoCD,EAAAuP,EAAOvP,IAAA,CAE3C,GAAA+mG,GAAAD,EAAA9mG,EAEAmG,MAAA6gG,SAAAD,EAAAz+E,OAAAqnC,QAAAo3C,EAAAvrF,UAIA,MAAArV,OAIA6T,EAAAmtE,IAAA7kF,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAEA92B,GAAAoF,OAAAw+E,SAIA,QAFAA,GAAA3gG,KAAA2gG,OAEA9mG,EAAA,EAAAuP,EAAAu3F,EAAA7mG,OAAoCD,EAAAuP,EAAOvP,IAAA,CAE3C,GAAA+mG,GAAAD,EAAA9mG,EAEAkjB,GAAAoF,OAAAw+E,OAAAjgG,MACAyhB,OAAAy+E,EAAAz+E,OAAAw5D,KACAtmE,SAAAurF,EAAAvrF,WAKA,MAAA0H,IAWAlJ,EAAAstE,OAAA,WAEA,GAAA8E,GAAA,GAAAgB,cAAA,cACAxoE,EAAA,GAAAL,oBAAA,iCACA+qE,EAAA,GAAA/qE,eAAA,kBAEA7H,EAAA,GAAA1C,GAAA2K,cAKA,OAJAjI,GAAA+3E,SAAA,GAAAz6E,GAAAwL,gBAAA4mE,EAAA,IACA1vE,EAAA6I,aAAA,cAAAvL,GAAAwL,gBAAAZ,EAAA,IACAlI,EAAA6I,aAAA,QAAAvL,GAAAwL,gBAAA8pE,EAAA,IAEA,SAAA1zE,GAEA5B,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,SAEA3E,KAAAuW,WACAvW,KAAAyV,SAAA1c,SAAA0c,IAAA,GAAA5B,GAAAkxF,mBAMAlxF,EAAAstE,OAAAhlF,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAstE,OAAAhlF,UAAAE,YAAAwX,EAAAstE,OAEAttE,EAAAstE,OAAAhlF,UAAAslF,QAAA,WAEA,GAAAsqB,GAAA,GAAAl4F,GAAA8L,OAEA,iBAAA2hE,EAAAC,GAEAwqB,EAAAnjC,sBAAA5oE,KAAA0nE,YAEA,IAAAiD,GAAA2W,EAAAzM,IAAAG,kBAAA+2B,GACAC,EAAAhsG,KAAAwoD,MAAAv/C,EAAAjJ,KAAAwoD,MAAA3/C,CAEA8hE,GAAAqhC,GAMAzqB,EAAA7gF,MAEA2U,SAAA2D,KAAA+xC,KAAA4f,GACAI,MAAA/qE,KAAA6V,SACA8I,KAAA,KACAwD,OAAAniB,WAQA6T,EAAAstE,OAAAhlF,UAAAqtD,MAAA,WAEA,UAAAxpD,MAAA3D,YAAA2D,KAAAyV,UAAAgD,KAAAzY,OAIA6T,EAAAstE,OAAAhlF,UAAAsoF,OAAA,SAAA5wC,GAEA,GAAA92B,GAAAlJ,EAAAkuE,SAAA5lF,UAAAsoF,OAAAptF,KAAA2I,KAAA6zC,EAWA,OARA96C,UAAA86C,EAAAkxC,UAAA/kF,KAAAyV,SAAAkmE,QAEA9nC,EAAAkxC,UAAA/kF,KAAAyV,SAAAkmE,MAAA37E,KAAAyV,SAAAgvE,UAIA1nE,EAAAoF,OAAA1M,SAAAzV,KAAAyV,SAAAkmE,KAEA5+D,GAMAlJ,EAAAo4F,SAAAp4F,EAAAstE,OASAttE,EAAAq4F,UAAA,SAAAvX,EAAA3rD,EAAA3zB,EAAAwgF,EAAAtmF,GAEAsE,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAAmsG,cAEAnsG,KAAAosG,eAAA,GAAAv4F,GAAA8L,QACA3f,KAAAqsG,qBAAAtzG,OAEAA,SAAA47F,GAEA30F,KAAA+V,IAAA4+E,EAAA3rD,EAAA3zB,EAAAwgF,EAAAtmF,IAMAsE,EAAAq4F,UAAA/vG,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAq4F,UAAA/vG,UAAAE,YAAAwX,EAAAq4F,UAOAr4F,EAAAq4F,UAAA/vG,UAAA4Z,IAAA,SAAA4+E,EAAA3rD,EAAA3zB,EAAAwgF,EAAAtmF,EAAAtB,GAEAlV,SAAAiwC,UACAjwC,SAAAsc,MAAA,GACAtc,SAAAkV,MAAA,GACAlV,SAAAwW,MAAA,GAAAsE,GAAAqiD,MAAA,WACAn9D,SAAA88F,MAAAhiF,EAAAo9C,gBAEA57C,EAAA2D,KAAA02B,IAAAr6B,EAAA2D,KAAAZ,IAAA,EAAA/C,IAEArV,KAAAmsG,WAAAzrG,MACAi0F,UACA3rD,OACA3zB,WACApM,EAAA,EAAAJ,EAAA,EAAA0B,EAAA,EACAi+C,MAAA,EACAjwC,SAAA,EACAtK,UACAsB,QACAsmF,cAUAhiF,EAAAq4F,UAAA/vG,UAAAmwG,iBAAA,WAEA,GAAA5iG,GACA6iG,EADA1iB,EAAA7pF,KAAAmsG,WAAAryG,OAEA0yG,EAAA,GAAAxsG,KAAAosG,eAAAnjG,EACAwjG,EAAA,GAAAzsG,KAAAosG,eAAAvjG,CAEA,KAAAa,EAAA,EAAaA,EAAAmgF,EAAQngF,IAErB6iG,EAAAvsG,KAAAmsG,WAAAziG,GAEA6iG,EAAAtjG,EAAAjJ,KAAAosG,eAAAnjG,EAAAujG,EAAAD,EAAAl3F,SACAk3F,EAAA1jG,EAAA7I,KAAAosG,eAAAvjG,EAAA4jG,EAAAF,EAAAl3F,SAEAk3F,EAAAG,eAAAH,EAAAtjG,EAAA+P,KAAA8uC,GAAA,IACAykD,EAAAh0F,UAAA,KAAAg0F,EAAAG,eAAAH,EAAAh0F,WAMA1E,EAAAq4F,UAAA/vG,UAAAsc,KAAA,SAAAxV,GAEA4Q,EAAAkuE,SAAA5lF,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEAjD,KAAAosG,eAAA3zF,KAAAxV,EAAAmpG,gBACApsG,KAAAqsG,qBAAAppG,EAAAopG,oBAEA,QAAAxyG,GAAA,EAAAuP,EAAAnG,EAAAkpG,WAAAryG,OAA+CD,EAAAuP,EAAOvP,IAEtDmG,KAAAmsG,WAAAzrG,KAAAuC,EAAAkpG,WAAAtyG,GAIA,OAAAmG,OAUA6T,EAAAM,MAAA,WAEAN,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,QAEA3E,KAAAqjG,IAAA,KACArjG,KAAA2sG,iBAAA,KAEA3sG,KAAA4sG,eAIA/4F,EAAAM,MAAAhY,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAM,MAAAhY,UAAAE,YAAAwX,EAAAM,MAEAN,EAAAM,MAAAhY,UAAAsc,KAAA,SAAAxV,GAUA,MARA4Q,GAAAkuE,SAAA5lF,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GAEA,OAAAA,EAAAogG,MAAArjG,KAAAqjG,IAAApgG,EAAAogG,IAAA75C,SACA,OAAAvmD,EAAA0pG,mBAAA3sG,KAAA2sG,iBAAA1pG,EAAA0pG,iBAAAnjD,SAEAxpD,KAAA4sG,WAAA3pG,EAAA2pG,WACA5sG,KAAAuiF,iBAAAt/E,EAAAs/E,iBAEAviF,MAWA6T,EAAAg5F,IAAA,SAAAt9F,EAAA6kE,EAAAC,GAEAr0E,KAAA7G,KAAA,GAEA6G,KAAAuP,MAAA,GAAAsE,GAAAqiD,MAAA3mD,GAEAvP,KAAAo0E,KAAAr7E,SAAAq7E,IAAA,EACAp0E,KAAAq0E,IAAAt7E,SAAAs7E,IAAA,KAIAxgE,EAAAg5F,IAAA1wG,UAAAqtD,MAAA,WAEA,UAAA31C,GAAAg5F,IAAA7sG,KAAAuP,MAAA8nD,SAAAr3D,KAAAo0E,KAAAp0E,KAAAq0E,MAWAxgE,EAAAi5F,QAAA,SAAAv9F,EAAAw9F,GAEA/sG,KAAA7G,KAAA,GAEA6G,KAAAuP,MAAA,GAAAsE,GAAAqiD,MAAA3mD,GACAvP,KAAA+sG,QAAAh0G,SAAAg0G,IAAA,OAIAl5F,EAAAi5F,QAAA3wG,UAAAqtD,MAAA,WAEA,UAAA31C,GAAAi5F,QAAA9sG,KAAAuP,MAAA8nD,SAAAr3D,KAAA+sG,UAMAl5F,EAAAm5F,eAIAn5F,EAAAm5F,YAAAC,kBAAA,uFAIAp5F,EAAAm5F,YAAAE,uBAAA,mEAIAr5F,EAAAm5F,YAAAG,mBAAA,+EAIAt5F,EAAAm5F,YAAAI,eAAA,sHAIAv5F,EAAAm5F,YAAAK,oBAAA,4FAIAx5F,EAAAm5F,YAAAM,aAAA,2CAIAz5F,EAAAm5F,YAAAO,mBAAA,0CAIA15F,EAAAm5F,YAAAQ,sBAAA,mmCAIA35F,EAAAm5F,YAAAS,eAAA,8DAIA55F,EAAAm5F,YAAAU,oBAAA,yDAIA75F,EAAAm5F,YAAAW,kBAAA,uDAIA95F,EAAAm5F,YAAAY,aAAA,0DAIA/5F,EAAAm5F,YAAAa,OAAA,i9FAIAh6F,EAAAm5F,YAAAc,qBAAA,4HAIAj6F,EAAAm5F,YAAAe,uBAAA,qJAIAl6F,EAAAm5F,YAAAgB,4BAAA,wJAIAn6F,EAAAm5F,YAAAiB,qBAAA,yMAIAp6F,EAAAm5F,YAAAkB,0BAAA,yEAIAr6F,EAAAm5F,YAAAmB,gBAAA,4zDAIAt6F,EAAAm5F,YAAAoB,qBAAA,uXAIAv6F,EAAAm5F,YAAAqB,mBAAA,wLAIAx6F,EAAAm5F,YAAAsB,cAAA,4cAIAz6F,EAAAm5F,YAAAuB,aAAA,kdAIA16F,EAAAm5F,YAAAwB,kBAAA,2LAIA36F,EAAAm5F,YAAAyB,kBAAA,iHAIA56F,EAAAm5F,YAAA0B,uBAAA,qGAIA76F,EAAAm5F,YAAA2B,2BAAA,mkCAIA96F,EAAAm5F,YAAA4B,sBAAA,m1FAIA/6F,EAAAm5F,YAAA6B,sBAAA;AAIAh7F,EAAAm5F,YAAA8B,2BAAA,gwCAIAj7F,EAAAm5F,YAAA+B,yBAAA,iGAIAl7F,EAAAm5F,YAAAgC,oBAAA,wGAIAn7F,EAAAm5F,YAAAiC,yBAAA,yDAIAp7F,EAAAm5F,YAAAkC,qBAAA,wIAIAr7F,EAAAm5F,YAAAmC,0BAAA,oJAIAt7F,EAAAm5F,YAAAoC,wBAAA,kJAIAv7F,EAAAm5F,YAAAqC,mBAAA,+QAIAx7F,EAAAm5F,YAAAsC,aAAA,mKAIAz7F,EAAAm5F,YAAAuC,kBAAA,uDAIA17F,EAAAm5F,YAAAwC,sBAAA,wJAIA37F,EAAAm5F,YAAAyC,2BAAA,uFAIA57F,EAAAm5F,YAAA0C,mBAAA,oVAIA77F,EAAAm5F,YAAA2C,wBAAA,uLAIA97F,EAAAm5F,YAAA4C,mBAAA,orBAIA/7F,EAAAm5F,YAAA6C,wBAAA,svBAIAh8F,EAAAm5F,YAAA8C,eAAA,gNAIAj8F,EAAAm5F,YAAA+C,mBAAA,mjOAIAl8F,EAAAm5F,YAAAgD,wBAAA,+fAIAn8F,EAAAm5F,YAAAiD,sBAAA,6HAIAp8F,EAAAm5F,YAAAkD,iBAAA,qJAIAr8F,EAAAm5F,YAAAmD,gBAAA,sOAIAt8F,EAAAm5F,YAAAoD,qBAAA,smCAIAv8F,EAAAm5F,YAAAqD,gBAAA,4XAIAx8F,EAAAm5F,YAAAsD,kBAAA,oXAIAz8F,EAAAm5F,YAAAuD,qBAAA,oMAIA18F,EAAAm5F,YAAAwD,0BAAA,uEAIA38F,EAAAm5F,YAAAyD,kBAAA,wFAIA58F,EAAAm5F,YAAA0D,gBAAA,+GAIA78F,EAAAm5F,YAAA2D,WAAA,iFAIA98F,EAAAm5F,YAAA4D,iBAAA,uMAIA/8F,EAAAm5F,YAAA6D,eAAA,uOAIAh9F,EAAAm5F,YAAA8D,UAAA,mOAIAj9F,EAAAm5F,YAAA+D,gBAAA,sRAQAl9F,EAAAgxF,eAEAzgG,MAAA,SAAAi4F,GAIA,OAFA2U,MAEA7nG,EAAA,EAAkBA,EAAAkzF,EAAAviG,OAAqBqP,IAAA,CAEvC,GAAAulE,GAAA1uE,KAAAwpD,MAAA6yC,EAAAlzF,GAEA,QAAA3R,KAAAk3E,GAEAsiC,EAAAx5G,GAAAk3E,EAAAl3E,GAMA,MAAAw5G,IAIAxnD,MAAA,SAAAynD,GAEA,GAAAC,KAEA,QAAA/nG,KAAA8nG,GAAA,CAEAC,EAAA/nG,KAEA,QAAA3R,KAAAy5G,GAAA9nG,GAAA,CAEA,GAAAgoG,GAAAF,EAAA9nG,GAAA3R,EAEA25G,aAAAt9F,GAAAqiD,OACAi7C,YAAAt9F,GAAA+6C,SACAuiD,YAAAt9F,GAAA8L,SACAwxF,YAAAt9F,GAAAu1D,SACA+nC,YAAAt9F,GAAAq5D,SACAikC,YAAAt9F,GAAAyzD,SACA6pC,YAAAt9F,GAAAihF,QAEAoc,EAAA/nG,GAAA3R,GAAA25G,EAAA3nD,QAEK7vD,MAAAC,QAAAu3G,GAELD,EAAA/nG,GAAA3R,GAAA25G,EAAAzwF,QAIAwwF,EAAA/nG,GAAA3R,GAAA25G,GAQA,MAAAD,KAYAr9F,EAAAu9F,aAEAvD,QAEAwD,SAAe1sG,KAAA,IAAA3K,MAAA,GAAA6Z,GAAAqiD,MAAA,WACfjoD,SAAetJ,KAAA,IAAA3K,MAAA,GAEfqI,KAAWsC,KAAA,IAAA3K,MAAA,MACXs3G,cAAoB3sG,KAAA,KAAA3K,MAAA,GAAA6Z,GAAAu1D,QAAA,UAEpB6zB,aAAmBt4F,KAAA,IAAA3K,MAAA,MACnB2iG,UAAgBh4F,KAAA,IAAA3K,MAAA,MAEhBkjG,QAAcv4F,KAAA,IAAA3K,MAAA,MACdu3G,YAAkB5sG,KAAA,IAAA3K,UAClBojG,cAAoBz4F,KAAA,IAAA3K,MAAA,GACpB0pG,iBAAuB/+F,KAAA,IAAA3K,MAAA,MAIvBw3G,OAEAjU,OAAa54F,KAAA,IAAA3K,MAAA,MACbwjG,gBAAsB74F,KAAA,IAAA3K,MAAA,IAItBy3G,UAEApU,UAAgB14F,KAAA,IAAA3K,MAAA,MAChBsjG,mBAAyB34F,KAAA,IAAA3K,MAAA,IAIzB03G,aAEA3N,aAAmBp/F,KAAA,IAAA3K,MAAA,OAInB23G,SAEA/U,SAAej4F,KAAA,IAAA3K,MAAA,MACfg/F,WAAiBr0F,KAAA,IAAA3K,MAAA,IAIjB43G,WAEA/U,WAAiBl4F,KAAA,IAAA3K,MAAA,MACjBk/F,aAAmBv0F,KAAA,KAAA3K,MAAA,GAAA6Z,GAAA+6C,QAAA,OAInBijD,iBAEA/U,iBAAuBn4F,KAAA,IAAA3K,MAAA,MACvB+iG,mBAAyBp4F,KAAA,IAAA3K,MAAA,GACzBgjG,kBAAwBr4F,KAAA,IAAA3K,MAAA,IAIxBqpG,KAEAyO,YAAkBntG,KAAA,IAAA3K,MAAA,OAClB+3G,SAAeptG,KAAA,IAAA3K,MAAA,GACfg4G,QAAcrtG,KAAA,IAAA3K,MAAA,KACdi4G,UAAgBttG,KAAA,IAAA3K,MAAA,GAAA6Z,GAAAqiD,MAAA,YAIhBlhD,QAEAk9F,mBAAyBvtG,KAAA,KAAA3K,UAEzBm4G,2BAAiCxtG,KAAA,KAAA3K,UACjCo4G,uBAA6BztG,KAAA,KAAA3K,UAE7Bq4G,0BAAgC1tG,KAAA,KAAA3K,UAChCs4G,yBAA+B3tG,KAAA,KAAA3K,UAC/Bu4G,4BAAkC5tG,KAAA,KAAA3K,UAElCw4G,iBAAuB7tG,KAAA,KAAA3K,UACvBy4G,oBAA0B9tG,KAAA,KAAA3K,UAC1B04G,oBAA0B/tG,KAAA,MAAA3K,UAC1B24G,iBAAuBhuG,KAAA,MAAA3K,UAEvB44G,gBAAsBjuG,KAAA,KAAA3K,UACtB64G,mBAAyBluG,KAAA,KAAA3K,UACzB84G,oBAA0BnuG,KAAA,KAAA3K,UAC1B+4G,mBAAyBpuG,KAAA,MAAA3K,UACzBg5G,mBAAyBruG,KAAA,MAAA3K,UACzBi5G,mBAAyBtuG,KAAA,MAAA3K,UACzBk5G,gBAAsBvuG,KAAA,MAAA3K,WAItBsxE,QAEA6nC,SAAexuG,KAAA,IAAA3K,MAAA,GAAA6Z,GAAAqiD,MAAA,WACfjoD,SAAetJ,KAAA,IAAA3K,MAAA,GACfgvC,MAAYrkC,KAAA,IAAA3K,MAAA,GACZwuD,OAAa7jD,KAAA,IAAA3K,MAAA,GACbqI,KAAWsC,KAAA,IAAA3K,MAAA,MACXs3G,cAAoB3sG,KAAA,KAAA3K,MAAA,GAAA6Z,GAAAu1D,QAAA,UAEpB0oC,YAAkBntG,KAAA,IAAA3K,MAAA,OAClB+3G,SAAeptG,KAAA,IAAA3K,MAAA,GACfg4G,QAAcrtG,KAAA,IAAA3K,MAAA,KACdi4G,UAAgBttG,KAAA,IAAA3K,MAAA,GAAA6Z,GAAAqiD,MAAA,YAIhBk9C,WAEAtgB,WAAgBnuF,KAAA,KAAA3K,UAChB+4F,eAAoBpuF,KAAA,MAAA3K,UAEpB04F,YAAkB/tF,KAAA,MAAA3K,UAClB24F,gBAAqBhuF,KAAA,MAAA3K,UAErBi5F,cAAoBtuF,KAAA,MAAA3K,YAiBpB6Z,EAAAw/F,WAEAC,OAEAjX,SAAAxoF,EAAAgxF,cAAAzgG,OAEAyP,EAAAu9F,YAAAvD,OACAh6F,EAAAu9F,YAAAI,MACA39F,EAAAu9F,YAAA/N,IACAxvF,EAAAu9F,YAAAgC,YAIA9W,cAEAzoF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAA6D,eACAh9F,EAAAm5F,YAAA0D,gBACA78F,EAAAm5F,YAAAqB,mBACAx6F,EAAAm5F,YAAAW,kBACA95F,EAAAm5F,YAAA2C,wBACA97F,EAAAm5F,YAAAoD,qBACAv8F,EAAAm5F,YAAAiD,sBACAp8F,EAAAm5F,YAAAoC,wBAEA,gBAEAv7F,EAAAm5F,YAAA8D,UACAj9F,EAAAm5F,YAAA2D,WACA98F,EAAAm5F,YAAAY,aACA/5F,EAAAm5F,YAAAmD,gBAEA,sBAEAt8F,EAAAm5F,YAAAO,mBACA15F,EAAAm5F,YAAA0C,mBACA77F,EAAAm5F,YAAAsD,kBACAz8F,EAAAm5F,YAAAc,qBAEA,WAEAj6F,EAAAm5F,YAAAM,aACAz5F,EAAAm5F,YAAA4C,mBACA/7F,EAAAm5F,YAAAqD,gBACAx8F,EAAAm5F,YAAA8C,eACAj8F,EAAAm5F,YAAAqC,mBAEAx7F,EAAAm5F,YAAA+D,gBACAl9F,EAAAm5F,YAAAsB,cACAz6F,EAAAm5F,YAAAkD,iBAEA,KAEA3tG,KAAA,MAEAg6F,gBAEA,wBACA,yBAEA1oF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAU,oBACA75F,EAAAm5F,YAAA4D,iBACA/8F,EAAAm5F,YAAAyD,kBACA58F,EAAAm5F,YAAAuC,kBACA17F,EAAAm5F,YAAAE,uBACAr5F,EAAAm5F,YAAAK,oBACAx5F,EAAAm5F,YAAAoB,qBACAv6F,EAAAm5F,YAAAwB,kBACA36F,EAAAm5F,YAAAgD,wBACAn8F,EAAAm5F,YAAAwD,0BACA38F,EAAAm5F,YAAAmC,0BAEA,gBAEA,sCACA,kDACA,0CAEAt7F,EAAAm5F,YAAAkC,qBACAr7F,EAAAm5F,YAAAsC,aACAz7F,EAAAm5F,YAAAS,eACA55F,EAAAm5F,YAAAC,kBACAp5F,EAAAm5F,YAAAG,mBACAt5F,EAAAm5F,YAAAuD,qBACA18F,EAAAm5F,YAAAI,eAEA,0DAEAv5F,EAAAm5F,YAAAmB,gBACAt6F,EAAAm5F,YAAA+C,mBAEAl8F,EAAAm5F,YAAAiC,yBAEAp7F,EAAAm5F,YAAAuB,aAEA,0DAEA,KAEAhsG,KAAA,OAIAgxG,SAEAlX,SAAAxoF,EAAAgxF,cAAAzgG,OAEAyP,EAAAu9F,YAAAvD,OACAh6F,EAAAu9F,YAAA/N,IACAxvF,EAAAu9F,YAAAp8F,OACAnB,EAAAu9F,YAAAgC,WAGA9c,UAAkB3xF,KAAA,IAAA3K,MAAA,GAAA6Z,GAAAqiD,MAAA,OAKlBomC,cAEA,kBAEA,4BAEA,sBAEA,6BAEA,SAEAzoF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAA6D,eACAh9F,EAAAm5F,YAAA0D,gBACA78F,EAAAm5F,YAAAqB,mBACAx6F,EAAAm5F,YAAA2B,2BACA96F,EAAAm5F,YAAAW,kBACA95F,EAAAm5F,YAAA2C,wBACA97F,EAAAm5F,YAAAoD,qBACAv8F,EAAAm5F,YAAAiD,sBACAp8F,EAAAm5F,YAAAoC,wBAEA,gBAEAv7F,EAAAm5F,YAAA8D,UACAj9F,EAAAm5F,YAAA2D,WACA98F,EAAAm5F,YAAAY,aAEA/5F,EAAAm5F,YAAAO,mBACA15F,EAAAm5F,YAAA0C,mBACA77F,EAAAm5F,YAAAmD,gBACAt8F,EAAAm5F,YAAAsD,kBACAz8F,EAAAm5F,YAAAc,qBAEAj6F,EAAAm5F,YAAAM,aACAz5F,EAAAm5F,YAAA4C,mBACA/7F,EAAAm5F,YAAAqD,gBACAx8F,EAAAm5F,YAAA8C,eACAj8F,EAAAm5F,YAAAqC,mBAEAx7F,EAAAm5F,YAAA+D,gBACAl9F,EAAAm5F,YAAAsB,cACAz6F,EAAAm5F,YAAA4B,sBACA/6F,EAAAm5F,YAAAkD,iBAEA,KAEA3tG,KAAA,MAEAg6F,gBAEA,wBACA,yBACA,yBAEA,4BAEA,sBAEA,6BAEA,SAEA1oF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAU,oBACA75F,EAAAm5F,YAAA4D,iBACA/8F,EAAAm5F,YAAAyD,kBACA58F,EAAAm5F,YAAAuC,kBACA17F,EAAAm5F,YAAAE,uBACAr5F,EAAAm5F,YAAAoB,qBACAv6F,EAAAm5F,YAAAwB,kBACA36F,EAAAm5F,YAAAgD,wBACAn8F,EAAAm5F,YAAAwD,0BACA38F,EAAAm5F,YAAAmC,0BAEA,gBAEA,sCACA,kDAEAt7F,EAAAm5F,YAAAkC,qBACAr7F,EAAAm5F,YAAAsC,aACAz7F,EAAAm5F,YAAAS,eACA55F,EAAAm5F,YAAAC,kBACAp5F,EAAAm5F,YAAAG,mBACAt5F,EAAAm5F,YAAAuD,qBAEA,wBAEA,4BACA,oEACA,WACA,mEAEA,UAEA,kEAEA,WAEA18F,EAAAm5F,YAAAmB,gBACAt6F,EAAAm5F,YAAA+C,mBAEAl8F,EAAAm5F,YAAAiC,yBAEAp7F,EAAAm5F,YAAAuB,aAEA,0DAEA,KAEAhsG,KAAA,OAIAixG,OAEAnX,SAAAxoF,EAAAgxF,cAAAzgG,OAEAyP,EAAAu9F,YAAAvD,OACAh6F,EAAAu9F,YAAAI,MACA39F,EAAAu9F,YAAAK,SACA59F,EAAAu9F,YAAAM,YACA79F,EAAAu9F,YAAAO,QACA99F,EAAAu9F,YAAAQ,UACA/9F,EAAAu9F,YAAAS,gBACAh+F,EAAAu9F,YAAA/N,IACAxvF,EAAAu9F,YAAAp8F,OACAnB,EAAAu9F,YAAAgC,WAGA9c,UAAkB3xF,KAAA,IAAA3K,MAAA,GAAA6Z,GAAAqiD,MAAA,IAClBsgC,UAAkB7xF,KAAA,IAAA3K,MAAA,GAAA6Z,GAAAqiD,MAAA,UAClBwgC,WAAkB/xF,KAAA,IAAA3K,MAAA,OAKlBsiG,cAEA,gBAEA,8BAEA,sBAEA,0BAEA,SAEAzoF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAA6D,eACAh9F,EAAAm5F,YAAA0D,gBACA78F,EAAAm5F,YAAAgB,4BACAn6F,EAAAm5F,YAAAqB,mBACAx6F,EAAAm5F,YAAA+B,yBACAl7F,EAAAm5F,YAAAW,kBACA95F,EAAAm5F,YAAA2C,wBACA97F,EAAAm5F,YAAAoD,qBACAv8F,EAAAm5F,YAAAiD,sBACAp8F,EAAAm5F,YAAAoC,wBAEA,gBAEAv7F,EAAAm5F,YAAA8D,UACAj9F,EAAAm5F,YAAA2D,WACA98F,EAAAm5F,YAAAY,aAEA/5F,EAAAm5F,YAAAO,mBACA15F,EAAAm5F,YAAA0C,mBACA77F,EAAAm5F,YAAAmD,gBACAt8F,EAAAm5F,YAAAsD,kBACAz8F,EAAAm5F,YAAAc,qBAEA,sBAEA,8CAEA,SAEAj6F,EAAAm5F,YAAAM,aACAz5F,EAAAm5F,YAAAe,uBACAl6F,EAAAm5F,YAAA4C,mBACA/7F,EAAAm5F,YAAAqD,gBACAx8F,EAAAm5F,YAAA8C,eACAj8F,EAAAm5F,YAAAqC,mBAEA,sCAEAx7F,EAAAm5F,YAAA+D,gBACAl9F,EAAAm5F,YAAAsB,cACAz6F,EAAAm5F,YAAAgC,oBACAn7F,EAAAm5F,YAAAkD,iBAEA,KAEA3tG,KAAA,MAEAg6F,gBAEA,gBAEA,wBACA,yBACA,yBACA,2BACA,yBAEA1oF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAU,oBACA75F,EAAAm5F,YAAA4D,iBACA/8F,EAAAm5F,YAAAyD,kBACA58F,EAAAm5F,YAAAuC,kBACA17F,EAAAm5F,YAAAE,uBACAr5F,EAAAm5F,YAAAK,oBACAx5F,EAAAm5F,YAAA0B,uBACA76F,EAAAm5F,YAAAkB,0BACAr6F,EAAAm5F,YAAAoB,qBACAv6F,EAAAm5F,YAAAwB,kBACA36F,EAAAm5F,YAAA8B,2BACAj7F,EAAAm5F,YAAAgD,wBACAn8F,EAAAm5F,YAAAQ,sBACA35F,EAAAm5F,YAAA6C,wBACAh8F,EAAAm5F,YAAAwD,0BACA38F,EAAAm5F,YAAAmC,0BAEA,gBAEA,sCACA,kDACA,gDACA,wCAEAt7F,EAAAm5F,YAAAkC,qBACAr7F,EAAAm5F,YAAAsC,aACAz7F,EAAAm5F,YAAAS,eACA55F,EAAAm5F,YAAAC,kBACAp5F,EAAAm5F,YAAAG,mBACAt5F,EAAAm5F,YAAAuD,qBACA18F,EAAAm5F,YAAAyB,kBACA56F,EAAAm5F,YAAAI,eACAv5F,EAAAm5F,YAAAiB,qBAEAp6F,EAAAm5F,YAAA6B,sBAEAh7F,EAAAm5F,YAAAmB,gBACAt6F,EAAAm5F,YAAA+C,mBAEAl8F,EAAAm5F,YAAAiC,yBAEAp7F,EAAAm5F,YAAAuB,aAEA,0DAEA,KAEAhsG,KAAA,OAIA+oE,QAEA+wB,SAAAxoF,EAAAgxF,cAAAzgG,OAEAyP,EAAAu9F,YAAA9lC,OACAz3D,EAAAu9F,YAAAgC,YAIA9W,cAEA,sBACA,uBAEAzoF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAW,kBACA95F,EAAAm5F,YAAAiD,sBACAp8F,EAAAm5F,YAAAoC,wBAEA,gBAEAv7F,EAAAm5F,YAAAY,aAEA,+DAEA,+BACA,kEACA,UACA,2BACA,WAEA,iDAEA/5F,EAAAm5F,YAAAqC,mBACAx7F,EAAAm5F,YAAA+D,gBACAl9F,EAAAm5F,YAAAkD,iBAEA,KAEA3tG,KAAA,MAEAg6F,gBAEA,wBACA,yBAEA1oF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAU,oBACA75F,EAAAm5F,YAAAyC,2BACA57F,EAAAm5F,YAAAwB,kBACA36F,EAAAm5F,YAAAgD,wBACAn8F,EAAAm5F,YAAAmC,0BAEA,gBAEA,sCACA,kDAEAt7F,EAAAm5F,YAAAkC,qBACAr7F,EAAAm5F,YAAAwC,sBACA37F,EAAAm5F,YAAAS,eACA55F,EAAAm5F,YAAAG,mBAEA,sCAEAt5F,EAAAm5F,YAAA+C,mBACAl8F,EAAAm5F,YAAAuB,aAEA,0DAEA,KAEAhsG,KAAA,OAIAkxG,QAEApX,SAAAxoF,EAAAgxF,cAAAzgG,OAEAyP,EAAAu9F,YAAAvD,OACAh6F,EAAAu9F,YAAA/N,KAGA76C,OAAkB7jD,KAAA,IAAA3K,MAAA,GAClBupG,UAAkB5+F,KAAA,IAAA3K,MAAA,GAClB05G,WAAkB/uG,KAAA,IAAA3K,MAAA,MAKlBsiG,cAEA,uBACA,gCAEA,+BAEAzoF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAW,kBACA95F,EAAAm5F,YAAAoC,wBAEA,gBAEAv7F,EAAAm5F,YAAAY,aAEA,0CAEA,+DACA,iDAEA/5F,EAAAm5F,YAAAqC,mBAEA,KAEA9sG,KAAA,MAEAg6F,gBAEA,wBACA,yBAEA,0BACA,2BAEA,+BAEA1oF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAU,oBACA75F,EAAAm5F,YAAAwB,kBACA36F,EAAAm5F,YAAAmC,0BAEA,gBAEA,wDAEA,eAEA,MAEA,sCACA,kDAEAt7F,EAAAm5F,YAAAkC,qBACAr7F,EAAAm5F,YAAAS,eAEA,sCAEA55F,EAAAm5F,YAAAuB,aAEA,0DAEA,KAEAhsG,KAAA,OAIA/E,OAEA6+F,UAEAsX,OAAahvG,KAAA,IAAA3K,MAAA,GACb45G,MAAajvG,KAAA,IAAA3K,MAAA,KACbiU,SAAgBtJ,KAAA,IAAA3K,MAAA,IAIhBsiG,cAEAzoF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAA2C,wBACA97F,EAAAm5F,YAAAoC,wBAEA,gBAEAv7F,EAAAm5F,YAAAM,aACAz5F,EAAAm5F,YAAA4C,mBACA/7F,EAAAm5F,YAAA8C,eACAj8F,EAAAm5F,YAAAqC,mBAEA,KAEA9sG,KAAA,MAEAg6F,gBAEA,uBACA,sBACA,yBAEA1oF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAmC,0BAEA,gBAEAt7F,EAAAm5F,YAAAkC,qBAEA,+BAEA,sDAEA,UAEA,qDAEA,WAEA,0DACA,mDAEA,KAEA3sG,KAAA,OAIA+c,QAEA+8E,UAEApuF,SAAgBtJ,KAAA,IAAA3K,MAAA,IAIhBsiG,cAEA,wBAEAzoF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAA2C,wBACA97F,EAAAm5F,YAAAoC,wBAEA,gBAEA,kDAEAv7F,EAAAm5F,YAAAM,aACAz5F,EAAAm5F,YAAA4C,mBACA/7F,EAAAm5F,YAAA8C,eACAj8F,EAAAm5F,YAAAqC,mBAEA,KAEA9sG,KAAA,MAEAg6F,gBAEA,yBACA,wBAEA1oF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAmC,0BAEA,gBAEA,sEAEAt7F,EAAAm5F,YAAAkC,qBAEA,KAEA3sG,KAAA;EAQAsxG,MAEAxX,UAAayX,OAAWnvG,KAAA,IAAA3K,MAAA,MACxB+5G,OAAepvG,KAAA,IAAA3K,WAEfsiG,cAEA,+BAEAzoF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAoC,wBAEA,gBAEA,kEAEA,8EAEAv7F,EAAAm5F,YAAAqC,mBAEA,KAEA9sG,KAAA,MAEAg6F,gBAEA,6BACA,uBAEA,+BAEA1oF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAmC,0BAEA,gBAEA,8FAEAt7F,EAAAm5F,YAAAkC,qBAEA,KAEA3sG,KAAA,OAQAyxG,UAEA3X,UAAa4X,WAAetvG,KAAA,IAAA3K,MAAA,MAC5B+5G,OAAepvG,KAAA,IAAA3K,WAEfsiG,cAEA,+BAEAzoF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAoC,wBAEA,gBAEA,kEAEA,8EAEAv7F,EAAAm5F,YAAAqC,mBAEA,KAEA9sG,KAAA,MAEAg6F,gBAEA,+BACA,uBAEA,+BAEA1oF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAmC,0BAEA,gBAGA,gDACA,iBACA,6DACA,wEACA,mDAEAt7F,EAAAm5F,YAAAkC,qBAEA,KAEA3sG,KAAA,OAgBA2xG,WAEA7X,YAEAC,cAEAzoF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAA2C,wBACA97F,EAAAm5F,YAAAoD,qBACAv8F,EAAAm5F,YAAAoC,wBAEA,gBAEAv7F,EAAAm5F,YAAAmD,gBAEAt8F,EAAAm5F,YAAAM,aACAz5F,EAAAm5F,YAAA4C,mBACA/7F,EAAAm5F,YAAAqD,gBACAx8F,EAAAm5F,YAAA8C,eACAj8F,EAAAm5F,YAAAqC,mBAEA,KAEA9sG,KAAA,MAEAg6F,gBAEA1oF,EAAAm5F,YAAAa,OACAh6F,EAAAm5F,YAAAmC,0BAEA,4CAEA,qFACA,8EACA,kFACA,gCACA,gBAEA,IAEA,gBAEAt7F,EAAAm5F,YAAAkC,qBAEA,+BAEA,wDAEA,UAEA,uDAEA,WAOA,KAEA3sG,KAAA,QAeAsR,EAAAQ,cAAA,SAAAs4E,GAuNA,QAAAwnB,GAAA9qG,EAAAT,EAAAG,EAAAL,GAEA0rG,UAEA/qG,GAAAX,EAAUE,GAAAF,EAAQK,GAAAL,GAIlB2rG,GAAAC,WAAAjrG,EAAAT,EAAAG,EAAAL,GAIA,QAAA6rG,KAEAh2E,GAAAxjB,OAEAs5F,GAAAG,SAAAC,GAAAC,GAAAC,GAAAC,IAEAT,EAAAU,GAAAxrG,EAAAwrG,GAAAjsG,EAAAisG,GAAA9rG,EAAA+rG,IAIA,QAAAC,KAEAC,GAAA,KACAC,GAAA,KAEAC,GAAA,GACAC,MAEAC,MAEA72E,GAAA0wB,QAiOA,QAAAomD,GAAAniF,GAEAA,EAAA/B,iBAEA4jF,IACAR,IAEAe,GAAAr/C,QAIA,QAAAs/C,GAAAriF,GAEA,GAAAyhE,GAAAzhE,EAAAlwB,MAEA2xF,GAAAzgD,oBAAA,UAAAqhE,GAEAC,EAAA7gB,GAEA8gB,GAAAzwB,WAKA,QAAA0wB,GAAAxiF,GAEA,GAAA49D,GAAA59D,EAAAlwB,MAEA8tF,GAAA58C,oBAAA,UAAAwhE,GAEAC,EAAA7kB,GAEA2kB,GAAAzwB,WAIA,QAAA4wB,GAAA1iF,GAEA,GAAAzd,GAAAyd,EAAAlwB,MAEAyS,GAAAy+B,oBAAA,UAAA0hE,GAEAC,EAAApgG,GAMA,QAAA+/F,GAAA7gB,GAEA,GAAAmhB,GAAAR,GAAAhuG,IAAAqtF,EAEA,IAAAA,EAAAI,OAAA+gB,EAAAC,0BAIA1B,GAAA2B,cAAAF,EAAAC,+BAEG,CAIH,GAAAh9G,SAAA+8G,EAAAG,YAAA,MAEA5B,IAAA2B,cAAAF,EAAAI,gBAKAZ,GAAAppF,OAAAyoE,GAIA,QAAAghB,GAAA7kB,GAEA,GAAAqlB,GAAAb,GAAAhuG,IAAAwpF,EAEA,IAAAA,GAAA/3F,SAAAo9G,EAAAD,eAAA,CAIA,GAFA7B,GAAA2B,cAAAG,EAAAD,gBAEAplB,YAAAj9E,GAAAk9E,sBAEA,OAAAl3F,GAAA,EAAmBA,EAAA,EAAOA,IAE1Bw6G,GAAA+B,kBAAAD,EAAAE,mBAAAx8G,IACAw6G,GAAAiC,mBAAAH,EAAAI,oBAAA18G,QAMAw6G,IAAA+B,kBAAAD,EAAAE,oBACAhC,GAAAiC,mBAAAH,EAAAI,oBAIAjB,IAAAppF,OAAA4kE,IAIA,QAAA+kB,GAAApgG,GAEA+gG,EAAA/gG,GAEA6/F,GAAAppF,OAAAzW,GAKA,QAAA+gG,GAAA/gG,GAEA,GAAAghG,GAAAnB,GAAAhuG,IAAAmO,GAAAihG,OAEAjhG,GAAAihG,QAAA39G,OAEAA,SAAA09G,GAEAE,GAAAC,eAAAH,GA+RA,QAAAI,GAAAphG,EAAAihG,EAAAngG,EAAAugG,GAEA,GAAAC,EAEA,IAAAxgG,YAAA1C,GAAAo8E,0BAEA8mB,EAAAC,GAAA1vG,IAAA,0BAEA,OAAAyvG,GAGA,WADAvzG,SAAAC,MAAA,iJAOA1K,UAAA+9G,MAAA,GAEAv4E,GAAA04E,gBAEA,IAAAC,GAAA3gG,EAAAu2D,WAEAqqC,EAAAT,EAAAU,gBAEAC,EAAA5hG,EAAAkvF,sBAEA,QAAAxrG,KAAAg+G,GAAA,CAEA,GAAAG,GAAAH,EAAAh+G,EAEA,IAAAm+G,GAAA,GAEA,GAAAC,GAAAL,EAAA/9G,EAEA,IAAAJ,SAAAw+G,EAAA,CAEAh5E,GAAAi5E,gBAAAF,EAEA,IAAAtuE,GAAAuuE,EAAAjxC,SACAxpD,EAAAglE,GAAA21B,mBAAAF,EAEA,IAAAA,YAAA1jG,GAAAk0E,2BAAA,CAEA,GAAAhrE,GAAAw6F,EAAAx6F,KACA8qE,EAAA9qE,EAAA8qE,OACAtpE,EAAAg5F,EAAAh5F,MAKA,IAHA81F,GAAAqD,WAAArD,GAAAsD,aAAA76F,GACAu3F,GAAAuD,oBAAAN,EAAAtuE,EAAAqrE,GAAAwD,SAAAhwB,EAAA9qE,EAAApB,MAAAm8F,mBAAAhB,EAAAjvB,EAAAtpE,GAAAxB,EAAApB,MAAAm8F,mBAEA/6F,YAAAlJ,GAAAi0E,2BAAA,CAEA,UAAAivB,EAGA,WADAvzG,SAAAC,MAAA,kJAKAszG,GAAAgB,yBAAAT,EAAAv6F,EAAA4qE,kBAEA5uF,SAAAwd,EAAA25E,oBAEA35E,EAAA25E,kBAAAnzE,EAAA4qE,iBAAA5qE,EAAAwoC,YAWA,IAHA8uD,GAAAqD,WAAArD,GAAAsD,aAAA76F,GACAu3F,GAAAuD,oBAAAN,EAAAtuE,EAAAqrE,GAAAwD,SAAA,EAAAf,EAAA9tE,EAAA,GAEAuuE,YAAA1jG,GAAA6zE,yBAAA,CAEA,UAAAqvB,EAGA,WADAvzG,SAAAC,MAAA,kJAKAszG,GAAAgB,yBAAAT,EAAAC,EAAA5vB,kBAEA5uF,SAAAwd,EAAA25E,oBAEA35E,EAAA25E,kBAAAqnB,EAAA5vB,iBAAA4vB,EAAAhyD,YAQK,IAAAxsD,SAAAs+G,EAAA,CAEL,GAAAr9G,GAAAq9G,EAAAl+G,EAEA,IAAAJ,SAAAiB,EAEA,OAAAA,EAAAF,QAEA,OACAu6G,GAAA2D,gBAAAV,EAAAt9G,EACA,MAEA,QACAq6G,GAAA4D,gBAAAX,EAAAt9G,EACA,MAEA,QACAq6G,GAAA6D,gBAAAZ,EAAAt9G,EACA,MAEA,SACAq6G,GAAA8D,gBAAAb,EAAAt9G,MAYAukC,GAAA65E,0BAMA,QAAAC,GAAA3vG,EAAAK,GAEA,MAAAA,GAAA,GAAAL,EAAA,GAIA,QAAA4vG,GAAA5vG,EAAAK,GAEA,MAAAL,GAAAyZ,OAAA0gE,cAAA95E,EAAAoZ,OAAA0gE,YAEAn6E,EAAAyZ,OAAA0gE,YAAA95E,EAAAoZ,OAAA0gE,YAEGn6E,EAAA+M,SAAAte,KAAA4R,EAAA0M,SAAAte,GAEHuR,EAAA+M,SAAAte,GAAA4R,EAAA0M,SAAAte,GAEGuR,EAAA6B,IAAAxB,EAAAwB,EAEH7B,EAAA6B,EAAAxB,EAAAwB,EAIA7B,EAAAvR,GAAA4R,EAAA5R,GAMA,QAAAohH,GAAA7vG,EAAAK,GAEA,MAAAL,GAAAyZ,OAAA0gE,cAAA95E,EAAAoZ,OAAA0gE,YAEAn6E,EAAAyZ,OAAA0gE,YAAA95E,EAAAoZ,OAAA0gE,YAEGn6E,EAAA6B,IAAAxB,EAAAwB,EAEHxB,EAAAwB,EAAA7B,EAAA6B,EAIA7B,EAAAvR,GAAA4R,EAAA5R,GAuIA,QAAAqhH,GAAAr2F,GAEA,GAAAxG,GAAA/J,CAIAuQ,GAAA1M,SAAA4B,aAEAsE,EAAA88F,GACA7mG,IAAA8mG,KAIA/8F,EAAAg9F,GACA/mG,IAAAgnG,IAMAhnG,EAAA+J,EAAA7hB,OAEA6hB,EAAA/J,GAAAuQ,EAKAxG,EAAAjb,KAAAyhB,GAOA,QAAA02F,GAAA12F,EAAA5L,EAAAd,EAAAlL,EAAAq/E,GAEA,GAAAjuE,GAAA/J,CAIA6D,GAAA4B,aAEAsE,EAAAm9F,GACAlnG,IAAAmnG,KAIAp9F,EAAAq9F,GACApnG,IAAAqnG,GAMA,IAAAC,GAAAv9F,EAAA/J,EAEA7Y,UAAAmgH,GAEAA,EAAA/hH,GAAAgrB,EAAAhrB,GACA+hH,EAAA/2F,SACA+2F,EAAA3iG,WACA2iG,EAAAzjG,WACAyjG,EAAA3uG,EAAA4uG,GAAA5uG,EACA2uG,EAAAtvB,UAIAsvB,GACA/hH,GAAAgrB,EAAAhrB,GACAgrB,SACA5L,WACAd,WACAlL,EAAA4uG,GAAA5uG,EACAq/E,SAIAjuE,EAAAjb,KAAAw4G,IAMA,QAAAE,GAAAj3F,GAEA,GAAAA,EAAA3K,aAAA,CAEA,GAAA2K,YAAAtO,GAAAk+E,MAEA/8E,GAAAtU,KAAAyhB,OAEG,IAAAA,YAAAtO,GAAAstE,OAEHk4B,GAAA34G,KAAAyhB,OAEG,IAAAA,YAAAtO,GAAAq4F,UAEHC,GAAAzrG,KAAAyhB,OAEG,IAAAA,YAAAtO,GAAAylG,sBAEHd,EAAAr2F,OAEG,KAAAA,YAAAtO,GAAAkE,MAAAoK,YAAAtO,GAAAktE,MAAA5+D,YAAAtO,GAAAotE,UAEH9+D,YAAAtO,GAAA81F,aAEAxnF,EAAAgoF,SAAApwF,SAIAoI,EAAAygE,oBAAA22B,GAAAp/B,iBAAAh4D,SAAA,CAEA,GAAA1M,GAAA0M,EAAA1M,QAEA,IAAAA,EAAA+B,aAAA,CAEA/C,GAAA+kG,mBAEAL,GAAAvwC,sBAAAzmD,EAAAulD,aACAyxC,GAAAtyC,gBAAA4yC,IAIA,IAAAljG,GAAAurE,GAAA/nE,OAAAoI,EAEA,IAAA1M,YAAA5B,GAAAswF,iBAKA,OAHAxa,GAAApzE,EAAAozE,OACA5E,EAAAtvE,EAAAsvE,UAEAlrF,EAAA,EAAAuP,EAAAugF,EAAA7vF,OAAyCD,EAAAuP,EAAOvP,IAAA,CAEhD,GAAA+vF,GAAAD,EAAA9vF,GACA6/G,EAAA30B,EAAA6E,EAAAxE,cAEAs0B,GAAAliG,cAEAqhG,EAAA12F,EAAA5L,EAAAmjG,EAAAP,GAAA5uG,EAAAq/E,OAQAivB,GAAA12F,EAAA5L,EAAAd,EAAA0jG,GAAA5uG,IAYA,OAFAtD,GAAAkb,EAAAlb,SAEApN,EAAA,EAAAuP,EAAAnC,EAAAnN,OAAuCD,EAAAuP,EAAOvP,IAE9Cu/G,EAAAnyG,EAAApN,KAMA,QAAA8/G,GAAAC,EAAAlhG,EAAA1D,EAAAquF,EAAAsJ,GAEA,OAAA9yG,GAAA,EAAAuP,EAAAwwG,EAAA9/G,OAAyCD,EAAAuP,EAAOvP,IAAA,CAEhD,GAAAq/G,GAAAU,EAAA//G,GAEAsoB,EAAA+2F,EAAA/2F,OACA5L,EAAA2iG,EAAA3iG,SACAd,EAAA1c,SAAA4zG,EAAAuM,EAAAzjG,SAAAk3F,EACA/iB,EAAAsvB,EAAAtvB,KAEAznE,GAAAkgE,gBAAA9a,iBAAA7uD,EAAA23E,mBAAAluE,EAAAulD,aACAvlD,EAAAm5D,aAAA1M,gBAAAzsD,EAAAkgE,iBAEA5tE,GAAAolG,mBAAAnhG,EAAA1D,EAAAquF,EAAA9sF,EAAAd,EAAA0M,EAAAynE,IAMA,QAAAkwB,GAAAF,EAAAlhG,EAAA1D,EAAAquF,EAAAsJ,GAIA,OAFAl3F,GAAAk3F,EAEA9yG,EAAA,EAAAuP,EAAAwwG,EAAA9/G,OAAyCD,EAAAuP,EAAOvP,IAAA,CAEhD,GAAAsoB,GAAAy3F,EAAA//G,EAEAsoB,GAAAkgE,gBAAA9a,iBAAA7uD,EAAA23E,mBAAAluE,EAAAulD,aACAvlD,EAAAm5D,aAAA1M,gBAAAzsD,EAAAkgE,iBAEAtpF,SAAA4zG,IAAAl3F,EAAA0M,EAAA1M,UAEAskG,EAAAtkG,EAEA,IAAAihG,GAAAsD,EAAAthG,EAAA1D,EAAAquF,EAAA5tF,EAAA0M,EAEA+yF,IAAA,GAEA/yF,EAAA/pB,OAAA,SAAA+pB,GAEA1N,GAAAwlG,sBAAA93F,EAAAu0F,EAAAjhG,MAQA,QAAAykG,GAAAzkG,EAAAT,EAAAquF,EAAAlhF,GAEA,GAAAg4F,GAAA7E,GAAAhuG,IAAAmO,GAEAk3E,EAAAgqB,GAAAyD,cAAA3kG,EAAAT,EAAAquF,EAAAlhF,GACAo4B,EAAAo8D,GAAA0D,eAAA5kG,EAAAk3E,GAEA+pB,EAAAyD,EAAAzD,QACA4D,IAEA,IAAAvhH,SAAA29G,EAGAjhG,EAAAgE,iBAAA,UAAAm8F,OAEG,IAAAc,EAAAn8D,SAGHi8D,EAAA/gG,OAEG,IAAA1c,SAAA4zF,EAAA4tB,SAGH,MAKAD,MAIA,GAAAA,EAAA,CAEA,GAAA3tB,EAAA4tB,SAAA,CAEA,GAAAC,GAAA3mG,EAAAw/F,UAAA1mB,EAAA4tB,SAEAJ,GAAAM,eACAthH,KAAAsc,EAAA9Q,KACA03F,SAAAxoF,EAAAgxF,cAAAr7C,MAAAgxD,EAAAne,UACAC,aAAAke,EAAAle,aACAC,eAAAie,EAAAje,oBAKA4d,GAAAM,eACAthH,KAAAsc,EAAA9Q,KACA03F,SAAA5mF,EAAA4mF,SACAC,aAAA7mF,EAAA6mF,aACAC,eAAA9mF,EAAA8mF,eAKA9mF,GAAAglG,cAAAN,EAAAM,cAEA/D,EAAAC,GAAA+D,eAAAjlG,EAAAk3E,EAAApyC,GAEA4/D,EAAAzD,UACAjhG,EAAAihG,UAIA,GAAA5pC,GAAA4pC,EAAAU,eAEA,IAAA3hG,EAAA0yE,aAAA,CAEA1yE,EAAAklG,yBAAA,CAEA,QAAA9gH,GAAA,EAAmBA,EAAA4a,GAAAmmG,gBAA2B/gH,IAE9CizE,EAAA,cAAAjzE,IAAA,GAEA4b,EAAAklG,2BAQA,GAAAllG,EAAA4yE,aAIA,IAFA5yE,EAAAolG,yBAAA,EAEAhhH,EAAA,EAAeA,EAAA4a,GAAAqmG,gBAA2BjhH,IAE1CizE,EAAA,cAAAjzE,IAAA,GAEA4b,EAAAolG,0BAQAV,GAAAY,eAEA,IAAAC,GAAAb,EAAAzD,QAAAuE,aAEA,QAAA9xG,KAAAgxG,GAAAM,cAAApe,SAAA,CAEA,GAAAx6E,GAAAm5F,EAAA7xG,EAEA0Y,IAEAs4F,EAAAY,aAAAr6G,MAAAy5G,EAAAM,cAAApe,SAAAlzF,GAAA0Y,KAQA,QAAAk4F,GAAAtkG,GAEAylG,EAAAzlG,GAEAA,EAAA4B,iBAEAknB,GAAA48E,YAAA1lG,EAAAogF,SAAApgF,EAAAssF,cAAAtsF,EAAAosF,SAAApsF,EAAAqsF,SAAArsF,EAAAysF,mBAAAzsF,EAAAusF,cAAAvsF,EAAAwsF,eAIA1jE,GAAA48E,YAAAtnG,EAAAm9C,YAIAzyB,GAAA68E,aAAA3lG,EAAA0sF,WACA5jE,GAAA88E,aAAA5lG,EAAAqgF,WACAv3D,GAAA+8E,cAAA7lG,EAAAsgF,YACAx3D,GAAAg9E,cAAA9lG,EAAA2sF,YACA7jE,GAAAi9E,iBAAA/lG,EAAA4sF,cAAA5sF,EAAA6sF,oBAAA7sF,EAAA8sF,oBAIA,QAAA2Y,GAAAzlG,GAEAA,EAAA6B,OAAAzD,EAAA0D,WAAAgnB,GAAAk9E,OAAApH,GAAAqH,WAAAn9E,GAAAo9E,QAAAtH,GAAAqH,WACAn9E,GAAAq9E,aAAAnmG,EAAA6B,OAAAzD,EAAA88C,UAIA,QAAAqpD,GAAAthG,EAAA1D,EAAAquF,EAAA5tF,EAAA0M,GAEA05F,GAAA,CAEA,IAAA1B,GAAA7E,GAAAhuG,IAAAmO,IAEAA,EAAAgwE,aAAA00B,EAAAzD,UAEAwD,EAAAzkG,EAAAT,EAAAquF,EAAAlhF,GACA1M,EAAAgwE,eAIA,IAAAq2B,MACAC,KACAC,KAEAtF,EAAAyD,EAAAzD,QACAuF,EAAAvF,EAAAuE,cACAiB,EAAA/B,EAAAM,cAAApe,QAuEA,IArEAqa,EAAAv/G,KAAA69G,KAEAX,GAAA8H,WAAAzF,WACA1B,GAAA0B,EAAAv/G,GAEA2kH,KACAC,KACAC,MAIAvmG,EAAAte,KAAAg+G,KAEAA,UAAA6G,MACA7G,GAAA1/F,EAAAte,GAEA4kH,OAIAD,GAAApjG,IAAAu8F,MAEAZ,GAAA+H,iBAAAH,EAAAz0C,oBAAA9uD,EAAA8uD,iBAAAte,UAEAmzD,GAAAC,wBAEAjI,GAAAkI,UAAAN,EAAAO,cAAA,GAAAxjG,KAAAlJ,IAAA4I,EAAA27D,IAAA,GAAAr7D,KAAA+7B,MAKAr8B,IAAAu8F,QAAAv8F,IAKAjD,YAAA5B,GAAA2wF,gBACA/uF,YAAA5B,GAAA6D,mBACAjC,EAAAynF,SAEAnkG,SAAAkjH,EAAAQ,iBAEAtD,GAAAvwC,sBAAAlwD,EAAAgvD,aACA2sC,GAAAqI,UAAAT,EAAAQ,eAAAtD,GAAAlwG,EAAAkwG,GAAAtwG,EAAAswG,GAAA5uG,KAMAkL,YAAA5B,GAAA6D,mBACAjC,YAAA5B,GAAAuD,qBACA3B,YAAA5B,GAAA4vF,mBACAhuF,YAAA5B,GAAA2wF,gBACA/uF,EAAAouF,WAEA9qG,SAAAkjH,EAAAU,YAEAtI,GAAA+H,iBAAAH,EAAAU,cAAAjkG,EAAA23E,mBAAAnnC,WAYAzzC,EAAAouF,SAcA,GAZA1hF,EAAA0nF,YAAA9wG,SAAAkjH,EAAApS,YAEAwK,GAAA+H,iBAAAH,EAAApS,cAAA1nF,EAAA0nF,WAAA3gD,UAIA/mC,EAAA2nF,mBAAA/wG,SAAAkjH,EAAAnS,mBAEAuK,GAAA+H,iBAAAH,EAAAnS,qBAAA3nF,EAAA2nF,kBAAA5gD,UAIAmzD,GAAAO,qBAAAz6F,EAAAgoF,UAAAhoF,EAAAgoF,SAAAnB,iBAAA,CAEA,GAAAjwG,SAAAkjH,EAAA5S,YAAA,CAEA,GAAAwT,GAAAC,GAEAzI,IAAA0I,UAAAd,EAAA5S,YAAAwT,GACApoG,GAAAuoG,WAAA76F,EAAAgoF,SAAAd,YAAAwT,GAIA9jH,SAAAkjH,EAAA/S,kBAEAmL,GAAA0I,UAAAd,EAAA/S,iBAAA/mF,EAAAgoF,SAAAjB,kBAIAnwG,SAAAkjH,EAAA9S,mBAEAkL,GAAA0I,UAAAd,EAAA9S,kBAAAhnF,EAAAgoF,SAAAhB,uBAIIhnF,GAAAgoF,UAAAhoF,EAAAgoF,SAAAf,cAEJrwG,SAAAkjH,EAAAgB,oBAEA5I,GAAA+H,iBAAAH,EAAAgB,sBAAA96F,EAAAgoF,SAAAf,aAsGA,OA9FA2S,KAIA1Y,GAAA5tF,EAAA4tF,KAEA6Z,EAAAhB,EAAA7Y,IAIA5tF,YAAA5B,GAAA6D,mBACAjC,YAAA5B,GAAAuD,qBACA3B,EAAAT,UAEAogG,KAEA4G,KACAmB,EAAAnoG,EAAA0D,GACA08F,OAIA4G,GAEAoB,EAAAlB,EAAAmB,IACAC,EAAApB,OAIAoB,EAAApB,QAMAzmG,YAAA5B,GAAA4vF,mBACAhuF,YAAA5B,GAAAuD,qBACA3B,YAAA5B,GAAA6D,oBAEA6lG,EAAArB,EAAAzmG,GAMAA,YAAA5B,GAAAovF,kBAEAua,EAAAtB,EAAAzmG,GAEIA,YAAA5B,GAAAyvF,oBAEJka,EAAAtB,EAAAzmG,GACAgoG,EAAAvB,EAAAzmG,IAEIA,YAAA5B,GAAAuwF,eAEJsZ,EAAAxB,EAAAzmG,GAEIA,YAAA5B,GAAA6D,kBAEJimG,EAAAzB,EAAAzmG,GAEIA,YAAA5B,GAAAmwF,mBAEJkY,EAAAvI,MAAA35G,MAAA0e,EAAA07D,KACA8nC,EAAAtI,KAAA55G,MAAA0e,EAAA27D,IACA6nC,EAAAjuG,QAAAjU,MAAAyb,EAAAxH,SAEIwH,YAAA5B,GAAAowF,qBAEJiY,EAAAjuG,QAAAjU,MAAAyb,EAAAxH,SAIAkU,EAAAwgE,gBAAAltE,EAAAmoG,aAEAC,EAAA3B,EAAAlnG,GAMA8oG,EAAA3D,EAAAY,eAIAgD,EAAA9B,EAAA95F,GAEAppB,SAAAkjH,EAAA+B,aAEA3J,GAAA+H,iBAAAH,EAAA+B,eAAA77F,EAAAulD,YAAAxe,UAIAwtD,EAMA,QAAA6G,GAAAlhB,EAAA5mF,GAEA4mF,EAAApuF,QAAAjU,MAAAyb,EAAAxH,QAEAouF,EAAAgV,QAAAr3G,MAAAyb,EAAAlG,MAEAkG,EAAA6gF,WAEA+F,EAAA/F,SAAAt8F,MAAAyb,EAAA6gF,UAIA+F,EAAAh6F,IAAArI,MAAAyb,EAAApT,IACAg6F,EAAAY,YAAAjjG,MAAAyb,EAAAwnF,YACAZ,EAAAM,SAAA3iG,MAAAyb,EAAAknF,SAEAlnF,EAAA8nF,QAEAlB,EAAAkB,MAAAvjG,MAAAyb,EAAA8nF,MACAlB,EAAAmB,eAAAxjG,MAAAyb,EAAA+nF,eAYA,IAAAygB,EAgCA,IA9BAxoG,EAAApT,IAEA47G,EAAAxoG,EAAApT,IAEGoT,EAAAwnF,YAEHghB,EAAAxoG,EAAAwnF,YAEGxnF,EAAAqnF,gBAEHmhB,EAAAxoG,EAAAqnF,gBAEGrnF,EAAAonF,UAEHohB,EAAAxoG,EAAAonF,UAEGpnF,EAAAmnF,QAEHqhB,EAAAxoG,EAAAmnF,QAEGnnF,EAAAknF,SAEHshB,EAAAxoG,EAAAknF,SAEGlnF,EAAAsuF,cAEHka,EAAAxoG,EAAAsuF,aAIAhrG,SAAAklH,EAAA,CAEA,GAAA1/F,GAAA0/F,EAAA1/F,OACAi8B,EAAAyjE,EAAAzjE,MAEA6hD,GAAAiV,aAAAt3G,MAAAkS,IAAAqS,EAAAtV,EAAAsV,EAAA1V,EAAA2xC,EAAAvxC,EAAAuxC,EAAA3xC,GAIAwzF,EAAAa,OAAAljG,MAAAyb,EAAAynF,OACAb,EAAAkV,WAAAv3G,MAAAyb,EAAAynF,iBAAArpF,GAAAk9E,sBAAA,KAEAsL,EAAAe,aAAApjG,MAAAyb,EAAA2nF,aACAf,EAAAqH,gBAAA1pG,MAAAyb,EAAAiuF,gBAIA,QAAA8Z,GAAAnhB,EAAA5mF,GAEA4mF,EAAAgV,QAAAr3G,MAAAyb,EAAAlG,MACA8sF,EAAApuF,QAAAjU,MAAAyb,EAAAxH,QAIA,QAAAwvG,GAAAphB,EAAA5mF,GAEA4mF,EAAAkH,SAAAvpG,MAAAyb,EAAA8tF,SACAlH,EAAAqX,UAAA15G,MAAAyb,EAAA8tF,SAAA9tF,EAAA+tF,QACAnH,EAAA7zC,MAAAxuD,MAAAyb,EAAA+yC,MAIA,QAAAk1D,GAAArhB,EAAA5mF,GASA,GAPA4mF,EAAA8W,QAAAn5G,MAAAyb,EAAAlG,MACA8sF,EAAApuF,QAAAjU,MAAAyb,EAAAxH,QACAouF,EAAArzD,KAAAhvC,MAAAyb,EAAAuzB,KACAqzD,EAAA7zC,MAAAxuD,MAAAkkH,EAAAxuG,OAAA,EAEA2sF,EAAAh6F,IAAArI,MAAAyb,EAAApT,IAEA,OAAAoT,EAAApT,IAAA,CAEA,GAAAkc,GAAA9I,EAAApT,IAAAkc,OACAi8B,EAAA/kC,EAAApT,IAAAm4C,MAEA6hD,GAAAiV,aAAAt3G,MAAAkS,IAAAqS,EAAAtV,EAAAsV,EAAA1V,EAAA2xC,EAAAvxC,EAAAuxC,EAAA3xC,IAMA,QAAAq0G,GAAA7gB,EAAAgH,GAEAhH,EAAA4V,SAAAj4G,MAAAqpG,EAAA9zF,MAEA8zF,YAAAxvF,GAAAg5F,KAEAxQ,EAAA0V,QAAA/3G,MAAAqpG,EAAAjvB,KACAioB,EAAA2V,OAAAh4G,MAAAqpG,EAAAhvB,KAEGgvB,YAAAxvF,GAAAi5F,UAEHzQ,EAAAyV,WAAA93G,MAAAqpG,EAAA0J,SAMA,QAAA4Q,GAAAthB,EAAA5mF,GAEA4mF,EAAA7F,SAAAx8F,MAAAyb,EAAA+gF,SACA6F,EAAA3F,UAAA18F,MAAAyb,EAAAihF,UAEAjhF,EAAA4nF,WAEAhB,EAAAgB,SAAArjG,MAAAyb,EAAA4nF,SACAhB,EAAAiB,kBAAAtjG,MAAAyb,EAAA6nF,mBAIA7nF,EAAAsuF,cAEA1H,EAAA0H,YAAA/pG,MAAAyb,EAAAsuF,aAIAtuF,EAAAmnF,UAEAP,EAAAO,QAAA5iG,MAAAyb,EAAAmnF,QACAP,EAAArD,UAAAh/F,MAAAyb,EAAAujF,WAIAvjF,EAAAonF,YAEAR,EAAAQ,UAAA7iG,MAAAyb,EAAAonF,UACAR,EAAAnD,YAAAl/F,MAAAye,KAAAhD,EAAAyjF,cAIAzjF,EAAAqnF,kBAEAT,EAAAS,gBAAA9iG,MAAAyb,EAAAqnF,gBACAT,EAAAU,kBAAA/iG,MAAAyb,EAAAsnF,kBACAV,EAAAW,iBAAAhjG,MAAAyb,EAAAunF,kBAMA,QAAAogB,GAAA/gB,EAAArnF,GAEAqnF,EAAA6V,kBAAAl4G,MAAAgb,EAAAmpG,QAEA9hB,EAAA+V,sBAAAp4G,MAAAgb,EAAAopG,YAAArgG,OACAs+E,EAAA8V,0BAAAn4G,MAAAgb,EAAAopG,YAAArxC,UAEAsvB,EAAAmW,gBAAAx4G,MAAAgb,EAAA+1D,MAAAhtD,OACAs+E,EAAAoW,mBAAAz4G,MAAAgb,EAAA+1D,MAAAgC,UACAsvB,EAAAqW,mBAAA14G,MAAAgb,EAAA+1D,MAAAszC,UACAhiB,EAAAsW,gBAAA34G,MAAAgb,EAAA+1D,MAAAuzC,OAEAjiB,EAAAuW,eAAA54G,MAAAgb,EAAAupG,KAAAxgG,OACAs+E,EAAAwW,kBAAA74G,MAAAgb,EAAAupG,KAAAxxC,UACAsvB,EAAA0W,kBAAA/4G,MAAAgb,EAAAupG,KAAAF,UACAhiB,EAAAyW,mBAAA94G,MAAAgb,EAAAupG,KAAAC,WACAniB,EAAA2W,kBAAAh5G,MAAAgb,EAAAupG,KAAAE,UACApiB,EAAA4W,kBAAAj5G,MAAAgb,EAAAupG,KAAAG,UACAriB,EAAA6W,eAAAl5G,MAAAgb,EAAAupG,KAAAD,OAEAjiB,EAAAiW,wBAAAt4G,MAAAgb,EAAA2pG,KAAAC,UACAviB,EAAAkW,2BAAAv4G,MAAAgb,EAAA2pG,KAAAE,aACAxiB,EAAAgW,yBAAAr4G,MAAAgb,EAAA2pG,KAAA5xC,UAMA,QAAAuwC,GAAAjhB,EAAAriG,GAEAqiG,EAAA6V,kBAAAzsB,YAAAzrF,EAEAqiG,EAAA+V,sBAAA3sB,YAAAzrF,EACAqiG,EAAA8V,0BAAA1sB,YAAAzrF,EAEAqiG,EAAAmW,gBAAA/sB,YAAAzrF,EACAqiG,EAAAoW,mBAAAhtB,YAAAzrF,EACAqiG,EAAAqW,mBAAAjtB,YAAAzrF,EACAqiG,EAAAsW,gBAAAltB,YAAAzrF,EAEAqiG,EAAAuW,eAAAntB,YAAAzrF,EACAqiG,EAAAwW,kBAAAptB,YAAAzrF,EACAqiG,EAAA0W,kBAAAttB,YAAAzrF,EACAqiG,EAAAyW,mBAAArtB,YAAAzrF,EACAqiG,EAAA2W,kBAAAvtB,YAAAzrF,EACAqiG,EAAA4W,kBAAAxtB,YAAAzrF,EACAqiG,EAAA6W,eAAAztB,YAAAzrF,EAEAqiG,EAAAiW,wBAAA7sB,YAAAzrF,EACAqiG,EAAAkW,2BAAA9sB,YAAAzrF,EACAqiG,EAAAgW,yBAAA5sB,YAAAzrF,EAIA,QAAA6jH,GAAAxhB,EAAArnF,GAEA,GAAAqnF,EAAApJ,aAIA,OAFAllB,GAAA,EAEAl0E,EAAA,EAAA2xE,EAAAx2D,EAAAlb,OAAuCD,EAAA2xE,EAAQ3xE,IAAA,CAE/C,GAAA2a,GAAAQ,EAAAnb,EAEA2a,GAAAkuE,aAEAluE,YAAAX,GAAA0/E,WAAA/+E,YAAAX,GAAA+B,oBAEAymF,EAAAvJ,UAAA94F,MAAA+zE,GAAAv5D,EAAAs+E,UACAuJ,EAAAtJ,cAAA/4F,MAAA+zE,GAAAv5D,EAAAu+E,cAEAsJ,EAAApJ,aAAAj5F,MAAA+zE,GAAAv5D,EAAAy+E,aAEAoJ,EAAA1J,eAAA34F,MAAA+zE,GAAAv5D,EAAAm+E,eACA0J,EAAA3J,WAAA14F,MAAA+zE,GAAAv5D,EAAAk+E,WAEA3kB,MAYA,QAAAgwC,GAAA1hB,EAAAl6E,GAEAkyF,GAAA+H,iBAAA/f,EAAAha,mBAAAlgE,EAAAkgE,gBAAAn5B,UAEAmzC,EAAA/gB,cAEA+4B,GAAAyK,iBAAAziB,EAAA/gB,gBAAAn5D,EAAAm5D,aAAApyB,UAMA,QAAA4zD,KAEA,GAAAD,GAAAhB,EAUA,OARAgB,IAAAR,GAAA0C,aAEAv7G,QAAAwmD,KAAA,gCAAA6yD,EAAA,+CAAAR,GAAA0C,aAIAlD,IAAA,EAEAgB,EAIA,QAAAiB,GAAAzhB,GAIA,OAFA1H,GAAAkoB,EAEA9uC,EAAA,EAAAkb,EAAAoT,EAAAviG,OAAwCi0E,EAAAkb,EAAQlb,IAAA,CAEhD,GAAAixC,GAAA3iB,EAAAtuB,GAAA,EAGA,IAAAixC,EAAAv5B,iBAAA,CAEA,GAAA9gF,GAAAq6G,EAAAr6G,KACA3K,EAAAglH,EAAAhlH,MACA6nB,EAAAw6E,EAAAtuB,GAAA,EAEA,QAAAppE,GAEA,SACA0vG,GAAA0I,UAAAl7F,EAAA7nB,EACA,MAEA,UACAq6G,GAAAkI,UAAA16F,EAAA7nB,EACA,MAEA,UACAq6G,GAAA4K,UAAAp9F,EAAA7nB,EAAA,GAAAA,EAAA,GACA,MAEA,UACAq6G,GAAAqI,UAAA76F,EAAA7nB,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACA,MAEA,UACAq6G,GAAA6K,UAAAr9F,EAAA7nB,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACA,MAEA,WACAq6G,GAAA8K,WAAAt9F,EAAA7nB,EACA,MAEA,WACAq6G,GAAA+K,WAAAv9F,EAAA7nB,EACA,MAEA,WACAq6G,GAAAgL,WAAAx9F,EAAA7nB,EACA,MAEA,WACAq6G,GAAAiL,WAAAz9F,EAAA7nB,EACA,MAEA,WACAq6G,GAAAkL,WAAA19F,EAAA7nB,EACA,MAEA,WACAq6G,GAAAmL,WAAA39F,EAAA7nB,EACA,MAEA,iBACAq6G,GAAAyK,iBAAAj9F,KAAA7nB,EACA,MAEA,iBACAq6G,GAAA+H,iBAAAv6F,KAAA7nB,EACA,MAIA,SAGAq6G,GAAA0I,UAAAl7F,EAAA7nB,EAEA,MAEA,SAGAq6G,GAAAkI,UAAA16F,EAAA7nB,EAEA,MAEA,UAGAq6G,GAAA4K,UAAAp9F,EAAA7nB,EAAAiP,EAAAjP,EAAA6O,EAEA,MAEA,UAGAwrG,GAAAqI,UAAA76F,EAAA7nB,EAAAiP,EAAAjP,EAAA6O,EAAA7O,EAAAuQ,EAEA,MAEA,UAGA8pG,GAAA6K,UAAAr9F,EAAA7nB,EAAAiP,EAAAjP,EAAA6O,EAAA7O,EAAAuQ,EAAAvQ,EAAA2Q,EAEA,MAEA,SAGA0pG,GAAAqI,UAAA76F,EAAA7nB,EAAAqP,EAAArP,EAAA4O,EAAA5O,EAAA+O,EAEA,MAEA,WAGAsrG,GAAA8K,WAAAt9F,EAAA7nB,EAEA,MAEA,UAGAq6G,GAAA+K,WAAAv9F,EAAA7nB,EAEA,MAEA,WAGAq6G,GAAAgL,WAAAx9F,EAAA7nB,EAEA,MAEA,UAGAq6G,GAAAkL,WAAA19F,EAAA7nB,EAEA,MAEA,WAIAjB,SAAAimH,EAAAS,SAEAT,EAAAS,OAAA,GAAArhG,cAAA,EAAApkB,EAAAF,QAIA,QAAAD,GAAA,EAAAgmF,EAAA,EAAArU,EAAAxxE,EAAAF,OAAgDD,EAAA2xE,EAAQ3xE,IAAAgmF,GAAA,EAExDm/B,EAAAS,OAAA5/B,EAAA,GAAA7lF,EAAAH,GAAAoP,EACA+1G,EAAAS,OAAA5/B,EAAA,GAAA7lF,EAAAH,GAAAgP,CAIAwrG,IAAAiL,WAAAz9F,EAAAm9F,EAAAS,OAEA,MAEA,WAIA1mH,SAAAimH,EAAAS,SAEAT,EAAAS,OAAA,GAAArhG,cAAA,EAAApkB,EAAAF,QAIA,QAAAD,GAAA,EAAA6lH,EAAA,EAAAl0C,EAAAxxE,EAAAF,OAAgDD,EAAA2xE,EAAQ3xE,IAAA6lH,GAAA,EAExDV,EAAAS,OAAAC,EAAA,GAAA1lH,EAAAH,GAAAoP,EACA+1G,EAAAS,OAAAC,EAAA,GAAA1lH,EAAAH,GAAAgP,EACAm2G,EAAAS,OAAAC,EAAA,GAAA1lH,EAAAH,GAAA0Q,CAIA8pG,IAAAkL,WAAA19F,EAAAm9F,EAAAS,OAEA,MAEA,WAIA1mH,SAAAimH,EAAAS,SAEAT,EAAAS,OAAA,GAAArhG,cAAA,EAAApkB,EAAAF,QAIA,QAAAD,GAAA,EAAA8lH,EAAA,EAAAn0C,EAAAxxE,EAAAF,OAAgDD,EAAA2xE,EAAQ3xE,IAAA8lH,GAAA,EAExDX,EAAAS,OAAAE,EAAA,GAAA3lH,EAAAH,GAAAoP,EACA+1G,EAAAS,OAAAE,EAAA,GAAA3lH,EAAAH,GAAAgP,EACAm2G,EAAAS,OAAAE,EAAA,GAAA3lH,EAAAH,GAAA0Q,EACAy0G,EAAAS,OAAAE,EAAA,GAAA3lH,EAAAH,GAAA8Q,CAIA0pG,IAAAmL,WAAA39F,EAAAm9F,EAAAS,OAEA,MAEA,UAGApL,GAAAyK,iBAAAj9F,KAAA7nB,EAAAkvD,SAEA,MAEA,WAIAnwD,SAAAimH,EAAAS,SAEAT,EAAAS,OAAA,GAAArhG,cAAA,EAAApkB,EAAAF,QAIA,QAAAD,GAAA,EAAA2xE,EAAAxxE,EAAAF,OAAwCD,EAAA2xE,EAAQ3xE,IAEhDG,EAAAH,GAAA80E,qBAAAqwC,EAAAS,OAAA,EAAA5lH,EAIAw6G,IAAAyK,iBAAAj9F,KAAAm9F,EAAAS,OAEA,MAEA,UAGApL,GAAA+H,iBAAAv6F,KAAA7nB,EAAAkvD,SAEA,MAEA,WAIAnwD,SAAAimH,EAAAS,SAEAT,EAAAS,OAAA,GAAArhG,cAAA,GAAApkB,EAAAF,QAIA,QAAAD,GAAA,EAAA2xE,EAAAxxE,EAAAF,OAAwCD,EAAA2xE,EAAQ3xE,IAEhDG,EAAAH,GAAA80E,qBAAAqwC,EAAAS,OAAA,GAAA5lH,EAIAw6G,IAAA+H,iBAAAv6F,KAAAm9F,EAAAS,OAEA,MAEA,SASA,GALA9qB,EAAA36F,EACA6iH,EAAAC,IAEAzI,GAAA0I,UAAAl7F,EAAAg7F,IAEAloB,EAAA,QAEAA,aAAA9gF,GAAA8xF,aACAhsG,MAAAC,QAAA+6F,EAAAI,QAAA,IAAAJ,EAAAI,MAAAj7F,OAIA8lH,EAAAjrB,EAAAkoB,GAEMloB,YAAA9gF,GAAAk9E,sBAEN8uB,EAAAlrB,EAAAkoB,GAIApoG,GAAAuoG,WAAAroB,EAAAkoB,EAIA,MAEA,UAIA9jH,SAAAimH,EAAAS,SAEAT,EAAAS,UAIA,QAAA5lH,GAAA,EAAA2xE,EAAAwzC,EAAAhlH,MAAAF,OAAgDD,EAAA2xE,EAAQ3xE,IAExDmlH,EAAAS,OAAA5lH,GAAAijH,GAIAzI,IAAA8K,WAAAt9F,EAAAm9F,EAAAS,OAEA,QAAA5lH,GAAA,EAAA2xE,EAAAwzC,EAAAhlH,MAAAF,OAAgDD,EAAA2xE,EAAQ3xE,IAExD86F,EAAAqqB,EAAAhlH,MAAAH,GACAgjH,EAAAmC,EAAAS,OAAA5lH,GAEA86F,GAEAlgF,GAAAuoG,WAAAroB,EAAAkoB,EAIA,MAEA,SAEAr5G,QAAAwmD,KAAA,8CAAArlD,MAQA,QAAAm7G,GAAAnkG,EAAA4C,EAAAhP,EAAA0iF,GAEAt2E,EAAA4C,EAAA,GAAAhP,EAAAlG,EAAA4oF,EACAt2E,EAAA4C,EAAA,GAAAhP,EAAA3G,EAAAqpF,EACAt2E,EAAA4C,EAAA,GAAAhP,EAAAxG,EAAAkpF,EAIA,QAAAkrB,GAAAnoG,EAAA0D,GAEA,GAAAtP,GAAA22G,EAAAvrG,EAEAjF,EAAA4jF,EAAAC,EACAnB,EACA58E,EAHAhM,EAAA,EAAAT,EAAA,EAAAG,EAAA,EAKAi3G,EAAA3C,GAEAV,EAAAjkG,EAAA23E,mBAEA4vB,EAAAD,EAAA5B,YAAArgG,OACAmiG,EAAAF,EAAA5B,YAAArxC,UAEAozC,EAAAH,EAAAj1C,MAAAhtD,OACAqiG,EAAAJ,EAAAj1C,MAAAgC,UACAszC,EAAAL,EAAAj1C,MAAAszC,UACAiC,EAAAN,EAAAj1C,MAAAuzC,OAEAiC,EAAAP,EAAAzB,KAAAxgG,OACAyiG,EAAAR,EAAAzB,KAAAxxC,UACA0zC,EAAAT,EAAAzB,KAAAF,UACAqC,EAAAV,EAAAzB,KAAAC,WACAmC,EAAAX,EAAAzB,KAAAE,UACAmC,EAAAZ,EAAAzB,KAAAG,UACAmC,EAAAb,EAAAzB,KAAAD,OAEAwC,EAAAd,EAAArB,KAAAC,UACAmC,EAAAf,EAAArB,KAAAE,aACAmC,EAAAhB,EAAArB,KAAA5xC,UAEAk0C,EAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,EAEAC,EAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,EAEAC,EAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,CAEA,KAAAx4G,EAAA,EAAA22G,EAAA/qG,EAAAlb,OAAkCsP,EAAA22G,EAAQ32G,IAI1C,GAFAoL,EAAAQ,EAAA5L,IAEAoL,EAAA09E,WAMA,GAJA3iF,EAAAiF,EAAAjF,MACA0iF,EAAAz9E,EAAAy9E,UACA58E,EAAAb,EAAAa,SAEAb,YAAAX,GAAAm+E,aAAA,CAEA,IAAAx9E,EAAAgD,QAAA,QAEAnO,IAAAkG,EAAAlG,EACAT,GAAA2G,EAAA3G,EACAG,GAAAwG,EAAAxG,MAEI,IAAAyL,YAAAX,GAAA+B,iBAAA,CAIJ,GAFAyrG,GAAA,GAEA7sG,EAAAgD,QAAA,QAEAqqG,IAAAj5C,sBAAAp0D,EAAAkzD,aACAyxC,GAAAvwC,sBAAAp0D,EAAAxR,OAAA0kE,aACAm6C,GAAAp4D,IAAA0vD,IACA0I,GAAAl6C,mBAAAg1C,GAEA8E,EAAA,EAAAR,EAEAf,EAAAuB,EAAA,GAAAI,GAAA54G,EACAi3G,EAAAuB,EAAA,GAAAI,GAAAh5G,EACAq3G,EAAAuB,EAAA,GAAAI,GAAAt3G,EAEAu1G,EAAAG,EAAAwB,EAAAlyG,EAAA0iF,GAEAgvB,GAAA,MAEI,IAAAzsG,YAAAX,GAAAw/E,WAAA,CAIJ,GAFAiuB,GAAA,GAEA9sG,EAAAgD,QAAA,QAEAkqG,GAAA,EAAAR,EAEApB,EAAAK,EAAAuB,EAAAnyG,EAAA0iF,GAEAknB,GAAAvwC,sBAAAp0D,EAAAkzD,aACAyxC,GAAAvyC,aAAA+1C,GAEAyD,EAAAsB,EAAA,GAAAvI,GAAAlwG,EACAm3G,EAAAsB,EAAA,GAAAvI,GAAAtwG,EACAu3G,EAAAsB,EAAA,GAAAvI,GAAA5uG,EAGA81G,EAAAa,GAAA7rG,EACAirG,EAAAY,GAAA,IAAA1sG,EAAAa,SAAA,EAAAb,EAAA8+E,MAEA4tB,GAAA,MAEI,IAAA1sG,YAAAX,GAAA0/E,UAAA,CAIJ,GAFAguB,GAAA,GAEA/sG,EAAAgD,QAAA,QAEAmqG,GAAA,EAAAR,EAEArB,EAAAS,EAAAoB,EAAApyG,EAAA0iF,GAEA4vB,GAAAj5C,sBAAAp0D,EAAAkzD,aACAyxC,GAAA1gG,KAAAopG,IAAAj7C,aAAA+1C,GAEA6D,EAAAmB,EAAA,GAAAxI,GAAAlwG,EACAu3G,EAAAmB,EAAA,GAAAxI,GAAAtwG,EACA23G,EAAAmB,EAAA,GAAAxI,GAAA5uG,EAEAk2G,EAAAU,GAAA9rG,EAEA8jG,GAAAvwC,sBAAAp0D,EAAAxR,OAAA0kE,aACAm6C,GAAAp4D,IAAA0vD,IACA0I,GAAAl6C,mBAAAg1C,GAEA+D,EAAAiB,EAAA,GAAAE,GAAA54G,EACAy3G,EAAAiB,EAAA,GAAAE,GAAAh5G,EACA63G,EAAAiB,EAAA,GAAAE,GAAAt3G,EAEAo2G,EAAAQ,GAAAnoG,KAAAkyC,IAAA12C,EAAAs0C,OACA83D,EAAAO,GAAA3sG,EAAAsM,SACA+/F,EAAAM,GAAA,IAAA3sG,EAAAa,SAAA,EAAAb,EAAA8+E,MAEA6tB,GAAA,MAEI,IAAA3sG,YAAAX,GAAAq/E,gBAAA,CAIJ,GAFAsuB,GAAA,GAEAhtG,EAAAgD,QAAA,QAEAqqG,IAAAj5C,sBAAAp0D,EAAAkzD,aACAm6C,GAAAl6C,mBAAAg1C,GAEAiF,EAAA,EAAAR,EAEAJ,EAAAY,EAAA,GAAAC,GAAA54G,EACA+3G,EAAAY,EAAA,GAAAC,GAAAh5G,EACAm4G,EAAAY,EAAA,GAAAC,GAAAt3G,EAEA4oF,EAAA3+E,EAAAjF,MACA6jF,EAAA5+E,EAAA4+E,YAEA0sB,EAAAgB,EAAAc,EAAAzuB,EAAAlB,GACA6tB,EAAAiB,EAAAa,EAAAxuB,EAAAnB,GAEAmvB,GAAA,EASA,IAAAh4G,EAAA,EAAA63G,EAAAlB,EAAA/mG,KAAAZ,IAAA6nG,EAAAnmH,OAAA,EAAAunH,GAA2Ej4G,EAAA22G,EAAQ32G,IAAA62G,EAAA72G,GAAA,CACnF,KAAAA,EAAA,EAAA83G,EAAAnB,EAAA/mG,KAAAZ,IAAA+nG,EAAArmH,OAAA,EAAAwnH,GAAiFl4G,EAAA22G,EAAQ32G,IAAA+2G,EAAA/2G,GAAA,CACzF,KAAAA,EAAA,EAAA+3G,EAAApB,EAAA/mG,KAAAZ,IAAAmoG,EAAAzmH,OAAA,EAAAynH,GAA8En4G,EAAA22G,EAAQ32G,IAAAm3G,EAAAn3G,GAAA,CACtF,KAAAA,EAAA,EAAAg4G,EAAArB,EAAA/mG,KAAAZ,IAAA0oG,EAAAhnH,OAAA,EAAA0nH,GAAiFp4G,EAAA22G,EAAQ32G,IAAA03G,EAAA13G,GAAA,CACzF,KAAAA,EAAA,EAAAg4G,EAAArB,EAAA/mG,KAAAZ,IAAA2oG,EAAAjnH,OAAA,EAAA0nH,GAAoFp4G,EAAA22G,EAAQ32G,IAAA23G,EAAA33G,GAAA,CAE5F42G,GAAA5B,YAAAtkH,OAAAmnH,EACAjB,EAAAj1C,MAAAjxE,OAAAonH,EACAlB,EAAAzB,KAAAzkH,OAAAqnH,EACAnB,EAAArB,KAAA7kH,OAAAsnH,EAEApB,EAAA7B,QAAA,GAAA90G,EACA22G,EAAA7B,QAAA,GAAAv1G,EACAo3G,EAAA7B,QAAA,GAAAp1G,EA8CA,QAAA+4G,GAAAC,EAAAptB,EAAAqtB,GAEA,GAAAjL,EAkCA,IAhCAiL,GAEA3N,GAAA4N,cAAAF,EAAA1N,GAAA6N,eAAAC,EAAAxtB,EAAAQ,QACAkf,GAAA4N,cAAAF,EAAA1N,GAAA+N,eAAAD,EAAAxtB,EAAAS,QAEAif,GAAA4N,cAAAF,EAAA1N,GAAAgO,mBAAAF,EAAAxtB,EAAA1D,YACAojB,GAAA4N,cAAAF,EAAA1N,GAAAiO,mBAAAH,EAAAxtB,EAAAzD,cAIAmjB,GAAA4N,cAAAF,EAAA1N,GAAA6N,eAAA7N,GAAAkO,eACAlO,GAAA4N,cAAAF,EAAA1N,GAAA+N,eAAA/N,GAAAkO,eAEA5tB,EAAAQ,QAAAthF,EAAA2/C,qBAAAmhC,EAAAS,QAAAvhF,EAAA2/C,qBAEAhwD,QAAAwmD,KAAA,mIAAA2qC,EAAAH,WAAA,MAIA6f,GAAA4N,cAAAF,EAAA1N,GAAAgO,mBAAAG,EAAA7tB,EAAA1D,YACAojB,GAAA4N,cAAAF,EAAA1N,GAAAiO,mBAAAE,EAAA7tB,EAAAzD,YAEAyD,EAAAzD,YAAAr9E,EAAA6/C,eAAAihC,EAAAzD,YAAAr9E,EAAAggD,cAEArwD,QAAAwmD,KAAA,qIAAA2qC,EAAAH,WAAA,OAMAuiB,EAAAC,GAAA1vG,IAAA,kCAEA,CAEA,GAAAqtF,EAAAhwF,OAAAkP,EAAAygD,WAAA,OAAA0iD,GAAA1vG,IAAA,kCACA,IAAAqtF,EAAAhwF,OAAAkP,EAAA0gD,eAAA,OAAAyiD,GAAA1vG,IAAA,yCAEAqtF,EAAAD,WAAA,GAAA4gB,GAAAhuG,IAAAqtF,GAAA8tB,uBAEApO,GAAAqO,cAAAX,EAAAhL,EAAA4L,2BAAA3pG,KAAA02B,IAAAilD,EAAAD,WAAAjgF,GAAAmuG,qBACAtN,GAAAhuG,IAAAqtF,GAAA8tB,oBAAA9tB,EAAAD,aAQA,QAAAmuB,GAAA/M,EAAAnhB,EAAAmuB,GAEA/pH,SAAA+8G,EAAAG,cAEAH,EAAAG,eAEAthB,EAAAshB,eAEAthB,EAAAl7E,iBAAA,UAAA87F,GAEAO,EAAAI,eAAA7B,GAAA0O,gBAEAtN,GAAAzwB,YAIAzmD,GAAAykF,cAAA3O,GAAA4O,SAAAH,GACAvkF,GAAA2kF,YAAA7O,GAAA8O,WAAArN,EAAAI,gBAEA7B,GAAA+O,YAAA/O,GAAAgP,oBAAA1uB,EAAAyQ,OACAiP,GAAA+O,YAAA/O,GAAAiP,+BAAA3uB,EAAAwQ,kBACAkP,GAAA+O,YAAA/O,GAAAkP,iBAAA5uB,EAAA0Q,iBAEA1Q,EAAAI,MAAAyuB,EAAA7uB,EAAAI,MAAAsnB,GAAAoH,eAEA,IAAA1uB,GAAAJ,EAAAI,MACAitB,EAAAnuG,EAAAmF,KAAA+jE,aAAAgY,EAAAtlF,QAAAoE,EAAAmF,KAAA+jE,aAAAgY,EAAArlF,QACAg0G,EAAAvB,EAAAxtB,EAAA3D,QACA2yB,EAAAxB,EAAAxtB,EAAAhwF,KAEAm9G,GAAAzN,GAAA8O,WAAAxuB,EAAAqtB,EAEA,IAAA4B,GAAAxiB,EAAAzM,EAAAyM,OAEA,IAAAzM,YAAA9gF,GAAAqtF,YAMA,GAAAE,EAAAtnG,OAAA,GAAAkoH,EAAA,CAEA,OAAAnoH,GAAA,EAAA2xE,EAAA41B,EAAAtnG,OAAyCD,EAAA2xE,EAAQ3xE,IAEjD+pH,EAAAxiB,EAAAvnG,GACA0kC,GAAAslF,WAAAxP,GAAA8O,WAAAtpH,EAAA6pH,EAAAE,EAAAn0G,MAAAm0G,EAAAl0G,OAAA,EAAAg0G,EAAAC,EAAAC,EAAA7mG,KAIA43E,GAAAvD,uBAIA7yD,IAAAslF,WAAAxP,GAAA8O,WAAA,EAAAO,EAAA3uB,EAAAtlF,MAAAslF,EAAArlF,OAAA,EAAAg0G,EAAAC,EAAA5uB,EAAAh4E,UAIG,IAAA43E,YAAA9gF,GAAA0tF,kBAEH,OAAA1nG,GAAA,EAAA2xE,EAAA41B,EAAAtnG,OAAwCD,EAAA2xE,EAAQ3xE,IAEhD+pH,EAAAxiB,EAAAvnG,GAEA86F,EAAA3D,SAAAn9E,EAAAghD,YAAA8/B,EAAA3D,SAAAn9E,EAAA+gD,UAEAr2B,GAAAulF,8BAAA9/G,QAAA0/G,MAEAnlF,GAAAwlF,qBAAA1P,GAAA8O,WAAAtpH,EAAA6pH,EAAAE,EAAAn0G,MAAAm0G,EAAAl0G,OAAA,EAAAk0G,EAAA7mG,MAIAvZ,QAAAwmD,KAAA,kGAMAzrB,GAAAslF,WAAAxP,GAAA8O,WAAAtpH,EAAA6pH,EAAAE,EAAAn0G,MAAAm0G,EAAAl0G,OAAA,EAAAg0G,EAAAC,EAAAC,EAAA7mG,UAcA,IAAAqkF,EAAAtnG,OAAA,GAAAkoH,EAAA,CAEA,OAAAnoH,GAAA,EAAA2xE,EAAA41B,EAAAtnG,OAAyCD,EAAA2xE,EAAQ3xE,IAEjD+pH,EAAAxiB,EAAAvnG,GACA0kC,GAAAslF,WAAAxP,GAAA8O,WAAAtpH,EAAA6pH,IAAAC,EAAAC,EAIAjvB,GAAAvD,uBAIA7yD,IAAAslF,WAAAxP,GAAA8O,WAAA,EAAAO,IAAAC,EAAAhvB,EAAAI,MAMAJ,GAAAvD,iBAAA4wB,GAAA3N,GAAA2P,eAAA3P,GAAA8O,YAEArN,EAAAmO,UAAAtvB,EAAA90C,QAEA80C,EAAA2Q,UAAA3Q,EAAA2Q,SAAA3Q,GAoCA,QAAA6uB,GAAAzuB,EAAAmvB,GAEA,GAAAnvB,EAAAtlF,MAAAy0G,GAAAnvB,EAAArlF,OAAAw0G,EAAA,CAKA,GAAA17D,GAAA07D,EAAAlrG,KAAAZ,IAAA28E,EAAAtlF,MAAAslF,EAAArlF,QAEAslF,EAAA18F,SAAAD,cAAA,SACA28F,GAAAvlF,MAAAuJ,KAAA2tC,MAAAouC,EAAAtlF,MAAA+4C,GACAwsC,EAAAtlF,OAAAsJ,KAAA2tC,MAAAouC,EAAArlF,OAAA84C,EAEA,IAAAvrD,GAAA+3F,EAAAC,WAAA,KAKA,OAJAh4F,GAAAi4F,UAAAH,EAAA,IAAAA,EAAAtlF,MAAAslF,EAAArlF,OAAA,IAAAslF,EAAAvlF,MAAAulF,EAAAtlF,QAEAlM,QAAAwmD,KAAA,0CAAA+qC,EAAAtlF,MAAA,IAAAslF,EAAArlF,OAAA,iBAAAslF,EAAAvlF,MAAA,IAAAulF,EAAAtlF,OAAAqlF,GAEAC,EAIA,MAAAD,GAIA,QAAA6qB,GAAAjrB,EAAAmuB,GAEA,GAAAhN,GAAAR,GAAAhuG,IAAAqtF,EAEA,QAAAA,EAAAI,MAAAj7F,OAEA,GAAA66F,EAAA90C,QAAA,GAAAi2D,EAAAmO,YAAAtvB,EAAA90C,QAAA,CAEAi2D,EAAAC,4BAEAphB,EAAAl7E,iBAAA,UAAA87F,GAEAO,EAAAC,0BAAA1B,GAAA0O,gBAEAtN,GAAAzwB,YAIAzmD,GAAAykF,cAAA3O,GAAA4O,SAAAH,GACAvkF,GAAA2kF,YAAA7O,GAAA8P,iBAAArO,EAAAC,2BAEA1B,GAAA+O,YAAA/O,GAAAgP,oBAAA1uB,EAAAyQ,MAOA,QALAgf,GAAAzvB,YAAA9gF,GAAA0tF,kBACA8iB,EAAA1vB,EAAAI,MAAA,YAAAlhF,GAAAqtF,YAEAojB,KAEAzqH,EAAA,EAAoBA,EAAA,EAAOA,KAE3B4a,GAAA8vG,mBAAAH,GAAAC,EAMAC,EAAAzqH,GAAAwqH,EAAA1vB,EAAAI,MAAAl7F,GAAAk7F,MAAAJ,EAAAI,MAAAl7F,GAJAyqH,EAAAzqH,GAAA2pH,EAAA7uB,EAAAI,MAAAl7F,GAAAwiH,GAAAmI,eAUA,IAAAzvB,GAAAuvB,EAAA,GACAtC,EAAAnuG,EAAAmF,KAAA+jE,aAAAgY,EAAAtlF,QAAAoE,EAAAmF,KAAA+jE,aAAAgY,EAAArlF,QACAg0G,EAAAvB,EAAAxtB,EAAA3D,QACA2yB,EAAAxB,EAAAxtB,EAAAhwF,KAEAm9G,GAAAzN,GAAA8P,iBAAAxvB,EAAAqtB,EAEA,QAAAnoH,GAAA,EAAoBA,EAAA,EAAOA,IAE3B,GAAAuqH,EAgBA,OAFAR,GAAAxiB,EAAAkjB,EAAAzqH,GAAAunG,QAEArzB,EAAA,EAAAkb,EAAAmY,EAAAtnG,OAA2Ci0E,EAAAkb,EAAQlb,IAEnD61C,EAAAxiB,EAAArzB,GAEA4mB,EAAA3D,SAAAn9E,EAAAghD,YAAA8/B,EAAA3D,SAAAn9E,EAAA+gD,UAEAr2B,GAAAulF,8BAAA9/G,QAAA0/G,MAEAnlF,GAAAwlF,qBAAA1P,GAAAoQ,4BAAA5qH,EAAAk0E,EAAA21C,EAAAE,EAAAn0G,MAAAm0G,EAAAl0G,OAAA,EAAAk0G,EAAA7mG,MAIAvZ,QAAAwmD,KAAA,mGAMAzrB,GAAAslF,WAAAxP,GAAAoQ,4BAAA5qH,EAAAk0E,EAAA21C,EAAAE,EAAAn0G,MAAAm0G,EAAAl0G,OAAA,EAAAg0G,EAAAC,EAAAC,EAAA7mG,UAhCAsnG,GAEA9lF,GAAAslF,WAAAxP,GAAAoQ,4BAAA5qH,EAAA,EAAA6pH,EAAAY,EAAAzqH,GAAA4V,MAAA60G,EAAAzqH,GAAA6V,OAAA,EAAAg0G,EAAAC,EAAAW,EAAAzqH,GAAAkjB,MAIAwhB,GAAAslF,WAAAxP,GAAAoQ,4BAAA5qH,EAAA,EAAA6pH,IAAAC,EAAAW,EAAAzqH,GAoCA86F,GAAAvD,iBAAA4wB,GAEA3N,GAAA2P,eAAA3P,GAAA8P,kBAIArO,EAAAmO,UAAAtvB,EAAA90C,QAEA80C,EAAA2Q,UAAA3Q,EAAA2Q,SAAA3Q,OAIAp2D,IAAAykF,cAAA3O,GAAA4O,SAAAH,GACAvkF,GAAA2kF,YAAA7O,GAAA8P,iBAAArO,EAAAC,2BAQA,QAAA8J,GAAAlrB,EAAAmuB,GAEAvkF,GAAAykF,cAAA3O,GAAA4O,SAAAH,GACAvkF,GAAA2kF,YAAA7O,GAAA8P,iBAAA7O,GAAAhuG,IAAAqtF,GAAAuhB,gBAMA,QAAAwO,GAAAC,EAAA7zB,EAAA8zB,GAEAvQ,GAAAwQ,gBAAAxQ,GAAAyQ,YAAAH,GACAtQ,GAAA0Q,qBAAA1Q,GAAAyQ,YAAAzQ,GAAA2Q,kBAAAJ,EAAAtP,GAAAhuG,IAAAwpF,GAAAolB,eAAA,GAIA,QAAA+O,GAAAC,EAAAp0B,GAEAujB,GAAA8Q,iBAAA9Q,GAAA+Q,aAAAF,GAEAp0B,EAAAu0B,cAAAv0B,EAAAw0B,eAEAjR,GAAAkR,oBAAAlR,GAAA+Q,aAAA/Q,GAAAmR,kBAAA10B,EAAArhF,MAAAqhF,EAAAphF,QACA2kG,GAAAoR,wBAAApR,GAAAyQ,YAAAzQ,GAAAqR,iBAAArR,GAAA+Q,aAAAF,IASGp0B,EAAAu0B,aAAAv0B,EAAAw0B,eAEHjR,GAAAkR,oBAAAlR,GAAA+Q,aAAA/Q,GAAAsR,cAAA70B,EAAArhF,MAAAqhF,EAAAphF,QACA2kG,GAAAoR,wBAAApR,GAAAyQ,YAAAzQ,GAAAuR,yBAAAvR,GAAA+Q,aAAAF,IAIA7Q,GAAAkR,oBAAAlR,GAAA+Q,aAAA/Q,GAAAwR,MAAA/0B,EAAArhF,MAAAqhF,EAAAphF,QAgNA,QAAAo2G,GAAAh1B,GAEAA,YAAAj9E,GAAAk9E,uBAEAxyD,GAAA2kF,YAAA7O,GAAA8P,iBAAA7O,GAAAhuG,IAAAwpF,GAAAolB,gBACA7B,GAAA2P,eAAA3P,GAAA8P,kBACA5lF,GAAA2kF,YAAA7O,GAAA8P,iBAAA,QAIA5lF,GAAA2kF,YAAA7O,GAAA8O,WAAA7N,GAAAhuG,IAAAwpF,GAAAolB,gBACA7B,GAAA2P,eAAA3P,GAAA8O,YACA5kF,GAAA2kF,YAAA7O,GAAA8O,WAAA,OAQA,QAAAX,GAAA94G,GAEA,MAAAA,KAAAmK,EAAA6/C,eAAAhqD,IAAAmK,EAAA8/C,4BAAAjqD,IAAAmK,EAAA+/C,0BAEAygD,GAAA0R,QAIA1R,GAAA2R,OAMA,QAAA7D,GAAA3qH,GAEA,GAAAu/G,EAEA,IAAAv/G,IAAAqc,EAAA0/C,eAAA,MAAA8gD,IAAA4R,MACA,IAAAzuH,IAAAqc,EAAA2/C,oBAAA,MAAA6gD,IAAAkO,aACA,IAAA/qH,IAAAqc,EAAA4/C,uBAAA,MAAA4gD,IAAA6R,eAEA,IAAA1uH,IAAAqc,EAAA6/C,cAAA,MAAA2gD,IAAA0R,OACA,IAAAvuH,IAAAqc,EAAA8/C,2BAAA,MAAA0gD,IAAA8R,sBACA,IAAA3uH,IAAAqc,EAAA+/C,0BAAA,MAAAygD,IAAA+R,qBAEA,IAAA5uH,IAAAqc,EAAAggD,aAAA,MAAAwgD,IAAA2R,MACA,IAAAxuH,IAAAqc,EAAAigD,0BAAA,MAAAugD,IAAAgS,qBACA,IAAA7uH,IAAAqc,EAAAkgD,yBAAA,MAAAsgD,IAAAiS,oBAEA,IAAA9uH,IAAAqc,EAAAmgD,iBAAA,MAAAqgD,IAAAkS,aACA,IAAA/uH,IAAAqc,EAAA2gD,sBAAA,MAAA6/C,IAAAmS,sBACA,IAAAhvH,IAAAqc,EAAA4gD,sBAAA,MAAA4/C,IAAAoS,sBACA,IAAAjvH,IAAAqc,EAAA6gD,qBAAA,MAAA2/C,IAAAqS,oBAEA,IAAAlvH,IAAAqc,EAAAogD,SAAA,MAAAogD,IAAAsS,IACA,IAAAnvH,IAAAqc,EAAAqgD,UAAA,MAAAmgD,IAAAuS,KACA,IAAApvH,IAAAqc,EAAAsgD,kBAAA,MAAAkgD,IAAAwS,cACA,IAAArvH,IAAAqc,EAAAugD,QAAA,MAAAigD,IAAAyS,GACA,IAAAtvH,IAAAqc,EAAAwgD,gBAAA,MAAAggD,IAAA0S,YACA,IAAAvvH,IAAAqc,EAAAygD,UAAA,MAAA+/C,IAAAwD,KAIA,IAFAd,EAAAC,GAAA1vG,IAAA,0BAEA,OAAAyvG,GAEAv/G,IAAAqc,EAAA0gD,cAAA,MAAAwiD,GAAAiQ,cAIA,IAAAxvH,IAAAqc,EAAA8gD,YAAA,MAAA0/C,IAAA4S,KACA,IAAAzvH,IAAAqc,EAAA+gD,UAAA,MAAAy/C,IAAA6S,GACA,IAAA1vH,IAAAqc,EAAAghD,WAAA,MAAAw/C,IAAA8S,IACA,IAAA3vH,IAAAqc,EAAAihD,gBAAA,MAAAu/C,IAAA+S,SACA,IAAA5vH,IAAAqc,EAAAkhD,qBAAA,MAAAs/C,IAAAgT,eAEA,IAAA7vH,IAAAqc,EAAAy9C,YAAA,MAAA+iD,IAAAiT,QACA,IAAA9vH,IAAAqc,EAAA09C,iBAAA,MAAA8iD,IAAAkT,aACA,IAAA/vH,IAAAqc,EAAA29C,wBAAA,MAAA6iD,IAAAmT,qBAEA,IAAAhwH,IAAAqc,EAAA89C,WAAA,MAAA0iD,IAAAoT,IACA,IAAAjwH,IAAAqc,EAAA+9C,UAAA,MAAAyiD,IAAAqT,GACA,IAAAlwH,IAAAqc,EAAAg+C,eAAA,MAAAwiD,IAAAsT,SACA,IAAAnwH,IAAAqc,EAAAi+C,uBAAA,MAAAuiD,IAAAuT,mBACA,IAAApwH,IAAAqc,EAAAk+C,eAAA,MAAAsiD,IAAAwT,SACA,IAAArwH,IAAAqc,EAAAm+C,uBAAA,MAAAqiD,IAAAyT,mBACA,IAAAtwH,IAAAqc,EAAAo+C,eAAA,MAAAoiD,IAAA0T,SACA,IAAAvwH,IAAAqc,EAAAq+C,uBAAA,MAAAmiD,IAAA2T,mBAEA,IAAAxwH,IAAAqc,EAAAs+C,eAAA,MAAAkiD,IAAA4T,SACA,IAAAzwH,IAAAqc,EAAAu+C,uBAAA,MAAAiiD,IAAA6T,mBACA,IAAA1wH,IAAAqc,EAAAw+C,uBAAA,MAAAgiD,IAAA8T,kBAIA,IAFApR,EAAAC,GAAA1vG,IAAA,iCAEA,OAAAyvG,EAAA,CAEA,GAAAv/G,IAAAqc,EAAAohD,qBAAA,MAAA8hD,GAAAqR,4BACA,IAAA5wH,IAAAqc,EAAAqhD,sBAAA,MAAA6hD,GAAAsR,6BACA,IAAA7wH,IAAAqc,EAAAshD,sBAAA,MAAA4hD,GAAAuR,6BACA,IAAA9wH,IAAAqc,EAAAuhD,sBAAA,MAAA2hD,GAAAwR,8BAMA,GAFAxR,EAAAC,GAAA1vG,IAAA,kCAEA,OAAAyvG,EAAA,CAEA,GAAAv/G,IAAAqc,EAAAwhD,wBAAA,MAAA0hD,GAAAyR,+BACA,IAAAhxH,IAAAqc,EAAAyhD,wBAAA,MAAAyhD,GAAA0R,+BACA,IAAAjxH,IAAAqc,EAAA0hD,yBAAA,MAAAwhD,GAAA2R,gCACA,IAAAlxH,IAAAqc,EAAA2hD,yBAAA,MAAAuhD,GAAA4R,iCAMA,GAFA5R,EAAAC,GAAA1vG,IAAA,oBAEA,OAAAyvG,EAAA,CAEA,GAAAv/G,IAAAqc,EAAA49C,YAAA,MAAAslD,GAAA6R,OACA,IAAApxH,IAAAqc,EAAA69C,YAAA,MAAAqlD,GAAA8R,QAIA,SAjyGArlH,QAAAsM,IAAA,sBAAA+D,EAAA87C,UAEAg9B,OAEA,IAAAuxB,GAAAnlH,SAAA4zF,EAAAqI,OAAArI,EAAAqI,OAAA18F,SAAAD,cAAA,UACA4sB,EAAAlsB,SAAA4zF,EAAA1vF,QAAA0vF,EAAA1vF,QAAA,KAEA6rH,EAAA5K,EAAAzuG,MACAs5G,EAAA7K,EAAAxuG,OAEAs5G,GAAA,EAEAC,GAAAlwH,SAAA4zF,EAAAh1E,OAAAg1E,EAAAh1E,MACAuxG,GAAAnwH,SAAA4zF,EAAAnvF,OAAAmvF,EAAAnvF,MACA2rH,GAAApwH,SAAA4zF,EAAAy8B,SAAAz8B,EAAAy8B,QACAC,GAAAtwH,SAAA4zF,EAAAr4E,WAAAq4E,EAAAr4E,UACA8/F,GAAAr7G,SAAA4zF,EAAA28B,oBAAA38B,EAAA28B,mBACAC,GAAAxwH,SAAA4zF,EAAA68B,uBAAA78B,EAAA68B,sBAEA3U,GAAA,GAAAhhG,GAAAqiD,MAAA,GACA4+C,GAAA,EAEA9/F,MAEAgkG,MACAC,MACAH,MACAC,MAEAJ,MACAC,MACAH,MACAC,MAEAlQ,GAAA,GAAApqF,cAAA,GAGAi7F,MACAlN,KAIAnsG,MAAA4Z,WAAAskG,EACAl+G,KAAA/C,QAAA,KAIA+C,KAAAypH,aACAzpH,KAAA0pH,kBACA1pH,KAAA2pH,kBACA3pH,KAAA4pH,oBAIA5pH,KAAAw5G,eAIAx5G,KAAAg3D,YAAA,EACAh3D,KAAA6pH,cACA7pH,KAAA8pH,eAIA9pH,KAAA46G,gBAAA,EACA56G,KAAA86G,gBAAA,EAIA96G,KAAAukH,oBAIA,IAAA9vG,IAAAzU,KAIAg1G,GAAA,KACA+U,GAAA,KACA5U,MACAD,GAAA,GACAD,GAAA,KAEA4G,GAAA,EAEApH,GAAA,EACAC,GAAA,EACAC,GAAAuJ,EAAAzuG,MACAmlG,GAAAsJ,EAAAxuG,OACAs6G,GAAA,EACAC,GAAA,EAIA1Q,GAAA,GAAA1lG,GAAA4kE,QAIAghC,GAAA,GAAA5lG,GAAAyzD,QAEA6xC,GAAA,GAAAtlG,GAAA8L,QAIAkiG,GAAA,GAAAhuG,GAAA8L,QAEAy1F,MAEAiI,IAEAc,SAAA,OACAC,aAAgBtkH,OAAA,EAAAikB,UAAAgvD,cAChBhC,OAAUjxE,OAAA,EAAAikB,UAAAgvD,aAAAsxC,aAAAC,WACVC,MAASzkH,OAAA,EAAAikB,UAAAgvD,aAAAsxC,aAAAG,cAAAC,aAAAC,aAAAJ,WACTK,MAAS7kH,OAAA,EAAA8kH,aAAAC,gBAAA9xC,eAMT0oC,IAEA3wB,WAAA,EACAE,SAAA,GAIAklC,IAEAC,MAAA,EACA1rG,SAAA,EACAN,MAAA,EACAmtD,OAAA,EAIAtrE,MAAAoqH,MAEAhyH,OAAA8xH,GACAG,OAAA5U,GACA6U,SAAA,KAOA,IAAAjW,GAEA,KAEA,GAAAvnC,KACAn1D,MAAAsxG,GACAzrH,MAAA0rH,GACAE,QAAAD,GACA70G,UAAA+0G,GACAC,mBAAAlV,GACAoV,sBAAAD,GAKA,IAFAlV,GAAApvF,GAAAi5F,EAAAjpB,WAAA,QAAAnoB,KAAAoxC,EAAAjpB,WAAA,qBAAAnoB,IAEA,OAAAunC,GAEA,aAAA6J,EAAAjpB,WAAA,SAEA,8DAIA,+BAMAipB,GAAAzkG,iBAAA,mBAAA47F,MAEE,MAAA5xG,GAEFD,QAAAC,MAAA,wBAAAA,GAIA,GAAAuzG,IAAA,GAAAnjG,GAAA02G,gBAAAlW,GAEA2C,IAAA1vG,IAAA,qBACA0vG,GAAA1vG,IAAA,4BACA0vG,GAAA1vG,IAAA,0BACA0vG,GAAA1vG,IAAA,iCACA0vG,GAAA1vG,IAAA,4BACA0vG,GAAA1vG,IAAA,0BAEA0vG,GAAA1vG,IAAA,4BAEAuM,EAAA2K,eAAAwxE,SAAA,WAIA,IAAAqsB,IAAA,GAAAxoG,GAAA22G,kBAAAnW,GAAA2C,GAAArqB,GAEApuD,GAAA,GAAA1qB,GAAA42G,WAAApW,GAAA2C,GAAAmL,GACA7M,GAAA,GAAAzhG,GAAA62G,gBACA5oC,GAAA,GAAAjuE,GAAA82G,aAAAtW,GAAAiB,GAAAt1G,KAAAoqH,MACAzT,GAAA,GAAA9iG,GAAA+2G,cAAA5qH,KAAAq8G,GAEAr8G,MAAAoqH,KAAAE,SAAA3T,GAAA2T,QAEA,IAAAO,IAAA,GAAAh3G,GAAAi3G,oBAAAzW,GAAA2C,GAAAkT,IACAa,GAAA,GAAAl3G,GAAAm3G,2BAAA3W,GAAA2C,GAAAkT,GAwCA3V,KAEAv0G,KAAA/C,QAAAo3G,GACAr0G,KAAAq8G,gBACAr8G,KAAAg3G,cACAh3G,KAAAu+B,QAIA,IAAAu0D,IAAA,GAAAj/E,GAAAo3G,eAAAjrH,KAAAgV,GAAA8sE,GAEA9hF,MAAA8yF,YAKA,IAAAo4B,IAAA,GAAAr3G,GAAAs3G,aAAAnrH,KAAAq5G,IACA+R,GAAA,GAAAv3G,GAAAw3G,gBAAArrH,KAAAmsG,GAIAnsG,MAAAi1F,WAAA,WAEA,MAAAof,KAIAr0G,KAAAsrH,qBAAA,WAEA,MAAAjX,IAAAiX,wBAIAtrH,KAAAka,iBAAA,WAEA88F,GAAA1vG,IAAA,sBAAAikH,eAIAvrH,KAAA4iH,iBAAA,WAEA,GAAA5oH,EAEA,mBAEA,GAAAjB,SAAAiB,EAAA,MAAAA,EAEA,IAAA+8G,GAAAC,GAAA1vG,IAAA,iCAYA,OARAtN,GAFA,OAAA+8G,EAEA1C,GAAAnoC,aAAA6qC,EAAAyU,gCAIA,MAUAxrH,KAAAyrH,aAAA,WAEA,MAAApP,IAAAtwB,WAIA/rF,KAAA0rH,cAAA,WAEA,MAAA1C,KAIAhpH,KAAA2rH,cAAA,SAAA3xH,GAEAjB,SAAAiB,IAAAgvH,GAAAhvH,IAIAgG,KAAA4rH,QAAA;AAEA,OACAn8G,MAAAq5G,EACAp5G,OAAAq5G,IAKA/oH,KAAAmZ,QAAA,SAAA1J,EAAAC,EAAAm8G,GAEA/C,EAAAr5G,EACAs5G,EAAAr5G,EAEAwuG,EAAAzuG,QAAAu5G,GACA9K,EAAAxuG,SAAAs5G,GAEA6C,SAEA3N,EAAArsG,MAAApC,QAAA,KACAyuG,EAAArsG,MAAAnC,SAAA,MAIA1P,KAAA8rH,YAAA,IAAAr8G,EAAAC,IAIA1P,KAAA8rH,YAAA,SAAA7iH,EAAAJ,EAAA4G,EAAAC,GAEA+kG,GAAAxrG,EAAA+/G,GACAtU,GAAA7rG,EAAAmgH,GAEArU,GAAAllG,EAAAu5G,GACApU,GAAAllG,EAAAs5G,GAEA3U,GAAAG,SAAAC,GAAAC,GAAAC,GAAAC,KAIA50G,KAAA+rH,WAAA,SAAA9iH,EAAAJ,EAAA4G,EAAAC,GAEA2kG,GAAA2X,QACA/iH,EAAA+/G,GACAngH,EAAAmgH,GACAv5G,EAAAu5G,GACAt5G,EAAAs5G,KAKAhpH,KAAAisH,kBAAA,SAAAlpB,GAEAxkE,GAAA2tF,eAAAnpB,IAMA/iG,KAAAmsH,cAAA,WAEA,MAAAtX,KAIA70G,KAAAoZ,cAAA,SAAA7J,EAAAoI,GAEAk9F,GAAA3oG,IAAAqD,GAEAulG,GAAA/7G,SAAA4e,IAAA,EAEAw8F,EAAAU,GAAAxrG,EAAAwrG,GAAAjsG,EAAAisG,GAAA9rG,EAAA+rG,KAIA90G,KAAAosH,cAAA,WAEA,MAAAtX,KAIA90G,KAAAqsH,cAAA,SAAA10G,GAEAm9F,GAAAn9F,EAEAw8F,EAAAU,GAAAxrG,EAAAwrG,GAAAjsG,EAAAisG,GAAA9rG,EAAA+rG,KAIA90G,KAAAi2D,MAAA,SAAA1mD,EAAA/R,EAAA4rH,GAEA,GAAAkD,GAAA,GAEAvzH,SAAAwW,QAAA+8G,GAAAjY,GAAAkY,mBACAxzH,SAAAyE,QAAA8uH,GAAAjY,GAAAmY,mBACAzzH,SAAAqwH,QAAAkD,GAAAjY,GAAAoY,oBAEApY,GAAAp+C,MAAAq2D,IAIAtsH,KAAAs0G,WAAA,WAEAD,GAAAp+C,MAAAo+C,GAAAkY,mBAIAvsH,KAAA0sH,WAAA,WAEArY,GAAAp+C,MAAAo+C,GAAAmY,mBAIAxsH,KAAA2sH,aAAA,WAEAtY,GAAAp+C,MAAAo+C,GAAAoY,qBAIAzsH,KAAA4sH,YAAA,SAAA97B,EAAAvhF,EAAA/R,EAAA4rH,GAEAppH,KAAAsxF,gBAAAR,GACA9wF,KAAAi2D,MAAA1mD,EAAA/R,EAAA4rH,IAMAppH,KAAA+0G,eAEA/0G,KAAAsZ,QAAA,WAEA4kG,EAAAhqE,oBAAA,mBAAAmhE,OAmIAr1G,KAAAi6G,sBAAA,SAAA93F,EAAAu0F,EAAAjhG,GAEA8oB,GAAA04E,gBAEA,IAAA4V,GAAAvX,GAAAhuG,IAAA6a,EAEAA,GAAA2qG,eAAAD,EAAAh3G,WAAAg3G,EAAAh3G,SAAAw+F,GAAA0Y,gBACA5qG,EAAA6qG,aAAAH,EAAAvtG,SAAAutG,EAAAvtG,OAAA+0F,GAAA0Y,gBACA5qG,EAAA8qG,SAAAJ,EAAAzjC,KAAAyjC,EAAAzjC,GAAAirB,GAAA0Y,gBACA5qG,EAAA1K,YAAAo1G,EAAAt9G,QAAAs9G,EAAAt9G,MAAA8kG,GAAA0Y,eAEA,IAAAjgD,GAAA4pC,EAAAU,eAYA,IAVAj1F,EAAA2qG,eAEAzY,GAAAqD,WAAArD,GAAAsD,aAAAkV,EAAAh3G,UACAw+F,GAAA6Y,WAAA7Y,GAAAsD,aAAAx1F,EAAAgrG,cAAA9Y,GAAA+Y,cAEA7uF,GAAAi5E,gBAAA1qC,EAAAj3D,UACAw+F,GAAAuD,oBAAA9qC,EAAAj3D,SAAA,EAAAw+F,GAAAwD,SAAA,MAIA11F,EAAA6qG,WAAA,CAIA,GAFA3Y,GAAAqD,WAAArD,GAAAsD,aAAAkV,EAAAvtG,QAEA,sBAAA7J,EAAA9Q,MAAA8Q,EAAAmgF,UAAA/hF,EAAA+8C,YAEA,OAAA/2D,GAAA,EAAAuP,EAAA,EAAA+Y,EAAAojC,MAA0C1rD,EAAAuP,EAAOvP,GAAA,GAEjD,GAAA8hB,GAAAwG,EAAAkrG,YAEAC,GAAA3xG,EAAA9hB,EAAA,GAAA8hB,EAAA9hB,EAAA,GAAA8hB,EAAA9hB,EAAA,MACA0zH,GAAA5xG,EAAA9hB,EAAA,GAAA8hB,EAAA9hB,EAAA,GAAA8hB,EAAA9hB,EAAA,MACA2zH,GAAA7xG,EAAA9hB,EAAA,GAAA8hB,EAAA9hB,EAAA,GAAA8hB,EAAA9hB,EAAA,KAEA8hB,GAAA9hB,EAAA,GAAAyzH,EACA3xG,EAAA9hB,EAAA,GAAA0zH,EACA5xG,EAAA9hB,EAAA,GAAA2zH,EAEA7xG,EAAA9hB,EAAA,GAAAyzH,EACA3xG,EAAA9hB,EAAA,GAAA0zH,EACA5xG,EAAA9hB,EAAA,GAAA2zH,EAEA7xG,EAAA9hB,EAAA,GAAAyzH,EACA3xG,EAAA9hB,EAAA,GAAA0zH,EACA5xG,EAAA9hB,EAAA,GAAA2zH,EAMAnZ,GAAA6Y,WAAA7Y,GAAAsD,aAAAx1F,EAAAkrG,YAAAhZ,GAAA+Y,cAEA7uF,GAAAi5E,gBAAA1qC,EAAAxtD,QAEA+0F,GAAAuD,oBAAA9qC,EAAAxtD,OAAA,EAAA+0F,GAAAwD,SAAA,KAIA11F,EAAA8qG,QAAAx3G,EAAApT,MAEAgyG,GAAAqD,WAAArD,GAAAsD,aAAAkV,EAAAzjC,IACAirB,GAAA6Y,WAAA7Y,GAAAsD,aAAAx1F,EAAAsrG,QAAApZ,GAAA+Y,cAEA7uF,GAAAi5E,gBAAA1qC,EAAAsc,IAEAirB,GAAAuD,oBAAA9qC,EAAAsc,GAAA,EAAAirB,GAAAwD,SAAA,MAIA11F,EAAA1K,WAAAhC,EAAAmC,eAAA/D,EAAAi9C,WAEAujD,GAAAqD,WAAArD,GAAAsD,aAAAkV,EAAAt9G,OACA8kG,GAAA6Y,WAAA7Y,GAAAsD,aAAAx1F,EAAAurG,WAAArZ,GAAA+Y,cAEA7uF,GAAAi5E,gBAAA1qC,EAAAv9D,OAEA8kG,GAAAuD,oBAAA9qC,EAAAv9D,MAAA,EAAA8kG,GAAAwD,SAAA,MAIAt5E,GAAA65E,0BAEA/D,GAAAsZ,WAAAtZ,GAAAuZ,UAAA,EAAAzrG,EAAAojC,OAEApjC,EAAAojC,MAAA,GAIAvlD,KAAA65G,mBAAA,SAAAnhG,EAAA1D,EAAAquF,EAAA9sF,EAAAd,EAAA0M,EAAAynE,GAEAmwB,EAAAtkG,EAEA,IAAAihG,GAAAsD,EAAAthG,EAAA1D,EAAAquF,EAAA5tF,EAAA0M,GAEA0rG,KACAC,EAAAv3G,EAAApf,GAAA,IAAAu/G,EAAAv/G,GAAA,IAAAse,EAAAygF,SAEA43B,KAAA5Y,KAEAA,GAAA4Y,EACAD,KAMA,IAAAvmB,GAAAnlF,EAAAmlF,qBAEA,IAAAvuG,SAAAuuG,EAAA,CAIA,OAFAymB,MAEAl0H,EAAA,EAAAuP,EAAAk+F,EAAAxtG,OAAqDD,EAAAuP,EAAOvP,IAAA,CAE5D,GAAA6uG,GAAApB,EAAAztG,EACAk0H,GAAArtH,MAAAgoG,EAAA7uG,IAIAk0H,EAAAnsC,KAAAy2B,GAEA0V,EAAAj0H,OAAA,IAEAi0H,EAAAj0H,OAAA,EAMA,QAFAq0F,GAAA53E,EAAA43E,gBAEAt0F,EAAA,EAAAuP,EAAA2kH,EAAAj0H,OAAgDD,EAAAuP,EAAOvP,IAAA,CAEvD,GAAA6uG,GAAAqlB,EAAAl0H,EAGA,IAFA2uG,GAAA3uG,GAAA6uG,EAAA,GAEA,IAAAA,EAAA,IAEA,GAAA92F,GAAA82F,EAAA,EAEAjzF,GAAA0yE,mBAAAgG,EAAAt4E,UAAAU,EAAA6I,aAAA,cAAAvlB,EAAAs0F,EAAAt4E,SAAAjE,IACA6D,EAAA4yE,mBAAA8F,EAAA7uE,QAAA/I,EAAA6I,aAAA,cAAAvlB,EAAAs0F,EAAA7uE,OAAA1N,QAIA6D,GAAA0yE,mBAAA5xE,EAAAiN,gBAAA,cAAA3pB,GACA4b,EAAA4yE,mBAAA9xE,EAAAiN,gBAAA,cAAA3pB,GAMA,GAAAwiG,GAAAqa,EAAAuE,aAEA,QAAA5e,EAAAiL,uBAEA+M,GAAAgL,WAAAhjB,EAAAiL,sBAAAkB,IAIAqlB,KAMA,GAAAj8G,GAAA2E,EAAA3E,MACAiE,EAAAU,EAAAu2D,WAAAj3D,QAEAJ,GAAAygF,iBAEAtkF,EAAAkwE,GAAAksC,sBAAAz3G,GAIA,IAAAnC,EAyBA,IAvBA,OAAAxC,GAEAwC,EAAA22G,GACA32G,EAAAk6E,SAAA18E,IAIAwC,EAAAy2G,GAIAgD,IAEAhX,EAAAphG,EAAAihG,EAAAngG,GAEA,OAAA3E,GAEAyiG,GAAAqD,WAAArD,GAAA4Z,qBAAAnsC,GAAA21B,mBAAA7lG,KAMA7Y,SAAA6wF,EAAA,CAEA,GAAArkC,EAIAA,GAFA,OAAA3zC,EAEAA,EAAA2zC,MAEI1vC,YAAAhC,GAAAk0E,2BAEJlyE,EAAAkH,KAAApB,MAAA7hB,OAAA,EAIA+b,EAAA0vC,KAIA,IAAA6oC,GAAA73E,EAAA63E,SAEAxE,IACAhrE,MAAAwvE,EAAAxvE,MACA2mC,MAAAvsC,KAAA02B,IAAA0+C,EAAA7oC,UAKA,GAAApjC,YAAAtO,GAAAkE,KAEAtC,EAAAygF,gBAEA33D,GAAA2vF,aAAAz4G,EAAAgnF,mBAAAusB,IACA50G,EAAA+5G,QAAA9Z,GAAA+Z,QAIAh6G,EAAA+5G,QAAA9Z,GAAAuZ,WAIAr3G,YAAA1C,GAAAo8E,yBAAA15E,EAAA25E,kBAAA,EAEA97E,EAAAi6G,gBAAA93G,GAIAnC,EAAAhc,OAAAwxF,EAAAhrE,MAAAgrE,EAAArkC,WAIG,IAAApjC,YAAAtO,GAAAktE,KAAA,CAEH,GAAAutC,GAAA74G,EAAAytF,SAEAnqG,UAAAu1H,MAAA,GAEA/vF,GAAA2vF,aAAAI,EAAAtF,IAEA7mG,YAAAtO,GAAA2yF,aAEApyF,EAAA+5G,QAAA9Z,GAAA+Z,OAIAh6G,EAAA+5G,QAAA9Z,GAAAka,YAIAn6G,EAAAhc,OAAAwxF,EAAAhrE,MAAAgrE,EAAArkC,WAEGpjC,aAAAtO,GAAAotE,SAEH7sE,EAAA+5G,QAAA9Z,GAAAma,QACAp6G,EAAAhc,OAAAwxF,EAAAhrE,MAAAgrE,EAAArkC,SA6LAvlD,KAAA5H,OAAA,SAAA8b,EAAAwE,EAAAo4E,EAAA29B,GAEA,GAAA/1G,YAAA7E,GAAAu8E,UAGA,WADA5sF,SAAAC,MAAA,yEAKA,IAAA4/F,GAAAnvF,EAAAmvF,GAqEA,IAjEA6R,GAAA,GACAC,MACAF,GAAA,KACAG,MAIAlhG,EAAA04F,iBAAA14F,EAAA04D,oBAIA,OAAAl0D,EAAAupE,QAAAvpE,EAAAk0D,oBAEAl0D,EAAA23E,mBAAA5oB,WAAA/uD,EAAAgvD,aAEA+xC,GAAAlyC,iBAAA7uD,EAAA8uD,iBAAA9uD,EAAA23E,oBACAkpB,GAAAtgC,cAAAwgC,IAEAzkG,GAAAlb,OAAA,EAEAm/G,MACAF,MAEAH,MACAF,MAEAW,GAAAv/G,OAAA,EACAqyG,GAAAryG,OAAA,EAEAs/G,EAAAllG,GAEA8kG,GAAAl/G,OAAAm/G,GAAA,EACAH,GAAAh/G,OAAAi/G,GAAA,EAEAJ,GAAA7+G,OAAA8+G,GAAA,EACAH,GAAA3+G,OAAA4+G,GAAA,EAEAjkG,GAAA+kG,mBAEAR,GAAAp3B,KAAA02B,GACAQ,GAAAl3B,KAAA22B,IAMAzlB,GAAA16F,OAAA8b,EAAAwE,GAIAwxG,GAAAC,MAAA,EACAD,GAAAzrG,SAAA,EACAyrG,GAAA/rG,MAAA,EACA+rG,GAAA5+C,OAAA,EAEAtrE,KAAAsxF,gBAAAR,IAEA9wF,KAAAypH,WAAAgF,IAEAzuH,KAAAi2D,MAAAj2D,KAAA0pH,eAAA1pH,KAAA2pH,eAAA3pH,KAAA4pH,kBAMA11G,EAAAy4F,iBAAA,CAEA,GAAAA,GAAAz4F,EAAAy4F,gBAEAgN,GAAAX,GAAAtgG,EAAA1D,GAAAquF,EAAAsJ,GACAgN,EAAAb,GAAApgG,EAAA1D,GAAAquF,EAAAsJ,GAEAmN,EAAAnB,GAAAjgG,EAAA1D,GAAAquF,EAAAsJ,GACAmN,EAAArB,GAAA//F,EAAA1D,GAAAquF,EAAAsJ,OAMApuE,IAAA48E,YAAAtnG,EAAAm9C,YAEA2oD,EAAAX,GAAAtgG,EAAA1D,GAAAquF,GACAyW,EAAAnB,GAAAjgG,EAAA1D,GAAAquF,GAIAsW,EAAAb,GAAApgG,EAAA1D,GAAAquF,GACAyW,EAAArB,GAAA//F,EAAA1D,GAAAquF,EAMA6nB,IAAA9yH,OAAA8b,EAAAwE,GACA0yG,GAAAhzH,OAAA8b,EAAAwE,EAAAsxG,GAAAC,IAIAn5B,KAAAM,iBAAAN,EAAAI,YAAAr9E,EAAA6/C,eAAAo9B,EAAAI,YAAAr9E,EAAAggD,cAEAiyD,EAAAh1B,GAMAvyD,GAAA88E,iBACA98E,GAAA+8E,kBACA/8E,GAAAg9E,mBAm5CAv7G,KAAA0uH,eAAA,SAAAC,EAAAC,GAEAD,IAAA96G,EAAAo8C,aAEA1xB,GAAAo9E,QAAAtH,GAAAqH,YAIAkT,IAAA/6G,EAAAw8C,qBAEAgkD,GAAAwa,UAAAxa,GAAAya,IAIAza,GAAAwa,UAAAxa,GAAA0a,KAIAJ,IAAA96G,EAAAq8C,aAEAmkD,GAAAsa,SAAAta,GAAA2a,MAEIL,IAAA96G,EAAAs8C,cAEJkkD,GAAAsa,SAAAta,GAAA4a,OAIA5a,GAAAsa,SAAAta,GAAA6a,gBAIA3wF,GAAAk9E,OAAApH,GAAAqH,aAkLA17G,KAAAg9G,WAAA,SAAAroB,EAAAmuB,GAEA,GAAAhN,GAAAR,GAAAhuG,IAAAqtF,EAEA,IAAAA,EAAA90C,QAAA,GAAAi2D,EAAAmO,YAAAtvB,EAAA90C,QAAA,CAEA,GAAAk1C,GAAAJ,EAAAI,KAEA,OAAAh8F,UAAAg8F,MAEAvxF,SAAAwmD,KAAA,wEAAA2qC,GAKAI,EAAAo6B,kBAEA3rH,SAAAwmD,KAAA,yEAAA2qC,OAKAkuB,GAAA/M,EAAAnhB,EAAAmuB,GAKAvkF,GAAAykF,cAAA3O,GAAA4O,SAAAH,GACAvkF,GAAA2kF,YAAA7O,GAAA8O,WAAArN,EAAAI,iBA+LAl2G,KAAAsxF,gBAAA,SAAAR,GAEA,GAAAs+B,GAAAt+B,YAAAj9E,GAAAk9E,qBAEA,IAAAD,GAAA/3F,SAAAu8G,GAAAhuG,IAAAwpF,GAAAulB,mBAAA,CAEA,GAAAF,GAAAb,GAAAhuG,IAAAwpF,EAEA/3F,UAAA+3F,EAAAu0B,cAAAv0B,EAAAu0B,gBACAtsH,SAAA+3F,EAAAw0B,gBAAAx0B,EAAAw0B,kBAEAx0B,EAAAr3E,iBAAA,UAAAi8F,GAEAS,EAAAD,eAAA7B,GAAA0O,gBAEAtN,GAAAzwB,UAIA,IAAAqqC,GAAAx7G,EAAAmF,KAAA+jE,aAAA+T,EAAArhF,QAAAoE,EAAAmF,KAAA+jE,aAAA+T,EAAAphF,QACAg0G,EAAAvB,EAAArxB,EAAAE,QACA2yB,EAAAxB,EAAArxB,EAAAnsF,KAEA,IAAAyqH,EAAA,CAEAjZ,EAAAE,sBACAF,EAAAI,uBAEAh4E,GAAA2kF,YAAA7O,GAAA8P,iBAAAhO,EAAAD,gBAEA4L,EAAAzN,GAAA8P,iBAAArzB,EAAAu+B,EAEA,QAAAx1H,GAAA,EAAoBA,EAAA,EAAOA,IAE3Bs8G,EAAAE,mBAAAx8G,GAAAw6G,GAAAib,oBACAnZ,EAAAI,oBAAA18G,GAAAw6G,GAAAkb,qBAEAhxF,GAAAslF,WAAAxP,GAAAoQ,4BAAA5qH,EAAA,EAAA6pH,EAAA5yB,EAAArhF,MAAAqhF,EAAAphF,OAAA,EAAAg0G,EAAAC,EAAA,MAEAe,EAAAvO,EAAAE,mBAAAx8G,GAAAi3F,EAAAujB,GAAAoQ,4BAAA5qH,GACAorH,EAAA9O,EAAAI,oBAAA18G,GAAAi3F,EAIAA,GAAAM,iBAAAi+B,GAAAhb,GAAA2P,eAAA3P,GAAA8P,sBAIAhO,GAAAE,mBAAAhC,GAAAib,oBAEAx+B,EAAA0+B,eAEArZ,EAAAI,oBAAAzlB,EAAA0+B,eAAAjZ,oBAIAJ,EAAAI,oBAAAlC,GAAAkb,qBAIAhxF,GAAA2kF,YAAA7O,GAAA8O,WAAAhN,EAAAD,gBACA4L,EAAAzN,GAAA8O,WAAAryB,EAAAu+B,GAEA9wF,GAAAslF,WAAAxP,GAAA8O,WAAA,EAAAO,EAAA5yB,EAAArhF,MAAAqhF,EAAAphF,OAAA,EAAAg0G,EAAAC,EAAA,MAEAe,EAAAvO,EAAAE,mBAAAvlB,EAAAujB,GAAA8O,YAEAryB,EAAA0+B,eAEA1+B,EAAAu0B,cAAAv0B,EAAAw0B,cAEAjR,GAAAoR,wBAAApR,GAAAyQ,YAAAzQ,GAAAqR,iBAAArR,GAAA+Q,aAAAjP,EAAAI,qBAEMzlB,EAAAu0B,aAAAv0B,EAAAw0B,eAENjR,GAAAoR,wBAAApR,GAAAyQ,YAAAzQ,GAAAuR,yBAAAvR,GAAA+Q,aAAAjP,EAAAI,qBAMA0O,EAAA9O,EAAAI,oBAAAzlB,GAIAA,EAAAM,iBAAAi+B,GAAAhb,GAAA2P,eAAA3P,GAAA8O,WAMAiM,GAEA7wF,GAAA2kF,YAAA7O,GAAA8P,iBAAA,MAIA5lF,GAAA2kF,YAAA7O,GAAA8O,WAAA,MAIA9O,GAAA8Q,iBAAA9Q,GAAA+Q,aAAA,MACA/Q,GAAAwQ,gBAAAxQ,GAAAyQ,YAAA,MAIA,GAAAH,GAAAl1G,EAAAC,EAAA+/G,EAAAC,CAEA,IAAA5+B,EAAA,CAEA,GAAAqlB,GAAAb,GAAAhuG,IAAAwpF,EAIA6zB,GAFAyK,EAEAjZ,EAAAE,mBAAAvlB,EAAAO,gBAIA8kB,EAAAE,mBAIA5mG,EAAAqhF,EAAArhF,MACAC,EAAAohF,EAAAphF,OAEA+/G,EAAA,EACAC,EAAA,MAIA/K,GAAA,KAEAl1G,EAAAklG,GACAjlG,EAAAklG,GAEA6a,EAAAhb,GACAib,EAAAhb,EAIAiQ,KAAAoF,KAEA1V,GAAAwQ,gBAAAxQ,GAAAyQ,YAAAH,GACAtQ,GAAAG,SAAAib,EAAAC,EAAAjgH,EAAAC,GAEAq6G,GAAApF,GAIAqF,GAAAv6G,EACAw6G,GAAAv6G,GAIA1P,KAAA2vH,uBAAA,SAAA7+B,EAAA7nF,EAAAJ,EAAA4G,EAAAC,EAAAoN,GAEA,KAAAg0E,YAAAj9E,GAAA+7G,mBAGA,WADApsH,SAAAC,MAAA,2FAKA,IAAA6xG,GAAAhuG,IAAAwpF,GAAAulB,mBAAA,CAEA,GAAAvlB,EAAAE,SAAAn9E,EAAAghD,WAGA,WADArxD,SAAAC,MAAA,wHAKA,IAAAosH,KAEAva,IAAAhuG,IAAAwpF,GAAAulB,qBAAA0T,KAEA1V,GAAAwQ,gBAAAxQ,GAAAyQ,YAAAxP,GAAAhuG,IAAAwpF,GAAAulB,oBAEAwZ,MAIAxb,GAAAyb,uBAAAzb,GAAAyQ,eAAAzQ,GAAA0b,qBAEA1b,GAAA2b,WAAA/mH,EAAAJ,EAAA4G,EAAAC,EAAA2kG,GAAA8S,KAAA9S,GAAAkS,cAAAzpG,GAIAtZ,QAAAC,MAAA,8GAIAosH,GAEAxb,GAAAwQ,gBAAAxQ,GAAAyQ,YAAAiF,MA0IA/pH,KAAAiwH,sBAAA,WAGA,MADAzsH,SAAAwmD,KAAA,gGACAgtD,GAAA1vG,IAAA,sBAIAtH,KAAAkwH,0BAAA,WAGA,MADA1sH,SAAAwmD,KAAA,yGACAgtD,GAAA1vG,IAAA,2BAIAtH,KAAAmwH,4BAAA,WAGA,MADA3sH,SAAAwmD,KAAA,6GACAgtD,GAAA1vG,IAAA,6BAIAtH,KAAAowH,8BAAA,WAGA,MADA5sH,SAAAwmD,KAAA,oHACAgtD,GAAA1vG,IAAA,kCAIAtH,KAAAqwH,+BAAA,WAGA,MADA7sH,SAAAwmD,KAAA,sHACAgtD,GAAA1vG,IAAA,mCAIAtH,KAAAswH,oBAAA,WAGA,MADA9sH,SAAAwmD,KAAA,6FACAgtD,GAAA1vG,IAAA,qBAIAtH,KAAAuwH,uBAAA,WAEA,MAAAlU,IAAAmU,gBAIAxwH,KAAAywH,wBAAA,WAGA,MADAjtH,SAAAwmD,KAAA,uGACAgtD,GAAA1vG,IAAA,2BAMAtH,KAAAk6G,aAAA,WAEA12G,QAAAwmD,KAAA,2DAIAhqD,KAAA0wH,aAAA,WAEAltH,QAAAwmD,KAAA,2DAIAhqD,KAAA2wH,cAAA,WAEAntH,QAAAwmD,KAAA,4DAIAhqD,KAAA4wH,gBAAA,WAEAptH,QAAAwmD,KAAA,8DAIA1vD,OAAA8Y,iBAAApT,MACA6wH,kBACAvpH,IAAA,WAEA,MAAAwrF,IAAAjnC,SAGA3/C,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,qEACA8oC,GAAAjnC,QAAA7xD,IAIA82H,eACAxpH,IAAA,WAEA,MAAAwrF,IAAAnuF,MAGAuH,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,+DACA8oC,GAAAnuF,KAAA3K,IAIA+2H,mBACAzpH,IAAA,WAEA,MAAAwrF,IAAA67B,UAGAziH,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,uEACA8oC,GAAA67B,SAAA30H,IAIAg3H,gBACA1pH,IAAA,WAEA,MAAAwrF,IAAAm+B,OAGA/kH,IAAA,SAAAlS,GAEAwJ,QAAAwmD,KAAA,iEACA8oC,GAAAm+B,MAAAj3H,OAeA6Z,EAAA+7G,kBAAA,SAAAngH,EAAAC,EAAA7R,GAEAmC,KAAA27E,KAAA9nE,EAAAmF,KAAAyiE,eAEAz7E,KAAAyP,QACAzP,KAAA0P,SAEA7R,QAEAmC,KAAAm1F,MAAAp8F,SAAA8E,EAAAs3F,MAAAt3F,EAAAs3F,MAAAthF,EAAA2/C,oBACAxzD,KAAAo1F,MAAAr8F,SAAA8E,EAAAu3F,MAAAv3F,EAAAu3F,MAAAvhF,EAAA2/C,oBAEAxzD,KAAAixF,UAAAl4F,SAAA8E,EAAAozF,UAAApzF,EAAAozF,UAAAp9E,EAAAggD,aACA7zD,KAAAkxF,UAAAn4F,SAAA8E,EAAAqzF,UAAArzF,EAAAqzF,UAAAr9E,EAAAkgD,yBAEA/zD,KAAA00F,WAAA37F,SAAA8E,EAAA62F,WAAA72F,EAAA62F,WAAA,EAEA10F,KAAAue,OAAA,GAAA1K,GAAA+6C,QAAA,KACA5uD,KAAAw6C,OAAA,GAAA3mC,GAAA+6C,QAAA,KAEA5uD,KAAAgxF,OAAAj4F,SAAA8E,EAAAmzF,OAAAnzF,EAAAmzF,OAAAn9E,EAAAghD,WACA70D,KAAA2E,KAAA5L,SAAA8E,EAAA8G,KAAA9G,EAAA8G,KAAAkP,EAAAmgD,iBAEAh0D,KAAAqlH,YAAAtsH,SAAA8E,EAAAwnH,aAAAxnH,EAAAwnH,YACArlH,KAAAslH,cAAAvsH,SAAA8E,EAAAynH,eAAAznH,EAAAynH,cAEAtlH,KAAAoxF,mBAEApxF,KAAAwvH,eAAAz2H,SAAA8E,EAAA2xH,eAAA3xH,EAAA2xH,eAAA,MAIA37G,EAAA+7G,kBAAAzzH,WAEAE,YAAAwX,EAAA+7G,kBAEAz2G,QAAA,SAAA1J,EAAAC,GAEA1P,KAAAyP,WAAAzP,KAAA0P,aAEA1P,KAAAyP,QACAzP,KAAA0P,SAEA1P,KAAAsZ,YAMAkwC,MAAA,WAEA,UAAAxpD,MAAA3D,aAAAoc,KAAAzY,OAIAyY,KAAA,SAAAxV,GA0BA,MAxBAjD,MAAAyP,MAAAxM,EAAAwM,MACAzP,KAAA0P,OAAAzM,EAAAyM,OAEA1P,KAAAm1F,MAAAlyF,EAAAkyF,MACAn1F,KAAAo1F,MAAAnyF,EAAAmyF,MAEAp1F,KAAAixF,UAAAhuF,EAAAguF,UACAjxF,KAAAkxF,UAAAjuF,EAAAiuF,UAEAlxF,KAAA00F,WAAAzxF,EAAAyxF,WAEA10F,KAAAue,OAAA9F,KAAAxV,EAAAsb,QACAve,KAAAw6C,OAAA/hC,KAAAxV,EAAAu3C,QAEAx6C,KAAAgxF,OAAA/tF,EAAA+tF,OACAhxF,KAAA2E,KAAA1B,EAAA0B,KAEA3E,KAAAqlH,YAAApiH,EAAAoiH,YACArlH,KAAAslH,cAAAriH,EAAAqiH,cAEAtlH,KAAAoxF,gBAAAnuF,EAAAmuF,gBAEApxF,KAAAwvH,eAAAvsH,EAAAusH,eAEAxvH,MAIAsZ,QAAA,WAEAtZ,KAAA8sD,eAAuBnoD,KAAA,cAMvBkP,EAAAq7C,gBAAA/yD,UAAAyH,MAAAiQ,EAAA+7G,kBAAAzzH,WAQA0X,EAAAk9E,sBAAA,SAAAthF,EAAAC,EAAA7R,GAEAgW,EAAA+7G,kBAAAv4H,KAAA2I,KAAAyP,EAAAC,EAAA7R,GAEAmC,KAAAqxF,eAAA,GAIAx9E,EAAAk9E,sBAAA50F,UAAA7B,OAAA8B,OAAAyX,EAAA+7G,kBAAAzzH,WACA0X,EAAAk9E,sBAAA50F,UAAAE,YAAAwX,EAAAk9E,sBAQAl9E,EAAAi3G,oBAAA,SAAAzW,EAAA2C,EAAAkT,GAIA,QAAAiE,GAAAn0H,GAEAgmC,EAAAhmC,EAIA,QAAA5B,GAAAwmB,EAAA2mC,GAEA8uD,EAAAsZ,WAAA3tF,EAAAphB,EAAA2mC,GAEA2kE,EAAAC,QACAD,EAAAzrG,UAAA8mC,EACAvlB,IAAAq0E,EAAAuZ,YAAA1D,EAAA/rG,OAAAonC,EAAA,GAIA,QAAA8oE,GAAA93G,GAEA,GAAAwgG,GAAAC,EAAA1vG,IAAA,yBAEA,WAAAyvG,EAGA,WADAvzG,SAAAC,MAAA,iIAKA,IAAAoS,GAAAU,EAAAu2D,WAAAj3D,QAEAA,aAAAhC,GAAAk0E,2BAEAgvB,EAAAma,yBAAAlxF,EAAA,EAAAnqB,EAAAkH,KAAAwoC,MAAAhvC,EAAA25E,mBAIA6mB,EAAAma,yBAAAlxF,EAAA,EAAAnqB,EAAA0vC,MAAAhvC,EAAA25E,mBArCA,GAAAlwD,EA2CAhgC,MAAAmuH,UACAnuH,KAAA5H,SACA4H,KAAAquH,mBAUAx6G,EAAAm3G,2BAAA,SAAA3W,EAAA2C,EAAAkT,GAIA,QAAAiE,GAAAn0H,GAEAgmC,EAAAhmC,EAMA,QAAAs0F,GAAA18E,GAEAA,EAAA+J,gBAAA0rE,cAAA2vB,EAAA1vG,IAAA,2BAEA3C,EAAA0vG,EAAA0S,aACA/9E,EAAA,IAIArkC,EAAA0vG,EAAAwS,eACA79E,EAAA,GAMA,QAAA5wC,GAAAwmB,EAAA2mC,GAEA8uD,EAAA8c,aAAAnxF,EAAAulB,EAAA5gD,EAAAia,EAAAoqB,GAEAkhF,EAAAC,QACAD,EAAAzrG,UAAA8mC,EACAvlB,IAAAq0E,EAAAuZ,YAAA1D,EAAA/rG,OAAAonC,EAAA,GAIA,QAAA8oE,GAAA93G,GAEA,GAAAwgG,GAAAC,EAAA1vG,IAAA,yBAEA,WAAAyvG,EAGA,WADAvzG,SAAAC,MAAA,iIAKA,IAAAmO,GAAA2E,EAAA3E,KAEAmlG,GAAAqa,2BAAApxF,EAAApuB,EAAA+J,MAAA7hB,OAAA6K,EAAA,EAAA4R,EAAA25E,mBAjDA,GAAAlwD,GAQAr7B,EAAAqkC,CA6CAhpC,MAAAmuH,UACAnuH,KAAAsuF,WACAtuF,KAAA5H,SACA4H,KAAAquH,mBAUAx6G,EAAA02G,gBAAA,SAAA8G,GAEA,GAAAra,KAEAh3G,MAAAsH,IAAA,SAAAnO,GAEA,GAAAJ,SAAAi+G,EAAA79G,GAEA,MAAA69G,GAAA79G,EAIA,IAAA49G,EAEA,QAAA59G,GAEA,qCACA49G,EAAAsa,EAAAC,aAAA,mCAAAD,EAAAC,aAAA,uCAAAD,EAAAC,aAAA,wCACA,MAEA,qCACAva,EAAAsa,EAAAC,aAAA,kCAAAD,EAAAC,aAAA,sCAAAD,EAAAC,aAAA,uCACA,MAEA,sCACAva,EAAAsa,EAAAC,aAAA,mCAAAD,EAAAC,aAAA,wCACA,MAEA,SACAva,EAAAsa,EAAAC,aAAAn4H,GAYA,MARA,QAAA49G,GAEAvzG,QAAAwmD,KAAA,wBAAA7wD,EAAA,6BAIA69G,EAAA79G,GAAA49G,EAEAA,IAQAljG,EAAA22G,kBAAA,SAAA6G,EAAAra,EAAArqB,GAEA,QAAA4kC,GAAAxlC,GAEA,aAAAA,EAAA,CAEA,GAAAslC,EAAAG,yBAAAH,EAAAI,cAAAJ,EAAAK,YAAA3lC,UAAA,GACAslC,EAAAG,yBAAAH,EAAAM,gBAAAN,EAAAK,YAAA3lC,UAAA,EAEA,aAIAA,GAAA,UAIA,kBAAAA,GAEAslC,EAAAG,yBAAAH,EAAAI,cAAAJ,EAAAO,cAAA7lC,UAAA,GACAslC,EAAAG,yBAAAH,EAAAM,gBAAAN,EAAAO,cAAA7lC,UAAA,EAEA,UAMA,OAIA/rF,KAAAuxH,kBAEAvxH,KAAA+rF,UAAAhzF,SAAA4zF,EAAAZ,UAAAY,EAAAZ,UAAA,QACA/rF,KAAAs8G,uBAAAvjH,SAAA4zF,EAAA2vB,wBAAA3vB,EAAA2vB,uBAEAt8G,KAAA++G,YAAAsS,EAAAnlD,aAAAmlD,EAAAQ,yBACA7xH,KAAA8xH,kBAAAT,EAAAnlD,aAAAmlD,EAAAU,gCACA/xH,KAAAyjH,eAAA4N,EAAAnlD,aAAAmlD,EAAAW,kBACAhyH,KAAAwkH,eAAA6M,EAAAnlD,aAAAmlD,EAAAY,2BAEAjyH,KAAAkyH,cAAAb,EAAAnlD,aAAAmlD,EAAAc,oBACAnyH,KAAAoyH,kBAAAf,EAAAnlD,aAAAmlD,EAAAgB,4BACAryH,KAAAsyH,YAAAjB,EAAAnlD,aAAAmlD,EAAAkB,qBACAvyH,KAAAwyH,oBAAAnB,EAAAnlD,aAAAmlD,EAAAoB,8BAEAzyH,KAAAwwH,eAAAxwH,KAAA8xH,kBAAA,EACA9xH,KAAA0yH,wBAAA1b,EAAA1vG,IAAA,qBACAtH,KAAA48G,oBAAA58G,KAAAwwH,gBAAAxwH,KAAA0yH,qBAEA,IAAAC,GAAApB,EAAAvxH,KAAA+rF,UAEA4mC,KAAA3yH,KAAA+rF,YAEAvoF,QAAAwmD,KAAA,uBAAAhqD,KAAA+rF,UAAA,uBAAA4mC,EAAA,YACA3yH,KAAA+rF,UAAA4mC,GAIA3yH,KAAAs8G,yBAEAt8G,KAAAs8G,yBAAAtF,EAAA1vG,IAAA,oBAYAuM,EAAA++G,gBAAA,SAAAvB,EAAA/b,EAAA8U,GAIA,QAAA9iH,GAAA6a,GAEA,GAAA5L,GAAA4L,EAAA5L,QAEA,IAAAxd,SAAA+rF,EAAAvuE,EAAApf,IAEA,MAAA2tF,GAAAvuE,EAAApf,GAIAof,GAAAkD,iBAAA,UAAAo5G,EAEA,IAAAC,EAsBA,OApBAv8G,aAAA1C,GAAA2K,eAEAs0G,EAAAv8G,EAEGA,YAAA1C,GAAA6L,WAEH3mB,SAAAwd,EAAAw8G,kBAEAx8G,EAAAw8G,oBAAAl/G,GAAA2K,gBAAAmuD,cAAAxqD,IAIA2wG,EAAAv8G,EAAAw8G,iBAIAjuC,EAAAvuE,EAAApf,IAAA27H,EAEA1I,EAAAC,OAAAvlC,aAEAguC,EAIA,QAAAD,GAAA3/F,GAEA,GAAA3c,GAAA2c,EAAAlwB,OACA8vH,EAAAhuC,EAAAvuE,EAAApf,GAEA67H,GAAAF,EAAAhmD,YAEAv2D,EAAA29B,oBAAA,UAAA2+E,SAEA/tC,GAAAvuE,EAAApf,GAEA,IAAA2D,GAAAw6G,EAAAhuG,IAAAiP,EACAzb,GAAAo7F,WAAA+8B,EAAAn4H,EAAAo7F,WAEAk0B,EAAAC,OAAAvlC,aAIA,QAAA2yB,GAAApxC,GAEA,MAAAA,aAAAxyD,GAAAk0E,2BAEAutB,EAAAhuG,IAAA++D,EAAAtpD,MAAAm2G,cAIA5d,EAAAhuG,IAAA++D,GAAA6sD,cAIA,QAAAD,GAAA5sD,GAEA,GAAAvpD,GAAA26F,EAAApxC,EAEAttE,UAAA+jB,IAEAu0G,EAAA8B,aAAAr2G,GACAs2G,EAAA/sD,IAMA,QAAA2sD,GAAAlmD,GAEA,OAAA3zE,KAAA2zE,GAEAmmD,EAAAnmD,EAAA3zE,IAMA,QAAAi6H,GAAA/sD,GAEAA,YAAAxyD,GAAAk0E,2BAEAutB,EAAAppF,OAAAm6C,EAAAtpD,MAIAu4F,EAAAppF,OAAAm6C,GArGA,GAAAye,KA2GA9kF,MAAAsH,OAUAuM,EAAA82G,aAAA,SAAA0G,EAAA/b,EAAA8U,GAMA,QAAArwG,GAAAoI,GAIA,GAAA5L,GAAAuuE,EAAAx9E,IAAA6a,EAEAA,GAAA5L,mBAAA1C,GAAA6L,UAEAnJ,EAAAy4E,iBAAA7sE,EAIA,IAAAvQ,GAAA2E,EAAA3E,MACAk7D,EAAAv2D,EAAAu2D,UAEA,QAAAl7D,GAEAyhH,EAAAzhH,EAAAy/G,EAAApD,qBAIA,QAAA90H,KAAA2zE,GAEAumD,EAAAvmD,EAAA3zE,GAAAk4H,EAAA1Z,aAMA,IAAAxpB,GAAA53E,EAAA43E,eAEA,QAAAh1F,KAAAg1F,GAIA,OAFAxyE,GAAAwyE,EAAAh1F,GAEAU,EAAA,EAAAuP,EAAAuS,EAAA7hB,OAAqCD,EAAAuP,EAAOvP,IAE5Cw5H,EAAA13G,EAAA9hB,GAAAw3H,EAAA1Z,aAMA,OAAAphG,GAIA,QAAA88G,GAAAhtD,EAAAitD,GAEA,GAAAv2G,GAAAspD,YAAAxyD,GAAAk0E,2BAAA1hB,EAAAtpD,KAAAspD,EAEAktD,EAAAje,EAAAhuG,IAAAyV,EAEAhkB,UAAAw6H,EAAAL,cAEAnG,EAAAwG,EAAAx2G,EAAAu2G,GAEGC,EAAA1zE,UAAA9iC,EAAA8iC,SAEH2zE,EAAAD,EAAAx2G,EAAAu2G,GAMA,QAAAvG,GAAAwG,EAAAx2G,EAAAu2G,GAEAC,EAAAL,cAAA7B,EAAAtE,eACAsE,EAAA3Z,WAAA4b,EAAAC,EAAAL,cAEA,IAAAO,GAAA12G,EAAAwoE,QAAA8rC,EAAAjE,aAAAiE,EAAAqC,WAEArC,GAAAnE,WAAAoG,EAAAv2G,EAAApB,MAAA83G,GAEAF,EAAA1zE,QAAA9iC,EAAA8iC,QAIA,QAAA2zE,GAAAD,EAAAx2G,EAAAu2G,GAEAjC,EAAA3Z,WAAA4b,EAAAC,EAAAL,eAEAn2G,EAAAwoE,cAAAxoE,EAAAyoE,YAAAjgC,WAIA8rE,EAAAsC,cAAAL,EAAA,EAAAv2G,EAAApB,OAEG,IAAAoB,EAAAyoE,YAAAjgC,MAEH/hD,QAAAC,MAAA,4KAIA4tH,EAAAsC,cAAAL,EAAAv2G,EAAAyoE,YAAAjnE,OAAAxB,EAAApB,MAAAm8F,kBACA/6F,EAAApB,MAAAi4G,SAAA72G,EAAAyoE,YAAAjnE,OAAAxB,EAAAyoE,YAAAjnE,OAAAxB,EAAAyoE,YAAAjgC,QAEAxoC,EAAAyoE,YAAAjgC,MAAA,GAIAguE,EAAA1zE,QAAA9iC,EAAA8iC,QAIA,QAAA43D,GAAApxC,GAEA,MAAAA,aAAAxyD,GAAAk0E,2BAEAutB,EAAAhuG,IAAA++D,EAAAtpD,MAAAm2G,cAIA5d,EAAAhuG,IAAA++D,GAAA6sD,cAIA,QAAAlF,GAAAz3G,GAEA,GAAAzb,GAAAw6G,EAAAhuG,IAAAiP,EAEA,IAAAxd,SAAA+B,EAAAo7F,UAEA,MAAAp7F,GAAAo7F,SAIA,IAAAjQ,MAEAr0E,EAAA2E,EAAA3E,MACAk7D,EAAAv2D,EAAAu2D,WACAj3D,EAAAi3D,EAAAj3D,QAIA,WAAAjE,EAKA,OAHAiiH,MACAl4G,EAAA/J,EAAA+J,MAEA9hB,EAAA,EAAAuP,EAAAuS,EAAA7hB,OAAqCD,EAAAuP,EAAOvP,GAAA,GAE5C,GAAA6O,GAAAiT,EAAA9hB,EAAA,GACAkP,EAAA4S,EAAA9hB,EAAA,GACAtC,EAAAokB,EAAA9hB,EAAA,EAEAi6H,GAAAD,EAAAnrH,EAAAK,IAAAk9E,EAAAvlF,KAAAgI,EAAAK,GACA+qH,EAAAD,EAAA9qH,EAAAxR,IAAA0uF,EAAAvlF,KAAAqI,EAAAxR,GACAu8H,EAAAD,EAAAt8H,EAAAmR,IAAAu9E,EAAAvlF,KAAAnJ,EAAAmR,OAQA,QAFAiT,GAAAmxD,EAAAj3D,SAAA8F,MAEA9hB,EAAA,EAAAuP,EAAAuS,EAAA7hB,OAAA,IAAiDD,EAAAuP,EAAOvP,GAAA,GAExD,GAAA6O,GAAA7O,EAAA,EACAkP,EAAAlP,EAAA,EACAtC,EAAAsC,EAAA,CAEAosF,GAAAvlF,KAAAgI,EAAAK,IAAAxR,IAAAmR,GAQA,GAAA2mF,GAAAx5E,EAAA0vC,MAAA,MAAA8hC,YAAAJ,YACA5gB,EAAA,GAAAxyD,GAAAwL,gBAAA,GAAAgwE,GAAApJ,GAAA,EAMA,OAJAotC,GAAAhtD,EAAAgrD,EAAApD,sBAEAnzH,EAAAo7F,UAAA7vB,EAEAA,EAIA,QAAAytD,GAAAD,EAAAnrH,EAAAK,GAEA,GAAAL,EAAAK,EAAA,CAEA,GAAA2lE,GAAAhmE,CACAA,GAAAK,EACAA,EAAA2lE,EAIA,GAAAqlD,GAAAF,EAAAnrH,EAEA,OAAA3P,UAAAg7H,GAEAF,EAAAnrH,IAAAK,OAGGgrH,EAAA/vH,QAAA+E,UAEHgrH,EAAArzH,KAAAqI,OA5MA,GAAA+7E,GAAA,GAAAjxE,GAAA++G,gBAAAvB,EAAA/b,EAAA8U,EAqNApqH,MAAAy3G,qBACAz3G,KAAAguH,wBAEAhuH,KAAA+Z,UAMAlG,EAAAmgH,aAAA,WAIA,QAAAC,GAAAxvB,GAEA,GAAAnmB,KAEA,QAAAnlF,KAAAsrG,GAAA,CAEA,GAAAzqG,GAAAyqG,EAAAtrG,EAEAa,SAEAskF,EAAA59E,KAAA,WAAAvH,EAAA,IAAAa,GAIA,MAAAskF,GAAA/7E,KAAA,MAIA,QAAA2xH,GAAA7C,EAAA3a,EAAAyd,GAMA,OAJA93B,MAEA/5F,EAAA+uH,EAAA+C,oBAAA1d,EAAA2a,EAAAgD,iBAEAx6H,EAAA,EAAkBA,EAAAyI,EAAOzI,IAAA,CAEzB,GAAAuwH,GAAAiH,EAAAiD,iBAAA5d,EAAA78G,GACAV,EAAAixH,EAAAjxH,KACA0oB,EAAAwvG,EAAAkD,mBAAA7d,EAAAv9G,GAIAq7H,EAAAr7H,EAAAukG,YAAA,MACA82B,aAAAr7H,EAAAW,OAAA,IAEAuiG,EAAAljG,EAAAs7H,OAAA,EAAAD,IAAA3yG,GAIAw6E,EAAAljG,GAAA0oB,EAIA,MAAAw6E,GAIA,QAAAq4B,GAAArD,EAAA3a,EAAAyd,GAMA,OAJArnD,MAEAxqE,EAAA+uH,EAAA+C,oBAAA1d,EAAA2a,EAAAsD,mBAEA96H,EAAA,EAAkBA,EAAAyI,EAAOzI,IAAA,CAEzB,GAAAuwH,GAAAiH,EAAAuD,gBAAAle,EAAA78G,GACAV,EAAAixH,EAAAjxH,IAIA2zE,GAAA3zE,GAAAk4H,EAAAwD,kBAAAne,EAAAv9G,GAIA,MAAA2zE,GAIA,QAAAgoD,GAAAp7H,GAEA,WAAAA,EAxEA,GAAAq7H,GAAA,CA4EA,iBAAA3gH,EAAAmmC,EAAA9kC,EAAAk3E,GAEA,GAAA0kC,GAAAj9G,EAAAnX,QAEAwnG,EAAAhvF,EAAAgvF,QAEAnI,EAAA7mF,EAAAglG,cAAAne,aACAC,EAAA9mF,EAAAglG,cAAAle,eAEAy4B,EAAA,sBAEAroC,GAAAmkC,gBAAAj9G,EAAA28C,aAEAwkE,EAAA,qBAEGroC,EAAAmkC,gBAAAj9G,EAAA48C,mBAEHukE,EAAA,0BAIA,IAAAC,GAAA,mBACAC,EAAA,yBACAC,EAAA,0BAEA,IAAAxoC,EAAAuQ,OAAA,CAEA,OAAAznF,EAAAynF,OAAAqD,SAEA,IAAA1sF,GAAAq/C,sBACA,IAAAr/C,GAAAs/C,sBACA8hE,EAAA,kBACA,MAEA,KAAAphH,GAAAu/C,iCACA,IAAAv/C,GAAAw/C,iCACA4hE,EAAA,qBACA,MAEA,KAAAphH,GAAAy/C,2BACA2hE,EAAA,qBAKA,OAAAx/G,EAAAynF,OAAAqD,SAEA,IAAA1sF,GAAAs/C,sBACA,IAAAt/C,GAAAw/C,iCACA6hE,EAAA,yBAKA,OAAAz/G,EAAA0nF,SAEA,IAAAtpF,GAAAi/C,kBACAqiE,EAAA,0BACA,MAEA,KAAAthH,GAAAk/C,aACAoiE,EAAA,qBACA,MAEA,KAAAthH,GAAAm/C,aACAmiE,EAAA,uBAOA,GAYAC,GAAAC,EAZAC,EAAAlhH,EAAA4iD,YAAA,EAAA5iD,EAAA4iD,YAAA,EAMAu+D,EAAAtB,EAAAxvB,GAIAiS,EAAA2a,EAAAmE,eAIA//G,aAAA5B,GAAAixF,mBAEAswB,EAAA,GACAC,EAAA,KAIAD,GAEA,aAAAzoC,EAAAZ,UAAA,UACA,aAAAY,EAAAZ,UAAA,QAEA,uBAAAt2E,EAAAglG,cAAAthH,KAEAo8H,EAEA5oC,EAAA4jC,uBAAA,6BAEAn8G,EAAAy1G,WAAA,yBACAz1G,EAAA01G,YAAA,0BACA,wBAAAwL,EAEA,0BAAA3oC,EAAA8oC,aACA,4BAAA9oC,EAAA+oC,eACA,2BAAA/oC,EAAAgpC,cACA,2BAAAhpC,EAAAipC,cAEA,uBAAAjpC,EAAAkpC,WAEA,qBAAAlpC,EAAAmpC,SAEAnpC,EAAAtqF,IAAA,qBACAsqF,EAAAuQ,OAAA,wBACAvQ,EAAAuQ,OAAA,WAAAg4B,EAAA,GACAvoC,EAAA0Q,SAAA,0BACA1Q,EAAA4Q,MAAA,uBACA5Q,EAAAoX,YAAA,6BACApX,EAAAiQ,QAAA,yBACAjQ,EAAAkQ,UAAA,2BACAlQ,EAAAmQ,iBAAAnQ,EAAA4jC,uBAAA,iCACA5jC,EAAAsQ,YAAA,6BACAtQ,EAAAgQ,SAAA,0BACAhQ,EAAA/0E,aAAA,uBAEA+0E,EAAAopC,YAAA,yBAEAppC,EAAAkX,SAAA,0BACAlX,EAAAqc,iBAAA,0BAEArc,EAAAxE,aAAA,8BACAwE,EAAAtE,cAAAsE,EAAAopC,iBAAA,8BACAppC,EAAAsJ,YAAA,0BACAtJ,EAAAqJ,UAAA,wBAEArJ,EAAAkkC,iBAAA,2BACAlkC,EAAAkkC,iBAAA,WAAAmE,EAAA,GACAroC,EAAAqkC,eAAA,6BAEArkC,EAAA+P,gBAAA,iCAEA/P,EAAA2vB,uBAAA,6BACA3vB,EAAA2vB,wBAAAloG,EAAA4iG,WAAA1vG,IAAA,mDAGA,4BACA,gCACA,iCACA,2BACA,6BACA,+BAEA,2BACA,yBACA,qBAEA,mBAEA,0BAEA,SAEA,0BAEA,iCACA,iCACA,iCACA,iCAEA,4BAEA,mCACA,mCACA,mCACA,mCAEA,UAEA,mCACA,mCACA,mCACA,mCAEA,WAEA,SAEA,sBAEA,8BACA,+BAEA,SAEA,MAEAkO,OAAAs/G,GAAAvyH,KAAA,MAEA8yH,GAEA1oC,EAAAiQ,SAAAjQ,EAAAkQ,WAAAlQ,EAAAopC,aAAAtgH,EAAAivF,YAAA,qDACA/X,EAAA2vB,wBAAAloG,EAAA4iG,WAAA1vG,IAAA,6DAEA,aAAAqlF,EAAAZ,UAAA,UACA,aAAAY,EAAAZ,UAAA,QAEA,uBAAAt2E,EAAAglG,cAAAthH,KAEAo8H,EAEA,0BAAA5oC,EAAA8oC,aACA,4BAAA9oC,EAAA+oC,eACA,2BAAA/oC,EAAAgpC,cACA,2BAAAhpC,EAAAipC,cAEA,uBAAAjpC,EAAAkpC,WAEAlpC,EAAA6P,UAAA,qBAAA7P,EAAA6P,UAAA,GAEApoF,EAAAy1G,WAAA,yBACAz1G,EAAA01G,YAAA,0BACA,wBAAAwL,EAEA3oC,EAAAqpC,QAAArpC,EAAA0W,IAAA,qBACA1W,EAAAqpC,QAAArpC,EAAAspC,OAAA,sBAEAtpC,EAAAtqF,IAAA,qBACAsqF,EAAAuQ,OAAA,wBACAvQ,EAAAuQ,OAAA,WAAA+3B,EAAA,GACAtoC,EAAAuQ,OAAA,WAAAg4B,EAAA,GACAvoC,EAAAuQ,OAAA,WAAAi4B,EAAA,GACAxoC,EAAA0Q,SAAA,0BACA1Q,EAAA4Q,MAAA,uBACA5Q,EAAAoX,YAAA,6BACApX,EAAAiQ,QAAA,yBACAjQ,EAAAkQ,UAAA,2BACAlQ,EAAAsQ,YAAA,6BACAtQ,EAAAgQ,SAAA,0BACAhQ,EAAA/0E,aAAA,uBAEA+0E,EAAAopC,YAAA,yBAEAppC,EAAAmX,MAAA,mBACAnX,EAAAsJ,YAAA,0BACAtJ,EAAAqJ,UAAA,wBAEArJ,EAAAkkC,iBAAA,2BACAlkC,EAAAkkC,iBAAA,WAAAmE,EAAA,GACAroC,EAAAqkC,eAAA,6BAEArkC,EAAA2vB,uBAAA,6BACA3vB,EAAA2vB,wBAAAloG,EAAA4iG,WAAA1vG,IAAA,mDAEA,2BACA,+BAEA,MAEAkO,OAAAs/G,GAAAvyH,KAAA,MAIA,IAAA2zH,GAAAd,EAAA94B,EACA65B,EAAAd,EAAA94B,EAEA65B,EAAAviH,EAAAwiH,YAAAhF,IAAAI,cAAAyE,GACAI,EAAAziH,EAAAwiH,YAAAhF,IAAAM,gBAAAwE,EAEA9E,GAAAkF,aAAA7f,EAAA0f,GACA/E,EAAAkF,aAAA7f,EAAA4f,GAIAv9H,SAAA0c,EAAAmvF,oBAEAysB,EAAAmF,mBAAA9f,EAAA,EAAAjhG,EAAAmvF,qBAEGjY,EAAAxE,mBAGHkpC,EAAAmF,mBAAA9f,EAAA,cAIA2a,EAAAoF,YAAA/f,EAEA,IAAAggB,GAAArF,EAAAsF,kBAAAjgB,GACAkgB,EAAAvF,EAAAwF,iBAAAT,GACAU,EAAAzF,EAAAwF,iBAAAP,GAEAS,KACAC,IAEA3F,GAAA+C,oBAAA1d,EAAA2a,EAAA4F,mBAEAF,KAEAvzH,QAAAC,MAAA,qCAAA4tH,EAAA6F,WAAA,qBAAA7F,EAAA+C,oBAAA1d,EAAA2a,EAAA8F,iBAAA,uBAAAT,EAAAE,EAAAE,IAEG,KAAAJ,EAEHlzH,QAAAwmD,KAAA,6CAAA0sE,GAEG,KAAAE,GAAA,KAAAE,IAEHE,MAIAA,IAEAh3H,KAAAo3H,aAEAL,WACAthH,WAEAihH,aAEAp6B,cAEAxsF,IAAA8mH,EACA74H,OAAAq3H,GAIA74B,gBAEAzsF,IAAAgnH,EACA/4H,OAAAs3H,KAUAhE,EAAAgG,aAAAjB,GACA/E,EAAAgG,aAAAf,EAIA,IAAAgB,EAEAt3H,MAAAi7G,YAAA,WAQA,MANAliH,UAAAu+H,IAEAA,EAAApD,EAAA7C,EAAA3a,IAIA4gB,EAMA,IAAAC,EAyDA,OAvDAv3H,MAAAo3G,cAAA,WAQA,MANAr+G,UAAAw+H,IAEAA,EAAA7C,EAAArD,EAAA3a,IAIA6gB,GAMAv3H,KAAAykC,QAAA,WAEA4sF,EAAAmG,cAAA9gB,GACA12G,KAAA02G,QAAA39G,QAMAuB,OAAA8Y,iBAAApT,MAEAq8F,UACA/0F,IAAA,WAGA,MADA9D,SAAAwmD,KAAA,wDACAhqD,KAAAi7G,gBAKAnuC,YACAxlE,IAAA,WAGA,MADA9D,SAAAwmD,KAAA,4DACAhqD,KAAAo3G,oBAUAp3G,KAAA7I,GAAA49H,IACA/0H,KAAAu6C,OACAv6C,KAAAy3H,UAAA,EACAz3H,KAAA02G,UACA12G,KAAAs8F,aAAA85B,EACAp2H,KAAAu8F,eAAA+5B,EAEAt2H,SAQA6T,EAAA+2G,cAAA,SAAAx2G,EAAAioG,GA4BA,QAAAqb,GAAAv1G,GAEA,GAAAk6F,EAAAO,qBAAAz6F,KAAAgoF,UAAAhoF,EAAAgoF,SAAAnB,iBAEA,WAWA,IAAA2uB,GAAAtb,EAAA+V,kBACAwF,EAAA5+G,KAAA2tC,OAAAgxE,EAAA,OAEA7B,EAAA8B,CAcA,OAZA7+H,UAAAopB,eAAAtO,GAAA81F,cAEAmsB,EAAA98G,KAAA02B,IAAAvtB,EAAAgoF,SAAAhP,MAAArhG,OAAAg8H,GAEAA,EAAA3zG,EAAAgoF,SAAAhP,MAAArhG,QAEA0J,QAAAwmD,KAAA,mCAAA7nC,EAAAgoF,SAAAhP,MAAArhG,OAAA,4BAAAg8H,EAAA,mCAMAA,EAMA,QAAA+B,GAAA7iH,GAOA,OALA8iH,GAAA,EACAC,EAAA,EACAC,EAAA,EACAC,EAAA,EAEA7uH,EAAA,EAAA22G,EAAA/qG,EAAAlb,OAAsCsP,EAAA22G,EAAQ32G,IAAA,CAE9C,GAAAoL,GAAAQ,EAAA5L,EAEAoL,GAAA09E,YAAA19E,EAAAgD,eAEAhD,YAAAX,GAAA+B,kBAAAkiH,IACAtjH,YAAAX,GAAAw/E,YAAA0kC,IACAvjH,YAAAX,GAAA0/E,WAAAykC,IACAxjH,YAAAX,GAAAq/E,iBAAA+kC,KAIA,OAAU7Z,YAAA0Z,EAAA/sD,MAAAgtD,EAAAxZ,KAAAyZ,EAAArZ,KAAAsZ,GAIV,QAAAC,GAAAljH,GAIA,OAFA6gH,GAAA,EAEAzsH,EAAA,EAAA22G,EAAA/qG,EAAAlb,OAAsCsP,EAAA22G,EAAQ32G,IAAA,CAE9C,GAAAoL,GAAAQ,EAAA5L,EAEAoL,GAAAkuE,aAEAluE,YAAAX,GAAA0/E,WAAAsiC,IACArhH,YAAAX,GAAA+B,kBAAAigH,KAIA,MAAAA,GAvGA,GAAAvL,MAEA6N,GACAn0B,kBAAA,QACAC,mBAAA,SACAR,kBAAA,QACArsF,oBAAA,UACAM,kBAAA,QACAurF,kBAAA,QACAK,mBAAA,SACAc,eAAA,UAGAg0B,GACA,iEACA,qEACA,4DACA,oEACA,4DACA,oEACA,gEACA,mEACA,YAqFAp4H,MAAAo6G,cAAA,SAAA3kG,EAAAT,EAAAquF,EAAAlhF,GAEA,GAAAo4F,GAAA4d,EAAA1iH,EAAA9Q,MAIA0zH,EAAAR,EAAA7iH,GACA6gH,EAAAqC,EAAAljH,GACA8gH,EAAA4B,EAAAv1G,GACA4pE,EAAA33E,EAAAq3G,cAEA,QAAAh2G,EAAAs2E,YAEAA,EAAAswB,EAAAkV,gBAAA97G,EAAAs2E,WAEAA,IAAAt2E,EAAAs2E,WAEAvoF,QAAAwmD,KAAA,oCAAAv0C,EAAAs2E,UAAA,uBAAAA,EAAA,YAMA,IAAAY,IAEA4tB,WAEAxuB,YACAwkC,uBAAAlU,EAAAmU,eAEAnuH,MAAAoT,EAAApT,IACA66F,SAAAznF,EAAAynF,OACAo7B,WAAA7iH,EAAAynF,QAAAznF,EAAAynF,OAAAqD,QACAlD,WAAA5nF,EAAA4nF,SACAE,QAAA9nF,EAAA8nF,MACAwG,cAAAtuF,EAAAsuF,YACAnH,UAAAnnF,EAAAmnF,QACAC,YAAApnF,EAAAonF,UACAC,kBAAArnF,EAAAqnF,gBACAG,cAAAxnF,EAAAwnF,YACAN,WAAAlnF,EAAAknF,SAEAQ,QAAA1nF,EAAA0nF,QAEAvlF,aAAAnC,EAAAmC,aAEAyrF,MACA2yB,OAAAvgH,EAAA4tF,IACA4yB,OAAA5yB,YAAAxvF,GAAAi5F,QAEAipB,YAAAtgH,EAAAmgF,UAAA/hF,EAAA+8C,YAEA8rC,gBAAAjnF,EAAAinF,gBACA4f,uBAAAD,EAAAC,uBAEAzY,SAAApuF,EAAAouF,SACAiyB,WACA9sB,iBAAAqT,EAAAO,qBAAAz6F,KAAAgoF,UAAAhoF,EAAAgoF,SAAAnB,iBAEA7gB,aAAA1yE,EAAA0yE,aACAE,aAAA5yE,EAAA4yE,aACAuyB,gBAAAxmG,EAAAwmG,gBACAE,gBAAA1mG,EAAA0mG,gBAEA2a,aAAA4C,EAAAja,YACAsX,eAAA2C,EAAAttD,MACA4qD,cAAA0C,EAAA9Z,KACAqX,cAAAyC,EAAA1Z,KAEAkX,aACAhF,iBAAAz8G,EAAA0+E,UAAAjnC,SAAA1pC,EAAAwgE,eAAAkzC,EAAA,EACA/E,cAAA18G,EAAA0+E,UAAAnuF,KACAqsH,eAAA58G,EAAA0+E,UAAAm+B,MAEAz0B,UAAA/mF,EAAA+mF,UACAsH,MAAAruF,EAAAquF,MACA7N,YAAAxgF,EAAA6B,OAAAzD,EAAA0D,WACAy+E,UAAAvgF,EAAA6B,OAAAzD,EAAA88C,SAIA,OAAAg8B,IAIA3sF,KAAAq6G,eAAA,SAAA5kG,EAAAk3E,GAEA,GAAArO,KAaA,IAXAqO,EAAA4tB,SAEAj8B,EAAA59E,KAAAisF,EAAA4tB,WAIAj8B,EAAA59E,KAAA+U,EAAA8mF,gBACAje,EAAA59E,KAAA+U,EAAA6mF,eAIAvjG,SAAA0c,EAAAgvF,QAEA,OAAAtrG,KAAAsc,GAAAgvF,QAEAnmB,EAAA59E,KAAAvH,GACAmlF,EAAA59E,KAAA+U,EAAAgvF,QAAAtrG,GAMA,QAAAU,GAAA,EAAkBA,EAAAu+H,EAAAt+H,OAA2BD,IAAA,CAE7C,GAAA0+H,GAAAH,EAAAv+H,EACAykF,GAAA59E,KAAA63H,GACAj6C,EAAA59E,KAAAisF,EAAA4rC,IAIA,MAAAj6C,GAAA/7E,QAIAvC,KAAA06G,eAAA,SAAAjlG,EAAAk3E,EAAApyC,GAKA,OAHAm8D,GAGAl/G,EAAA,EAAAghI,EAAAlO,EAAAxwH,OAAwCtC,EAAAghI,EAAQhhI,IAAA,CAEhD,GAAAi/G,GAAA6T,EAAA9yH,EAEA,IAAAi/G,EAAAl8D,SAAA,CAEAm8D,EAAAD,IACAC,EAAA+gB,SAEA,QAaA,MAPA1+H,UAAA29G,IAEAA,EAAA,GAAA7iG,GAAAmgH,aAAA5/G,EAAAmmC,EAAA9kC,EAAAk3E,GACA29B,EAAA5pH,KAAAg2G,IAIAA,GAIA12G,KAAA42G,eAAA,SAAAF,GAEA,SAAAA,EAAA+gB,UAAA,CAGA,GAAA59H,GAAAywH,EAAAtmH,QAAA0yG,EACA4T,GAAAzwH,GAAAywH,IAAAxwH,OAAA,GACAwwH,EAAAnkE,MAGAuwD,EAAAjyE,YAOAzkC,KAAAsqH,YAUAz2G,EAAA62G,gBAAA,WAEA,GAAApV,KAEAt1G,MAAAsH,IAAA,SAAA6a,GAEA,GAAAw5D,GAAAx5D,EAAAw5D,KACAt5E,EAAAizG,EAAA35B,EASA,OAPA5iF,UAAAsJ,IAEAA,KACAizG,EAAA35B,GAAAt5E,GAIAA,GAIArC,KAAAksB,OAAA,SAAA/J,SAEAmzF,GAAAnzF,EAAAw5D,OAIA37E,KAAAi2D,MAAA,WAEAq/C,OAQAzhG,EAAAwiH,YAAA,WAEA,GAAAoC,GAAA,SAAA/+H,GAIA,OAFAg/H,GAAAh/H,EAAAgE,MAAA,MAEA7D,EAAA,EAAkBA,EAAA6+H,EAAA5+H,OAAkBD,IAEpC6+H,EAAA7+H,KAAA,OAAA6+H,EAAA7+H,EAIA,OAAA6+H,GAAAn2H,KAAA,MAIA,iBAAA8uH,EAAA1sH,EAAAjL,GAEA,GAAA8gH,GAAA6W,EAAAsH,aAAAh0H,EAoBA,OAlBA0sH,GAAAuH,aAAApe,EAAA9gH,GACA23H,EAAAwH,cAAAre,GAEA6W,EAAAyH,mBAAAte,EAAA6W,EAAA0H,sBAEAv1H,QAAAC,MAAA,+CAIA,KAAA4tH,EAAAwF,iBAAArc,IAEAh3G,QAAAwmD,KAAA,2CAAArlD,IAAA0sH,EAAAI,cAAA,oBAAAJ,EAAAwF,iBAAArc,GAAAie,EAAA/+H,IAOA8gH,MAaA3mG,EAAAo3G,eAAA,SAAA+N,EAAA3b,EAAA4b,GAyPA,QAAAC,GAAA/2G,EAAA1M,GAEA,GAKA0jH,GALA5iH,EAAA4L,EAAA5L,SAEA6iH,EAAArgI,SAAAwd,EAAA4xE,cAAA5xE,EAAA4xE,aAAAruF,OAAA,GAAA2b,EAAA0yE,aACAkxC,EAAAl3G,YAAAtO,GAAA81F,aAAAl0F,EAAAouF,QA0BA,OApBAs1B,GAFAh3G,EAAAm3G,oBAEAn3G,EAAAm3G,oBAEGD,EAEHD,EAAAG,EAAAC,EAEGJ,EAEHK,EAIAC,EAIAP,EAAA3hH,QAAA/B,EAAA+B,QACA2hH,EAAAjjC,UAAAzgF,EAAAygF,UACAijC,EAAA18B,mBAAAhnF,EAAAgnF,mBAEA08B,EAIA,QAAA/f,GAAAj3F,EAAAzJ,GAEA,GAAAyJ,EAAA3K,aAAA,CAEA,IAAA2K,YAAAtO,GAAAkE,MAAAoK,YAAAtO,GAAAktE,MAAA5+D,YAAAtO,GAAAotE,SAEA9+D,EAAAugE,aAAAvgE,EAAAygE,oBAAA22B,EAAAp/B,iBAAAh4D,SAAA,CAEA,GAAA1M,GAAA0M,EAAA1M,QAEAA,GAAA+B,eAEA2K,EAAAkgE,gBAAA9a,iBAAA7uD,EAAA23E,mBAAAluE,EAAAulD,aACAiyD,EAAAj5H,KAAAyhB,IAUA,OAFAlb,GAAAkb,EAAAlb,SAEApN,EAAA,EAAAuP,EAAAnC,EAAAnN,OAAuCD,EAAAuP,EAAOvP,IAE9Cu/G,EAAAnyG,EAAApN,GAAA6e,IAnTA,GAAA27F,GAAA2kB,EAAA/7H,QACA28H,EAAAZ,EAAAz6F,MACAg7E,EAAA,GAAA1lG,GAAA4kE,QACAghC,EAAA,GAAA5lG,GAAAyzD,QAKAuyD,GAHA,GAAAhmH,GAAA8L;AACA,GAAA9L,GAAA8L,QAEA,GAAA9L,GAAA8L,SAEAg6G,KAIAG,EAAAjmH,EAAAw/F,UAAAa,UACA6lB,EAAAlmH,EAAAgxF,cAAAr7C,MAAAswE,EAAAz9B,UAEAq9B,EAAA,GAAA7lH,GAAA2wF,gBACAnI,SAAA09B,EACAz9B,aAAAw9B,EAAAx9B,aACAC,eAAAu9B,EAAAv9B,iBAGAk9B,EAAA,GAAA5lH,GAAA2wF,gBACAnI,SAAA09B,EACAz9B,aAAAw9B,EAAAx9B,aACAC,eAAAu9B,EAAAv9B,eACApU,kBAGAqxC,EAAA,GAAA3lH,GAAA2wF,gBACAnI,SAAA09B,EACAz9B,aAAAw9B,EAAAx9B,aACAC,eAAAu9B,EAAAv9B,eACAsH,cAGA01B,EAAA,GAAA1lH,GAAA2wF,gBACAnI,SAAA09B,EACAz9B,aAAAw9B,EAAAx9B,aACAC,eAAAu9B,EAAAv9B,eACApU,gBACA0b,aAGA61B,GAAA9b,eACA6b,EAAA7b,eACA4b,EAAA5b,eACA2b,EAAA3b,cAIA,IAAArhG,GAAAvc,IAEAA,MAAA6rD,WAEA7rD,KAAA4sG,cACA5sG,KAAAylF,eAEAzlF,KAAA2E,KAAAkP,EAAA28C,aACAxwD,KAAA2uH,SAAA96G,EAAAs8C,cAEAnwD,KAAA5H,OAAA,SAAA8b,EAAAwE,GAEA,GAAA6D,EAAAsvC,eACAtvC,EAAAqwF,iBAAArwF,EAAAkpE,kBAAA,CAIA4uB,EAAAC,WAAA,SACAslB,EAAAje,QAAAtH,EAAA2lB,OAEAJ,EAAAne,OAAApH,EAAAqH,WACArH,EAAAwa,UAAAxa,EAAA0a,KAEAxyG,EAAAoyG,WAAA96G,EAAAs8C,cAEAkkD,EAAAsa,SAAAta,EAAA4a,OAIA5a,EAAAsa,SAAAta,EAAA2a,MAIA4K,EAAAve,gBAIA,QAAAxhH,GAAA,EAAA2xE,EAAA6xC,EAAAvjH,OAAuCD,EAAA2xE,EAAQ3xE,IAAA,CAE/C,GAAA2a,GAAA6oG,EAAAxjH,EAEA,IAAA2a,EAAAkuE,WAAA,CAEA,IAAAluE,EAAAs+E,UAAA,CAEA,GAAAmnC,GAAApmH,EAAAggD,YAEAt3C,GAAA5X,OAAAkP,EAAA48C,mBAEAwpE,EAAApmH,EAAA6/C,cAIA,IAAAwmE,IAAgBhpC,UAAA+oC,EAAAhpC,UAAAgpC,EAAAjpC,OAAAn9E,EAAAghD,WAEhBrgD,GAAAs+E,UAAA,GAAAj/E,GAAA+7G,kBAAAp7G,EAAAo+E,eAAAp+E,EAAAq+E,gBAAAqnC,GACA1lH,EAAAu+E,cAAA,GAAAl/E,GAAA+6C,QAAAp6C,EAAAo+E,eAAAp+E,EAAAq+E,iBAEAr+E,EAAAy+E,aAAA,GAAAp/E,GAAAyzD,QAIA,IAAA9yD,EAAAw+E,aAAA,CAEA,GAAAx+E,YAAAX,GAAA0/E,UAEA/+E,EAAAw+E,aAAA,GAAAn/E,GAAAkF,kBAAAvE,EAAAg/E,gBAAAh/E,EAAAo+E,eAAAp+E,EAAAq+E,gBAAAr+E,EAAA29E,iBAAA39E,EAAA49E,qBAEK,MAAA59E,YAAAX,GAAA+B,kBAIA,CAELpS,QAAAC,MAAA,2DAAA+Q,EACA,UALAA,EAAAw+E,aAAA,GAAAn/E,GAAAg2C,mBAAAr1C,EAAA69E,iBAAA79E,EAAA89E,kBAAA99E,EAAA+9E,gBAAA/9E,EAAAg+E,mBAAAh+E,EAAA29E,iBAAA39E,EAAA49E,iBASAl+E,EAAA6B,IAAAvB,EAAAw+E,cAEA9+E,EAAA04F,iBAAA14F,EAAA04D,oBAIAp4D,EAAAi+E,sBAAAj+E,EAAA2lH,eAEA3lH,EAAA2lH,aAAA,GAAAtmH,GAAAumH,aAAA5lH,EAAAw+E,cACA9+E,EAAA6B,IAAAvB,EAAA2lH,cAIA,IAAArnC,GAAAt+E,EAAAs+E,UACAG,EAAAz+E,EAAAy+E,aACAD,EAAAx+E,EAAAw+E,YAIAA,GAAAn9E,SAAA+yD,sBAAAp0D,EAAAkzD,aACAmyD,EAAAjxD,sBAAAp0D,EAAAxR,OAAA0kE,aACAsrB,EAAA/5E,OAAA4gH,GACA7mC,EAAApmB,oBAEAomB,EAAA3C,mBAAA5oB,WAAAurB,EAAAtrB,aAIAlzD,EAAA2lH,eAAA3lH,EAAA2lH,aAAA3iH,QAAAhD,EAAAi+E,qBACAj+E,EAAAi+E,qBAAAj+E,EAAA2lH,aAAApgH,SAIAk5E,EAAA/mF,IACA,UACA,UACA,UACA,SAGA+mF,EAAA96B,SAAA66B,EAAAxrB,kBACAyrB,EAAA96B,SAAA66B,EAAA3C,oBAIAopB,EAAAlyC,iBAAAyrB,EAAAxrB,iBAAAwrB,EAAA3C,oBACAkpB,EAAAtgC,cAAAwgC,GAIAuf,EAAA1nC,gBAAAwB,GACAkmC,EAAA/iE,QAIA0jE,EAAA7/H,OAAA,EAEAs/G,EAAAllG,EAAA8+E,EAKA,QAAAjlB,GAAA,EAAAkb,EAAA0wC,EAAA7/H,OAA4Ci0E,EAAAkb,EAAQlb,IAAA,CAEpD,GAAA5rD,GAAAw3G,EAAA5rD,GACAx3D,EAAA0iH,EAAAl/G,OAAAoI,GACA1M,EAAA0M,EAAA1M,QAEA,IAAAA,YAAA5B,GAAAswF,iBAKA,OAHAxa,GAAApzE,EAAAozE,OACA5E,EAAAtvE,EAAAsvE,UAEAt+E,EAAA,EAAA4mF,EAAA1D,EAAA7vF,OAAyC2M,EAAA4mF,EAAQ5mF,IAAA,CAEjD,GAAAmjF,GAAAD,EAAAljF,GACAizG,EAAA30B,EAAA6E,EAAAxE,cAEAs0B,GAAAliG,cAEAwhH,EAAAnf,mBAAA7mB,EAAAqqB,EAAA,KAAA9mG,EAAA2iH,EAAA/2G,EAAAu3F,GAAAv3F,EAAAynE,OAQAovC,GAAAnf,mBAAA7mB,EAAAqqB,EAAA,KAAA9mG,EAAA2iH,EAAA/2G,EAAA1M,GAAA0M,KAUA,GAAAmyF,GAAA0kB,EAAA7M,gBACAkO,EAAArB,EAAA5M,eAEA4M,GAAA5/G,cAAAk7F,EAAA+lB,GACAT,EAAAne,OAAApH,EAAA2lB,OAEAz9G,EAAAoyG,WAAA96G,EAAAs8C,eAEAkkD,EAAAsa,SAAAta,EAAA2a,MAIAgK,EAAAjkB,eAEAx4F,EAAAkpE,kBA8EA5xE,EAAA42G,WAAA,SAAA4G,EAAAra,EAAAmL,GAEA,GAAA1tG,GAAAzU,KAEAs6H,EAAA,GAAAv6G,YAAA,IACAw6G,EAAA,GAAAx6G,YAAA,IAEAs8F,KAEAme,EAAA,KAEAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KAEAC,EAAA,KACAC,EAAA,KAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAA,KACAC,EAAA,KAEAvc,EAAAsS,EAAAnlD,aAAAmlD,EAAAQ,yBAEA0J,EAAAxiI,OACAyiI,IAEAx7H,MAAA+a,KAAA,WAEAs2G,EAAA/c,WAAA,SACA+c,EAAA3E,WAAA,GACA2E,EAAA1E,aAAA,GAEA3sH,KAAAy7G,OAAA4V,EAAAoK,YACApK,EAAAlvB,UAAAkvB,EAAAqK,QAEArK,EAAAxC,UAAAwC,EAAAtC,KACAsC,EAAA1C,SAAA0C,EAAArC,MACAhvH,KAAAy7G,OAAA4V,EAAA3V,WAEA17G,KAAAy7G,OAAA4V,EAAA2I,OACA3I,EAAAtvB,cAAAsvB,EAAA/J,UACA+J,EAAAsK,UAAAtK,EAAAxJ,UAAAwJ,EAAAvJ,sBAIA9nH,KAAAi3G,eAAA,WAEA,OAAAp9G,GAAA,EAAAuP,EAAAkxH,EAAAxgI,OAA4CD,EAAAuP,EAAOvP,IAEnDygI,EAAAzgI,GAAA,GAMAmG,KAAAw3G,gBAAA,SAAAnxC,GAEAi0D,EAAAj0D,GAAA,EAEA,IAAAk0D,EAAAl0D,KAEAgrD,EAAAuK,wBAAAv1D,GACAk0D,EAAAl0D,GAAA,IAMArmE,KAAAo4G,wBAAA,WAEA,OAAAv+G,GAAA,EAAAuP,EAAAmxH,EAAAzgI,OAAgDD,EAAAuP,EAAOvP,IAEvD0gI,EAAA1gI,KAAAygI,EAAAzgI,KAEAw3H,EAAAwK,yBAAAhiI,GACA0gI,EAAA1gI,GAAA,IAQAmG,KAAAy7G,OAAA,SAAAtkH,GAEAklH,EAAAllH,UAEAk6H,EAAA5V,OAAAtkH,GACAklH,EAAAllH,QAMA6I,KAAA27G,QAAA,SAAAxkH,GAEAklH,EAAAllH,UAEAk6H,EAAA1V,QAAAxkH,GACAklH,EAAAllH,QAMA6I,KAAA8jH,4BAAA,WAEA,UAAA0W,IAEAA,KAEAxjB,EAAA1vG,IAAA,mCACA0vG,EAAA1vG,IAAA,kCAIA,OAFAw0H,GAAAzK,EAAAnlD,aAAAmlD,EAAA0K,4BAEAliI,EAAA,EAAoBA,EAAAiiI,EAAAhiI,OAAoBD,IAExC2gI,EAAA95H,KAAAo7H,EAAAjiI,GAQA,OAAA2gI,IAIAx6H,KAAAm7G,YAAA,SAAAtlB,EAAAkM,EAAAF,EAAAC,EAAAI,EAAAF,EAAAC,GAEApM,IAAA4kC,IAEA5kC,IAAAhiF,EAAAm9C,WAEAhxD,KAAA27G,QAAA0V,EAAA2I,OAEInkC,IAAAhiF,EAAAq9C,kBAEJlxD,KAAAy7G,OAAA4V,EAAA2I,OACA3I,EAAAtvB,cAAAsvB,EAAA/J,UACA+J,EAAAsK,UAAAtK,EAAAxJ,UAAAwJ,EAAA3J,MAEI7xB,IAAAhiF,EAAAs9C,qBAIJnxD,KAAAy7G,OAAA4V,EAAA2I,OACA3I,EAAAtvB,cAAAsvB,EAAA/J,UACA+J,EAAAsK,UAAAtK,EAAA5J,KAAA4J,EAAAzJ,sBAEI/xB,IAAAhiF,EAAAu9C,kBAIJpxD,KAAAy7G,OAAA4V,EAAA2I,OACA3I,EAAAtvB,cAAAsvB,EAAA/J,UACA+J,EAAAsK,UAAAtK,EAAA5J,KAAA4J,EAAA1J,YAEI9xB,IAAAhiF,EAAAw9C,eAEJrxD,KAAAy7G,OAAA4V,EAAA2I,QAIAh6H,KAAAy7G,OAAA4V,EAAA2I,OACA3I,EAAA2K,sBAAA3K,EAAA/J,SAAA+J,EAAA/J,UACA+J,EAAA4K,kBAAA5K,EAAAxJ,UAAAwJ,EAAAvJ,oBAAAuJ,EAAA3J,IAAA2J,EAAAvJ,sBAIA2S,EAAA5kC,GAIAA,IAAAhiF,EAAAw9C,gBAEA6wC,KAAAH,EACAC,KAAAH,EACAI,KAAAH,EAEAC,IAAA24B,GAAAx4B,IAAA24B,IAEAxJ,EAAA2K,sBAAA7Z,EAAApgB,GAAAogB,EAAAjgB,IAEAw4B,EAAA34B,EACA84B,EAAA34B,GAIAL,IAAA84B,GAAA74B,IAAA84B,GAAA54B,IAAA84B,GAAA74B,IAAA84B,IAEA1J,EAAA4K,kBAAA9Z,EAAAtgB,GAAAsgB,EAAArgB,GAAAqgB,EAAAngB,GAAAmgB,EAAAlgB,IAEA04B,EAAA94B,EACA+4B,EAAA94B,EACAg5B,EAAA94B,EACA+4B,EAAA94B,KAMAy4B,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,OAMA/6H,KAAAo7G,aAAA,SAAAjZ,GAEA,GAAA64B,IAAA74B,EAAA,CAEA,GAAAA,EAEA,OAAAA,GAEA,IAAAtuF,GAAAy+C,WAEA++D,EAAAlvB,UAAAkvB,EAAA6K,MACA,MAEA,KAAAroH,GAAA0+C,YAEA8+D,EAAAlvB,UAAAkvB,EAAA8K,OACA,MAEA,KAAAtoH,GAAA2+C,UAEA6+D,EAAAlvB,UAAAkvB,EAAA+K,KACA,MAEA,KAAAvoH,GAAA4+C,eAEA4+D,EAAAlvB,UAAAkvB,EAAAqK,OACA,MAEA,KAAA7nH,GAAA6+C,WAEA2+D,EAAAlvB,UAAAkvB,EAAAgL,MACA,MAEA,KAAAxoH,GAAA8+C,kBAEA0+D,EAAAlvB,UAAAkvB,EAAAiL,OACA,MAEA,KAAAzoH,GAAA++C,aAEAy+D,EAAAlvB,UAAAkvB,EAAAkL,QACA,MAEA,KAAA1oH,GAAAg/C,cAEAw+D,EAAAlvB,UAAAkvB,EAAAmL,SACA,MAEA,SAEAnL,EAAAlvB,UAAAkvB,EAAAqK,YAMArK,GAAAlvB,UAAAkvB,EAAAqK,OAIAV,GAAA74B,IAMAniG,KAAAq7G,aAAA,SAAAvlB,GAEAA,EAEA91F,KAAAy7G,OAAA4V,EAAAoK,YAIAz7H,KAAA27G,QAAA0V,EAAAoK,aAMAz7H,KAAAs7G,cAAA,SAAAvlB,GAEAklC,IAAAllC,IAEAs7B,EAAAoL,UAAA1mC,GACAklC,EAAAllC,IAMA/1F,KAAAu7G,cAAA,SAAAnZ,GAEA84B,IAAA94B,IAEAivB,EAAAqL,UAAAt6B,SACA84B,EAAA94B,IAMApiG,KAAA47G,aAAA,SAAA5lB,GAEAmlC,IAAAnlC,IAEAA,EAEAq7B,EAAAxC,UAAAwC,EAAAvC,IAIAuC,EAAAxC,UAAAwC,EAAAtC,KAIAoM,EAAAnlC,IAMAh2F,KAAAkuH,aAAA,SAAAz+G,GAEAA,IAAA2rH,IAEA/J,EAAA/C,UAAA7+G,GAEA2rH,EAAA3rH,IAMAzP,KAAAw7G,iBAAA,SAAAnZ,EAAAs6B,EAAAC,GAEAv6B,EAEAriG,KAAAy7G,OAAA4V,EAAAwL,qBAIA78H,KAAA27G,QAAA0V,EAAAwL,sBAIAx6B,GAAAg5B,IAAAsB,GAAArB,IAAAsB,IAEAvL,EAAAhvB,cAAAs6B,EAAAC,GAEAvB,EAAAsB,EACArB,EAAAsB,IAMA58H,KAAAksH,eAAA,SAAA4Q,GAEAA,EAEA98H,KAAAy7G,OAAA4V,EAAA0L,cAIA/8H,KAAA27G,QAAA0V,EAAA0L,eAQA/8H,KAAAgjH,cAAA,SAAAga,GAEAjkI,SAAAikI,MAAA3L,EAAApO,SAAAlE,EAAA,GAEAwc,IAAAyB,IAEA3L,EAAArO,cAAAga,GACAzB,EAAAyB,IAMAh9H,KAAAkjH,YAAA,SAAA+Z,EAAAC,GAEAnkI,SAAAwiI,GAEA9mH,EAAAuuG,eAIA,IAAAma,GAAA3B,EAAAD,EAEAxiI,UAAAokI,IAEAA,GAAmBx4H,KAAA5L,OAAA47F,QAAA57F,QACnByiI,EAAAD,GAAA4B,GAIAA,EAAAx4H,OAAAs4H,GAAAE,EAAAxoC,UAAAuoC,IAEA7L,EAAAnO,YAAA+Z,EAAAC,GAEAC,EAAAx4H,KAAAs4H,EACAE,EAAAxoC,QAAAuoC,IAMAl9H,KAAA+jH,qBAAA,WAEA,IAEAsN,EAAAtN,qBAAAngH,MAAAytH,EAAA9xH,WAEG,MAAAkE,GAEHD,QAAAC,WAMAzD,KAAA6jH,WAAA,WAEA,IAEAwN,EAAAxN,WAAAjgH,MAAAytH,EAAA9xH,WAEG,MAAAkE,GAEHD,QAAAC,WAQAzD,KAAAivD,MAAA,WAEA,OAAAp1D,GAAA,EAAkBA,EAAA0gI,EAAAzgI,OAA8BD,IAEhD,IAAA0gI,EAAA1gI,KAEAw3H,EAAAwK,yBAAAhiI,GACA0gI,EAAA1gI,GAAA,EAMAwiH,MAEAme,EAAA,KAEAC,EAAA,KAEAQ,EAAA,KACAC,EAAA,KAEAC,EAAA,OAaAtnH,EAAAw3G,gBAAA,SAAAj3G,EAAAgpH,GA4bA,QAAA5H,GAAAhb,GAEA,GAAA9D,GAAA2a,EAAAmE,gBAEAj5B,EAAA80B,EAAAsH,aAAAtH,EAAAM,iBACAr1B,EAAA+0B,EAAAsH,aAAAtH,EAAAI,eAEA1zH,EAAA,aAAAqW,EAAAq3G,eAAA,WAaA,OAXA4F,GAAAuH,aAAAr8B,EAAAx+F,EAAAy8G,EAAAje,gBACA80B,EAAAuH,aAAAt8B,EAAAv+F,EAAAy8G,EAAAle,cAEA+0B,EAAAwH,cAAAt8B,GACA80B,EAAAwH,cAAAv8B,GAEA+0B,EAAAkF,aAAA7f,EAAAna,GACA80B,EAAAkF,aAAA7f,EAAApa,GAEA+0B,EAAAoF,YAAA/f,GAEAA,EA9cA,GAGA2mB,GAAAC,EACA5mB,EAAA5pC,EAAAuvB,EACAkhC,EAEAC,EAAAC,EAPApM,EAAAj9G,EAAAnX,QACAshC,EAAAnqB,EAAAmqB,MAQAxjB,EAAA,WAEA,GAAA0D,GAAA,GAAAL,mBACA,MACA,SACA,WACA,QAGAD,EAAA,GAAA8oE,cACA,MACA,OAKAo2C,GAAAhM,EAAAtE,eACAuQ,EAAAjM,EAAAtE,eAEAsE,EAAA3Z,WAAA2Z,EAAA1Z,aAAA0lB,GACAhM,EAAAnE,WAAAmE,EAAA1Z,aAAAl5F,EAAA4yG,EAAAqC,aAEArC,EAAA3Z,WAAA2Z,EAAApD,qBAAAqP,GACAjM,EAAAnE,WAAAmE,EAAApD,qBAAA9vG,EAAAkzG,EAAAqC,aAIA8J,EAAAnM,EAAAtO,gBACA0a,EAAApM,EAAAtO,gBAEAxkF,EAAA2kF,YAAAmO,EAAAlO,WAAAqa,GACAnM,EAAAxN,WAAAwN,EAAAlO,WAAA,EAAAkO,EAAAnK,IAAA,QAAAmK,EAAAnK,IAAAmK,EAAA9K,cAAA,MACA8K,EAAApP,cAAAoP,EAAAlO,WAAAkO,EAAAnP,eAAAmP,EAAA9O,eACA8O,EAAApP,cAAAoP,EAAAlO,WAAAkO,EAAAjP,eAAAiP,EAAA9O,eACA8O,EAAApP,cAAAoP,EAAAlO,WAAAkO,EAAAhP,mBAAAgP,EAAAtL,SACAsL,EAAApP,cAAAoP,EAAAlO,WAAAkO,EAAA/O,mBAAA+O,EAAAtL,SAEAxnF,EAAA2kF,YAAAmO,EAAAlO,WAAAsa,GACApM,EAAAxN,WAAAwN,EAAAlO,WAAA,EAAAkO,EAAAlK,KAAA,QAAAkK,EAAAlK,KAAAkK,EAAA9K,cAAA,MACA8K,EAAApP,cAAAoP,EAAAlO,WAAAkO,EAAAnP,eAAAmP,EAAA9O,eACA8O,EAAApP,cAAAoP,EAAAlO,WAAAkO,EAAAjP,eAAAiP,EAAA9O,eACA8O,EAAApP,cAAAoP,EAAAlO,WAAAkO,EAAAhP,mBAAAgP,EAAAtL,SACAsL,EAAApP,cAAAoP,EAAAlO,WAAAkO,EAAA/O,mBAAA+O,EAAAtL,SAEAwX,EAAAlM,EAAAnlD,aAAAmlD,EAAAU,gCAAA,CAEA,IAAAvX,EAIAA,GAFA+iB,GAIAjhC,cAEA,+BAEA,+BACA,sBACA,0BAEA,kCAEA,2BACA,qBAEA,oBACA,6BAEA,gBAEA,YAEA,uBAEA,0BAEA,iEACA,6DACA,6DACA,6DACA,6DACA,6DACA,6DACA,6DACA,6DAEA,2CACA,2CACA,2CACA,2CAEA,uEACA,uEAEA,IAEA,uFAEA,KAEA/5F,KAAA,MAEAg6F,gBAEA,+BAEA,yBACA,yBACA,sBAEA,oBACA,6BAEA,gBAIA,0BAEA,6CAIA,iCAEA,wCAIA,WAEA,wCACA,sCACA,0BACA,6BAEA,IAEA,KAEAh6F,KAAA,QAQA+5F,cAEA,+BAEA,+BACA,sBACA,0BAEA,2BACA,qBAEA,oBAEA,gBAEA,YAEA,uBAEA,0BAEA,uEACA,uEAEA,IAEA,uFAEA,KAEA/5F,KAAA,MAEAg6F,gBAEA,2BAEA,+BAEA,yBACA,kCACA,yBACA,sBAEA,oBAEA,gBAIA,0BAEA,yDAIA,iCAEA,wCAIA,WAEA,oEACA,+DACA,+DACA,+DACA,2CAEA,wCACA,qCACA,0BACA,6BAEA,IAEA,KAEAh6F,KAAA,OAMAm0G,EAAA8e,EAAAhb,GAEA1tC,GACAkc,OAAAqoC,EAAAwD,kBAAAne,EAAA,YACAttB,GAAAioC,EAAAwD,kBAAAne,EAAA,OAGAra,GACAqhC,WAAArM,EAAAkD,mBAAA7d,EAAA,cACAr0G,IAAAgvH,EAAAkD,mBAAA7d,EAAA,OACAinB,aAAAtM,EAAAkD,mBAAA7d,EAAA,gBACAzoG,QAAAojH,EAAAkD,mBAAA7d,EAAA,WACAnnG,MAAA8hH,EAAAkD,mBAAA7d,EAAA,SACAluD,MAAA6oE,EAAAkD,mBAAA7d,EAAA,SACAn+F,SAAA84G,EAAAkD,mBAAA7d,EAAA,YACAknB,eAAAvM,EAAAkD,mBAAA7d,EAAA,mBAWA12G,MAAA5H,OAAA,SAAA8b,EAAAwE,EAAAmlH,EAAAC,GAEA,OAAAV,EAAAtjI,OAAA,CAEA,GAAAikI,GAAA,GAAAlqH,GAAA8L,QAEAq+G,EAAAF,EAAAD,EACAI,EAAA,GAAAJ,EACAK,EAAA,GAAAJ,EAEA90F,EAAA,GAAA80F,EACAt1E,EAAA,GAAA30C,GAAA+6C,QAAA5lB,EAAAg1F,EAAAh1F,GAEA40F,EAAA,GAAA/pH,GAAA8L,QAAA,OACAw+G,EAAA,GAAAtqH,GAAA+6C,QAAA,IAEA71D,UAAA29G,GAEA37F,IAIAs2G,EAAAlV,WAAAzF,GAEAn4E,EAAA04E,iBACA14E,EAAAi5E,gBAAA1qC,EAAAkc,QACAzqD,EAAAi5E,gBAAA1qC,EAAAsc,IACA7qD,EAAA65E,0BAKAiZ,EAAAtU,UAAA1gB,EAAAshC,aAAA,GACAtM,EAAAtU,UAAA1gB,EAAAh6F,IAAA,GAEAgvH,EAAA3Z,WAAA2Z,EAAA1Z,aAAA0lB,GACAhM,EAAAzZ,oBAAA9qC,EAAAkc,OAAA,EAAAqoC,EAAAxZ,SAAA,MACAwZ,EAAAzZ,oBAAA9qC,EAAAsc,GAAA,EAAAioC,EAAAxZ,SAAA,MAEAwZ,EAAA3Z,WAAA2Z,EAAApD,qBAAAqP,GAEA/+F,EAAAo9E,QAAA0V,EAAA3V,WACA2V,EAAAoL,aAEA,QAAA5iI,GAAA,EAAAuP,EAAAg0H,EAAAtjI,OAAqCD,EAAAuP,EAAOvP,IAAA,CAE5CmvC,EAAA,GAAA80F,EACAt1E,EAAAt8C,IAAA88B,EAAAg1F,EAAAh1F,EAIA,IAAAujE,GAAA6wB,EAAAvjI,EAgBA,IAdAkkI,EAAA7xH,IAAAqgG,EAAA7kC,YAAAxe,SAAA,IAAAqjD,EAAA7kC,YAAAxe,SAAA,IAAAqjD,EAAA7kC,YAAAxe,SAAA,KAEA60E,EAAAn3D,aAAAluD,EAAA23E,oBACA0tC,EAAAl3D,gBAAAnuD,EAAA8uD,kBAIAo2D,EAAAnlH,KAAAslH,GAEAI,EAAAl1H,EAAA20H,EAAA30H,EAAAg1H,IACAE,EAAAt1H,EAAA+0H,EAAA/0H,EAAAq1H,IAIAX,GACAY,EAAAl1H,EAAA,GACAk1H,EAAAl1H,EAAA40H,GACAM,EAAAt1H,EAAA,GACAs1H,EAAAt1H,EAAAi1H,EAAA,CAIAv/F,EAAAykF,cAAAqO,EAAApO,UACA1kF,EAAA2kF,YAAAmO,EAAAlO,WAAA,MACA5kF,EAAAykF,cAAAqO,EAAA+M,UACA7/F,EAAA2kF,YAAAmO,EAAAlO,WAAAqa,GACAnM,EAAAgN,eAAAhN,EAAAlO,WAAA,EAAAkO,EAAAnK,IAAAiX,EAAAl1H,EAAA,EAAAk1H,EAAAt1H,EAAA,WAKAwoH,EAAAtU,UAAA1gB,EAAAqhC,WAAA,GACArM,EAAApS,UAAA5iB,EAAA7zC,QAAAv/C,EAAAu/C,EAAA3/C,GACAwoH,EAAA3U,UAAArgB,EAAAuhC,iBAAA30H,EAAA20H,EAAA/0H,EAAA+0H,EAAArzH,GAEAg0B,EAAAo9E,QAAA0V,EAAA2I,OACAz7F,EAAAk9E,OAAA4V,EAAAoK,YAEApK,EAAAF,aAAAE,EAAAzD,UAAA,EAAAyD,EAAAxK,eAAA,GAKAtoF,EAAAykF,cAAAqO,EAAApO,UACA1kF,EAAA2kF,YAAAmO,EAAAlO,WAAAsa,GACApM,EAAAgN,eAAAhN,EAAAlO,WAAA,EAAAkO,EAAAlK,KAAAgX,EAAAl1H,EAAA,EAAAk1H,EAAAt1H,EAAA,WAKAwoH,EAAAtU,UAAA1gB,EAAAqhC,WAAA,GACAn/F,EAAAo9E,QAAA0V,EAAAoK,YAEAl9F,EAAAykF,cAAAqO,EAAA+M,UACA7/F,EAAA2kF,YAAAmO,EAAAlO,WAAAqa,GACAnM,EAAAF,aAAAE,EAAAzD,UAAA,EAAAyD,EAAAxK,eAAA,GAKAta,EAAAH,eAAA3zF,KAAAmlH,GAEArxB,EAAAF,qBAEAE,EAAAF,qBAAAE,GAIAA,EAAAD,mBAMA+kB,EAAAtU,UAAA1gB,EAAAqhC,WAAA,GACAn/F,EAAAk9E,OAAA4V,EAAA2I,MAEA,QAAAjsD,GAAA,EAAAkb,EAAAsjB,EAAAJ,WAAAryG,OAAkDi0E,EAAAkb,EAAQlb,IAAA,CAE1D,GAAAuwD,GAAA/xB,EAAAJ,WAAAp+B,EAEAuwD,GAAArwH,QAAA,MAAAqwH,EAAA91E,MAAA,OAEAo1E,EAAA30H,EAAAq1H,EAAAr1H,EACA20H,EAAA/0H,EAAAy1H,EAAAz1H,EACA+0H,EAAArzH,EAAA+zH,EAAA/zH,EAEAy+B,EAAAs1F,EAAAt1F,KAAAs1F,EAAA91E,MAAAs1E,EAEAt1E,EAAAv/C,EAAA+/B,EAAAg1F,EACAx1E,EAAA3/C,EAAAmgC,EAEAqoF,EAAA3U,UAAArgB,EAAAuhC,iBAAA30H,EAAA20H,EAAA/0H,EAAA+0H,EAAArzH,GACA8mH,EAAApS,UAAA5iB,EAAA7zC,QAAAv/C,EAAAu/C,EAAA3/C,GACAwoH,EAAA9U,UAAAlgB,EAAA9jF,SAAA+lH,EAAA/lH,UAEA84G,EAAA9U,UAAAlgB,EAAApuF,QAAAqwH,EAAArwH,SACAojH,EAAA3U,UAAArgB,EAAA9sF,MAAA+uH,EAAA/uH,MAAAlG,EAAAi1H,EAAA/uH,MAAA3G,EAAA01H,EAAA/uH,MAAAxG,GAEAw1B,EAAA48E,YAAAmjB,EAAAzoC,SAAAyoC,EAAAv8B,cAAAu8B,EAAAz8B,SAAAy8B,EAAAx8B,UACA1tF,EAAA4oG,WAAAshB,EAAA3pC,QAAA,GAEA08B,EAAAF,aAAAE,EAAAzD,UAAA,EAAAyD,EAAAxK,eAAA,MAYAtoF,EAAAk9E,OAAA4V,EAAA3V,WACAn9E,EAAAk9E,OAAA4V,EAAAoK,YACApK,EAAAoL,cAEAroH,EAAA2gG,kBAqCAlhG,EAAAs3G,aAAA,SAAA/2G,EAAAilG,GAgPA,QAAAmc,KAEA,GAAA9e,GAAA2a,EAAAmE,gBAEAl5B,EAAA+0B,EAAAsH,aAAAtH,EAAAI,eACAl1B,EAAA80B,EAAAsH,aAAAtH,EAAAM,gBAkGA,OAhGAN,GAAAuH,aAAAt8B,GAEA,aAAAloF,EAAAq3G,eAAA,UAEA,gCACA,iCACA,0BACA,sBACA,yBACA,wBAEA,2BACA,qBAEA,oBAEA,gBAEA,iCAEA,2CAEA,wBACA,iGACA,iGAEA,sBAEA,gEACA,uCACA,oDAEA,+BAEA,KAEAlpH,KAAA,OAEA8uH,EAAAuH,aAAAr8B,GAEA,aAAAnoF,EAAAq3G,eAAA,UAEA,sBACA,yBACA,yBAEA,uBACA,yBACA,4BACA,yBACA,wBACA,2BAEA,oBAEA,gBAEA,wCAEA,wCAEA,mEAEA,uBAEA,iDACA,yBAEA,wBAEA,oDAEA,WAEA,+BACA,wEACA,kDAEA,IAEA,mFAEA,IAEA,KAEAlpH,KAAA,OAEA8uH,EAAAwH,cAAAv8B,GACA+0B,EAAAwH,cAAAt8B,GAEA80B,EAAAkF,aAAA7f,EAAApa,GACA+0B,EAAAkF,aAAA7f,EAAAna,GAEA80B,EAAAoF,YAAA/f,GAEAA,EAIA,QAAA4B,GAAA5vG,EAAAK,GAEA,MAAAL,GAAA6B,IAAAxB,EAAAwB,EAEAxB,EAAAwB,EAAA7B,EAAA6B,EAIAxB,EAAA5R,GAAAuR,EAAAvR,GAjWA,GAGAkmI,GAAAC,EACA5mB,EAAA5pC,EAAAuvB,EAEA1H,EANA08B,EAAAj9G,EAAAnX,QACAshC,EAAAnqB,EAAAmqB,MASAggG,EAAA,GAAA1qH,GAAA8L,QACA6+G,EAAA,GAAA3qH,GAAAy2C,WACAm0E,EAAA,GAAA5qH,GAAA8L,QAEA5E,EAAA,WAEA,GAAA0D,GAAA,GAAAL,oBACA,OACA,WACA,cACA,SAGAD,EAAA,GAAA8oE,cACA,MACA,OAGAo2C,GAAAhM,EAAAtE,eACAuQ,EAAAjM,EAAAtE,eAEAsE,EAAA3Z,WAAA2Z,EAAA1Z,aAAA0lB,GACAhM,EAAAnE,WAAAmE,EAAA1Z,aAAAl5F,EAAA4yG,EAAAqC,aAEArC,EAAA3Z,WAAA2Z,EAAApD,qBAAAqP,GACAjM,EAAAnE,WAAAmE,EAAApD,qBAAA9vG,EAAAkzG,EAAAqC,aAEAhd,EAAA8e,IAEA1oD,GACAj3D,SAAAw7G,EAAAwD,kBAAAne,EAAA,YACAttB,GAAAioC,EAAAwD,kBAAAne,EAAA,OAGAra,GACAqiC,SAAArN,EAAAkD,mBAAA7d,EAAA,YACAioB,QAAAtN,EAAAkD,mBAAA7d,EAAA,WAEAn+F,SAAA84G,EAAAkD,mBAAA7d,EAAA,YACAluD,MAAA6oE,EAAAkD,mBAAA7d,EAAA,SAEAnnG,MAAA8hH,EAAAkD,mBAAA7d,EAAA,SACAr0G,IAAAgvH,EAAAkD,mBAAA7d,EAAA,OACAzoG,QAAAojH,EAAAkD,mBAAA7d,EAAA,WAEAr0B,gBAAAgvC,EAAAkD,mBAAA7d,EAAA,mBACAlvC,iBAAA6pD,EAAAkD,mBAAA7d,EAAA,oBAEAkoB,QAAAvN,EAAAkD,mBAAA7d,EAAA,WACA5E,WAAAuf,EAAAkD,mBAAA7d,EAAA,cACA3E,QAAAsf,EAAAkD,mBAAA7d,EAAA,WACA1E,OAAAqf,EAAAkD,mBAAA7d,EAAA,UACAzE,SAAAof,EAAAkD,mBAAA7d,EAAA,YAEAla,UAAA60B,EAAAkD,mBAAA7d,EAAA,aAGA,IAAA1hB,GAAA18F,SAAAD,cAAA,SACA28F,GAAAvlF,MAAA,EACAulF,EAAAtlF,OAAA,CAEA,IAAAzS,GAAA+3F,EAAAC,WAAA,KACAh4F,GAAA4hI,UAAA,QACA5hI,EAAA6hI,SAAA,SAEAnqC,EAAA,GAAA9gF,GAAAihF,QAAAE,GACAL,EAAAlP,eAIAzlF,MAAA5H,OAAA,SAAA8b,EAAAwE,GAEA,OAAA2gG,EAAAv/G,OAAA,CAIAf,SAAA29G,GAEA37F,IAIAs2G,EAAAlV,WAAAzF,GAEAn4E,EAAA04E,iBACA14E,EAAAi5E,gBAAA1qC,EAAAj3D,UACA0oB,EAAAi5E,gBAAA1qC,EAAAsc,IACA7qD,EAAA65E,0BAEA75E,EAAAo9E,QAAA0V,EAAA3V,WACAn9E,EAAAk9E,OAAA4V,EAAA2I,OAEA3I,EAAA3Z,WAAA2Z,EAAA1Z,aAAA0lB,GACAhM,EAAAzZ,oBAAA9qC,EAAAj3D,SAAA,EAAAw7G,EAAAxZ,SAAA,MACAwZ,EAAAzZ,oBAAA9qC,EAAAsc,GAAA,EAAAioC,EAAAxZ,SAAA,MAEAwZ,EAAA3Z,WAAA2Z,EAAApD,qBAAAqP,GAEAjM,EAAAjV,iBAAA/f,EAAA70B,oBAAA9uD,EAAA8uD,iBAAAte,UAEA3qB,EAAAykF,cAAAqO,EAAApO,UACAoO,EAAAtU,UAAA1gB,EAAAh6F,IAAA,EAEA,IAAA08H,GAAA,EACAC,EAAA,EACA37B,EAAAnvF,EAAAmvF,GAEAA,IAEAguB,EAAA3U,UAAArgB,EAAA4V,SAAA5O,EAAA9zF,MAAAlG,EAAAg6F,EAAA9zF,MAAA3G,EAAAy6F,EAAA9zF,MAAAxG,GAEAs6F,YAAAxvF,GAAAg5F,KAEAwkB,EAAA9U,UAAAlgB,EAAA0V,QAAA1O,EAAAjvB,MACAi9C,EAAA9U,UAAAlgB,EAAA2V,OAAA3O,EAAAhvB,KAEAg9C,EAAAtU,UAAA1gB,EAAAuiC,QAAA,GACAG,EAAA,EACAC,EAAA,GAEI37B,YAAAxvF,GAAAi5F,UAEJukB,EAAA9U,UAAAlgB,EAAAyV,WAAAzO,EAAA0J,SAEAskB,EAAAtU,UAAA1gB,EAAAuiC,QAAA,GACAG,EAAA,EACAC,EAAA,KAMA3N,EAAAtU,UAAA1gB,EAAAuiC,QAAA,GACAG,EAAA,EACAC,EAAA,EAOA,QAAAnlI,GAAA,EAAAuP,EAAAiwG,EAAAv/G,OAAsCD,EAAAuP,EAAOvP,IAAA,CAE7C,GAAAykI,GAAAjlB,EAAAx/G,EAEAykI,GAAAj8C,gBAAA9a,iBAAA7uD,EAAA23E,mBAAAiuC,EAAA52D,aACA42D,EAAA/zH,GAAA+zH,EAAAj8C,gBAAAn5B,SAAA,IAIAmwD,EAAAz3B,KAAA02B,EAMA,QAFA9vD,MAEA3uD,EAAA,EAAAuP,EAAAiwG,EAAAv/G,OAAsCD,EAAAuP,EAAOvP,IAAA,CAE7C,GAAAykI,GAAAjlB,EAAAx/G,GACA4b,EAAA6oH,EAAA7oH,QAEA47G,GAAA9U,UAAAlgB,EAAAG,UAAA/mF,EAAA+mF,WACA60B,EAAAjV,iBAAA/f,EAAAha,mBAAAi8C,EAAAj8C,gBAAAn5B,UAEAo1E,EAAA52D,YAAAqM,UAAAwqD,EAAAC,EAAAC,GAEAj2E,EAAA,GAAAi2E,EAAAx1H,EACAu/C,EAAA,GAAAi2E,EAAA51H,CAEA,IAAA+1H,GAAA,CAEA1qH,GAAAmvF,KAAA5tF,EAAA4tF,MAEAu7B,EAAAI,GAIAD,IAAAH,IAEAvN,EAAAtU,UAAA1gB,EAAAuiC,WACAG,EAAAH,GAIA,OAAAnpH,EAAApT,KAEAgvH,EAAApS,UAAA5iB,EAAAqiC,SAAAjpH,EAAApT,IAAAkc,OAAAtV,EAAAwM,EAAApT,IAAAkc,OAAA1V,GACAwoH,EAAApS,UAAA5iB,EAAAsiC,QAAAlpH,EAAApT,IAAAm4C,OAAAvxC,EAAAwM,EAAApT,IAAAm4C,OAAA3xC,KAIAwoH,EAAApS,UAAA5iB,EAAAqiC,SAAA,KACArN,EAAApS,UAAA5iB,EAAAsiC,QAAA,MAIAtN,EAAA9U,UAAAlgB,EAAApuF,QAAAwH,EAAAxH,SACAojH,EAAA3U,UAAArgB,EAAA9sF,MAAAkG,EAAAlG,MAAAlG,EAAAoM,EAAAlG,MAAA3G,EAAA6M,EAAAlG,MAAAxG,GAEAsoH,EAAA9U,UAAAlgB,EAAA9jF,SAAA9C,EAAA8C,UACA84G,EAAA/R,WAAAjjB,EAAA7zC,SAEAjqB,EAAA48E,YAAA1lG,EAAAogF,SAAApgF,EAAAssF,cAAAtsF,EAAAosF,SAAApsF,EAAAqsF,UACAvjE,EAAA88E,aAAA5lG,EAAAqgF,WACAv3D,EAAA+8E,cAAA7lG,EAAAsgF,YAEAtgF,EAAApT,KAAAoT,EAAApT,IAAA0yF,OAAAt/E,EAAApT,IAAA0yF,MAAAtlF,MAEA2E,EAAA4oG,WAAAvnG,EAAApT,IAAA,GAIA+R,EAAA4oG,WAAAroB,EAAA,GAIA08B,EAAAF,aAAAE,EAAAzD,UAAA,EAAAyD,EAAAxK,eAAA,GAMAtoF,EAAAk9E,OAAA4V,EAAA3V,WAEAtnG,EAAA2gG,kBAqIAlhG,EAAAorH,eAEA76H,MAAA,SAAA86H,EAAAC,EAAAt0C,GAEArnF,QAAAwmD,KAAA,kIAEA,IAAAf,EAEAk2E,aAAAtrH,GAAAkE,OAEAonH,EAAA58C,kBAAA48C,EAAAzpH,eAEAuzC,EAAAk2E,EAAAl2E,OACAk2E,IAAA5oH,UAIA2oH,EAAA96H,MAAA+6H,EAAAl2E,EAAA4hC,IAIAr8B,OAAA,SAAAj4C,GAGA,MADA/S,SAAAwmD,KAAA,6FACAzzC,EAAAi4C,WAcA36C,EAAAurH,YAEA/oH,YAAAtd,OAEAyoG,YAAA,SAAAxrF,EAAAuqF,EAAAnkF,EAAAE,GAEA,GAAAtI,GAAA,GAAAH,GAAA4hF,WACAzhF,GAAAqC,YAAArW,KAAAqW,WAEA,IAAAs+E,GAAA,GAAA9gF,GAAAihF,QAAA/7F,OAAAwnG,EAiBA,OAfAvsF,GAAA2I,KAAA3G,EAAA,SAAA++E,GAEAJ,EAAAI,QACAJ,EAAAlP,eAEArpE,KAAAu4E,IAEG57F,OAAA,SAAAm6B,GAEH5W,KAAA4W,KAIAyhE,EAAAH,WAAAx+E,EAEA2+E,GAIA0qC,gBAAA,SAAA1jH,EAAA4kF,EAAAnkF,EAAAE,GAEA,GAAA2oE,MAEAjxE,EAAA,GAAAH,GAAA4hF,WACAzhF,GAAAqC,YAAArW,KAAAqW,WA0BA,QAxBAs+E,GAAA,GAAA9gF,GAAA8xF,YAAA1gB,EAAAsb,GAEAnpG,EAAA,EAEAoqG,EAAA,SAAA3nG,GAEAma,EAAA2I,KAAAhB,EAAA9hB,GAAA,SAAAk7F,GAEAJ,EAAA1P,OAAAprF,GAAAk7F,EAEA39F,GAAA,EAEA,IAAAA,IAEAu9F,EAAAlP,eAEArpE,KAAAu4E,KAII57F,OAAAujB,IAIJziB,EAAA,EAAA2xE,EAAA7vD,EAAA7hB,OAAqCD,EAAA2xE,IAAQ3xE,EAE7C2nG,EAAA3nG,EAIA,OAAA86F,IAIA2qC,sBAAA,WAEA97H,QAAAC,MAAA,0FAIA87H,0BAAA,WAEA/7H,QAAAC,MAAA,8FAIA+7H,aAAA,SAAAzqC,EAAAv3F,GAIA,GAAAoqE,GAAA,SAAAl/D,EAAAK,GAEA,OAAAL,EAAA,GAAAK,EAAA,GAAAL,EAAA,GAAAK,EAAA,GAAAL,EAAA,GAAAK,EAAA,GAAAL,EAAA,GAAAK,EAAA,GAAAL,EAAA,GAAAK,EAAA,GAAAL,EAAA,GAAAK,EAAA,KAIA02H,EAAA,SAAA/2H,EAAAK,GAEA,OAAAL,EAAA,GAAAK,EAAA,GAAAL,EAAA,GAAAK,EAAA,GAAAL,EAAA,GAAAK,EAAA,KAIA+M,EAAA,SAAApN,GAEA,GAAAU,GAAA4P,KAAA+xC,KAAAriD,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,GACA,QAAAA,EAAA,GAAAU,EAAAV,EAAA,GAAAU,EAAAV,EAAA,GAAAU,GAIA5L,IAAA,CAEA,IAAAiS,GAAAslF,EAAAtlF,MACAC,EAAAqlF,EAAArlF,OAEAslF,EAAA18F,SAAAD,cAAA,SACA28F,GAAAvlF,QACAulF,EAAAtlF,QAEA,IAAAzS,GAAA+3F,EAAAC,WAAA,KACAh4F,GAAAi4F,UAAAH,EAAA,IAMA,QAJAh4E,GAAA9f,EAAAyiI,aAAA,IAAAjwH,EAAAC,GAAAqN,KACA4iH,EAAA1iI,EAAA2iI,gBAAAnwH,EAAAC,GACAy1E,EAAAw6C,EAAA5iH,KAEA9T,EAAA,EAAkBA,EAAAwG,EAAWxG,IAE7B,OAAAJ,GAAA,EAAmBA,EAAA6G,EAAY7G,IAAA,CAE/B,GAAAg3H,GAAAh3H,EAAA,MAAAA,EAAA,EACAi3H,EAAAj3H,EAAA,EAAA6G,EAAA,EAAAA,EAAA,EAAA7G,EAAA,EACAk3H,EAAA92H,EAAA,MAAAA,EAAA,EACA+2H,EAAA/2H,EAAA,EAAAwG,EAAA,EAAAA,EAAA,EAAAxG,EAAA,EAEAqiE,KACAqJ,GAAA,IAAA53D,EAAA,GAAAlU,EAAA4G,EAAAxG,IAAA,IAAAzL,EACA8tE,GAAA5qE,SAAA,EAAAqc,EAAA,GAAAlU,EAAA4G,EAAAswH,IAAA,IAAAviI,IACA8tE,EAAA5qE,UAAA,EAAAqc,EAAA,GAAA8iH,EAAApwH,EAAAswH,IAAA,IAAAviI,IACA8tE,EAAA5qE,MAAA,KAAAqc,EAAA,GAAA8iH,EAAApwH,EAAAxG,IAAA,IAAAzL,IACA8tE,EAAA5qE,MAAA,KAAAqc,EAAA,GAAA8iH,EAAApwH,EAAAuwH,IAAA,IAAAxiI,IACA8tE,EAAA5qE,MAAA,IAAAqc,EAAA,GAAAlU,EAAA4G,EAAAuwH,IAAA,IAAAxiI,IACA8tE,EAAA5qE,MAAA,IAAAqc,EAAA,GAAA+iH,EAAArwH,EAAAuwH,IAAA,IAAAxiI,IACA8tE,EAAA5qE,MAAA,IAAAqc,EAAA,GAAA+iH,EAAArwH,EAAAxG,IAAA,IAAAzL,IACA8tE,EAAA5qE,SAAA,EAAAqc,EAAA,GAAA+iH,EAAArwH,EAAAswH,IAAA,IAAAviI,GAKA,QAHAkhB,MACAuhH,EAAA30D,EAAAxxE,OAEAD,EAAA,EAAoBA,EAAAomI,EAAgBpmI,IAAA,CAEpC,GAAAupE,GAAAkI,EAAAzxE,GACAssE,EAAAmF,GAAAzxE,EAAA,GAAAomI,EACA78D,GAAAq8D,EAAAr8D,EAAAuR,GACAxO,EAAAs5D,EAAAt5D,EAAAwO,GACAj2D,EAAAhe,KAAAoV,EAAA8xD,EAAAxE,EAAA+C,KAMA,OAFA7mD,IAAA,OAEAzlB,EAAA,EAAoBA,EAAA6kB,EAAA5kB,OAAoBD,IAExCylB,EAAA,IAAAZ,EAAA7kB,GAAA,GACAylB,EAAA,IAAAZ,EAAA7kB,GAAA,GACAylB,EAAA,IAAAZ,EAAA7kB,GAAA,EAIAylB,GAAA,IAAAZ,EAAA5kB,OACAwlB,EAAA,IAAAZ,EAAA5kB,OACAwlB,EAAA,IAAAZ,EAAA5kB,MAEA,IAAAoyF,GAAA,GAAArjF,EAAA4G,EAAAxG,EAEAk8E,GAAA+G,IAAA5sE,EAAA,cACA6lE,EAAA+G,EAAA,IAAA5sE,EAAA,cACA6lE,EAAA+G,EAAA,OAAA5sE,EAAA,KACA6lE,EAAA+G,EAAA,OAQA,MAFAjvF,GAAAijI,aAAAP,EAAA,KAEA3qC,GAIAmrC,oBAAA,SAAA1wH,EAAAC,EAAAH,GASA,OAPAy5B,GAAAv5B,EAAAC,EACAqN,EAAA,GAAAgD,YAAA,EAAAipB,GAEA3/B,EAAA2P,KAAA2tC,MAAA,IAAAp3C,EAAAlG,GACAT,EAAAoQ,KAAA2tC,MAAA,IAAAp3C,EAAA3G,GACAG,EAAAiQ,KAAA2tC,MAAA,IAAAp3C,EAAAxG,GAEAlP,EAAA,EAAkBA,EAAAmvC,EAAUnvC,IAE5BkjB,EAAA,EAAAljB,GAAAwP,EACA0T,EAAA,EAAAljB,EAAA,GAAA+O,EACAmU,EAAA,EAAAljB,EAAA,GAAAkP,CAIA,IAAA4rF,GAAA,GAAA9gF,GAAAqtF,YAAAnkF,EAAAtN,EAAAC,EAAAmE,EAAA+gD,UAGA,OAFA+/B,GAAAlP,eAEAkP,IAYA9gF,EAAAusH,YAEAC,0BAAA,SAAA9pH,EAAAwuE,GAIA,OAFA6E,GAAA,GAAA/1E,GAAA6sF,MAEA7mG,EAAA,EAAAuP,EAAA27E,EAAAjrF,OAAwCD,EAAAuP,EAAOvP,IAE/C+vF,EAAA7zE,IAAA,GAAAlC,GAAAkE,KAAAxB,EAAAwuE,EAAAlrF,IAIA,OAAA+vF,IAIA02C,OAAA,SAAAn1G,EAAA82D,EAAA/tE,GAEAiX,EAAA+3D,YAAAjB,EAAAva,aACAua,EAAAtyE,OAAAwb,GACAjX,EAAA6B,IAAAoV,IAIAo1G,OAAA,SAAAp1G,EAAAjX,EAAA+tE,GAEA,GAAAoO,GAAA,GAAAx8E,GAAAyzD,OACA+oB,GAAA5oB,WAAAwa,EAAAva,aACAv8C,EAAA+3D,YAAAmN,GAEAn8E,EAAAvE,OAAAwb,GACA82D,EAAAlsE,IAAAoV,KAyBAtX,EAAA2sH,WAEAriH,SAIAQ,KAAA,aACA2+D,OAAA,SACAzrE,MAAA,SACAm3B,KAAA,IACAy3F,UAAA,GAEAC,QAAA,WAEA,IAEA,MAAA1gI,MAAAme,MAAAne,KAAA2e,KAAAzjB,eAAA8E,KAAAs9E,QAAAt9E,KAAA6R,OAEG,MAAA/Q,GAEH,iBAAAd,KAAA2e,KAAA,SAAA3e,KAAAs9E,OAAA,eAAAt9E,KAAA6R,MAAA,uBAMA8uH,SAAA,SAAA5jH,GAEA,GAAA6jH,GAAA7jH,EAAA8jH,WAAA3lI,cAEA4lI,EAAA9gI,IASA,OAPA8gI,GAAA3iH,MAAAyiH,GAAAE,EAAA3iH,MAAAyiH,OAEAE,EAAA3iH,MAAAyiH,GAAA7jH,EAAAgkH,eAAAD,EAAA3iH,MAAAyiH,GAAA7jH,EAAAgkH,mBACAD,EAAA3iH,MAAAyiH,GAAA7jH,EAAAgkH,eAAAhkH,EAAAikH,cAAAjkH,EAEA+jH,EAAA3iH,MAAAyiH,GAAA7jH,EAAAgkH,eAAAhkH,EAAAikH,cAAAjkH,EAEAA,GAIAkkH,SAAA,SAAArkH,GAIA,GAAA/iB,GACA8kB,EAAA3e,KAAA0gI,UACAl4E,EAAAxoD,KAAAgpC,KAAArqB,EAAAuiH,WACA3iH,EAAA,EACAm9D,EAAA15E,OAAA4a,GAAAlf,MAAA,IACA5D,EAAA4hF,EAAA5hF,OAEAqnI,IAEA,KAAAtnI,EAAA,EAAcA,EAAAC,EAAYD,IAAA,CAE1B,GAAAwmG,GAAA,GAAAxsF,GAAAutH,KAEAhyH,EAAApP,KAAAqhI,mBAAA3lD,EAAA7hF,GAAA8kB,EAAA6pC,EAAAjqC,EAAA8hF,EACA9hF,IAAAnP,EAAAmP,OAEA4iH,EAAAzgI,KAAA0O,EAAAixF,MAMA,GAAA5wF,GAAA8O,EAAA,CAcA,QAAU+iH,MAAAH,EAAA5iH,OAAA9O,IAOV4xH,mBAAA,SAAA9pI,EAAAonB,EAAA6pC,EAAAjqC,EAAA8hF,GAEA,GAEAxmG,GAAAgmF,EAAA4gD,EACAc,EAAAj+F,EAAAxpC,EACA+1E,EAAAC,EACA7mE,EAAAJ,EAAA24H,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACAC,EANAC,KAOAC,EAAAvjH,EAAAwjH,OAAA5qI,IAAAonB,EAAAwjH,OAAA,IAEA,IAAAD,EAAA,CAEA,GAAAA,EAAAh+H,EAQA,IANAq9H,EAAAW,EAAAE,iBAAAF,EAAAE,eAAAF,EAAAh+H,EAAAxG,MAAA,MACA5D,EAAAynI,EAAAznI,OAEA+1E,EAAArnB,EACAsnB,EAAAtnB,EAEA3uD,EAAA,EAAeA,EAAAC,GAMf,OAJAwpC,EAAAi+F,EAAA1nI,MAMA,QAIAoP,EAAAs4H,EAAA1nI,KAAAg2E,EAAAtxD,EACA1V,EAAA04H,EAAA1nI,KAAAi2E,EAEAuwB,EAAAgiC,OAAAp5H,EAAAJ,EACA,MAEA,SAIAI,EAAAs4H,EAAA1nI,KAAAg2E,EAAAtxD,EACA1V,EAAA04H,EAAA1nI,KAAAi2E,EACAuwB,EAAAiiC,OAAAr5H,EAAAJ,EACA,MAEA,SAaA,GATA24H,EAAAD,EAAA1nI,KAAAg2E,EAAAtxD,EACAkjH,EAAAF,EAAA1nI,KAAAi2E,EACA8xD,EAAAL,EAAA1nI,KAAAg2E,EAAAtxD,EACAsjH,EAAAN,EAAA1nI,KAAAi2E,EAEAuwB,EAAAkiC,iBAAAX,EAAAC,EAAAL,EAAAC,GAEAO,EAAAC,IAAAnoI,OAAA,GAOA,IAHA4nI,EAAAM,EAAA/4H,EACA04H,EAAAK,EAAAn5H,EAEAg3E,EAAA,EAAA4gD,EAAAzgI,KAAAygI,UAA+C5gD,GAAA4gD,EAAiB5gD,IAAA,CAEhE,GAAAt2E,GAAAs2E,EAAA4gD,CACA5sH,GAAA2uH,MAAAC,MAAAxmD,GAAA1yE,EAAAm4H,EAAAE,EAAAJ,GACA3tH,EAAA2uH,MAAAC,MAAAxmD,GAAA1yE,EAAAo4H,EAAAE,EAAAJ,GAMA,KAEA,SAeA,GAXAD,EAAAD,EAAA1nI,KAAAg2E,EAAAtxD,EACAkjH,EAAAF,EAAA1nI,KAAAi2E,EACA8xD,EAAAL,EAAA1nI,KAAAg2E,EAAAtxD,EACAsjH,EAAAN,EAAA1nI,KAAAi2E,EACAgyD,EAAAP,EAAA1nI,KAAAg2E,EAAAtxD,EACAwjH,EAAAR,EAAA1nI,KAAAi2E,EAEAuwB,EAAAqiC,cAAAd,EAAAC,EAAAC,EAAAC,EAAAP,EAAAC,GAEAO,EAAAC,IAAAnoI,OAAA,GAOA,IAHA4nI,EAAAM,EAAA/4H,EACA04H,EAAAK,EAAAn5H,EAEAg3E,EAAA,EAAA4gD,EAAAzgI,KAAAygI,UAA+C5gD,GAAA4gD,EAAiB5gD,IAAA,CAEhE,GAAAt2E,GAAAs2E,EAAA4gD,CACA5sH,GAAA2uH,MAAAC,MAAAE,GAAAp5H,EAAAm4H,EAAAE,EAAAE,EAAAN,GACA3tH,EAAA2uH,MAAAC,MAAAE,GAAAp5H,EAAAo4H,EAAAE,EAAAE,EAAAN,IAgBA,OAAUljH,OAAA2jH,EAAAl3H,GAAAw9C,EAAA63C,WAOVxsF,EAAA2sH,UAAAoC,eAAA,SAAAhmH,EAAA+vE,GAIAA,OAEA,IAAA3jD,GAAAjwC,SAAA4zF,EAAA3jD,KAAA2jD,EAAA3jD,KAAA,IACA65F,EAAA9pI,SAAA4zF,EAAAk2C,cAAAl2C,EAAAk2C,cAAA,EAEAC,EAAA/pI,SAAA4zF,EAAAm2C,KAAAn2C,EAAAm2C,KAAA,aACAxlD,EAAAvkF,SAAA4zF,EAAArP,OAAAqP,EAAArP,OAAA,SACAzrE,EAAA9Y,SAAA4zF,EAAA96E,MAAA86E,EAAA96E,MAAA,QAEAgC,GAAA2sH,UAAAx3F,OACAn1B,EAAA2sH,UAAAC,UAAAoC,EAEAhvH,EAAA2sH,UAAA7hH,KAAAmkH,EACAjvH,EAAA2sH,UAAAljD,SACAzpE,EAAA2sH,UAAA3uH,OASA,QALAkL,GAAAlJ,EAAA2sH,UAAAS,SAAArkH,GAEA0kH,EAAAvkH,EAAAukH,MACAyB,KAEAvrI,EAAA,EAAAghI,EAAA8I,EAAAxnI,OAAoCtC,EAAAghI,EAAQhhI,IAE5CmC,MAAAwC,UAAAuE,KAAAkD,MAAAm/H,EAAAzB,EAAA9pI,GAAAwrI,WAIA,OAAAD,IAoBA,SAAAE,GAEA,GAAAC,GAAA,MAIAC,EAAA,SAAAC,EAAAn9C,GAEA,GAAA3jF,GAAA8gI,EAAAtpI,MAEA,IAAAwI,EAAA,aAEA,IAMA6G,GAAAH,EAAA2B,EANAnR,KACA6pI,KACAC,IAMA,IAAAnwF,EAAAiwF,GAAA,EAEA,IAAAp6H,EAAA,EAAeA,EAAA1G,EAAO0G,IAAAq6H,EAAAr6H,SAItB,KAAAA,EAAA,EAAeA,EAAA1G,EAAO0G,IAAAq6H,EAAAr6H,GAAA1G,EAAA,EAAA0G,CAItB,IAAAu6H,GAAAjhI,EAIAijD,EAAA,EAAAg+E,CAEA,KAAAv6H,EAAAu6H,EAAA,EAAmBA,EAAA,GAAQ,CAI3B,GAAAh+E,KAAA,EASA,MAFA/hD,SAAAwmD,KAAA,qFAEAi8B,EAAAq9C,EACA9pI,CAUA,IAJA2P,EAAAH,EAASu6H,GAAAp6H,MAAA,GACTH,EAAAG,EAAA,EAAao6H,GAAAv6H,MAAA,GACb2B,EAAA3B,EAAA,EAAau6H,GAAA54H,MAAA,GAEb64H,EAAAJ,EAAAj6H,EAAAH,EAAA2B,EAAA44H,EAAAF,GAAA,CAEA,GAAA36H,GAAAK,EAAAxR,EAAA8L,EAAAkG,CAmBA,KAfAb,EAAA26H,EAAAl6H,GACAJ,EAAAs6H,EAAAr6H,GACAzR,EAAA8rI,EAAA14H,GAIAnR,EAAAkH,MAAA0iI,EAAA16H,GACA06H,EAAAr6H,GACAq6H,EAAA7rI,KAGA+rI,EAAA5iI,MAAA2iI,EAAAl6H,GAAAk6H,EAAAr6H,GAAAq6H,EAAA14H,KAIAtH,EAAA2F,EAAAO,EAAAP,EAAA,EAA2BO,EAAAg6H,EAAQlgI,IAAAkG,IAEnC85H,EAAAhgI,GAAAggI,EAAA95H,EAIAg6H,KAIAh+E,EAAA,EAAAg+E,GAMA,MAAAt9C,GAAAq9C,EACA9pI,GAMA25C,EAAA,SAAAiwF,GAKA,OAHA9gI,GAAA8gI,EAAAtpI,OACA4O,EAAA,EAEAlR,EAAA8K,EAAA,EAAAqG,EAAA,EAA6BA,EAAArG,EAAO9K,EAAAmR,IAEpCD,GAAA06H,EAAA5rI,GAAAyR,EAAAm6H,EAAAz6H,GAAAE,EAAAu6H,EAAAz6H,GAAAM,EAAAm6H,EAAA5rI,GAAAqR,CAIA,UAAAH,GAIA86H,EAAA,SAAAJ,EAAAj6H,EAAAH,EAAA2B,EAAArI,EAAA+gI,GAEA,GAAA7rI,GACAqwE,EAAAC,EAAAE,EAAAC,EACAphE,EAAA0qF,EAAAkyC,EAAAC,CAWA,IATA77D,EAAAu7D,EAAAC,EAAAl6H,IAAAF,EACA6+D,EAAAs7D,EAAAC,EAAAl6H,IAAAN,EAEAm/D,EAAAo7D,EAAAC,EAAAr6H,IAAAC,EACAg/D,EAAAm7D,EAAAC,EAAAr6H,IAAAH,EAEAhC,EAAAu8H,EAAAC,EAAA14H,IAAA1B,EACAsoF,EAAA6xC,EAAAC,EAAA14H,IAAA9B,EAEAq6H,GAAAl7D,EAAAH,IAAA0pB,EAAAzpB,IAAAG,EAAAH,IAAAjhE,EAAAghE,GAAA,QAEA,IAAA87D,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACAC,EAAAC,EAAAC,EAAAC,EAAA5C,EAAAC,EACA4C,EAAAC,EAAAC,CAMA,KAJAZ,EAAA98H,EAAAmhE,EAAe47D,EAAAryC,EAAAtpB,EACf47D,EAAAh8D,EAAAhhE,EAAei9H,EAAAh8D,EAAAypB,EACfwyC,EAAA/7D,EAAAH,EAAem8D,EAAA/7D,EAAAH,EAEftwE,EAAA,EAAcA,EAAA8K,EAAO9K,IAKrB,GAHAisI,EAAAL,EAAAC,EAAA7rI,IAAAyR,EACAy6H,EAAAN,EAAAC,EAAA7rI,IAAAqR,IAEA46H,IAAA57D,GAAA67D,IAAA57D,GACA27D,IAAAz7D,GAAA07D,IAAAz7D,GACAw7D,IAAA58H,GAAA68H,IAAAnyC,KAEA0yC,EAAAR,EAAA57D,EAAiBq8D,EAAAR,EAAA57D,EACjBq8D,EAAAV,EAAAz7D,EAAiBo8D,EAAAV,EAAAz7D,EACjBu5D,EAAAiC,EAAA58H,EAAiB46H,EAAAiC,EAAAnyC,EAIjBgzC,EAAAZ,EAAAS,EAAAR,EAAAO,EACAE,EAAAN,EAAAG,EAAAF,EAAAC,EACAK,EAAAT,EAAApC,EAAAqC,EAAAtC,EAEA+C,IAAArB,GAAAoB,IAAApB,GAAAmB,IAAAnB,GAAA,QAIA,UAQA,OAHAD,GAAAuB,YAAArB,EACAF,EAAAuB,YAAArxF,OAEA8vF,GAECpvH,EAAA2sH,WAID3sH,EAAA4wH,aAAqBtmH,MAAAtK,EAAA2sH,UAAAriH,MAAAwiH,SAAA9sH,EAAA2sH,UAAAG,UACrB,mBAAAvmH,OAAAsqH,aAAA7wH,EAAA4wH,aAQA5wH,EAAA8wH,MAAA,SAAA3uG,GAEAniB,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,QAEA3E,KAAA/C,QAAA+4B,EAAA/4B,QACA+C,KAAAiD,OAAAjD,KAAA/C,QAAA2nI,qBACA5kI,KAAAiD,OAAA4hI,QAAA7kI,KAAA8kI,QAAAnhI,KAAA3D,MAEAA,KAAA+kI,KAAA/kI,KAAA/C,QAAA+nI,aACAhlI,KAAA+kI,KAAAE,QAAAjlI,KAAA/C,QAAAioI,aAEAllI,KAAAmlI,OAAAnlI,KAAA/C,QAAAmoI,eACAplI,KAAAmlI,OAAAF,QAAAjlI,KAAA+kI,MAEA/kI,KAAAqlI,YAEArlI,KAAAqmD,UAAA,EACArmD,KAAAslI,aAAA,EACAtlI,KAAAulI,cAIA1xH,EAAA8wH,MAAAxoI,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAA8wH,MAAAxoI,UAAAE,YAAAwX,EAAA8wH,MAEA9wH,EAAA8wH,MAAAxoI,UAAAwgB,KAAA,SAAAnG,GAEA,GAAA+F,GAAAvc,KAEAs5F,EAAA,GAAAC,eAgBA,OAfAD,GAAAE,KAAA,MAAAhjF,MACA8iF,EAAAM,aAAA,cACAN,EAAAksC,OAAA,SAAA1kI,GAEAyb,EAAAtf,QAAAwoI,gBAAAzlI,KAAAy5F,SAAA,SAAA38E,GAEAP,EAAAtZ,OAAA6Z,SAEAP,EAAA8oH,UAAA9oH,EAAAmpH,UAKApsC,EAAAQ,OAEA95F,MAIA6T,EAAA8wH,MAAAxoI,UAAAupI,KAAA,WAEA,GAAA1lI,KAAAulI,eAGA,WADA/hI,SAAAwmD,KAAA,yCAKA,IAAA/mD,GAAAjD,KAAA/C,QAAA2nI,oBAEA3hI,GAAA6Z,OAAA9c,KAAAiD,OAAA6Z,OACA7Z,EAAA0iI,KAAA3lI,KAAAiD,OAAA0iI,KACA1iI,EAAA4hI,QAAA7kI,KAAAiD,OAAA4hI,QACA5hI,EAAA2b,MAAA,EAAA5e,KAAAqmD,WACApjD,EAAAqiI,aAAAtrI,MAAAgG,KAAAslI,aAEAtlI,KAAAulI,aAEAvlI,KAAAiD,SAEAjD,KAAAilI,WAIApxH,EAAA8wH,MAAAxoI,UAAAypI,MAAA,WAEA5lI,KAAAiD,OAAAm9E,OACApgF,KAAAqmD,UAAArmD,KAAA/C,QAAA4oI,aAIAhyH,EAAA8wH,MAAAxoI,UAAAikF,KAAA,WAEApgF,KAAAiD,OAAAm9E,OACApgF,KAAAqmD,UAAA,GAIAxyC,EAAA8wH,MAAAxoI,UAAA8oI,QAAA,WAEAlsI,SAAAiH,KAAAwV,QAEAxV,KAAAiD,OAAAgiI,QAAAjlI,KAAAwV,QACAxV,KAAAwV,OAAAyvH,QAAAjlI,KAAAmlI,SAIAnlI,KAAAiD,OAAAgiI,QAAAjlI,KAAAmlI,SAMAtxH,EAAA8wH,MAAAxoI,UAAA2pI,WAAA,WAEA/sI,SAAAiH,KAAAwV,QAEAxV,KAAAiD,OAAA6iI,WAAA9lI,KAAAwV,QACAxV,KAAAwV,OAAAswH,WAAA9lI,KAAAmlI,SAIAnlI,KAAAiD,OAAA6iI,WAAA9lI,KAAAmlI,SAMAtxH,EAAA8wH,MAAAxoI,UAAA4pI,UAAA,SAAA/rI,GAEAgG,KAAAulI,gBAEAvlI,KAAA8lI,aACA9lI,KAAAwV,OAAAxb,EACAgG,KAAAilI,WAIAjlI,KAAAwV,OAAAxb,GAMA6Z,EAAA8wH,MAAAxoI,UAAA6pI,UAAA,WAEA,MAAAhmI,MAAAwV,QAIA3B,EAAA8wH,MAAAxoI,UAAA8pI,gBAAA,SAAAjsI,GAEAgG,KAAAslI,aAAAtrI,EAEAgG,KAAAulI,iBAEAvlI,KAAAiD,OAAAqiI,aAAAtrI,MAAAgG,KAAAslI,eAMAzxH,EAAA8wH,MAAAxoI,UAAA+pI,gBAAA,WAEA,MAAAlmI,MAAAslI,cAIAzxH,EAAA8wH,MAAAxoI,UAAA2oI,QAAA,WAEA9kI,KAAAulI,cAIA1xH,EAAA8wH,MAAAxoI,UAAAgqI,QAAA,SAAAnsI,GAEAgG,KAAAiD,OAAA0iI,KAAA3rI,GAIA6Z,EAAA8wH,MAAAxoI,UAAAiqI,QAAA,WAEA,MAAApmI,MAAAiD,OAAA0iI,MAIA9xH,EAAA8wH,MAAAxoI,UAAAkqI,eAAA,SAAArsI,GAEAgG,KAAAmlI,OAAAmB,YAAAtsI,GAIA6Z,EAAA8wH,MAAAxoI,UAAAoqI,eAAA,WAEA,MAAAvmI,MAAAmlI,OAAAmB,aAIAzyH,EAAA8wH,MAAAxoI,UAAAqqI,iBAAA,SAAAxsI,GAEAgG,KAAAmlI,OAAAsB,cAAAzsI,GAIA6Z,EAAA8wH,MAAAxoI,UAAAuqI,iBAAA,WAEA,MAAA1mI,MAAAmlI,OAAAsB,eAIA5yH,EAAA8wH,MAAAxoI,UAAAwqI,UAAA,SAAA3sI,GAEAgG,KAAA+kI,UAAA/qI,SAIA6Z,EAAA8wH,MAAAxoI,UAAAyqI,UAAA,WAEA,MAAA5mI,MAAA+kI,UAAA/qI,OAIA6Z,EAAA8wH,MAAAxoI,UAAAywE,kBAAA,WAEA,GAAA/2D,GAAA,GAAAhC,GAAA8L,OAEA,iBAAA6kE,GAEA3wE,EAAAkuE,SAAA5lF,UAAAywE,kBAAAv1E,KAAA2I,KAAAwkF,GAEA3uE,EAAA+yD,sBAAA5oE,KAAA0nE,aAEA1nE,KAAAmlI,OAAAtyD,YAAAh9D,EAAA5M,EAAA4M,EAAAhN,EAAAgN,EAAAtL,OAYAsJ,EAAAgzH,cAAA,WAEAhzH,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA2E,KAAA,gBAEA3E,KAAA/C,QAAA,IAAA+rB,OAAA89G,cAAA99G,OAAA+9G,qBAIAlzH,EAAAgzH,cAAA1qI,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAgzH,cAAA1qI,UAAAE,YAAAwX,EAAAgzH,cAEAhzH,EAAAgzH,cAAA1qI,UAAAywE,kBAAA,WAEA,GAAA/2D,GAAA,GAAAhC,GAAA8L,QACA0rC,EAAA,GAAAx3C,GAAAy2C,WACA9B,EAAA,GAAA30C,GAAA8L,QAEAqnH,EAAA,GAAAnzH,GAAA8L,OAEA,iBAAA6kE,GAEA3wE,EAAAkuE,SAAA5lF,UAAAywE,kBAAAv1E,KAAA2I,KAAAwkF,EAEA,IAAAxuD,GAAAh2B,KAAA/C,QAAA+4B,SACAw0B,EAAAxqD,KAAAwqD,EAEAxqD,MAAA0nE,YAAAqM,UAAAl+D,EAAAw1C,EAAA7C,GAEAw+E,EAAA96H,IAAA,QAAA2+C,gBAAAQ,GAEAr1B,EAAA68C,YAAAh9D,EAAA5M,EAAA4M,EAAAhN,EAAAgN,EAAAtL,GACAyrB,EAAAixG,eAAAD,EAAA/9H,EAAA+9H,EAAAn+H,EAAAm+H,EAAAz8H,EAAAigD,EAAAvhD,EAAAuhD,EAAA3hD,EAAA2hD,EAAAjgD,OA4CAsJ,EAAAqzH,MAAA,aAOArzH,EAAAqzH,MAAA/qI,UAAAwhF,SAAA,SAAAp0E,GAGA,MADA/F,SAAAwmD,KAAA,qDACA,MAOAn2C,EAAAqzH,MAAA/qI,UAAAgrI,WAAA,SAAAh+H,GAEA,GAAAI,GAAAvJ,KAAAonI,eAAAj+H,EACA,OAAAnJ,MAAA29E,SAAAp0E,IAMAsK,EAAAqzH,MAAA/qI,UAAAkrI,UAAA,SAAA5G,GAEAA,MAAA,EAEA,IAAAh4H,GAAAw5H,IAEA,KAAAx5H,EAAA,EAAaA,GAAAg4H,EAAgBh4H,IAE7Bw5H,EAAAvhI,KAAAV,KAAA29E,SAAAl1E,EAAAg4H,GAIA,OAAAwB,IAMApuH,EAAAqzH,MAAA/qI,UAAAmrI,gBAAA,SAAA7G,GAEAA,MAAA,EAEA,IAAAh4H,GAAAw5H,IAEA,KAAAx5H,EAAA,EAAaA,GAAAg4H,EAAgBh4H,IAE7Bw5H,EAAAvhI,KAAAV,KAAAmnI,WAAA1+H,EAAAg4H,GAIA,OAAAwB,IAMApuH,EAAAqzH,MAAA/qI,UAAA2hF,UAAA,WAEA,GAAAypD,GAAAvnI,KAAAwnI,YACA,OAAAD,KAAAztI,OAAA,IAMA+Z,EAAAqzH,MAAA/qI,UAAAqrI,WAAA,SAAA/G,GAIA,GAFAA,MAAAzgI,KAAAynI,qBAAAznI,KAAAynI,qBAAA,KAEAznI,KAAA0nI,iBACA1nI,KAAA0nI,gBAAA5tI,SAAA2mI,EAAA,IACAzgI,KAAAylF,YAGA,MAAAzlF,MAAA0nI,eAIA1nI,MAAAylF,cAEA,IACA/oF,GACAlF,EAFAyH,KACAgpC,EAAAjoC,KAAA29E,SAAA,GACAgqD,EAAA,CAIA,KAFA1oI,EAAAyB,KAAA,GAEAlJ,EAAA,EAAaA,GAAAipI,EAAgBjpI,IAE7BkF,EAAAsD,KAAA29E,SAAAnmF,EAAAipI,GACAkH,GAAAjrI,EAAAqpE,WAAA99B,GACAhpC,EAAAyB,KAAAinI,GACA1/F,EAAAvrC,CAMA,OAFAsD,MAAA0nI,gBAAAzoI,EAEAA,GAKA4U,EAAAqzH,MAAA/qI,UAAAyrI,iBAAA,WAEA5nI,KAAAylF,eACAzlF,KAAAwnI,cAMA3zH,EAAAqzH,MAAA/qI,UAAAirI,eAAA,SAAAj+H,EAAAkM,GAEA,GAIAwyH,GAJAC,EAAA9nI,KAAAwnI,aAEA3tI,EAAA,EAAA2xE,EAAAs8D,EAAAhuI,MAMA+tI,GAFAxyH,EAEAA,EAIAlM,EAAA2+H,EAAAt8D,EAAA,EAUA,KAFA,GAAAu8D,GAAAzrD,EAAA,EAAAC,EAAA/Q,EAAA,EAEA8Q,GAAAC,GAMA,GAJA1iF,EAAAmf,KAAA2tC,MAAA21B,GAAAC,EAAAD,GAAA,GAEAyrD,EAAAD,EAAAjuI,GAAAguI,EAEAE,EAAA,EAEAzrD,EAAAziF,EAAA,MAEG,MAAAkuI,EAAA,GAIA,CAEHxrD,EAAA1iF,CACA,OALA0iF,EAAA1iF,EAAA,EAiBA,GAJAA,EAAA0iF,EAIAurD,EAAAjuI,KAAAguI,EAAA,CAEA,GAAAt+H,GAAA1P,GAAA2xE,EAAA,EACA,OAAAjiE,GAMA,GAAAy+H,GAAAF,EAAAjuI,GACAouI,EAAAH,EAAAjuI,EAAA,GAEAquI,EAAAD,EAAAD,EAIAG,GAAAN,EAAAG,GAAAE,EAIA3+H,GAAA1P,EAAAsuI,IAAA38D,EAAA,EAEA,OAAAjiE,IASAsK,EAAAqzH,MAAA/qI,UAAAisI,WAAA,SAAA7+H,GAEA,GAAAmkD,GAAA,KACA8oB,EAAAjtE,EAAAmkD,EACAyvB,EAAA5zE,EAAAmkD,CAIA8oB,GAAA,IAAAA,EAAA,GACA2G,EAAA,IAAAA,EAAA,EAEA,IAAAkrD,GAAAroI,KAAA29E,SAAAnH,GACA8xD,EAAAtoI,KAAA29E,SAAAR,GAEAorD,EAAAD,EAAA9+E,QAAAC,IAAA4+E,EACA,OAAAE,GAAAzyH,aAKAjC,EAAAqzH,MAAA/qI,UAAAqsI,aAAA,SAAAr/H,GAEA,GAAAI,GAAAvJ,KAAAonI,eAAAj+H,EACA,OAAAnJ,MAAAooI,WAAA7+H,IAYAsK,EAAAqzH,MAAAzE,OAEAgG,uBAAA,SAAAl/H,EAAAmvE,EAAAr9E,EAAAC,GAEA,YAAAiO,IAAAlO,EAAAq9E,GAAA,EAAAnvE,GAAAjO,EAAAD,IAMAqtI,mBAAA,SAAAn/H,EAAAmvE,EAAAr9E,EAAAC,EAAAq9E,GAEA,SAAAD,GAAA,EAAAnvE,IAAA,EAAAA,GACA,EAAAlO,GAAA,EAAAkO,IAAA,EAAAA,GAAA,EAAAA,EAAAlO,GAAA,EAAAkO,GACA,EAAAA,EAAAjO,GAAA,EAAAiO,GAAA,EAAAA,IAAAjO,EACA,EAAAiO,IAAAovE,GAIAgwD,cAAA,SAAAp/H,EAAAmvE,EAAAr9E,EAAAC,EAAAq9E,GAIA,GAAAiwD,GAAA,EAAAr/H,IAAA,EAAAA,EACAs/H,EAAA,EAAAt/H,IAAA,EAAAA,EAAA,EACAu/H,KAAAv/H,IAAA,EAAAA,EACAw/H,EAAA,EAAAx/H,IAAA,EAAAA,CAEA,OAAAq/H,GAAAC,EAAAC,EAAAC,GAMA7rD,YAAA,SAAAxE,EAAAr9E,EAAAC,EAAAq9E,EAAApvE,GAEA,GAAA8rE,GAAA,IAAA/5E,EAAAo9E,GACAtV,EAAA,IAAAuV,EAAAt9E,GACA8hF,EAAA5zE,IACA6zE,EAAA7zE,EAAA4zE,CACA,UAAA9hF,EAAA,EAAAC,EAAA+5E,EAAAjS,GAAAga,MAAA/hF,EAAA,EAAAC,EAAA,EAAA+5E,EAAAjS,GAAA+Z,EAAA9H,EAAA9rE,EAAAlO,IAeAwY,EAAAqzH,MAAA9qI,OAAA,SAAAC,EAAA2sI,GAMA,MAJA3sI,GAAAF,UAAA7B,OAAA8B,OAAAyX,EAAAqzH,MAAA/qI,WACAE,EAAAF,UAAAE,cACAA,EAAAF,UAAAwhF,SAAAqrD,EAEA3sI,GAgBAwX,EAAAo1H,UAAA,WAEAjpI,KAAAkpI,UACAlpI,KAAAmpI,SAEAnpI,KAAAopI,cAIAv1H,EAAAo1H,UAAA9sI,UAAA7B,OAAA8B,OAAAyX,EAAAqzH,MAAA/qI,WACA0X,EAAAo1H,UAAA9sI,UAAAE,YAAAwX,EAAAo1H,UAEAp1H,EAAAo1H,UAAA9sI,UAAA4Z,IAAA,SAAAszH,GAEArpI,KAAAkpI,OAAAxoI,KAAA2oI,IAIAx1H,EAAAo1H,UAAA9sI,UAAAmtI,gBAAA,aAMAz1H,EAAAo1H,UAAA9sI,UAAAotI,UAAA,WAKA,GAAAC,GAAAxpI,KAAAkpI,OAAA,GAAAvrD,SAAA,GACA8rD,EAAAzpI,KAAAkpI,OAAAlpI,KAAAkpI,OAAApvI,OAAA,GAAA6jF,SAAA,EAEA6rD,GAAAnxE,OAAAoxE,IAEAzpI,KAAAkpI,OAAAxoI,KAAA,GAAAmT,GAAA61H,UAAAD,EAAAD,KAeA31H,EAAAo1H,UAAA9sI,UAAAwhF,SAAA,SAAAp0E,GAQA,IANA,GAEA6rE,GAAAi0D,EAFA5gI,EAAAc,EAAAvJ,KAAA89E,YACA6rD,EAAA3pI,KAAA4pI,kBACA/vI,EAAA,EAIAA,EAAA8vI,EAAA7vI,QAAA,CAEA,GAAA6vI,EAAA9vI,IAAA4O,EAAA,CAEA2sE,EAAAu0D,EAAA9vI,GAAA4O,EACA4gI,EAAArpI,KAAAkpI,OAAArvI,EAEA,IAAAsP,GAAA,EAAAisE,EAAAi0D,EAAAvrD,WAEA,OAAAurD,GAAAlC,WAAAh+H,GAIAtP,IAIA,aAeAga,EAAAo1H,UAAA9sI,UAAA2hF,UAAA;AAEA,GAAA+rD,GAAA7pI,KAAA4pI,iBACA,OAAAC,KAAA/vI,OAAA,IAOA+Z,EAAAo1H,UAAA9sI,UAAAytI,gBAAA,WAIA,GAAA5pI,KAAA8pI,cAAA9pI,KAAA8pI,aAAAhwI,SAAAkG,KAAAkpI,OAAApvI,OAEA,MAAAkG,MAAA8pI,YAOA,IACAjwI,GADA0tI,KAAAwC,EAAA,EACAv+D,EAAAxrE,KAAAkpI,OAAApvI,MAEA,KAAAD,EAAA,EAAaA,EAAA2xE,EAAQ3xE,IAErBkwI,GAAA/pI,KAAAkpI,OAAArvI,GAAAikF,YACAypD,EAAA7mI,KAAAqpI,EAMA,OAFA/pI,MAAA8pI,aAAAvC,EAEAA,GAQA1zH,EAAAo1H,UAAA9sI,UAAAq8E,eAAA,WAEA,GAEAwxD,GAAAC,EAAAC,EACAC,EAAAC,EAAAC,EAHA/+D,EAAAtrE,KAAAqnI,WAKA2C,GAAAC,EAAApnC,OAAAynC,kBACAH,EAAAC,EAAAvnC,OAAA0nC,iBAEA,IAAA/yI,GAAAqC,EAAA2xE,EAAAm8D,EAEAlqD,EAAAnS,EAAA,YAAAz3D,GAAA8L,OAIA,KAFAgoH,EAAAlqD,EAAA,GAAA5pE,GAAA8L,QAAA,GAAA9L,GAAA+6C,QAEA/0D,EAAA,EAAA2xE,EAAAF,EAAAxxE,OAAiCD,EAAA2xE,EAAQ3xE,IAEzCrC,EAAA8zE,EAAAzxE,GAEArC,EAAAyR,EAAA+gI,IAAAxyI,EAAAyR,EACAzR,EAAAyR,EAAAkhI,MAAA3yI,EAAAyR,GAEAzR,EAAAqR,EAAAohI,IAAAzyI,EAAAqR,EACArR,EAAAqR,EAAAuhI,MAAA5yI,EAAAqR,GAEA40E,IAEAjmF,EAAA+S,EAAA2/H,IAAA1yI,EAAA+S,EACA/S,EAAA+S,EAAA8/H,MAAA7yI,EAAA+S,IAIAo9H,EAAA5xH,IAAAve,EAIA,IAAA4X,IAEA+6H,OACAC,OACAJ,OACAC,OAWA,OAPAxsD,KAEAruE,EAAA86H,OACA96H,EAAAi7H,QAIAj7H,GAUAyE,EAAAo1H,UAAA9sI,UAAAquI,qBAAA,SAAA/J,GAEA,GAAAwB,GAAAjiI,KAAAqnI,UAAA5G,KACA,OAAAzgI,MAAAyqI,eAAAxI,IAMApuH,EAAAo1H,UAAA9sI,UAAAuuI,2BAAA,SAAAjK,GAEA,GAAAwB,GAAAjiI,KAAAsnI,gBAAA7G,KACA,OAAAzgI,MAAAyqI,eAAAxI,IAIApuH,EAAAo1H,UAAA9sI,UAAAsuI,eAAA,SAAAn/D,GAIA,OAFA/0D,GAAA,GAAA1C,GAAA6L,SAEA7lB,EAAA,EAAiBA,EAAAyxE,EAAAxxE,OAAmBD,IAEpC0c,EAAAkI,SAAA/d,KAAA,GAAAmT,GAAA8L,QAAA2rD,EAAAzxE,GAAAoP,EAAAqiE,EAAAzxE,GAAAgP,EAAAyiE,EAAAzxE,GAAA0Q,GAAA,GAIA,OAAAgM,IAWA1C,EAAAo1H,UAAA9sI,UAAAwuI,YAAA,SAAAC,GAEA5qI,KAAAmpI,MAAAzoI,KAAAkqI,IAIA/2H,EAAAo1H,UAAA9sI,UAAA0uI,qBAAA,SAAAtsC,EAAA4qC,GAEA,GACAtvI,GAAA2xE,EADAs/D,EAAA9qI,KAAAqnI,UAAA9oC,EASA,KANA4qC,IAEAA,EAAAnpI,KAAAmpI,OAIAtvI,EAAA,EAAA2xE,EAAA29D,EAAArvI,OAAgCD,EAAA2xE,EAAQ3xE,IAExCixI,EAAA9qI,KAAA+qI,cAAAD,EAAA3B,EAAAtvI,GAIA,OAAAixI,IAIAj3H,EAAAo1H,UAAA9sI,UAAA6uI,2BAAA,SAAAzsC,EAAA4qC,GAEA,GAEAtvI,GAAA2xE,EAFAs/D,EAAA9qI,KAAAsnI,gBAAA/oC,EAUA,KANA4qC,IAEAA,EAAAnpI,KAAAmpI,OAIAtvI,EAAA,EAAA2xE,EAAA29D,EAAArvI,OAAgCD,EAAA2xE,EAAQ3xE,IAExCixI,EAAA9qI,KAAA+qI,cAAAD,EAAA3B,EAAAtvI,GAIA,OAAAixI,IAOAj3H,EAAAo1H,UAAA9sI,UAAA4uI,cAAA,SAAAD,EAAAzqC,GAEA,GAEAxmG,GAAA2xE,EAAAh0E,EAAAyzI,EAAAC,EAAAC,EAFAC,EAAAprI,KAAAw4E,gBAIA,KAAA3+E,EAAA,EAAA2xE,EAAAs/D,EAAAhxI,OAAiCD,EAAA2xE,EAAQ3xE,IAAA,CAEzCrC,EAAAszI,EAAAjxI,GAEAoxI,EAAAzzI,EAAAyR,EACAiiI,EAAA1zI,EAAAqR,EAEAsiI,EAAAF,EAAAG,EAAApB,KAKAmB,EAAA9qC,EAAA+mC,eAAA+D,EAAAF,EAIA,IAAAI,GAAAhrC,EAAA1iB,SAAAwtD,GACA7rH,EAAA+gF,EAAA+nC,WAAA+C,EACA7rH,GAAApT,KAAAoT,EAAAzW,EAAAyW,EAAArW,GAAAkgD,eAAA+hF,GAEA1zI,EAAAyR,EAAAoiI,EAAApiI,EAAAqW,EAAArW,EACAzR,EAAAqR,EAAAwiI,EAAAxiI,EAAAyW,EAAAzW,EAIA,MAAAiiI,IAYAj3H,EAAAutH,KAAA,SAAA91D,GAEAz3D,EAAAo1H,UAAA5xI,KAAA2I,MAEAA,KAAAsrI,WAEAhgE,GAEAtrE,KAAAurI,WAAAjgE,IAMAz3D,EAAAutH,KAAAjlI,UAAA7B,OAAA8B,OAAAyX,EAAAo1H,UAAA9sI,WACA0X,EAAAutH,KAAAjlI,UAAAE,YAAAwX,EAAAutH,KAEAvtH,EAAA23H,aAEAC,QAAA,SACAC,QAAA,SACAC,mBAAA,mBACAC,gBAAA,gBACAC,aAAA,aACAC,IAAA,MACAC,QAAA,WAQAl4H,EAAAutH,KAAAjlI,UAAAovI,WAAA,SAAAplD,GAEAnmF,KAAAqiI,OAAAl8C,EAAA,GAAAl9E,EAAAk9E,EAAA,GAAAt9E,EAEA,QAAAG,GAAA,EAAAgjI,EAAA7lD,EAAArsF,OAAwCkP,EAAAgjI,EAAUhjI,IAElDhJ,KAAAsiI,OAAAn8C,EAAAn9E,GAAAC,EAAAk9E,EAAAn9E,GAAAH,IAQAgL,EAAAutH,KAAAjlI,UAAAkmI,OAAA,SAAAp5H,EAAAJ,GAEA,GAAApN,GAAA9B,MAAAwC,UAAAukB,MAAArpB,KAAAkI,UACAS,MAAAsrI,QAAA5qI,MAAqB4iC,OAAAzvB,EAAA23H,YAAAC,QAAAhwI,UAIrBoY,EAAAutH,KAAAjlI,UAAAmmI,OAAA,SAAAr5H,EAAAJ,GAEA,GAAApN,GAAA9B,MAAAwC,UAAAukB,MAAArpB,KAAAkI,WAEA0sI,EAAAjsI,KAAAsrI,QAAAtrI,KAAAsrI,QAAAxxI,OAAA,GAAA2B,KAEAywI,EAAAD,IAAAnyI,OAAA,GACAqyI,EAAAF,IAAAnyI,OAAA,GAEAuvI,EAAA,GAAAx1H,GAAA61H,UAAA,GAAA71H,GAAA+6C,QAAAs9E,EAAAC,GAAA,GAAAt4H,GAAA+6C,QAAA3lD,EAAAJ,GACA7I,MAAAkpI,OAAAxoI,KAAA2oI,GAEArpI,KAAAsrI,QAAA5qI,MAAqB4iC,OAAAzvB,EAAA23H,YAAAE,QAAAjwI,UAIrBoY,EAAAutH,KAAAjlI,UAAAomI,iBAAA,SAAA6J,EAAAC,EAAA1I,EAAAC,GAEA,GAAAnoI,GAAA9B,MAAAwC,UAAAukB,MAAArpB,KAAAkI,WAEA0sI,EAAAjsI,KAAAsrI,QAAAtrI,KAAAsrI,QAAAxxI,OAAA,GAAA2B,KAEAywI,EAAAD,IAAAnyI,OAAA,GACAqyI,EAAAF,IAAAnyI,OAAA,GAEAuvI,EAAA,GAAAx1H,GAAAy4H,qBAAA,GAAAz4H,GAAA+6C,QAAAs9E,EAAAC,GACA,GAAAt4H,GAAA+6C,QAAAw9E,EAAAC,GACA,GAAAx4H,GAAA+6C,QAAA+0E,EAAAC,GACA5jI,MAAAkpI,OAAAxoI,KAAA2oI,GAEArpI,KAAAsrI,QAAA5qI,MAAqB4iC,OAAAzvB,EAAA23H,YAAAG,mBAAAlwI,UAIrBoY,EAAAutH,KAAAjlI,UAAAumI,cAAA,SAAA6J,EAAAC,EACAC,EAAAC,EACA/I,EAAAC,GAEA,GAAAnoI,GAAA9B,MAAAwC,UAAAukB,MAAArpB,KAAAkI,WAEA0sI,EAAAjsI,KAAAsrI,QAAAtrI,KAAAsrI,QAAAxxI,OAAA,GAAA2B,KAEAywI,EAAAD,IAAAnyI,OAAA,GACAqyI,EAAAF,IAAAnyI,OAAA,GAEAuvI,EAAA,GAAAx1H,GAAA84H,iBAAA,GAAA94H,GAAA+6C,QAAAs9E,EAAAC,GACA,GAAAt4H,GAAA+6C,QAAA29E,EAAAC,GACA,GAAA34H,GAAA+6C,QAAA69E,EAAAC,GACA,GAAA74H,GAAA+6C,QAAA+0E,EAAAC,GACA5jI,MAAAkpI,OAAAxoI,KAAA2oI,GAEArpI,KAAAsrI,QAAA5qI,MAAqB4iC,OAAAzvB,EAAA23H,YAAAI,gBAAAnwI,UAIrBoY,EAAAutH,KAAAjlI,UAAAywI,WAAA,SAAA3K,GAEA,GAAAxmI,GAAA9B,MAAAwC,UAAAukB,MAAArpB,KAAAkI,WACA0sI,EAAAjsI,KAAAsrI,QAAAtrI,KAAAsrI,QAAAxxI,OAAA,GAAA2B,KAEAywI,EAAAD,IAAAnyI,OAAA,GACAqyI,EAAAF,IAAAnyI,OAAA,GAEA+yI,GAAA,GAAAh5H,GAAA+6C,QAAAs9E,EAAAC,GACAxyI,OAAAwC,UAAAuE,KAAAkD,MAAAipI,EAAA5K,EAEA,IAAAoH,GAAA,GAAAx1H,GAAAi5H,YAAAD,EACA7sI,MAAAkpI,OAAAxoI,KAAA2oI,GAEArpI,KAAAsrI,QAAA5qI,MAAqB4iC,OAAAzvB,EAAA23H,YAAAK,aAAApwI,UAMrBoY,EAAAutH,KAAAjlI,UAAA6jG,IAAA,SAAA2jC,EAAAC,EAAAmJ,EACAC,EAAAC,EAAAC,GAEA,GAAAjB,GAAAjsI,KAAAsrI,QAAAtrI,KAAAsrI,QAAAxxI,OAAA,GAAA2B,KACAywI,EAAAD,IAAAnyI,OAAA,GACAqyI,EAAAF,IAAAnyI,OAAA,EAEAkG,MAAAmtI,OAAAxJ,EAAAuI,EAAAtI,EAAAuI,EAAAY,EACAC,EAAAC,EAAAC,IAIAr5H,EAAAutH,KAAAjlI,UAAAgxI,OAAA,SAAAxJ,EAAAC,EAAAmJ,EACAC,EAAAC,EAAAC,GAEAltI,KAAAotI,WAAAzJ,EAAAC,EAAAmJ,IAAAC,EAAAC,EAAAC,IAIAr5H,EAAAutH,KAAAjlI,UAAAkxI,QAAA,SAAA1J,EAAAC,EAAA0J,EAAAC,EACAP,EAAAC,EAAAC,EAAAM,GAEA,GAAAvB,GAAAjsI,KAAAsrI,QAAAtrI,KAAAsrI,QAAAxxI,OAAA,GAAA2B,KACAywI,EAAAD,IAAAnyI,OAAA,GACAqyI,EAAAF,IAAAnyI,OAAA,EAEAkG,MAAAotI,WAAAzJ,EAAAuI,EAAAtI,EAAAuI,EAAAmB,EAAAC,EACAP,EAAAC,EAAAC,EAAAM,GAKA35H,GAAAutH,KAAAjlI,UAAAixI,WAAA,SAAAzJ,EAAAC,EAAA0J,EAAAC,EACAP,EAAAC,EAAAC,EAAAM,GAEA,GAAA/xI,IACAkoI,EAAAC,EACA0J,EAAAC,EACAP,EAAAC,EACAC,EACAM,GAAA,GAEAnE,EAAA,GAAAx1H,GAAA45H,aAAA9J,EAAAC,EAAA0J,EAAAC,EACAP,EAAAC,EAAAC,EAAAM,EACAxtI,MAAAkpI,OAAAxoI,KAAA2oI,EAEA,IAAAqE,GAAArE,EAAA1rD,SAAA,EACAliF,GAAAiF,KAAAgtI,EAAAzkI,GACAxN,EAAAiF,KAAAgtI,EAAA7kI,GAEA7I,KAAAsrI,QAAA5qI,MAAqB4iC,OAAAzvB,EAAA23H,YAAAO,QAAAtwI,SAIrBoY,GAAAutH,KAAAjlI,UAAAmrI,gBAAA,SAAA7G,EAAAkN,GAEAlN,MAAA,GAIA,QAFAn1D,MAEAzxE,EAAA,EAAiBA,EAAA4mI,EAAe5mI,IAEhCyxE,EAAA5qE,KAAAV,KAAA29E,SAAA9jF,EAAA4mI,GAYA,OAAAn1D,IAMAz3D,EAAAutH,KAAAjlI,UAAAkrI,UAAA,SAAA5G,EAAAkN,GAEA,GAAA3tI,KAAA4tI,gBAEA,MAAA5tI,MAAAsnI,gBAAA7G,EAAAkN,EAIAlN,MAAA,EAEA,IAEA5mI,GAAA2xE,EAAA37D,EAAAyzB,EAAA7nC,EACA+lI,EAAAC,EAAAK,EAAAC,EAAAH,EAAAC,EAAAH,EAAAC,EACAK,EAAAj0D,EACAxkE,EAAAoqE,EAAAC,EALAtI,IAOA,KAAAzxE,EAAA,EAAA2xE,EAAAxrE,KAAAsrI,QAAAxxI,OAAuCD,EAAA2xE,EAAQ3xE,IAO/C,OALAgW,EAAA7P,KAAAsrI,QAAAzxI,GAEAypC,EAAAzzB,EAAAyzB,OACA7nC,EAAAoU,EAAApU,KAEA6nC,GAEA,IAAAzvB,GAAA23H,YAAAC,QAEAngE,EAAA5qE,KAAA,GAAAmT,GAAA+6C,QAAAnzD,EAAA,GAAAA,EAAA,IAEA,MAEA,KAAAoY,GAAA23H,YAAAE,QAEApgE,EAAA5qE,KAAA,GAAAmT,GAAA+6C,QAAAnzD,EAAA,GAAAA,EAAA,IAEA,MAEA,KAAAoY,GAAA23H,YAAAG,mBAwBA,IAtBAnK,EAAA/lI,EAAA,GACAgmI,EAAAhmI,EAAA,GAEAmmI,EAAAnmI,EAAA,GACAomI,EAAApmI,EAAA,GAEA6vE,EAAAxxE,OAAA,GAEAkoI,EAAA12D,IAAAxxE,OAAA,GAEA4nI,EAAAM,EAAA/4H,EACA04H,EAAAK,EAAAn5H,IAIAm5H,EAAAhiI,KAAAsrI,QAAAzxI,EAAA,GAAA4B,KAEAimI,EAAAM,IAAAloI,OAAA,GACA6nI,EAAAK,IAAAloI,OAAA,IAIAi0E,EAAA,EAAeA,GAAA0yD,EAAgB1yD,IAE/BxkE,EAAAwkE,EAAA0yD,EAEA9sD,EAAA9/D,EAAA2uH,MAAAC,MAAAxmD,GAAA1yE,EAAAm4H,EAAAE,EAAAJ,GACA5tD,EAAA//D,EAAA2uH,MAAAC,MAAAxmD,GAAA1yE,EAAAo4H,EAAAE,EAAAJ,GAEAn2D,EAAA5qE,KAAA,GAAAmT,GAAA+6C,QAAA+kB,EAAAC,GAIA,MAEA,KAAA//D,GAAA23H,YAAAI,gBA4BA,IA1BApK,EAAA/lI,EAAA,GACAgmI,EAAAhmI,EAAA,GAEAmmI,EAAAnmI,EAAA,GACAomI,EAAApmI,EAAA,GAEAqmI,EAAArmI,EAAA,GACAsmI,EAAAtmI,EAAA,GAEA6vE,EAAAxxE,OAAA,GAEAkoI,EAAA12D,IAAAxxE,OAAA,GAEA4nI,EAAAM,EAAA/4H,EACA04H,EAAAK,EAAAn5H,IAIAm5H,EAAAhiI,KAAAsrI,QAAAzxI,EAAA,GAAA4B,KAEAimI,EAAAM,IAAAloI,OAAA,GACA6nI,EAAAK,IAAAloI,OAAA,IAKAi0E,EAAA,EAAeA,GAAA0yD,EAAgB1yD,IAE/BxkE,EAAAwkE,EAAA0yD,EAEA9sD,EAAA9/D,EAAA2uH,MAAAC,MAAAE,GAAAp5H,EAAAm4H,EAAAE,EAAAE,EAAAN,GACA5tD,EAAA//D,EAAA2uH,MAAAC,MAAAE,GAAAp5H,EAAAo4H,EAAAE,EAAAE,EAAAN,GAEAn2D,EAAA5qE,KAAA,GAAAmT,GAAA+6C,QAAA+kB,EAAAC,GAIA,MAEA,KAAA//D,GAAA23H,YAAAK,aAEA7J,EAAAhiI,KAAAsrI,QAAAzxI,EAAA,GAAA4B,IAEA,IAAAwsC,GAAA,GAAAp0B,GAAA+6C,QAAAozE,IAAAloI,OAAA,GAAAkoI,IAAAloI,OAAA,IACA+zI,GAAA5lG,GAEA3lC,EAAAm+H,EAAAhlI,EAAA,GAAA3B,MAEA+zI,KAAAzoG,OAAA3pC,EAAA,GAEA,IAAAqyI,GAAA,GAAAj6H,GAAAi5H,YAAAe,EAEA,KAAA9/D,EAAA,EAAeA,GAAAzrE,EAAQyrE,IAEvBzC,EAAA5qE,KAAAotI,EAAA3G,WAAAp5D,EAAAzrE,GAIA,MAEA,KAAAuR,GAAA23H,YAAAM,IAEA,GAMAhjF,GANA66E,EAAAloI,EAAA,GAAAmoI,EAAAnoI,EAAA,GACAsxI,EAAAtxI,EAAA,GACAuxI,EAAAvxI,EAAA,GAAAwxI,EAAAxxI,EAAA,GACAyxI,IAAAzxI,EAAA,GAEAsyI,EAAAd,EAAAD,EAEAgB,EAAA,EAAAvN,CAEA,KAAA1yD,EAAA,EAAeA,GAAAigE,EAAiBjgE,IAEhCxkE,EAAAwkE,EAAAigE,EAEAd,IAEA3jI,EAAA,EAAAA,GAIAu/C,EAAAkkF,EAAAzjI,EAAAwkI,EAEAp6D,EAAAgwD,EAAAoJ,EAAA/zH,KAAAkyC,IAAApC,GACA8qB,EAAAgwD,EAAAmJ,EAAA/zH,KAAAiyC,IAAAnC,GAIAwiB,EAAA5qE,KAAA,GAAAmT,GAAA+6C,QAAA+kB,EAAAC,GAMA,MAEA,KAAA//D,GAAA23H,YAAAO,QAEA,GASAjjF,GAGAoC,EAAAD,EAZA04E,EAAAloI,EAAA,GAAAmoI,EAAAnoI,EAAA,GACA6xI,EAAA7xI,EAAA,GACA8xI,EAAA9xI,EAAA,GACAuxI,EAAAvxI,EAAA,GAAAwxI,EAAAxxI,EAAA,GACAyxI,IAAAzxI,EAAA,GACA+xI,EAAA/xI,EAAA,GAGAsyI,EAAAd,EAAAD,EAEAgB,EAAA,EAAAvN,CAUA,KAPA,IAAA+M,IAEAtiF,EAAAlyC,KAAAkyC,IAAAsiF,GACAviF,EAAAjyC,KAAAiyC,IAAAuiF,IAIAz/D,EAAA,EAAeA,GAAAigE,EAAiBjgE,IAAA,CAehC,GAbAxkE,EAAAwkE,EAAAigE,EAEAd,IAEA3jI,EAAA,EAAAA,GAIAu/C,EAAAkkF,EAAAzjI,EAAAwkI,EAEAp6D,EAAAgwD,EAAA2J,EAAAt0H,KAAAkyC,IAAApC,GACA8qB,EAAAgwD,EAAA2J,EAAAv0H,KAAAiyC,IAAAnC,GAEA,IAAA0kF,EAAA,CAEA,GAAAvkI,GAAA0qE,EAAA9qE,EAAA+qE,CAGAD,IAAA1qE,EAAA06H,GAAAz4E,GAAAriD,EAAA+6H,GAAA34E,EAAA04E,EACA/vD,GAAA3qE,EAAA06H,GAAA14E,GAAApiD,EAAA+6H,GAAA14E,EAAA04E,EAMAt4D,EAAA5qE,KAAA,GAAAmT,GAAA+6C,QAAA+kB,EAAAC,KAeA,GAAA85D,GAAApiE,IAAAxxE,OAAA,GACAopI,EAAA,KAUA,OATAlqH,MAAAuqD,IAAAmqE,EAAAzkI,EAAAqiE,EAAA,GAAAriE,GAAAi6H,GACAlqH,KAAAuqD,IAAAmqE,EAAA7kI,EAAAyiE,EAAA,GAAAziE,GAAAq6H,GACA53D,EAAAqV,OAAArV,EAAAxxE,OAAA,KACA6zI,GAEAriE,EAAA5qE,KAAA4qE,EAAA,IAIAA,GAgBAz3D,EAAAutH,KAAAjlI,UAAA6mI,SAAA,SAAAiL,EAAAC,GAEA,QAAAC,GAAAC,GAEA,GAAAv0I,GAAA2xE,EAAA37D,EAAAyzB,EAAA7nC,EAEA4yI,KAAAC,EAAA,GAAAz6H,GAAAutH,IAEA,KAAAvnI,EAAA,EAAA2xE,EAAA4iE,EAAAt0I,OAAqCD,EAAA2xE,EAAQ3xE,IAE7CgW,EAAAu+H,EAAAv0I,GAEA4B,EAAAoU,EAAApU,KACA6nC,EAAAzzB,EAAAyzB,OAEAA,IAAAzvB,EAAA23H,YAAAC,SAEA,IAAA6C,EAAAhD,QAAAxxI,SAEAu0I,EAAA3tI,KAAA4tI,GACAA,EAAA,GAAAz6H,GAAAutH,MAMAkN,EAAAhrG,GAAA1/B,MAAA0qI,EAAA7yI,EAYA,OARA,KAAA6yI,EAAAhD,QAAAxxI,QAEAu0I,EAAA3tI,KAAA4tI,GAMAD,EAIA,QAAAE,GAAAC,GAIA,OAFAzL,MAEAlpI,EAAA,EAAA2xE,EAAAgjE,EAAA10I,OAA0CD,EAAA2xE,EAAQ3xE,IAAA,CAElD,GAAA40I,GAAAD,EAAA30I,GAEA60I,EAAA,GAAA76H,GAAA2uH,KACAkM,GAAApD,QAAAmD,EAAAnD,QACAoD,EAAAxF,OAAAuF,EAAAvF,OAEAnG,EAAAriI,KAAAguI,GAMA,MAAA3L,GAIA,QAAA4L,GAAAC,EAAAC,GAWA,OATA3L,GAAA,MAEA4L,EAAAD,EAAA/0I,OAMAi1I,KACAv3I,EAAAs3I,EAAA,EAAAnmI,EAAA,EAAmCA,EAAAmmI,EAAat3I,EAAAmR,IAAA,CAEhD,GAAAqmI,GAAAH,EAAAr3I,GACAy3I,EAAAJ,EAAAlmI,GAEAumI,EAAAD,EAAAhmI,EAAA+lI,EAAA/lI,EACAkmI,EAAAF,EAAApmI,EAAAmmI,EAAAnmI,CAEA,IAAAmQ,KAAAuqD,IAAA4rE,GAAAjM,EAAA,CASA,GANAiM,EAAA,IAEAH,EAAAH,EAAAlmI,GAAiCumI,KACjCD,EAAAJ,EAAAr3I,GAAiC23I,MAGjCP,EAAA/lI,EAAAmmI,EAAAnmI,GAAA+lI,EAAA/lI,EAAAomI,EAAApmI,EAAA,QAEA,IAAA+lI,EAAA/lI,IAAAmmI,EAAAnmI,GAEA,GAAA+lI,EAAA3lI,IAAA+lI,EAAA/lI,EAAA,aAGK,CAEL,GAAAmmI,GAAAD,GAAAP,EAAA3lI,EAAA+lI,EAAA/lI,GAAAimI,GAAAN,EAAA/lI,EAAAmmI,EAAAnmI,EACA,QAAAumI,EAAA,QACA,IAAAA,EAAA,UACAL,WAII,CAGJ,GAAAH,EAAA/lI,IAAAmmI,EAAAnmI,EAAA,QAEA,IAAAomI,EAAAhmI,GAAA2lI,EAAA3lI,GAAA2lI,EAAA3lI,GAAA+lI,EAAA/lI,GACA+lI,EAAA/lI,GAAA2lI,EAAA3lI,GAAA2lI,EAAA3lI,GAAAgmI,EAAAhmI,EAAA,UAOA,MAAA8lI,GAKA,GAAAV,GAAAF,EAAAnuI,KAAAsrI,QACA,QAAA+C,EAAAv0I,OAAA,QAEA,IAAAo0I,OAAA,MAAAK,GAAAF,EAGA,IAAAgB,GAAAZ,EAAAC,EAAA3L,IAEA,QAAAsL,EAAAv0I,OAOA,MALA20I,GAAAJ,EAAA,GACAK,EAAA,GAAA76H,GAAA2uH,MACAkM,EAAApD,QAAAmD,EAAAnD,QACAoD,EAAAxF,OAAAuF,EAAAvF,OACAnG,EAAAriI,KAAAguI,GACA3L,CAIA,IAAAuM,IAAAz7H,EAAA2uH,MAAAC,MAAA8M,YAAAlB,EAAA,GAAAhH,YACAiI,GAAArB,GAAAqB,GAIA,IAIAE,GAJAC,KACAC,KACAC,KACAC,EAAA,CAGAF,GAAAE,GAAA72I,OACA42I,EAAAC,KAEA,IAAA/1I,GAAA2xE,CAEA,KAAA3xE,EAAA,EAAA2xE,EAAA6iE,EAAAv0I,OAAmCD,EAAA2xE,EAAQ3xE,IAE3C40I,EAAAJ,EAAAx0I,GACA21I,EAAAf,EAAApH,YACAgI,EAAAx7H,EAAA2uH,MAAAC,MAAA8M,YAAAC,GACAH,EAAApB,GAAAoB,IAEAA,IAEAC,GAAAI,EAAAE,QAEAF,EAAAE,IAA2BvsI,EAAA,GAAAwQ,GAAA2uH,MAAAhrI,EAAAg4I,GAC3BE,EAAAE,GAAAvsI,EAAAioI,QAAAmD,EAAAnD,QACAoE,EAAAE,GAAAvsI,EAAA6lI,OAAAuF,EAAAvF,OAEAoG,GAAAM,IACAD,EAAAC,OAMAD,EAAAC,GAAAlvI,MAAmC0H,EAAAqmI,EAAAj3I,EAAAg4I,EAAA,IASnC,KAAAE,EAAA,SAAAnB,GAAAF,EAGA,IAAAqB,EAAA51I,OAAA,GAKA,OAHA+1I,MACAC,KAEAC,EAAA,EAAAC,EAAAN,EAAA51I,OAA8Ci2I,EAAAC,EAAaD,IAE3DN,EAAAM,KAGA,QAAAA,GAAA,EAAAC,EAAAN,EAAA51I,OAA8Ci2I,EAAAC,EAAaD,IAG3D,OADAE,GAAAN,EAAAI,GACAG,EAAA,EAAsBA,EAAAD,EAAAn2I,OAAmBo2I,IAAA,CAIzC,OAFAC,GAAAF,EAAAC,GACAE,KACAC,EAAA,EAAwBA,EAAAX,EAAA51I,OAA0Bu2I,IAElD1B,EAAAwB,EAAA34I,EAAAk4I,EAAAW,GAAA74I,KAEAu4I,IAAAM,GAAAP,EAAApvI,MAA4C4vI,MAAAP,EAAAQ,IAAAF,EAAAG,KAAAN,IAC5CE,GAEAA,KACAX,EAAAY,GAAA3vI,KAAAyvI,IAIAN,KAOAO,IAEAX,EAAAM,GAAArvI,KAAAyvI,GAQAL,EAAAh2I,OAAA,IAGA+1I,IAAAF,EAAAF,IAMA,GAAAgB,GAAA1iE,EAAAkb,CACA,KAAApvF,EAAA,EAAA2xE,EAAAkkE,EAAA51I,OAAoCD,EAAA2xE,EAAQ3xE,IAK5C,IAHA60I,EAAAgB,EAAA71I,GAAAwJ,EACA0/H,EAAAriI,KAAAguI,GACA+B,EAAAd,EAAA91I,GACAk0E,EAAA,EAAAkb,EAAAwnD,EAAA32I,OAAoCi0E,EAAAkb,EAAQlb,IAE5C2gE,EAAAgC,MAAAhwI,KAAA+vI,EAAA1iE,GAAA3lE,EAQA,OAAA26H,IAiBAlvH,EAAA2uH,MAAA,WAEA3uH,EAAAutH,KAAAx9H,MAAA5D,KAAAT,WACAS,KAAA0wI,UAIA78H,EAAA2uH,MAAArmI,UAAA7B,OAAA8B,OAAAyX,EAAAutH,KAAAjlI,WACA0X,EAAA2uH,MAAArmI,UAAAE,YAAAwX,EAAA2uH,MAIA3uH,EAAA2uH,MAAArmI,UAAAw0I,QAAA,SAAA9yI,GAEA,GAAA+yI,GAAA,GAAA/8H,GAAAg9H,gBAAA7wI,KAAAnC,EACA,OAAA+yI,IAMA/8H,EAAA2uH,MAAArmI,UAAA20I,aAAA,SAAAjzI,GAEA,GAAA0Y,GAAA,GAAA1C,GAAAk9H,cAAA/wI,KAAAnC,EACA,OAAA0Y,IAMA1C,EAAA2uH,MAAArmI,UAAA60I,eAAA,SAAAvQ,GAEA,GAAA5mI,GAAA2xE,EAAAxrE,KAAA0wI,MAAA52I,OAAAm3I,IAEA,KAAAp3I,EAAA,EAAaA,EAAA2xE,EAAQ3xE,IAErBo3I,EAAAp3I,GAAAmG,KAAA0wI,MAAA72I,GAAAgxI,qBAAApK,EAAAzgI,KAAAmpI,MAIA,OAAA8H,IAMAp9H,EAAA2uH,MAAArmI,UAAA+0I,qBAAA,SAAAzQ,GAEA,GAAA5mI,GAAA2xE,EAAAxrE,KAAA0wI,MAAA52I,OAAAm3I,IAEA,KAAAp3I,EAAA,EAAaA,EAAA2xE,EAAQ3xE,IAErBo3I,EAAAp3I,GAAAmG,KAAA0wI,MAAA72I,GAAAmxI,2BAAAvK,EAAAzgI,KAAAmpI,MAIA,OAAA8H,IAOAp9H,EAAA2uH,MAAArmI,UAAAg1I,iBAAA,SAAA1Q,GAEA,OAEAh+G,MAAAziB,KAAA6qI,qBAAApK,GACAiQ,MAAA1wI,KAAAgxI,eAAAvQ,KAMA5sH,EAAA2uH,MAAArmI,UAAAi1I,cAAA,SAAA3Q,GAEA,MAAAzgI,MAAA4tI,gBAEA5tI,KAAAqxI,uBAAA5Q,GAIAzgI,KAAAmxI,iBAAA1Q,IAkBA5sH,EAAA2uH,MAAArmI,UAAAk1I,uBAAA,SAAA5Q,GAEA,OAEAh+G,MAAAziB,KAAAgrI,2BAAAvK,GACAiQ,MAAA1wI,KAAAkxI,qBAAAzQ,KAUA5sH,EAAA2uH,MAAAC,OAEA6O,iBAAA,SAAAlO,EAAAsN,GAEA,QAAAa,GAAAC,EAAAC,EAAAC,GAGA,MAAAF,GAAAvoI,IAAAwoI,EAAAxoI,EAEAuoI,EAAAvoI,EAAAwoI,EAAAxoI,EAEAuoI,EAAAvoI,GAAAyoI,EAAAzoI,GAAAyoI,EAAAzoI,GAAAwoI,EAAAxoI,EAIAwoI,EAAAxoI,GAAAyoI,EAAAzoI,GAAAyoI,EAAAzoI,GAAAuoI,EAAAvoI,EAMAuoI,EAAA3oI,EAAA4oI,EAAA5oI,EAEA2oI,EAAA3oI,GAAA6oI,EAAA7oI,GAAA6oI,EAAA7oI,GAAA4oI,EAAA5oI,EAIA4oI,EAAA5oI,GAAA6oI,EAAA7oI,GAAA6oI,EAAA7oI,GAAA2oI,EAAA3oI,EAQA,QAAA8oI,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAEA,GAAA9O,GAAA,MAEA+O,EAAAJ,EAAA5oI,EAAA2oI,EAAA3oI,EAAAipI,EAAAL,EAAAhpI,EAAA+oI,EAAA/oI,EACAspI,EAAAJ,EAAA9oI,EAAA6oI,EAAA7oI,EAAAmpI,EAAAL,EAAAlpI,EAAAipI,EAAAjpI,EAEAwpI,EAAAT,EAAA3oI,EAAA6oI,EAAA7oI,EACAqpI,EAAAV,EAAA/oI,EAAAipI,EAAAjpI,EAEA0pI,EAAAL,EAAAC,EAAAF,EAAAG,EACAI,EAAAN,EAAAG,EAAAJ,EAAAK,CAEA,IAAAt5H,KAAAuqD,IAAAgvE,GAAArP,EAAA,CAIA,GAAAuP,EACA,IAAAF,EAAA,GAEA,GAAAC,EAAA,GAAAA,EAAAD,EAAA,QAEA,IADAE,EAAAL,EAAAC,EAAAF,EAAAG,EACAG,EAAA,GAAAA,EAAAF,EAAA,aAEK,CAEL,GAAAC,EAAA,GAAAA,EAAAD,EAAA,QAEA,IADAE,EAAAL,EAAAC,EAAAF,EAAAG,EACAG,EAAA,GAAAA,EAAAF,EAAA,SAMA,OAAAE,EAEA,OAAAvuI,GACA,IAAAsuI,OAAAD,GACAX,KAGA,IAAAa,IAAAF,EAEA,OAAAruI,GACA,IAAAsuI,OAAAD,GACAV,KAIA,QAAAW,EAAA,OAAAV,EACA,IAAAU,IAAAD,EAAA,OAAAR,EAGA,IAAAW,GAAAD,EAAAF,CACA,SAActpI,EAAA2oI,EAAA3oI,EAAAypI,EAAAT,EACdppI,EAAA+oI,EAAA/oI,EAAA6pI,EAAAR,IAKA,OAAAM,GACAJ,EAAAC,IAAAF,EAAAG,EAAA,QAGA,IAAAK,GAAA,IAAAV,GAAA,IAAAC,EACAU,EAAA,IAAAT,GAAA,IAAAC,CAEA,IAAAO,GAAAC,EAEA,MAAAhB,GAAA3oI,IAAA6oI,EAAA7oI,GACA2oI,EAAA/oI,IAAAipI,EAAAjpI,MACA+oI,EAIA,IAAAe,EAEA,MAAApB,GAAAO,EAAAC,EAAAH,IACAA,KAIA,IAAAgB,EAEA,MAAArB,GAAAK,EAAAC,EAAAC,IACAA,KAKA,IAAAe,GAAAC,EAAAC,EAAAC,EACAC,EAAAC,EAAAC,EAAAC,CAsDA,OArDA,KAAAnB,GAGAL,EAAA3oI,EAAA4oI,EAAA5oI,GAEA4pI,EAAAjB,EAA0BmB,EAAAnB,EAAA3oI,EAC1B6pI,EAAAjB,EAA0BmB,EAAAnB,EAAA5oI,IAI1B4pI,EAAAhB,EAA0BkB,EAAAlB,EAAA5oI,EAC1B6pI,EAAAlB,EAA0BoB,EAAApB,EAAA3oI,GAG1B6oI,EAAA7oI,EAAA8oI,EAAA9oI,GAEAgqI,EAAAnB,EAA0BqB,EAAArB,EAAA7oI,EAC1BiqI,EAAAnB,EAA0BqB,EAAArB,EAAA9oI,IAI1BgqI,EAAAlB,EAA0BoB,EAAApB,EAAA9oI,EAC1BiqI,EAAApB,EAA0BsB,EAAAtB,EAAA7oI,KAO1B2oI,EAAA/oI,EAAAgpI,EAAAhpI,GAEAgqI,EAAAjB,EAA0BmB,EAAAnB,EAAA/oI,EAC1BiqI,EAAAjB,EAA0BmB,EAAAnB,EAAAhpI,IAI1BgqI,EAAAhB,EAA0BkB,EAAAlB,EAAAhpI,EAC1BiqI,EAAAlB,EAA0BoB,EAAApB,EAAA/oI,GAG1BipI,EAAAjpI,EAAAkpI,EAAAlpI,GAEAoqI,EAAAnB,EAA0BqB,EAAArB,EAAAjpI,EAC1BqqI,EAAAnB,EAA0BqB,EAAArB,EAAAlpI,IAI1BoqI,EAAAlB,EAA0BoB,EAAApB,EAAAlpI,EAC1BqqI,EAAApB,EAA0BsB,EAAAtB,EAAAjpI,IAK1BkqI,GAAAI,EAEAH,EAAAG,KACAH,IAAAG,EAEAnB,MACAiB,GAGAD,GAAAI,GAAAH,EAAAH,IACAG,EAAAC,GAIAH,EAAAK,KACAL,IAAAK,EAEApB,MACAa,GAGAG,GAAAI,GAAAP,EAAAC,IACAD,EAAAK,GAQA,QAAAG,GAAAC,EAAAC,EAAAC,EAAA9B,GAIA,GAAAxO,GAAA,MAGAuQ,EAAAF,EAAAtqI,EAAAqqI,EAAArqI,EAAAyqI,EAAAH,EAAA1qI,EAAAyqI,EAAAzqI,EACA8qI,EAAAH,EAAAvqI,EAAAqqI,EAAArqI,EAAA2qI,EAAAJ,EAAA3qI,EAAAyqI,EAAAzqI,EACAgrI,EAAAnC,EAAAzoI,EAAAqqI,EAAArqI,EAAA6qI,EAAApC,EAAA7oI,EAAAyqI,EAAAzqI,EAGAkrI,EAAAN,EAAAG,EAAAF,EAAAC,EACAK,EAAAP,EAAAK,EAAAJ,EAAAG,CAEA,IAAA76H,KAAAuqD,IAAAwwE,GAAA7Q,EAAA,CAIA,GAAA+Q,GAAAJ,EAAAD,EAAAE,EAAAH,CAGA,OAAAI,GAAA,EAGAC,GAAA,GAAAC,GAAA,EAKAD,GAAA,GAAAC,GAAA,EAQA,MAAAD,GAAA,EAOA,QAAAE,GAAA9Q,EAAAsN,GAKA,QAAAyD,GAAAC,EAAAC,GAGA,GAAAC,GAAA7xH,EAAA3oB,OAAA,EAEAy6I,EAAAH,EAAA,CACAG,GAAA,IAAAA,EAAAD,EAEA,IAAAE,GAAAJ,EAAA,CACAI,GAAAF,IAAAE,EAAA,EAEA,IAAAC,GAAApB,EAAA5wH,EAAA2xH,GAAA3xH,EAAA8xH,GAAA9xH,EAAA+xH,GAAAhE,EAAA6D,GACA,KAAAI,EAGA,QAKA,IAAAC,GAAAlE,EAAA12I,OAAA,EAEA66I,EAAAN,EAAA,CACAM,GAAA,IAAAA,EAAAD,EAEA,IAAAE,GAAAP,EAAA,CAIA,OAHAO,GAAAF,IAAAE,EAAA,GAEAH,EAAApB,EAAA7C,EAAA6D,GAAA7D,EAAAmE,GAAAnE,EAAAoE,GAAAnyH,EAAA2xH,MACAK,EAWA,QAAAI,GAAAC,EAAAC,GAGA,GAAAhF,GAAAiF,EAAAC,CACA,KAAAlF,EAAA,EAAmBA,EAAAttH,EAAA3oB,OAAqBi2I,IAIxC,GAFAiF,EAAAjF,EAAA,EAAwBiF,GAAAvyH,EAAA3oB,OACxBm7I,EAAAtD,EAAAmD,EAAAC,EAAAtyH,EAAAstH,GAAAttH,EAAAuyH,OACAC,EAAAn7I,OAAA,UAIA,UAMA,QAAAo7I,GAAAJ,EAAAC,GAGA,GAAAI,GAAAC,EACAlF,EAAA8E,EAAAC,CACA,KAAAE,EAAA,EAAoBA,EAAAE,EAAAv7I,OAA2Bq7I,IAG/C,IADAC,EAAA1E,EAAA2E,EAAAF,IACAjF,EAAA,EAAoBA,EAAAkF,EAAAt7I,OAAuBo2I,IAI3C,GAFA8E,EAAA9E,EAAA,EAAyB8E,GAAAI,EAAAt7I,OACzBm7I,EAAAtD,EAAAmD,EAAAC,EAAAK,EAAAlF,GAAAkF,EAAAJ,OACAC,EAAAn7I,OAAA,UAKA,UAUA,OAvFA02I,GAiFA8E,EAAAC,EACAC,EAAAC,EACAC,EAAAC,EACAC,EAAAC,EACAC,EAAAC,EAtFAtzH,EAAA2gH,EAAAh+F,SA2DAiwG,KAyBAW,KAIA5tI,EAAA,EAAA6tI,EAAAvF,EAAA52I,OAAsCsO,EAAA6tI,EAAQ7tI,IAE9CitI,EAAA30I,KAAA0H,EAMA,KAFA,GAAA8tI,GAAA,EACAC,EAAA,EAAAd,EAAAv7I,OACAu7I,EAAAv7I,OAAA,IAGA,GADAq8I,IACAA,EAAA,GAEA3yI,QAAAsM,IAAA,6BAAAulI,EAAAv7I,OAAA,iCACA,OAMA,IAAAy7I,EAAAW,EAAqCX,EAAA9yH,EAAA3oB,OAA2By7I,IAAA,CAEhEC,EAAA/yH,EAAA8yH,GACAD,IAGA,QAAAltI,GAAA,EAAqBA,EAAAitI,EAAAv7I,OAAuBsO,IAM5C,GAJAstI,EAAAL,EAAAjtI,GAGAutI,EAAAH,EAAAvsI,EAAA,IAAAusI,EAAA3sI,EAAA,IAAA6sI,EACA38I,SAAAi9I,EAAAL,GAAA,CAEAnF,EAAAE,EAAAgF,EACA,QAAAU,GAAA,EAAuBA,EAAA5F,EAAA12I,OAAkBs8I,IAGzC,GADAX,EAAAjF,EAAA4F,GACAjC,EAAAoB,EAAAa,KACAvB,EAAAW,EAAAC,KACAP,EAAAM,EAAAC,GAAA,CAEAH,EAAAc,EACAf,EAAA10D,OAAAv4E,EAAA,GAEAwtI,EAAAnzH,EAAA/B,MAAA,EAAA60H,EAAA,GACAM,EAAApzH,EAAA/B,MAAA60H,GACAO,EAAAtF,EAAA9vH,MAAA40H,GACAS,EAAAvF,EAAA9vH,MAAA,EAAA40H,EAAA,GAEA7yH,EAAAmzH,EAAAxwG,OAAA0wG,GAAA1wG,OAAA2wG,GAAA3wG,OAAAywG,GAEAK,EAAAX,CAKA,OAGA,GAAAD,GAAA,OAEAU,GAAAL,MAGA,GAAAL,GAAA,SAMA,MAAA7yH,GAaA,OARA5oB,GAAA2xE,EAAA9hE,EAAAiV,EACAxjB,EAAAyW,EACAykI,KAIAC,EAAAlT,EAAAh+F,SAEAh9B,EAAA,EAAA6tI,EAAAvF,EAAA52I,OAAqCsO,EAAA6tI,EAAQ7tI,IAE7CzO,MAAAwC,UAAAuE,KAAAkD,MAAA0yI,EAAA5F,EAAAtoI,GAQA,KAAAvO,EAAA,EAAA2xE,EAAA8qE,EAAAx8I,OAAqCD,EAAA2xE,EAAQ3xE,IAE7CsB,EAAAm7I,EAAAz8I,GAAAoP,EAAA,IAAAqtI,EAAAz8I,GAAAgP,EAEA9P,SAAAs9I,EAAAl7I,IAEAqI,QAAAwmD,KAAA,+BAAA7uD,GAIAk7I,EAAAl7I,GAAAtB,CAKA,IAAA08I,GAAArC,EAAA9Q,EAAAsN,GAEA8F,EAAA3iI,EAAA2sH,UAAAgE,YAAA+R,KAKA,KAAA18I,EAAA,EAAA2xE,EAAAgrE,EAAA18I,OAAqCD,EAAA2xE,EAAQ3xE,IAI7C,IAFA8kB,EAAA63H,EAAA38I,GAEA6P,EAAA,EAAeA,EAAA,EAAOA,IAEtBvO,EAAAwjB,EAAAjV,GAAAT,EAAA,IAAA0V,EAAAjV,GAAAb,EAEA+I,EAAAykI,EAAAl7I,GAEApC,SAAA6Y,IAEA+M,EAAAjV,GAAAkI,EAQA,OAAA4kI,GAAApxG,UAIAmqG,YAAA,SAAAtN,GAEA,MAAApuH,GAAA2sH,UAAAgE,YAAArxF,KAAA8uF,GAAA,GASAwU,KAAA,SAAAltI,EAAA/R,GAEA,GAAAiP,GAAA,EAAA8C,CACA,OAAA9C,KAAAjP,GAIAk/I,KAAA,SAAAntI,EAAA/R,GAEA,YAAA+R,KAAA/R,GAIAm/I,KAAA,SAAAptI,EAAA/R,GAEA,MAAA+R,KAAA/R,GAIAykF,GAAA,SAAA1yE,EAAAmvE,EAAAr9E,EAAAC,GAEA,MAAA0E,MAAAy2I,KAAAltI,EAAAmvE,GAAA14E,KAAA02I,KAAAntI,EAAAlO,GAAA2E,KAAA22I,KAAAptI,EAAAjO,IAMAs7I,KAAA,SAAArtI,EAAA/R,GAEA,GAAAiP,GAAA,EAAA8C,CACA,OAAA9C,OAAAjP,GAIAq/I,KAAA,SAAAttI,EAAA/R,GAEA,GAAAiP,GAAA,EAAA8C,CACA,UAAA9C,IAAA8C,EAAA/R,GAIAs/I,KAAA,SAAAvtI,EAAA/R,GAEA,GAAAiP,GAAA,EAAA8C,CACA,UAAA9C,EAAA8C,IAAA/R,GAIAu/I,KAAA,SAAAxtI,EAAA/R,GAEA,MAAA+R,OAAA/R,GAIAmrI,GAAA,SAAAp5H,EAAAmvE,EAAAr9E,EAAAC,EAAAq9E,GAEA,MAAA34E,MAAA42I,KAAArtI,EAAAmvE,GAAA14E,KAAA62I,KAAAttI,EAAAlO,GAAA2E,KAAA82I,KAAAvtI,EAAAjO,GAAA0E,KAAA+2I,KAAAxtI,EAAAovE,KAYA9kE,EAAA61H,UAAA,SAAAtmE,EAAA+C,GAEAnmE,KAAAojE,KACApjE,KAAAmmE,MAIAtyD,EAAA61H,UAAAvtI,UAAA7B,OAAA8B,OAAAyX,EAAAqzH,MAAA/qI,WACA0X,EAAA61H,UAAAvtI,UAAAE,YAAAwX,EAAA61H,UAEA71H,EAAA61H,UAAAvtI,UAAAwhF,SAAA,SAAAp0E,GAEA,GAAAwhE,GAAA/qE,KAAAmmE,GAAA3c,QAAAC,IAAAzpD,KAAAojE,GAGA,OAFA2H,GAAA5hB,eAAA5/C,GAAAwM,IAAA/V,KAAAojE,IAEA2H,GAMAl3D,EAAA61H,UAAAvtI,UAAAgrI,WAAA,SAAAh+H,GAEA,MAAAnJ,MAAA29E,SAAAx0E,IAIA0K,EAAA61H,UAAAvtI,UAAAisI,WAAA,SAAA7+H,GAEA,GAAAytI,GAAAh3I,KAAAmmE,GAAA3c,QAAAC,IAAAzpD,KAAAojE,GAEA,OAAA4zE,GAAAlhI,aAWAjC,EAAAy4H,qBAAA,SAAAj3D,EAAAjS,EAAA+C,GAEAnmE,KAAAq1E,KACAr1E,KAAAojE,KACApjE,KAAAmmE,MAIAtyD,EAAAy4H,qBAAAnwI,UAAA7B,OAAA8B,OAAAyX,EAAAqzH,MAAA/qI,WACA0X,EAAAy4H,qBAAAnwI,UAAAE,YAAAwX,EAAAy4H,qBAGAz4H,EAAAy4H,qBAAAnwI,UAAAwhF,SAAA,SAAAp0E,GAEA,GAAAosD,GAAA,GAAA9hD,GAAA+6C,OAKA,OAHA+G,GAAA1sD,EAAA4K,EAAA2uH,MAAAC,MAAAxmD,GAAA1yE,EAAAvJ,KAAAq1E,GAAApsE,EAAAjJ,KAAAojE,GAAAn6D,EAAAjJ,KAAAmmE,GAAAl9D,GACA0sD,EAAA9sD,EAAAgL,EAAA2uH,MAAAC,MAAAxmD,GAAA1yE,EAAAvJ,KAAAq1E,GAAAxsE,EAAA7I,KAAAojE,GAAAv6D,EAAA7I,KAAAmmE,GAAAt9D,GAEA8sD,GAKA9hD,EAAAy4H,qBAAAnwI,UAAAisI,WAAA,SAAA7+H,GAEA,GAAAosD,GAAA,GAAA9hD,GAAA+6C,OAOA,OALA+G,GAAA1sD,EAAA4K,EAAAqzH,MAAAzE,MAAAgG,uBAAAl/H,EAAAvJ,KAAAq1E,GAAApsE,EAAAjJ,KAAAojE,GAAAn6D,EAAAjJ,KAAAmmE,GAAAl9D,GACA0sD,EAAA9sD,EAAAgL,EAAAqzH,MAAAzE,MAAAgG,uBAAAl/H,EAAAvJ,KAAAq1E,GAAAxsE,EAAA7I,KAAAojE,GAAAv6D,EAAA7I,KAAAmmE,GAAAt9D,GAIA8sD,EAAA7/C,aAUAjC,EAAA84H,iBAAA,SAAAt3D,EAAAjS,EAAA+C,EAAAsX,GAEAz9E,KAAAq1E,KACAr1E,KAAAojE,KACApjE,KAAAmmE,KACAnmE,KAAAy9E,MAIA5pE,EAAA84H,iBAAAxwI,UAAA7B,OAAA8B,OAAAyX,EAAAqzH,MAAA/qI,WACA0X,EAAA84H,iBAAAxwI,UAAAE,YAAAwX,EAAA84H,iBAEA94H,EAAA84H,iBAAAxwI,UAAAwhF,SAAA,SAAAp0E,GAEA,GAAAoqE,GAAAC,CAKA,OAHAD,GAAA9/D,EAAA2uH,MAAAC,MAAAE,GAAAp5H,EAAAvJ,KAAAq1E,GAAApsE,EAAAjJ,KAAAojE,GAAAn6D,EAAAjJ,KAAAmmE,GAAAl9D,EAAAjJ,KAAAy9E,GAAAx0E,GACA2qE,EAAA//D,EAAA2uH,MAAAC,MAAAE,GAAAp5H,EAAAvJ,KAAAq1E,GAAAxsE,EAAA7I,KAAAojE,GAAAv6D,EAAA7I,KAAAmmE,GAAAt9D,EAAA7I,KAAAy9E,GAAA50E,GAEA,GAAAgL,GAAA+6C,QAAA+kB,EAAAC,IAIA//D,EAAA84H,iBAAAxwI,UAAAisI,WAAA,SAAA7+H,GAEA,GAAAoqE,GAAAC,CAEAD,GAAA9/D,EAAAqzH,MAAAzE,MAAAiG,mBAAAn/H,EAAAvJ,KAAAq1E,GAAApsE,EAAAjJ,KAAAojE,GAAAn6D,EAAAjJ,KAAAmmE,GAAAl9D,EAAAjJ,KAAAy9E,GAAAx0E,GACA2qE,EAAA//D,EAAAqzH,MAAAzE,MAAAiG,mBAAAn/H,EAAAvJ,KAAAq1E,GAAAxsE,EAAA7I,KAAAojE,GAAAv6D,EAAA7I,KAAAmmE,GAAAt9D,EAAA7I,KAAAy9E,GAAA50E,EAEA,IAAAmuI,GAAA,GAAAnjI,GAAA+6C,QAAA+kB,EAAAC,EAGA,OAFAojE,GAAAlhI,YAEAkhI,GAUAnjI,EAAAi5H,YAAA,SAAAxhE,GAEAtrE,KAAAsrE,OAAAvyE,QAAAuyE,QAIAz3D,EAAAi5H,YAAA3wI,UAAA7B,OAAA8B,OAAAyX,EAAAqzH,MAAA/qI,WACA0X,EAAAi5H,YAAA3wI,UAAAE,YAAAwX,EAAAi5H,YAEAj5H,EAAAi5H,YAAA3wI,UAAAwhF,SAAA,SAAAp0E,GAEA,GAAA+hE,GAAAtrE,KAAAsrE,OACAP,GAAAO,EAAAxxE,OAAA,GAAAyP,EAEA8zE,EAAArkE,KAAA2tC,MAAAokB,GACAuS,EAAAvS,EAAAsS,EAEA45D,EAAA3rE,EAAA,IAAA+R,MAAA,GACA65D,EAAA5rE,EAAA+R,GACA85D,EAAA7rE,EAAA+R,EAAA/R,EAAAxxE,OAAA,EAAAwxE,EAAAxxE,OAAA,EAAAujF,EAAA,GACA+5D,EAAA9rE,EAAA+R,EAAA/R,EAAAxxE,OAAA,EAAAwxE,EAAAxxE,OAAA,EAAAujF,EAAA,GAEA1nB,EAAA,GAAA9hD,GAAA+6C,OAKA,OAHA+G,GAAA1sD,EAAA4K,EAAAqzH,MAAAzE,MAAAvlD,YAAA+5D,EAAAhuI,EAAAiuI,EAAAjuI,EAAAkuI,EAAAluI,EAAAmuI,EAAAnuI,EAAAq0E,GACA3nB,EAAA9sD,EAAAgL,EAAAqzH,MAAAzE,MAAAvlD,YAAA+5D,EAAApuI,EAAAquI,EAAAruI,EAAAsuI,EAAAtuI,EAAAuuI,EAAAvuI,EAAAy0E,GAEA3nB,GAUA9hD,EAAA45H,aAAA,SAAA9J,EAAAC,EAAA0J,EAAAC,EAAAP,EAAAC,EAAAC,EAAAM,GAEAxtI,KAAA2jI,KACA3jI,KAAA4jI,KAEA5jI,KAAAstI,UACAttI,KAAAutI,UAEAvtI,KAAAgtI,cACAhtI,KAAAitI,YAEAjtI,KAAAktI,aAEAltI,KAAAwtI,aAAA,GAIA35H,EAAA45H,aAAAtxI,UAAA7B,OAAA8B,OAAAyX,EAAAqzH,MAAA/qI,WACA0X,EAAA45H,aAAAtxI,UAAAE,YAAAwX,EAAA45H,aAEA55H,EAAA45H,aAAAtxI,UAAAwhF,SAAA,SAAAp0E,GAEA,GAAAwkI,GAAA/tI,KAAAitI,UAAAjtI,KAAAgtI,WAEAe,GAAA,IAAAA,GAAA,EAAA/0H,KAAA8uC,IACAimF,EAAA,EAAA/0H,KAAA8uC,KAAAimF,GAAA,EAAA/0H,KAAA8uC,GAEA,IAAAgB,EAIAA,GAFA9oD,KAAAktI,gBAEAltI,KAAAitI,WAAA,EAAA1jI,IAAA,EAAAyP,KAAA8uC,GAAAimF,GAIA/tI,KAAAgtI,YAAAzjI,EAAAwkI,CAIA,IAAA9kI,GAAAjJ,KAAA2jI,GAAA3jI,KAAAstI,QAAAt0H,KAAAkyC,IAAApC,GACAjgD,EAAA7I,KAAA4jI,GAAA5jI,KAAAutI,QAAAv0H,KAAAiyC,IAAAnC,EAEA,QAAA9oD,KAAAwtI,UAAA,CAEA,GAAAtiF,GAAAlyC,KAAAkyC,IAAAlrD,KAAAwtI,WACAviF,EAAAjyC,KAAAiyC,IAAAjrD,KAAAwtI,WAEA75D,EAAA1qE,EAAA2qE,EAAA/qE,CAGAI,IAAA0qE,EAAA3zE,KAAA2jI,IAAAz4E,GAAA0oB,EAAA5zE,KAAA4jI,IAAA34E,EAAAjrD,KAAA2jI,GACA96H,GAAA8qE,EAAA3zE,KAAA2jI,IAAA14E,GAAA2oB,EAAA5zE,KAAA4jI,IAAA14E,EAAAlrD,KAAA4jI,GAIA,UAAA/vH,GAAA+6C,QAAA3lD,EAAAJ,IAUAgL,EAAAwjI,SAAA,SAAA1T,EAAAC,EAAAmJ,EAAAC,EAAAC,EAAAC,GAEAr5H,EAAA45H,aAAAp2I,KAAA2I,KAAA2jI,EAAAC,EAAAmJ,IAAAC,EAAAC,EAAAC,IAIAr5H,EAAAwjI,SAAAl7I,UAAA7B,OAAA8B,OAAAyX,EAAA45H,aAAAtxI,WACA0X,EAAAwjI,SAAAl7I,UAAAE,YAAAwX,EAAAwjI,SAQAxjI,EAAAyjI,WAAAzjI,EAAAqzH,MAAA9qI,OAEA,SAAAgnE,EAAA+C,GAEAnmE,KAAAojE,KACApjE,KAAAmmE,MAIA,SAAA58D,GAEA,GAAAosD,GAAA,GAAA9hD,GAAA8L,OAMA,OAJAg2C,GAAAzI,WAAAltD,KAAAmmE,GAAAnmE,KAAAojE,IACAzN,EAAAxM,eAAA5/C,GACAosD,EAAA5/C,IAAA/V,KAAAojE,IAEAzN,IAYA9hD,EAAA0jI,sBAAA1jI,EAAAqzH,MAAA9qI,OAEA,SAAAi5E,EAAAjS,EAAA+C,GAEAnmE,KAAAq1E,KACAr1E,KAAAojE,KACApjE,KAAAmmE,MAIA,SAAA58D,GAEA,GAAAosD,GAAA,GAAA9hD,GAAA8L,OAMA,OAJAg2C,GAAA1sD,EAAA4K,EAAA2uH,MAAAC,MAAAxmD,GAAA1yE,EAAAvJ,KAAAq1E,GAAApsE,EAAAjJ,KAAAojE,GAAAn6D,EAAAjJ,KAAAmmE,GAAAl9D,GACA0sD,EAAA9sD,EAAAgL,EAAA2uH,MAAAC,MAAAxmD,GAAA1yE,EAAAvJ,KAAAq1E,GAAAxsE,EAAA7I,KAAAojE,GAAAv6D,EAAA7I,KAAAmmE,GAAAt9D,GACA8sD,EAAAprD,EAAAsJ,EAAA2uH,MAAAC,MAAAxmD,GAAA1yE,EAAAvJ,KAAAq1E,GAAA9qE,EAAAvK,KAAAojE,GAAA74D,EAAAvK,KAAAmmE,GAAA57D,GAEAorD,IAYA9hD,EAAA2jI,kBAAA3jI,EAAAqzH,MAAA9qI,OAEA,SAAAi5E,EAAAjS,EAAA+C,EAAAsX,GAEAz9E,KAAAq1E,KACAr1E,KAAAojE,KACApjE,KAAAmmE,KACAnmE,KAAAy9E,MAIA,SAAAl0E,GAEA,GAAAosD,GAAA,GAAA9hD,GAAA8L,OAMA,OAJAg2C,GAAA1sD,EAAA4K,EAAA2uH,MAAAC,MAAAE,GAAAp5H,EAAAvJ,KAAAq1E,GAAApsE,EAAAjJ,KAAAojE,GAAAn6D,EAAAjJ,KAAAmmE,GAAAl9D,EAAAjJ,KAAAy9E,GAAAx0E,GACA0sD,EAAA9sD,EAAAgL,EAAA2uH,MAAAC,MAAAE,GAAAp5H,EAAAvJ,KAAAq1E,GAAAxsE,EAAA7I,KAAAojE,GAAAv6D,EAAA7I,KAAAmmE,GAAAt9D,EAAA7I,KAAAy9E,GAAA50E,GACA8sD,EAAAprD,EAAAsJ,EAAA2uH,MAAAC,MAAAE,GAAAp5H,EAAAvJ,KAAAq1E,GAAA9qE,EAAAvK,KAAAojE,GAAA74D,EAAAvK,KAAAmmE,GAAA57D,EAAAvK,KAAAy9E,GAAAlzE,GAEAorD,IAaA9hD,EAAA4jI,aAAA5jI,EAAAqzH,MAAA9qI,OAEA,SAAAkvE,GAEA9nE,QAAAwmD,KAAA,4EACAhqD,KAAAsrE,OAAAvyE,QAAAuyE,QAIA,SAAA/hE,GAEA,GAAA+hE,GAAAtrE,KAAAsrE,OACAP,GAAAO,EAAAxxE,OAAA,GAAAyP,EAEA8zE,EAAArkE,KAAA2tC,MAAAokB,GACAuS,EAAAvS,EAAAsS,EAEA45D,EAAA3rE,EAAA,GAAA+R,MAAA,GACA65D,EAAA5rE,EAAA+R,GACA85D,EAAA7rE,EAAA+R,EAAA/R,EAAAxxE,OAAA,EAAAwxE,EAAAxxE,OAAA,EAAAujF,EAAA,GACA+5D,EAAA9rE,EAAA+R,EAAA/R,EAAAxxE,OAAA,EAAAwxE,EAAAxxE,OAAA,EAAAujF,EAAA,GAEA1nB,EAAA,GAAA9hD,GAAA8L,OAMA,OAJAg2C,GAAA1sD,EAAA4K,EAAAqzH,MAAAzE,MAAAvlD,YAAA+5D,EAAAhuI,EAAAiuI,EAAAjuI,EAAAkuI,EAAAluI,EAAAmuI,EAAAnuI,EAAAq0E,GACA3nB,EAAA9sD,EAAAgL,EAAAqzH,MAAAzE,MAAAvlD,YAAA+5D,EAAApuI,EAAAquI,EAAAruI,EAAAsuI,EAAAtuI,EAAAuuI,EAAAvuI,EAAAy0E,GACA3nB,EAAAprD,EAAAsJ,EAAAqzH,MAAAzE,MAAAvlD,YAAA+5D,EAAA1sI,EAAA2sI,EAAA3sI,EAAA4sI,EAAA5sI,EAAA6sI,EAAA7sI,EAAA+yE,GAEA3nB,IAmBA9hD,EAAA6jI,iBAAA,WAkBA,QAAAC,MAhBA,GACAjpE,GAAA,GAAA76D,GAAA8L,QACA8jH,EAAA,GAAAkU,GACAjU,EAAA,GAAAiU,GACAC,EAAA,GAAAD,EAgEA,OAxCAA,GAAAx7I,UAAA4e,KAAA,SAAAmxH,EAAA2L,EAAAthE,EAAAC,GAEAx2E,KAAA83I,GAAA5L,EACAlsI,KAAAiiE,GAAAsU,EACAv2E,KAAAkiE,MAAAgqE,EAAA,EAAA2L,EAAA,EAAAthE,EAAAC,EACAx2E,KAAAmiE,GAAA,EAAA+pE,EAAA,EAAA2L,EAAAthE,EAAAC,GAIAmhE,EAAAx7I,UAAA47I,yBAAA,SAAA7L,EAAA2L,EAAA3nE,EAAA8nE,EAAAC,EAAAC,EAAAC,GAGA,GAAA3hE,IAAAqhE,EAAA3L,GAAA+L,GAAA/nE,EAAAg8D,IAAA+L,EAAAC,IAAAhoE,EAAA2nE,GAAAK,EACA/6D,GAAAjN,EAAA2nE,GAAAK,GAAAF,EAAAH,IAAAK,EAAAC,IAAAH,EAAA9nE,GAAAioE,CAGA3hE,IAAA0hE,EACA/6D,GAAA+6D,EAGAl4I,KAAA+a,KAAA88H,EAAA3nE,EAAAsG,EAAA2G,IAKAw6D,EAAAx7I,UAAAi8I,eAAA,SAAAlM,EAAA2L,EAAA3nE,EAAA8nE,EAAAK,GAEAr4I,KAAA+a,KAAA88H,EAAA3nE,EAAAmoE,GAAAnoE,EAAAg8D,GAAAmM,GAAAL,EAAAH,KAIAF,EAAAx7I,UAAAm8I,KAAA,SAAA/uI,GAEA,GAAA4zE,GAAA5zE,IACA6zE,EAAAD,EAAA5zE,CACA,OAAAvJ,MAAA83I,GAAA93I,KAAAiiE,GAAA14D,EAAAvJ,KAAAkiE,GAAAib,EAAAn9E,KAAAmiE,GAAAib,GAKAvpE,EAAAqzH,MAAA9qI,OAEA,SAAA5E,GAEAwI,KAAAsrE,OAAA9zE,OAIA,SAAA+R,GAEA,GACAwhE,GAAAsS,EAAAC,EAAAl0E,EADAkiE,EAAAtrE,KAAAsrE,MAGAliE,GAAAkiE,EAAAxxE,OAEAsP,EAAA,GAAA5F,QAAAsM,IAAA,mCAEAi7D,GAAA3hE,EAAA,GAAAG,EACA8zE,EAAArkE,KAAA2tC,MAAAokB,GACAuS,EAAAvS,EAAAsS,EAEA,IAAAC,GAAAD,IAAAj0E,EAAA,IAEAi0E,EAAAj0E,EAAA,EACAk0E,EAAA,EAIA,IAAA5E,GAAAr9E,EAAAC,EAAAq9E,CA6BA,IA3BA,IAAA0E,GAGA3O,EAAAxhB,WAAAoe,EAAA,GAAAA,EAAA,IAAAv1D,IAAAu1D,EAAA,IACAoN,EAAAhK,GAIAgK,EAAApN,EAAA+R,EAAA,GAIAhiF,EAAAiwE,EAAA+R,GACA/hF,EAAAgwE,EAAA+R,EAAA,GAEAA,EAAA,EAAAj0E,EAEAuvE,EAAArN,EAAA+R,EAAA,IAKA3O,EAAAxhB,WAAAoe,EAAAliE,EAAA,GAAAkiE,EAAAliE,EAAA,IAAA2M,IAAAu1D,EAAAliE,EAAA,IACAuvE,EAAAjK,GAIA31E,SAAAiH,KAAA2E,MAAA,gBAAA3E,KAAA2E,MAAA,YAAA3E,KAAA2E,KAAA,CAGA,GAAAqc,GAAA,YAAAhhB,KAAA2E,KAAA,OACAszI,EAAAj/H,KAAAgI,IAAA03D,EAAAvtB,kBAAA9vD,GAAA2lB,GACAk3H,EAAAl/H,KAAAgI,IAAA3lB,EAAA8vD,kBAAA7vD,GAAA0lB,GACAm3H,EAAAn/H,KAAAgI,IAAA1lB,EAAA6vD,kBAAAwtB,GAAA33D,EAGAk3H,GAAA,OAAAA,EAAA,GACAD,EAAA,OAAAA,EAAAC,GACAC,EAAA,OAAAA,EAAAD,GAEAzU,EAAAsU,yBAAAr/D,EAAAzvE,EAAA5N,EAAA4N,EAAA3N,EAAA2N,EAAA0vE,EAAA1vE,EAAAgvI,EAAAC,EAAAC,GACAzU,EAAAqU,yBAAAr/D,EAAA7vE,EAAAxN,EAAAwN,EAAAvN,EAAAuN,EAAA8vE,EAAA9vE,EAAAovI,EAAAC,EAAAC,GACAP,EAAAG,yBAAAr/D,EAAAnuE,EAAAlP,EAAAkP,EAAAjP,EAAAiP,EAAAouE,EAAApuE,EAAA0tI,EAAAC,EAAAC,OAEI,mBAAAn4I,KAAA2E,KAAA,CAEJ,GAAA0zI,GAAAt/I,SAAAiH,KAAAq4I,QAAAr4I,KAAAq4I,QAAA,EACA5U,GAAA2U,eAAA1/D,EAAAzvE,EAAA5N,EAAA4N,EAAA3N,EAAA2N,EAAA0vE,EAAA1vE,EAAAovI,GACA3U,EAAA0U,eAAA1/D,EAAA7vE,EAAAxN,EAAAwN,EAAAvN,EAAAuN,EAAA8vE,EAAA9vE,EAAAwvI,GACAT,EAAAQ,eAAA1/D,EAAAnuE,EAAAlP,EAAAkP,EAAAjP,EAAAiP,EAAAouE,EAAApuE,EAAA8tI,GAIA,GAAArvI,GAAA,GAAA6K,GAAA8L,QACA8jH,EAAA6U,KAAAh7D,GACAomD,EAAA4U,KAAAh7D,GACAs6D,EAAAU,KAAAh7D,GAGA,OAAAt0E,QAeA6K,EAAA0kI,mBAAA1kI,EAAAqzH,MAAA9qI,OAEA,SAAAkvE,GAEAtrE,KAAAsrE,OAAAvyE,QAAAuyE,QAIA,SAAA/hE,GAEA,GAAA+hE,GAAAtrE,KAAAsrE,OACAP,GAAAO,EAAAxxE,OAAA,GAAAyP,EAEA8zE,EAAArkE,KAAA2tC,MAAAokB,GACAuS,EAAAvS,EAAAsS,CAEAA,MAAA,KAAArkE,KAAA2tC,MAAA3tC,KAAAuqD,IAAA8Z,GAAA/R,EAAAxxE,QAAA,GAAAwxE,EAAAxxE,MAEA,IAAAm9I,GAAA3rE,GAAA+R,EAAA,GAAA/R,EAAAxxE,QACAo9I,EAAA5rE,EAAAhpE,EAAAgpE,EAAAxxE,QACAq9I,EAAA7rE,GAAA+R,EAAA,GAAA/R,EAAAxxE,QACAs9I,EAAA9rE,GAAA+R,EAAA,GAAA/R,EAAAxxE,QAEA67D,EAAA,GAAA9hD,GAAA8L,OAMA,OAJAg2C,GAAA1sD,EAAA4K,EAAAqzH,MAAAzE,MAAAvlD,YAAA+5D,EAAAhuI,EAAAiuI,EAAAjuI,EAAAkuI,EAAAluI,EAAAmuI,EAAAnuI,EAAAq0E,GACA3nB,EAAA9sD,EAAAgL,EAAAqzH,MAAAzE,MAAAvlD,YAAA+5D,EAAApuI,EAAAquI,EAAAruI,EAAAsuI,EAAAtuI,EAAAuuI,EAAAvuI,EAAAy0E,GACA3nB,EAAAprD,EAAAsJ,EAAAqzH,MAAAzE,MAAAvlD,YAAA+5D,EAAA1sI,EAAA2sI,EAAA3sI,EAAA4sI,EAAA5sI,EAAA6sI,EAAA7sI,EAAA+yE,GAEA3nB,IAYA9hD,EAAA2kI,kBAEAxyB,OAAA,EACAyyB,WAAA,EACAC,mBAAA,EAIA3iI,IAAA,WAEAvS,QAAAwmD,KAAA,sDAGA1iD,IAAA,WAEA9D,QAAAwmD,KAAA,sDAGAr6C,OAAA,WAEAnM,QAAAwmD,KAAA,yDAMAoxC,cAEArgF,KAAA,SAAAgC,GAEA,GAAAA,EAAA47H,iBAAA,MAAA57H,EAIA,QAAA3U,GAAA,EAAkBA,EAAA2U,EAAA67H,UAAA9+I,OAA2BsO,IAAA,CAE7C,OAAA3B,GAAA,EAAmBA,EAAAsW,EAAA67H,UAAAxwI,GAAA1F,KAAA5I,OAAqC2M,IAYxD,GARAsW,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAA+1C,KAAA,IAEAz/B,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAA+1C,KAAA,GAMAzjD,SAAAgkB,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAAoyI,OACA97H,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAAoyI,cAAAhlI,GAAAy2C,YAAA,CAEA,GAAAD,GAAAttC,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAAoyI,GACA97H,GAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAAoyI,QAAAhlI,GAAAy2C,YAAAgO,UAAAjO,GAQA,GAAAttC,EAAA67H,UAAAxwI,GAAA1F,KAAA5I,QAAAf,SAAAgkB,EAAA67H,UAAAxwI,GAAA1F,KAAA,GAAAylF,aAAA,CAMA,OAFA2wD,MAEAryI,EAAA,EAAoBA,EAAAsW,EAAA67H,UAAAxwI,GAAA1F,KAAA5I,OAAqC2M,IAEzD,OAAAnP,GAAA,EAAqBA,EAAAylB,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAA0hF,aAAAruF,OAAuDxC,IAAA,CAE5E,GAAAyhJ,GAAAh8H,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAA0hF,aAAA7wF,EACAwhJ,GAAAC,MAMAh8H,EAAA67H,UAAAxwI,GAAA0wI,kBAKA,QAAAryI,GAAA,EAAoBA,EAAAsW,EAAA67H,UAAAxwI,GAAA1F,KAAA5I,OAAqC2M,IAAA,CAEzD,GAAAklG,KAEA,QAAAotC,KAAAD,GAAA,CAEA,OAAAxhJ,GAAA,EAAsBA,EAAAylB,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAA0hF,aAAAruF,OAAuDxC,IAE7E,GAAAylB,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAA0hF,aAAA7wF,KAAAyhJ,EAAA,CAEAptC,EAAAotC,GAAAh8H,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAAuyI,uBAAA1hJ,EACA,OAMAA,IAAAylB,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAA0hF,aAAAruF,SAEA6xG,EAAAotC,GAAA,GAMAh8H,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAAuyI,uBAAArtC,GASA,OAAAllG,GAAA,EAAmBA,EAAAsW,EAAA67H,UAAAxwI,GAAA1F,KAAA5I,OAAqC2M,IAExDsW,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAA+1C,OAAAz/B,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,EAAA,GAAA+1C,OAEAz/B,EAAA67H,UAAAxwI,GAAA1F,KAAAi+E,OAAAl6E,EAAA,GACAA,IASA,QAAAA,GAAA,EAAmBA,EAAAsW,EAAA67H,UAAAxwI,GAAA1F,KAAA5I,OAAqC2M,IAExDsW,EAAA67H,UAAAxwI,GAAA1F,KAAA+D,GAAAmL,MAAAnL,EAQA,MAFAsW,GAAA47H,eAEA57H,GAIAF,MAAA,SAAAo8H,GAEA,GAAAC,GAAA,SAAAD,EAAAL,GAEAA,EAAAl4I,KAAAu4I,EAEA,QAAA1hJ,GAAA,EAAmBA,EAAA0hJ,EAAAhyI,SAAAnN,OAA0BvC,IAC7C2hJ,EAAAD,EAAAhyI,SAAA1P,GAAAqhJ,IAMAA,IAEA,IAAAK,YAAAplI,GAAA81F,YAEA,OAAA5gG,GAAA,EAAmBA,EAAAkwI,EAAA9uC,SAAAhP,MAAArhG,OAAgCiP,IAEnD6vI,EAAAl4I,KAAAu4I,EAAA9uC,SAAAhP,MAAApyF,QAMAmwI,GAAAD,EAAAL,EAIA,OAAAA,IAIAlT,KAAA,SAAAnxF,GAEAv0C,KAAAo7F,WAAAp3F,QAAAuwC,SAEAv0C,KAAAo7F,WAAA16F,KAAA6zC,IAMA6rC,KAAA,SAAA7rC,GAEA,GAAA3iC,GAAA5R,KAAAo7F,WAAAp3F,QAAAuwC,EAEA3iC,SAEA5R,KAAAo7F,WAAAza,OAAA/uE,EAAA,IAMAmI,OAAA,SAAAo/H,GAEA,OAAAt/I,GAAA,EAAkBA,EAAAmG,KAAAo7F,WAAAthG,OAA4BD,IAE9CmG,KAAAo7F,WAAAvhG,GAAAu/I,mBAIA,QAAAv/I,GAAA,EAAkBA,EAAAmG,KAAAo7F,WAAAthG,OAA4BD,IAE9CmG,KAAAo7F,WAAAvhG,GAAAkgB,OAAAo/H,KAgBAtlI,EAAAwlI,UAAA,SAAAJ,EAAAl8H,GAEA/c,KAAAi5I,OACAj5I,KAAA+c,KAAAlJ,EAAA2kI,iBAAAz9H,KAAAgC,GACA/c,KAAA44I,UAAA/kI,EAAA2kI,iBAAA37H,MAAAo8H,GAEAj5I,KAAA6lI,YAAA,EACA7lI,KAAAs5I,UAAA,EAEAt5I,KAAAulI,aACAvlI,KAAA2lI,QACA3lI,KAAAs9E,OAAA,EAEAt9E,KAAAu5I,kBAAA1lI,EAAA2kI,iBAAAxyB,QAIAnyG,EAAAwlI,UAAAl9I,WAEAE,YAAAwX,EAAAwlI,UAEAG,UAAA,mBAEA9T,KAAA,SAAAr/E,EAAAi3B,GAEAt9E,KAAA6lI,YAAA9sI,SAAAstD,IAAA,EACArmD,KAAAs9E,OAAAvkF,SAAAukF,IAAA,EAEAt9E,KAAAulI,aAEAvlI,KAAAivD,QAEAp7C,EAAA2kI,iBAAA9S,KAAA1lI,OAIAogF,KAAA,WAEApgF,KAAAulI,aAEA1xH,EAAA2kI,iBAAAp4D,KAAApgF,OAIAivD,MAAA,WAEA,OAAA7mD,GAAA,EAAA6tI,EAAAj2I,KAAA44I,UAAA9+I,OAA8CsO,EAAA6tI,EAAQ7tI,IAAA,CAEtD,GAAA+Z,GAAAniB,KAAA44I,UAAAxwI,EAEArP,UAAAopB,EAAAs3H,iBAEAt3H,EAAAs3H,gBACAr+C,cACAvF,UACA6jD,eAAA,EACAC,iBAAA,EACAC,YAAA,IAMA,IAAAzgJ,GAAA6G,KAAA+c,KAAA5jB,KACAiiG,EAAAj5E,EAAAs3H,eAAAr+C,WACAq+C,EAAAr+C,EAAAjiG,EAEAJ,UAAA0gJ,IAEAA,GACAI,SAAe11F,IAAA,EAAA00F,IAAA,EAAA5uC,IAAA,GACf6vC,SAAe31F,IAAA,EAAA00F,IAAA,EAAA5uC,IAAA,GACf8vC,eAAA53H,EAAA8mC,QAGAmyC,EAAAjiG,GAAAsgJ,EAMA,QAAAlwI,GAAA,EAAmBA,EAAA,EAAOA,IAAA,CAO1B,IALA,GAAA5E,GAAA3E,KAAAw5I,SAAAjwI,GAEAswI,EAAA75I,KAAA+c,KAAA67H,UAAAxwI,GAAA1F,KAAA,GACAo3I,EAAA95I,KAAAg6I,eAAAr1I,EAAAyD,EAAA,GAEA0xI,EAAAt9F,KAAAx8C,KAAA6lI,aAAAiU,EAAAloI,MAAAioI,EAAAjoI,OAEAioI,EAAAC,EACAA,EAAA95I,KAAAg6I,eAAAr1I,EAAAyD,EAAA0xI,EAAAloI,MAAA,EAIA6nI,GAAAI,QAAAl1I,GAAAk1I,EACAJ,EAAAK,QAAAn1I,GAAAm1I,KAQAV,kBAAA,WAEA,OAAAhxI,GAAA,EAAA6tI,EAAAj2I,KAAA44I,UAAA9+I,OAA8CsO,EAAA6tI,EAAQ7tI,IAAA,CAEtD,GAAA+Z,GAAAniB,KAAA44I,UAAAxwI,GACAqxI,EAAAt3H,EAAAs3H,cAEA,IAAA1gJ,SAAA0gJ,EAAA,CAEA,GAAA5jD,GAAA4jD,EAAA5jD,QAEAA,GAAA6jD,eAAA,EACA7jD,EAAA8jD,iBAAA,EACA9jD,EAAA+jD,YAAA,KAQA7/H,OAAA,WAEA,GAAAuxD,MACAtoE,EAAA,GAAA6Q,GAAA8L,QACAs6H,EAAA,GAAApmI,GAAA8L,QACAu6H,EAAA,GAAArmI,GAAAy2C,WAIA6vF,EAAA,SAAA7uE,EAAA9iB,GAEA,GACAuiB,GAAAsS,EAAAC,EAAAC,EAAAC,EACAn6D,EAAA6E,EAAA2F,EAAA4C,EAFAl5B,KAAAkmF,IAyBA,OArBA1S,IAAAO,EAAAxxE,OAAA,GAAA0uD,EACA60B,EAAArkE,KAAA2tC,MAAAokB,GACAuS,EAAAvS,EAAAsS,EAEA9lF,EAAA,OAAA8lF,MAAA,EACA9lF,EAAA,GAAA8lF,EACA9lF,EAAA,GAAA8lF,EAAA/R,EAAAxxE,OAAA,EAAAujF,IAAA,EACA9lF,EAAA,GAAA8lF,EAAA/R,EAAAxxE,OAAA,EAAAujF,IAAA,EAEAh6D,EAAAioD,EAAA/zE,EAAA,IACA2wB,EAAAojD,EAAA/zE,EAAA,IACAs2B,EAAAy9C,EAAA/zE,EAAA,IACAk5B,EAAA66C,EAAA/zE,EAAA,IAEAgmF,EAAAD,IACAE,EAAAF,EAAAC,EAEAE,EAAA,GAAAP,EAAA75D,EAAA,GAAA6E,EAAA,GAAA2F,EAAA,GAAA4C,EAAA,GAAA6sD,EAAAC,EAAAC,GACAC,EAAA,GAAAP,EAAA75D,EAAA,GAAA6E,EAAA,GAAA2F,EAAA,GAAA4C,EAAA,GAAA6sD,EAAAC,EAAAC,GACAC,EAAA,GAAAP,EAAA75D,EAAA,GAAA6E,EAAA,GAAA2F,EAAA,GAAA4C,EAAA,GAAA6sD,EAAAC,EAAAC,GAEAC,GAIAP,EAAA,SAAAxE,EAAAr9E,EAAAC,EAAAq9E,EAAApvE,EAAA4zE,EAAAC,GAEA,GAAA/H,GAAA,IAAA/5E,EAAAo9E,GACAtV,EAAA,IAAAuV,EAAAt9E,EAEA,WAAAA,EAAAC,GAAA+5E,EAAAjS,GAAAga,OAAA/hF,EAAAC,GAAA,EAAA+5E,EAAAjS,GAAA+Z,EAAA9H,EAAA9rE,EAAAlO,EAIA,iBAAAqyD,GAEA,GAAA1tD,KAAAulI,iBAEAvlI,KAAA6lI,aAAAn4E,EAAA1tD,KAAAs5I,UAEA,IAAAt5I,KAAAs9E,QAAA,CAKA,GAAAgtB,GAAAtqG,KAAA+c,KAAAjjB,QAEAkG,KAAA6lI,YAAAv7B,GAAAtqG,KAAA6lI,YAAA,KAEA7lI,KAAA2lI,MAEA3lI,KAAA6lI,aAAAv7B,EAEAtqG,KAAA6lI,YAAA,IACA7lI,KAAA6lI,aAAAv7B,GAEAtqG,KAAAivD,SAIAjvD,KAAAogF,OAMA,QAAAh4E,GAAA,EAAA6tI,EAAAj2I,KAAA44I,UAAA9+I,OAA+CsO,EAAA6tI,EAAQ7tI,IAQvD,OANA+Z,GAAAniB,KAAA44I,UAAAxwI,GACAqxI,EAAAt3H,EAAAs3H,eAAAr+C,WAAAp7F,KAAA+c,KAAA5jB,MACA08F,EAAA1zE,EAAAs3H,eAAA5jD,SAIAtsF,EAAA,EAAoBA,EAAA,EAAOA,IAAA,CAI3B,GAAA5E,GAAA3E,KAAAw5I,SAAAjwI,GACAswI,EAAAJ,EAAAI,QAAAl1I,GACAm1I,EAAAL,EAAAK,QAAAn1I,EAEA,IAAA3E,KAAAs5I,UAAA,GAAAQ,EAAAt9F,MAAAx8C,KAAA6lI,aACA7lI,KAAAs5I,UAAA,GAAAO,EAAAr9F,MAAAx8C,KAAA6lI,YAAA,CAKA,IAHAgU,EAAA75I,KAAA+c,KAAA67H,UAAAxwI,GAAA1F,KAAA,GACAo3I,EAAA95I,KAAAg6I,eAAAr1I,EAAAyD,EAAA,GAEA0xI,EAAAt9F,KAAAx8C,KAAA6lI,aAAAiU,EAAAloI,MAAAioI,EAAAjoI,OAEAioI,EAAAC,EACAA,EAAA95I,KAAAg6I,eAAAr1I,EAAAyD,EAAA0xI,EAAAloI,MAAA,EAIA6nI,GAAAI,QAAAl1I,GAAAk1I,EACAJ,EAAAK,QAAAn1I,GAAAm1I,EAIA,GAAAtxF,IAAAxoD,KAAA6lI,YAAAgU,EAAAr9F,OAAAs9F,EAAAt9F,KAAAq9F,EAAAr9F,MAEA49F,EAAAP,EAAAl1I,GACA01I,EAAAP,EAAAn1I,EAOA,IALA6jD,EAAA,IAAAA,EAAA,GACAA,EAAA,IAAAA,EAAA,GAIA,QAAA7jD,GAEA,GAAA3E,KAAAu5I,oBAAA1lI,EAAA2kI,iBAAAxyB,OAAA,CAEAi0B,EAAAhxI,EAAAmxI,EAAA,IAAAC,EAAA,GAAAD,EAAA,IAAA5xF,EACAyxF,EAAApxI,EAAAuxI,EAAA,IAAAC,EAAA,GAAAD,EAAA,IAAA5xF,EACAyxF,EAAA1vI,EAAA6vI,EAAA,IAAAC,EAAA,GAAAD,EAAA,IAAA5xF,CAGA,IAAA8xF,GAAAt6I,KAAAs9E,QAAAt9E,KAAAs9E,OAAAuY,EAAA6jD,eACAv3H,GAAAtM,SAAAuiD,KAAA6hF,EAAAK,GACAzkD,EAAA6jD,gBAAA15I,KAAAs9E,WAEO,IAAAt9E,KAAAu5I,oBAAA1lI,EAAA2kI,iBAAAC,YACPz4I,KAAAu5I,oBAAA1lI,EAAA2kI,iBAAAE,mBAAA,CAEAptE,EAAA,GAAAtrE,KAAAu6I,eAAA,MAAAnyI,EAAAyxI,EAAAjoI,MAAA,GAAAuyC,IACAmnB,EAAA,GAAA8uE,EACA9uE,EAAA,GAAA+uE,EACA/uE,EAAA,GAAAtrE,KAAAg6I,eAAA,MAAA5xI,EAAA0xI,EAAAloI,MAAA,GAAAuyC,IAEAqE,EAAA,IAAAA,EAAA,GAEA,IAAAgyF,GAAAL,EAAA7uE,EAAA9iB,GACA8xF,EAAAt6I,KAAAs9E,QAAAt9E,KAAAs9E,OAAAuY,EAAA6jD,eACA7jD,GAAA6jD,gBAAA15I,KAAAs9E,MAIA,IAAA3nB,GAAAxzC,EAAAtM,QAMA,IAJA8/C,EAAA1sD,EAAA0sD,EAAA1sD,GAAAuxI,EAAA,GAAA7kF,EAAA1sD,GAAAqxI,EACA3kF,EAAA9sD,EAAA8sD,EAAA9sD,GAAA2xI,EAAA,GAAA7kF,EAAA9sD,GAAAyxI,EACA3kF,EAAAprD,EAAAorD,EAAAprD,GAAAiwI,EAAA,GAAA7kF,EAAAprD,GAAA+vI,EAEAt6I,KAAAu5I,oBAAA1lI,EAAA2kI,iBAAAE,mBAAA,CAEA,GAAA+B,GAAAN,EAAA7uE,EAAA,KAAA9iB,EAEAxlD,GAAAkJ,IAAAuuI,EAAA,GAAAA,EAAA,GAAAA,EAAA,IACAz3I,EAAAymD,IAAAkM,GACA3yD,EAAA6F,EAAA,EACA7F,EAAA8S,WAEA,IAAAgzC,GAAA9vC,KAAA8xC,MAAA9nD,EAAAiG,EAAAjG,EAAAuH,EACA4X,GAAA5J,SAAArM,IAAA,EAAA48C,EAAA,SAMM,YAAAnkD,EAKN,GAHAkP,EAAAy2C,WAAA+Z,MAAA+1E,EAAAC,EAAAH,EAAA1xF,GAGA,IAAAqtC,EAAA8jD,iBAEAx3H,EAAAkpC,WAAA5yC,KAAAyhI,GACArkD,EAAA8jD,iBAAA35I,KAAAs9E,WAEO,CAEP,GAAAg9D,GAAAt6I,KAAAs9E,QAAAt9E,KAAAs9E,OAAAuY,EAAA8jD,iBACA9lI,GAAAy2C,WAAA+Z,MAAAliD,EAAAkpC,WAAA6uF,EAAA/3H,EAAAkpC,WAAAivF,GACAzkD,EAAA8jD,kBAAA35I,KAAAs9E,WAIM,YAAA34E,EAAA,CAENs1I,EAAAhxI,EAAAmxI,EAAA,IAAAC,EAAA,GAAAD,EAAA,IAAA5xF,EACAyxF,EAAApxI,EAAAuxI,EAAA,IAAAC,EAAA,GAAAD,EAAA,IAAA5xF,EACAyxF,EAAA1vI,EAAA6vI,EAAA,IAAAC,EAAA,GAAAD,EAAA,IAAA5xF,CAEA,IAAA8xF,GAAAt6I,KAAAs9E,QAAAt9E,KAAAs9E,OAAAuY,EAAA+jD,YACAz3H,GAAAqmC,MAAA4P,KAAA6hF,EAAAK,GACAzkD,EAAA+jD,aAAA55I,KAAAs9E,QAQA,cAMA08D,eAAA,SAAAr1I,EAAAyD,EAAAjN,GAEA,GAAAuH,GAAA1C,KAAA+c,KAAA67H,UAAAxwI,GAAA1F,IAaA,KAXA1C,KAAAu5I,oBAAA1lI,EAAA2kI,iBAAAC,YACAz4I,KAAAu5I,oBAAA1lI,EAAA2kI,iBAAAE,mBAEAv9I,IAAAuH,EAAA5I,OAAA,EAAAqB,EAAAuH,EAAA5I,OAAA,EAIAqB,GAAAuH,EAAA5I,OAISqB,EAAAuH,EAAA5I,OAAmBqB,IAE5B,GAAApC,SAAA2J,EAAAvH,GAAAwJ,GAEA,MAAAjC,GAAAvH,EAMA,OAAA6E,MAAA+c,KAAA67H,UAAAxwI,GAAA1F,KAAA,IAIA63I,eAAA,SAAA51I,EAAAyD,EAAAjN,GAEA,GAAAuH,GAAA1C,KAAA+c,KAAA67H,UAAAxwI,GAAA1F,IAcA,KATAvH,EAHA6E,KAAAu5I,oBAAA1lI,EAAA2kI,iBAAAC,YACAz4I,KAAAu5I,oBAAA1lI,EAAA2kI,iBAAAE,mBAEAv9I,EAAA,EAAAA,EAAA,EAIAA,GAAA,EAAAA,IAAAuH,EAAA5I,OAKSqB,GAAA,EAAUA,IAEnB,GAAApC,SAAA2J,EAAAvH,GAAAwJ,GAEA,MAAAjC,GAAAvH,EAMA,OAAA6E,MAAA+c,KAAA67H,UAAAxwI,GAAA1F,OAAA5I,OAAA,KAgBA+Z,EAAA6mI,kBAAA,SAAA39H,GAEA/c,KAAAi5I,KAAAl8H,EAAAze,KACA0B,KAAA+c,KAAAlJ,EAAA2kI,iBAAAz9H,KAAAgC,GACA/c,KAAA44I,UAAA/kI,EAAA2kI,iBAAA37H,MAAA7c,KAAAi5I,MACAj5I,KAAA6lI,YAAA,EACA7lI,KAAAs5I,UAAA,KACAt5I,KAAAulI,aACAvlI,KAAA26I,YACA36I,KAAA2lI,OAIA,QAAAv9H,GAAA,EAAA6tI,EAAAj2I,KAAA44I,UAAA9+I,OAA6CsO,EAAA6tI,EAAQ7tI,IAAA,CAErD,GAAA1F,GAAA1C,KAAA+c,KAAA67H,UAAAxwI,GAAA1F,KACAk4I,EAAA56I,KAAA+c,KAAA67H,UAAAxwI,GAAAwyI,KACAljJ,EAAAsI,KAAA44I,UAAAxwI,EAEA,IAAA1F,EAAA5I,QAAA8gJ,EAAA,CAEA,OAAAv3I,GAAA,EAAmBA,EAAAu3I,EAAA9gJ,OAAiBuJ,IAAA,CAEpC,GAAAw3I,GAAAD,EAAAv3I,GACAhK,EAAA2G,KAAAg6I,eAAAa,EAAAzyI,EAAA,EAEA/O,IAEAA,EAAAuK,MAAAi3I,GAMAnjJ,EAAA6qF,oBACAviF,KAAA+c,KAAA67H,UAAAxwI,GAAA9J,KAAAoX,eACAhe,EAAA+qF,6BAQA5uE,EAAA6mI,kBAAAv+I,WAEAE,YAAAwX,EAAA6mI,kBAEAhV,KAAA,SAAAr/E,GAIA,GAFArmD,KAAA6lI,YAAA9sI,SAAAstD,IAAA,EAEArmD,KAAAulI,eAAA,CAEAvlI,KAAAulI,YAIA,IAAAn9H,GACA+Z,EACA7jB,EAFA23I,EAAAj2I,KAAA44I,UAAA9+I,MAIA,KAAAsO,EAAA,EAAeA,EAAA6tI,EAAQ7tI,IAAA,CAEvB+Z,EAAAniB,KAAA44I,UAAAxwI,GACA9J,EAAA0B,KAAA+c,KAAA67H,UAAAxwI,GAEArP,SAAAuF,EAAAm7I,iBAEAn7I,EAAAm7I,kBACAn7I,EAAAm7I,eAAAI,QAAA,KACAv7I,EAAAm7I,eAAAK,QAAA,KACAx7I,EAAAm7I,eAAAM,eAAA53H,EAAA8mC,OAIA,IAAAvmD,GAAA1C,KAAA+c,KAAA67H,UAAAxwI,GAAA1F,IAEAA,GAAA5I,SAEAwE,EAAAm7I,eAAAI,QAAAn3I,EAAA,GACApE,EAAAm7I,eAAAK,QAAAp3I,EAAA,GAEA1C,KAAAqmD,UAAArtC,KAAA02B,IAAAhtC,EAAA,GAAA85C,KAAAx8C,KAAAqmD,WACArmD,KAAA86I,QAAA9hI,KAAAZ,IAAA1V,IAAA5I,OAAA,GAAA0iD,KAAAx8C,KAAA86I,UAMA96I,KAAA+Z,OAAA,GAIA/Z,KAAA26I,YAEA9mI,EAAA2kI,iBAAA9S,KAAA1lI,OAIAogF,KAAA,WAEApgF,KAAAulI,aACAvlI,KAAA26I,YAEA9mI,EAAA2kI,iBAAAp4D,KAAApgF,KAIA,QAAAoI,GAAA,EAAkBA,EAAApI,KAAA+c,KAAA67H,UAAA9+I,OAAgCsO,IAAA,CAElD,GAAA1Q,GAAAsI,KAAA44I,UAAAxwI,GACA9J,EAAA0B,KAAA+c,KAAA67H,UAAAxwI,EAEA,IAAArP,SAAAuF,EAAAm7I,eAAA,CAEA,GAAAsB,GAAAz8I,EAAAm7I,eAAAM,cAEAgB,GAAAtiI,KAAA/gB,EAAAuxD,QACAvxD,EAAAuxD,OAAA8xF,QAEAz8I,GAAAm7I,kBAQA1/H,OAAA,SAAA2zC,GAEA,GAAA1tD,KAAAulI,eAAA,CAEAvlI,KAAA6lI,aAAAn4E,EAAA1tD,KAAAs5I,SAIA,IAAAhvC,GAAAtqG,KAAA+c,KAAAjjB,MAEAkG,MAAA2lI,WAAA3lI,KAAA6lI,YAAAv7B,IAEAtqG,KAAA6lI,aAAAv7B,GAIAtqG,KAAA6lI,YAAA7sH,KAAA02B,IAAA1vC,KAAA6lI,YAAAv7B,EAEA,QAAAliG,GAAA,EAAA6tI,EAAAj2I,KAAA44I,UAAA9+I,OAA8CsO,EAAA6tI,EAAQ7tI,IAAA,CAEtD,GAAA+Z,GAAAniB,KAAA44I,UAAAxwI,GACA9J,EAAA0B,KAAA+c,KAAA67H,UAAAxwI,GAEA1F,EAAApE,EAAAoE,KACA+2I,EAAAn7I,EAAAm7I,cAGA,IAAA/2I,EAAA5I,OAAA,CAEA,GAAA+/I,GAAAJ,EAAAI,QACAC,EAAAL,EAAAK,OAEA,IAAAA,EAAAt9F,MAAAx8C,KAAA6lI,YAAA,CAEA,KAAAiU,EAAAt9F,KAAAx8C,KAAA6lI,aAAAiU,EAAAloI,MAAAioI,EAAAjoI,OAEAioI,EAAAC,EACAA,EAAAp3I,EAAAm3I,EAAAjoI,MAAA,EAIA6nI,GAAAI,UACAJ,EAAAK,UAIAA,EAAAt9F,MAAAx8C,KAAA6lI,YAEAgU,EAAA38D,YAAA48D,EAAA95I,KAAA6lI,aAIAgU,EAAA38D,YAAA48D,IAAAt9F,MAIAx8C,KAAA+c,KAAA67H,UAAAxwI,GAAA9J,KAAAoX,eACAyM,EAAAsgE,8BAQAu3D,eAAA,SAAAa,EAAAzyI,EAAAjN,GAEA,GAAAuH,GAAA1C,KAAA+c,KAAA67H,UAAAxwI,GAAA1F,IAGA,KAFAvH,GAAAuH,EAAA5I,OAESqB,EAAAuH,EAAA5I,OAAmBqB,IAE5B,GAAAuH,EAAAvH,GAAA6/I,UAAAH,GAEA,MAAAn4I,GAAAvH,EAMA,OAAAuH,GAAA,IAIA63I,eAAA,SAAAM,EAAAzyI,EAAAjN,GAEA,GAAAuH,GAAA1C,KAAA+c,KAAA67H,UAAAxwI,GAAA1F,IAGA,KAFAvH,KAAA,EAAAA,IAAAuH,EAAA5I,OAESqB,GAAA,EAAUA,IAEnB,GAAAuH,EAAAvH,GAAA6/I,UAAAH,GAEA,MAAAn4I,GAAAvH,EAMA,OAAAuH,KAAA5I,OAAA,KAaA+Z,EAAAonI,eAAA,SAAAnjI,GAEA9X,KAAA8X,OACA9X,KAAAk7I,OAAApjI,EAAAwvF,sBAAAxtG,OACAkG,KAAA6lI,YAAA,EACA7lI,KAAAsqG,SAAA,IACAtqG,KAAA2lI,QACA3lI,KAAAm7I,UAAA,EACAn7I,KAAAo7I,aAAA,EAEAp7I,KAAAulI,cAIA1xH,EAAAonI,eAAA9+I,WAEAE,YAAAwX,EAAAonI,eAEAvV,KAAA,WAEA1lI,KAAAulI,cAIAK,MAAA,WAEA5lI,KAAAulI,cAIAxrH,OAAA,SAAA2zC,GAEA,GAAA1tD,KAAAulI,eAAA,CAEAvlI,KAAA6lI,aAAAn4E,EAEA1tD,KAAA2lI,WAAA3lI,KAAA6lI,YAAA7lI,KAAAsqG,WAEAtqG,KAAA6lI,aAAA7lI,KAAAsqG,UAIAtqG,KAAA6lI,YAAA7sH,KAAA02B,IAAA1vC,KAAA6lI,YAAA7lI,KAAAsqG,SAEA,IAAAmB,GAAAzrG,KAAAsqG,SAAAtqG,KAAAk7I,OACAG,EAAAriI,KAAA2tC,MAAA3mD,KAAA6lI,YAAAp6B,GAEAE,EAAA3rG,KAAA8X,KAAAwvF,qBAEA+zC,KAAAr7I,KAAAo7I,eAEAzvC,EAAA3rG,KAAAm7I,WAAA,EACAxvC,EAAA3rG,KAAAo7I,cAAA,EACAzvC,EAAA0vC,GAAA,EAEAr7I,KAAAm7I,UAAAn7I,KAAAo7I,aACAp7I,KAAAo7I,aAAAC,EAIA,IAAAzvC,GAAA5rG,KAAA6lI,YAAAp6B,GAEAE,GAAA0vC,GAAAzvC,EACAD,EAAA3rG,KAAAm7I,WAAA,EAAAvvC,KAaA/3F,EAAAuqF,YAAA,SAAA3uF,EAAAC,EAAAlS,EAAA0gG,EAAAC,EAAAE,GAgCA,QAAAi9C,GAAAnyI,EAAAH,EAAAuyI,EAAAC,EAAA/rI,EAAAC,EAAAlS,EAAA4nF,GAEA,GAAAz6E,GAAAu8D,EAAAC,EACAs0E,EAAAl/H,EAAA2hF,cACAw9C,EAAAn/H,EAAA4hF,eACAw9C,EAAAlsI,EAAA,EACAmsI,EAAAlsI,EAAA,EACA6O,EAAAhC,EAAAkC,SAAA3kB,MAEA,OAAAqP,GAAA,MAAAH,GAAA,MAAAG,GAAA,MAAAH,EAEA2B,EAAA,IAEG,MAAAxB,GAAA,MAAAH,GAAA,MAAAG,GAAA,MAAAH,GAEH2B,EAAA,IACA+wI,EAAAn/H,EAAA8hF,gBAEG,MAAAl1F,GAAA,MAAAH,GAAA,MAAAG,GAAA,MAAAH,KAEH2B,EAAA,IACA8wI,EAAAl/H,EAAA8hF,cAIA,IAAAw9C,GAAAJ,EAAA,EACAK,EAAAJ,EAAA,EACAK,EAAAtsI,EAAAgsI,EACAO,EAAAtsI,EAAAgsI,EACAp8H,EAAA,GAAAzL,GAAA8L,OAIA,KAFAL,EAAA3U,GAAAnN,EAAA,OAEA2pE,EAAA,EAAeA,EAAA20E,EAAa30E,IAE5B,IAAAD,EAAA,EAAgBA,EAAA20E,EAAa30E,IAAA,CAE7B,GAAAvR,GAAA,GAAA9hD,GAAA8L,OACAg2C,GAAAxsD,IAAA+9D,EAAA60E,EAAAJ,GAAAJ,EACA5lF,EAAA3sD,IAAAm+D,EAAA60E,EAAAJ,GAAAJ,EACA7lF,EAAAhrD,GAAAnN,EAEA+e,EAAAkC,SAAA/d,KAAAi1D,GAMA,IAAAwR,EAAA,EAAeA,EAAAu0E,EAAYv0E,IAE3B,IAAAD,EAAA,EAAgBA,EAAAu0E,EAAYv0E,IAAA,CAE5B,GAAAx+D,GAAAw+D,EAAA20E,EAAA10E,EACAp+D,EAAAm+D,EAAA20E,GAAA10E,EAAA,GACA5vE,EAAA2vE,EAAA,EAAA20E,GAAA10E,EAAA,GACA1+D,EAAAy+D,EAAA,EAAA20E,EAAA10E,EAEA80E,EAAA,GAAApoI,GAAA+6C,QAAAsY,EAAAu0E,EAAA,EAAAt0E,EAAAu0E,GACAQ,EAAA,GAAAroI,GAAA+6C,QAAAsY,EAAAu0E,EAAA,GAAAt0E,EAAA,GAAAu0E,GACAS,EAAA,GAAAtoI,GAAA+6C,SAAAsY,EAAA,GAAAu0E,EAAA,GAAAt0E,EAAA,GAAAu0E,GACAU,EAAA,GAAAvoI,GAAA+6C,SAAAsY,EAAA,GAAAu0E,EAAA,EAAAt0E,EAAAu0E,GAEA/8H,EAAA,GAAA9K,GAAA+L,MAAAlX,EAAA6V,EAAAxV,EAAAwV,EAAA9V,EAAA8V,EACAI,GAAAW,OAAA7G,KAAA6G,GACAX,EAAA0mE,cAAA3kF,KAAA4e,EAAAkqC,QAAAlqC,EAAAkqC,QAAAlqC,EAAAkqC,SACA7qC,EAAAymE,gBAEA7oE,EAAA4B,MAAAzd,KAAAie,GACApC,EAAA2rE,cAAA,GAAAxnF,MAAAu7I,EAAAC,EAAAE,IAEAz9H,EAAA,GAAA9K,GAAA+L,MAAA7W,EAAAwV,EAAAhnB,EAAAgnB,EAAA9V,EAAA8V,GACAI,EAAAW,OAAA7G,KAAA6G,GACAX,EAAA0mE,cAAA3kF,KAAA4e,EAAAkqC,QAAAlqC,EAAAkqC,QAAAlqC,EAAAkqC,SACA7qC,EAAAymE,gBAEA7oE,EAAA4B,MAAAzd,KAAAie,GACApC,EAAA2rE,cAAA,GAAAxnF,MAAAw7I,EAAA1yF,QAAA2yF,EAAAC,EAAA5yF,WA1GA31C,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,cAEA3E,KAAA2sF,YACAl9E,QACAC,SACAlS,QACA0gG,gBACAC,iBACAE,iBAGAr+F,KAAAk+F,iBAAA,EACAl+F,KAAAm+F,kBAAA,EACAn+F,KAAAq+F,iBAAA,CAEA,IAAA9hF,GAAAvc,KAEA27I,EAAAlsI,EAAA,EACAmsI,EAAAlsI,EAAA,EACA2sI,EAAA7+I,EAAA,CAEA89I,GAAA,cAAA99I,EAAAkS,EAAAisI,EAAA,GACAL,EAAA,aAAA99I,EAAAkS,GAAAisI,EAAA,GACAL,EAAA,YAAA7rI,EAAAjS,EAAAo+I,EAAA,GACAN,EAAA,aAAA7rI,EAAAjS,GAAAo+I,EAAA,GACAN,EAAA,aAAA7rI,EAAAC,EAAA2sI,EAAA,GACAf,EAAA,cAAA7rI,EAAAC,GAAA2sI,EAAA,GAsFAr8I,KAAA0rF,iBAIA73E,EAAAuqF,YAAAjiG,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAAuqF,YAAAjiG,UAAAE,YAAAwX,EAAAuqF,YAEAvqF,EAAAuqF,YAAAjiG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAAuqF,YACAp+F,KAAA2sF,WAAAl9E,MACAzP,KAAA2sF,WAAAj9E,OACA1P,KAAA2sF,WAAAnvF,MACAwC,KAAA2sF,WAAAuR,cACAl+F,KAAA2sF,WAAAwR,eACAn+F,KAAA2sF,WAAA0R,cAGA,OAAA9nF,IAIA1C,EAAAyoI,aAAAzoI,EAAAuqF,YAQAvqF,EAAA6qF,eAAA,SAAA1zC,EAAAuzC,EAAAC,EAAAC,GAEA5qF,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,iBAEA3E,KAAA2sF,YACA3hC,SACAuzC,WACAC,aACAC,eAGAzzC,KAAA,GACAuzC,EAAAxlG,SAAAwlG,EAAAvlF,KAAAZ,IAAA,EAAAmmF,GAAA,EAEAC,EAAAzlG,SAAAylG,IAAA,EACAC,EAAA1lG,SAAA0lG,IAAA,EAAAzlF,KAAA8uC,EAEA,IAAAjuD,GAAAsvF,KACA36B,EAAA,GAAA36C,GAAA8L,QAAA48H,EAAA,GAAA1oI,GAAA+6C,QAAA,MAKA,KAHA5uD,KAAAye,SAAA/d,KAAA8tD,GACA26B,EAAAzoF,KAAA67I,GAEA1iJ,EAAA,EAAaA,GAAA0kG,EAAe1kG,IAAA,CAE5B,GAAAmvF,GAAA,GAAAn1E,GAAA8L,QACA68H,EAAAh+C,EAAA3kG,EAAA0kG,EAAAE,CAEAzV,GAAA//E,EAAA+hD,EAAAhyC,KAAAkyC,IAAAsxF,GACAxzD,EAAAngF,EAAAmiD,EAAAhyC,KAAAiyC,IAAAuxF,GAEAx8I,KAAAye,SAAA/d,KAAAsoF,GACAG,EAAAzoF,KAAA,GAAAmT,GAAA+6C,SAAAo6B,EAAA//E,EAAA+hD,EAAA,MAAAg+B,EAAAngF,EAAAmiD,EAAA,OAIA,GAAA1oD,GAAA,GAAAuR,GAAA8L,QAAA,MAEA,KAAA9lB,EAAA,EAAaA,GAAA0kG,EAAe1kG,IAE5BmG,KAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAA/lB,IAAA,KAAAyI,EAAAknD,QAAAlnD,EAAAknD,QAAAlnD,EAAAknD,WACAxpD,KAAAkoF,cAAA,GAAAxnF,MAAAyoF,EAAAtvF,GAAA2vD,QAAA2/B,EAAAtvF,EAAA,GAAA2vD,QAAA+yF,EAAA/yF,SAIAxpD,MAAAkX,qBAEAlX,KAAAo6E,eAAA,GAAAvmE,GAAAo5D,OAAA,GAAAp5D,GAAA8L,QAAAqrC,IAIAn3C,EAAA6qF,eAAAviG,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAA6qF,eAAAviG,UAAAE,YAAAwX,EAAA6qF,eAEA7qF,EAAA6qF,eAAAviG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAA6qF,eACA1+F,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAA4R,SACAv+F,KAAA2sF,WAAA6R,WACAx+F,KAAA2sF,WAAA8R,YAGA,OAAAloF,IAUA1C,EAAAyqF,qBAAA,SAAAtzC,EAAAuzC,EAAAC,EAAAC,GAEA5qF,EAAA2K,eAAAnnB,KAAA2I,MAEAA,KAAA2E,KAAA,uBAEA3E,KAAA2sF,YACA3hC,SACAuzC,WACAC,aACAC,eAGAzzC,KAAA,GACAuzC,EAAAxlG,SAAAwlG,EAAAvlF,KAAAZ,IAAA,EAAAmmF,GAAA,EAEAC,EAAAzlG,SAAAylG,IAAA,EACAC,EAAA1lG,SAAA0lG,IAAA,EAAAzlF,KAAA8uC,EAEA,IAAArpC,GAAA8/E,EAAA,EAEAxxB,EAAA,GAAA3uD,cAAA,EAAAK,GACAC,EAAA,GAAAN,cAAA,EAAAK,GACA0qE,EAAA,GAAA/qE,cAAA,EAAAK,EAGAC,GAAA,KACAyqE,EAAA,MACAA,EAAA,KAEA,QAAA9lF,GAAA,EAAAxJ,EAAA,EAAAqsC,EAAA,EAAiC7iC,GAAAk7F,EAAel7F,IAAAxJ,GAAA,EAAAqsC,GAAA,GAEhD,GAAAs2G,GAAAh+C,EAAAn7F,EAAAk7F,EAAAE,CAEA1xB,GAAAlzE,GAAAmxD,EAAAhyC,KAAAkyC,IAAAsxF,GACAzvE,EAAAlzE,EAAA,GAAAmxD,EAAAhyC,KAAAiyC,IAAAuxF;AAEA99H,EAAA7kB,EAAA,KAEAsvF,EAAAjjD,IAAA6mC,EAAAlzE,GAAAmxD,EAAA,KACAm+B,EAAAjjD,EAAA,IAAA6mC,EAAAlzE,EAAA,GAAAmxD,EAAA,KAMA,OAFAi7B,MAEApsF,EAAA,EAAiBA,GAAA0kG,EAAe1kG,IAEhCosF,EAAAvlF,KAAA7G,GACAosF,EAAAvlF,KAAA7G,EAAA,GACAosF,EAAAvlF,KAAA,EAIAV,MAAAsuF,SAAA,GAAAz6E,GAAAwL,gBAAA,GAAA4nE,aAAAhB,GAAA,IACAjmF,KAAAof,aAAA,cAAAvL,GAAAwL,gBAAA0tD,EAAA,IACA/sE,KAAAof,aAAA,YAAAvL,GAAAwL,gBAAAX,EAAA,IACA1e,KAAAof,aAAA,QAAAvL,GAAAwL,gBAAA8pE,EAAA,IAEAnpF,KAAAo6E,eAAA,GAAAvmE,GAAAo5D,OAAA,GAAAp5D,GAAA8L,QAAAqrC,IAIAn3C,EAAAyqF,qBAAAniG,UAAA7B,OAAA8B,OAAAyX,EAAA2K,eAAAriB,WACA0X,EAAAyqF,qBAAAniG,UAAAE,YAAAwX,EAAAyqF,qBAEAzqF,EAAAyqF,qBAAAniG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAAyqF,qBACAt+F,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAA4R,SACAv+F,KAAA2sF,WAAA6R,WACAx+F,KAAA2sF,WAAA8R,YAKA,OAFAloF,GAAAkC,KAAAzY,MAEAuW,GAUA1C,EAAA8qF,iBAAA,SAAAC,EAAAC,EAAAnvF,EAAAovF,EAAAX,EAAAY,EAAAP,EAAAC,GAEA5qF,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,mBAEA3E,KAAA2sF,YACAiS,YACAC,eACAnvF,SACAovF,iBACAX,iBACAY,YACAP,aACAC,eAGAG,EAAA7lG,SAAA6lG,IAAA,GACAC,EAAA9lG,SAAA8lG,IAAA,GACAnvF,EAAA3W,SAAA2W,IAAA,IAEAovF,KAAA,EACAX,KAAA,EAEAY,EAAAhmG,SAAAgmG,KACAP,EAAAzlG,SAAAylG,IAAA,EACAC,EAAA1lG,SAAA0lG,IAAA,EAAAzlF,KAAA8uC,EAEA,IAEA7+C,GAAAJ,EAFA4zI,EAAA/sI,EAAA,EAEA+O,KAAA0qE,IAEA,KAAAtgF,EAAA,EAAaA,GAAAs1F,EAAqBt1F,IAAA,CAElC,GAAA6zI,MACAC,KAEA3zI,EAAAH,EAAAs1F,EACAnzC,EAAAhiD,GAAA61F,EAAAD,IAEA,KAAA31F,EAAA,EAAcA,GAAA61F,EAAqB71F,IAAA,CAEnC,GAAAE,GAAAF,EAAA61F,EAEA9V,EAAA,GAAAn1E,GAAA8L,OACAqpE,GAAA//E,EAAA+hD,EAAAhyC,KAAAiyC,IAAA9hD,EAAAs1F,EAAAD,GACAxV,EAAAngF,GAAAG,EAAA0G,EAAA+sI,EACAzzD,EAAAz+E,EAAAygD,EAAAhyC,KAAAkyC,IAAA/hD,EAAAs1F,EAAAD,GAEAx+F,KAAAye,SAAA/d,KAAAsoF,GAEA0zD,EAAAh8I,KAAAV,KAAAye,SAAA3kB,OAAA,GACA6iJ,EAAAj8I,KAAA,GAAAmT,GAAA+6C,QAAAzlD,EAAA,EAAAH,IAIAyV,EAAA/d,KAAAg8I,GACAvzD,EAAAzoF,KAAAi8I,GAIA,GACA/wI,GAAA8mC,EADAkqG,GAAA/9C,EAAAD,GAAAlvF,CAGA,KAAAzG,EAAA,EAAaA,EAAA61F,EAAoB71F,IAiBjC,IAfA,IAAA21F,GAEAhzF,EAAA5L,KAAAye,WAAA,GAAAxV,IAAAugD,QACA9W,EAAA1yC,KAAAye,WAAA,GAAAxV,EAAA,IAAAugD,UAIA59C,EAAA5L,KAAAye,WAAA,GAAAxV,IAAAugD,QACA9W,EAAA1yC,KAAAye,WAAA,GAAAxV,EAAA,IAAAugD,SAIA59C,EAAAk5D,KAAA9rD,KAAA+xC,KAAAn/C,EAAA3C,EAAA2C,EAAA3C,EAAA2C,EAAArB,EAAAqB,EAAArB,GAAAqyI,GAAA9mI,YACA48B,EAAAoyB,KAAA9rD,KAAA+xC,KAAArY,EAAAzpC,EAAAypC,EAAAzpC,EAAAypC,EAAAnoC,EAAAmoC,EAAAnoC,GAAAqyI,GAAA9mI,YAEAjN,EAAA,EAAcA,EAAAs1F,EAAoBt1F,IAAA,CAElC,GAAAu6D,GAAA3kD,EAAA5V,GAAAI,GACAk9D,EAAA1nD,EAAA5V,EAAA,GAAAI,GACAw0E,EAAAh/D,EAAA5V,EAAA,GAAAI,EAAA,GACA4zI,EAAAp+H,EAAA5V,GAAAI,EAAA,GAEA6zI,EAAAlxI,EAAA49C,QACAuzF,EAAAnxI,EAAA49C,QACAwzF,EAAAtqG,EAAA8W,QACAyzF,EAAAvqG,EAAA8W,QAEAm+C,EAAAxe,EAAAtgF,GAAAI,GAAAugD,QACA8/B,EAAAH,EAAAtgF,EAAA,GAAAI,GAAAugD,QACAo+C,EAAAze,EAAAtgF,EAAA,GAAAI,EAAA,GAAAugD,QACA0zF,EAAA/zD,EAAAtgF,GAAAI,EAAA,GAAAugD,OAEAxpD,MAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAwjD,EAAA+C,EAAA02E,GAAAC,EAAAC,EAAAE,KACAj9I,KAAAkoF,cAAA,GAAAxnF,MAAAinG,EAAAre,EAAA4zD,IAEAl9I,KAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAumD,EAAAsX,EAAAo/D,GAAAE,EAAAvzF,QAAAwzF,EAAAC,EAAAzzF,WACAxpD,KAAAkoF,cAAA,GAAAxnF,MAAA4oF,EAAA9/B,QAAAo+C,EAAAs1C,EAAA1zF,UAQA,GAAAu1C,QAAAH,EAAA,EAIA,IAFA5+F,KAAAye,SAAA/d,KAAA,GAAAmT,GAAA8L,QAAA,EAAA88H,EAAA,IAEAxzI,EAAA,EAAcA,EAAA61F,EAAoB71F,IAAA,CAElC,GAAAm6D,GAAA3kD,EAAA,GAAAxV,GACAk9D,EAAA1nD,EAAA,GAAAxV,EAAA,GACAw0E,EAAAz9E,KAAAye,SAAA3kB,OAAA,EAEAgjJ,EAAA,GAAAjpI,GAAA8L,QAAA,OACAo9H,EAAA,GAAAlpI,GAAA8L,QAAA,OACAq9H,EAAA,GAAAnpI,GAAA8L,QAAA,OAEAgoF,EAAAxe,EAAA,GAAAlgF,GAAAugD,QACA8/B,EAAAH,EAAA,GAAAlgF,EAAA,GAAAugD,QACAo+C,EAAA,GAAA/zF,GAAA+6C,QAAA06B,EAAArgF,EAAA,EAEAjJ,MAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAwjD,EAAA+C,EAAAsX,GAAAq/D,EAAAC,EAAAC,GAAAjkJ,OAAA,IACAiH,KAAAkoF,cAAA,GAAAxnF,MAAAinG,EAAAre,EAAAse,IAQA,GAAA7I,QAAAF,EAAA,EAIA,IAFA7+F,KAAAye,SAAA/d,KAAA,GAAAmT,GAAA8L,QAAA,GAAA88H,EAAA,IAEAxzI,EAAA,EAAcA,EAAA61F,EAAoB71F,IAAA,CAElC,GAAAm6D,GAAA3kD,EAAA0/E,GAAAl1F,EAAA,GACAk9D,EAAA1nD,EAAA0/E,GAAAl1F,GACAw0E,EAAAz9E,KAAAye,SAAA3kB,OAAA,EAEAgjJ,EAAA,GAAAjpI,GAAA8L,QAAA,QACAo9H,EAAA,GAAAlpI,GAAA8L,QAAA,QACAq9H,EAAA,GAAAnpI,GAAA8L,QAAA,QAEAgoF,EAAAxe,EAAAgV,GAAAl1F,EAAA,GAAAugD,QACA8/B,EAAAH,EAAAgV,GAAAl1F,GAAAugD,QACAo+C,EAAA,GAAA/zF,GAAA+6C,QAAA06B,EAAArgF,EAAA,EAEAjJ,MAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAwjD,EAAA+C,EAAAsX,GAAAq/D,EAAAC,EAAAC,GAAAjkJ,OAAA,IACAiH,KAAAkoF,cAAA,GAAAxnF,MAAAinG,EAAAre,EAAAse,IAMA5nG,KAAAkX,sBAIArD,EAAA8qF,iBAAAxiG,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAA8qF,iBAAAxiG,UAAAE,YAAAwX,EAAA8qF,iBAEA9qF,EAAA8qF,iBAAAxiG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAA8qF,iBACA3+F,KAAA2sF,WAAAiS,UACA5+F,KAAA2sF,WAAAkS,aACA7+F,KAAA2sF,WAAAj9E,OACA1P,KAAA2sF,WAAAmS,eACA9+F,KAAA2sF,WAAAwR,eACAn+F,KAAA2sF,WAAAoS,UACA/+F,KAAA2sF,WAAA6R,WACAx+F,KAAA2sF,WAAA8R,YAGA,OAAAloF,IAUA1C,EAAAspI,cAAA,SAAA5mI,EAAA6mI,GAEAvpI,EAAA2K,eAAAnnB,KAAA2I,MAEAo9I,EAAArkJ,SAAAqkJ,IAAA,CAEA,IAWAje,GAXAke,EAAArkI,KAAAkyC,IAAAr3C,EAAAmF,KAAAw7D,SAAA4oE,IAEAE,GAAA,KAAAjxD,KACAkxD,EAAA,SAAA70I,EAAAK,GAEA,MAAAL,GAAAK,GAIArG,GAAA,YAIA6T,aAAA1C,GAAA2K,gBAEA2gH,EAAA,GAAAtrH,GAAA6L,SACAy/G,EAAAj2C,mBAAA3yE,IAIA4oH,EAAA5oH,EAAAizC,QAIA21E,EAAAzzC,gBACAyzC,EAAAjoH,oBAKA,QAHAuH,GAAA0gH,EAAA1gH,SACAN,EAAAghH,EAAAhhH,MAEAtkB,EAAA,EAAAuP,EAAA+U,EAAArkB,OAAmCD,EAAAuP,EAAOvP,IAI1C,OAFA8kB,GAAAR,EAAAtkB,GAEAk0E,EAAA,EAAkBA,EAAA,EAAOA,IAAA,CAEzBuvE,EAAA,GAAA3+H,EAAAjc,EAAAqrE,IACAuvE,EAAA,GAAA3+H,EAAAjc,GAAAqrE,EAAA,OACAuvE,EAAA17D,KAAA27D,EAEA,IAAApiJ,GAAAmiJ,EAAAn3I,UAEApN,UAAAszF,EAAAlxF,GAEAkxF,EAAAlxF,IAAmBqiJ,MAAAF,EAAA,GAAAG,MAAAH,EAAA,GAAAI,MAAA7jJ,EAAA8jJ,MAAA5kJ,QAInBszF,EAAAlxF,GAAAwiJ,MAAA9jJ,EAQA,GAAAgkF,KAEA,QAAA1iF,KAAAkxF,GAAA,CAEA,GAAAjkF,GAAAikF,EAAAlxF,EAEA,IAAApC,SAAAqP,EAAAu1I,OAAAx/H,EAAA/V,EAAAs1I,OAAAp+H,OAAA8rC,IAAAjtC,EAAA/V,EAAAu1I,OAAAr+H,SAAA+9H,EAAA,CAEA,GAAAr0D,GAAAvqE,EAAArW,EAAAo1I,MACA3/D,GAAAn9E,KAAAsoF,EAAA//E,GACA40E,EAAAn9E,KAAAsoF,EAAAngF,GACAg1E,EAAAn9E,KAAAsoF,EAAAz+E,GAEAy+E,EAAAvqE,EAAArW,EAAAq1I,OACA5/D,EAAAn9E,KAAAsoF,EAAA//E,GACA40E,EAAAn9E,KAAAsoF,EAAAngF,GACAg1E,EAAAn9E,KAAAsoF,EAAAz+E,IAMAvK,KAAAof,aAAA,cAAAvL,GAAAwL,gBAAA,GAAAjB,cAAAy/D,GAAA,KAIAhqE,EAAAspI,cAAAhhJ,UAAA7B,OAAA8B,OAAAyX,EAAA2K,eAAAriB,WACA0X,EAAAspI,cAAAhhJ,UAAAE,YAAAwX,EAAAspI,cA4BAtpI,EAAAg9H,gBAAA,SAAA9N,EAAAllI,GAEA,yBAAAiD,QAEAiiI,OAKAlvH,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,kBAEAo+H,EAAAppI,MAAAC,QAAAmpI,SAEA/iI,KAAA49I,aAAA7a,EAAAllI,OAEAmC,MAAAkX,uBAYArD,EAAAg9H,gBAAA10I,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAAg9H,gBAAA10I,UAAAE,YAAAwX,EAAAg9H,gBAEAh9H,EAAAg9H,gBAAA10I,UAAAyhJ,aAAA,SAAA7a,EAAAllI,GAIA,OAFAkhF,GAAAgkD,EAAAjpI,OAEAuJ,EAAA,EAAiBA,EAAA07E,EAAQ17E,IAAA,CAEzB,GAAAof,GAAAsgH,EAAA1/H,EACArD,MAAA69I,SAAAp7H,EAAA5kB,KAMAgW,EAAAg9H,gBAAA10I,UAAA0hJ,SAAA,SAAAp7H,EAAA5kB,GAyGA,QAAAigJ,GAAAC,EAAAxV,EAAAv/F,GAIA,MAFAu/F,IAAA/kI,QAAAC,MAAA,6CAEA8kI,EAAA/+E,QAAAL,eAAAngB,GAAAjzB,IAAAgoI,GAYA,QAAAC,GAAApP,EAAAqP,EAAAC,GAEA,GASAC,GAAAC,EATAlb,EAAA,MASAmb,EAAA,EAKAC,EAAA1P,EAAA3lI,EAAAg1I,EAAAh1I,EAAAs1I,EAAA3P,EAAA/lI,EAAAo1I,EAAAp1I,EACA21I,EAAAN,EAAAj1I,EAAA2lI,EAAA3lI,EAAAw1I,EAAAP,EAAAr1I,EAAA+lI,EAAA/lI,EAEA61I,EAAAJ,IAAAC,IAGAI,EAAAL,EAAAG,EAAAF,EAAAC,CAEA,IAAAxlI,KAAAuqD,IAAAo7E,GAAAzb,EAAA,CAMA,GAAA0b,GAAA5lI,KAAA+xC,KAAA2zF,GACAG,EAAA7lI,KAAA+xC,KAAAyzF,IAAAC,KAIAK,EAAAb,EAAAh1I,EAAAs1I,EAAAK,EACAG,EAAAd,EAAAp1I,EAAAy1I,EAAAM,EAEAI,EAAAd,EAAAj1I,EAAAw1I,EAAAI,EACAI,EAAAf,EAAAr1I,EAAA21I,EAAAK,EAIA/lH,IAAAkmH,EAAAF,GAAAL,GACAQ,EAAAF,GAAAP,IACAF,EAAAG,EAAAF,EAAAC,EAIAL,GAAAW,EAAAR,EAAAxlH,EAAA81G,EAAA3lI,EACAm1I,EAAAW,EAAAR,EAAAzlH,EAAA81G,EAAA/lI,CAIA,IAAAq2I,GAAAf,IAAAC,GACA,IAAAc,GAAA,EAEA,UAAArrI,GAAA+6C,QAAAuvF,EAAAC,EAIAC,GAAArlI,KAAA+xC,KAAAm0F,EAAA,OAIG,CAIH,GAAAC,KACAb,GAAApb,EAEAsb,EAAAtb,IAEAic,MAMAb,GAAApb,EAEAsb,GAAAtb,IAEAic,MAMAnmI,KAAA6H,KAAA09H,KAAAvlI,KAAA6H,KAAA49H,KAEAU,MAQAA,GAGAhB,GAAAI,EACAH,EAAAE,EACAD,EAAArlI,KAAA+xC,KAAA2zF,KAKAP,EAAAG,EACAF,EAAAG,EACAF,EAAArlI,KAAA+xC,KAAA2zF,EAAA,IAMA,UAAA7qI,GAAA+6C,QAAAuvF,EAAAE,EAAAD,EAAAC,GA4MA,QAAAe,KAEA,GAAAC,EAAA,CAEA,GAAAC,GAAA,EACA/gI,EAAAytH,EAAAsT,CAIA,KAAAzlJ,EAAA,EAAeA,EAAA0lJ,EAAU1lJ,IAEzB8kB,EAAAR,EAAAtkB,GACA2lJ,EAAA7gI,EAAA,GAAAJ,EAAAI,EAAA,GAAAJ,EAAAI,EAAA,GAAAJ,EASA,KALA+gI,EAAAG,EAAA,EAAAC,EACAnhI,EAAAytH,EAAAsT,EAIAzlJ,EAAA,EAAeA,EAAA0lJ,EAAU1lJ,IAEzB8kB,EAAAR,EAAAtkB,GACA2lJ,EAAA7gI,EAAA,GAAAJ,EAAAI,EAAA,GAAAJ,EAAAI,EAAA,GAAAJ,OAIG,CAIH,IAAA1kB,EAAA,EAAeA,EAAA0lJ,EAAU1lJ,IAEzB8kB,EAAAR,EAAAtkB,GACA2lJ,EAAA7gI,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAMA,KAAA9kB,EAAA,EAAeA,EAAA0lJ,EAAU1lJ,IAEzB8kB,EAAAR,EAAAtkB,GACA2lJ,EAAA7gI,EAAA,GAAAqtH,EAAAyT,EAAA9gI,EAAA,GAAAqtH,EAAAyT,EAAA9gI,EAAA,GAAAqtH,EAAAyT,IAUA,QAAAE,KAEA,GAAAC,GAAA,CAIA,KAHAC,EAAAzc,EAAAwc,GACAA,GAAAxc,EAAAtpI,OAEAsO,EAAA,EAAA6tI,EAAAvF,EAAA52I,OAAiCsO,EAAA6tI,EAAQ7tI,IAEzC03I,EAAApP,EAAAtoI,GACAy3I,EAAAC,EAAAF,GAGAA,GAAAE,EAAAhmJ,OAMA,QAAA+lJ,GAAAzc,EAAAwc,GAEA,GAAA7xE,GAAAtnE,CAGA,KAFA5M,EAAAupI,EAAAtpI,SAEAD,GAAA,IAEAk0E,EAAAl0E,EACA4M,EAAA5M,EAAA,EACA4M,EAAA,IAAAA,EAAA28H,EAAAtpI,OAAA,EAIA,IAAAuJ,GAAA,EAAA07E,EAAA0gE,EAAA,EAAAC,CAEA,KAAAr8I,EAAA,EAAeA,EAAA07E,EAAQ17E,IAAA,CAEvB,GAAA08I,GAAA/T,EAAA3oI,EACA28I,EAAAhU,GAAA3oI,EAAA,GAEAqF,EAAAk3I,EAAA7xE,EAAAgyE,EACAh3I,EAAA62I,EAAAn5I,EAAAs5I,EACAxoJ,EAAAqoJ,EAAAn5I,EAAAu5I,EACAv3I,EAAAm3I,EAAA7xE,EAAAiyE,CAEAC,GAAAv3I,EAAAK,EAAAxR,EAAAkR,EAAA26H,EAAA//H,EAAA07E,EAAAhR,EAAAtnE,KASA,QAAAuC,GAAAC,EAAAJ,EAAA0B,GAEAgS,EAAAkC,SAAA/d,KAAA,GAAAmT,GAAA8L,QAAA1W,EAAAJ,EAAA0B,IAIA,QAAAi1I,GAAA92I,EAAAK,EAAAxR,GAEAmR,GAAAw3I,EACAn3I,GAAAm3I,EACA3oJ,GAAA2oJ,EAEA3jI,EAAA4B,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAlX,EAAAK,EAAAxR,GAEA,IAAA4xF,GAAAg3D,EAAAC,cAAA7jI,EAAA7T,EAAAK,EAAAxR,EAEAglB,GAAA2rE,cAAA,GAAAxnF,KAAAyoF,GAIA,QAAA82D,GAAAv3I,EAAAK,EAAAxR,EAAAkR,EAAA43I,EAAAC,EAAAC,EAAAC,EAAAC,GAEA/3I,GAAAw3I,EACAn3I,GAAAm3I,EACA3oJ,GAAA2oJ,EACAz3I,GAAAy3I,EAEA3jI,EAAA4B,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAlX,EAAAK,EAAAN,IACA8T,EAAA4B,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAA7W,EAAAxR,EAAAkR,GAEA,IAAA0gF,GAAAg3D,EAAAO,mBAAAnkI,EAAA7T,EAAAK,EAAAxR,EAAAkR,EAEA8T,GAAA2rE,cAAA,GAAAxnF,MAAAyoF,EAAA,GAAAA,EAAA,GAAAA,EAAA,KACA5sE,EAAA2rE,cAAA,GAAAxnF,MAAAyoF,EAAA,GAAAA,EAAA,GAAAA,EAAA,KApkBA,GAaAw3D,GAKAC,EAAAC,EAAAvhI,EAAAwhI,EAlBAC,EAAAhoJ,SAAA8E,EAAAkjJ,OAAAljJ,EAAAkjJ,OAAA,IAEAC,EAAAjoJ,SAAA8E,EAAAmjJ,eAAAnjJ,EAAAmjJ,eAAA,EACAC,EAAAloJ,SAAA8E,EAAAojJ,UAAApjJ,EAAAojJ,UAAAD,EAAA,EACAtB,EAAA3mJ,SAAA8E,EAAA6hJ,cAAA7hJ,EAAA6hJ,cAAA,EAEAL,EAAAtmJ,SAAA8E,EAAAwhJ,cAAAxhJ,EAAAwhJ,aAEAxc,EAAA9pI,SAAA8E,EAAAglI,cAAAhlI,EAAAglI,cAAA,GAEA4c,EAAA1mJ,SAAA8E,EAAA4hJ,MAAA5hJ,EAAA4hJ,MAAA,EAEAyB,EAAArjJ,EAAAqjJ,YACAC,KAGAhB,EAAApnJ,SAAA8E,EAAAujJ,YAAAvjJ,EAAAujJ,YAAAvtI,EAAAg9H,gBAAAwQ,gBAGAH,KAEAP,EAAAO,EAAA5Z,gBAAAmY,GAEA0B,KACA9B,KAOAuB,EAAA7nJ,SAAA8E,EAAAq9I,OAAAr9I,EAAAq9I,OAAA,GAAArnI,GAAAytI,aAAAC,aAAAL,EAAAzB,MAIAoB,EAAA,GAAAhtI,GAAA8L,QACAL,EAAA,GAAAzL,GAAA8L,QACAmhI,EAAA,GAAAjtI,GAAA8L,SAMA0/H,IAEAK,EAAA,EACAsB,EAAA,EACAC,EAAA,EAMA,IAAAnB,GAAA13I,EAAA6tI,EACA15H,EAAAvc,KAEAkgJ,EAAAlgJ,KAAAye,SAAA3kB,OAEA0nJ,EAAA/+H,EAAA2uH,cAAAvO,GAEApkH,EAAA+iI,EAAA/+H,MACAiuH,EAAA8Q,EAAA9Q,MAEA/vH,GAAA9M,EAAA2uH,MAAAC,MAAA8M,YAAA9wH,EAEA,IAAAkC,EAAA,CAMA,IAJAlC,IAAAkC,UAIAvY,EAAA,EAAA6tI,EAAAvF,EAAA52I,OAAiCsO,EAAA6tI,EAAQ7tI,IAEzC03I,EAAApP,EAAAtoI,GAEAyL,EAAA2uH,MAAAC,MAAA8M,YAAAuQ,KAEApP,EAAAtoI,GAAA03I,EAAAn/H,UAMAA,MAKA,GAAAxC,GAAAtK,EAAA2uH,MAAAC,MAAA6O,iBAAA7yH,EAAAiyH,GAIAtN,EAAA3kH,CAEA,KAAArW,EAAA,EAAA6tI,EAAAvF,EAAA52I,OAAgCsO,EAAA6tI,EAAQ7tI,IAExC03I,EAAApP,EAAAtoI,GAEAqW,IAAA2mB,OAAA06G,EAkJA,QArIA/2I,GAAA04I,EAAAl4I,EAAAgB,EACAm3I,EACA/iI,EADAqtH,EAAAvtH,EAAA3kB,OACAylJ,EAAAphI,EAAArkB,OAiIA6nJ,KAEA9nJ,EAAA,EAAA2xE,EAAA43D,EAAAtpI,OAAAi0E,EAAAvC,EAAA,EAAA/kE,EAAA5M,EAAA,EAA6DA,EAAA2xE,EAAQ3xE,IAAAk0E,IAAAtnE,IAErEsnE,IAAAvC,IAAAuC,EAAA,GACAtnE,IAAA+kE,IAAA/kE,EAAA,GAKAk7I,EAAA9nJ,GAAAmkJ,EAAA5a,EAAAvpI,GAAAupI,EAAAr1D,GAAAq1D,EAAA38H,GAIA,IAAAm7I,GAAAC,KAAAC,EAAAH,EAAAv8G,QAEA,KAAAh9B,EAAA,EAAA6tI,EAAAvF,EAAA52I,OAAgCsO,EAAA6tI,EAAQ7tI,IAAA,CAMxC,IAJA03I,EAAApP,EAAAtoI,GAEAw5I,KAEA/nJ,EAAA,EAAA2xE,EAAAs0E,EAAAhmJ,OAAAi0E,EAAAvC,EAAA,EAAA/kE,EAAA5M,EAAA,EAAwDA,EAAA2xE,EAAQ3xE,IAAAk0E,IAAAtnE,IAEhEsnE,IAAAvC,IAAAuC,EAAA,GACAtnE,IAAA+kE,IAAA/kE,EAAA,GAGAm7I,EAAA/nJ,GAAAmkJ,EAAA8B,EAAAjmJ,GAAAimJ,EAAA/xE,GAAA+xE,EAAAr5I,GAIAo7I,GAAAnhJ,KAAAkhJ,GACAE,IAAA18G,OAAAw8G,GAOA,IAAA74I,EAAA,EAAaA,EAAA22I,EAAmB32I,IAAA,CAahC,IATAQ,EAAAR,EAAA22I,EACAn1I,EAAAy2I,GAAA,EAAAz3I,GAGAk4I,EAAAR,EAAAjoI,KAAAiyC,IAAA1hD,EAAAyP,KAAA8uC,GAAA,GAKAjuD,EAAA,EAAA2xE,EAAA43D,EAAAtpI,OAAmCD,EAAA2xE,EAAQ3xE,IAE3C6nJ,EAAA5D,EAAA1a,EAAAvpI,GAAA8nJ,EAAA9nJ,GAAA4nJ,GAEAz4I,EAAA04I,EAAAz4I,EAAAy4I,EAAA74I,GAAA0B,EAMA,KAAAnC,EAAA,EAAA6tI,EAAAvF,EAAA52I,OAAiCsO,EAAA6tI,EAAQ7tI,IAKzC,IAHA03I,EAAApP,EAAAtoI,GACAw5I,EAAAC,EAAAz5I,GAEAvO,EAAA,EAAA2xE,EAAAs0E,EAAAhmJ,OAAkCD,EAAA2xE,EAAQ3xE,IAE1C6nJ,EAAA5D,EAAAgC,EAAAjmJ,GAAA+nJ,EAAA/nJ,GAAA4nJ,GAEAz4I,EAAA04I,EAAAz4I,EAAAy4I,EAAA74I,GAAA0B,GAYA,IAJAk3I,EAAAR,EAIApnJ,EAAA,EAAaA,EAAAmyI,EAAUnyI,IAEvB6nJ,EAAArC,EAAAvB,EAAAr/H,EAAA5kB,GAAAioJ,EAAAjoJ,GAAA4nJ,GAAAhjI,EAAA5kB,GAEAsnJ,GAQA7hI,EAAA7G,KAAAmoI,EAAAliI,QAAA,IAAAyqC,eAAAu4F,EAAAz4I,GACA43I,EAAApoI,KAAAmoI,EAAAmB,UAAA,IAAA54F,eAAAu4F,EAAA74I,GAEAi4I,EAAAroI,KAAAkoI,EAAA,IAAA5qI,IAAAuJ,GAAAvJ,IAAA8qI,GAEA73I,EAAA83I,EAAA73I,EAAA63I,EAAAj4I,EAAAi4I,EAAAv2I,IAXAvB,EAAA04I,EAAAz4I,EAAAy4I,EAAA74I,EAAA,EAoBA,IAAAxF,EAEA,KAAAA,EAAA,EAAaA,GAAAo8I,EAAYp8I,IAEzB,IAAAxJ,EAAA,EAAcA,EAAAmyI,EAAUnyI,IAExB6nJ,EAAArC,EAAAvB,EAAAr/H,EAAA5kB,GAAAioJ,EAAAjoJ,GAAA4nJ,GAAAhjI,EAAA5kB,GAEAsnJ,GAQA7hI,EAAA7G,KAAAmoI,EAAAliI,QAAArb,IAAA8lD,eAAAu4F,EAAAz4I,GACA43I,EAAApoI,KAAAmoI,EAAAmB,UAAA1+I,IAAA8lD,eAAAu4F,EAAA74I,GAEAi4I,EAAAroI,KAAAkoI,EAAAt9I,IAAA0S,IAAAuJ,GAAAvJ,IAAA8qI,GAEA73I,EAAA83I,EAAA73I,EAAA63I,EAAAj4I,EAAAi4I,EAAAv2I,IAXAvB,EAAA04I,EAAAz4I,EAAAy4I,EAAA74I,EAAAk4I,EAAAtB,EAAAp8I,EAuBA,KAAA0F,EAAA22I,EAAA,EAA6B32I,GAAA,EAAQA,IAAA,CASrC,IAPAQ,EAAAR,EAAA22I,EACAn1I,EAAAy2I,GAAA,EAAAz3I,GAEAk4I,EAAAR,EAAAjoI,KAAAiyC,IAAA1hD,EAAAyP,KAAA8uC,GAAA,GAIAjuD,EAAA,EAAA2xE,EAAA43D,EAAAtpI,OAAmCD,EAAA2xE,EAAQ3xE,IAE3C6nJ,EAAA5D,EAAA1a,EAAAvpI,GAAA8nJ,EAAA9nJ,GAAA4nJ,GACAz4I,EAAA04I,EAAAz4I,EAAAy4I,EAAA74I,EAAAk4I,EAAAx2I,EAMA,KAAAnC,EAAA,EAAA6tI,EAAAvF,EAAA52I,OAAiCsO,EAAA6tI,EAAQ7tI,IAKzC,IAHA03I,EAAApP,EAAAtoI,GACAw5I,EAAAC,EAAAz5I,GAEAvO,EAAA,EAAA2xE,EAAAs0E,EAAAhmJ,OAAkCD,EAAA2xE,EAAQ3xE,IAE1C6nJ,EAAA5D,EAAAgC,EAAAjmJ,GAAA+nJ,EAAA/nJ,GAAA4nJ,GAEAN,EAMAn4I,EAAA04I,EAAAz4I,EAAAy4I,EAAA74I,EAAA83I,EAAAlB,EAAA,GAAA52I,EAAA83I,EAAAlB,EAAA,GAAAx2I,EAAAsB,GAJAvB,EAAA04I,EAAAz4I,EAAAy4I,EAAA74I,EAAAk4I,EAAAx2I,GAkBA60I,IAIAO,KAsJA9rI,EAAAg9H,gBAAAwQ,kBAEAjB,cAAA,SAAA7pI,EAAAyrI,EAAAC,EAAAC,GAEA,GAAAzjI,GAAAlI,EAAAkI,SAEA/V,EAAA+V,EAAAujI,GACAj5I,EAAA0V,EAAAwjI,GACA1qJ,EAAAknB,EAAAyjI,EAEA,QACA,GAAAruI,GAAA+6C,QAAAlmD,EAAAO,EAAAP,EAAAG,GACA,GAAAgL,GAAA+6C,QAAA7lD,EAAAE,EAAAF,EAAAF,GACA,GAAAgL,GAAA+6C,QAAAr3D,EAAA0R,EAAA1R,EAAAsR,KAKA63I,mBAAA,SAAAnqI,EAAAyrI,EAAAC,EAAAC,EAAAC,GAEA,GAAA1jI,GAAAlI,EAAAkI,SAEA/V,EAAA+V,EAAAujI,GACAj5I,EAAA0V,EAAAwjI,GACA1qJ,EAAAknB,EAAAyjI,GACAz5I,EAAAgW,EAAA0jI,EAEA,OAAAnpI,MAAAuqD,IAAA76D,EAAAG,EAAAE,EAAAF,GAAA,KAGA,GAAAgL,GAAA+6C,QAAAlmD,EAAAO,EAAA,EAAAP,EAAA6B,GACA,GAAAsJ,GAAA+6C,QAAA7lD,EAAAE,EAAA,EAAAF,EAAAwB,GACA,GAAAsJ,GAAA+6C,QAAAr3D,EAAA0R,EAAA,EAAA1R,EAAAgT,GACA,GAAAsJ,GAAA+6C,QAAAnmD,EAAAQ,EAAA,EAAAR,EAAA8B,KAMA,GAAAsJ,GAAA+6C,QAAAlmD,EAAAG,EAAA,EAAAH,EAAA6B,GACA,GAAAsJ,GAAA+6C,QAAA7lD,EAAAF,EAAA,EAAAE,EAAAwB,GACA,GAAAsJ,GAAA+6C,QAAAr3D,EAAAsR,EAAA,EAAAtR,EAAAgT,GACA,GAAAsJ,GAAA+6C,QAAAnmD,EAAAI,EAAA,EAAAJ,EAAA8B,MA0BAsJ,EAAAk9H,cAAA,SAAAhO,EAAAllI,GAEAgW,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,gBAEAhL,MAAAC,QAAAmpI,iBAEA/iI,KAAA49I,aAAA7a,EAAAllI,GAEAmC,KAAAkX,sBAIArD,EAAAk9H,cAAA50I,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAAk9H,cAAA50I,UAAAE,YAAAwX,EAAAk9H,cAKAl9H,EAAAk9H,cAAA50I,UAAAyhJ,aAAA,SAAA7a,EAAAllI,GAEA,OAAAhE,GAAA,EAAAuP,EAAA25H,EAAAjpI,OAAoCD,EAAAuP,EAAOvP,IAE3CmG,KAAA69I,SAAA9a,EAAAlpI,GAAAgE,EAIA,OAAAmC,OAOA6T,EAAAk9H,cAAA50I,UAAA0hJ,SAAA,SAAAp7H,EAAA5kB,GAEA9E,SAAA8E,SACA,IAOAhE,GAAAuP,EAAAonI,EAPA3N,EAAA9pI,SAAA8E,EAAAglI,cAAAhlI,EAAAglI,cAAA,GAEAptH,EAAA5X,EAAA4X,SACA0qI,EAAApnJ,SAAA8E,EAAAujJ,YAAAvtI,EAAAg9H,gBAAAwQ,iBAAAxjJ,EAAAujJ,YAMAlB,EAAAlgJ,KAAAye,SAAA3kB,OACA0nJ,EAAA/+H,EAAA2uH,cAAAvO,GAEApkH,EAAA+iI,EAAA/+H,MACAiuH,EAAA8Q,EAAA9Q,MAEA/vH,GAAA9M,EAAA2uH,MAAAC,MAAA8M,YAAA9wH,EAEA,IAAAkC,EAAA,CAMA,IAJAlC,IAAAkC,UAIA9mB,EAAA,EAAAuP,EAAAsnI,EAAA52I,OAAgCD,EAAAuP,EAAOvP,IAEvC22I,EAAAE,EAAA72I,GAEAga,EAAA2uH,MAAAC,MAAA8M,YAAAiB,KAEAE,EAAA72I,GAAA22I,EAAA7vH,UAMAA,MAIA,GAAAxC,GAAAtK,EAAA2uH,MAAAC,MAAA6O,iBAAA7yH,EAAAiyH,EAIA,KAAA72I,EAAA,EAAAuP,EAAAsnI,EAAA52I,OAA+BD,EAAAuP,EAAOvP,IAEtC22I,EAAAE,EAAA72I,GACA4kB,IAAA2mB,OAAAorG,EAMA,IAAAkR,GACA/iI,EADAqtH,EAAAvtH,EAAA3kB,OACAylJ,EAAAphI,EAAArkB,MAEA,KAAAD,EAAA,EAAaA,EAAAmyI,EAAUnyI,IAEvB6nJ,EAAAjjI,EAAA5kB,GAEAmG,KAAAye,SAAA/d,KAAA,GAAAmT,GAAA8L,QAAA+hI,EAAAz4I,EAAAy4I,EAAA74I,EAAA,GAIA,KAAAhP,EAAA,EAAaA,EAAA0lJ,EAAU1lJ,IAAA,CAEvB8kB,EAAAR,EAAAtkB,EAEA,IAAA6O,GAAAiW,EAAA,GAAAuhI,EACAn3I,EAAA4V,EAAA,GAAAuhI,EACA3oJ,EAAAonB,EAAA,GAAAuhI,CAEAlgJ,MAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAlX,EAAAK,EAAAxR,EAAA,UAAAke,IACAzV,KAAAkoF,cAAA,GAAAxnF,KAAAy/I,EAAAC,cAAApgJ,KAAA0I,EAAAK,EAAAxR,MAqBAsc,EAAAuuI,cAAA,SAAA92E,EAAAizB,EAAAU,EAAAC,GAEArrF,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,gBAEA3E,KAAA2sF,YACArhB,SACAizB,WACAU,WACAC,aAGAX,KAAA,GACAU,KAAA,EACAC,KAAA,EAAAlmF,KAAA8uC,EAKA,QAHAu6F,GAAA,GAAA/2E,EAAAxxE,OAAA,GACAwoJ,EAAA,EAAA/jD,EAEA1kG,EAAA,EAAA2xE,EAAA+yB,EAAgC1kG,GAAA2xE,EAAS3xE,IAOzC,OALAuuD,GAAA62C,EAAAplG,EAAAyoJ,EAAApjD,EAEA3nG,EAAAyhB,KAAAkyC,IAAA9C,GACA/kD,EAAA2V,KAAAiyC,IAAA7C,GAEA2lB,EAAA,EAAAkb,EAAA3d,EAAAxxE,OAAsCi0E,EAAAkb,EAAQlb,IAAA,CAE9C,GAAAgwE,GAAAzyE,EAAAyC,GAEAib,EAAA,GAAAn1E,GAAA8L,OAEAqpE,GAAA//E,EAAA1R,EAAAwmJ,EAAA90I,EAAA5F,EAAA06I,EAAAl1I,EACAmgF,EAAAngF,EAAAxF,EAAA06I,EAAA90I,EAAA1R,EAAAwmJ,EAAAl1I,EACAmgF,EAAAz+E,EAAAwzI,EAAAxzI,EAEAvK,KAAAye,SAAA/d,KAAAsoF,GAQA,OAFAu5D,GAAAj3E,EAAAxxE,OAEAD,EAAA,EAAA2xE,EAAA+yB,EAAgC1kG,EAAA2xE,EAAQ3xE,IAExC,OAAAk0E,GAAA,EAAAkb,EAAA3d,EAAAxxE,OAAA,EAA0Ci0E,EAAAkb,EAAQlb,IAAA,CAElD,GAAA36B,GAAA26B,EAAAw0E,EAAA1oJ,EACA6O,EAAA0qC,EACArqC,EAAAqqC,EAAAmvG,EACAhrJ,EAAA67C,EAAA,EAAAmvG,EACA95I,EAAA2qC,EAAA,EAEAovG,EAAA3oJ,EAAAyoJ,EACAjtE,EAAAtH,EAAAs0E,EACAI,EAAAD,EAAAF,EACAl/E,EAAAiS,EAAAgtE,CAEAriJ,MAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAlX,EAAAK,EAAAN,IAEAzI,KAAAkoF,cAAA,GAAAxnF,MAEA,GAAAmT,GAAA+6C,QAAA4zF,EAAAntE,GACA,GAAAxhE,GAAA+6C,QAAA6zF,EAAAptE,GACA,GAAAxhE,GAAA+6C,QAAA4zF,EAAAp/E,KAIApjE,KAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAA7W,EAAAxR,EAAAkR,IAEAzI,KAAAkoF,cAAA,GAAAxnF,MAEA,GAAAmT,GAAA+6C,QAAA6zF,EAAAptE,GACA,GAAAxhE,GAAA+6C,QAAA6zF,EAAAr/E,GACA,GAAAvvD,GAAA+6C,QAAA4zF,EAAAp/E,KASApjE,KAAA0rF,gBACA1rF,KAAAkX,qBACAlX,KAAAmX,wBAIAtD,EAAAuuI,cAAAjmJ,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAAuuI,cAAAjmJ,UAAAE,YAAAwX,EAAAuuI,cASAvuI,EAAA6uI,cAAA,SAAAjzI,EAAAC,EAAAwuF,EAAAC,GAEAtqF,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,gBAEA3E,KAAA2sF,YACAl9E,QACAC,SACAwuF,gBACAC,kBAGAn+F,KAAAkpF,mBAAA,GAAAr1E,GAAA8uI,oBAAAlzI,EAAAC,EAAAwuF,EAAAC,KAIAtqF,EAAA6uI,cAAAvmJ,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAA6uI,cAAAvmJ,UAAAE,YAAAwX,EAAA6uI,cAEA7uI,EAAA6uI,cAAAvmJ,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAA6uI,cACA1iJ,KAAA2sF,WAAAl9E,MACAzP,KAAA2sF,WAAAj9E,OACA1P,KAAA2sF,WAAAuR,cACAl+F,KAAA2sF,WAAAwR,eAGA,OAAA5nF,IAWA1C,EAAA8uI,oBAAA,SAAAlzI,EAAAC,EAAAwuF,EAAAC,GAEAtqF,EAAA2K,eAAAnnB,KAAA2I,MAEAA,KAAA2E,KAAA,sBAEA3E,KAAA2sF,YACAl9E,QACAC,SACAwuF,gBACAC,iBAsBA,QAnBAw9C,GAAAlsI,EAAA,EACAmsI,EAAAlsI,EAAA,EAEA+rI,EAAAziI,KAAA2tC,MAAAu3C,IAAA,EACAw9C,EAAA1iI,KAAA2tC,MAAAw3C,IAAA,EAEA09C,EAAAJ,EAAA,EACAK,EAAAJ,EAAA,EAEAK,EAAAtsI,EAAAgsI,EACAO,EAAAtsI,EAAAgsI,EAEAj9H,EAAA,GAAAL,cAAAy9H,EAAAC,EAAA,GACAp9H,EAAA,GAAAN,cAAAy9H,EAAAC,EAAA,GACA3yD,EAAA,GAAA/qE,cAAAy9H,EAAAC,EAAA,GAEAv9H,EAAA,EACAqkI,EAAA,EAEAz7E,EAAA,EAAkBA,EAAA20E,EAAa30E,IAI/B,OAFAt+D,GAAAs+D,EAAA60E,EAAAJ,EAEA10E,EAAA,EAAmBA,EAAA20E,EAAa30E,IAAA,CAEhC,GAAAj+D,GAAAi+D,EAAA60E,EAAAJ,CAEAl9H,GAAAF,GAAAtV,EACAwV,EAAAF,EAAA,IAAA1V,EAEA6V,EAAAH,EAAA,KAEA4qE,EAAAy5D,GAAA17E,EAAAu0E,EACAtyD,EAAAy5D,EAAA,KAAAz7E,EAAAu0E,EAEAn9H,GAAA,EACAqkI,GAAA,EAMArkI,EAAA,CAIA,QAFA0nE,GAAA,IAAAxnE,EAAA3kB,OAAA,QAAAutF,YAAAJ,aAAAw0D,EAAAC,EAAA,GAEAv0E,EAAA,EAAkBA,EAAAu0E,EAAYv0E,IAE9B,OAAAD,GAAA,EAAmBA,EAAAu0E,EAAYv0E,IAAA,CAE/B,GAAAx+D,GAAAw+D,EAAA20E,EAAA10E,EACAp+D,EAAAm+D,EAAA20E,GAAA10E,EAAA,GACA5vE,EAAA2vE,EAAA,EAAA20E,GAAA10E,EAAA,GACA1+D,EAAAy+D,EAAA,EAAA20E,EAAA10E,CAEA8e,GAAA1nE,GAAA7V,EACAu9E,EAAA1nE,EAAA,GAAAxV,EACAk9E,EAAA1nE,EAAA,GAAA9V,EAEAw9E,EAAA1nE,EAAA,GAAAxV,EACAk9E,EAAA1nE,EAAA,GAAAhnB,EACA0uF,EAAA1nE,EAAA,GAAA9V,EAEA8V,GAAA,EAMAve,KAAAsuF,SAAA,GAAAz6E,GAAAwL,gBAAA4mE,EAAA,IACAjmF,KAAAof,aAAA,cAAAvL,GAAAwL,gBAAAZ,EAAA,IACAze,KAAAof,aAAA,YAAAvL,GAAAwL,gBAAAX,EAAA,IACA1e,KAAAof,aAAA,QAAAvL,GAAAwL,gBAAA8pE,EAAA,KAIAt1E,EAAA8uI,oBAAAxmJ,UAAA7B,OAAA8B,OAAAyX,EAAA2K,eAAAriB,WACA0X,EAAA8uI,oBAAAxmJ,UAAAE,YAAAwX,EAAA8uI,oBAEA9uI,EAAA8uI,oBAAAxmJ,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAA8uI,oBACA3iJ,KAAA2sF,WAAAl9E,MACAzP,KAAA2sF,WAAAj9E,OACA1P,KAAA2sF,WAAAuR,cACAl+F,KAAA2sF,WAAAwR,eAKA,OAFA5nF,GAAAkC,KAAAzY,MAEAuW,GAUA1C,EAAA2rF,aAAA,SAAAC,EAAAC,EAAAC,EAAAC,EAAApB,EAAAC,GAEA5qF,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,eAEA3E,KAAA2sF,YACA8S,cACAC,cACAC,gBACAC,cACApB,aACAC,eAGAgB,KAAA,EACAC,KAAA,GAEAlB,EAAAzlG,SAAAylG,IAAA,EACAC,EAAA1lG,SAAA0lG,IAAA,EAAAzlF,KAAA8uC,GAEA63C,EAAA5mG,SAAA4mG,EAAA3mF,KAAAZ,IAAA,EAAAunF,GAAA,EACAC,EAAA7mG,SAAA6mG,EAAA5mF,KAAAZ,IAAA,EAAAwnF,GAAA,CAEA,IAAA/lG,GAAAqK,EAAAilF,KAAAn+B,EAAAy0C,EAAAojD,GAAAnjD,EAAAD,GAAAG,CAEA,KAAA/lG,EAAA,EAAaA,EAAA+lG,EAAA,EAAqB/lG,IAAA,CAIlC,IAAAqK,EAAA,EAAcA,EAAAy7F,EAAA,EAAuBz7F,IAAA,CAIrC,GAAA8kF,GAAA,GAAAn1E,GAAA8L,QACA68H,EAAAh+C,EAAAt6F,EAAAy7F,EAAAlB,CACAzV,GAAA//E,EAAA+hD,EAAAhyC,KAAAkyC,IAAAsxF,GACAxzD,EAAAngF,EAAAmiD,EAAAhyC,KAAAiyC,IAAAuxF,GAEAx8I,KAAAye,SAAA/d,KAAAsoF,GACAG,EAAAzoF,KAAA,GAAAmT,GAAA+6C,SAAAo6B,EAAA//E,EAAAy2F,EAAA,MAAA1W,EAAAngF,EAAA62F,EAAA,OAIA10C,GAAA63F,EAIA,GAAAvgJ,GAAA,GAAAuR,GAAA8L,QAAA,MAEA,KAAA9lB,EAAA,EAAaA,EAAA+lG,EAAiB/lG,IAAA,CAI9B,GAAAipJ,GAAAjpJ,GAAA8lG,EAAA,EAEA,KAAAz7F,EAAA,EAAcA,EAAAy7F,EAAoBz7F,IAAA,CAIlC,GAAAs4I,GAAAt4I,EAAA4+I,EAEA1/E,EAAAo5E,EACAr2E,EAAAq2E,EAAA78C,EAAA,EACAliB,EAAA++D,EAAA78C,EAAA,CAEA3/F,MAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAwjD,EAAA+C,EAAAsX,GAAAn7E,EAAAknD,QAAAlnD,EAAAknD,QAAAlnD,EAAAknD,WACAxpD,KAAAkoF,cAAA,GAAAxnF,MAAAyoF,EAAA/lB,GAAA5Z,QAAA2/B,EAAAhjB,GAAA3c,QAAA2/B,EAAA1L,GAAAj0B,UAEA4Z,EAAAo5E,EACAr2E,EAAAq2E,EAAA78C,EAAA,EACAliB,EAAA++D,EAAA,EAEAx8I,KAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAwjD,EAAA+C,EAAAsX,GAAAn7E,EAAAknD,QAAAlnD,EAAAknD,QAAAlnD,EAAAknD,WACAxpD,KAAAkoF,cAAA,GAAAxnF,MAAAyoF,EAAA/lB,GAAA5Z,QAAA2/B,EAAAhjB,GAAA3c,QAAA2/B,EAAA1L,GAAAj0B,WAMAxpD,KAAAkX,qBAEAlX,KAAAo6E,eAAA,GAAAvmE,GAAAo5D,OAAA,GAAAp5D,GAAA8L,QAAAqrC,IAIAn3C,EAAA2rF,aAAArjG,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAA2rF,aAAArjG,UAAAE,YAAAwX,EAAA2rF,aAEA3rF,EAAA2rF,aAAArjG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAA2rF,aACAx/F,KAAA2sF,WAAA8S,YACAz/F,KAAA2sF,WAAA+S,YACA1/F,KAAA2sF,WAAAgT,cACA3/F,KAAA2sF,WAAAiT,YACA5/F,KAAA2sF,WAAA6R,WACAx+F,KAAA2sF,WAAA8R,YAGA,OAAAloF,IAUA1C,EAAAmrF,eAAA,SAAAh0C,EAAAkzC,EAAAC,EAAAc,EAAAC,EAAAV,EAAAC,GAEA5qF,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,iBAEA3E,KAAA2sF,YACA3hC,SACAkzC,gBACAC,iBACAc,WACAC,YACAV,aACAC,eAGAz+F,KAAAkpF,mBAAA,GAAAr1E,GAAAsrF,qBAAAn0C,EAAAkzC,EAAAC,EAAAc,EAAAC,EAAAV,EAAAC,KAIA5qF,EAAAmrF,eAAA7iG,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAAmrF,eAAA7iG,UAAAE,YAAAwX,EAAAmrF,eAEAnrF,EAAAmrF,eAAA7iG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAAmrF,eACAh/F,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAAuR,cACAl+F,KAAA2sF,WAAAwR,eACAn+F,KAAA2sF,WAAAsS,SACAj/F,KAAA2sF,WAAAuS,UACAl/F,KAAA2sF,WAAA6R,WACAx+F,KAAA2sF,WAAA8R,YAGA,OAAAloF,IAWA1C,EAAAsrF,qBAAA,SAAAn0C,EAAAkzC,EAAAC,EAAAc,EAAAC,EAAAV,EAAAC,GAEA5qF,EAAA2K,eAAAnnB,KAAA2I,MAEAA,KAAA2E,KAAA,uBAEA3E,KAAA2sF,YACA3hC,SACAkzC,gBACAC,iBACAc,WACAC,YACAV,aACAC,eAGAzzC,KAAA,GAEAkzC,EAAAllF,KAAAZ,IAAA,EAAAY,KAAA2tC,MAAAu3C,IAAA,GACAC,EAAAnlF,KAAAZ,IAAA,EAAAY,KAAA2tC,MAAAw3C,IAAA,GAEAc,EAAAlmG,SAAAkmG,IAAA,EACAC,EAAAnmG,SAAAmmG,IAAA,EAAAlmF,KAAA8uC,GAEA02C,EAAAzlG,SAAAylG,IAAA,EACAC,EAAA1lG,SAAA0lG,IAAAzlF,KAAA8uC,EAYA,QAVAi7F,GAAAvkD,EAAAC,EAEAukD,GAAA9kD,EAAA,IAAAC,EAAA,GAEApxB,EAAA,GAAAl5D,GAAAwL,gBAAA,GAAAjB,cAAA,EAAA4kI,GAAA,GACAtkI,EAAA,GAAA7K,GAAAwL,gBAAA,GAAAjB,cAAA,EAAA4kI,GAAA,GACA75D,EAAA,GAAAt1E,GAAAwL,gBAAA,GAAAjB,cAAA,EAAA4kI,GAAA,GAEApxI,EAAA,EAAA6M,KAAAa,EAAA,GAAAzL,GAAA8L,QAEA9W,EAAA,EAAiBA,GAAAs1F,EAAqBt1F,IAAA,CAMtC,OAJA6zI,MAEA1zI,EAAAH,EAAAs1F,EAEAl1F,EAAA,EAAkBA,GAAAi1F,EAAoBj1F,IAAA,CAEtC,GAAAE,GAAAF,EAAAi1F,EAEAulC,GAAAz4E,EAAAhyC,KAAAkyC,IAAA+zC,EAAA91F,EAAA+1F,GAAAlmF,KAAAiyC,IAAAuzC,EAAAx1F,EAAAy1F,GACAilC,EAAA14E,EAAAhyC,KAAAkyC,IAAAszC,EAAAx1F,EAAAy1F,GACAm5C,EAAA5sF,EAAAhyC,KAAAiyC,IAAAg0C,EAAA91F,EAAA+1F,GAAAlmF,KAAAiyC,IAAAuzC,EAAAx1F,EAAAy1F,EAEAn/E,GAAApT,IAAAu3H,EAAAC,EAAAkU,GAAA9hI,YAEAi3D,EAAAqB,OAAAx8D,EAAA6xH,EAAAC,EAAAkU,GACAl5H,EAAA0vD,OAAAx8D,EAAA0N,EAAArW,EAAAqW,EAAAzW,EAAAyW,EAAA/U,GACA4+E,EAAA5C,MAAA30E,EAAAzI,EAAA,EAAAH,GAEA0zI,EAAAh8I,KAAAkR,GAEAA,IAIA6M,EAAA/d,KAAAg8I,GAMA,OAFAz2D,MAEAp9E,EAAA,EAAiBA,EAAAs1F,EAAoBt1F,IAErC,OAAAI,GAAA,EAAkBA,EAAAi1F,EAAmBj1F,IAAA,CAErC,GAAAm6D,GAAA3kD,EAAA5V,GAAAI,EAAA,GACAk9D,EAAA1nD,EAAA5V,GAAAI,GACAw0E,EAAAh/D,EAAA5V,EAAA,GAAAI,GACA4zI,EAAAp+H,EAAA5V,EAAA,GAAAI,EAAA,IAEA,IAAAJ,GAAA21F,EAAA,IAAAvY,EAAAvlF,KAAA0iE,EAAA+C,EAAA02E,IACAh0I,IAAAs1F,EAAA,GAAA4kD,EAAA/pI,KAAA8uC,KAAAm+B,EAAAvlF,KAAAylE,EAAAsX,EAAAo/D,GAMA78I,KAAAsuF,SAAA,GAAAz6E,GAAAwL,gBAAA,GAAA4nE,aAAAhB,GAAA,IACAjmF,KAAAof,aAAA,WAAA2tD,GACA/sE,KAAAof,aAAA,SAAAV,GACA1e,KAAAof,aAAA,KAAA+pE,GAEAnpF,KAAAo6E,eAAA,GAAAvmE,GAAAo5D,OAAA,GAAAp5D,GAAA8L,QAAAqrC,IAIAn3C,EAAAsrF,qBAAAhjG,UAAA7B,OAAA8B,OAAAyX,EAAA2K,eAAAriB,WACA0X,EAAAsrF,qBAAAhjG,UAAAE,YAAAwX,EAAAsrF,qBAEAtrF,EAAAsrF,qBAAAhjG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAAsrF,qBACAn/F,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAAuR,cACAl+F,KAAA2sF,WAAAwR,eACAn+F,KAAA2sF,WAAAsS,SACAj/F,KAAA2sF,WAAAuS,UACAl/F,KAAA2sF,WAAA6R,WACAx+F,KAAA2sF,WAAA8R,YAKA,OAFAloF,GAAAkC,KAAAzY,MAEAuW,GA4CA1C,EAAAssF,aAAA,SAAAvjF,EAAA+vE,GAEAA,OAEA,IAAAs2D,GAAApvI,EAAA2sH,UAAAoC,eAAAhmH,EAAA+vE,EAIAA,GAAAo0D,OAAAhoJ,SAAA4zF,EAAAj9E,OAAAi9E,EAAAj9E,OAAA,GAIA3W,SAAA4zF,EAAAq0D,iBAAAr0D,EAAAq0D,eAAA,IACAjoJ,SAAA4zF,EAAAs0D,YAAAt0D,EAAAs0D,UAAA,GACAloJ,SAAA4zF,EAAA0yD,eAAA1yD,EAAA0yD,iBAEAxrI,EAAAg9H,gBAAAx5I,KAAA2I,KAAAijJ,EAAAt2D,GAEA3sF,KAAA2E,KAAA,gBAIAkP,EAAAssF,aAAAhkG,UAAA7B,OAAA8B,OAAAyX,EAAAg9H,gBAAA10I,WACA0X,EAAAssF,aAAAhkG,UAAAE,YAAAwX,EAAAssF,aAUAtsF,EAAAgsF,cAAA,SAAA70C,EAAA80C,EAAAhB,EAAAiB,EAAAC,GAEAnsF,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,gBAEA3E,KAAA2sF,YACA3hC,SACA80C,OACAhB,iBACAiB,kBACAC,OAGAh1C,KAAA,IACA80C,KAAA,GACAhB,KAAA,EACAiB,KAAA,EACAC,KAAA,EAAAhnF,KAAA8uC,EAIA,QAFA0G,GAAA,GAAA36C,GAAA8L,QAAAwpE,KAAAzqE,KAEAqvD,EAAA,EAAiBA,GAAA+wB,EAAqB/wB,IAEtC,OAAAl0E,GAAA,EAAkBA,GAAAkmG,EAAsBlmG,IAAA,CAExC,GAAAsP,GAAAtP,EAAAkmG,EAAAC,EACAh3F,EAAA+kE,EAAA+wB,EAAA9lF,KAAA8uC,GAAA,CAEA0G,GAAAvlD,EAAA+hD,EAAAhyC,KAAAkyC,IAAA/hD,GACAqlD,EAAA3lD,EAAAmiD,EAAAhyC,KAAAiyC,IAAA9hD,EAEA,IAAA6/E,GAAA,GAAAn1E,GAAA8L,OACAqpE,GAAA//E,GAAA+hD,EAAA80C,EAAA9mF,KAAAkyC,IAAAliD,IAAAgQ,KAAAkyC,IAAA/hD,GACA6/E,EAAAngF,GAAAmiD,EAAA80C,EAAA9mF,KAAAkyC,IAAAliD,IAAAgQ,KAAAiyC,IAAA9hD,GACA6/E,EAAAz+E,EAAAu1F,EAAA9mF,KAAAiyC,IAAAjiD,GAEAhJ,KAAAye,SAAA/d,KAAAsoF,GAEAG,EAAAzoF,KAAA,GAAAmT,GAAA+6C,QAAA/0D,EAAAkmG,EAAAhyB,EAAA+wB,IACApgF,EAAAhe,KAAAsoF,EAAAx/B,QAAAC,IAAA+E,GAAA14C,aAMA,OAAAi4D,GAAA,EAAiBA,GAAA+wB,EAAqB/wB,IAEtC,OAAAl0E,GAAA,EAAkBA,GAAAkmG,EAAsBlmG,IAAA,CAExC,GAAA6O,IAAAq3F,EAAA,GAAAhyB,EAAAl0E,EAAA,EACAkP,GAAAg3F,EAAA,IAAAhyB,EAAA,GAAAl0E,EAAA,EACAtC,GAAAwoG,EAAA,IAAAhyB,EAAA,GAAAl0E,EACA4O,GAAAs3F,EAAA,GAAAhyB,EAAAl0E,EAEA8kB,EAAA,GAAA9K,GAAA+L,MAAAlX,EAAAK,EAAAN,GAAAiW,EAAAhW,GAAA8gD,QAAA9qC,EAAA3V,GAAAygD,QAAA9qC,EAAAjW,GAAA+gD,SACAxpD,MAAAme,MAAAzd,KAAAie,GACA3e,KAAAkoF,cAAA,GAAAxnF,MAAAyoF,EAAAzgF,GAAA8gD,QAAA2/B,EAAApgF,GAAAygD,QAAA2/B,EAAA1gF,GAAA+gD,UAEA7qC,EAAA,GAAA9K,GAAA+L,MAAA7W,EAAAxR,EAAAkR,GAAAiW,EAAA3V,GAAAygD,QAAA9qC,EAAAnnB,GAAAiyD,QAAA9qC,EAAAjW,GAAA+gD,UACAxpD,KAAAme,MAAAzd,KAAAie,GACA3e,KAAAkoF,cAAA,GAAAxnF,MAAAyoF,EAAApgF,GAAAygD,QAAA2/B,EAAA5xF,GAAAiyD,QAAA2/B,EAAA1gF,GAAA+gD,UAMAxpD,KAAAkX,sBAIArD,EAAAgsF,cAAA1jG,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAAgsF,cAAA1jG,UAAAE,YAAAwX,EAAAgsF,cAEAhsF,EAAAgsF,cAAA1jG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAAgsF,cACA7/F,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAAmT,KACA9/F,KAAA2sF,WAAAmS,eACA9+F,KAAA2sF,WAAAoT,gBACA//F,KAAA2sF,WAAAqT,IAGA,OAAAzpF,IAWA1C,EAAAosF,kBAAA,SAAAj1C,EAAA80C,EAAAhB,EAAAiB,EAAAvoG,EAAAmR,EAAAu3F,GA0FA,QAAAp8C,GAAA36C,EAAA+5I,EAAAC,EAAAn4F,EAAAk1C,GAEA,GAAAkjD,GAAApqI,KAAAkyC,IAAA/hD,GACAk6I,EAAArqI,KAAAiyC,IAAA9hD,GACAm6I,EAAAJ,EAAAC,EAAAh6I,EACAo6I,EAAAvqI,KAAAkyC,IAAAo4F,GAEA3vE,EAAA3oB,GAAA,EAAAu4F,GAAA,GAAAH,EACAxvE,EAAA5oB,GAAA,EAAAu4F,GAAAF,EAAA,GACAG,EAAAtjD,EAAAl1C,EAAAhyC,KAAAiyC,IAAAq4F,GAAA,EAEA,WAAAzvI,GAAA8L,QAAAg0D,EAAAC,EAAA4vE,GAnGA3vI,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,oBAEA3E,KAAA2sF,YACA3hC,SACA80C,OACAhB,iBACAiB,kBACAvoG,IACAmR,IACAu3F,eAGAl1C,KAAA,IACA80C,KAAA,GACAhB,KAAA,GACAiB,KAAA,EACAvoG,KAAA,EACAmR,KAAA,EACAu3F,KAAA,CAOA,QALAujD,GAAA,GAAA9pJ,OAAAmlG,GACA4kD,EAAA,GAAA7vI,GAAA8L,QACArd,EAAA,GAAAuR,GAAA8L,QACAgkI,EAAA,GAAA9vI,GAAA8L,QAEA9lB,EAAA,EAAiBA,EAAAilG,IAAoBjlG,EAAA,CAErC4pJ,EAAA5pJ,GAAA,GAAAF,OAAAomG,EACA,IAAA52F,GAAAtP,EAAAilG,EAAA,EAAAtnG,EAAAwhB,KAAA8uC,GACAzsD,EAAAyoD,EAAA36C,EAAAR,EAAAnR,EAAAwzD,EAAAk1C,GACA5kG,EAAAwoD,EAAA36C,EAAA,IAAAR,EAAAnR,EAAAwzD,EAAAk1C,EACAwjD,GAAAx2F,WAAA5xD,EAAAD,GACAiH,EAAA2iE,WAAA3pE,EAAAD,GAEAsoJ,EAAAngF,aAAAkgF,EAAAphJ,GACAA,EAAAkhE,aAAAmgF,EAAAD,GACAC,EAAA7tI,YACAxT,EAAAwT,WAEA,QAAAi4D,GAAA,EAAkBA,EAAAgyB,IAAqBhyB,EAAA,CAEvC,GAAA/kE,GAAA+kE,EAAAgyB,EAAA,EAAA/mF,KAAA8uC,GACAjhD,GAAAi5F,EAAA9mF,KAAAkyC,IAAAliD,GACAuoF,EAAAuO,EAAA9mF,KAAAiyC,IAAAjiD,GAEAm7C,EAAA,GAAAtwC,GAAA8L,OACAwkC,GAAAl7C,EAAA5N,EAAA4N,EAAApC,EAAAvE,EAAA2G,EAAAsoF,EAAAoyD,EAAA16I,EACAk7C,EAAAt7C,EAAAxN,EAAAwN,EAAAhC,EAAAvE,EAAAuG,EAAA0oF,EAAAoyD,EAAA96I,EACAs7C,EAAA55C,EAAAlP,EAAAkP,EAAA1D,EAAAvE,EAAAiI,EAAAgnF,EAAAoyD,EAAAp5I,EAEAk5I,EAAA5pJ,GAAAk0E,GAAA/tE,KAAAye,SAAA/d,KAAAyjD,GAAA,GAMA,OAAAtqD,GAAA,EAAiBA,EAAAilG,IAAoBjlG,EAErC,OAAAk0E,GAAA,EAAkBA,EAAAgyB,IAAqBhyB,EAAA,CAEvC,GAAA61E,IAAA/pJ,EAAA,GAAAilG,EACA+kD,GAAA91E,EAAA,GAAAgyB,EAEAr3F,EAAA+6I,EAAA5pJ,GAAAk0E,GACAhlE,EAAA06I,EAAAG,GAAA71E,GACAx2E,EAAAksJ,EAAAG,GAAAC,GACAp7I,EAAAg7I,EAAA5pJ,GAAAgqJ,GAEA5H,EAAA,GAAApoI,GAAA+6C,QAAA/0D,EAAAilG,EAAA/wB,EAAAgyB,GACAm8C,EAAA,GAAAroI,GAAA+6C,SAAA/0D,EAAA,GAAAilG,EAAA/wB,EAAAgyB,GACAo8C,EAAA,GAAAtoI,GAAA+6C,SAAA/0D,EAAA,GAAAilG,GAAA/wB,EAAA,GAAAgyB,GACAq8C,EAAA,GAAAvoI,GAAA+6C,QAAA/0D,EAAAilG,GAAA/wB,EAAA,GAAAgyB,EAEA//F,MAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAlX,EAAAK,EAAAN,IACAzI,KAAAkoF,cAAA,GAAAxnF,MAAAu7I,EAAAC,EAAAE,IAEAp8I,KAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAA7W,EAAAxR,EAAAkR,IACAzI,KAAAkoF,cAAA,GAAAxnF,MAAAw7I,EAAA1yF,QAAA2yF,EAAAC,EAAA5yF,UAMAxpD,KAAAkX,qBACAlX,KAAAmX,wBAmBAtD,EAAAosF,kBAAA9jG,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAAosF,kBAAA9jG,UAAAE,YAAAwX,EAAAosF,kBAEApsF,EAAAosF,kBAAA9jG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAAosF,kBACAjgG,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAAmT,KACA9/F,KAAA2sF,WAAAmS,eACA9+F,KAAA2sF,WAAAoT,gBACA//F,KAAA2sF,WAAAn1F,EACAwI,KAAA2sF,WAAAhkF,EACA3I,KAAA2sF,WAAAuT,YAGA,OAAA3pF,IAoBA1C,EAAAytI,aAAA,SAAAjhD,EAAA9B,EAAAvzC,EAAA8zC,EAAAglD,EAAAC,GAiDA,QAAArC,GAAAz4I,EAAAJ,EAAA0B,GAEA,MAAAgS,GAAAkC,SAAA/d,KAAA,GAAAmT,GAAA8L,QAAA1W,EAAAJ,EAAA0B,IAAA,EAjDAsJ,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,eAEA3E,KAAA2sF,YACA0T,OACA9B,WACAvzC,SACA8zC,iBACAglD,UAGAvlD,KAAA,GACAvzC,KAAA,EACA8zC,KAAA,EACAglD,QACAC,KAAAlwI,EAAAytI,aAAA0C,OAEA,IAIAhN,GACA13H,EACAuhI,EAIA13I,EAAAH,EAAAK,EAEAxC,EAAA0qF,EACAptC,EACAtqD,EAAAk0E,EACA61E,EAAAC,EACAn7I,EAAAK,EAAAxR,EAAAkR,EACAwzI,EAAAC,EAAAC,EAAAC,EAjBAqH,KAEAlnI,EAAAvc,KAMAikJ,EAAA1lD,EAAA,EAKA2lD,EAAA,GAAArwI,GAAA8L,QAMAu7H,EAAA,GAAArnI,GAAAytI,aAAAC,aAAAlhD,EAAA9B,EAAAulD,GACAK,EAAAjJ,EAAAiJ,SACAzlI,EAAAw8H,EAAAx8H,QACAqjI,EAAA7G,EAAA6G,SAeA,KAZA/hJ,KAAAmkJ,WACAnkJ,KAAA0e,UACA1e,KAAA+hJ,YAUAloJ,EAAA,EAAaA,EAAAoqJ,EAAepqJ,IAc5B,IAZA4pJ,EAAA5pJ,MAEAsP,EAAAtP,GAAAoqJ,EAAA,GAEA9/F,EAAAk8C,EAAA8mC,WAAAh+H,GAEA6tI,EAAAmN,EAAAtqJ,GACAylB,EAAAZ,EAAA7kB,GACAgnJ,EAAAkB,EAAAloJ,GAEAwP,EAAA2hD,EAAA+4F,EAAA56I,GAEA4kE,EAAA,EAAcA,EAAA+wB,EAAoB/wB,IAElC/kE,EAAA+kE,EAAA+wB,EAAA,EAAA9lF,KAAA8uC,GAEAjhD,GAAAwC,EAAA2P,KAAAkyC,IAAAliD,GACAuoF,EAAAloF,EAAA2P,KAAAiyC,IAAAjiD,GAEAk7I,EAAAzrI,KAAA0rC,GACA+/F,EAAAj7I,GAAApC,EAAAyY,EAAArW,EAAAsoF,EAAAsvD,EAAA53I,EACAi7I,EAAAr7I,GAAAhC,EAAAyY,EAAAzW,EAAA0oF,EAAAsvD,EAAAh4I,EACAq7I,EAAA35I,GAAA1D,EAAAyY,EAAA/U,EAAAgnF,EAAAsvD,EAAAt2I,EAEAk5I,EAAA5pJ,GAAAk0E,GAAA2zE,EAAAwC,EAAAj7I,EAAAi7I,EAAAr7I,EAAAq7I,EAAA35I,EASA,KAAA1Q,EAAA,EAAaA,EAAA0kG,EAAc1kG,IAE3B,IAAAk0E,EAAA,EAAcA,EAAA+wB,EAAoB/wB,IAElC61E,EAAA/pJ,KAAA,GAAA0kG,EAAA1kG,EAAA,EACAgqJ,GAAA91E,EAAA,GAAA+wB,EAEAp2F,EAAA+6I,EAAA5pJ,GAAAk0E,GACAhlE,EAAA06I,EAAAG,GAAA71E,GACAx2E,EAAAksJ,EAAAG,GAAAC,GACAp7I,EAAAg7I,EAAA5pJ,GAAAgqJ,GAEA5H,EAAA,GAAApoI,GAAA+6C,QAAA/0D,EAAA0kG,EAAAxwB,EAAA+wB,GACAo9C,EAAA,GAAAroI,GAAA+6C,SAAA/0D,EAAA,GAAA0kG,EAAAxwB,EAAA+wB,GACAq9C,EAAA,GAAAtoI,GAAA+6C,SAAA/0D,EAAA,GAAA0kG,GAAAxwB,EAAA,GAAA+wB,GACAs9C,EAAA,GAAAvoI,GAAA+6C,QAAA/0D,EAAA0kG,GAAAxwB,EAAA,GAAA+wB,GAEA9+F,KAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAAlX,EAAAK,EAAAN,IACAzI,KAAAkoF,cAAA,GAAAxnF,MAAAu7I,EAAAC,EAAAE,IAEAp8I,KAAAme,MAAAzd,KAAA,GAAAmT,GAAA+L,MAAA7W,EAAAxR,EAAAkR,IACAzI,KAAAkoF,cAAA,GAAAxnF,MAAAw7I,EAAA1yF,QAAA2yF,EAAAC,EAAA5yF,SAMAxpD,MAAAkX,qBACAlX,KAAAmX,wBAIAtD,EAAAytI,aAAAnlJ,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAAytI,aAAAnlJ,UAAAE,YAAAwX,EAAAytI,aAEAztI,EAAAytI,aAAA0C,QAAA,SAAA76I,GAEA,UAIA0K,EAAAytI,aAAA8C,gBAAA,SAAAj7I,GAEA,MAAA6P,MAAAiyC,IAAAjyC,KAAA8uC,GAAA3+C,IAKA0K,EAAAytI,aAAAC,aAAA,SAAAlhD,EAAA9B,EAAAulD,GA8DA,QAAAO,KAKA3lI,EAAA,MAAA7K,GAAA8L,QACAoiI,EAAA,MAAAluI,GAAA8L,QACA2kI,EAAAzhD,OAAA0hD,UACA5wE,EAAA36D,KAAAuqD,IAAA4gF,EAAA,GAAAl7I,GACA2qE,EAAA56D,KAAAuqD,IAAA4gF,EAAA,GAAAt7I,GACA26I,EAAAxqI,KAAAuqD,IAAA4gF,EAAA,GAAA55I,GAEAopE,GAAA2wE,IAEAA,EAAA3wE,EACAr0D,EAAApT,IAAA,QAIA0nE,GAAA0wE,IAEAA,EAAA1wE,EACAt0D,EAAApT,IAAA,QAIAs3I,GAAAc,GAEAhlI,EAAApT,IAAA,OAIAq8H,EAAA/kE,aAAA2gF,EAAA,GAAA7kI,GAAAxJ,YAEA4I,EAAA,GAAA8kD,aAAA2gF,EAAA,GAAA5b,GACAwZ,EAAA,GAAAv+E,aAAA2gF,EAAA,GAAAzlI,EAAA,IA/FA,GAUAypC,GAEAm8F,EAEA3wE,EAAAC,EAAA4vE,EACA3pJ,EAAAsP,EAfAmW,EAAA,GAAAzL,GAAA8L,QAEAwkI,KACAzlI,KACAqjI,KAEAxZ,EAAA,GAAA10H,GAAA8L,QACA6kI,EAAA,GAAA3wI,GAAAyzD,QAEA28E,EAAA1lD,EAAA,EAEA/0B,EAAA,IAcA,KANAxpE,KAAAmkJ,WACAnkJ,KAAA0e,UACA1e,KAAA+hJ,YAIAloJ,EAAA,EAAaA,EAAAoqJ,EAAepqJ,IAE5BsP,EAAAtP,GAAAoqJ,EAAA,GAEAE,EAAAtqJ,GAAAwmG,EAAAmoC,aAAAr/H,GACAg7I,EAAAtqJ,GAAAic,WAwEA,KApEAuuI,IAoEAxqJ,EAAA,EAAaA,EAAAoqJ,EAAepqJ,IAE5B6kB,EAAA7kB,GAAA6kB,EAAA7kB,EAAA,GAAA2vD,QAEAu4F,EAAAloJ,GAAAkoJ,EAAAloJ,EAAA,GAAA2vD,QAEA++E,EAAA/kE,aAAA2gF,EAAAtqJ,EAAA,GAAAsqJ,EAAAtqJ,IAEA0uI,EAAAzuI,SAAA0vE,IAEA++D,EAAAzyH,YAEAqyC,EAAAnvC,KAAAwrD,KAAA3wD,EAAAmF,KAAA09C,MAAAytF,EAAAtqJ,EAAA,GAAAuxD,IAAA+4F,EAAAtqJ,OAAA,IAEA6kB,EAAA7kB,GAAA+sE,aAAA49E,EAAA9wE,iBAAA60D,EAAApgF,KAIA45F,EAAAloJ,GAAA2pE,aAAA2gF,EAAAtqJ,GAAA6kB,EAAA7kB,GAOA,IAAAiqJ,EAWA,IATA37F,EAAAnvC,KAAAwrD,KAAA3wD,EAAAmF,KAAA09C,MAAAh4C,EAAA,GAAA0sC,IAAA1sC,EAAAulI,EAAA,WACA97F,GAAA87F,EAAA,EAEAE,EAAA,GAAA/4F,IAAAm9E,EAAA/kE,aAAA9kD,EAAA,GAAAA,EAAAulI,EAAA,SAEA97F,MAIAtuD,EAAA,EAAcA,EAAAoqJ,EAAepqJ,IAG7B6kB,EAAA7kB,GAAA+sE,aAAA49E,EAAA9wE,iBAAAywE,EAAAtqJ,GAAAsuD,EAAAtuD,IACAkoJ,EAAAloJ,GAAA2pE,aAAA2gF,EAAAtqJ,GAAA6kB,EAAA7kB,KAgBAga,EAAA4wI,mBAAA,SAAAhmI,EAAAwnE,EAAAj7B,EAAAj5B,GA6FA,QAAA2yH,GAAA/uF,GAEA,GAAAqzB,GAAArzB,EAAA7/C,YAAA0zC,OACAw/B,GAAAp3E,MAAA+yI,EAAAlmI,SAAA/d,KAAAsoF,GAAA,CAIA,IAAA7/E,GAAAy7I,EAAAjvF,GAAA,EAAA38C,KAAA8uC,GAAA,GACA9+C,EAAA67I,EAAAlvF,GAAA38C,KAAA8uC,GAAA,EAGA,OAFAkhC,GAAAI,GAAA,GAAAv1E,GAAA+6C,QAAAzlD,EAAA,EAAAH,GAEAggF,EAOA,QAAA87D,GAAA1hF,EAAA+C,EAAAsX,EAAA2H,GAEA,GAAAzmE,GAAA,GAAA9K,GAAA+L,MAAAwjD,EAAAxxD,MAAAu0D,EAAAv0D,MAAA6rE,EAAA7rE,OAAAwxD,EAAA5Z,QAAA2c,EAAA3c,QAAAi0B,EAAAj0B,SAAAzwD,OAAAqsF,EACAu/D,GAAAxmI,MAAAzd,KAAAie,GAEAomI,EAAAtsI,KAAA2qD,GAAArtD,IAAAowD,GAAApwD,IAAA0nE,GAAApY,aAAA,EAEA,IAAA2/E,GAAAJ,EAAAG,EAEAJ,GAAAz8D,cAAA,GAAAxnF,MACAukJ,EAAA7hF,EAAAgmB,GAAAhmB,EAAA4hF,GACAC,EAAA9+E,EAAAijB,GAAAjjB,EAAA6+E,GACAC,EAAAxnE,EAAA2L,GAAA3L,EAAAunE,KAQA,QAAAE,GAAAvmI,EAAAoT,GAYA,OAVAozH,GAAAnsI,KAAAgI,IAAA,EAAA+Q,GACArpB,EAAAg8I,EAAAC,EAAAlmI,SAAAE,EAAAjW,IACAK,EAAA27I,EAAAC,EAAAlmI,SAAAE,EAAA5V,IACAxR,EAAAmtJ,EAAAC,EAAAlmI,SAAAE,EAAApnB,IACAyR,KAEAo8E,EAAAzmE,EAAAymE,cAIAvrF,EAAA,EAAmBA,GAAAsrJ,EAAWtrJ,IAAA,CAE9BmP,EAAAnP,KAMA,QAJAgxC,GAAA65G,EAAAh8I,EAAA8gD,QAAA4O,KAAA7gE,EAAAsC,EAAAsrJ,IACAr6G,EAAA45G,EAAA37I,EAAAygD,QAAA4O,KAAA7gE,EAAAsC,EAAAsrJ,IACAC,EAAAD,EAAAtrJ,EAEAk0E,EAAA,EAAmBA,GAAAq3E,EAAWr3E,IAE9B,IAAAA,GAAAl0E,IAAAsrJ,EAEAn8I,EAAAnP,GAAAk0E,GAAAljC,EAIA7hC,EAAAnP,GAAAk0E,GAAA22E,EAAA75G,EAAA2e,QAAA4O,KAAAttB,EAAAijC,EAAAq3E,IAUA,OAAAvrJ,GAAA,EAAkBA,EAAAsrJ,EAAWtrJ,IAE7B,OAAAk0E,GAAA,EAAmBA,EAAA,GAAAo3E,EAAAtrJ,GAAA,EAA0Bk0E,IAAA,CAE7C,GAAAtnE,GAAAuS,KAAA2tC,MAAAonB,EAAA,EAEAA,GAAA,MAEA+2E,EACA97I,EAAAnP,GAAA4M,EAAA,GACAuC,EAAAnP,EAAA,GAAA4M,GACAuC,EAAAnP,GAAA4M,GACA2+E,GAKA0/D,EACA97I,EAAAnP,GAAA4M,EAAA,GACAuC,EAAAnP,EAAA,GAAA4M,EAAA,GACAuC,EAAAnP,EAAA,GAAA4M,GACA2+E,IAcA,QAAAw/D,GAAAjvF,GAEA,MAAA38C,MAAA8xC,MAAA6K,EAAAprD,GAAAorD,EAAA1sD,GAOA,QAAA47I,GAAAlvF,GAEA,MAAA38C,MAAA8xC,OAAA6K,EAAA9sD,EAAAmQ,KAAA+xC,KAAA4K,EAAA1sD,EAAA0sD,EAAA1sD,EAAA0sD,EAAAprD,EAAAorD,EAAAprD,IAOA,QAAA06I,GAAA77D,EAAAzzB,EAAAivF,GAIA,MAFAA,GAAA,OAAAx7D,EAAAngF,IAAAmgF,EAAA,GAAAv1E,GAAA+6C,QAAAw6B,EAAAngF,EAAA,EAAAmgF,EAAAvgF,IACA,IAAA8sD,EAAA1sD,GAAA,IAAA0sD,EAAAprD,IAAA6+E,EAAA,GAAAv1E,GAAA+6C,QAAAg2F,EAAA,EAAA5rI,KAAA8uC,GAAA,GAAAshC,EAAAvgF,IACAugF,EAAA5/B,QAhOA31C,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,qBAEA3E,KAAA2sF,YACAluE,WACAwnE,UACAj7B,SACAj5B,UAGAi5B,KAAA,EACAj5B,KAAA,CAIA,QAFA4yH,GAAA3kJ,KAEAnG,EAAA,EAAAuP,EAAAqV,EAAA3kB,OAAsCD,EAAAuP,EAAOvP,GAAA,EAE7C6qJ,EAAA,GAAA7wI,GAAA8L,QAAAlB,EAAA5kB,GAAA4kB,EAAA5kB,EAAA,GAAA4kB,EAAA5kB,EAAA,IAQA,QAJArC,GAAAwI,KAAAye,SAEAN,KAEAtkB,EAAA,EAAAk0E,EAAA,EAAA3kE,EAAA68E,EAAAnsF,OAA4CD,EAAAuP,EAAOvP,GAAA,EAAAk0E,IAAA,CAEnD,GAAA3K,GAAA5rE,EAAAyuF,EAAApsF,IACAssE,EAAA3uE,EAAAyuF,EAAApsF,EAAA,IACA4jF,EAAAjmF,EAAAyuF,EAAApsF,EAAA,GAEAskB,GAAA4vD,GAAA,GAAAl6D,GAAA+L,MAAAwjD,EAAAxxD,MAAAu0D,EAAAv0D,MAAA6rE,EAAA7rE,OAAAwxD,EAAA5Z,QAAA2c,EAAA3c,QAAAi0B,EAAAj0B,SAAAzwD,OAAAg1E,GAMA,OAFAg3E,GAAA,GAAAlxI,GAAA8L,QAEA9lB,EAAA,EAAAuP,EAAA+U,EAAArkB,OAAmCD,EAAAuP,EAAOvP,IAE1CqrJ,EAAA/mI,EAAAtkB,GAAAk4B,EAOA,QAAAl4B,GAAA,EAAAuP,EAAApJ,KAAAkoF,cAAA,GAAApuF,OAAqDD,EAAAuP,EAAOvP,IAAA,CAE5D,GAAAsvF,GAAAnpF,KAAAkoF,cAAA,GAAAruF,GAEAqyI,EAAA/iD,EAAA,GAAAlgF,EACA4uI,EAAA1uD,EAAA,GAAAlgF,EACAinE,EAAAiZ,EAAA,GAAAlgF,EAEAmP,EAAAY,KAAAZ,IAAA8zH,EAAAlzH,KAAAZ,IAAAy/H,EAAA3nE,IACAxgC,EAAA12B,KAAA02B,IAAAw8F,EAAAlzH,KAAA02B,IAAAmoG,EAAA3nE,GAEA93D,GAAA,IAAAs3B,EAAA,KAIAw8F,EAAA,KAAA/iD,EAAA,GAAAlgF,GAAA,GACA4uI,EAAA,KAAA1uD,EAAA,GAAAlgF,GAAA,GACAinE,EAAA,KAAAiZ,EAAA,GAAAlgF,GAAA,IASA,OAAApP,GAAA,EAAAuP,EAAApJ,KAAAye,SAAA3kB,OAA2CD,EAAAuP,EAAOvP,IAElDmG,KAAAye,SAAA5kB,GAAAsvD,eAAA6B,EAOAhrD,MAAA0rF,gBAEA1rF,KAAAkX,qBAEAlX,KAAAo6E,eAAA,GAAAvmE,GAAAo5D,OAAA,GAAAp5D,GAAA8L,QAAAqrC,IAiJAn3C,EAAA4wI,mBAAAtoJ,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAA4wI,mBAAAtoJ,UAAAE,YAAAwX,EAAA4wI,mBAEA5wI,EAAA4wI,mBAAAtoJ,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAA4wI,mBACAzkJ,KAAA2sF,WAAAluE,SACAze,KAAA2sF,WAAA1G,QACAjmF,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAA56D,OAGA,OAAAxb,GAAAkC,KAAAzY,OAIA6T,EAAA4wI,mBAAAtoJ,UAAAsc,KAAA,SAAAxV,GAGA,MADA4Q,GAAA6L,SAAAvjB,UAAAsc,KAAAphB,KAAA2I,KAAAiD,GACAjD,MAUA6T,EAAAurF,qBAAA,SAAAp0C,EAAAj5B,GAEA,GAAAxoB,IAAA,EAAAyP,KAAA+xC,KAAA,MACA1hD,EAAA,EAAAE,EAEAkV,OAGA,gBACA,YACA,eACA,aAGA,GAAApV,GAAAE,EAAA,GAAAF,EAAAE,EACA,EAAAF,GAAAE,EAAA,EAAAF,EAAAE,GAGAF,GAAAE,EAAA,GAAAF,EAAAE,EAAA,EACAF,GAAAE,EAAA,EAAAF,EAAAE,EAAA,GAGAA,EAAA,GAAAF,EAAAE,EAAA,GAAAF,GACAE,EAAA,EAAAF,EAAAE,EAAA,EAAAF,GAGA48E,GACA,sBACA,sBACA,uBACA,qBACA,sBACA,sBACA,sBACA,uBACA,qBACA,uBACA,wBACA,qBAGApyE,GAAA4wI,mBAAAptJ,KAAA2I,KAAAye,EAAAwnE,EAAAj7B,EAAAj5B,GAEA/xB,KAAA2E,KAAA,uBAEA3E,KAAA2sF,YACA3hC,SACAj5B,WAKAle,EAAAurF,qBAAAjjG,UAAA7B,OAAA8B,OAAAyX,EAAA4wI,mBAAAtoJ,WACA0X,EAAAurF,qBAAAjjG,UAAAE,YAAAwX,EAAAurF,qBAEAvrF,EAAAurF,qBAAAjjG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAAurF,qBACAp/F,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAA56D,OAKA,OAFAxb,GAAAkC,KAAAzY,MAEAuW,GAUA1C,EAAAwrF,oBAAA,SAAAr0C,EAAAj5B,GAEA,GAAAxoB,IAAA,EAAAyP,KAAA+xC,KAAA,MAEAtsC,MACAlV,EAAA,IAAAA,EAAA,MAAAA,EAAA,KAAAA,EAAA,EACA,KAAAA,EAAA,IAAAA,EAAA,MAAAA,EAAA,KAAAA,EACAA,EAAA,KAAAA,EAAA,KAAAA,EAAA,MAAAA,EAAA,KAGA08E,GACA,kCACA,kCACA,8BACA,gCAGApyE,GAAA4wI,mBAAAptJ,KAAA2I,KAAAye,EAAAwnE,EAAAj7B,EAAAj5B,GAEA/xB,KAAA2E,KAAA,sBAEA3E,KAAA2sF,YACA3hC,SACAj5B,WAKAle,EAAAwrF,oBAAAljG,UAAA7B,OAAA8B,OAAAyX,EAAA4wI,mBAAAtoJ,WACA0X,EAAAwrF,oBAAAljG,UAAAE,YAAAwX,EAAAwrF,oBAEAxrF,EAAAwrF,oBAAAljG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAAwrF,oBACAr/F,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAA56D,OAKA,OAFAxb,GAAAkC,KAAAzY,MAEAuW,GAUA1C,EAAAyrF,mBAAA,SAAAt0C,EAAAj5B,GAEA,GAAAtT,IACA,wCAGAwnE,GACA,gDAGApyE,GAAA4wI,mBAAAptJ,KAAA2I,KAAAye,EAAAwnE,EAAAj7B,EAAAj5B,GAEA/xB,KAAA2E,KAAA,qBAEA3E,KAAA2sF,YACA3hC,SACAj5B,WAKAle,EAAAyrF,mBAAAnjG,UAAA7B,OAAA8B,OAAAyX,EAAA4wI,mBAAAtoJ,WACA0X,EAAAyrF,mBAAAnjG,UAAAE,YAAAwX,EAAAyrF,mBAEAzrF,EAAAyrF,mBAAAnjG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAAyrF,mBACAt/F,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAA56D,OAKA,OAFAxb,GAAAkC,KAAAzY,MAEAuW,GAUA1C,EAAA0rF,oBAAA,SAAAv0C,EAAAj5B,GAEA,GAAAtT,IACA,+BAGAwnE,GACA,wBAGApyE,GAAA4wI,mBAAAptJ,KAAA2I,KAAAye,EAAAwnE,EAAAj7B,EAAAj5B,GAEA/xB,KAAA2E,KAAA,sBAEA3E,KAAA2sF,YACA3hC,SACAj5B,WAKAle,EAAA0rF,oBAAApjG,UAAA7B,OAAA8B,OAAAyX,EAAA4wI,mBAAAtoJ,WACA0X,EAAA0rF,oBAAApjG,UAAAE,YAAAwX,EAAA0rF,oBAEA1rF,EAAA0rF,oBAAApjG,UAAAqtD,MAAA,WAEA,GAAAjzC,GAAA,GAAA1C,GAAA0rF,oBACAv/F,KAAA2sF,WAAA3hC,OACAhrD,KAAA2sF,WAAA56D,OAKA,OAFAxb,GAAAkC,KAAAzY,MAEAuW,GAeA1C,EAAAwxI,mBAAA,SAAAz9I,EAAA09I,EAAAC,GAEA1xI,EAAA6L,SAAAroB,KAAA2I,MAEAA,KAAA2E,KAAA,qBAEA3E,KAAA2sF,YACA/kF,OACA09I,SACAC,SAGA,IAIA1rJ,GAAAk0E,EAAAv2E,EACA2R,EAAAH,EALAq6H,EAAArjI,KAAAye,SACAN,EAAAne,KAAAme,MACAgrE,EAAAnpF,KAAAkoF,cAAA,GAKAs9D,EAAAF,EAAA,CAEA,KAAAzrJ,EAAA,EAAaA,GAAA0rJ,EAAa1rJ,IAI1B,IAFAmP,EAAAnP,EAAA0rJ,EAEAx3E,EAAA,EAAcA,GAAAu3E,EAAav3E,IAE3B5kE,EAAA4kE,EAAAu3E,EAEA9tJ,EAAAoQ,EAAAuB,EAAAH,GACAq6H,EAAA3iI,KAAAlJ,EAMA,IAAAkR,GAAAK,EAAAxR,EAAAkR,EACAwzI,EAAAC,EAAAC,EAAAC,CAEA,KAAAviJ,EAAA,EAAaA,EAAA0rJ,EAAY1rJ,IAEzB,IAAAk0E,EAAA,EAAcA,EAAAu3E,EAAYv3E,IAE1BrlE,EAAA7O,EAAA2rJ,EAAAz3E,EACAhlE,EAAAlP,EAAA2rJ,EAAAz3E,EAAA,EACAx2E,GAAAsC,EAAA,GAAA2rJ,EAAAz3E,EAAA,EACAtlE,GAAA5O,EAAA,GAAA2rJ,EAAAz3E,EAEAkuE,EAAA,GAAApoI,GAAA+6C,QAAAmf,EAAAu3E,EAAAzrJ,EAAA0rJ,GACArJ,EAAA,GAAAroI,GAAA+6C,SAAAmf,EAAA,GAAAu3E,EAAAzrJ,EAAA0rJ,GACApJ,EAAA,GAAAtoI,GAAA+6C,SAAAmf,EAAA,GAAAu3E,GAAAzrJ,EAAA,GAAA0rJ,GACAnJ,EAAA,GAAAvoI,GAAA+6C,QAAAmf,EAAAu3E,GAAAzrJ,EAAA,GAAA0rJ,GAEApnI,EAAAzd,KAAA,GAAAmT,GAAA+L,MAAAlX,EAAAK,EAAAN,IACA0gF,EAAAzoF,MAAAu7I,EAAAC,EAAAE,IAEAj+H,EAAAzd,KAAA,GAAAmT,GAAA+L,MAAA7W,EAAAxR,EAAAkR,IACA0gF,EAAAzoF,MAAAw7I,EAAA1yF,QAAA2yF,EAAAC,EAAA5yF,SAYAxpD,MAAAkX,qBACAlX,KAAAmX,wBAIAtD,EAAAwxI,mBAAAlpJ,UAAA7B,OAAA8B,OAAAyX,EAAA6L,SAAAvjB,WACA0X,EAAAwxI,mBAAAlpJ,UAAAE,YAAAwX,EAAAwxI,mBAQAxxI,EAAA4xI,kBAAA,SAAAlvI,GAEA1C,EAAA2K,eAAAnnB,KAAA2I,KAEA,IAAAs9I,IAAA,KAAAjxD,KACAkxD,EAAA,SAAA70I,EAAAK,GAEA,MAAAL,GAAAK,GAIArG,GAAA,YAEA,IAAA6T,YAAA1C,GAAA6L,SAAA,CASA,OAPAjB,GAAAlI,EAAAkI,SACAN,EAAA5H,EAAA4H,MACAunI,EAAA,EAGA7xB,EAAA,GAAAxsC,aAAA,EAAAlpE,EAAArkB,QAEAD,EAAA,EAAAuP,EAAA+U,EAAArkB,OAAoCD,EAAAuP,EAAOvP,IAI3C,OAFA8kB,GAAAR,EAAAtkB,GAEAk0E,EAAA,EAAmBA,EAAA,EAAOA,IAAA,CAE1BuvE,EAAA,GAAA3+H,EAAAjc,EAAAqrE,IACAuvE,EAAA,GAAA3+H,EAAAjc,GAAAqrE,EAAA,OACAuvE,EAAA17D,KAAA27D,EAEA,IAAApiJ,GAAAmiJ,EAAAn3I,UAEApN,UAAAszF,EAAAlxF,KAEA04H,EAAA,EAAA6xB,GAAApI,EAAA,GACAzpB,EAAA,EAAA6xB,EAAA,GAAApI,EAAA,GACAjxD,EAAAlxF,MACAuqJ,KAUA,OAFA7nE,GAAA,GAAAz/D,cAAA,EAAAsnI,EAAA,GAEA7rJ,EAAA,EAAAuP,EAAAs8I,EAAgC7rJ,EAAAuP,EAAOvP,IAEvC,OAAAk0E,GAAA,EAAmBA,EAAA,EAAOA,IAAA,CAE1B,GAAAib,GAAAvqE,EAAAo1G,EAAA,EAAAh6H,EAAAk0E,IAEAn8D,EAAA,EAAA/X,EAAA,EAAAk0E,CACA8P,GAAAjsE,EAAA,GAAAo3E,EAAA//E,EACA40E,EAAAjsE,EAAA,GAAAo3E,EAAAngF,EACAg1E,EAAAjsE,EAAA,GAAAo3E,EAAAz+E,EAMAvK,KAAAof,aAAA,cAAAvL,GAAAwL,gBAAAw+D,EAAA,QAEE,IAAAtnE,YAAA1C,GAAA2K,eAEF,UAAAjI,EAAA3E,MAAA,CAIA,GAAAq0E,GAAA1vE,EAAA3E,MAAA+J,MACA8C,EAAAlI,EAAAu2D,WAAAj3D,SACA24E,EAAAj4E,EAAAi4E,UACAk3D,EAAA,CAEA,KAAAl3D,EAAA10F,QAEAyc,EAAAm4E,YAAA,EAAAzI,EAAAnsF,OAOA,QAFA+5H,GAAA,GAAAxsC,aAAA,EAAApB,EAAAnsF,QAEAoK,EAAA,EAAAyhJ,EAAAn3D,EAAA10F,OAA0CoK,EAAAyhJ,IAAQzhJ,EAOlD,OALA0hJ,GAAAp3D,EAAAtqF,GAEA0a,EAAAgnI,EAAAhnI,MACA2mC,EAAAqgG,EAAArgG,MAEA1rD,EAAA+kB,EAAA4sD,EAAA5sD,EAAA2mC,EAA4C1rD,EAAA2xE,EAAQ3xE,GAAA,EAEpD,OAAAk0E,GAAA,EAAqBA,EAAA,EAAOA,IAAA,CAE5BuvE,EAAA,GAAAr3D,EAAApsF,EAAAk0E,GACAuvE,EAAA,GAAAr3D,EAAApsF,GAAAk0E,EAAA,MACAuvE,EAAA17D,KAAA27D,EAEA,IAAApiJ,GAAAmiJ,EAAAn3I,UAEApN,UAAAszF,EAAAlxF,KAEA04H,EAAA,EAAA6xB,GAAApI,EAAA,GACAzpB,EAAA,EAAA6xB,EAAA,GAAApI,EAAA,GACAjxD,EAAAlxF,MACAuqJ,KAYA,OAFA7nE,GAAA,GAAAz/D,cAAA,EAAAsnI,EAAA,GAEA7rJ,EAAA,EAAAuP,EAAAs8I,EAAiC7rJ,EAAAuP,EAAOvP,IAExC,OAAAk0E,GAAA,EAAoBA,EAAA,EAAOA,IAAA,CAE3B,GAAAn8D,GAAA,EAAA/X,EAAA,EAAAk0E,EACA8X,EAAAguC,EAAA,EAAAh6H,EAAAk0E,EAEA8P,GAAAjsE,EAAA,GAAA6M,EAAAwvD,KAAA4X,GACAhI,EAAAjsE,EAAA,GAAA6M,EAAAyvD,KAAA2X,GACAhI,EAAAjsE,EAAA,GAAA6M,EAAA0vD,KAAA0X,GAMA7lF,KAAAof,aAAA,cAAAvL,GAAAwL,gBAAAw+D,EAAA,QAEG,CAUH,OANAp/D,GAAAlI,EAAAu2D,WAAAj3D,SAAA8F,MACA+pI,EAAAjnI,EAAA3kB,OAAA,EACA+rJ,EAAAH,EAAA,EAEA7nE,EAAA,GAAAz/D,cAAA,EAAAsnI,EAAA,GAEA7rJ,EAAA,EAAAuP,EAAAy8I,EAAgChsJ,EAAAuP,EAAOvP,IAEvC,OAAAk0E,GAAA,EAAoBA,EAAA,EAAOA,IAAA,CAE3B,GAAAn8D,GAAA,GAAA/X,EAAA,EAAAk0E,EAEA6X,EAAA,EAAA/rF,EAAA,EAAAk0E,CACA8P,GAAAjsE,EAAA,GAAA6M,EAAAmnE,GACA/H,EAAAjsE,EAAA,GAAA6M,EAAAmnE,EAAA,GACA/H,EAAAjsE,EAAA,GAAA6M,EAAAmnE,EAAA,EAEA,IAAAC,GAAA,EAAAhsF,EAAA,IAAAk0E,EAAA,KACA8P,GAAAjsE,EAAA,GAAA6M,EAAAonE,GACAhI,EAAAjsE,EAAA,GAAA6M,EAAAonE,EAAA,GACAhI,EAAAjsE,EAAA,GAAA6M,EAAAonE,EAAA,GAMA7lF,KAAAof,aAAA,cAAAvL,GAAAwL,gBAAAw+D,EAAA,MAQAhqE,EAAA4xI,kBAAAtpJ,UAAA7B,OAAA8B,OAAAyX,EAAA2K,eAAAriB,WACA0X,EAAA4xI,kBAAAtpJ,UAAAE,YAAAwX,EAAA4xI,kBASA5xI,EAAAiyI,WAAA,SAAA98G,GAEAA,KAAA,CAEA,IAAAvqB,GAAA,GAAAL,eACA,MAAA4qB,EAAA,IACA,QAAAA,EAAA,EACA,UAAAA,IAGAjrB,EAAA,GAAAK,eACA,aACA,aACA,eAGA7H,EAAA,GAAA1C,GAAA2K,cACAjI,GAAA6I,aAAA,cAAAvL,GAAAwL,gBAAAZ,EAAA,IACAlI,EAAA6I,aAAA,WAAAvL,GAAAwL,gBAAAtB,EAAA,GAEA,IAAAtI,GAAA,GAAA5B,GAAAovF,mBAA8CrrF,aAAA/D,EAAAgE,cAE9ChE,GAAA2yF,aAAAnvG,KAAA2I,KAAAuW,EAAAd,IAIA5B,EAAAiyI,WAAA3pJ,UAAA7B,OAAA8B,OAAAyX,EAAA2yF,aAAArqG,WACA0X,EAAAiyI,WAAA3pJ,UAAAE,YAAAwX,EAAAiyI,WAoBAjyI,EAAAkyI,YAAA,WAEA,GAAAC,GAAA,GAAAnyI,GAAA6L,QACAsmI,GAAAvnI,SAAA/d,KAAA,GAAAmT,GAAA8L,QAAA,UAAA9L,GAAA8L,QAAA,OAEA,IAAAsmI,GAAA,GAAApyI,GAAA8qF,iBAAA,WAGA,OAFAsnD,GAAAx5E,UAAA,SAEA,SAAAy5E,EAAAvxE,EAAA76E,EAAAyV,EAAA42I,EAAAC,GAIAvyI,EAAAkuE,SAAA1qF,KAAA2I,MAEAjH,SAAAwW,MAAA,UACAxW,SAAAe,MAAA,GACAf,SAAAotJ,MAAA,GAAArsJ,GACAf,SAAAqtJ,MAAA,GAAAD,GAEAnmJ,KAAA6V,SAAA4C,KAAAk8D,GAEAwxE,EAAArsJ,IACAkG,KAAA3C,KAAA,GAAAwW,GAAAktE,KAAAilE,EAAA,GAAAnyI,GAAAovF,mBAA2E1zF,WAC3EvP,KAAA3C,KAAAklF,oBACAviF,KAAA+V,IAAA/V,KAAA3C,OAGA2C,KAAAqmJ,KAAA,GAAAxyI,GAAAkE,KAAAkuI,EAAA,GAAApyI,GAAA4vF,mBAA0El0F,WAC1EvP,KAAAqmJ,KAAA9jE,oBACAviF,KAAA+V,IAAA/V,KAAAqmJ,MAEArmJ,KAAAsmJ,aAAAJ,GACAlmJ,KAAAgmE,UAAAlsE,EAAAqsJ,EAAAC,OAMAvyI,EAAAkyI,YAAA5pJ,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAkyI,YAAA5pJ,UAAAE,YAAAwX,EAAAkyI,YAEAlyI,EAAAkyI,YAAA5pJ,UAAAmqJ,aAAA,WAEA,GACAxpE,GADAzqE,EAAA,GAAAwB,GAAA8L,OAGA,iBAAAumI,GAIAA,EAAAr9I,EAAA,OAEA7I,KAAAqrD,WAAAn/C,IAAA,SAEGg6I,EAAAr9I,UAEH7I,KAAAqrD,WAAAn/C,IAAA,UAIAmG,EAAAnG,IAAAg6I,EAAA37I,EAAA,GAAA27I,EAAAj9I,GAAA6M,YAEAgnE,EAAA9jE,KAAAwrD,KAAA0hF,EAAAr9I,GAEA7I,KAAAqrD,WAAAkX,iBAAAlwD,EAAAyqE,QAQAjpE,EAAAkyI,YAAA5pJ,UAAA6pE,UAAA,SAAAlsE,EAAAqsJ,EAAAC,GAEArtJ,SAAAotJ,MAAA,GAAArsJ,GACAf,SAAAqtJ,MAAA,GAAAD,GAEAA,EAAArsJ,IACAkG,KAAA3C,KAAAmrD,MAAAt8C,IAAA,EAAApS,EAAAqsJ,EAAA,GACAnmJ,KAAA3C,KAAAqY,gBAGA1V,KAAAqmJ,KAAA79F,MAAAt8C,IAAAk6I,EAAAD,EAAAC,GACApmJ,KAAAqmJ,KAAAxwI,SAAAhN,EAAA/O,EACAkG,KAAAqmJ,KAAA3wI,gBAIA7B,EAAAkyI,YAAA5pJ,UAAAoqJ,SAAA,SAAAh3I,GAEAxW,SAAAiH,KAAA3C,MAAA2C,KAAA3C,KAAAoY,SAAAlG,MAAArD,IAAAqD,GACAvP,KAAAqmJ,KAAA5wI,SAAAlG,MAAArD,IAAAqD,IAUAsE,EAAA2yI,UAAA,SAAArkI,GAEA,GAAA8jE,GAAA,GAAAgB,cAAA,kDACAla,EAAA,GAAA3uD,cAAA,IAEA7H,EAAA,GAAA1C,GAAA2K,cACAjI,GAAA+3E,SAAA,GAAAz6E,GAAAwL,gBAAA4mE,EAAA,IACA1vE,EAAA6I,aAAA,cAAAvL,GAAAwL,gBAAA0tD,EAAA,IAEAl5D,EAAA2yF,aAAAnvG,KAAA2I,KAAAuW,EAAA,GAAA1C,GAAAovF,mBAAwE1zF,MAAA,YAExExW,SAAAopB,GAEAniB,KAAA+Z,OAAAoI,IAMAtO,EAAA2yI,UAAArqJ,UAAA7B,OAAA8B,OAAAyX,EAAA2yF,aAAArqG,WACA0X,EAAA2yI,UAAArqJ,UAAAE,YAAAwX,EAAA2yI,UAEA3yI,EAAA2yI,UAAArqJ,UAAA4d,OAAA,WAEA,GAAA6xD,GAAA,GAAA/3D,GAAA64D,IAEA,iBAAAvqD,GAIA,GAFAypD,EAAAe,cAAAxqD,IAEAypD,EAAAC,QAAA,CAEA,GAAAn8B,GAAAk8B,EAAAl8B,IACAt3B,EAAAwzD,EAAAxzD,IAkBAvC,EAAA7V,KAAAuW,SAAAu2D,WAAAj3D,SACA8F,EAAA9F,EAAA8F,KAEAA,GAAA,GAAAvD,EAAAnP,EAAsB0S,EAAA,GAAAvD,EAAAvP,EAAqB8S,EAAA,GAAAvD,EAAA7N,EAC3CoR,EAAA,GAAA+zB,EAAAzmC,EAAsB0S,EAAA,GAAAvD,EAAAvP,EAAqB8S,EAAA,GAAAvD,EAAA7N,EAC3CoR,EAAA,GAAA+zB,EAAAzmC,EAAsB0S,EAAA,GAAA+zB,EAAA7mC,EAAqB8S,EAAA,GAAAvD,EAAA7N,EAC3CoR,EAAA,GAAAvD,EAAAnP,EAAsB0S,EAAA,IAAA+zB,EAAA7mC,EAAqB8S,EAAA,IAAAvD,EAAA7N,EAC3CoR,EAAA,IAAAvD,EAAAnP,EAAsB0S,EAAA,IAAAvD,EAAAvP,EAAqB8S,EAAA,IAAA+zB,EAAAnlC,EAC3CoR,EAAA,IAAA+zB,EAAAzmC,EAAsB0S,EAAA,IAAAvD,EAAAvP,EAAqB8S,EAAA,IAAA+zB,EAAAnlC,EAC3CoR,EAAA,IAAA+zB,EAAAzmC,EAAsB0S,EAAA,IAAA+zB,EAAA7mC,EAAqB8S,EAAA,IAAA+zB,EAAAnlC,EAC3CoR,EAAA,IAAAvD,EAAAnP,EAAsB0S,EAAA,IAAA+zB,EAAA7mC,EAAqB8S,EAAA,IAAA+zB,EAAAnlC,EAE3CsL,EAAA4vE,eAEAzlF,KAAAuW,SAAA0B;MAcApE,EAAA4yI,kBAAA,SAAAtkI,EAAAm0C,GAEA,GAAA/mD,GAAAxW,SAAAu9D,IAAA,OAEAt2D,MAAAmiB,SAEAniB,KAAA4rE,IAAA,GAAA/3D,GAAA64D,KAEA74D,EAAAkE,KAAA1gB,KAAA2I,KAAA,GAAA6T,GAAAuqF,YAAA,UAAAvqF,GAAA4vF,mBAAwFl0F,QAAA2mF,iBAIxFriF,EAAA4yI,kBAAAtqJ,UAAA7B,OAAA8B,OAAAyX,EAAAkE,KAAA5b,WACA0X,EAAA4yI,kBAAAtqJ,UAAAE,YAAAwX,EAAA4yI,kBAEA5yI,EAAA4yI,kBAAAtqJ,UAAA4d,OAAA,WAEA/Z,KAAA4rE,IAAAe,cAAA3sE,KAAAmiB,QAEAniB,KAAA4rE,IAAA5iC,KAAAhpC,KAAAwoD,OAEAxoD,KAAA4rE,IAAApd,OAAAxuD,KAAA6V,WAeAhC,EAAAumH,aAAA,SAAA1hH,GA8DA,QAAAguI,GAAAh+I,EAAAK,EAAAutD,GAEAqwF,EAAAj+I,EAAA4tD,GACAqwF,EAAA59I,EAAAutD,GAIA,QAAAqwF,GAAAxvJ,EAAAm/D,GAEA//C,EAAAkI,SAAA/d,KAAA,GAAAmT,GAAA8L,SACApJ,EAAAwH,OAAArd,KAAA,GAAAmT,GAAAqiD,MAAAI,IAEAv9D,SAAA6tJ,EAAAzvJ,KAEAyvJ,EAAAzvJ,OAIAyvJ,EAAAzvJ,GAAAuJ,KAAA6V,EAAAkI,SAAA3kB,OAAA,GA9EA,GAAAyc,GAAA,GAAA1C,GAAA6L,SACAjK,EAAA,GAAA5B,GAAAovF,mBAA8C1zF,MAAA,SAAAqI,aAAA/D,EAAAk9C,aAE9C61F,KAIAC,EAAA,SACAC,EAAA,SACAC,EAAA,MACAC,EAAA,SACAC,EAAA,OAIAP,GAAA,UAAAG,GACAH,EAAA,UAAAG,GACAH,EAAA,UAAAG,GACAH,EAAA,UAAAG,GAIAH,EAAA,UAAAG,GACAH,EAAA,UAAAG,GACAH,EAAA,UAAAG,GACAH,EAAA,UAAAG,GAIAH,EAAA,UAAAG,GACAH,EAAA,UAAAG,GACAH,EAAA,UAAAG,GACAH,EAAA,UAAAG,GAIAH,EAAA,SAAAI,GACAJ,EAAA,SAAAI,GACAJ,EAAA,SAAAI,GACAJ,EAAA,SAAAI,GAIAJ,EAAA,UAAAK,GACAL,EAAA,UAAAK,GACAL,EAAA,UAAAK,GAIAL,EAAA,QAAAM,GACAN,EAAA,QAAAO,GAIAP,EAAA,YAAAO,GACAP,EAAA,YAAAO,GAEAP,EAAA,YAAAO,GACAP,EAAA,YAAAO,GAwBApzI,EAAA2yF,aAAAnvG,KAAA2I,KAAAuW,EAAAd,GAEAzV,KAAA0Y,SACA1Y,KAAAipD,OAAAvwC,EAAAgvD,YACA1nE,KAAAuiF,oBAEAviF,KAAA4mJ,WAEA5mJ,KAAA+Z,UAIAlG,EAAAumH,aAAAj+H,UAAA7B,OAAA8B,OAAAyX,EAAA2yF,aAAArqG,WACA0X,EAAAumH,aAAAj+H,UAAAE,YAAAwX,EAAAumH,aAEAvmH,EAAAumH,aAAAj+H,UAAA4d,OAAA,WAEA,GAAAxD,GAAAqwI,EAEAjxF,EAAA,GAAA9hD,GAAA8L,QACAjH,EAAA,GAAA7E,GAAAu8E,OAEA82D,EAAA,SAAAn8E,EAAA9hE,EAAAJ,EAAA0B,GAEAorD,EAAAzpD,IAAAjD,EAAAJ,EAAA0B,GAAAurD,UAAAp9C,EAEA,IAAA4yD,GAAAs7E,EAAA77E,EAEA,IAAAhyE,SAAAuyE,EAEA,OAAAzxE,GAAA,EAAA2xE,EAAAF,EAAAxxE,OAAuCD,EAAA2xE,EAAQ3xE,IAE/C0c,EAAAkI,SAAA6sD,EAAAzxE,IAAA4e,KAAAk9C,GAQA,mBAEAp/C,EAAAvW,KAAAuW,SACAqwI,EAAA5mJ,KAAA4mJ,QAEA,IAAAj8I,GAAA,EAAAvC,EAAA,CAKAsQ,GAAA8uD,iBAAA/uD,KAAAzY,KAAA0Y,OAAA8uD,kBAIA0/E,EAAA,YACAA,EAAA,WAIAA,EAAA,MAAAv8I,GAAAvC,MACA8+I,EAAA,KAAAv8I,GAAAvC,MACA8+I,EAAA,MAAAv8I,EAAAvC,MACA8+I,EAAA,KAAAv8I,EAAAvC,MAIA8+I,EAAA,MAAAv8I,GAAAvC,EAAA,GACA8+I,EAAA,KAAAv8I,GAAAvC,EAAA,GACA8+I,EAAA,MAAAv8I,EAAAvC,EAAA,GACA8+I,EAAA,KAAAv8I,EAAAvC,EAAA,GAIA8+I,EAAA,QAAAv8I,EAAA,IAAAvC,MACA8+I,EAAA,SAAAv8I,EAAA,IAAAvC,MACA8+I,EAAA,SAAA9+I,MAIA8+I,EAAA,OAAAv8I,EAAA,KACAu8I,EAAA,MAAAv8I,EAAA,KACAu8I,EAAA,SAAA9+I,EAAA,GACA8+I,EAAA,QAAA9+I,EAAA,GAEA8+I,EAAA,OAAAv8I,EAAA,MACAu8I,EAAA,MAAAv8I,EAAA,MACAu8I,EAAA,SAAA9+I,MACA8+I,EAAA,QAAA9+I,MAEAmO,EAAAkyE,0BAcA50E,EAAAszI,uBAAA,SAAA3yI,EAAAw0B,GAEAn1B,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAAwU,QACAxU,KAAAwU,MAAAo4D,oBAEA5sE,KAAAipD,OAAAz0C,EAAAkzD,YACA1nE,KAAAuiF,oBAEAv5C,KAAA,CAEA,IAAAzyB,GAAA,GAAA1C,GAAA6L,QACAnJ,GAAAkI,SAAA/d,KACA,GAAAmT,GAAA8L,SAAAqpB,IAAA,GACA,GAAAn1B,GAAA8L,QAAAqpB,IAAA,GACA,GAAAn1B,GAAA8L,QAAAqpB,KAAA,GACA,GAAAn1B,GAAA8L,SAAAqpB,KAAA,GACA,GAAAn1B,GAAA8L,SAAAqpB,IAAA,GAGA,IAAAvzB,GAAA,GAAA5B,GAAAovF,mBAA8CI,QAC9C5tF,GAAAlG,MAAAkJ,KAAAzY,KAAAwU,MAAAjF,OAAA45C,eAAAnpD,KAAAwU,MAAAy9E,WAEAjyF,KAAAonJ,WAAA,GAAAvzI,GAAAktE,KAAAxqE,EAAAd,GACAzV,KAAA+V,IAAA/V,KAAAonJ,YAEA7wI,EAAA,GAAA1C,GAAA6L,SACAnJ,EAAAkI,SAAA/d,KACA,GAAAmT,GAAA8L,QACA,GAAA9L,GAAA8L,SAGAlK,EAAA,GAAA5B,GAAAovF,mBAA0CI,SAC1C5tF,EAAAlG,MAAAkJ,KAAAzY,KAAAwU,MAAAjF,OAAA45C,eAAAnpD,KAAAwU,MAAAy9E,WAEAjyF,KAAAqnJ,WAAA,GAAAxzI,GAAAktE,KAAAxqE,EAAAd,GACAzV,KAAA+V,IAAA/V,KAAAqnJ,YAEArnJ,KAAA+Z,UAIAlG,EAAAszI,uBAAAhrJ,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAszI,uBAAAhrJ,UAAAE,YAAAwX,EAAAszI,uBAEAtzI,EAAAszI,uBAAAhrJ,UAAAmd,QAAA,WAEAtZ,KAAAonJ,WAAA7wI,SAAA+C,UACAtZ,KAAAonJ,WAAA3xI,SAAA6D,UACAtZ,KAAAqnJ,WAAA9wI,SAAA+C,UACAtZ,KAAAqnJ,WAAA5xI,SAAA6D,WAIAzF,EAAAszI,uBAAAhrJ,UAAA4d,OAAA,WAEA,GAAAqpD,GAAA,GAAAvvD,GAAA8L,QACAwmD,EAAA,GAAAtyD,GAAA8L,QACA89D,EAAA,GAAA5pE,GAAA8L,OAEA,mBAEAyjD,EAAAwF,sBAAA5oE,KAAAwU,MAAAkzD,aACAvB,EAAAyC,sBAAA5oE,KAAAwU,MAAAxR,OAAA0kE,aACA+V,EAAAvwB,WAAAiZ,EAAA/C,GAEApjE,KAAAonJ,WAAAnuI,OAAAwkE,GACAz9E,KAAAonJ,WAAA3xI,SAAAlG,MAAAkJ,KAAAzY,KAAAwU,MAAAjF,OAAA45C,eAAAnpD,KAAAwU,MAAAy9E,WAEAjyF,KAAAqnJ,WAAA9wI,SAAAkI,SAAA,GAAAhG,KAAAglE,GACAz9E,KAAAqnJ,WAAA9wI,SAAAkyE,sBACAzoF,KAAAqnJ,WAAA5xI,SAAAlG,MAAAkJ,KAAAzY,KAAAonJ,WAAA3xI,SAAAlG,WAkBAsE,EAAAyzI,YAAA,SAAAnlI,EAAAm0C,EAAA8mF,GAEA,GAAA7tI,GAAAxW,SAAAu9D,IAAA,QAEAziD,GAAA2yF,aAAAnvG,KAAA2I,KAAA,GAAA6T,GAAAspI,cAAAh7H,EAAA5L,SAAA6mI,GAAA,GAAAvpI,GAAAovF,mBAA0H1zF,WAE1HvP,KAAAipD,OAAA9mC,EAAAulD,YACA1nE,KAAAuiF,qBAIA1uE,EAAAyzI,YAAAnrJ,UAAA7B,OAAA8B,OAAAyX,EAAA2yF,aAAArqG,WACA0X,EAAAyzI,YAAAnrJ,UAAAE,YAAAwX,EAAAyzI,YASAzzI,EAAA0zI,kBAAA,SAAAplI,EAAA6mB,EAAAstB,EAAA4sC,GAIAljG,KAAAmiB,SAEAniB,KAAAgpC,KAAAjwC,SAAAiwC,IAAA,CAEA,IAAAz5B,GAAAxW,SAAAu9D,IAAA,SAEA7mD,EAAA1W,SAAAmqG,IAAA,EAIAskD,EAAA,EAEAC,EAAAznJ,KAAAmiB,OAAA5L,QAEAkxI,aAAA5zI,GAAA6L,SAEA8nI,EAAAC,EAAAtpI,MAAArkB,OAIA0J,QAAAwmD,KAAA,qGAMA,IAAAzzC,GAAA,GAAA1C,GAAA2K,eAEAuuD,EAAA,GAAAl5D,GAAAyzE,iBAAA,EAAAkgE,EAAA,IAEAjxI,GAAA6I,aAAA,WAAA2tD,GAEAl5D,EAAA2yF,aAAAnvG,KAAA2I,KAAAuW,EAAA,GAAA1C,GAAAovF,mBAAwE1zF,QAAA2zF,UAAAzzF,KAIxEzP,KAAAuiF,oBACAviF,KAAA+Z,UAIAlG,EAAA0zI,kBAAAprJ,UAAA7B,OAAA8B,OAAAyX,EAAA2yF,aAAArqG,WACA0X,EAAA0zI,kBAAAprJ,UAAAE,YAAAwX,EAAA0zI,kBAEA1zI,EAAA0zI,kBAAAprJ,UAAA4d,OAAA,WAEA,GAAAqpD,GAAA,GAAAvvD,GAAA8L,QACAwmD,EAAA,GAAAtyD,GAAA8L,QACA27D,EAAA,GAAAznE,GAAAq5D,OAEA,mBAEAltE,KAAAmiB,OAAAyqD,sBAEA0O,EAAA1M,gBAAA5uE,KAAAmiB,OAAAulD,YAgBA,QAdAA,GAAA1nE,KAAAmiB,OAAAulD,YAEA7xD,EAAA7V,KAAAuW,SAAAu2D,WAAAj3D,SAIA4xI,EAAAznJ,KAAAmiB,OAAA5L,SAEAkI,EAAAgpI,EAAAhpI,SAEAN,EAAAspI,EAAAtpI,MAEA+tE,EAAA,EAEAryF,EAAA,EAAAuP,EAAA+U,EAAArkB,OAAoCD,EAAAuP,EAAOvP,IAAA,CAE3C,GAAA8kB,GAAAR,EAAAtkB,GAEAylB,EAAAX,EAAAW,MAEA8jD,GAAA3qD,KAAAgG,EAAAE,EAAAjW,IACAqN,IAAA0I,EAAAE,EAAA5V,IACAgN,IAAA0I,EAAAE,EAAApnB,IACA8tE,aAAA,GACAuB,aAAAc,GAEAvB,EAAA1tD,KAAA6G,GAAAqnD,aAAA2U,GAAAxlE,YAAAqzC,eAAAnpD,KAAAgpC,MAAAjzB,IAAAqtD,GAEAvtD,EAAAu4D,OAAA8d,EAAA9oB,EAAAn6D,EAAAm6D,EAAAv6D,EAAAu6D,EAAA74D,GAEA2hF,GAAA,EAEAr2E,EAAAu4D,OAAA8d,EAAA/lB,EAAAl9D,EAAAk9D,EAAAt9D,EAAAs9D,EAAA57D,GAEA2hF,GAAA,EAMA,MAFAr2E,GAAA4vE,eAEAzlF,SAYA6T,EAAA6zI,WAAA,SAAA1+G,EAAA89D,GAEA,GAAAvwF,GAAA,GAAA1C,GAAA6L,SACAjK,EAAA,GAAA5B,GAAAovF,mBAA8CrrF,aAAA/D,EAAAgE,cAE9C7X,MAAAg4D,OAAA,GAAAnkD,GAAAqiD,MAAA,SACAl2D,KAAAi4D,OAAA,GAAApkD,GAAAqiD,MAAA,QAEA,QAAAr8D,IAAAmvC,EAAsBnvC,GAAAmvC,EAAWnvC,GAAAitG,EAAA,CAEjCvwF,EAAAkI,SAAA/d,KACA,GAAAmT,GAAA8L,SAAAqpB,EAAA,EAAAnvC,GAAA,GAAAga,GAAA8L,QAAAqpB,EAAA,EAAAnvC,GACA,GAAAga,GAAA8L,QAAA9lB,EAAA,GAAAmvC,GAAA,GAAAn1B,GAAA8L,QAAA9lB,EAAA,EAAAmvC,GAGA,IAAAz5B,GAAA,IAAA1V,EAAAmG,KAAAg4D,OAAAh4D,KAAAi4D,MAEA1hD,GAAAwH,OAAArd,KAAA6O,SAIAsE,EAAA2yF,aAAAnvG,KAAA2I,KAAAuW,EAAAd,IAIA5B,EAAA6zI,WAAAvrJ,UAAA7B,OAAA8B,OAAAyX,EAAA2yF,aAAArqG,WACA0X,EAAA6zI,WAAAvrJ,UAAAE,YAAAwX,EAAA6zI,WAEA7zI,EAAA6zI,WAAAvrJ,UAAAwrJ,UAAA,SAAAC,EAAAC,GAEA7nJ,KAAAg4D,OAAA9rD,IAAA07I,GACA5nJ,KAAAi4D,OAAA/rD,IAAA27I,GAEA7nJ,KAAAuW,SAAAsyE,qBAWAh1E,EAAAi0I,sBAAA,SAAAtzI,EAAAuzI,GAEAl0I,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAAwU,QACAxU,KAAAwU,MAAAo4D,oBAEA5sE,KAAAipD,OAAAz0C,EAAAkzD,YACA1nE,KAAAuiF,oBAEAviF,KAAA+d,QAAA,GAAAlK,GAAAqiD,MAAA,GAAAriD,GAAAqiD,MAEA,IAAA3/C,GAAA,GAAA1C,GAAAmrF,eAAA+oD,EAAA,IACAxxI,GAAAu8D,SAAA95D,KAAA8uC,GAAA,EAEA,QAAAjuD,GAAA,EAAA2xE,EAAA,EAAyB3xE,EAAA2xE,EAAQ3xE,IAEjC0c,EAAA4H,MAAAtkB,GAAA0V,MAAAvP,KAAA+d,OAAAlkB,EAAA,MAIA,IAAA4b,GAAA,GAAA5B,GAAA4vF,mBAA8C7rF,aAAA/D,EAAAk9C,WAAAmlC,cAE9Cl2F,MAAAgoJ,YAAA,GAAAn0I,GAAAkE,KAAAxB,EAAAd,GACAzV,KAAA+V,IAAA/V,KAAAgoJ,aAEAhoJ,KAAA+Z,UAIAlG,EAAAi0I,sBAAA3rJ,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAi0I,sBAAA3rJ,UAAAE,YAAAwX,EAAAi0I,sBAEAj0I,EAAAi0I,sBAAA3rJ,UAAAmd,QAAA,WAEAtZ,KAAAgoJ,YAAAzxI,SAAA+C,UACAtZ,KAAAgoJ,YAAAvyI,SAAA6D,WAIAzF,EAAAi0I,sBAAA3rJ,UAAA4d,OAAA,WAEA,GAAA47C,GAAA,GAAA9hD,GAAA8L,OAEA,mBAEA3f,KAAA+d,OAAA,GAAAtF,KAAAzY,KAAAwU,MAAAjF,OAAA45C,eAAAnpD,KAAAwU,MAAAy9E,WACAjyF,KAAA+d,OAAA,GAAAtF,KAAAzY,KAAAwU,MAAA4+E,aAAAjqC,eAAAnpD,KAAAwU,MAAAy9E,WAEAjyF,KAAAgoJ,YAAA/uI,OAAA08C,EAAAiT,sBAAA5oE,KAAAwU,MAAAkzD,aAAA7B,UACA7lE,KAAAgoJ,YAAAzxI,SAAAsyE,wBAaAh1E,EAAAo0I,iBAAA,SAAAzzI,EAAAuzI,GAEA/nJ,KAAAwU,QACAxU,KAAAwU,MAAAo4D,mBAEA,IAAAr2D,GAAA,GAAA1C,GAAAmrF,eAAA+oD,EAAA,KACAtyI,EAAA,GAAA5B,GAAA4vF,mBAA8CvN,aAAAmN,QAC9C5tF,GAAAlG,MAAAkJ,KAAAzY,KAAAwU,MAAAjF,OAAA45C,eAAAnpD,KAAAwU,MAAAy9E,WAEAp+E,EAAAkE,KAAA1gB,KAAA2I,KAAAuW,EAAAd,GAEAzV,KAAAipD,OAAAjpD,KAAAwU,MAAAkzD,YACA1nE,KAAAuiF,qBA0BA1uE,EAAAo0I,iBAAA9rJ,UAAA7B,OAAA8B,OAAAyX,EAAAkE,KAAA5b,WACA0X,EAAAo0I,iBAAA9rJ,UAAAE,YAAAwX,EAAAo0I,iBAEAp0I,EAAAo0I,iBAAA9rJ,UAAAmd,QAAA,WAEAtZ,KAAAuW,SAAA+C,UACAtZ,KAAAyV,SAAA6D,WAIAzF,EAAAo0I,iBAAA9rJ,UAAA4d,OAAA,WAEA/Z,KAAAyV,SAAAlG,MAAAkJ,KAAAzY,KAAAwU,MAAAjF,OAAA45C,eAAAnpD,KAAAwU,MAAAy9E,YA4BAp+E,EAAAq0I,eAAA,SAAA/lI,GAEAniB,KAAAm7F,MAAAn7F,KAAAmoJ,YAAAhmI,EAIA,QAFA5L,GAAA,GAAA1C,GAAA6L,SAEA7lB,EAAA,EAAiBA,EAAAmG,KAAAm7F,MAAArhG,OAAuBD,IAAA,CAExC,GAAA4vG,GAAAzpG,KAAAm7F,MAAAthG,EAEA4vG,GAAAxnB,iBAAApuE,GAAA+0F,OAEAryF,EAAAkI,SAAA/d,KAAA,GAAAmT,GAAA8L,SACApJ,EAAAkI,SAAA/d,KAAA,GAAAmT,GAAA8L,SACApJ,EAAAwH,OAAArd,KAAA,GAAAmT,GAAAqiD,MAAA,QACA3/C,EAAAwH,OAAArd,KAAA,GAAAmT,GAAAqiD,MAAA,SAMA3/C,EAAAgvE,UAEA,IAAA9vE,GAAA,GAAA5B,GAAAovF,mBAA8CrrF,aAAA/D,EAAAgE,aAAAi+E,aAAAC,cAAA1+E,gBAE9CxD,GAAA2yF,aAAAnvG,KAAA2I,KAAAuW,EAAAd,GAEAzV,KAAAi5I,KAAA92H,EAEAniB,KAAAipD,OAAA9mC,EAAAulD,YACA1nE,KAAAuiF,oBAEAviF,KAAA+Z,SAKAlG,GAAAq0I,eAAA/rJ,UAAA7B,OAAA8B,OAAAyX,EAAA2yF,aAAArqG,UACA0X,GAAAq0I,eAAA/rJ,UAAAE,YAAAwX,EAAAq0I,eAEAr0I,EAAAq0I,eAAA/rJ,UAAAgsJ,YAAA,SAAAhmI,GAEA,GAAAimI,KAEAjmI,aAAAtO,GAAA+0F,MAEAw/C,EAAA1nJ,KAAAyhB,EAIA,QAAAtoB,GAAA,EAAiBA,EAAAsoB,EAAAlb,SAAAnN,OAA4BD,IAE7CuuJ,EAAA1nJ,KAAAkD,MAAAwkJ,EAAApoJ,KAAAmoJ,YAAAhmI,EAAAlb,SAAApN,IAIA,OAAAuuJ,IAIAv0I,EAAAq0I,eAAA/rJ,UAAA4d,OAAA,WAUA,OARAxD,GAAAvW,KAAAuW,SAEA8xI,MAAAx0I,GAAAyzD,SAAAG,WAAAznE,KAAAi5I,KAAAvxE,aAEA4gF,EAAA,GAAAz0I,GAAAyzD,QAEAyG,EAAA,EAEAl0E,EAAA,EAAiBA,EAAAmG,KAAAm7F,MAAArhG,OAAuBD,IAAA,CAExC,GAAA4vG,GAAAzpG,KAAAm7F,MAAAthG,EAEA4vG,GAAAxnB,iBAAApuE,GAAA+0F,OAEA0/C,EAAA/gF,iBAAA8gF,EAAA5+C,EAAA/hC,aACAnxD,EAAAkI,SAAAsvD,GAAAnF,sBAAA0/E,GAEAA,EAAA/gF,iBAAA8gF,EAAA5+C,EAAAxnB,OAAAva,aACAnxD,EAAAkI,SAAAsvD,EAAA,GAAAnF,sBAAA0/E,GAEAv6E,GAAA,GAMAx3D,EAAAkyE,sBAEAlyE,EAAA0B,yBAYApE,EAAA00I,gBAAA,SAAA/zI,GAEAX,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAAwU,QACAxU,KAAAwU,MAAAo4D,oBAEA5sE,KAAAipD,OAAAz0C,EAAAkzD,YACA1nE,KAAAuiF,mBAEA,IAAAhsE,GAAA,GAAA1C,GAAA8qF,iBAAA,aAEApoF,GAAAk2D,UAAA,SACAl2D,EAAAu8D,SAAA95D,KAAA8uC,GAAA,EAEA,IAAAryC,GAAA,GAAA5B,GAAA4vF,mBAA8CvN,aAAAmN,QAE9CrjG,MAAAqmJ,KAAA,GAAAxyI,GAAAkE,KAAAxB,EAAAd,GACAzV,KAAA+V,IAAA/V,KAAAqmJ,MAEArmJ,KAAA+Z,UAIAlG,EAAA00I,gBAAApsJ,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAA00I,gBAAApsJ,UAAAE,YAAAwX,EAAA00I,gBAEA10I,EAAA00I,gBAAApsJ,UAAAmd,QAAA,WAEAtZ,KAAAqmJ,KAAA9vI,SAAA+C,UACAtZ,KAAAqmJ,KAAA5wI,SAAA6D,WAIAzF,EAAA00I,gBAAApsJ,UAAA4d,OAAA,WAEA,GAAA47C,GAAA,GAAA9hD,GAAA8L,QACA6oI,EAAA,GAAA30I,GAAA8L,OAEA,mBAEA,GAAA8oI,GAAAzoJ,KAAAwU,MAAAa,SAAArV,KAAAwU,MAAAa,SAAA,IACAqzI,EAAAD,EAAAzvI,KAAA2wC,IAAA3pD,KAAAwU,MAAAs0C,MAEA9oD,MAAAqmJ,KAAA79F,MAAAt8C,IAAAw8I,IAAAD,GAEA9yF,EAAAiT,sBAAA5oE,KAAAwU,MAAAkzD,aACA8gF,EAAA5/E,sBAAA5oE,KAAAwU,MAAAxR,OAAA0kE,aAEA1nE,KAAAqmJ,KAAAptI,OAAAuvI,EAAA/+F,IAAAkM,IAEA31D,KAAAqmJ,KAAA5wI,SAAAlG,MAAAkJ,KAAAzY,KAAAwU,MAAAjF,OAAA45C,eAAAnpD,KAAAwU,MAAAy9E,eAaAp+E,EAAA80I,oBAAA,SAAAxmI,EAAA6mB,EAAAstB,EAAA4sC,GAEAljG,KAAAmiB,SAEAniB,KAAAgpC,KAAAjwC,SAAAiwC,IAAA,CAEA,IAAAz5B,GAAAxW,SAAAu9D,IAAA,SAEA7mD,EAAA1W,SAAAmqG,IAAA,EAIAskD,EAAA,EAEAC,EAAAznJ,KAAAmiB,OAAA5L,QAEAkxI,aAAA5zI,GAAA6L,SAEA8nI,EAAA,EAAAC,EAAAtpI,MAAArkB,OAEE2tJ,YAAA5zI,GAAA2K,iBAEFgpI,EAAAC,EAAA36E,WAAAxtD,OAAAimC,MAMA,IAAAhvC,GAAA,GAAA1C,GAAA2K,eAEAuuD,EAAA,GAAAl5D,GAAAyzE,iBAAA,EAAAkgE,EAAA,IAEAjxI,GAAA6I,aAAA,WAAA2tD,GAEAl5D,EAAA2yF,aAAAnvG,KAAA2I,KAAAuW,EAAA,GAAA1C,GAAAovF,mBAAwE1zF,QAAA2zF,UAAAzzF,KAIxEzP,KAAAuiF,oBAEAviF,KAAA+Z,UAIAlG,EAAA80I,oBAAAxsJ,UAAA7B,OAAA8B,OAAAyX,EAAA2yF,aAAArqG,WACA0X,EAAA80I,oBAAAxsJ,UAAAE,YAAAwX,EAAA80I,oBAEA90I,EAAA80I,oBAAAxsJ,UAAA4d,OAAA,WAEA,GAAAqpD,GAAA,GAAAvvD,GAAA8L,QACAwmD,EAAA,GAAAtyD,GAAA8L,QACA27D,EAAA,GAAAznE,GAAAq5D,OAEA,mBAEA,GAAAxqE,IAAA,YAEA1C,MAAAmiB,OAAAyqD,sBAEA0O,EAAA1M,gBAAA5uE,KAAAmiB,OAAAulD,YAEA,IAAAA,GAAA1nE,KAAAmiB,OAAAulD,YAEA7xD,EAAA7V,KAAAuW,SAAAu2D,WAAAj3D,SAIA4xI,EAAAznJ,KAAAmiB,OAAA5L,QAEA,IAAAkxI,YAAA5zI,GAAA6L,SAQA,OANAjB,GAAAgpI,EAAAhpI,SAEAN,EAAAspI,EAAAtpI,MAEA+tE,EAAA,EAEAryF,EAAA,EAAAuP,EAAA+U,EAAArkB,OAAqCD,EAAAuP,EAAOvP,IAI5C,OAFA8kB,GAAAR,EAAAtkB,GAEAk0E,EAAA,EAAAkb,EAAAtqE,EAAA0mE,cAAAvrF,OAAoDi0E,EAAAkb,EAAQlb,IAAA,CAE5D,GAAAib,GAAAvqE,EAAAE,EAAAjc,EAAAqrE,KAEAzuD,EAAAX,EAAA0mE,cAAAtX,EAEA3K,GAAA3qD,KAAAuwE,GAAApiB,aAAAc,GAEAvB,EAAA1tD,KAAA6G,GAAAqnD,aAAA2U,GAAAxlE,YAAAqzC,eAAAnpD,KAAAgpC,MAAAjzB,IAAAqtD,GAEAvtD,EAAAu4D,OAAA8d,EAAA9oB,EAAAn6D,EAAAm6D,EAAAv6D,EAAAu6D,EAAA74D,GAEA2hF,GAAA,EAEAr2E,EAAAu4D,OAAA8d,EAAA/lB,EAAAl9D,EAAAk9D,EAAAt9D,EAAAs9D,EAAA57D,GAEA2hF,GAAA,MAMG,IAAAu7D,YAAA5zI,GAAA2K,eAUH,OARAoqI,GAAAnB,EAAA36E,WAAAj3D,SAEAgzI,EAAApB,EAAA36E,WAAAxtD,OAEA4sE,EAAA,EAIAne,EAAA,EAAAkb,EAAA2/D,EAAArjG,MAAsCwoB,EAAAkb,EAAQlb,IAE9C3K,EAAAl3D,IAAA08I,EAAA36E,KAAAF,GAAA66E,EAAA16E,KAAAH,GAAA66E,EAAAz6E,KAAAJ,IAAAnH,aAAAc,GAEAvB,EAAAj6D,IAAA28I,EAAA56E,KAAAF,GAAA86E,EAAA36E,KAAAH,GAAA86E,EAAA16E,KAAAJ,IAEA5H,EAAAQ,aAAA2U,GAAAxlE,YAAAqzC,eAAAnpD,KAAAgpC,MAAAjzB,IAAAqtD,GAEAvtD,EAAAu4D,OAAA8d,EAAA9oB,EAAAn6D,EAAAm6D,EAAAv6D,EAAAu6D,EAAA74D,GAEA2hF,GAAA,EAEAr2E,EAAAu4D,OAAA8d,EAAA/lB,EAAAl9D,EAAAk9D,EAAAt9D,EAAAs9D,EAAA57D,GAEA2hF,GAAA,CAQA,OAFAr2E,GAAA4vE,eAEAzlF,SAYA6T,EAAAi1I,gBAAA,SAAA3mI,EAAAm0C,GAEA,GAAA/mD,GAAAxW,SAAAu9D,IAAA,QAEAziD,GAAA2yF,aAAAnvG,KAAA2I,KAAA,GAAA6T,GAAA4xI,kBAAAtjI,EAAA5L,UAAA,GAAA1C,GAAAovF,mBAA8G1zF,WAE9GvP,KAAAipD,OAAA9mC,EAAAulD,YACA1nE,KAAAuiF,qBAIA1uE,EAAAi1I,gBAAA3sJ,UAAA7B,OAAA8B,OAAAyX,EAAA2yF,aAAArqG,WACA0X,EAAAi1I,gBAAA3sJ,UAAAE,YAAAwX,EAAAi1I,gBAQAj1I,EAAAylG,sBAAA,WAEAzlG,EAAAkuE,SAAA1qF,KAAA2I,MAEAA,KAAA5H,OAAA,SAAA2wJ,MAIAl1I,EAAAylG,sBAAAn9G,UAAA7B,OAAA8B,OAAAyX,EAAAkuE,SAAA5lF,WACA0X,EAAAylG,sBAAAn9G,UAAAE,YAAAwX,EAAAylG,sBAQAzlG,EAAAm1I,eAAA,SAAAzyI,EAAAd,GAEA5B,EAAAkE,KAAA1gB,KAAA2I,KAAAuW,EAAAd,GAEAzV,KAAAipJ,iBACAjpJ,KAAAkpJ,iBAKA,IAAAC,GAAAnpJ,KAAAuW,SAAA4xE,aAAAruF,OAEAX,EAAA,YAEAiwJ,EAAA,EACAC,EAAAF,EAAA,EAEA59C,EAAA49C,EAAA,CAEAnpJ,MAAAspJ,gBAAAnwJ,EAAAiwJ,EAAAC,EAAA99C,GACAvrG,KAAAupJ,mBAAApwJ,EAAA,IAIA0a,EAAAm1I,eAAA7sJ,UAAA7B,OAAA8B,OAAAyX,EAAAkE,KAAA5b,WACA0X,EAAAm1I,eAAA7sJ,UAAAE,YAAAwX,EAAAm1I,eAEAn1I,EAAAm1I,eAAA7sJ,UAAAmtJ,gBAAA,SAAAnwJ,EAAAylB,EAAAuB,EAAAorF,GAEA,GAAAh3D,IAEA31B,QACAuB,MAEArmB,OAAAqmB,EAAAvB,EAAA,EAEA2sF,MACAjB,UAAAnqF,EAAAvB,GAAA2sF,EAEA4vC,UAAA,EACAC,aAAA,EAEAl5F,UAEA1F,KAAA,EACAo4B,UAAA,EACA0I,OAAA,EAEAotB,sBACAH,gBAIAvqG,MAAAipJ,cAAA9vJ,GAAAo7C,EACAv0C,KAAAkpJ,eAAAxoJ,KAAA6zC,IAIA1gC,EAAAm1I,eAAA7sJ,UAAAqtJ,qBAAA,SAAAj+C,GAQA,OAJAN,GAFAC,EAAA,kBAEAu+C,KAEAlzI,EAAAvW,KAAAuW,SAEA1c,EAAA,EAAA2xE,EAAAj1D,EAAA4xE,aAAAruF,OAAoDD,EAAA2xE,EAAQ3xE,IAAA,CAE5D,GAAAsxG,GAAA50F,EAAA4xE,aAAAtuF,GACAykF,EAAA6sB,EAAAhyG,KAAAiC,MAAA8vG,EAEA,IAAA5sB,KAAAxkF,OAAA,GAEA,GAAAX,GAAAmlF,EAAA,EAEAmrE,GAAAtwJ,KAAAswJ,EAAAtwJ,IAAuDylB,MAAAsC,IAAAf,MAAAe,MAEvD,IAAA1R,GAAAi6I,EAAAtwJ,EAEAU,GAAA2V,EAAAoP,QAAApP,EAAAoP,MAAA/kB,GACAA,EAAA2V,EAAA2Q,MAAA3Q,EAAA2Q,IAAAtmB,GAEAoxG,MAAA9xG,IAMA,OAAAA,KAAAswJ,GAAA,CAEA,GAAAj6I,GAAAi6I,EAAAtwJ,EACA6G,MAAAspJ,gBAAAnwJ,EAAAqW,EAAAoP,MAAApP,EAAA2Q,IAAAorF,GAIAvrG,KAAAirG,kBAIAp3F,EAAAm1I,eAAA7sJ,UAAAutJ,6BAAA,SAAAvwJ,GAEA,GAAAo7C,GAAAv0C,KAAAipJ,cAAA9vJ,EAEAo7C,KAEAA,EAAAqgC,UAAA,EACArgC,EAAAm2D,wBAMA72F,EAAAm1I,eAAA7sJ,UAAAwtJ,8BAAA,SAAAxwJ,GAEA,GAAAo7C,GAAAv0C,KAAAipJ,cAAA9vJ,EAEAo7C,KAEAA,EAAAqgC,aACArgC,EAAAm2D,wBAMA72F,EAAAm1I,eAAA7sJ,UAAAytJ,gBAAA,SAAAzwJ,EAAAoyG,GAEA,GAAAh3D,GAAAv0C,KAAAipJ,cAAA9vJ,EAEAo7C,KAEAA,EAAAg3D,MACAh3D,EAAA+1D,UAAA/1D,EAAAp0B,IAAAo0B,EAAA31B,OAAA21B,EAAAg3D,MAMA13F,EAAAm1I,eAAA7sJ,UAAA0tJ,qBAAA,SAAA1wJ,EAAAmxG,GAEA,GAAA/1D,GAAAv0C,KAAAipJ,cAAA9vJ,EAEAo7C,KAEAA,EAAA+1D,WACA/1D,EAAAg3D,KAAAh3D,EAAAp0B,IAAAo0B,EAAA31B,OAAA21B,EAAA+1D,WAMAz2F,EAAAm1I,eAAA7sJ,UAAAotJ,mBAAA,SAAApwJ,EAAAmkF,GAEA,GAAA/oC,GAAAv0C,KAAAipJ,cAAA9vJ,EAEAo7C,KAEAA,EAAA+oC,WAMAzpE,EAAAm1I,eAAA7sJ,UAAA2tJ,iBAAA,SAAA3wJ,EAAAqjD,GAEA,GAAAjI,GAAAv0C,KAAAipJ,cAAA9vJ,EAEAo7C,KAEAA,EAAAiI,SAMA3oC,EAAAm1I,eAAA7sJ,UAAA4tJ,iBAAA,SAAA5wJ,GAEA,GAAAqjD,GAAA,EAEAjI,EAAAv0C,KAAAipJ,cAAA9vJ,EAQA,OANAo7C,KAEAiI,EAAAjI,EAAAiI,MAIAA,GAIA3oC,EAAAm1I,eAAA7sJ,UAAA6tJ,qBAAA,SAAA7wJ,GAEA,GAAAmxG,MAEA/1D,EAAAv0C,KAAAipJ,cAAA9vJ,EAQA,OANAo7C,KAEA+1D,EAAA/1D,EAAA+1D,UAIAA,GAIAz2F,EAAAm1I,eAAA7sJ,UAAAmvG,cAAA,SAAAnyG,GAEA,GAAAo7C,GAAAv0C,KAAAipJ,cAAA9vJ,EAEAo7C,IAEAA,EAAAiI,KAAA,EACAjI,EAAA2N,WAIA1+C,QAAAwmD,KAAA,mCAAA7wD,EAAA,oCAMA0a,EAAAm1I,eAAA7sJ,UAAA8tJ,cAAA,SAAA9wJ,GAEA,GAAAo7C,GAAAv0C,KAAAipJ,cAAA9vJ,EAEAo7C,KAEAA,EAAA2N,YAMAruC,EAAAm1I,eAAA7sJ,UAAA4d,OAAA,SAAA2zC,GAEA,OAAA7zD,GAAA,EAAA2xE,EAAAxrE,KAAAkpJ,eAAApvJ,OAAkDD,EAAA2xE,EAAQ3xE,IAAA,CAE1D,GAAA06C,GAAAv0C,KAAAkpJ,eAAArvJ,EAEA,IAAA06C,EAAA2N,OAAA,CAEA,GAAAupD,GAAAl3D,EAAA+1D,SAAA/1D,EAAAz6C,MAEAy6C,GAAAiI,MAAAjI,EAAAqgC,UAAAlnB,EAEAnZ,EAAAg2D,cAEAh2D,EAAAiI,KAAAjI,EAAA+1D,UAAA/1D,EAAAiI,KAAA,KAEAjI,EAAAqgC,cAEArgC,EAAAiI,KAAAjI,EAAA+1D,WAEA/1D,EAAAiI,KAAAjI,EAAA+1D,SACA/1D,EAAAm2D,uBAIAn2D,EAAAiI,KAAA,IAEAjI,EAAAiI,KAAA,EACAjI,EAAAm2D,yBAQAn2D,EAAAiI,KAAAjI,EAAAiI,KAAAjI,EAAA+1D,SAEA/1D,EAAAiI,KAAA,IAAAjI,EAAAiI,MAAAjI,EAAA+1D,UAIA,IAAAoB,GAAAn3D,EAAA31B,MAAA/K,EAAAmF,KAAA09C,MAAA19C,KAAA2tC,MAAApS,EAAAiI,KAAAivD,GAAA,EAAAl3D,EAAAz6C,OAAA,GACAwjF,EAAA/oC,EAAA+oC,MAEAouB,KAAAn3D,EAAA6mG,eAEAp7I,KAAAsnG,sBAAA/yD,EAAA4mG,WAAA,EACAn7I,KAAAsnG,sBAAA/yD,EAAA6mG,cAAA,EAAA99D,EAEAt9E,KAAAsnG,sBAAAoE,GAAA,EAEAn3D,EAAA4mG,UAAA5mG,EAAA6mG,aACA7mG,EAAA6mG,aAAA1vC,EAIA,IAAAE,GAAAr3D,EAAAiI,KAAAivD,GAEAl3D,GAAAm2D,qBAAAkB,EAAA,EAAAA,GAEAr3D,EAAA6mG,eAAA7mG,EAAA4mG,WAEAn7I,KAAAsnG,sBAAA/yD,EAAA6mG,cAAAxvC,EAAAtuB,EACAt9E,KAAAsnG,sBAAA/yD,EAAA4mG,YAAA,EAAAvvC,GAAAtuB,GAIAt9E,KAAAsnG,sBAAA/yD,EAAA6mG,cAAA99D,KAcA,mBAAApmF,MAAAD,UACAA,EAAAC,EAAAD,QAAA4c,GAEA5c,EAAA4c","file":"react-bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(9);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _App = __webpack_require__(20);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_reactDom2.default.render(_react2.default.createElement(_App2.default, null), document.getElementById('react-app'));\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tif (true) {\n\t  module.exports = __webpack_require__(30);\n\t} else {\n\t  module.exports = require('./cjs/react.development.js');\n\t}\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\tfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\t\n\tvar hashString = _interopDefault(__webpack_require__(15));\n\tvar unitless = _interopDefault(__webpack_require__(18));\n\tvar memoize = _interopDefault(__webpack_require__(16));\n\t\n\tvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\n\tvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\n\tvar hyphenateRegex = /[A-Z]|^ms/g;\n\tvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\t\n\tvar isCustomProperty = function isCustomProperty(property) {\n\t  return property.charCodeAt(1) === 45;\n\t};\n\t\n\tvar isProcessableValue = function isProcessableValue(value) {\n\t  return value != null && typeof value !== 'boolean';\n\t};\n\t\n\tvar processStyleName = memoize(function (styleName) {\n\t  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n\t});\n\t\n\tvar processStyleValue = function processStyleValue(key, value) {\n\t  switch (key) {\n\t    case 'animation':\n\t    case 'animationName':\n\t      {\n\t        if (typeof value === 'string') {\n\t          return value.replace(animationRegex, function (match, p1, p2) {\n\t            cursor = {\n\t              name: p1,\n\t              styles: p2,\n\t              next: cursor\n\t            };\n\t            return p1;\n\t          });\n\t        }\n\t      }\n\t  }\n\t\n\t  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n\t    return value + 'px';\n\t  }\n\t\n\t  return value;\n\t};\n\t\n\tif (false) {\n\t  var contentValuePattern = /(attr|calc|counters?|url)\\(/;\n\t  var contentValues = ['normal', 'none', 'counter', 'open-quote', 'close-quote', 'no-open-quote', 'no-close-quote', 'initial', 'inherit', 'unset'];\n\t  var oldProcessStyleValue = processStyleValue;\n\t  var msPattern = /^-ms-/;\n\t  var hyphenPattern = /-(.)/g;\n\t  var hyphenatedCache = {};\n\t\n\t  processStyleValue = function processStyleValue(key, value) {\n\t    if (key === 'content') {\n\t      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n\t        console.error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n\t      }\n\t    }\n\t\n\t    var processed = oldProcessStyleValue(key, value);\n\t\n\t    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n\t      hyphenatedCache[key] = true;\n\t      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n\t        return _char.toUpperCase();\n\t      }) + \"?\");\n\t    }\n\t\n\t    return processed;\n\t  };\n\t}\n\t\n\tvar shouldWarnAboutInterpolatingClassNameFromCss = true;\n\t\n\tfunction handleInterpolation(mergedProps, registered, interpolation, couldBeSelectorInterpolation) {\n\t  if (interpolation == null) {\n\t    return '';\n\t  }\n\t\n\t  if (interpolation.__emotion_styles !== undefined) {\n\t    if (false) {\n\t      throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n\t    }\n\t\n\t    return interpolation;\n\t  }\n\t\n\t  switch (typeof interpolation) {\n\t    case 'boolean':\n\t      {\n\t        return '';\n\t      }\n\t\n\t    case 'object':\n\t      {\n\t        if (interpolation.anim === 1) {\n\t          cursor = {\n\t            name: interpolation.name,\n\t            styles: interpolation.styles,\n\t            next: cursor\n\t          };\n\t          return interpolation.name;\n\t        }\n\t\n\t        if (interpolation.styles !== undefined) {\n\t          var next = interpolation.next;\n\t\n\t          if (next !== undefined) {\n\t            // not the most efficient thing ever but this is a pretty rare case\n\t            // and there will be very few iterations of this generally\n\t            while (next !== undefined) {\n\t              cursor = {\n\t                name: next.name,\n\t                styles: next.styles,\n\t                next: cursor\n\t              };\n\t              next = next.next;\n\t            }\n\t          }\n\t\n\t          var styles = interpolation.styles + \";\";\n\t\n\t          if (false) {\n\t            styles += interpolation.map;\n\t          }\n\t\n\t          return styles;\n\t        }\n\t\n\t        return createStringFromObject(mergedProps, registered, interpolation);\n\t      }\n\t\n\t    case 'function':\n\t      {\n\t        if (mergedProps !== undefined) {\n\t          var previousCursor = cursor;\n\t          var result = interpolation(mergedProps);\n\t          cursor = previousCursor;\n\t          return handleInterpolation(mergedProps, registered, result, couldBeSelectorInterpolation);\n\t        } else if (false) {\n\t          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n\t        }\n\t\n\t        break;\n\t      }\n\t\n\t    case 'string':\n\t      if (false) {\n\t        var matched = [];\n\t        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n\t          var fakeVarName = \"animation\" + matched.length;\n\t          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n\t          return \"${\" + fakeVarName + \"}\";\n\t        });\n\t\n\t        if (matched.length) {\n\t          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n\t        }\n\t      }\n\t\n\t      break;\n\t  } // finalize string values (regular strings and functions interpolated into css calls)\n\t\n\t\n\t  if (registered == null) {\n\t    return interpolation;\n\t  }\n\t\n\t  var cached = registered[interpolation];\n\t\n\t  if (false) {\n\t    console.error('Interpolating a className from css`` is not recommended and will cause problems with composition.\\n' + 'Interpolating a className from css`` will be completely unsupported in a future major version of Emotion');\n\t    shouldWarnAboutInterpolatingClassNameFromCss = false;\n\t  }\n\t\n\t  return cached !== undefined && !couldBeSelectorInterpolation ? cached : interpolation;\n\t}\n\t\n\tfunction createStringFromObject(mergedProps, registered, obj) {\n\t  var string = '';\n\t\n\t  if (Array.isArray(obj)) {\n\t    for (var i = 0; i < obj.length; i++) {\n\t      string += handleInterpolation(mergedProps, registered, obj[i], false);\n\t    }\n\t  } else {\n\t    for (var _key in obj) {\n\t      var value = obj[_key];\n\t\n\t      if (typeof value !== 'object') {\n\t        if (registered != null && registered[value] !== undefined) {\n\t          string += _key + \"{\" + registered[value] + \"}\";\n\t        } else if (isProcessableValue(value)) {\n\t          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n\t        }\n\t      } else {\n\t        if (_key === 'NO_COMPONENT_SELECTOR' && (\"production\") !== 'production') {\n\t          throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n\t        }\n\t\n\t        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n\t          for (var _i = 0; _i < value.length; _i++) {\n\t            if (isProcessableValue(value[_i])) {\n\t              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n\t            }\n\t          }\n\t        } else {\n\t          var interpolated = handleInterpolation(mergedProps, registered, value, false);\n\t\n\t          switch (_key) {\n\t            case 'animation':\n\t            case 'animationName':\n\t              {\n\t                string += processStyleName(_key) + \":\" + interpolated + \";\";\n\t                break;\n\t              }\n\t\n\t            default:\n\t              {\n\t                if (false) {\n\t                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n\t                }\n\t\n\t                string += _key + \"{\" + interpolated + \"}\";\n\t              }\n\t          }\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  return string;\n\t}\n\t\n\tvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*;/g;\n\tvar sourceMapPattern;\n\t\n\tif (false) {\n\t  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//;\n\t} // this is the cursor for keyframes\n\t// keyframes are stored on the SerializedStyles object as a linked list\n\t\n\t\n\tvar cursor;\n\tvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n\t  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n\t    return args[0];\n\t  }\n\t\n\t  var stringMode = true;\n\t  var styles = '';\n\t  cursor = undefined;\n\t  var strings = args[0];\n\t\n\t  if (strings == null || strings.raw === undefined) {\n\t    stringMode = false;\n\t    styles += handleInterpolation(mergedProps, registered, strings, false);\n\t  } else {\n\t    if (false) {\n\t      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n\t    }\n\t\n\t    styles += strings[0];\n\t  } // we start at 1 since we've already handled the first arg\n\t\n\t\n\t  for (var i = 1; i < args.length; i++) {\n\t    styles += handleInterpolation(mergedProps, registered, args[i], styles.charCodeAt(styles.length - 1) === 46);\n\t\n\t    if (stringMode) {\n\t      if (false) {\n\t        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n\t      }\n\t\n\t      styles += strings[i];\n\t    }\n\t  }\n\t\n\t  var sourceMap;\n\t\n\t  if (false) {\n\t    styles = styles.replace(sourceMapPattern, function (match) {\n\t      sourceMap = match;\n\t      return '';\n\t    });\n\t  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\t\n\t\n\t  labelPattern.lastIndex = 0;\n\t  var identifierName = '';\n\t  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\t\n\t  while ((match = labelPattern.exec(styles)) !== null) {\n\t    identifierName += '-' + // $FlowFixMe we know it's not null\n\t    match[1];\n\t  }\n\t\n\t  var name = hashString(styles) + identifierName;\n\t\n\t  if (false) {\n\t    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n\t    return {\n\t      name: name,\n\t      styles: styles,\n\t      map: sourceMap,\n\t      next: cursor,\n\t      toString: function toString() {\n\t        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n\t      }\n\t    };\n\t  }\n\t\n\t  return {\n\t    name: name,\n\t    styles: styles,\n\t    next: cursor\n\t  };\n\t};\n\t\n\texports.serializeStyles = serializeStyles;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar setPrototypeOf = __webpack_require__(12);\n\tfunction _inheritsLoose(subClass, superClass) {\n\t  subClass.prototype = Object.create(superClass.prototype);\n\t  subClass.prototype.constructor = subClass;\n\t  setPrototypeOf(subClass, superClass);\n\t}\n\tmodule.exports = _inheritsLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\tfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\t\n\tvar sheet = __webpack_require__(6);\n\tvar Stylis = _interopDefault(__webpack_require__(17));\n\t__webpack_require__(19);\n\t\n\t// https://github.com/thysultan/stylis.js/tree/master/plugins/rule-sheet\n\t// inlined to avoid umd wrapper and peerDep warnings/installing stylis\n\t// since we use stylis after closure compiler\n\tvar delimiter = '/*|*/';\n\tvar needle = delimiter + '}';\n\t\n\tfunction toSheet(block) {\n\t  if (block) {\n\t    Sheet.current.insert(block + '}');\n\t  }\n\t}\n\t\n\tvar Sheet = {\n\t  current: null\n\t};\n\tvar ruleSheet = function ruleSheet(context, content, selectors, parents, line, column, length, ns, depth, at) {\n\t  switch (context) {\n\t    // property\n\t    case 1:\n\t      {\n\t        switch (content.charCodeAt(0)) {\n\t          case 64:\n\t            {\n\t              // @import\n\t              Sheet.current.insert(content + ';');\n\t              return '';\n\t            }\n\t          // charcode for l\n\t\n\t          case 108:\n\t            {\n\t              // charcode for b\n\t              // this ignores label\n\t              if (content.charCodeAt(2) === 98) {\n\t                return '';\n\t              }\n\t            }\n\t        }\n\t\n\t        break;\n\t      }\n\t    // selector\n\t\n\t    case 2:\n\t      {\n\t        if (ns === 0) return content + delimiter;\n\t        break;\n\t      }\n\t    // at-rule\n\t\n\t    case 3:\n\t      {\n\t        switch (ns) {\n\t          // @font-face, @page\n\t          case 102:\n\t          case 112:\n\t            {\n\t              Sheet.current.insert(selectors[0] + content);\n\t              return '';\n\t            }\n\t\n\t          default:\n\t            {\n\t              return content + (at === 0 ? delimiter : '');\n\t            }\n\t        }\n\t      }\n\t\n\t    case -2:\n\t      {\n\t        content.split(needle).forEach(toSheet);\n\t      }\n\t  }\n\t};\n\t\n\tvar createCache = function createCache(options) {\n\t  if (options === undefined) options = {};\n\t  var key = options.key || 'css';\n\t  var stylisOptions;\n\t\n\t  if (options.prefix !== undefined) {\n\t    stylisOptions = {\n\t      prefix: options.prefix\n\t    };\n\t  }\n\t\n\t  var stylis = new Stylis(stylisOptions);\n\t\n\t  if (false) {\n\t    // $FlowFixMe\n\t    if (/[^a-z-]/.test(key)) {\n\t      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n\t    }\n\t  }\n\t\n\t  var inserted = {}; // $FlowFixMe\n\t\n\t  var container;\n\t\n\t  {\n\t    container = options.container || document.head;\n\t    var nodes = document.querySelectorAll(\"style[data-emotion-\" + key + \"]\");\n\t    Array.prototype.forEach.call(nodes, function (node) {\n\t      var attrib = node.getAttribute(\"data-emotion-\" + key); // $FlowFixMe\n\t\n\t      attrib.split(' ').forEach(function (id) {\n\t        inserted[id] = true;\n\t      });\n\t\n\t      if (node.parentNode !== container) {\n\t        container.appendChild(node);\n\t      }\n\t    });\n\t  }\n\t\n\t  var _insert;\n\t\n\t  {\n\t    stylis.use(options.stylisPlugins)(ruleSheet);\n\t\n\t    _insert = function insert(selector, serialized, sheet, shouldCache) {\n\t      var name = serialized.name;\n\t      Sheet.current = sheet;\n\t\n\t      if (false) {\n\t        var map = serialized.map;\n\t        Sheet.current = {\n\t          insert: function insert(rule) {\n\t            sheet.insert(rule + map);\n\t          }\n\t        };\n\t      }\n\t\n\t      stylis(selector, serialized.styles);\n\t\n\t      if (shouldCache) {\n\t        cache.inserted[name] = true;\n\t      }\n\t    };\n\t  }\n\t\n\t  if (false) {\n\t    // https://esbench.com/bench/5bf7371a4cd7e6009ef61d0a\n\t    var commentStart = /\\/\\*/g;\n\t    var commentEnd = /\\*\\//g;\n\t    stylis.use(function (context, content) {\n\t      switch (context) {\n\t        case -1:\n\t          {\n\t            while (commentStart.test(content)) {\n\t              commentEnd.lastIndex = commentStart.lastIndex;\n\t\n\t              if (commentEnd.test(content)) {\n\t                commentStart.lastIndex = commentEnd.lastIndex;\n\t                continue;\n\t              }\n\t\n\t              throw new Error('Your styles have an unterminated comment (\"/*\" without corresponding \"*/\").');\n\t            }\n\t\n\t            commentStart.lastIndex = 0;\n\t            break;\n\t          }\n\t      }\n\t    });\n\t    stylis.use(function (context, content, selectors) {\n\t      switch (context) {\n\t        case -1:\n\t          {\n\t            var flag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n\t            var unsafePseudoClasses = content.match(/(:first|:nth|:nth-last)-child/g);\n\t\n\t            if (unsafePseudoClasses && cache.compat !== true) {\n\t              unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n\t                var ignoreRegExp = new RegExp(unsafePseudoClass + \".*\\\\/\\\\* \" + flag + \" \\\\*\\\\/\");\n\t                var ignore = ignoreRegExp.test(content);\n\t\n\t                if (unsafePseudoClass && !ignore) {\n\t                  console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n\t                }\n\t              });\n\t            }\n\t\n\t            break;\n\t          }\n\t      }\n\t    });\n\t  }\n\t\n\t  var cache = {\n\t    key: key,\n\t    sheet: new sheet.StyleSheet({\n\t      key: key,\n\t      container: container,\n\t      nonce: options.nonce,\n\t      speedy: options.speedy\n\t    }),\n\t    nonce: options.nonce,\n\t    inserted: inserted,\n\t    registered: {},\n\t    insert: _insert\n\t  };\n\t  return cache;\n\t};\n\t\n\texports.default = createCache;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\tvar serialize = __webpack_require__(2);\n\t\n\tfunction css() {\n\t  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n\t    args[_key] = arguments[_key];\n\t  }\n\t\n\t  return serialize.serializeStyles(args);\n\t}\n\t\n\texports.default = css;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\t/*\n\t\n\tBased off glamor's StyleSheet, thanks Sunil ❤️\n\t\n\thigh performance StyleSheet for css-in-js systems\n\t\n\t- uses multiple style tags behind the scenes for millions of rules\n\t- uses `insertRule` for appending in production for *much* faster performance\n\t\n\t// usage\n\t\n\timport { StyleSheet } from '@emotion/sheet'\n\t\n\tlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\t\n\tstyleSheet.insert('#box { border: 1px solid red; }')\n\t- appends a css rule into the stylesheet\n\t\n\tstyleSheet.flush()\n\t- empties the stylesheet of all its contents\n\t\n\t*/\n\t// $FlowFixMe\n\tfunction sheetForTag(tag) {\n\t  if (tag.sheet) {\n\t    // $FlowFixMe\n\t    return tag.sheet;\n\t  } // this weirdness brought to you by firefox\n\t\n\t  /* istanbul ignore next */\n\t\n\t\n\t  for (var i = 0; i < document.styleSheets.length; i++) {\n\t    if (document.styleSheets[i].ownerNode === tag) {\n\t      // $FlowFixMe\n\t      return document.styleSheets[i];\n\t    }\n\t  }\n\t}\n\t\n\tfunction createStyleElement(options) {\n\t  var tag = document.createElement('style');\n\t  tag.setAttribute('data-emotion', options.key);\n\t\n\t  if (options.nonce !== undefined) {\n\t    tag.setAttribute('nonce', options.nonce);\n\t  }\n\t\n\t  tag.appendChild(document.createTextNode(''));\n\t  return tag;\n\t}\n\t\n\tvar StyleSheet =\n\t/*#__PURE__*/\n\tfunction () {\n\t  function StyleSheet(options) {\n\t    this.isSpeedy = options.speedy === undefined ? (\"production\") === 'production' : options.speedy;\n\t    this.tags = [];\n\t    this.ctr = 0;\n\t    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\t\n\t    this.key = options.key;\n\t    this.container = options.container;\n\t    this.before = null;\n\t  }\n\t\n\t  var _proto = StyleSheet.prototype;\n\t\n\t  _proto.insert = function insert(rule) {\n\t    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n\t    // it's 1 in dev because we insert source maps that map a single rule to a location\n\t    // and you can only have one source map per style tag\n\t    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n\t      var _tag = createStyleElement(this);\n\t\n\t      var before;\n\t\n\t      if (this.tags.length === 0) {\n\t        before = this.before;\n\t      } else {\n\t        before = this.tags[this.tags.length - 1].nextSibling;\n\t      }\n\t\n\t      this.container.insertBefore(_tag, before);\n\t      this.tags.push(_tag);\n\t    }\n\t\n\t    var tag = this.tags[this.tags.length - 1];\n\t\n\t    if (this.isSpeedy) {\n\t      var sheet = sheetForTag(tag);\n\t\n\t      try {\n\t        // this is a really hot path\n\t        // we check the second character first because having \"i\"\n\t        // as the second character will happen less often than\n\t        // having \"@\" as the first character\n\t        var isImportRule = rule.charCodeAt(1) === 105 && rule.charCodeAt(0) === 64; // this is the ultrafast version, works across browsers\n\t        // the big drawback is that the css won't be editable in devtools\n\t\n\t        sheet.insertRule(rule, // we need to insert @import rules before anything else\n\t        // otherwise there will be an error\n\t        // technically this means that the @import rules will\n\t        // _usually_(not always since there could be multiple style tags)\n\t        // be the first ones in prod and generally later in dev\n\t        // this shouldn't really matter in the real world though\n\t        // @import is generally only used for font faces from google fonts and etc.\n\t        // so while this could be technically correct then it would be slower and larger\n\t        // for a tiny bit of correctness that won't matter in the real world\n\t        isImportRule ? 0 : sheet.cssRules.length);\n\t      } catch (e) {\n\t        if (false) {\n\t          console.warn(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n\t        }\n\t      }\n\t    } else {\n\t      tag.appendChild(document.createTextNode(rule));\n\t    }\n\t\n\t    this.ctr++;\n\t  };\n\t\n\t  _proto.flush = function flush() {\n\t    // $FlowFixMe\n\t    this.tags.forEach(function (tag) {\n\t      return tag.parentNode.removeChild(tag);\n\t    });\n\t    this.tags = [];\n\t    this.ctr = 0;\n\t  };\n\t\n\t  return StyleSheet;\n\t}();\n\t\n\texports.StyleSheet = StyleSheet;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\tvar isBrowser = \"object\" !== 'undefined';\n\tfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n\t  var rawClassName = '';\n\t  classNames.split(' ').forEach(function (className) {\n\t    if (registered[className] !== undefined) {\n\t      registeredStyles.push(registered[className]);\n\t    } else {\n\t      rawClassName += className + \" \";\n\t    }\n\t  });\n\t  return rawClassName;\n\t}\n\tvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n\t  var className = cache.key + \"-\" + serialized.name;\n\t\n\t  if ( // we only need to add the styles to the registered cache if the\n\t  // class name could be used further down\n\t  // the tree but if it's a string tag, we know it won't\n\t  // so we don't have to add it to registered cache.\n\t  // this improves memory usage since we can avoid storing the whole style string\n\t  (isStringTag === false || // we need to always store it if we're in compat mode and\n\t  // in node since emotion-server relies on whether a style is in\n\t  // the registered cache to know whether a style is global or not\n\t  // also, note that this check will be dead code eliminated in the browser\n\t  isBrowser === false && cache.compat !== undefined) && cache.registered[className] === undefined) {\n\t    cache.registered[className] = serialized.styles;\n\t  }\n\t\n\t  if (cache.inserted[serialized.name] === undefined) {\n\t    var current = serialized;\n\t\n\t    do {\n\t      var maybeStyles = cache.insert(\".\" + className, current, cache.sheet, true);\n\t\n\t      current = current.next;\n\t    } while (current !== undefined);\n\t  }\n\t};\n\t\n\texports.getRegisteredStyles = getRegisteredStyles;\n\texports.insertStyles = insertStyles;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n\t/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/\n\t\n\t'use strict';\n\t/* eslint-disable no-unused-vars */\n\tvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\t\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\t\n\t\treturn Object(val);\n\t}\n\t\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\t\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\t\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (getOwnPropertySymbols) {\n\t\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn to;\n\t};\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction checkDCE() {\n\t  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n\t  if (\n\t    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n\t    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n\t  ) {\n\t    return;\n\t  }\n\t  if (false) {\n\t    // This branch is unreachable because this function is only called\n\t    // in production, but the condition is true only in development.\n\t    // Therefore if the branch is still here, dead code elimination wasn't\n\t    // properly applied.\n\t    // Don't change the message. React DevTools relies on it. Also make sure\n\t    // this message doesn't occur elsewhere in this function, or it will cause\n\t    // a false positive.\n\t    throw new Error('^_^');\n\t  }\n\t  try {\n\t    // Verify that the code above has been dead code eliminated (DCE'd).\n\t    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n\t  } catch (err) {\n\t    // DevTools shouldn't crash React, no matter what.\n\t    // We should still report in case we break this code.\n\t    console.error(err);\n\t  }\n\t}\n\t\n\tif (true) {\n\t  // DCE check should happen before ReactDOM bundle executes so that\n\t  // DevTools can report bad minification during injection.\n\t  checkDCE();\n\t  module.exports = __webpack_require__(28);\n\t} else {\n\t  module.exports = require('./cjs/react-dom.development.js');\n\t}\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\tfunction _extends() {\n\t  module.exports = _extends = Object.assign ? Object.assign.bind() : function (target) {\n\t    for (var i = 1; i < arguments.length; i++) {\n\t      var source = arguments[i];\n\t      for (var key in source) {\n\t        if (Object.prototype.hasOwnProperty.call(source, key)) {\n\t          target[key] = source[key];\n\t        }\n\t      }\n\t    }\n\t    return target;\n\t  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n\t  return _extends.apply(this, arguments);\n\t}\n\tmodule.exports = _extends, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\n\tfunction _objectWithoutPropertiesLoose(source, excluded) {\n\t  if (source == null) return {};\n\t  var target = {};\n\t  var sourceKeys = Object.keys(source);\n\t  var key, i;\n\t  for (i = 0; i < sourceKeys.length; i++) {\n\t    key = sourceKeys[i];\n\t    if (excluded.indexOf(key) >= 0) continue;\n\t    target[key] = source[key];\n\t  }\n\t  return target;\n\t}\n\tmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\tfunction _setPrototypeOf(o, p) {\n\t  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n\t    o.__proto__ = p;\n\t    return o;\n\t  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n\t  return _setPrototypeOf(o, p);\n\t}\n\tmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\tvar _inheritsLoose = __webpack_require__(3);\n\tvar React = __webpack_require__(1);\n\t__webpack_require__(4);\n\tvar emotionElement = __webpack_require__(14);\n\tvar utils = __webpack_require__(7);\n\tvar serialize = __webpack_require__(2);\n\tvar sheet = __webpack_require__(6);\n\tvar css = __webpack_require__(5);\n\t\n\tfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\t\n\tvar _inheritsLoose__default = /*#__PURE__*/_interopDefault(_inheritsLoose);\n\tvar css__default = /*#__PURE__*/_interopDefault(css);\n\t\n\tvar jsx = function jsx(type, props) {\n\t  var args = arguments;\n\t\n\t  if (props == null || !emotionElement.hasOwnProperty.call(props, 'css')) {\n\t    // $FlowFixMe\n\t    return React.createElement.apply(undefined, args);\n\t  }\n\t\n\t  var argsLength = args.length;\n\t  var createElementArgArray = new Array(argsLength);\n\t  createElementArgArray[0] = emotionElement.Emotion;\n\t  createElementArgArray[1] = emotionElement.createEmotionProps(type, props);\n\t\n\t  for (var i = 2; i < argsLength; i++) {\n\t    createElementArgArray[i] = args[i];\n\t  } // $FlowFixMe\n\t\n\t\n\t  return React.createElement.apply(null, createElementArgArray);\n\t};\n\t\n\tvar warnedAboutCssPropForGlobal = false;\n\tvar Global = /* #__PURE__ */emotionElement.withEmotionCache(function (props, cache) {\n\t  if (false) {\n\t    console.error(\"It looks like you're using the css prop on Global, did you mean to use the styles prop instead?\");\n\t    warnedAboutCssPropForGlobal = true;\n\t  }\n\t\n\t  var styles = props.styles;\n\t\n\t  if (typeof styles === 'function') {\n\t    return /*#__PURE__*/React.createElement(emotionElement.ThemeContext.Consumer, null, function (theme) {\n\t      var serialized = serialize.serializeStyles([styles(theme)]);\n\t      return /*#__PURE__*/React.createElement(InnerGlobal, {\n\t        serialized: serialized,\n\t        cache: cache\n\t      });\n\t    });\n\t  }\n\t\n\t  var serialized = serialize.serializeStyles([styles]);\n\t  return /*#__PURE__*/React.createElement(InnerGlobal, {\n\t    serialized: serialized,\n\t    cache: cache\n\t  });\n\t});\n\t\n\t// maintain place over rerenders.\n\t// initial render from browser, insertBefore context.sheet.tags[0] or if a style hasn't been inserted there yet, appendChild\n\t// initial client-side render from SSR, use place of hydrating tag\n\tvar InnerGlobal = /*#__PURE__*/function (_React$Component) {\n\t  _inheritsLoose__default['default'](InnerGlobal, _React$Component);\n\t\n\t  function InnerGlobal(props, context, updater) {\n\t    return _React$Component.call(this, props, context, updater) || this;\n\t  }\n\t\n\t  var _proto = InnerGlobal.prototype;\n\t\n\t  _proto.componentDidMount = function componentDidMount() {\n\t    this.sheet = new sheet.StyleSheet({\n\t      key: this.props.cache.key + \"-global\",\n\t      nonce: this.props.cache.sheet.nonce,\n\t      container: this.props.cache.sheet.container\n\t    }); // $FlowFixMe\n\t\n\t    var node = document.querySelector(\"style[data-emotion-\" + this.props.cache.key + \"=\\\"\" + this.props.serialized.name + \"\\\"]\");\n\t\n\t    if (node !== null) {\n\t      this.sheet.tags.push(node);\n\t    }\n\t\n\t    if (this.props.cache.sheet.tags.length) {\n\t      this.sheet.before = this.props.cache.sheet.tags[0];\n\t    }\n\t\n\t    this.insertStyles();\n\t  };\n\t\n\t  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t    if (prevProps.serialized.name !== this.props.serialized.name) {\n\t      this.insertStyles();\n\t    }\n\t  };\n\t\n\t  _proto.insertStyles = function insertStyles() {\n\t    if (this.props.serialized.next !== undefined) {\n\t      // insert keyframes\n\t      utils.insertStyles(this.props.cache, this.props.serialized.next, true);\n\t    }\n\t\n\t    if (this.sheet.tags.length) {\n\t      // if this doesn't exist then it will be null so the style element will be appended\n\t      var element = this.sheet.tags[this.sheet.tags.length - 1].nextElementSibling;\n\t      this.sheet.before = element;\n\t      this.sheet.flush();\n\t    }\n\t\n\t    this.props.cache.insert(\"\", this.props.serialized, this.sheet, false);\n\t  };\n\t\n\t  _proto.componentWillUnmount = function componentWillUnmount() {\n\t    this.sheet.flush();\n\t  };\n\t\n\t  _proto.render = function render() {\n\t\n\t    return null;\n\t  };\n\t\n\t  return InnerGlobal;\n\t}(React.Component);\n\t\n\tvar keyframes = function keyframes() {\n\t  var insertable = css__default['default'].apply(void 0, arguments);\n\t  var name = \"animation-\" + insertable.name; // $FlowFixMe\n\t\n\t  return {\n\t    name: name,\n\t    styles: \"@keyframes \" + name + \"{\" + insertable.styles + \"}\",\n\t    anim: 1,\n\t    toString: function toString() {\n\t      return \"_EMO_\" + this.name + \"_\" + this.styles + \"_EMO_\";\n\t    }\n\t  };\n\t};\n\t\n\tvar classnames = function classnames(args) {\n\t  var len = args.length;\n\t  var i = 0;\n\t  var cls = '';\n\t\n\t  for (; i < len; i++) {\n\t    var arg = args[i];\n\t    if (arg == null) continue;\n\t    var toAdd = void 0;\n\t\n\t    switch (typeof arg) {\n\t      case 'boolean':\n\t        break;\n\t\n\t      case 'object':\n\t        {\n\t          if (Array.isArray(arg)) {\n\t            toAdd = classnames(arg);\n\t          } else {\n\t            toAdd = '';\n\t\n\t            for (var k in arg) {\n\t              if (arg[k] && k) {\n\t                toAdd && (toAdd += ' ');\n\t                toAdd += k;\n\t              }\n\t            }\n\t          }\n\t\n\t          break;\n\t        }\n\t\n\t      default:\n\t        {\n\t          toAdd = arg;\n\t        }\n\t    }\n\t\n\t    if (toAdd) {\n\t      cls && (cls += ' ');\n\t      cls += toAdd;\n\t    }\n\t  }\n\t\n\t  return cls;\n\t};\n\t\n\tfunction merge(registered, css, className) {\n\t  var registeredStyles = [];\n\t  var rawClassName = utils.getRegisteredStyles(registered, registeredStyles, className);\n\t\n\t  if (registeredStyles.length < 2) {\n\t    return className;\n\t  }\n\t\n\t  return rawClassName + css(registeredStyles);\n\t}\n\t\n\tvar Noop = function Noop() {\n\t  return null;\n\t};\n\t\n\tvar ClassNames = emotionElement.withEmotionCache(function (props, context) {\n\t  return /*#__PURE__*/React.createElement(emotionElement.ThemeContext.Consumer, null, function (theme) {\n\t    var hasRendered = false;\n\t\n\t    var css = function css() {\n\t      if (hasRendered && (\"production\") !== 'production') {\n\t        throw new Error('css can only be used during render');\n\t      }\n\t\n\t      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n\t        args[_key] = arguments[_key];\n\t      }\n\t\n\t      var serialized = serialize.serializeStyles(args, context.registered);\n\t\n\t      {\n\t        utils.insertStyles(context, serialized, false);\n\t      }\n\t\n\t      return context.key + \"-\" + serialized.name;\n\t    };\n\t\n\t    var cx = function cx() {\n\t      if (hasRendered && (\"production\") !== 'production') {\n\t        throw new Error('cx can only be used during render');\n\t      }\n\t\n\t      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t        args[_key2] = arguments[_key2];\n\t      }\n\t\n\t      return merge(context.registered, css, classnames(args));\n\t    };\n\t\n\t    var content = {\n\t      css: css,\n\t      cx: cx,\n\t      theme: theme\n\t    };\n\t    var ele = props.children(content);\n\t    hasRendered = true;\n\t    var possiblyStyleElement = /*#__PURE__*/React.createElement(Noop, null);\n\t\n\t\n\t    return /*#__PURE__*/React.createElement(React.Fragment, null, possiblyStyleElement, ele);\n\t  });\n\t});\n\t\n\texports.CacheProvider = emotionElement.CacheProvider;\n\texports.ThemeContext = emotionElement.ThemeContext;\n\texports.withEmotionCache = emotionElement.withEmotionCache;\n\tObject.defineProperty(exports, 'css', {\n\t  enumerable: true,\n\t  get: function () {\n\t    return css__default['default'];\n\t  }\n\t});\n\texports.ClassNames = ClassNames;\n\texports.Global = Global;\n\texports.createElement = jsx;\n\texports.jsx = jsx;\n\texports.keyframes = keyframes;\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(3);\n\tvar React = __webpack_require__(1);\n\tvar createCache = __webpack_require__(4);\n\tvar utils = __webpack_require__(7);\n\tvar serialize = __webpack_require__(2);\n\t\n\tfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\t\n\tvar createCache__default = /*#__PURE__*/_interopDefault(createCache);\n\t\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\t\n\tvar EmotionCacheContext = /*#__PURE__*/React.createContext( // we're doing this to avoid preconstruct's dead code elimination in this one case\n\t// because this module is primarily intended for the browser and node\n\t// but it's also required in react native and similar environments sometimes\n\t// and we could have a special build just for that\n\t// but this is much easier and the native packages\n\t// might use a different theme context in the future anyway\n\ttypeof HTMLElement !== 'undefined' ? createCache__default['default']() : null);\n\tvar ThemeContext = /*#__PURE__*/React.createContext({});\n\tvar CacheProvider = EmotionCacheContext.Provider;\n\t\n\tvar withEmotionCache = function withEmotionCache(func) {\n\t  var render = function render(props, ref) {\n\t    return /*#__PURE__*/React.createElement(EmotionCacheContext.Consumer, null, function (cache) {\n\t      return func(props, cache, ref);\n\t    });\n\t  }; // $FlowFixMe\n\t\n\t\n\t  return /*#__PURE__*/React.forwardRef(render);\n\t};\n\t\n\t// thus we only need to replace what is a valid character for JS, but not for CSS\n\t\n\tvar sanitizeIdentifier = function sanitizeIdentifier(identifier) {\n\t  return identifier.replace(/\\$/g, '-');\n\t};\n\t\n\tvar typePropName = '__EMOTION_TYPE_PLEASE_DO_NOT_USE__';\n\tvar labelPropName = '__EMOTION_LABEL_PLEASE_DO_NOT_USE__';\n\tvar createEmotionProps = function createEmotionProps(type, props) {\n\t  if (false) {\n\t    throw new Error(\"Strings are not allowed as css prop values, please wrap it in a css template literal from '@emotion/css' like this: css`\" + props.css + \"`\");\n\t  }\n\t\n\t  var newProps = {};\n\t\n\t  for (var key in props) {\n\t    if (hasOwnProperty.call(props, key)) {\n\t      newProps[key] = props[key];\n\t    }\n\t  }\n\t\n\t  newProps[typePropName] = type; // TODO: check if this still works with all of those different JSX functions\n\t\n\t  if (false) {\n\t    var error = new Error();\n\t\n\t    if (error.stack) {\n\t      // chrome\n\t      var match = error.stack.match(/at (?:Object\\.|Module\\.|)(?:jsx|createEmotionProps).*\\n\\s+at (?:Object\\.|)([A-Z][A-Za-z$]+) /);\n\t\n\t      if (!match) {\n\t        // safari and firefox\n\t        match = error.stack.match(/.*\\n([A-Z][A-Za-z$]+)@/);\n\t      }\n\t\n\t      if (match) {\n\t        newProps[labelPropName] = sanitizeIdentifier(match[1]);\n\t      }\n\t    }\n\t  }\n\t\n\t  return newProps;\n\t};\n\t\n\tvar Noop = function Noop() {\n\t  return null;\n\t};\n\t\n\tvar render = function render(cache, props, theme, ref) {\n\t  var cssProp = theme === null ? props.css : props.css(theme); // so that using `css` from `emotion` and passing the result to the css prop works\n\t  // not passing the registered cache to serializeStyles because it would\n\t  // make certain babel optimisations not possible\n\t\n\t  if (typeof cssProp === 'string' && cache.registered[cssProp] !== undefined) {\n\t    cssProp = cache.registered[cssProp];\n\t  }\n\t\n\t  var type = props[typePropName];\n\t  var registeredStyles = [cssProp];\n\t  var className = '';\n\t\n\t  if (typeof props.className === 'string') {\n\t    className = utils.getRegisteredStyles(cache.registered, registeredStyles, props.className);\n\t  } else if (props.className != null) {\n\t    className = props.className + \" \";\n\t  }\n\t\n\t  var serialized = serialize.serializeStyles(registeredStyles);\n\t\n\t  if (false) {\n\t    var labelFromStack = props[labelPropName];\n\t\n\t    if (labelFromStack) {\n\t      serialized = serialize.serializeStyles([serialized, 'label:' + labelFromStack + ';']);\n\t    }\n\t  }\n\t\n\t  var rules = utils.insertStyles(cache, serialized, typeof type === 'string');\n\t  className += cache.key + \"-\" + serialized.name;\n\t  var newProps = {};\n\t\n\t  for (var key in props) {\n\t    if (hasOwnProperty.call(props, key) && key !== 'css' && key !== typePropName && ((\"production\") === 'production' || key !== labelPropName)) {\n\t      newProps[key] = props[key];\n\t    }\n\t  }\n\t\n\t  newProps.ref = ref;\n\t  newProps.className = className;\n\t  var ele = /*#__PURE__*/React.createElement(type, newProps);\n\t  var possiblyStyleElement = /*#__PURE__*/React.createElement(Noop, null);\n\t\n\t\n\t  return /*#__PURE__*/React.createElement(React.Fragment, null, possiblyStyleElement, ele);\n\t}; // eslint-disable-next-line no-undef\n\t\n\t\n\tvar Emotion = /* #__PURE__ */withEmotionCache(function (props, cache, ref) {\n\t  if (typeof props.css === 'function') {\n\t    return /*#__PURE__*/React.createElement(ThemeContext.Consumer, null, function (theme) {\n\t      return render(cache, props, theme, ref);\n\t    });\n\t  }\n\t\n\t  return render(cache, props, null, ref);\n\t});\n\t\n\tif (false) {\n\t  Emotion.displayName = 'EmotionCssPropInternal';\n\t}\n\t\n\texports.CacheProvider = CacheProvider;\n\texports.Emotion = Emotion;\n\texports.ThemeContext = ThemeContext;\n\texports.createEmotionProps = createEmotionProps;\n\texports.hasOwnProperty = hasOwnProperty;\n\texports.withEmotionCache = withEmotionCache;\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\t/* eslint-disable */\n\t// Inspired by https://github.com/garycourt/murmurhash-js\n\t// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\n\tfunction murmur2(str) {\n\t  // 'm' and 'r' are mixing constants generated offline.\n\t  // They're not really 'magic', they just happen to work well.\n\t  // const m = 0x5bd1e995;\n\t  // const r = 24;\n\t  // Initialize the hash\n\t  var h = 0; // Mix 4 bytes at a time into the hash\n\t\n\t  var k,\n\t      i = 0,\n\t      len = str.length;\n\t\n\t  for (; len >= 4; ++i, len -= 4) {\n\t    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n\t    k =\n\t    /* Math.imul(k, m): */\n\t    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n\t    k ^=\n\t    /* k >>> r: */\n\t    k >>> 24;\n\t    h =\n\t    /* Math.imul(k, m): */\n\t    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n\t    /* Math.imul(h, m): */\n\t    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n\t  } // Handle the last few bytes of the input array\n\t\n\t\n\t  switch (len) {\n\t    case 3:\n\t      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\t\n\t    case 2:\n\t      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\t\n\t    case 1:\n\t      h ^= str.charCodeAt(i) & 0xff;\n\t      h =\n\t      /* Math.imul(h, m): */\n\t      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n\t  } // Do a few final mixes of the hash to ensure the last few\n\t  // bytes are well-incorporated.\n\t\n\t\n\t  h ^= h >>> 13;\n\t  h =\n\t  /* Math.imul(h, m): */\n\t  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n\t  return ((h ^ h >>> 15) >>> 0).toString(36);\n\t}\n\t\n\texports.default = murmur2;\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\tfunction memoize(fn) {\n\t  var cache = {};\n\t  return function (arg) {\n\t    if (cache[arg] === undefined) cache[arg] = fn(arg);\n\t    return cache[arg];\n\t  };\n\t}\n\t\n\texports.default = memoize;\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\tfunction stylis_min (W) {\n\t  function M(d, c, e, h, a) {\n\t    for (var m = 0, b = 0, v = 0, n = 0, q, g, x = 0, K = 0, k, u = k = q = 0, l = 0, r = 0, I = 0, t = 0, B = e.length, J = B - 1, y, f = '', p = '', F = '', G = '', C; l < B;) {\n\t      g = e.charCodeAt(l);\n\t      l === J && 0 !== b + n + v + m && (0 !== b && (g = 47 === b ? 10 : 47), n = v = m = 0, B++, J++);\n\t\n\t      if (0 === b + n + v + m) {\n\t        if (l === J && (0 < r && (f = f.replace(N, '')), 0 < f.trim().length)) {\n\t          switch (g) {\n\t            case 32:\n\t            case 9:\n\t            case 59:\n\t            case 13:\n\t            case 10:\n\t              break;\n\t\n\t            default:\n\t              f += e.charAt(l);\n\t          }\n\t\n\t          g = 59;\n\t        }\n\t\n\t        switch (g) {\n\t          case 123:\n\t            f = f.trim();\n\t            q = f.charCodeAt(0);\n\t            k = 1;\n\t\n\t            for (t = ++l; l < B;) {\n\t              switch (g = e.charCodeAt(l)) {\n\t                case 123:\n\t                  k++;\n\t                  break;\n\t\n\t                case 125:\n\t                  k--;\n\t                  break;\n\t\n\t                case 47:\n\t                  switch (g = e.charCodeAt(l + 1)) {\n\t                    case 42:\n\t                    case 47:\n\t                      a: {\n\t                        for (u = l + 1; u < J; ++u) {\n\t                          switch (e.charCodeAt(u)) {\n\t                            case 47:\n\t                              if (42 === g && 42 === e.charCodeAt(u - 1) && l + 2 !== u) {\n\t                                l = u + 1;\n\t                                break a;\n\t                              }\n\t\n\t                              break;\n\t\n\t                            case 10:\n\t                              if (47 === g) {\n\t                                l = u + 1;\n\t                                break a;\n\t                              }\n\t\n\t                          }\n\t                        }\n\t\n\t                        l = u;\n\t                      }\n\t\n\t                  }\n\t\n\t                  break;\n\t\n\t                case 91:\n\t                  g++;\n\t\n\t                case 40:\n\t                  g++;\n\t\n\t                case 34:\n\t                case 39:\n\t                  for (; l++ < J && e.charCodeAt(l) !== g;) {\n\t                  }\n\t\n\t              }\n\t\n\t              if (0 === k) break;\n\t              l++;\n\t            }\n\t\n\t            k = e.substring(t, l);\n\t            0 === q && (q = (f = f.replace(ca, '').trim()).charCodeAt(0));\n\t\n\t            switch (q) {\n\t              case 64:\n\t                0 < r && (f = f.replace(N, ''));\n\t                g = f.charCodeAt(1);\n\t\n\t                switch (g) {\n\t                  case 100:\n\t                  case 109:\n\t                  case 115:\n\t                  case 45:\n\t                    r = c;\n\t                    break;\n\t\n\t                  default:\n\t                    r = O;\n\t                }\n\t\n\t                k = M(c, r, k, g, a + 1);\n\t                t = k.length;\n\t                0 < A && (r = X(O, f, I), C = H(3, k, r, c, D, z, t, g, a, h), f = r.join(''), void 0 !== C && 0 === (t = (k = C.trim()).length) && (g = 0, k = ''));\n\t                if (0 < t) switch (g) {\n\t                  case 115:\n\t                    f = f.replace(da, ea);\n\t\n\t                  case 100:\n\t                  case 109:\n\t                  case 45:\n\t                    k = f + '{' + k + '}';\n\t                    break;\n\t\n\t                  case 107:\n\t                    f = f.replace(fa, '$1 $2');\n\t                    k = f + '{' + k + '}';\n\t                    k = 1 === w || 2 === w && L('@' + k, 3) ? '@-webkit-' + k + '@' + k : '@' + k;\n\t                    break;\n\t\n\t                  default:\n\t                    k = f + k, 112 === h && (k = (p += k, ''));\n\t                } else k = '';\n\t                break;\n\t\n\t              default:\n\t                k = M(c, X(c, f, I), k, h, a + 1);\n\t            }\n\t\n\t            F += k;\n\t            k = I = r = u = q = 0;\n\t            f = '';\n\t            g = e.charCodeAt(++l);\n\t            break;\n\t\n\t          case 125:\n\t          case 59:\n\t            f = (0 < r ? f.replace(N, '') : f).trim();\n\t            if (1 < (t = f.length)) switch (0 === u && (q = f.charCodeAt(0), 45 === q || 96 < q && 123 > q) && (t = (f = f.replace(' ', ':')).length), 0 < A && void 0 !== (C = H(1, f, c, d, D, z, p.length, h, a, h)) && 0 === (t = (f = C.trim()).length) && (f = '\\x00\\x00'), q = f.charCodeAt(0), g = f.charCodeAt(1), q) {\n\t              case 0:\n\t                break;\n\t\n\t              case 64:\n\t                if (105 === g || 99 === g) {\n\t                  G += f + e.charAt(l);\n\t                  break;\n\t                }\n\t\n\t              default:\n\t                58 !== f.charCodeAt(t - 1) && (p += P(f, q, g, f.charCodeAt(2)));\n\t            }\n\t            I = r = u = q = 0;\n\t            f = '';\n\t            g = e.charCodeAt(++l);\n\t        }\n\t      }\n\t\n\t      switch (g) {\n\t        case 13:\n\t        case 10:\n\t          47 === b ? b = 0 : 0 === 1 + q && 107 !== h && 0 < f.length && (r = 1, f += '\\x00');\n\t          0 < A * Y && H(0, f, c, d, D, z, p.length, h, a, h);\n\t          z = 1;\n\t          D++;\n\t          break;\n\t\n\t        case 59:\n\t        case 125:\n\t          if (0 === b + n + v + m) {\n\t            z++;\n\t            break;\n\t          }\n\t\n\t        default:\n\t          z++;\n\t          y = e.charAt(l);\n\t\n\t          switch (g) {\n\t            case 9:\n\t            case 32:\n\t              if (0 === n + m + b) switch (x) {\n\t                case 44:\n\t                case 58:\n\t                case 9:\n\t                case 32:\n\t                  y = '';\n\t                  break;\n\t\n\t                default:\n\t                  32 !== g && (y = ' ');\n\t              }\n\t              break;\n\t\n\t            case 0:\n\t              y = '\\\\0';\n\t              break;\n\t\n\t            case 12:\n\t              y = '\\\\f';\n\t              break;\n\t\n\t            case 11:\n\t              y = '\\\\v';\n\t              break;\n\t\n\t            case 38:\n\t              0 === n + b + m && (r = I = 1, y = '\\f' + y);\n\t              break;\n\t\n\t            case 108:\n\t              if (0 === n + b + m + E && 0 < u) switch (l - u) {\n\t                case 2:\n\t                  112 === x && 58 === e.charCodeAt(l - 3) && (E = x);\n\t\n\t                case 8:\n\t                  111 === K && (E = K);\n\t              }\n\t              break;\n\t\n\t            case 58:\n\t              0 === n + b + m && (u = l);\n\t              break;\n\t\n\t            case 44:\n\t              0 === b + v + n + m && (r = 1, y += '\\r');\n\t              break;\n\t\n\t            case 34:\n\t            case 39:\n\t              0 === b && (n = n === g ? 0 : 0 === n ? g : n);\n\t              break;\n\t\n\t            case 91:\n\t              0 === n + b + v && m++;\n\t              break;\n\t\n\t            case 93:\n\t              0 === n + b + v && m--;\n\t              break;\n\t\n\t            case 41:\n\t              0 === n + b + m && v--;\n\t              break;\n\t\n\t            case 40:\n\t              if (0 === n + b + m) {\n\t                if (0 === q) switch (2 * x + 3 * K) {\n\t                  case 533:\n\t                    break;\n\t\n\t                  default:\n\t                    q = 1;\n\t                }\n\t                v++;\n\t              }\n\t\n\t              break;\n\t\n\t            case 64:\n\t              0 === b + v + n + m + u + k && (k = 1);\n\t              break;\n\t\n\t            case 42:\n\t            case 47:\n\t              if (!(0 < n + m + v)) switch (b) {\n\t                case 0:\n\t                  switch (2 * g + 3 * e.charCodeAt(l + 1)) {\n\t                    case 235:\n\t                      b = 47;\n\t                      break;\n\t\n\t                    case 220:\n\t                      t = l, b = 42;\n\t                  }\n\t\n\t                  break;\n\t\n\t                case 42:\n\t                  47 === g && 42 === x && t + 2 !== l && (33 === e.charCodeAt(t + 2) && (p += e.substring(t, l + 1)), y = '', b = 0);\n\t              }\n\t          }\n\t\n\t          0 === b && (f += y);\n\t      }\n\t\n\t      K = x;\n\t      x = g;\n\t      l++;\n\t    }\n\t\n\t    t = p.length;\n\t\n\t    if (0 < t) {\n\t      r = c;\n\t      if (0 < A && (C = H(2, p, r, d, D, z, t, h, a, h), void 0 !== C && 0 === (p = C).length)) return G + p + F;\n\t      p = r.join(',') + '{' + p + '}';\n\t\n\t      if (0 !== w * E) {\n\t        2 !== w || L(p, 2) || (E = 0);\n\t\n\t        switch (E) {\n\t          case 111:\n\t            p = p.replace(ha, ':-moz-$1') + p;\n\t            break;\n\t\n\t          case 112:\n\t            p = p.replace(Q, '::-webkit-input-$1') + p.replace(Q, '::-moz-$1') + p.replace(Q, ':-ms-input-$1') + p;\n\t        }\n\t\n\t        E = 0;\n\t      }\n\t    }\n\t\n\t    return G + p + F;\n\t  }\n\t\n\t  function X(d, c, e) {\n\t    var h = c.trim().split(ia);\n\t    c = h;\n\t    var a = h.length,\n\t        m = d.length;\n\t\n\t    switch (m) {\n\t      case 0:\n\t      case 1:\n\t        var b = 0;\n\t\n\t        for (d = 0 === m ? '' : d[0] + ' '; b < a; ++b) {\n\t          c[b] = Z(d, c[b], e).trim();\n\t        }\n\t\n\t        break;\n\t\n\t      default:\n\t        var v = b = 0;\n\t\n\t        for (c = []; b < a; ++b) {\n\t          for (var n = 0; n < m; ++n) {\n\t            c[v++] = Z(d[n] + ' ', h[b], e).trim();\n\t          }\n\t        }\n\t\n\t    }\n\t\n\t    return c;\n\t  }\n\t\n\t  function Z(d, c, e) {\n\t    var h = c.charCodeAt(0);\n\t    33 > h && (h = (c = c.trim()).charCodeAt(0));\n\t\n\t    switch (h) {\n\t      case 38:\n\t        return c.replace(F, '$1' + d.trim());\n\t\n\t      case 58:\n\t        return d.trim() + c.replace(F, '$1' + d.trim());\n\t\n\t      default:\n\t        if (0 < 1 * e && 0 < c.indexOf('\\f')) return c.replace(F, (58 === d.charCodeAt(0) ? '' : '$1') + d.trim());\n\t    }\n\t\n\t    return d + c;\n\t  }\n\t\n\t  function P(d, c, e, h) {\n\t    var a = d + ';',\n\t        m = 2 * c + 3 * e + 4 * h;\n\t\n\t    if (944 === m) {\n\t      d = a.indexOf(':', 9) + 1;\n\t      var b = a.substring(d, a.length - 1).trim();\n\t      b = a.substring(0, d).trim() + b + ';';\n\t      return 1 === w || 2 === w && L(b, 1) ? '-webkit-' + b + b : b;\n\t    }\n\t\n\t    if (0 === w || 2 === w && !L(a, 1)) return a;\n\t\n\t    switch (m) {\n\t      case 1015:\n\t        return 97 === a.charCodeAt(10) ? '-webkit-' + a + a : a;\n\t\n\t      case 951:\n\t        return 116 === a.charCodeAt(3) ? '-webkit-' + a + a : a;\n\t\n\t      case 963:\n\t        return 110 === a.charCodeAt(5) ? '-webkit-' + a + a : a;\n\t\n\t      case 1009:\n\t        if (100 !== a.charCodeAt(4)) break;\n\t\n\t      case 969:\n\t      case 942:\n\t        return '-webkit-' + a + a;\n\t\n\t      case 978:\n\t        return '-webkit-' + a + '-moz-' + a + a;\n\t\n\t      case 1019:\n\t      case 983:\n\t        return '-webkit-' + a + '-moz-' + a + '-ms-' + a + a;\n\t\n\t      case 883:\n\t        if (45 === a.charCodeAt(8)) return '-webkit-' + a + a;\n\t        if (0 < a.indexOf('image-set(', 11)) return a.replace(ja, '$1-webkit-$2') + a;\n\t        break;\n\t\n\t      case 932:\n\t        if (45 === a.charCodeAt(4)) switch (a.charCodeAt(5)) {\n\t          case 103:\n\t            return '-webkit-box-' + a.replace('-grow', '') + '-webkit-' + a + '-ms-' + a.replace('grow', 'positive') + a;\n\t\n\t          case 115:\n\t            return '-webkit-' + a + '-ms-' + a.replace('shrink', 'negative') + a;\n\t\n\t          case 98:\n\t            return '-webkit-' + a + '-ms-' + a.replace('basis', 'preferred-size') + a;\n\t        }\n\t        return '-webkit-' + a + '-ms-' + a + a;\n\t\n\t      case 964:\n\t        return '-webkit-' + a + '-ms-flex-' + a + a;\n\t\n\t      case 1023:\n\t        if (99 !== a.charCodeAt(8)) break;\n\t        b = a.substring(a.indexOf(':', 15)).replace('flex-', '').replace('space-between', 'justify');\n\t        return '-webkit-box-pack' + b + '-webkit-' + a + '-ms-flex-pack' + b + a;\n\t\n\t      case 1005:\n\t        return ka.test(a) ? a.replace(aa, ':-webkit-') + a.replace(aa, ':-moz-') + a : a;\n\t\n\t      case 1e3:\n\t        b = a.substring(13).trim();\n\t        c = b.indexOf('-') + 1;\n\t\n\t        switch (b.charCodeAt(0) + b.charCodeAt(c)) {\n\t          case 226:\n\t            b = a.replace(G, 'tb');\n\t            break;\n\t\n\t          case 232:\n\t            b = a.replace(G, 'tb-rl');\n\t            break;\n\t\n\t          case 220:\n\t            b = a.replace(G, 'lr');\n\t            break;\n\t\n\t          default:\n\t            return a;\n\t        }\n\t\n\t        return '-webkit-' + a + '-ms-' + b + a;\n\t\n\t      case 1017:\n\t        if (-1 === a.indexOf('sticky', 9)) break;\n\t\n\t      case 975:\n\t        c = (a = d).length - 10;\n\t        b = (33 === a.charCodeAt(c) ? a.substring(0, c) : a).substring(d.indexOf(':', 7) + 1).trim();\n\t\n\t        switch (m = b.charCodeAt(0) + (b.charCodeAt(7) | 0)) {\n\t          case 203:\n\t            if (111 > b.charCodeAt(8)) break;\n\t\n\t          case 115:\n\t            a = a.replace(b, '-webkit-' + b) + ';' + a;\n\t            break;\n\t\n\t          case 207:\n\t          case 102:\n\t            a = a.replace(b, '-webkit-' + (102 < m ? 'inline-' : '') + 'box') + ';' + a.replace(b, '-webkit-' + b) + ';' + a.replace(b, '-ms-' + b + 'box') + ';' + a;\n\t        }\n\t\n\t        return a + ';';\n\t\n\t      case 938:\n\t        if (45 === a.charCodeAt(5)) switch (a.charCodeAt(6)) {\n\t          case 105:\n\t            return b = a.replace('-items', ''), '-webkit-' + a + '-webkit-box-' + b + '-ms-flex-' + b + a;\n\t\n\t          case 115:\n\t            return '-webkit-' + a + '-ms-flex-item-' + a.replace(ba, '') + a;\n\t\n\t          default:\n\t            return '-webkit-' + a + '-ms-flex-line-pack' + a.replace('align-content', '').replace(ba, '') + a;\n\t        }\n\t        break;\n\t\n\t      case 973:\n\t      case 989:\n\t        if (45 !== a.charCodeAt(3) || 122 === a.charCodeAt(4)) break;\n\t\n\t      case 931:\n\t      case 953:\n\t        if (!0 === la.test(d)) return 115 === (b = d.substring(d.indexOf(':') + 1)).charCodeAt(0) ? P(d.replace('stretch', 'fill-available'), c, e, h).replace(':fill-available', ':stretch') : a.replace(b, '-webkit-' + b) + a.replace(b, '-moz-' + b.replace('fill-', '')) + a;\n\t        break;\n\t\n\t      case 962:\n\t        if (a = '-webkit-' + a + (102 === a.charCodeAt(5) ? '-ms-' + a : '') + a, 211 === e + h && 105 === a.charCodeAt(13) && 0 < a.indexOf('transform', 10)) return a.substring(0, a.indexOf(';', 27) + 1).replace(ma, '$1-webkit-$2') + a;\n\t    }\n\t\n\t    return a;\n\t  }\n\t\n\t  function L(d, c) {\n\t    var e = d.indexOf(1 === c ? ':' : '{'),\n\t        h = d.substring(0, 3 !== c ? e : 10);\n\t    e = d.substring(e + 1, d.length - 1);\n\t    return R(2 !== c ? h : h.replace(na, '$1'), e, c);\n\t  }\n\t\n\t  function ea(d, c) {\n\t    var e = P(c, c.charCodeAt(0), c.charCodeAt(1), c.charCodeAt(2));\n\t    return e !== c + ';' ? e.replace(oa, ' or ($1)').substring(4) : '(' + c + ')';\n\t  }\n\t\n\t  function H(d, c, e, h, a, m, b, v, n, q) {\n\t    for (var g = 0, x = c, w; g < A; ++g) {\n\t      switch (w = S[g].call(B, d, x, e, h, a, m, b, v, n, q)) {\n\t        case void 0:\n\t        case !1:\n\t        case !0:\n\t        case null:\n\t          break;\n\t\n\t        default:\n\t          x = w;\n\t      }\n\t    }\n\t\n\t    if (x !== c) return x;\n\t  }\n\t\n\t  function T(d) {\n\t    switch (d) {\n\t      case void 0:\n\t      case null:\n\t        A = S.length = 0;\n\t        break;\n\t\n\t      default:\n\t        if ('function' === typeof d) S[A++] = d;else if ('object' === typeof d) for (var c = 0, e = d.length; c < e; ++c) {\n\t          T(d[c]);\n\t        } else Y = !!d | 0;\n\t    }\n\t\n\t    return T;\n\t  }\n\t\n\t  function U(d) {\n\t    d = d.prefix;\n\t    void 0 !== d && (R = null, d ? 'function' !== typeof d ? w = 1 : (w = 2, R = d) : w = 0);\n\t    return U;\n\t  }\n\t\n\t  function B(d, c) {\n\t    var e = d;\n\t    33 > e.charCodeAt(0) && (e = e.trim());\n\t    V = e;\n\t    e = [V];\n\t\n\t    if (0 < A) {\n\t      var h = H(-1, c, e, e, D, z, 0, 0, 0, 0);\n\t      void 0 !== h && 'string' === typeof h && (c = h);\n\t    }\n\t\n\t    var a = M(O, e, c, 0, 0);\n\t    0 < A && (h = H(-2, a, e, e, D, z, a.length, 0, 0, 0), void 0 !== h && (a = h));\n\t    V = '';\n\t    E = 0;\n\t    z = D = 1;\n\t    return a;\n\t  }\n\t\n\t  var ca = /^\\0+/g,\n\t      N = /[\\0\\r\\f]/g,\n\t      aa = /: */g,\n\t      ka = /zoo|gra/,\n\t      ma = /([,: ])(transform)/g,\n\t      ia = /,\\r+?/g,\n\t      F = /([\\t\\r\\n ])*\\f?&/g,\n\t      fa = /@(k\\w+)\\s*(\\S*)\\s*/,\n\t      Q = /::(place)/g,\n\t      ha = /:(read-only)/g,\n\t      G = /[svh]\\w+-[tblr]{2}/,\n\t      da = /\\(\\s*(.*)\\s*\\)/g,\n\t      oa = /([\\s\\S]*?);/g,\n\t      ba = /-self|flex-/g,\n\t      na = /[^]*?(:[rp][el]a[\\w-]+)[^]*/,\n\t      la = /stretch|:\\s*\\w+\\-(?:conte|avail)/,\n\t      ja = /([^-])(image-set\\()/,\n\t      z = 1,\n\t      D = 1,\n\t      E = 0,\n\t      w = 1,\n\t      O = [],\n\t      S = [],\n\t      A = 0,\n\t      R = null,\n\t      Y = 0,\n\t      V = '';\n\t  B.use = T;\n\t  B.set = U;\n\t  void 0 !== W && U(W);\n\t  return B;\n\t}\n\t\n\texports.default = stylis_min;\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\tvar unitlessKeys = {\n\t  animationIterationCount: 1,\n\t  borderImageOutset: 1,\n\t  borderImageSlice: 1,\n\t  borderImageWidth: 1,\n\t  boxFlex: 1,\n\t  boxFlexGroup: 1,\n\t  boxOrdinalGroup: 1,\n\t  columnCount: 1,\n\t  columns: 1,\n\t  flex: 1,\n\t  flexGrow: 1,\n\t  flexPositive: 1,\n\t  flexShrink: 1,\n\t  flexNegative: 1,\n\t  flexOrder: 1,\n\t  gridRow: 1,\n\t  gridRowEnd: 1,\n\t  gridRowSpan: 1,\n\t  gridRowStart: 1,\n\t  gridColumn: 1,\n\t  gridColumnEnd: 1,\n\t  gridColumnSpan: 1,\n\t  gridColumnStart: 1,\n\t  msGridRow: 1,\n\t  msGridRowSpan: 1,\n\t  msGridColumn: 1,\n\t  msGridColumnSpan: 1,\n\t  fontWeight: 1,\n\t  lineHeight: 1,\n\t  opacity: 1,\n\t  order: 1,\n\t  orphans: 1,\n\t  tabSize: 1,\n\t  widows: 1,\n\t  zIndex: 1,\n\t  zoom: 1,\n\t  WebkitLineClamp: 1,\n\t  // SVG-related properties\n\t  fillOpacity: 1,\n\t  floodOpacity: 1,\n\t  stopOpacity: 1,\n\t  strokeDasharray: 1,\n\t  strokeDashoffset: 1,\n\t  strokeMiterlimit: 1,\n\t  strokeOpacity: 1,\n\t  strokeWidth: 1\n\t};\n\t\n\texports.default = unitlessKeys;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\t\n\tvar weakMemoize = function weakMemoize(func) {\n\t  // $FlowFixMe flow doesn't include all non-primitive types as allowed for weakmaps\n\t  var cache = new WeakMap();\n\t  return function (arg) {\n\t    if (cache.has(arg)) {\n\t      // $FlowFixMe\n\t      return cache.get(arg);\n\t    }\n\t\n\t    var ret = func(arg);\n\t    cache.set(arg, ret);\n\t    return ret;\n\t  };\n\t};\n\t\n\texports.default = weakMemoize;\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _App = __webpack_require__(21);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar App = function App() {\n\t  return _react2.default.createElement(_App2.default, {\n\t    models: ['https://hassans.s3.eu-central-1.amazonaws.com/assets/newest01-07-2023:16:01:42.stl'],\n\t    color: 'rgba(255,0,48,0.2)',\n\t    range: true,\n\t    width: 1200,\n\t    height: 1000,\n\t    remove: true,\n\t    handleRemove: function handleRemove(item) {\n\t      console.log(item);\n\t    }\n\t  });\n\t};\n\t\n\texports.default = App;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _STLViewer = __webpack_require__(23);\n\t\n\tvar _STLViewer2 = _interopRequireDefault(_STLViewer);\n\t\n\tvar _reactInputSlider = __webpack_require__(29);\n\t\n\tvar _reactInputSlider2 = _interopRequireDefault(_reactInputSlider);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar App = function App(props) {\n\t  // const {\n\t  //   rotate = false,\n\t  //   range = false,\n\t  //   remove = false,\n\t  //   handleRemove = () => {},\n\t  // } = props;\n\t  var models = props.models,\n\t      color = props.color,\n\t      _props$rotate = props.rotate,\n\t      rotate = _props$rotate === undefined ? false : _props$rotate,\n\t      _props$range = props.range,\n\t      range = _props$range === undefined ? false : _props$range,\n\t      _props$remove = props.remove,\n\t      remove = _props$remove === undefined ? false : _props$remove,\n\t      width = props.width,\n\t      height = props.height,\n\t      backgroundColor = props.backgroundColor,\n\t      className = props.className,\n\t      _props$handleRemove = props.handleRemove,\n\t      handleRemove = _props$handleRemove === undefined ? function () {} : _props$handleRemove;\n\t  // const [color, setColor] = useState('rgba(255,0,48,0.2)');\n\t  // const [models, setModels] = useState([\n\t  //   // 'https://hassans.s3.eu-central-1.amazonaws.com/youssef/order/order_g69r/impressions/order_g69rL.STL',\n\t  //   'https://hassans.s3.eu-central-1.amazonaws.com/youssef/assets/w4fxL_OutputModel_SLA.stl',\n\t  // ]);\n\t\n\t  var _useState = (0, _react.useState)([]),\n\t      _useState2 = _slicedToArray(_useState, 2),\n\t      sliders = _useState2[0],\n\t      setSliders = _useState2[1];\n\t\n\t  (0, _react.useEffect)(function () {\n\t    setSliders(models.map(function (_, index) {\n\t      return {\n\t        index: index,\n\t        value: 1\n\t      };\n\t    }));\n\t  }, [models]);\n\t  if (!models || sliders.length === 0) return null;\n\t  return _react2.default.createElement(\n\t    'div',\n\t    null,\n\t    _react2.default.createElement(\n\t      'div',\n\t      { style: { margin: '10px 0px' } },\n\t      range && sliders.map(function (item, index) {\n\t        return _react2.default.createElement(\n\t          'div',\n\t          {\n\t            key: index,\n\t            style: {\n\t              margin: '10px 0px',\n\t              display: 'flex',\n\t              alignItems: 'center',\n\t              justifyContent: 'space-between'\n\t            }\n\t          },\n\t          _react2.default.createElement(\n\t            'div',\n\t            null,\n\t            _react2.default.createElement('input', {\n\t              type: 'checkbox',\n\t              checked: sliders[index].value > 0,\n\t              onClick: function onClick(e) {\n\t                var newSliders = sliders.map(function (item, i) {\n\t                  if (i === index) {\n\t                    if (e.target.checked) {\n\t                      return _extends({}, item, { value: 1 });\n\t                    } else {\n\t                      return _extends({}, item, { value: 0 });\n\t                    }\n\t                  }\n\t                  return item;\n\t                });\n\t                setSliders(newSliders);\n\t              }\n\t            }),\n\t            _react2.default.createElement(_reactInputSlider2.default, {\n\t              axis: 'x',\n\t              xstep: 0.1,\n\t              xmin: 0.0,\n\t              xmax: 1.0,\n\t              x: item.value,\n\t              onChange: function onChange(_ref) {\n\t                var x = _ref.x;\n\t\n\t                var newSliders = sliders.map(function (item, i) {\n\t                  if (i === index) {\n\t                    return _extends({}, item, { value: parseFloat(x) });\n\t                  }\n\t                  return item;\n\t                });\n\t                setSliders(newSliders);\n\t              },\n\t              style: { marginLeft: '20px' }\n\t            })\n\t          ),\n\t          remove && _react2.default.createElement(\n\t            'a',\n\t            { role: 'button' },\n\t            _react2.default.createElement('img', {\n\t              src: 'https://hassans.s3.eu-central-1.amazonaws.com/assets/x11-21-2022:21:11:19.png',\n\t              style: { width: '21px', cursor: 'pointer' },\n\t              onClick: function onClick() {\n\t                handleRemove(models[index]);\n\t              }\n\t            })\n\t          )\n\t        );\n\t      })\n\t    ),\n\t    _react2.default.createElement(_STLViewer2.default, {\n\t      modelColor: color,\n\t      rotate: rotate,\n\t      sliders: sliders,\n\t      models: models,\n\t      width: width,\n\t      height: height,\n\t      backgroundColor: backgroundColor,\n\t      className: className\n\t    })\n\t  );\n\t};\n\texports.default = App;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Three = __webpack_require__(24);\n\t\n\tvar _Three2 = _interopRequireDefault(_Three);\n\t\n\tvar _reactDom = __webpack_require__(9);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar OrbitControls = __webpack_require__(33)(_Three2.default);\n\t\n\tvar DIRECTIONAL_LIGHT = 'directionalLight';\n\t\n\tvar Paint = function () {\n\t  function Paint() {\n\t    _classCallCheck(this, Paint);\n\t\n\t    this.loader = new _Three2.default.STLLoader();\n\t    this.scene = new _Three2.default.Scene();\n\t    this.renderer = new _Three2.default.WebGLRenderer({\n\t      antialias: true\n\t    });\n\t    this.reqNumber = 0;\n\t    this.loaded = false;\n\t    this.light = undefined;\n\t  }\n\t\n\t  _createClass(Paint, [{\n\t    key: 'init',\n\t    value: function init(context, sliders, models) {\n\t      var _this = this;\n\t\n\t      this.models = models;\n\t      this.sliders = sliders;\n\t      this.component = context;\n\t      this.width = context.props.width;\n\t      this.height = context.props.height;\n\t      this.modelColor = context.props.modelColor;\n\t      this.backgroundColor = context.props.backgroundColor;\n\t      this.orbitControls = context.props.orbitControls;\n\t      this.rotate = context.props.rotate;\n\t      this.cameraX = context.props.cameraX;\n\t      this.cameraY = context.props.cameraY;\n\t      this.cameraZ = context.props.cameraZ;\n\t      this.rotationSpeeds = context.props.rotationSpeeds;\n\t      this.lights = context.props.lights;\n\t      this.lightColor = context.props.lightColor;\n\t      this.model = context.props.model;\n\t\n\t      // if (this.mesh !== undefined) {\n\t      //   this.scene.remove(this.mesh);\n\t      //   this.mesh.geometry.dispose();\n\t      //   this.mesh.material.dispose();\n\t      //   this.scene.remove(this.grid);\n\t      // }\n\t\n\t      if (this.animationRequestId) {\n\t        cancelAnimationFrame(this.animationRequestId);\n\t      }\n\t\n\t      this.distance = 10000;\n\t\n\t      this.reqNumber += 1;\n\t      if (!this.loaded) this.addSTLToScene(this.reqNumber);\n\t      var meshMaterial = this.scene.children.filter(function (item) {\n\t        return item.type === 'Mesh';\n\t      });\n\t      if (meshMaterial.length === sliders.length) {\n\t        sliders.map(function (item, index) {\n\t          meshMaterial[index].material.opacity = item.value;\n\t          // meshMaterial[index].material.visible = visibleSliders[index].value;\n\t          meshMaterial[index].updateMatrix();\n\t          _this.render();\n\t        });\n\t      }\n\t      this.loaded = true;\n\t    }\n\t  }, {\n\t    key: 'addLight',\n\t    value: function addLight(lights) {\n\t      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\t\n\t      var directionalLight = new _Three2.default.DirectionalLight(0xffffff, 0.5);\n\t      directionalLight.name = DIRECTIONAL_LIGHT + index;\n\t      directionalLight.position.normalize();\n\t      this.light = directionalLight;\n\t      this.scene.add(directionalLight);\n\t    }\n\t  }, {\n\t    key: 'loadSTLFromUrl',\n\t    value: function loadSTLFromUrl(url, reqId) {\n\t      var _this2 = this;\n\t\n\t      return new Promise(function (resolve) {\n\t        _this2.loader.crossOrigin = '';\n\t        _this2.loader.loadFromUrl(url, function (geometry) {\n\t          // if (this.reqNumber !== reqId) {\n\t          //   return;\n\t          // }\n\t          resolve(geometry);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'loadFromFile',\n\t    value: function loadFromFile(file) {\n\t      var _this3 = this;\n\t\n\t      return new Promise(function (resolve) {\n\t        _this3.loader.loadFromFile(file, function (geometry) {\n\t          resolve(geometry);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'addSTLToScene',\n\t    value: function addSTLToScene(reqId) {\n\t      var _this4 = this;\n\t\n\t      this.models.map(function (item, index) {\n\t        if (index === 0) {\n\t          // while (this.scene.children.length > 0) {\n\t          //   this.scene.remove(this.scene.children[0]);\n\t          // }\n\t\n\t          // lights processing\n\t          var hasMultipleLights = _this4.lights.reduce(function (acc, item) {\n\t            return acc && Array.isArray(item);\n\t          }, true);\n\t          if (hasMultipleLights) {\n\t            _this4.lights.forEach(_this4.addLight.bind(_this4));\n\t          } else {\n\t            _this4.addLight(_this4.lights);\n\t          }\n\t        }\n\t\n\t        _this4.loadSTLFromUrl(item, reqId).then(function (geometry) {\n\t          // Calculate mesh noramls for MeshLambertMaterial.\n\t          geometry.computeFaceNormals();\n\t          geometry.computeVertexNormals();\n\t          // Center the object\n\t          // geometry.center();\n\t          var material = new _Three2.default.MeshLambertMaterial({\n\t            color: _this4.modelColor,\n\t            transparent: true,\n\t            opacity: 1,\n\t            side: _Three2.default.DoubleSide,\n\t            visible: true\n\t          });\n\t\n\t          if (geometry.hasColors) {\n\t            material = new _Three2.default.MeshPhongMaterial({\n\t              opacity: geometry.alpha,\n\t              vertexColors: _Three2.default.VertexColors\n\t            });\n\t          }\n\t\n\t          _this4.mesh = new _Three2.default.Mesh(geometry, material);\n\t          // Set the object's dimensions\n\t          geometry.computeBoundingBox();\n\t          geometry.computeBoundingSphere();\n\t\n\t          if (_this4.xDims === undefined) {\n\t            _this4.xDims = geometry.boundingBox.max.x;\n\t            _this4.yDims = geometry.boundingBox.max.y;\n\t            _this4.zDims = geometry.boundingBox.max.z;\n\t            // this.xDims = geometry.boundingSphere.center.x;\n\t            // this.yDims = geometry.boundingSphere.center.y;\n\t            // this.zDims = geometry.boundingSphere.center.z;\n\t          }\n\t\n\t          if (_this4.rotate) {\n\t            _this4.mesh.rotation.x = _this4.rotationSpeeds[0];\n\t            _this4.mesh.rotation.y = _this4.rotationSpeeds[1];\n\t            _this4.mesh.rotation.z = _this4.rotationSpeeds[2];\n\t          }\n\t\n\t          _this4.mesh.updateMatrix();\n\t\n\t          _this4.scene.add(_this4.mesh);\n\t\n\t          _this4.addCamera();\n\t          _this4.light.position.copy(_this4.camera.position);\n\t\n\t          _this4.addInteractionControls();\n\t          _this4.addToReactComponent();\n\t\n\t          // Start the animation\n\t          _this4.animate();\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'addCamera',\n\t    value: function addCamera() {\n\t      if (!this.scene.children.find(function (item) {\n\t        return item.type === 'PerspectiveCamera';\n\t      })) {\n\t        // Add the camera\n\t        this.camera = new _Three2.default.PerspectiveCamera(30, this.width / this.height, 1, this.distance);\n\t\n\t        if (this.cameraZ === null) {\n\t          this.cameraZ = Math.max(this.xDims * 3, this.yDims * 3, this.zDims * 3);\n\t        }\n\t\n\t        this.camera.position.set(this.cameraX, this.cameraY, this.cameraZ);\n\t        var directionalLight = new _Three2.default.DirectionalLight(0xffffff, 0.5);\n\t        this.camera.add(directionalLight);\n\t        this.camera.lookAt(this.mesh);\n\t        this.scene.add(this.camera);\n\t\n\t        this.renderer.physicallyCorrectLights = true;\n\t        this.renderer.setSize(this.width, this.height);\n\t        this.renderer.setClearColor(this.backgroundColor, 1);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'addInteractionControls',\n\t    value: function addInteractionControls() {\n\t      // Add controls for mouse interaction\n\t      if (this.orbitControls) {\n\t        if (this.controls) {\n\t          this.controls.dispose();\n\t        }\n\t        this.controls = new OrbitControls(this.camera, _reactDom2.default.findDOMNode(this.component));\n\t        this.controls.enableKeys = false;\n\t        this.controls.addEventListener('change', this.orbitRender.bind(this));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'addToReactComponent',\n\t    value: function addToReactComponent() {\n\t      // Add to the React Component\n\t      // ReactDOM.render(this.component, document.getElementById('loader'));\n\t      _reactDom2.default.findDOMNode(this.component).replaceChild(this.renderer.domElement, _reactDom2.default.findDOMNode(this.component).firstChild);\n\t    }\n\t\n\t    /**\r\n\t     * Animate the scene\r\n\t     * @returns {void}\r\n\t     */\n\t\n\t  }, {\n\t    key: 'animate',\n\t    value: function animate() {\n\t      // note: three.js includes requestAnimationFrame shim\n\t      if (this.rotate) {\n\t        this.animationRequestId = requestAnimationFrame(this.animate.bind(this));\n\t      }\n\t\n\t      if (this.orbitControls) {\n\t        this.controls.update();\n\t      }\n\t      this.render();\n\t    }\n\t\n\t    /**\r\n\t     * Render the scene after turning off the rotation\r\n\t     * @returns {void}\r\n\t     */\n\t\n\t  }, {\n\t    key: 'orbitRender',\n\t    value: function orbitRender() {\n\t      if (this.rotate) {\n\t        this.rotate = false;\n\t      }\n\t      var directionalLight = this.scene.getObjectByName('directionalLight0');\n\t      directionalLight.position.copy(this.camera.position);\n\t\n\t      this.render();\n\t    }\n\t\n\t    /**\r\n\t     * Deallocate Mesh, renderer context.\r\n\t     * @returns {void}\r\n\t     */\n\t\n\t  }, {\n\t    key: 'clean',\n\t    value: function clean() {\n\t      if (this.mesh !== undefined) {\n\t        this.mesh.geometry.dispose();\n\t        this.mesh.material.dispose();\n\t        this.scene.remove(this.mesh);\n\t        delete this.mesh;\n\t      }\n\t      var directionalLightObj = this.scene.getObjectByName(DIRECTIONAL_LIGHT);\n\t      if (directionalLightObj) {\n\t        this.scene.remove(directionalLightObj);\n\t      }\n\t\n\t      if (this.animationRequestId) {\n\t        cancelAnimationFrame(this.animationRequestId);\n\t      }\n\t      this.renderer.dispose();\n\t      this.renderer.forceContextLoss();\n\t    }\n\t\n\t    /**\r\n\t     * Render the scene\r\n\t     * @returns {void}\r\n\t     */\n\t\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      if (this.mesh && this.rotate) {\n\t        this.mesh.rotation.x += this.rotationSpeeds[0];\n\t        this.mesh.rotation.y += this.rotationSpeeds[1];\n\t        this.mesh.rotation.z += this.rotationSpeeds[2];\n\t      }\n\t\n\t      this.renderer.render(this.scene, this.camera);\n\t    }\n\t  }]);\n\t\n\t  return Paint;\n\t}();\n\t\n\texports.default = Paint;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(26);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _Paint = __webpack_require__(22);\n\t\n\tvar _Paint2 = _interopRequireDefault(_Paint);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar STLViewer = function (_Component) {\n\t  _inherits(STLViewer, _Component);\n\t\n\t  function STLViewer(props) {\n\t    _classCallCheck(this, STLViewer);\n\t\n\t    return _possibleConstructorReturn(this, (STLViewer.__proto__ || Object.getPrototypeOf(STLViewer)).call(this, props));\n\t  }\n\t\n\t  _createClass(STLViewer, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      this.paint = new _Paint2.default();\n\t      this.paint.init(this, this.props.sliders, this.props.models);\n\t    }\n\t  }, {\n\t    key: 'shouldComponentUpdate',\n\t    value: function shouldComponentUpdate(nextProps, nextState) {\n\t      return JSON.stringify(nextProps) !== JSON.stringify(this.props);\n\t    }\n\t  }, {\n\t    key: 'componentWillUpdate',\n\t    value: function componentWillUpdate(nextProps, nextState) {\n\t      this.props = nextProps;\n\t      this.paint = new _Paint2.default();\n\t      this.paint.init(this, this.props.sliders, this.props.models);\n\t    }\n\t  }, {\n\t    key: 'componentWillUnmount',\n\t    value: function componentWillUnmount() {\n\t      this.paint.clean();\n\t      delete this.paint;\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _props = this.props,\n\t          width = _props.width,\n\t          height = _props.height,\n\t          backgroundColor = _props.backgroundColor;\n\t\n\t      return _react2.default.createElement(\n\t        'div',\n\t        {\n\t          className: this.props.className,\n\t          style: {\n\t            width: width,\n\t            height: height,\n\t            overflow: 'hidden',\n\t            backgroundColor: backgroundColor\n\t          }\n\t        },\n\t        _react2.default.createElement(\n\t          'div',\n\t          {\n\t            id: 'loader',\n\t            style: {\n\t              height: '100%',\n\t              display: 'flex',\n\t              justifyContent: 'center',\n\t              alignItems: 'center'\n\t            }\n\t          },\n\t          _react2.default.createElement('div', { className: 'spinner spinner-blue' })\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return STLViewer;\n\t}(_react.Component);\n\t\n\tSTLViewer.propTypes = {\n\t  className: _propTypes2.default.string,\n\t  url: _propTypes2.default.string,\n\t  width: _propTypes2.default.number,\n\t  height: _propTypes2.default.number,\n\t  backgroundColor: _propTypes2.default.string,\n\t  modelColor: _propTypes2.default.string,\n\t  rotate: _propTypes2.default.bool,\n\t  orbitControls: _propTypes2.default.bool,\n\t  cameraX: _propTypes2.default.number,\n\t  cameraY: _propTypes2.default.number,\n\t  cameraZ: _propTypes2.default.number,\n\t  lights: _propTypes2.default.array,\n\t  lightColor: _propTypes2.default.string,\n\t  rotationSpeeds: _propTypes2.default.arrayOf(_propTypes2.default.number),\n\t  models: _propTypes2.default.oneOfType([_propTypes2.default.array, _propTypes2.default.instanceOf(ArrayBuffer)]).isRequired\n\t};\n\tSTLViewer.defaultProps = {\n\t  backgroundColor: '#fff',\n\t  width: 400,\n\t  height: 400,\n\t  modelColor: '#B92C2C',\n\t  rotate: true,\n\t  orbitControls: true,\n\t  cameraX: 0,\n\t  cameraY: 0,\n\t  cameraZ: null,\n\t  lights: [0, 0, 1],\n\t  lightColor: '#ffffff',\n\t  rotationSpeeds: [0, 0, 0.02],\n\t  models: undefined\n\t};\n\t\n\t\n\tmodule.exports = STLViewer;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar THREE = __webpack_require__(34);\n\t\n\t//\n\t// STL Loader added\n\t//\n\t/**\r\n\t * @author aleeper / http://adamleeper.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author gero3 / https://github.com/gero3\r\n\t *\r\n\t * Description: A THREE loader for STL ASCII files, as created by Solidworks and other CAD programs.\r\n\t *\r\n\t * Supports both binary and ASCII encoded files, with automatic detection of type.\r\n\t *\r\n\t * Limitations:\r\n\t *  Binary decoding supports \"Magics\" color format (http://en.wikipedia.org/wiki/STL_(file_format)#Color_in_binary_STL).\r\n\t *  There is perhaps some question as to how valid it is to always assume little-endian-ness.\r\n\t *  ASCII decoding assumes file is UTF-8. Seems to work for the examples...\r\n\t *\r\n\t * Usage:\r\n\t *  var loader = new THREE.STLLoader();\r\n\t *  loader.load( './models/stl/slotted_disk.stl', function ( geometry ) {\r\n\t *    scene.add( new THREE.Mesh( geometry ) );\r\n\t *  });\r\n\t *\r\n\t * For binary STLs geometry might contain colors for vertices. To use it:\r\n\t *  // use the same code to load STL as above\r\n\t *  if (geometry.hasColors) {\r\n\t *    material = new THREE.MeshPhongMaterial({ opacity: geometry.alpha, vertexColors: THREE.VertexColors });\r\n\t *  } else { .... }\r\n\t *  var mesh = new THREE.Mesh( geometry, material );\r\n\t */\n\t\n\tTHREE.STLLoader = function (manager) {\n\t  this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\n\t};\n\t\n\tTHREE.STLLoader.prototype = {\n\t  constructor: THREE.STLLoader,\n\t\n\t  loadFromUrl: function loadFromUrl(url, onLoad, onProgress, onError) {\n\t    var scope = this;\n\t\n\t    var loader = new THREE.XHRLoader(scope.manager);\n\t    loader.setCrossOrigin(this.crossOrigin);\n\t    loader.setResponseType('arraybuffer');\n\t    loader.load(url, function (text) {\n\t      onLoad(scope.parse(text));\n\t    }, onProgress, onError);\n\t  },\n\t\n\t  loadFromFile: function loadFromFile(buffer, onLoad) {\n\t    var scope = this;\n\t    onLoad(scope.parse(buffer));\n\t  },\n\t\n\t  parse: function parse(data) {\n\t    var isBinary = function isBinary() {\n\t      var expect, face_size, n_faces, reader;\n\t      reader = new DataView(binData);\n\t      face_size = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8;\n\t      n_faces = reader.getUint32(80, true);\n\t      expect = 80 + 32 / 8 + n_faces * face_size;\n\t\n\t      if (expect === reader.byteLength) {\n\t        return true;\n\t      }\n\t\n\t      // some binary files will have different size from expected,\n\t      // checking characters higher than ASCII to confirm is binary\n\t      var fileLength = reader.byteLength;\n\t      for (var index = 0; index < fileLength; index++) {\n\t        if (reader.getUint8(index, false) > 127) {\n\t          return true;\n\t        }\n\t      }\n\t\n\t      return false;\n\t    };\n\t\n\t    var binData = this.ensureBinary(data);\n\t\n\t    return isBinary() ? this.parseBinary(binData) : this.parseASCII(this.ensureString(data));\n\t  },\n\t\n\t  parseBinary: function parseBinary(data) {\n\t    var reader = new DataView(data);\n\t    var faces = reader.getUint32(80, true);\n\t\n\t    var r,\n\t        g,\n\t        b,\n\t        hasColors = false,\n\t        colors;\n\t    var defaultR, defaultG, defaultB, alpha;\n\t\n\t    // process STL header\n\t    // check for default color in header (\"COLOR=rgba\" sequence).\n\t\n\t    for (var index = 0; index < 80 - 10; index++) {\n\t      if (reader.getUint32(index, false) == 0x434f4c4f /*COLO*/ && reader.getUint8(index + 4) == 0x52 /*'R'*/ && reader.getUint8(index + 5) == 0x3d /*'='*/\n\t      ) {\n\t          hasColors = true;\n\t          colors = new Float32Array(faces * 3 * 3);\n\t\n\t          defaultR = reader.getUint8(index + 6) / 255;\n\t          defaultG = reader.getUint8(index + 7) / 255;\n\t          defaultB = reader.getUint8(index + 8) / 255;\n\t          alpha = reader.getUint8(index + 9) / 255;\n\t        }\n\t    }\n\t\n\t    var dataOffset = 84;\n\t    var faceLength = 12 * 4 + 2;\n\t\n\t    var offset = 0;\n\t\n\t    var geometry = new THREE.BufferGeometry();\n\t\n\t    var vertices = new Float32Array(faces * 3 * 3);\n\t    var normals = new Float32Array(faces * 3 * 3);\n\t\n\t    for (var face = 0; face < faces; face++) {\n\t      var start = dataOffset + face * faceLength;\n\t      var normalX = reader.getFloat32(start, true);\n\t      var normalY = reader.getFloat32(start + 4, true);\n\t      var normalZ = reader.getFloat32(start + 8, true);\n\t\n\t      if (hasColors) {\n\t        var packedColor = reader.getUint16(start + 48, true);\n\t\n\t        if ((packedColor & 0x8000) === 0) {\n\t          // facet has its own unique color\n\t\n\t          r = (packedColor & 0x1f) / 31;\n\t          g = (packedColor >> 5 & 0x1f) / 31;\n\t          b = (packedColor >> 10 & 0x1f) / 31;\n\t        } else {\n\t          r = defaultR;\n\t          g = defaultG;\n\t          b = defaultB;\n\t        }\n\t      }\n\t\n\t      for (var i = 1; i <= 3; i++) {\n\t        var vertexstart = start + i * 12;\n\t\n\t        vertices[offset] = reader.getFloat32(vertexstart, true);\n\t        vertices[offset + 1] = reader.getFloat32(vertexstart + 4, true);\n\t        vertices[offset + 2] = reader.getFloat32(vertexstart + 8, true);\n\t\n\t        normals[offset] = normalX;\n\t        normals[offset + 1] = normalY;\n\t        normals[offset + 2] = normalZ;\n\t\n\t        if (hasColors) {\n\t          colors[offset] = r;\n\t          colors[offset + 1] = g;\n\t          colors[offset + 2] = b;\n\t        }\n\t\n\t        offset += 3;\n\t      }\n\t    }\n\t\n\t    geometry.addAttribute('position', new THREE.BufferAttribute(vertices, 3));\n\t    geometry.addAttribute('normal', new THREE.BufferAttribute(normals, 3));\n\t\n\t    if (hasColors) {\n\t      geometry.addAttribute('color', new THREE.BufferAttribute(colors, 3));\n\t      geometry.hasColors = true;\n\t      geometry.alpha = alpha;\n\t    }\n\t\n\t    return geometry;\n\t  },\n\t\n\t  parseASCII: function parseASCII(data) {\n\t    var geometry, length, normal, patternFace, patternNormal, patternVertex, result, text;\n\t    geometry = new THREE.Geometry();\n\t    patternFace = /facet([\\s\\S]*?)endfacet/g;\n\t\n\t    while ((result = patternFace.exec(data)) !== null) {\n\t      text = result[0];\n\t      patternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\t\n\t      while ((result = patternNormal.exec(text)) !== null) {\n\t        normal = new THREE.Vector3(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5]));\n\t      }\n\t\n\t      patternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\t\n\t      while ((result = patternVertex.exec(text)) !== null) {\n\t        geometry.vertices.push(new THREE.Vector3(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5])));\n\t      }\n\t\n\t      length = geometry.vertices.length;\n\t\n\t      geometry.faces.push(new THREE.Face3(length - 3, length - 2, length - 1, normal));\n\t    }\n\t\n\t    geometry.computeBoundingBox();\n\t    geometry.computeBoundingSphere();\n\t\n\t    return geometry;\n\t  },\n\t\n\t  ensureString: function ensureString(buf) {\n\t    if (typeof buf !== 'string') {\n\t      var array_buffer = new Uint8Array(buf);\n\t      var str = '';\n\t      for (var i = 0; i < buf.byteLength; i++) {\n\t        str += String.fromCharCode(array_buffer[i]); // implicitly assumes little-endian\n\t      }\n\t      return str;\n\t    } else {\n\t      return buf;\n\t    }\n\t  },\n\t\n\t  ensureBinary: function ensureBinary(buf) {\n\t    if (typeof buf === 'string') {\n\t      var array_buffer = new Uint8Array(buf.length);\n\t      for (var i = 0; i < buf.length; i++) {\n\t        array_buffer[i] = buf.charCodeAt(i) & 0xff; // implicitly assumes little-endian\n\t      }\n\t      return array_buffer.buffer || array_buffer;\n\t    } else {\n\t      return buf;\n\t    }\n\t  }\n\t};\n\t\n\tif (typeof DataView === 'undefined') {\n\t  DataView = function DataView(buffer, byteOffset, byteLength) {\n\t    this.buffer = buffer;\n\t    this.byteOffset = byteOffset || 0;\n\t    this.byteLength = byteLength || buffer.byteLength || buffer.length;\n\t    this._isString = typeof buffer === 'string';\n\t  };\n\t\n\t  DataView.prototype = {\n\t    _getCharCodes: function _getCharCodes(buffer, start, length) {\n\t      start = start || 0;\n\t      length = length || buffer.length;\n\t      var end = start + length;\n\t      var codes = [];\n\t      for (var i = start; i < end; i++) {\n\t        codes.push(buffer.charCodeAt(i) & 0xff);\n\t      }\n\t      return codes;\n\t    },\n\t\n\t    _getBytes: function _getBytes(length, byteOffset, littleEndian) {\n\t      var result;\n\t\n\t      // Handle the lack of endianness\n\t      if (littleEndian === undefined) {\n\t        littleEndian = this._littleEndian;\n\t      }\n\t\n\t      // Handle the lack of byteOffset\n\t      if (byteOffset === undefined) {\n\t        byteOffset = this.byteOffset;\n\t      } else {\n\t        byteOffset = this.byteOffset + byteOffset;\n\t      }\n\t\n\t      if (length === undefined) {\n\t        length = this.byteLength - byteOffset;\n\t      }\n\t\n\t      // Error Checking\n\t      if (typeof byteOffset !== 'number') {\n\t        throw new TypeError('DataView byteOffset is not a number');\n\t      }\n\t\n\t      if (length < 0 || byteOffset + length > this.byteLength) {\n\t        throw new Error('DataView length or (byteOffset+length) value is out of bounds');\n\t      }\n\t\n\t      if (this.isString) {\n\t        result = this._getCharCodes(this.buffer, byteOffset, byteOffset + length);\n\t      } else {\n\t        result = this.buffer.slice(byteOffset, byteOffset + length);\n\t      }\n\t\n\t      if (!littleEndian && length > 1) {\n\t        if (!(result instanceof Array)) {\n\t          result = Array.prototype.slice.call(result);\n\t        }\n\t\n\t        result.reverse();\n\t      }\n\t\n\t      return result;\n\t    },\n\t\n\t    // Compatibility functions on a String Buffer\n\t\n\t    getFloat64: function getFloat64(byteOffset, littleEndian) {\n\t      var b = this._getBytes(8, byteOffset, littleEndian),\n\t          sign = 1 - 2 * (b[7] >> 7),\n\t          exponent = ((b[7] << 1 & 0xff) << 3 | b[6] >> 4) - ((1 << 10) - 1),\n\t\n\t      // Binary operators such as | and << operate on 32 bit values, using + and Math.pow(2) instead\n\t      mantissa = (b[6] & 0x0f) * Math.pow(2, 48) + b[5] * Math.pow(2, 40) + b[4] * Math.pow(2, 32) + b[3] * Math.pow(2, 24) + b[2] * Math.pow(2, 16) + b[1] * Math.pow(2, 8) + b[0];\n\t\n\t      if (exponent === 1024) {\n\t        if (mantissa !== 0) {\n\t          return NaN;\n\t        } else {\n\t          return sign * Infinity;\n\t        }\n\t      }\n\t\n\t      if (exponent === -1023) {\n\t        // Denormalized\n\t        return sign * mantissa * Math.pow(2, -1022 - 52);\n\t      }\n\t\n\t      return sign * (1 + mantissa * Math.pow(2, -52)) * Math.pow(2, exponent);\n\t    },\n\t\n\t    getFloat32: function getFloat32(byteOffset, littleEndian) {\n\t      var b = this._getBytes(4, byteOffset, littleEndian),\n\t          sign = 1 - 2 * (b[3] >> 7),\n\t          exponent = (b[3] << 1 & 0xff | b[2] >> 7) - 127,\n\t          mantissa = (b[2] & 0x7f) << 16 | b[1] << 8 | b[0];\n\t\n\t      if (exponent === 128) {\n\t        if (mantissa !== 0) {\n\t          return NaN;\n\t        } else {\n\t          return sign * Infinity;\n\t        }\n\t      }\n\t\n\t      if (exponent === -127) {\n\t        // Denormalized\n\t        return sign * mantissa * Math.pow(2, -126 - 23);\n\t      }\n\t\n\t      return sign * (1 + mantissa * Math.pow(2, -23)) * Math.pow(2, exponent);\n\t    },\n\t\n\t    getInt32: function getInt32(byteOffset, littleEndian) {\n\t      var b = this._getBytes(4, byteOffset, littleEndian);\n\t      return b[3] << 24 | b[2] << 16 | b[1] << 8 | b[0];\n\t    },\n\t\n\t    getUint32: function getUint32(byteOffset, littleEndian) {\n\t      return this.getInt32(byteOffset, littleEndian) >>> 0;\n\t    },\n\t\n\t    getInt16: function getInt16(byteOffset, littleEndian) {\n\t      return this.getUint16(byteOffset, littleEndian) << 16 >> 16;\n\t    },\n\t\n\t    getUint16: function getUint16(byteOffset, littleEndian) {\n\t      var b = this._getBytes(2, byteOffset, littleEndian);\n\t      return b[1] << 8 | b[0];\n\t    },\n\t\n\t    getInt8: function getInt8(byteOffset) {\n\t      return this.getUint8(byteOffset) << 24 >> 24;\n\t    },\n\t\n\t    getUint8: function getUint8(byteOffset) {\n\t      return this._getBytes(1, byteOffset)[0];\n\t    }\n\t  };\n\t}\n\t\n\tmodule.exports = THREE;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tvar ReactPropTypesSecret = __webpack_require__(27);\n\t\n\tfunction emptyFunction() {}\n\tfunction emptyFunctionWithReset() {}\n\temptyFunctionWithReset.resetWarningCache = emptyFunction;\n\t\n\tmodule.exports = function() {\n\t  function shim(props, propName, componentName, location, propFullName, secret) {\n\t    if (secret === ReactPropTypesSecret) {\n\t      // It is still safe when called from React.\n\t      return;\n\t    }\n\t    var err = new Error(\n\t      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n\t      'Use PropTypes.checkPropTypes() to call them. ' +\n\t      'Read more at http://fb.me/use-check-prop-types'\n\t    );\n\t    err.name = 'Invariant Violation';\n\t    throw err;\n\t  };\n\t  shim.isRequired = shim;\n\t  function getShim() {\n\t    return shim;\n\t  };\n\t  // Important!\n\t  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\t  var ReactPropTypes = {\n\t    array: shim,\n\t    bigint: shim,\n\t    bool: shim,\n\t    func: shim,\n\t    number: shim,\n\t    object: shim,\n\t    string: shim,\n\t    symbol: shim,\n\t\n\t    any: shim,\n\t    arrayOf: getShim,\n\t    element: shim,\n\t    elementType: shim,\n\t    instanceOf: getShim,\n\t    node: shim,\n\t    objectOf: getShim,\n\t    oneOf: getShim,\n\t    oneOfType: getShim,\n\t    shape: getShim,\n\t    exact: getShim,\n\t\n\t    checkPropTypes: emptyFunctionWithReset,\n\t    resetWarningCache: emptyFunction\n\t  };\n\t\n\t  ReactPropTypes.PropTypes = ReactPropTypes;\n\t\n\t  return ReactPropTypes;\n\t};\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\tif (false) {\n\t  var ReactIs = require('react-is');\n\t\n\t  // By explicitly using `prop-types` you are opting into new development behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  var throwOnDirectAccess = true;\n\t  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n\t} else {\n\t  // By explicitly using `prop-types` you are opting into new production behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  module.exports = __webpack_require__(25)();\n\t}\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\t\n\tmodule.exports = ReactPropTypesSecret;\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/** @license React v17.0.2\n\t * react-dom.production.min.js\n\t *\n\t * Copyright (c) Facebook, Inc. and its affiliates.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t/*\n\t Modernizr 3.0.0pre (Custom Build) | MIT\n\t*/\n\t'use strict';var aa=__webpack_require__(1),m=__webpack_require__(8),r=__webpack_require__(32);function y(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,b){ea(a,b);ea(a+\"Capture\",b)}\n\tfunction ea(a,b){ca[a]=b;for(a=0;a<b.length;a++)ba.add(b[a])}\n\tvar fa=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ha=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,ia=Object.prototype.hasOwnProperty,\n\tja={},ka={};function la(a){if(ia.call(ka,a))return!0;if(ia.call(ja,a))return!1;if(ha.test(a))return ka[a]=!0;ja[a]=!0;return!1}function ma(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\n\tfunction na(a,b,c,d){if(null===b||\"undefined\"===typeof b||ma(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function B(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var D={};\n\t\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});\n\t[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});\n\t[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}\n\t\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(oa,\n\tpa);D[b]=new B(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});\n\tD.xlinkHref=new B(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});\n\tfunction qa(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(na(b,c,e,d)&&(c=null),d||null===e?la(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\n\tvar ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;\n\tif(\"function\"===typeof Symbol&&Symbol.for){var E=Symbol.for;sa=E(\"react.element\");ta=E(\"react.portal\");ua=E(\"react.fragment\");wa=E(\"react.strict_mode\");xa=E(\"react.profiler\");ya=E(\"react.provider\");za=E(\"react.context\");Aa=E(\"react.forward_ref\");Ba=E(\"react.suspense\");Ca=E(\"react.suspense_list\");Da=E(\"react.memo\");Ea=E(\"react.lazy\");Fa=E(\"react.block\");E(\"react.scope\");Ga=E(\"react.opaque.id\");Ha=E(\"react.debug_trace_mode\");Ia=E(\"react.offscreen\");Ja=E(\"react.legacy_hidden\")}\n\tvar Ka=\"function\"===typeof Symbol&&Symbol.iterator;function La(a){if(null===a||\"object\"!==typeof a)return null;a=Ka&&a[Ka]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var Ma;function Na(a){if(void 0===Ma)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);Ma=b&&b[1]||\"\"}return\"\\n\"+Ma+a}var Oa=!1;\n\tfunction Pa(a,b){if(!a||Oa)return\"\";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(k){var d=k}Reflect.construct(a,[],b)}else{try{b.call()}catch(k){d=k}a.call(b.prototype)}else{try{throw Error();}catch(k){d=k}a()}}catch(k){if(k&&d&&\"string\"===typeof k.stack){for(var e=k.stack.split(\"\\n\"),\n\tf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h])return\"\\n\"+e[g].replace(\" at new \",\" at \");while(1<=g&&0<=h)}break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Na(a):\"\"}\n\tfunction Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na(\"Lazy\");case 13:return Na(\"Suspense\");case 19:return Na(\"SuspenseList\");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return\"\"}}\n\tfunction Ra(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ua:return\"Fragment\";case ta:return\"Portal\";case xa:return\"Profiler\";case wa:return\"StrictMode\";case Ba:return\"Suspense\";case Ca:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case za:return(a.displayName||\"Context\")+\".Consumer\";case ya:return(a._context.displayName||\"Context\")+\".Provider\";case Aa:var b=a.render;b=b.displayName||b.name||\"\";\n\treturn a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\"ForwardRef\");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:b=a._payload;a=a._init;try{return Ra(a(b))}catch(c){}}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\n\tfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\n\tnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\n\tfunction Ya(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function $a(a,b){b=b.checked;null!=b&&qa(a,\"checked\",b,!1)}\n\tfunction ab(a,b){$a(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?bb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&bb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\n\tfunction cb(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\n\tfunction bb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}function db(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function eb(a,b){a=m({children:void 0},b);if(b=db(b.children))a.children=b;return a}\n\tfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\n\tfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(y(91));return m({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(y(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(y(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\n\tfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}var kb={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\n\tfunction lb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function mb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?lb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\n\tvar nb,ob=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==kb.svg||\"innerHTML\"in a)a.innerHTML=b;else{nb=nb||document.createElement(\"div\");nb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\n\tfunction pb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\n\tvar qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\n\tfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(qb).forEach(function(a){rb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);qb[b]=qb[a]})});function sb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||qb.hasOwnProperty(a)&&qb[a]?(\"\"+b).trim():b+\"px\"}\n\tfunction tb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=sb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\n\tfunction vb(a,b){if(b){if(ub[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(y(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(y(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(y(62));}}\n\tfunction wb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\n\tfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(y(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c,d,e){return a(b,c,d,e)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){if(null!==zb||null!==Ab)Ib(),Fb()}\n\tfunction Nb(a,b,c){if(Lb)return a(b,c);Lb=!0;try{return Jb(a,b,c)}finally{Lb=!1,Mb()}}\n\tfunction Ob(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\n\ttypeof c)throw Error(y(231,b,typeof c));return c}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,\"passive\",{get:function(){Pb=!0}});window.addEventListener(\"test\",Qb,Qb);window.removeEventListener(\"test\",Qb,Qb)}catch(a){Pb=!1}function Rb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0;Tb=a}};function Xb(a,b,c,d,e,f,g,h,k){Sb=!1;Tb=null;Rb.apply(Wb,arguments)}\n\tfunction Yb(a,b,c,d,e,f,g,h,k){Xb.apply(this,arguments);if(Sb){if(Sb){var l=Tb;Sb=!1;Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=l)}}function Zb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function $b(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188));}\n\tfunction bc(a){var b=a.alternate;if(!b){b=Zb(a);if(null===b)throw Error(y(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return ac(e),a;if(f===d)return ac(e),b;f=f.sibling}throw Error(y(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\n\tc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(y(189));}}if(c.alternate!==d)throw Error(y(190));}if(3!==c.tag)throw Error(y(188));return c.stateNode.current===c?a:b}function cc(a){a=bc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\n\tfunction dc(a,b){for(var c=a.alternate;null!==b;){if(b===a||b===c)return!0;b=b.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\n\tfunction rc(a,b,c,d,e){return{blockedOn:a,domEventName:b,eventSystemFlags:c|16,nativeEvent:e,targetContainers:[d]}}function sc(a,b){switch(a){case \"focusin\":case \"focusout\":kc=null;break;case \"dragenter\":case \"dragleave\":lc=null;break;case \"mouseover\":case \"mouseout\":mc=null;break;case \"pointerover\":case \"pointerout\":nc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":oc.delete(b.pointerId)}}\n\tfunction tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=rc(b,c,d,e,f),null!==b&&(b=Cb(b),null!==b&&fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\n\tfunction uc(a,b,c,d,e){switch(b){case \"focusin\":return kc=tc(kc,a,b,c,d,e),!0;case \"dragenter\":return lc=tc(lc,a,b,c,d,e),!0;case \"mouseover\":return mc=tc(mc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;nc.set(f,tc(nc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,oc.set(f,tc(oc.get(f)||null,a,b,c,d,e)),!0}return!1}\n\tfunction vc(a){var b=wc(a.target);if(null!==b){var c=Zb(b);if(null!==c)if(b=c.tag,13===b){if(b=$b(c),null!==b){a.blockedOn=b;hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(c)})});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\n\tfunction xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c)return b=Cb(c),null!==b&&fc(b),a.blockedOn=c,!1;b.shift()}return!0}function zc(a,b,c){xc(a)&&c.delete(b)}\n\tfunction Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(null!==a.blockedOn){a=Cb(a.blockedOn);null!==a&&ec(a);break}for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c){a.blockedOn=c;break}b.shift()}null===a.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null);null!==lc&&xc(lc)&&(lc=null);null!==mc&&xc(mc)&&(mc=null);nc.forEach(zc);oc.forEach(zc)}\n\tfunction Bc(a,b){a.blockedOn===b&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}\n\tfunction Cc(a){function b(b){return Bc(b,a)}if(0<jc.length){Bc(jc[0],a);for(var c=1;c<jc.length;c++){var d=jc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==kc&&Bc(kc,a);null!==lc&&Bc(lc,a);null!==mc&&Bc(mc,a);nc.forEach(b);oc.forEach(b);for(c=0;c<pc.length;c++)d=pc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<pc.length&&(c=pc[0],null===c.blockedOn);)vc(c),null===c.blockedOn&&pc.shift()}\n\tfunction Dc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Ec={animationend:Dc(\"Animation\",\"AnimationEnd\"),animationiteration:Dc(\"Animation\",\"AnimationIteration\"),animationstart:Dc(\"Animation\",\"AnimationStart\"),transitionend:Dc(\"Transition\",\"TransitionEnd\")},Fc={},Gc={};\n\tfa&&(Gc=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),\"TransitionEvent\"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var b=Ec[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Gc)return Fc[a]=b[c];return a}\n\tvar Ic=Hc(\"animationend\"),Jc=Hc(\"animationiteration\"),Kc=Hc(\"animationstart\"),Lc=Hc(\"transitionend\"),Mc=new Map,Nc=new Map,Oc=[\"abort\",\"abort\",Ic,\"animationEnd\",Jc,\"animationIteration\",Kc,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\n\t\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",Lc,\"transitionEnd\",\"waiting\",\"waiting\"];function Pc(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];e=\"on\"+(e[0].toUpperCase()+e.slice(1));Nc.set(d,b);Mc.set(d,e);da(e,[d])}}var Qc=r.unstable_now;Qc();var F=8;\n\tfunction Rc(a){if(0!==(1&a))return F=15,1;if(0!==(2&a))return F=14,2;if(0!==(4&a))return F=13,4;var b=24&a;if(0!==b)return F=12,b;if(0!==(a&32))return F=11,32;b=192&a;if(0!==b)return F=10,b;if(0!==(a&256))return F=9,256;b=3584&a;if(0!==b)return F=8,b;if(0!==(a&4096))return F=7,4096;b=4186112&a;if(0!==b)return F=6,b;b=62914560&a;if(0!==b)return F=5,b;if(a&67108864)return F=4,67108864;if(0!==(a&134217728))return F=3,134217728;b=805306368&a;if(0!==b)return F=2,b;if(0!==(1073741824&a))return F=1,1073741824;\n\tF=8;return a}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a));}}\n\tfunction Uc(a,b){var c=a.pendingLanes;if(0===c)return F=0;var d=0,e=0,f=a.expiredLanes,g=a.suspendedLanes,h=a.pingedLanes;if(0!==f)d=f,e=F=15;else if(f=c&134217727,0!==f){var k=f&~g;0!==k?(d=Rc(k),e=F):(h&=f,0!==h&&(d=Rc(h),e=F))}else f=c&~g,0!==f?(d=Rc(f),e=F):0!==h&&(d=Rc(h),e=F);if(0===d)return 0;d=31-Vc(d);d=c&((0>d?0:1<<d)<<1)-1;if(0!==b&&b!==d&&0===(b&g)){Rc(b);if(e<=F)return b;F=e}b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-Vc(b),e=1<<c,d|=a[c],b&=~e;return d}\n\tfunction Wc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Xc(a,b){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~b),0===a?Xc(10,b):a;case 10:return a=Yc(192&~b),0===a?Xc(8,b):a;case 8:return a=Yc(3584&~b),0===a&&(a=Yc(4186112&~b),0===a&&(a=512)),a;case 2:return b=Yc(805306368&~b),0===b&&(b=268435456),b}throw Error(y(358,a));}function Yc(a){return a&-a}function Zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\n\tfunction $c(a,b,c){a.pendingLanes|=b;var d=b-1;a.suspendedLanes&=d;a.pingedLanes&=d;a=a.eventTimes;b=31-Vc(b);a[b]=c}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return 0===a?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,b,c,d){Kb||Ib();var e=hd,f=Kb;Kb=!0;try{Hb(e,a,b,c,d)}finally{(Kb=f)||Mb()}}function id(a,b,c,d){ed(dd,hd.bind(null,a,b,c,d))}\n\tfunction hd(a,b,c,d){if(fd){var e;if((e=0===(b&4))&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,b,c,d),jc.push(a);else{var f=yc(a,b,c,d);if(null===f)e&&sc(a,d);else{if(e){if(-1<qc.indexOf(a)){a=rc(f,a,b,c,d);jc.push(a);return}if(uc(f,a,b,c,d))return;sc(a,d)}jd(a,b,d,null,c)}}}}\n\tfunction yc(a,b,c,d){var e=xb(d);e=wc(e);if(null!==e){var f=Zb(e);if(null===f)e=null;else{var g=f.tag;if(13===g){e=$b(f);if(null!==e)return e;e=null}else if(3===g){if(f.stateNode.hydrate)return 3===f.tag?f.stateNode.containerInfo:null;e=null}else f!==e&&(e=null)}}jd(a,b,d,e,c);return null}var kd=null,ld=null,md=null;\n\tfunction nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}function od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\n\tfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}m(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n\t(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\n\tvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\n\ta)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\n\tSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n\t119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\n\tvar Qd=m({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\n\ta.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\n\tdeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&\"CompositionEvent\"in window,be=null;fa&&\"documentMode\"in document&&(be=document.documentMode);var ce=fa&&\"TextEvent\"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\n\tfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\n\tfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\n\tvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\n\tfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(fa){var xe;if(fa){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));a=re;if(Kb)a(b);else{Kb=!0;try{Gb(a,b)}finally{Kb=!1,Mb()}}}}\n\tfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;\n\tfunction Je(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ie.call(b,c[d])||!He(a[c[d]],b[c[d]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\n\tfunction Le(a,b){var c=Ke(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Ke(c)}}function Me(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Me(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\n\tfunction Ne(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Oe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\n\tvar Pe=fa&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\n\tfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Oe(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Je(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\n\tPc(\"cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),\n\t0);Pc(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);Pc(Oc,2);for(var Ve=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);\n\tea(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ea(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);ea(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);da(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));da(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));da(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);da(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));\n\tda(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));da(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Xe=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Ye=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Xe));\n\tfunction Ze(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Yb(d,b,void 0,a);a.currentTarget=null}\n\tfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a;}\n\tfunction G(a,b){var c=$e(b),d=a+\"__bubble\";c.has(d)||(af(b,a,2,!1),c.add(d))}var bf=\"_reactListening\"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(b){Ye.has(b)||df(b,!1,a,null);df(b,!0,a,null)}))}\n\tfunction df(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=c;\"selectionchange\"===a&&9!==c.nodeType&&(f=c.ownerDocument);if(null!==d&&!b&&Ye.has(a)){if(\"scroll\"!==a)return;e|=2;f=d}var g=$e(f),h=a+\"__\"+(b?\"capture\":\"bubble\");g.has(h)||(b&&(e|=4),af(f,a,e,b),g.add(h))}\n\tfunction af(a,b,c,d){var e=Nc.get(b);switch(void 0===e?2:e){case 0:e=gd;break;case 1:e=id;break;default:e=hd}c=e.bind(null,b,c,a);e=void 0;!Pb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\n\tfunction jd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Nb(function(){var d=f,e=xb(c),g=[];\n\ta:{var h=Mc.get(a);if(void 0!==h){var k=td,x=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":x=\"focus\";k=Fd;break;case \"focusout\":x=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\n\tDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case Ic:case Jc:case Kc:k=Hd;break;case Lc:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var w=0!==(b&4),z=!w&&\"scroll\"===a,u=w?null!==h?h+\"Capture\":null:h;w=[];for(var t=d,q;null!==\n\tt;){q=t;var v=q.stateNode;5===q.tag&&null!==v&&(q=v,null!==u&&(v=Ob(t,u),null!=v&&w.push(ef(t,v,q))));if(z)break;t=t.return}0<w.length&&(h=new k(h,x,null,c,e),g.push({event:h,listeners:w}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&0===(b&16)&&(x=c.relatedTarget||c.fromElement)&&(wc(x)||x[ff]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(x=c.relatedTarget||c.toElement,k=d,x=x?wc(x):null,null!==\n\tx&&(z=Zb(x),x!==z||5!==x.tag&&6!==x.tag))x=null}else k=null,x=d;if(k!==x){w=Bd;v=\"onMouseLeave\";u=\"onMouseEnter\";t=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)w=Td,v=\"onPointerLeave\",u=\"onPointerEnter\",t=\"pointer\";z=null==k?h:ue(k);q=null==x?h:ue(x);h=new w(v,t+\"leave\",k,c,e);h.target=z;h.relatedTarget=q;v=null;wc(e)===d&&(w=new w(u,t+\"enter\",x,c,e),w.target=q,w.relatedTarget=z,v=w);z=v;if(k&&x)b:{w=k;u=x;t=0;for(q=w;q;q=gf(q))t++;q=0;for(v=u;v;v=gf(v))q++;for(;0<t-q;)w=gf(w),t--;for(;0<q-t;)u=\n\tgf(u),q--;for(;t--;){if(w===u||null!==u&&w===u.alternate)break b;w=gf(w);u=gf(u)}w=null}else w=null;null!==k&&hf(g,h,k,w,!1);null!==x&&null!==z&&hf(g,z,x,w,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var J=ve;else if(me(h))if(we)J=Fe;else{J=De;var K=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(J=Ee);if(J&&(J=J(a,d))){ne(g,J,c,e);break a}K&&K(a,h,d);\"focusout\"===a&&(K=h._wrapperState)&&\n\tK.controlled&&\"number\"===h.type&&bb(h,\"number\",h.value)}K=d?ue(d):window;switch(a){case \"focusin\":if(me(K)||\"true\"===K.contentEditable)Qe=K,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var Q;if(ae)b:{switch(a){case \"compositionstart\":var L=\"onCompositionStart\";break b;case \"compositionend\":L=\"onCompositionEnd\";break b;\n\tcase \"compositionupdate\":L=\"onCompositionUpdate\";break b}L=void 0}else ie?ge(a,c)&&(L=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(L=\"onCompositionStart\");L&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==L?\"onCompositionEnd\"===L&&ie&&(Q=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),K=oe(d,L),0<K.length&&(L=new Ld(L,a,null,c,e),g.push({event:L,listeners:K}),Q?L.data=Q:(Q=he(c),null!==Q&&(L.data=Q))));if(Q=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),0<d.length&&(e=new Ld(\"onBeforeInput\",\n\t\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=Q)}se(g,b)})}function ef(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Ob(a,c),null!=f&&d.unshift(ef(a,f,e)),f=Ob(a,b),null!=f&&d.push(ef(a,f,e)));a=a.return}return d}function gf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\n\tfunction hf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Ob(c,f),null!=k&&g.unshift(ef(c,k,h))):e||(k=Ob(c,f),null!=k&&g.push(ef(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function jf(){}var kf=null,lf=null;function mf(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\n\tfunction nf(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var of=\"function\"===typeof setTimeout?setTimeout:void 0,pf=\"function\"===typeof clearTimeout?clearTimeout:void 0;function qf(a){1===a.nodeType?a.textContent=\"\":9===a.nodeType&&(a=a.body,null!=a&&(a.textContent=\"\"))}\n\tfunction rf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function sf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf=\"__reactFiber$\"+vf,xf=\"__reactProps$\"+vf,ff=\"__reactContainer$\"+vf,yf=\"__reactEvents$\"+vf;\n\tfunction wc(a){var b=a[wf];if(b)return b;for(var c=a.parentNode;c;){if(b=c[ff]||c[wf]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sf(a);null!==a;){if(c=a[wf])return c;a=sf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[wf]||a[ff];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(y(33));}function Db(a){return a[xf]||null}\n\tfunction $e(a){var b=a[yf];void 0===b&&(b=a[yf]=new Set);return b}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,b){Af++;zf[Af]=a.current;a.current=b}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;\n\tfunction Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function Ff(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Gf(){H(N);H(M)}function Hf(a,b,c){if(M.current!==Cf)throw Error(y(168));I(M,b);I(N,c)}\n\tfunction If(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(y(108,Ra(b)||\"Unknown\",e));return m({},c,d)}function Jf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf;Df=M.current;I(M,a);I(N,N.current);return!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(y(169));c?(a=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N);I(N,c)}\n\tvar Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1E4>dg?Sf:function(){return Sf()-dg};\n\tfunction eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332));}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332));}}function gg(a,b){a=fg(a);return Nf(a,b)}function hg(a,b,c){a=fg(a);return Of(a,b,c)}function ig(){if(null!==bg){var a=bg;bg=null;Pf(a)}jg()}\n\tfunction jg(){if(!cg&&null!==ag){cg=!0;var a=0;try{var b=ag;gg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});ag=null}catch(c){throw null!==ag&&(ag=ag.slice(a+1)),Of(Uf,ig),c;}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}\n\tfunction rg(a){var b=mg.current;H(mg);a.type._context._currentValue=b}function sg(a,b){for(;null!==a;){var c=a.alternate;if((a.childLanes&b)===b)if(null===c||(c.childLanes&b)===b)break;else c.childLanes|=b;else a.childLanes|=b,null!==c&&(c.childLanes|=b);a=a.return}}function tg(a,b){ng=a;pg=og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ug=!0),a.firstContext=null)}\n\tfunction vg(a,b){if(pg!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)pg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===og){if(null===ng)throw Error(y(308));og=b;ng.dependencies={lanes:0,firstContext:b,responders:null}}else og=og.next=b}return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}\n\tfunction yg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function Ag(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}\n\tfunction Bg(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\n\tb;c.lastBaseUpdate=b}\n\tfunction Cg(a,b,c,d){var e=a.updateQueue;wg=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var n=a.alternate;if(null!==n){n=n.updateQueue;var A=n.lastBaseUpdate;A!==g&&(null===A?n.firstBaseUpdate=l:A.next=l,n.lastBaseUpdate=k)}}if(null!==f){A=e.baseState;g=0;n=l=k=null;do{h=f.lane;var p=f.eventTime;if((d&h)===h){null!==n&&(n=n.next={eventTime:p,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,\n\tnext:null});a:{var C=a,x=f;h=b;p=c;switch(x.tag){case 1:C=x.payload;if(\"function\"===typeof C){A=C.call(p,A,h);break a}A=C;break a;case 3:C.flags=C.flags&-4097|64;case 0:C=x.payload;h=\"function\"===typeof C?C.call(p,A,h):C;if(null===h||void 0===h)break a;A=m({},A,h);break a;case 2:wg=!0}}null!==f.callback&&(a.flags|=32,h=e.effects,null===h?e.effects=[f]:h.push(f))}else p={eventTime:p,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===n?(l=n=p,k=A):n=n.next=p,g|=h;f=f.next;if(null===\n\tf)if(h=e.shared.pending,null===h)break;else f=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}while(1);null===n&&(k=A);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=n;Dg|=g;a.lanes=g;a.memoizedState=A}}function Eg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(y(191,e));e.call(d)}}}var Fg=(new aa.Component).refs;\n\tfunction Gg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\n\tvar Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=Hg(),d=Ig(a),e=zg(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=\n\tb);Ag(a,e);Jg(a,d,c)}};function Lg(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Je(c,d)||!Je(e,f):!0}\n\tfunction Mg(a,b,c){var d=!1,e=Cf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=vg(f):(e=Ff(b)?Df:M.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Ef(a,e):Cf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Kg;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\n\tfunction Ng(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Kg.enqueueReplaceState(b,b.state,null)}\n\tfunction Og(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Fg;xg(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=vg(f):(f=Ff(b)?Df:M.current,e.context=Ef(a,f));Cg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Gg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||\n\t(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Kg.enqueueReplaceState(e,e.state,null),Cg(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4)}var Pg=Array.isArray;\n\tfunction Qg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(y(309));var d=c.stateNode}if(!d)throw Error(y(147,a));var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Fg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw Error(y(284));if(!c._owner)throw Error(y(290,a));}return a}\n\tfunction Rg(a,b){if(\"textarea\"!==a.type)throw Error(y(31,\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b));}\n\tfunction Sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.flags=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Tg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags=2,\n\tc):d;b.flags=2;return c}function g(b){a&&null===b.alternate&&(b.flags=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ug(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Qg(a,b,c),d.return=a,d;d=Vg(c.type,c.key,c.props,null,a.mode,d);d.ref=Qg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=\n\tWg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=Xg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function A(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=Ug(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case sa:return c=Vg(b.type,b.key,b.props,null,a.mode,c),c.ref=Qg(a,null,b),c.return=a,c;case ta:return b=Wg(b,a.mode,c),b.return=a,b}if(Pg(b)||La(b))return b=Xg(b,\n\ta.mode,c,null),b.return=a,b;Rg(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case sa:return c.key===e?c.type===ua?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case ta:return c.key===e?l(a,b,c,d):null}if(Pg(c)||La(c))return null!==e?null:n(a,b,c,d,null);Rg(a,c)}return null}function C(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||\n\tnull,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case sa:return a=a.get(null===d.key?c:d.key)||null,d.type===ua?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case ta:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Pg(d)||La(d))return a=a.get(c)||null,n(b,a,d,e,null);Rg(b,d)}return null}function x(e,g,h,k){for(var l=null,t=null,u=g,z=g=0,q=null;null!==u&&z<h.length;z++){u.index>z?(q=u,u=null):q=u.sibling;var n=p(e,u,h[z],k);if(null===n){null===u&&(u=q);break}a&&u&&null===\n\tn.alternate&&b(e,u);g=f(n,g,z);null===t?l=n:t.sibling=n;t=n;u=q}if(z===h.length)return c(e,u),l;if(null===u){for(;z<h.length;z++)u=A(e,h[z],k),null!==u&&(g=f(u,g,z),null===t?l=u:t.sibling=u,t=u);return l}for(u=d(e,u);z<h.length;z++)q=C(u,e,z,h[z],k),null!==q&&(a&&null!==q.alternate&&u.delete(null===q.key?z:q.key),g=f(q,g,z),null===t?l=q:t.sibling=q,t=q);a&&u.forEach(function(a){return b(e,a)});return l}function w(e,g,h,k){var l=La(h);if(\"function\"!==typeof l)throw Error(y(150));h=l.call(h);if(null==\n\th)throw Error(y(151));for(var t=l=null,u=g,z=g=0,q=null,n=h.next();null!==u&&!n.done;z++,n=h.next()){u.index>z?(q=u,u=null):q=u.sibling;var w=p(e,u,n.value,k);if(null===w){null===u&&(u=q);break}a&&u&&null===w.alternate&&b(e,u);g=f(w,g,z);null===t?l=w:t.sibling=w;t=w;u=q}if(n.done)return c(e,u),l;if(null===u){for(;!n.done;z++,n=h.next())n=A(e,n.value,k),null!==n&&(g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);return l}for(u=d(e,u);!n.done;z++,n=h.next())n=C(u,e,z,n.value,k),null!==n&&(a&&null!==n.alternate&&\n\tu.delete(null===n.key?z:n.key),g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k=\"object\"===typeof f&&null!==f&&f.type===ua&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case sa:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ua){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling);\n\td=e(k,f.props);d.ref=Qg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ua?(d=Xg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Vg(f.type,f.key,f.props,null,a.mode,h),h.ref=Qg(a,d,f),h.return=a,a=h)}return g(a);case ta:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=\n\tWg(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ug(f,a.mode,h),d.return=a,a=d),g(a);if(Pg(f))return x(a,d,f,h);if(La(f))return w(a,d,f,h);l&&Rg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(a.type)||\"Component\"));}return c(a,d)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);\n\tfunction dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,b){I(ch,b);I(bh,a);I(ah,$g);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:mb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=mb(b,a)}H(ah);I(ah,b)}function fh(){H(ah);H(bh);H(ch)}function gh(a){dh(ch.current);var b=dh(ah.current);var c=mb(b,a.type);b!==c&&(I(bh,a),I(ah,c))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);\n\tfunction ih(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var jh=null,kh=null,lh=!1;\n\tfunction mh(a,b){var c=nh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.flags=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function oh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\n\tfunction ph(a){if(lh){var b=kh;if(b){var c=b;if(!oh(a,b)){b=rf(c.nextSibling);if(!b||!oh(a,b)){a.flags=a.flags&-1025|2;lh=!1;jh=a;return}mh(jh,c)}jh=a;kh=rf(b.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;jh=a}\n\tfunction rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!nf(b,a.memoizedProps))for(b=kh;b;)mh(a,b),b=rf(b.nextSibling);qh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(y(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){kh=rf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}\n\tfunction sh(){kh=jh=null;lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321));}function Bh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\n\tfunction Ch(a,b,c,d,e,f){xh=f;R=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;vh.current=null===a||null===a.memoizedState?Dh:Eh;a=c(d,e);if(zh){f=0;do{zh=!1;if(!(25>f))throw Error(y(301));f+=1;T=S=null;b.updateQueue=null;vh.current=Fh;a=c(d,e)}while(zh)}vh.current=Gh;b=null!==S&&null!==S.next;xh=0;T=S=R=null;yh=!1;if(b)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===T?R.memoizedState=T=a:T=T.next=a;return T}\n\tfunction Ih(){if(null===S){var a=R.alternate;a=null!==a?a.memoizedState:null}else a=S.next;var b=null===T?R.memoizedState:T.next;if(null!==b)T=b,S=a;else{if(null===a)throw Error(y(310));S=a;a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null};null===T?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,b){return\"function\"===typeof b?b(a):b}\n\tfunction Kh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=S,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.lane;if((xh&l)===l)null!==h&&(h=h.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),d=k.eagerReducer===a?k.eagerState:a(d,k.action);else{var n={lane:l,action:k.action,eagerReducer:k.eagerReducer,\n\teagerState:k.eagerState,next:null};null===h?(g=h=n,f=d):h=h.next=n;R.lanes|=l;Dg|=l}k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;He(d,b.memoizedState)||(ug=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}\n\tfunction Lh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}\n\tfunction Mh(a,b,c){var d=b._getVersion;d=d(b._source);var e=b._workInProgressVersionPrimary;if(null!==e)a=e===d;else if(a=a.mutableReadLanes,a=(xh&a)===a)b._workInProgressVersionPrimary=d,th.push(b);if(a)return c(b._source);th.push(b);throw Error(y(350));}\n\tfunction Nh(a,b,c,d){var e=U;if(null===e)throw Error(y(349));var f=b._getVersion,g=f(b._source),h=vh.current,k=h.useState(function(){return Mh(e,b,c)}),l=k[1],n=k[0];k=T;var A=a.memoizedState,p=A.refs,C=p.getSnapshot,x=A.source;A=A.subscribe;var w=R;a.memoizedState={refs:p,source:b,subscribe:d};h.useEffect(function(){p.getSnapshot=c;p.setSnapshot=l;var a=f(b._source);if(!He(g,a)){a=c(b._source);He(n,a)||(l(a),a=Ig(w),e.mutableReadLanes|=a&e.pendingLanes);a=e.mutableReadLanes;e.entangledLanes|=a;for(var d=\n\te.entanglements,h=a;0<h;){var k=31-Vc(h),v=1<<k;d[k]|=a;h&=~v}}},[c,b,d]);h.useEffect(function(){return d(b._source,function(){var a=p.getSnapshot,c=p.setSnapshot;try{c(a(b._source));var d=Ig(w);e.mutableReadLanes|=d&e.pendingLanes}catch(q){c(function(){throw q;})}})},[b,d]);He(C,c)&&He(x,b)&&He(A,d)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:n},a.dispatch=l=Oh.bind(null,R,a),k.queue=a,k.baseQueue=null,n=Mh(e,b,c),k.memoizedState=k.baseState=n);return n}\n\tfunction Ph(a,b,c){var d=Ih();return Nh(d,a,b,c)}function Qh(a){var b=Hh();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a};a=a.dispatch=Oh.bind(null,R,a);return[b.memoizedState,a]}\n\tfunction Rh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=R.updateQueue;null===b?(b={lastEffect:null},R.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Sh(a){var b=Hh();a={current:a};return b.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,b,c,d){var e=Hh();R.flags|=a;e.memoizedState=Rh(1|b,c,void 0,void 0===d?null:d)}\n\tfunction Vh(a,b,c,d){var e=Ih();d=void 0===d?null:d;var f=void 0;if(null!==S){var g=S.memoizedState;f=g.destroy;if(null!==d&&Bh(d,g.deps)){Rh(b,c,f,d);return}}R.flags|=a;e.memoizedState=Rh(1|b,c,f,d)}function Wh(a,b){return Uh(516,4,a,b)}function Xh(a,b){return Vh(516,4,a,b)}function Yh(a,b){return Vh(4,2,a,b)}function Zh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}\n\tfunction $h(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Vh(4,2,Zh.bind(null,b,a),c)}function ai(){}function bi(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function ci(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}\n\tfunction di(a,b){var c=eg();gg(98>c?98:c,function(){a(!0)});gg(97<c?97:c,function(){var c=wh.transition;wh.transition=1;try{a(!1),b()}finally{wh.transition=c}})}\n\tfunction Oh(a,b,c){var d=Hg(),e=Ig(a),f={lane:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.pending;null===g?f.next=f:(f.next=g.next,g.next=f);b.pending=f;g=a.alternate;if(a===R||null!==g&&g===R)zh=yh=!0;else{if(0===a.lanes&&(null===g||0===g.lanes)&&(g=b.lastRenderedReducer,null!==g))try{var h=b.lastRenderedState,k=g(h,c);f.eagerReducer=g;f.eagerState=k;if(He(k,h))return}catch(l){}finally{}Jg(a,e,d)}}\n\tvar Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,b){Hh().memoizedState=[a,void 0===b?null:b];return a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Uh(4,2,Zh.bind(null,\n\tb,a),c)},useLayoutEffect:function(a,b){return Uh(4,2,a,b)},useMemo:function(a,b){var c=Hh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Hh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=Oh.bind(null,R,a);return[d.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var b=Qh(a),c=b[0],d=b[1];Wh(function(){var b=wh.transition;\n\twh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Qh(!1),b=a[0];a=di.bind(null,a[1]);Sh(a);return[a,b]},useMutableSource:function(a,b,c){var d=Hh();d.memoizedState={refs:{getSnapshot:b,setSnapshot:null},source:a,subscribe:c};return Nh(d,a,b,c)},useOpaqueIdentifier:function(){if(lh){var a=!1,b=uf(function(){a||(a=!0,c(\"r:\"+(tf++).toString(36)));throw Error(y(355));}),c=Qh(b)[1];0===(R.mode&2)&&(R.flags|=516,Rh(5,function(){c(\"r:\"+(tf++).toString(36))},\n\tvoid 0,null));return b}b=\"r:\"+(tf++).toString(36);Qh(b);return b},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Kh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,\n\ta]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Lh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,\n\ta]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,b,c,d){b.child=null===a?Zg(b,null,c,d):Yg(b,a.child,c,d)}function gi(a,b,c,d,e){c=c.render;var f=b.ref;tg(b,e);d=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,d,e);return b.child}\n\tfunction ii(a,b,c,d,e,f){if(null===a){var g=c.type;if(\"function\"===typeof g&&!ji(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ki(a,b,g,d,e,f);a=Vg(c.type,null,d,b,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(0===(e&f)&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Je,c(e,d)&&a.ref===b.ref))return hi(a,b,f);b.flags|=1;a=Tg(g,d);a.ref=b.ref;a.return=b;return b.child=a}\n\tfunction ki(a,b,c,d,e,f){if(null!==a&&Je(a.memoizedProps,d)&&a.ref===b.ref)if(ug=!1,0!==(f&e))0!==(a.flags&16384)&&(ug=!0);else return b.lanes=a.lanes,hi(a,b,f);return li(a,b,c,d,f)}\n\tfunction mi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode||\"unstable-defer-without-hiding\"===d.mode)if(0===(b.mode&4))b.memoizedState={baseLanes:0},ni(b,c);else if(0!==(c&1073741824))b.memoizedState={baseLanes:0},ni(b,null!==f?f.baseLanes:c);else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a},ni(b,a),null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,ni(b,d);fi(a,b,e,c);return b.child}\n\tfunction oi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=128}function li(a,b,c,d,e){var f=Ff(c)?Df:M.current;f=Ef(b,f);tg(b,e);c=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,c,e);return b.child}\n\tfunction pi(a,b,c,d,e){if(Ff(c)){var f=!0;Jf(b)}else f=!1;tg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Mg(b,c,d),Og(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=vg(l):(l=Ff(c)?Df:M.current,l=Ef(b,l));var n=c.getDerivedStateFromProps,A=\"function\"===typeof n||\"function\"===typeof g.getSnapshotBeforeUpdate;A||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\n\t\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ng(b,g,d,l);wg=!1;var p=b.memoizedState;g.state=p;Cg(b,d,g,e);k=b.memoizedState;h!==d||p!==k||N.current||wg?(\"function\"===typeof n&&(Gg(b,c,n,d),k=b.memoizedState),(h=wg||Lg(b,c,h,d,p,k,l))?(A||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===\n\ttypeof g.componentDidMount&&(b.flags|=4)):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),d=!1)}else{g=b.stateNode;yg(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:lg(b.type,h);g.props=l;A=b.pendingProps;p=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=vg(k):(k=Ff(c)?Df:M.current,k=Ef(b,k));var C=c.getDerivedStateFromProps;(n=\"function\"===typeof C||\n\t\"function\"===typeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==A||p!==k)&&Ng(b,g,d,k);wg=!1;p=b.memoizedState;g.state=p;Cg(b,d,g,e);var x=b.memoizedState;h!==A||p!==x||N.current||wg?(\"function\"===typeof C&&(Gg(b,c,C,d),x=b.memoizedState),(l=wg||Lg(b,c,l,d,p,x,k))?(n||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\n\tx,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=256)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||\n\th===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),d=!1)}return qi(a,b,c,d,f,e)}\n\tfunction qi(a,b,c,d,e,f){oi(a,b);var g=0!==(b.flags&64);if(!d&&!g)return e&&Kf(b,c,!1),hi(a,b,f);d=b.stateNode;ei.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Yg(b,a.child,null,f),b.child=Yg(b,null,h,f)):fi(a,b,h,f);b.memoizedState=d.state;e&&Kf(b,c,!0);return b.child}function ri(a){var b=a.stateNode;b.pendingContext?Hf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(a,b.context,!1);eh(a,b.containerInfo)}\n\tvar si={dehydrated:null,retryLane:0};\n\tfunction ti(a,b,c){var d=b.pendingProps,e=P.current,f=!1,g;(g=0!==(b.flags&64))||(g=null!==a&&null===a.memoizedState?!1:0!==(e&2));g?(f=!0,b.flags&=-65):null!==a&&null===a.memoizedState||void 0===d.fallback||!0===d.unstable_avoidThisFallback||(e|=1);I(P,e&1);if(null===a){void 0!==d.fallback&&ph(b);a=d.children;e=d.fallback;if(f)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},b.memoizedState=si,a;if(\"number\"===typeof d.unstable_expectedLoadTime)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},\n\tb.memoizedState=si,b.lanes=33554432,a;c=vi({mode:\"visible\",children:a},b.mode,c,null);c.return=b;return b.child=c}if(null!==a.memoizedState){if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:\n\t{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}function ui(a,b,c,d){var e=a.mode,f=a.child;b={mode:\"hidden\",children:b};0===(e&2)&&null!==f?(f.childLanes=0,f.pendingProps=b):f=vi(b,e,0,null);c=Xg(c,e,d,null);f.return=a;c.return=a;f.sibling=c;a.child=f;return c}\n\tfunction xi(a,b,c,d){var e=a.child;a=e.sibling;c=Tg(e,{mode:\"visible\",children:c});0===(b.mode&2)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(a.nextEffect=null,a.flags=8,b.firstEffect=b.lastEffect=a);return b.child=c}\n\tfunction wi(a,b,c,d,e){var f=b.mode,g=a.child;a=g.sibling;var h={mode:\"hidden\",children:c};0===(f&2)&&b.child!==g?(c=b.child,c.childLanes=0,c.pendingProps=h,g=c.lastEffect,null!==g?(b.firstEffect=c.firstEffect,b.lastEffect=g,g.nextEffect=null):b.firstEffect=b.lastEffect=null):c=Tg(g,h);null!==a?d=Tg(a,d):(d=Xg(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function yi(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);sg(a.return,b)}\n\tfunction zi(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.lastEffect=f)}\n\tfunction Ai(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;fi(a,b,d.children,c);d=P.current;if(0!==(d&2))d=d&1|2,b.flags|=64;else{if(null!==a&&0!==(a.flags&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&yi(a,c);else if(19===a.tag)yi(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(P,d);if(0===(b.mode&2))b.memoizedState=\n\tnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ih(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);zi(b,!1,e,c,f,b.lastEffect);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ih(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}zi(b,!0,c,null,f,b.lastEffect);break;case \"together\":zi(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}\n\tfunction hi(a,b,c){null!==a&&(b.dependencies=a.dependencies);Dg|=b.lanes;if(0!==(c&b.childLanes)){if(null!==a&&b.child!==a.child)throw Error(y(153));if(null!==b.child){a=b.child;c=Tg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Tg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}return null}var Bi,Ci,Di,Ei;\n\tBi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Ci=function(){};\n\tDi=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;dh(ah.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"option\":e=eb(a,e);d=eb(a,d);f=[];break;case \"select\":e=m({},e,{value:void 0});d=m({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=jf)}vb(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===\n\tl){var h=e[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ca.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||\n\t(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,c)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ca.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&G(\"scroll\",a),f||h===k||(f=[])):\"object\"===typeof k&&null!==k&&k.$$typeof===Ga?k.toString():(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",\n\tc);var l=f;if(b.updateQueue=l)b.flags|=4}};Ei=function(a,b,c,d){c!==d&&(b.flags|=4)};function Fi(a,b){if(!lh)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\n\tfunction Gi(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(b.type)&&Gf(),null;case 3:fh();H(N);H(M);uh();d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)rh(b)?b.flags|=4:d.hydrate||(b.flags|=256);Ci(b);return null;case 5:hh(b);var e=dh(ch.current);c=b.type;if(null!==a&&null!=b.stateNode)Di(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=128);else{if(!d){if(null===\n\tb.stateNode)throw Error(y(166));return null}a=dh(ah.current);if(rh(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[wf]=b;d[xf]=f;switch(c){case \"dialog\":G(\"cancel\",d);G(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",d);break;case \"video\":case \"audio\":for(a=0;a<Xe.length;a++)G(Xe[a],d);break;case \"source\":G(\"error\",d);break;case \"img\":case \"image\":case \"link\":G(\"error\",d);G(\"load\",d);break;case \"details\":G(\"toggle\",d);break;case \"input\":Za(d,f);G(\"invalid\",d);break;case \"select\":d._wrapperState=\n\t{wasMultiple:!!f.multiple};G(\"invalid\",d);break;case \"textarea\":hb(d,f),G(\"invalid\",d)}vb(c,f);a=null;for(var g in f)f.hasOwnProperty(g)&&(e=f[g],\"children\"===g?\"string\"===typeof e?d.textContent!==e&&(a=[\"children\",e]):\"number\"===typeof e&&d.textContent!==\"\"+e&&(a=[\"children\",\"\"+e]):ca.hasOwnProperty(g)&&null!=e&&\"onScroll\"===g&&G(\"scroll\",d));switch(c){case \"input\":Va(d);cb(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=\n\tjf)}d=a;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;a===kb.html&&(a=lb(c));a===kb.html?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[wf]=b;a[xf]=d;Bi(a,b,!1,!1);b.stateNode=a;g=wb(c,d);switch(c){case \"dialog\":G(\"cancel\",a);G(\"close\",a);\n\te=d;break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<Xe.length;e++)G(Xe[e],a);e=d;break;case \"source\":G(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":G(\"error\",a);G(\"load\",a);e=d;break;case \"details\":G(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);G(\"invalid\",a);break;case \"option\":e=eb(a,d);break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=m({},d,{value:void 0});G(\"invalid\",a);break;case \"textarea\":hb(a,d);e=\n\tgb(a,d);G(\"invalid\",a);break;default:e=d}vb(c,e);var h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?tb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&ob(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==c||\"\"!==k)&&pb(a,k):\"number\"===typeof k&&pb(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ca.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&G(\"scroll\",a):null!=k&&qa(a,f,k,g))}switch(c){case \"input\":Va(a);cb(a,d,!1);\n\tbreak;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=jf)}mf(c,d)&&(b.flags|=4)}null!==b.ref&&(b.flags|=128)}return null;case 6:if(a&&null!=b.stateNode)Ei(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(y(166));\n\tc=dh(ch.current);dh(ah.current);rh(b)?(d=b.stateNode,c=b.memoizedProps,d[wf]=b,d.nodeValue!==c&&(b.flags|=4)):(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[wf]=b,b.stateNode=d)}return null;case 13:H(P);d=b.memoizedState;if(0!==(b.flags&64))return b.lanes=c,b;d=null!==d;c=!1;null===a?void 0!==b.memoizedProps.fallback&&rh(b):c=null!==a.memoizedState;if(d&&!c&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&1))0===V&&(V=3);else{if(0===V||3===V)V=\n\t4;null===U||0===(Dg&134217727)&&0===(Hi&134217727)||Ii(U,W)}if(d||c)b.flags|=4;return null;case 4:return fh(),Ci(b),null===a&&cf(b.stateNode.containerInfo),null;case 10:return rg(b),null;case 17:return Ff(b.type)&&Gf(),null;case 19:H(P);d=b.memoizedState;if(null===d)return null;f=0!==(b.flags&64);g=d.rendering;if(null===g)if(f)Fi(d,!1);else{if(0!==V||null!==a&&0!==(a.flags&64))for(a=b.child;null!==a;){g=ih(a);if(null!==g){b.flags|=64;Fi(d,!1);f=g.updateQueue;null!==f&&(b.updateQueue=f,b.flags|=4);\n\tnull===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,\n\tf.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;I(P,P.current&1|2);return b.child}a=a.sibling}null!==d.tail&&O()>Ji&&(b.flags|=64,f=!0,Fi(d,!1),b.lanes=33554432)}else{if(!f)if(a=ih(g),null!==a){if(b.flags|=64,f=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Fi(d,!0),null===d.tail&&\"hidden\"===d.tailMode&&!g.alternate&&!lh)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*O()-d.renderingStartTime>Ji&&1073741824!==c&&(b.flags|=\n\t64,f=!0,Fi(d,!1),b.lanes=33554432);d.isBackwards?(g.sibling=b.child,b.child=g):(c=d.last,null!==c?c.sibling=g:b.child=g,d.last=g)}return null!==d.tail?(c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=O(),c.sibling=null,b=P.current,I(P,f?b&1|2:b&1),c):null;case 23:case 24:return Ki(),null!==a&&null!==a.memoizedState!==(null!==b.memoizedState)&&\"unstable-defer-without-hiding\"!==d.mode&&(b.flags|=4),null}throw Error(y(156,b.tag));}\n\tfunction Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var b=a.flags;return b&4096?(a.flags=b&-4097|64,a):null;case 3:fh();H(N);H(M);uh();b=a.flags;if(0!==(b&64))throw Error(y(285));a.flags=b&-4097|64;return a;case 5:return hh(a),null;case 13:return H(P),b=a.flags,b&4096?(a.flags=b&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}\n\tfunction Mi(a,b){try{var c=\"\",d=b;do c+=Qa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e}}function Ni(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Oi=\"function\"===typeof WeakMap?WeakMap:Map;function Pi(a,b,c){c=zg(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Qi||(Qi=!0,Ri=d);Ni(a,b)};return c}\n\tfunction Si(a,b,c){c=zg(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){Ni(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===Ti?Ti=new Set([this]):Ti.add(this),Ni(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}var Ui=\"function\"===typeof WeakSet?WeakSet:Set;\n\tfunction Vi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Wi(a,c)}else b.current=null}function Xi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.flags&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:lg(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:b.flags&256&&qf(b.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163));}\n\tfunction Yi(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{if(3===(a.tag&3)){var d=a.create;a.destroy=d()}a=a.next}while(a!==b)}b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{var e=a;d=e.next;e=e.tag;0!==(e&4)&&0!==(e&1)&&(Zi(c,a),$i(c,a));a=d}while(a!==b)}return;case 1:a=c.stateNode;c.flags&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:lg(c.type,b.memoizedProps),a.componentDidUpdate(d,\n\tb.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Eg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Eg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.flags&4&&mf(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Cc(c))));\n\treturn;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163));}\n\tfunction aj(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d=d.style,\"function\"===typeof d.setProperty?d.setProperty(\"display\",\"none\",\"important\"):d.display=\"none\";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null;d.style.display=sb(\"display\",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?\"\":c.memoizedProps;else if((23!==c.tag&&24!==c.tag||null===c.memoizedState||c===a)&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===\n\ta)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}\n\tfunction bj(a,b){if(Mf&&\"function\"===typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,b)}catch(f){}switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var c=a=a.next;do{var d=c,e=d.destroy;d=d.tag;if(void 0!==e)if(0!==(d&4))Zi(b,c);else{d=b;try{e()}catch(f){Wi(d,f)}}c=c.next}while(c!==a)}break;case 1:Vi(b);a=b.stateNode;if(\"function\"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(f){Wi(b,\n\tf)}break;case 5:Vi(b);break;case 4:cj(a,b)}}function dj(a){a.alternate=null;a.child=null;a.dependencies=null;a.firstEffect=null;a.lastEffect=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.return=null;a.updateQueue=null}function ej(a){return 5===a.tag||3===a.tag||4===a.tag}\n\tfunction fj(a){a:{for(var b=a.return;null!==b;){if(ej(b))break a;b=b.return}throw Error(y(160));}var c=b;b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(y(161));}c.flags&16&&(pb(b,\"\"),c.flags&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||ej(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue b;if(null===\n\tc.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.flags&2)){c=c.stateNode;break a}}d?gj(a,c,b):hj(a,c,b)}\n\tfunction gj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=jf));else if(4!==d&&(a=a.child,null!==a))for(gj(a,b,c),a=a.sibling;null!==a;)gj(a,b,c),a=a.sibling}\n\tfunction hj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(hj(a,b,c),a=a.sibling;null!==a;)hj(a,b,c),a=a.sibling}\n\tfunction cj(a,b){for(var c=b,d=!1,e,f;;){if(!d){d=c.return;a:for(;;){if(null===d)throw Error(y(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=a,h=c,k=h;;)if(bj(g,k),null!==k.child&&4!==k.tag)k.child.return=k,k=k.child;else{if(k===h)break a;for(;null===k.sibling;){if(null===k.return||k.return===h)break a;k=k.return}k.sibling.return=k.return;k=k.sibling}f?(g=e,h=c.stateNode,\n\t8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(bj(a,c),null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}\n\tfunction ij(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:var c=b.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do 3===(d.tag&3)&&(a=d.destroy,d.destroy=void 0,void 0!==a&&a()),d=d.next;while(d!==c)}return;case 1:return;case 5:c=b.stateNode;if(null!=c){d=b.memoizedProps;var e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[xf]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&$a(c,d);wb(a,e);b=wb(a,d);for(e=0;e<f.length;e+=\n\t2){var g=f[e],h=f[e+1];\"style\"===g?tb(c,h):\"dangerouslySetInnerHTML\"===g?ob(c,h):\"children\"===g?pb(c,h):qa(c,g,h,b)}switch(a){case \"input\":ab(c,d);break;case \"textarea\":ib(c,d);break;case \"select\":a=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,f=d.value,null!=f?fb(c,!!d.multiple,f,!1):a!==!!d.multiple&&(null!=d.defaultValue?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}return;case 6:if(null===b.stateNode)throw Error(y(162));b.stateNode.nodeValue=\n\tb.memoizedProps;return;case 3:c=b.stateNode;c.hydrate&&(c.hydrate=!1,Cc(c.containerInfo));return;case 12:return;case 13:null!==b.memoizedState&&(jj=O(),aj(b.child,!0));kj(b);return;case 19:kj(b);return;case 17:return;case 23:case 24:aj(b,null!==b.memoizedState);return}throw Error(y(163));}function kj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ui);b.forEach(function(b){var d=lj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\n\tfunction mj(a,b){return null!==a&&(a=a.memoizedState,null===a||null!==a.dehydrated)?(b=b.memoizedState,null!==b&&null===b.dehydrated):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=Infinity;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return 0!==(X&48)?O():-1!==Fj?Fj:Fj=O()}\n\tfunction Ig(a){a=a.mode;if(0===(a&2))return 1;if(0===(a&4))return 99===eg()?1:2;0===Gj&&(Gj=tj);if(0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0);a=Gj;var b=4186112&~Hj;b&=-b;0===b&&(a=4186112&~a,b=a&-a,0===b&&(b=8192));return b}a=eg();0!==(X&4)&&98===a?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj));return a}\n\tfunction Jg(a,b,c){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));a=Kj(a,b);if(null===a)return null;$c(a,b,c);a===U&&(Hi|=b,4===V&&Ii(a,W));var d=eg();1===b?0!==(X&8)&&0===(X&48)?Lj(a):(Mj(a,c),0===X&&(wj(),ig())):(0===(X&4)||98!==d&&99!==d||(null===Cj?Cj=new Set([a]):Cj.add(a)),Mj(a,c));vj=a}function Kj(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}\n\tfunction Mj(a,b){for(var c=a.callbackNode,d=a.suspendedLanes,e=a.pingedLanes,f=a.expirationTimes,g=a.pendingLanes;0<g;){var h=31-Vc(g),k=1<<h,l=f[h];if(-1===l){if(0===(k&d)||0!==(k&e)){l=b;Rc(k);var n=F;f[h]=10<=n?l+250:6<=n?l+5E3:-1}}else l<=b&&(a.expiredLanes|=k);g&=~k}d=Uc(a,a===U?W:0);b=F;if(0===d)null!==c&&(c!==Zf&&Pf(c),a.callbackNode=null,a.callbackPriority=0);else{if(null!==c){if(a.callbackPriority===b)return;c!==Zf&&Pf(c)}15===b?(c=Lj.bind(null,a),null===ag?(ag=[c],bg=Of(Uf,jg)):ag.push(c),\n\tc=Zf):14===b?c=hg(99,Lj.bind(null,a)):(c=Tc(b),c=hg(c,Nj.bind(null,a)));a.callbackPriority=b;a.callbackNode=c}}\n\tfunction Nj(a){Fj=-1;Hj=Gj=0;if(0!==(X&48))throw Error(y(327));var b=a.callbackNode;if(Oj()&&a.callbackNode!==b)return null;var c=Uc(a,a===U?W:0);if(0===c)return null;var d=c;var e=X;X|=16;var f=Pj();if(U!==a||W!==d)wj(),Qj(a,d);do try{Rj();break}catch(h){Sj(a,h)}while(1);qg();oj.current=f;X=e;null!==Y?d=0:(U=null,W=0,d=V);if(0!==(tj&Hi))Qj(a,0);else if(0!==d){2===d&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),c=Wc(a),0!==c&&(d=Tj(a,c)));if(1===d)throw b=sj,Qj(a,0),Ii(a,c),Mj(a,O()),b;a.finishedWork=\n\ta.current.alternate;a.finishedLanes=c;switch(d){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:Ii(a,c);if((c&62914560)===c&&(d=jj+500-O(),10<d)){if(0!==Uc(a,0))break;e=a.suspendedLanes;if((e&c)!==c){Hg();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=of(Uj.bind(null,a),d);break}Uj(a);break;case 4:Ii(a,c);if((c&4186112)===c)break;d=a.eventTimes;for(e=-1;0<c;){var g=31-Vc(c);f=1<<g;g=d[g];g>e&&(e=g);c&=~f}c=e;c=O()-c;c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>\n\tc?4320:1960*nj(c/1960))-c;if(10<c){a.timeoutHandle=of(Uj.bind(null,a),c);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329));}}Mj(a,O());return a.callbackNode===b?Nj.bind(null,a):null}function Ii(a,b){b&=~uj;b&=~Hi;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-Vc(b),d=1<<c;a[c]=-1;b&=~d}}\n\tfunction Lj(a){if(0!==(X&48))throw Error(y(327));Oj();if(a===U&&0!==(a.expiredLanes&W)){var b=W;var c=Tj(a,b);0!==(tj&Hi)&&(b=Uc(a,b),c=Tj(a,b))}else b=Uc(a,0),c=Tj(a,b);0!==a.tag&&2===c&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),b=Wc(a),0!==b&&(c=Tj(a,b)));if(1===c)throw c=sj,Qj(a,0),Ii(a,b),Mj(a,O()),c;a.finishedWork=a.current.alternate;a.finishedLanes=b;Uj(a);Mj(a,O());return null}\n\tfunction Vj(){if(null!==Cj){var a=Cj;Cj=null;a.forEach(function(a){a.expiredLanes|=24&a.pendingLanes;Mj(a,O())})}ig()}function Wj(a,b){var c=X;X|=1;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function Xj(a,b){var c=X;X&=-2;X|=8;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function ni(a,b){I(rj,qj);qj|=b;tj|=b}function Ki(){qj=rj.current;H(rj)}\n\tfunction Qj(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,pf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Gf();break;case 3:fh();H(N);H(M);uh();break;case 5:hh(d);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(d);break;case 23:case 24:Ki()}c=c.return}U=a;Y=Tg(a.current,null);W=qj=tj=b;V=0;sj=null;uj=Hi=Dg=0}\n\tfunction Sj(a,b){do{var c=Y;try{qg();vh.current=Gh;if(yh){for(var d=R.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}yh=!1}xh=0;T=S=R=null;zh=!1;pj.current=null;if(null===c||null===c.return){V=1;sj=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=W;h.flags|=2048;h.firstEffect=h.lastEffect=null;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k;if(0===(h.mode&2)){var n=h.alternate;n?(h.updateQueue=n.updateQueue,h.memoizedState=n.memoizedState,h.lanes=n.lanes):\n\t(h.updateQueue=null,h.memoizedState=null)}var A=0!==(P.current&1),p=g;do{var C;if(C=13===p.tag){var x=p.memoizedState;if(null!==x)C=null!==x.dehydrated?!0:!1;else{var w=p.memoizedProps;C=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:A?!1:!0}}if(C){var z=p.updateQueue;if(null===z){var u=new Set;u.add(l);p.updateQueue=u}else z.add(l);if(0===(p.mode&2)){p.flags|=64;h.flags|=16384;h.flags&=-2981;if(1===h.tag)if(null===h.alternate)h.tag=17;else{var t=zg(-1,1);t.tag=2;Ag(h,t)}h.lanes|=1;break a}k=\n\tvoid 0;h=b;var q=f.pingCache;null===q?(q=f.pingCache=new Oi,k=new Set,q.set(l,k)):(k=q.get(l),void 0===k&&(k=new Set,q.set(l,k)));if(!k.has(h)){k.add(h);var v=Yj.bind(null,f,l,h);l.then(v,v)}p.flags|=4096;p.lanes=b;break a}p=p.return}while(null!==p);k=Error((Ra(h.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\")}5!==V&&(V=2);k=Mi(k,h);p=\n\tg;do{switch(p.tag){case 3:f=k;p.flags|=4096;b&=-b;p.lanes|=b;var J=Pi(p,f,b);Bg(p,J);break a;case 1:f=k;var K=p.type,Q=p.stateNode;if(0===(p.flags&64)&&(\"function\"===typeof K.getDerivedStateFromError||null!==Q&&\"function\"===typeof Q.componentDidCatch&&(null===Ti||!Ti.has(Q)))){p.flags|=4096;b&=-b;p.lanes|=b;var L=Si(p,f,b);Bg(p,L);break a}}p=p.return}while(null!==p)}Zj(c)}catch(va){b=va;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}\n\tfunction Pj(){var a=oj.current;oj.current=Gh;return null===a?Gh:a}function Tj(a,b){var c=X;X|=16;var d=Pj();U===a&&W===b||Qj(a,b);do try{ak();break}catch(e){Sj(a,e)}while(1);qg();X=c;oj.current=d;if(null!==Y)throw Error(y(261));U=null;W=0;return V}function ak(){for(;null!==Y;)bk(Y)}function Rj(){for(;null!==Y&&!Qf();)bk(Y)}function bk(a){var b=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps;null===b?Zj(a):Y=b;pj.current=null}\n\tfunction Zj(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&2048)){c=Gi(c,b,qj);if(null!==c){Y=c;return}c=b;if(24!==c.tag&&23!==c.tag||null===c.memoizedState||0!==(qj&1073741824)||0===(c.mode&4)){for(var d=0,e=c.child;null!==e;)d|=e.lanes|e.childLanes,e=e.sibling;c.childLanes=d}null!==a&&0===(a.flags&2048)&&(null===a.firstEffect&&(a.firstEffect=b.firstEffect),null!==b.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=b.firstEffect),a.lastEffect=b.lastEffect),1<b.flags&&(null!==\n\ta.lastEffect?a.lastEffect.nextEffect=b:a.firstEffect=b,a.lastEffect=b))}else{c=Li(b);if(null!==c){c.flags&=2047;Y=c;return}null!==a&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===V&&(V=5)}function Uj(a){var b=eg();gg(99,dk.bind(null,a,b));return null}\n\tfunction dk(a,b){do Oj();while(null!==yj);if(0!==(X&48))throw Error(y(327));var c=a.finishedWork;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(y(177));a.callbackNode=null;var d=c.lanes|c.childLanes,e=d,f=a.pendingLanes&~e;a.pendingLanes=e;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=e;a.mutableReadLanes&=e;a.entangledLanes&=e;e=a.entanglements;for(var g=a.eventTimes,h=a.expirationTimes;0<f;){var k=31-Vc(f),l=1<<k;e[k]=0;g[k]=-1;h[k]=-1;f&=~l}null!==\n\tCj&&0===(d&24)&&Cj.has(a)&&Cj.delete(a);a===U&&(Y=U=null,W=0);1<c.flags?null!==c.lastEffect?(c.lastEffect.nextEffect=c,d=c.firstEffect):d=c:d=c.firstEffect;if(null!==d){e=X;X|=32;pj.current=null;kf=fd;g=Ne();if(Oe(g)){if(\"selectionStart\"in g)h={start:g.selectionStart,end:g.selectionEnd};else a:if(h=(h=g.ownerDocument)&&h.defaultView||window,(l=h.getSelection&&h.getSelection())&&0!==l.rangeCount){h=l.anchorNode;f=l.anchorOffset;k=l.focusNode;l=l.focusOffset;try{h.nodeType,k.nodeType}catch(va){h=null;\n\tbreak a}var n=0,A=-1,p=-1,C=0,x=0,w=g,z=null;b:for(;;){for(var u;;){w!==h||0!==f&&3!==w.nodeType||(A=n+f);w!==k||0!==l&&3!==w.nodeType||(p=n+l);3===w.nodeType&&(n+=w.nodeValue.length);if(null===(u=w.firstChild))break;z=w;w=u}for(;;){if(w===g)break b;z===h&&++C===f&&(A=n);z===k&&++x===l&&(p=n);if(null!==(u=w.nextSibling))break;w=z;z=w.parentNode}w=u}h=-1===A||-1===p?null:{start:A,end:p}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:g,selectionRange:h};fd=!1;Ij=null;Jj=!1;Z=d;do try{ek()}catch(va){if(null===\n\tZ)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Ij=null;Z=d;do try{for(g=a;null!==Z;){var t=Z.flags;t&16&&pb(Z.stateNode,\"\");if(t&128){var q=Z.alternate;if(null!==q){var v=q.ref;null!==v&&(\"function\"===typeof v?v(null):v.current=null)}}switch(t&1038){case 2:fj(Z);Z.flags&=-3;break;case 6:fj(Z);Z.flags&=-3;ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025;ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z;cj(g,h);var J=h.alternate;dj(h);null!==\n\tJ&&dj(J)}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);v=lf;q=Ne();t=v.focusedElem;g=v.selectionRange;if(q!==t&&t&&t.ownerDocument&&Me(t.ownerDocument.documentElement,t)){null!==g&&Oe(t)&&(q=g.start,v=g.end,void 0===v&&(v=q),\"selectionStart\"in t?(t.selectionStart=q,t.selectionEnd=Math.min(v,t.value.length)):(v=(q=t.ownerDocument||document)&&q.defaultView||window,v.getSelection&&(v=v.getSelection(),h=t.textContent.length,J=Math.min(g.start,h),g=void 0===\n\tg.end?J:Math.min(g.end,h),!v.extend&&J>g&&(h=g,g=J,J=h),h=Le(t,J),f=Le(t,g),h&&f&&(1!==v.rangeCount||v.anchorNode!==h.node||v.anchorOffset!==h.offset||v.focusNode!==f.node||v.focusOffset!==f.offset)&&(q=q.createRange(),q.setStart(h.node,h.offset),v.removeAllRanges(),J>g?(v.addRange(q),v.extend(f.node,f.offset)):(q.setEnd(f.node,f.offset),v.addRange(q))))));q=[];for(v=t;v=v.parentNode;)1===v.nodeType&&q.push({element:v,left:v.scrollLeft,top:v.scrollTop});\"function\"===typeof t.focus&&t.focus();for(t=\n\t0;t<q.length;t++)v=q[t],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}fd=!!kf;lf=kf=null;a.current=c;Z=d;do try{for(t=a;null!==Z;){var K=Z.flags;K&36&&Yi(t,Z.alternate,Z);if(K&128){q=void 0;var Q=Z.ref;if(null!==Q){var L=Z.stateNode;switch(Z.tag){case 5:q=L;break;default:q=L}\"function\"===typeof Q?Q(q):Q.current=q}}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Z=null;$f();X=e}else a.current=c;if(xj)xj=!1,yj=a,zj=b;else for(Z=d;null!==Z;)b=\n\tZ.nextEffect,Z.nextEffect=null,Z.flags&8&&(K=Z,K.sibling=null,K.stateNode=null),Z=b;d=a.pendingLanes;0===d&&(Ti=null);1===d?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0;c=c.stateNode;if(Mf&&\"function\"===typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,c,void 0,64===(c.current.flags&64))}catch(va){}Mj(a,O());if(Qi)throw Qi=!1,a=Ri,Ri=null,a;if(0!==(X&8))return null;ig();return null}\n\tfunction ek(){for(;null!==Z;){var a=Z.alternate;Jj||null===Ij||(0!==(Z.flags&8)?dc(Z,Ij)&&(Jj=!0):13===Z.tag&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var b=Z.flags;0!==(b&256)&&Xi(a,Z);0===(b&512)||xj||(xj=!0,hg(97,function(){Oj();return null}));Z=Z.nextEffect}}function Oj(){if(90!==zj){var a=97<zj?97:zj;zj=90;return gg(a,fk)}return!1}function $i(a,b){Aj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}function Zi(a,b){Bj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}\n\tfunction fk(){if(null===yj)return!1;var a=yj;yj=null;if(0!==(X&48))throw Error(y(331));var b=X;X|=32;var c=Bj;Bj=[];for(var d=0;d<c.length;d+=2){var e=c[d],f=c[d+1],g=e.destroy;e.destroy=void 0;if(\"function\"===typeof g)try{g()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}c=Aj;Aj=[];for(d=0;d<c.length;d+=2){e=c[d];f=c[d+1];try{var h=e.create;e.destroy=h()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}for(h=a.current.firstEffect;null!==h;)a=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=\n\tnull,h.stateNode=null),h=a;X=b;ig();return!0}function gk(a,b,c){b=Mi(c,b);b=Pi(a,b,1);Ag(a,b);b=Hg();a=Kj(a,1);null!==a&&($c(a,1,b),Mj(a,b))}\n\tfunction Wi(a,b){if(3===a.tag)gk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){gk(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d))){a=Mi(b,a);var e=Si(c,a,1);Ag(c,e);e=Hg();c=Kj(c,1);if(null!==c)$c(c,1,e),Mj(c,e);else if(\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d)))try{d.componentDidCatch(b,a)}catch(f){}break}}c=c.return}}\n\tfunction Yj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Hg();a.pingedLanes|=a.suspendedLanes&c;U===a&&(W&c)===c&&(4===V||3===V&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=c);Mj(a,b)}function lj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=a.mode,0===(b&2)?b=1:0===(b&4)?b=99===eg()?1:2:(0===Gj&&(Gj=tj),b=Yc(62914560&~Gj),0===b&&(b=4194304)));c=Hg();a=Kj(a,b);null!==a&&($c(a,b,c),Mj(a,c))}var ck;\n\tck=function(a,b,c){var d=b.lanes;if(null!==a)if(a.memoizedProps!==b.pendingProps||N.current)ug=!0;else if(0!==(c&d))ug=0!==(a.flags&16384)?!0:!1;else{ug=!1;switch(b.tag){case 3:ri(b);sh();break;case 5:gh(b);break;case 1:Ff(b.type)&&Jf(b);break;case 4:eh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;var e=b.type._context;I(mg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){if(0!==(c&b.child.childLanes))return ti(a,b,c);I(P,P.current&1);b=hi(a,b,c);return null!==\n\tb?b.sibling:null}I(P,P.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&64)){if(d)return Ai(a,b,c);b.flags|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);I(P,P.current);if(d)break;else return null;case 23:case 24:return b.lanes=0,mi(a,b,c)}return hi(a,b,c)}else ug=!1;b.lanes=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=Ef(b,M.current);tg(b,c);e=Ch(null,b,d,a,e,c);b.flags|=1;if(\"object\"===\n\ttypeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(Ff(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;xg(b);var g=d.getDerivedStateFromProps;\"function\"===typeof g&&Gg(b,d,g,a);e.updater=Kg;b.stateNode=e;e._reactInternals=b;Og(b,d,a,c);b=qi(null,b,d,!0,f,c)}else b.tag=0,fi(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);\n\ta=b.pendingProps;f=e._init;e=f(e._payload);b.type=e;f=b.tag=hk(e);a=lg(e,a);switch(f){case 0:b=li(null,b,e,a,c);break a;case 1:b=pi(null,b,e,a,c);break a;case 11:b=gi(null,b,e,a,c);break a;case 14:b=ii(null,b,e,lg(e.type,a),d,c);break a}throw Error(y(306,e,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),li(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),pi(a,b,d,e,c);case 3:ri(b);d=b.updateQueue;if(null===a||null===d)throw Error(y(282));\n\td=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;yg(a,b);Cg(b,d,null,c);d=b.memoizedState.element;if(d===e)sh(),b=hi(a,b,c);else{e=b.stateNode;if(f=e.hydrate)kh=rf(b.stateNode.containerInfo.firstChild),jh=b,f=lh=!0;if(f){a=e.mutableSourceEagerHydrationData;if(null!=a)for(e=0;e<a.length;e+=2)f=a[e],f._workInProgressVersionPrimary=a[e+1],th.push(f);c=Zg(b,null,d,c);for(b.child=c;c;)c.flags=c.flags&-3|1024,c=c.sibling}else fi(a,b,d,c),sh();b=b.child}return b;case 5:return gh(b),null===a&&\n\tph(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,nf(d,e)?g=null:null!==f&&nf(d,f)&&(b.flags|=16),oi(a,b),fi(a,b,g,c),b.child;case 6:return null===a&&ph(b),null;case 13:return ti(a,b,c);case 4:return eh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Yg(b,null,d,c):fi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),gi(a,b,d,e,c);case 7:return fi(a,b,b.pendingProps,c),b.child;case 8:return fi(a,b,b.pendingProps.children,\n\tc),b.child;case 12:return fi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(mg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=He(h,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!N.current){b=hi(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=\n\tk.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=zg(-1,c&-c),l.tag=2,Ag(h,l));h.lanes|=c;l=h.alternate;null!==l&&(l.lanes|=c);sg(h.return,c);k.lanes|=c;break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}fi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,tg(b,c),e=vg(e,\n\tf.unstable_observedBits),d=d(e),b.flags|=1,fi(a,b,d,c),b.child;case 14:return e=b.type,f=lg(e,b.pendingProps),f=lg(e.type,f),ii(a,b,e,f,d,c);case 15:return ki(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Ff(d)?(a=!0,Jf(b)):a=!1,tg(b,c),Mg(b,d,e),Og(b,d,e,c),qi(null,b,d,!0,a,c);case 19:return Ai(a,b,c);case 23:return mi(a,b,c);case 24:return mi(a,b,c)}throw Error(y(156,b.tag));\n\t};function ik(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function nh(a,b,c,d){return new ik(a,b,c,d)}function ji(a){a=a.prototype;return!(!a||!a.isReactComponent)}\n\tfunction hk(a){if(\"function\"===typeof a)return ji(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Aa)return 11;if(a===Da)return 14}return 2}\n\tfunction Tg(a,b){var c=a.alternate;null===c?(c=nh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\n\tc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\n\tfunction Vg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)ji(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ua:return Xg(c.children,e,f,b);case Ha:g=8;e|=16;break;case wa:g=8;e|=1;break;case xa:return a=nh(12,c,b,e|8),a.elementType=xa,a.type=xa,a.lanes=f,a;case Ba:return a=nh(13,c,b,e),a.type=Ba,a.elementType=Ba,a.lanes=f,a;case Ca:return a=nh(19,c,b,e),a.elementType=Ca,a.lanes=f,a;case Ia:return vi(c,e,f,b);case Ja:return a=nh(24,c,b,e),a.elementType=Ja,a.lanes=f,a;default:if(\"object\"===\n\ttypeof a&&null!==a)switch(a.$$typeof){case ya:g=10;break a;case za:g=9;break a;case Aa:g=11;break a;case Da:g=14;break a;case Ea:g=16;d=null;break a;case Fa:g=22;break a}throw Error(y(130,null==a?a:typeof a,\"\"));}b=nh(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Xg(a,b,c,d){a=nh(7,a,d,b);a.lanes=c;return a}function vi(a,b,c,d){a=nh(23,a,d,b);a.elementType=Ia;a.lanes=c;return a}function Ug(a,b,c){a=nh(6,a,null,b);a.lanes=c;return a}\n\tfunction Wg(a,b,c){b=nh(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\n\tfunction jk(a,b,c){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=Zc(0);this.expirationTimes=Zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Zc(0);this.mutableSourceEagerHydrationData=null}\n\tfunction kk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\n\tfunction lk(a,b,c,d){var e=b.current,f=Hg(),g=Ig(e);a:if(c){c=c._reactInternals;b:{if(Zb(c)!==c||1!==c.tag)throw Error(y(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(y(171));}if(1===c.tag){var k=c.type;if(Ff(k)){c=If(c,k,h);break a}}c=h}else c=Cf;null===b.context?b.context=c:b.pendingContext=c;b=zg(f,g);b.payload={element:a};d=void 0===d?null:d;null!==\n\td&&(b.callback=d);Ag(e,b);Jg(e,g,f);return g}function mk(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ok(a,b){nk(a,b);(a=a.alternate)&&nk(a,b)}function pk(){return null}\n\tfunction qk(a,b,c){var d=null!=c&&null!=c.hydrationOptions&&c.hydrationOptions.mutableSources||null;c=new jk(a,b,null!=c&&!0===c.hydrate);b=nh(3,null,null,2===b?7:1===b?3:0);c.current=b;b.stateNode=c;xg(b);a[ff]=c.current;cf(8===a.nodeType?a.parentNode:a);if(d)for(a=0;a<d.length;a++){b=d[a];var e=b._getVersion;e=e(b._source);null==c.mutableSourceEagerHydrationData?c.mutableSourceEagerHydrationData=[b,e]:c.mutableSourceEagerHydrationData.push(b,e)}this._internalRoot=c}\n\tqk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;lk(null,a,null,function(){b[ff]=null})};function rk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}\n\tfunction sk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new qk(a,0,b?{hydrate:!0}:void 0)}\n\tfunction tk(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if(\"function\"===typeof e){var h=e;e=function(){var a=mk(g);h.call(a)}}lk(b,g,a,e)}else{f=c._reactRootContainer=sk(c,d);g=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=mk(g);k.call(a)}}Xj(function(){lk(b,g,a,e)})}return mk(g)}ec=function(a){if(13===a.tag){var b=Hg();Jg(a,4,b);ok(a,4)}};fc=function(a){if(13===a.tag){var b=Hg();Jg(a,67108864,b);ok(a,67108864)}};\n\tgc=function(a){if(13===a.tag){var b=Hg(),c=Ig(a);Jg(a,c,b);ok(a,c)}};hc=function(a,b){return b()};\n\tyb=function(a,b,c){switch(b){case \"input\":ab(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(y(90));Wa(d);ab(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Wj;\n\tHb=function(a,b,c,d,e){var f=X;X|=4;try{return gg(98,a.bind(null,b,c,d,e))}finally{X=f,0===X&&(wj(),ig())}};Ib=function(){0===(X&49)&&(Vj(),Oj())};Jb=function(a,b){var c=X;X|=2;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}};function uk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(b))throw Error(y(200));return kk(a,b,null,c)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:\"17.0.2\",rendererPackageName:\"react-dom\"};\n\tvar xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=cc(a);return null===a?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||\n\tpk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;exports.createPortal=uk;\n\texports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(y(188));throw Error(y(268,Object.keys(a)));}a=cc(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a,b){var c=X;if(0!==(c&48))return a(b);X|=1;try{if(a)return gg(99,a.bind(null,b))}finally{X=c,ig()}};exports.hydrate=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!0,c)};\n\texports.render=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null;a[ff]=null})}),!0):!1};exports.unstable_batchedUpdates=Wj;exports.unstable_createPortal=function(a,b){return uk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};\n\texports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!rk(c))throw Error(y(200));if(null==a||void 0===a._reactInternals)throw Error(y(38));return tk(a,b,c,!1,d)};exports.version=\"17.0.2\";\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\t\n\tvar _css = _interopDefault(__webpack_require__(5));\n\tvar _extends = _interopDefault(__webpack_require__(10));\n\tvar _objectWithoutPropertiesLoose = _interopDefault(__webpack_require__(11));\n\tvar core = __webpack_require__(13);\n\tvar react = __webpack_require__(1);\n\t\n\tfunction getClientPosition(e) {\n\t  var touches = e.touches;\n\t\n\t  if (touches && touches.length) {\n\t    var finger = touches[0];\n\t    return {\n\t      x: finger.clientX,\n\t      y: finger.clientY\n\t    };\n\t  }\n\t\n\t  return {\n\t    x: e.clientX,\n\t    y: e.clientY\n\t  };\n\t}\n\t\n\tvar track = {\n\t  position: 'relative',\n\t  display: 'inline-block',\n\t  backgroundColor: '#ddd',\n\t  borderRadius: 5,\n\t  userSelect: 'none',\n\t  boxSizing: 'border-box'\n\t};\n\tvar active = {\n\t  position: 'absolute',\n\t  backgroundColor: '#5e72e4',\n\t  borderRadius: 5,\n\t  userSelect: 'none',\n\t  boxSizing: 'border-box'\n\t};\n\tvar thumb = {\n\t  position: 'relative',\n\t  display: 'block',\n\t  content: '\"\"',\n\t  width: 18,\n\t  height: 18,\n\t  backgroundColor: '#fff',\n\t  borderRadius: '50%',\n\t  boxShadow: '0 1px 1px rgba(0,0,0,.5)',\n\t  userSelect: 'none',\n\t  cursor: 'pointer',\n\t  boxSizing: 'border-box'\n\t};\n\tvar styles = {\n\t  x: {\n\t    track: _extends({}, track, {\n\t      width: 200,\n\t      height: 10\n\t    }),\n\t    active: _extends({}, active, {\n\t      top: 0,\n\t      height: '100%'\n\t    }),\n\t    thumb: _extends({}, thumb)\n\t  },\n\t  y: {\n\t    track: _extends({}, track, {\n\t      width: 10,\n\t      height: 200\n\t    }),\n\t    active: _extends({}, active, {\n\t      left: 0,\n\t      width: '100%'\n\t    }),\n\t    thumb: _extends({}, thumb)\n\t  },\n\t  xy: {\n\t    track: {\n\t      position: 'relative',\n\t      overflow: 'hidden',\n\t      width: 200,\n\t      height: 200,\n\t      backgroundColor: '#5e72e4',\n\t      borderRadius: 0\n\t    },\n\t    active: {},\n\t    thumb: _extends({}, thumb)\n\t  },\n\t  disabled: {\n\t    opacity: 0.5\n\t  }\n\t};\n\t\n\tvar Slider = function Slider(_ref) {\n\t  var disabled = _ref.disabled,\n\t      axis = _ref.axis,\n\t      x = _ref.x,\n\t      y = _ref.y,\n\t      xmin = _ref.xmin,\n\t      xmax = _ref.xmax,\n\t      ymin = _ref.ymin,\n\t      ymax = _ref.ymax,\n\t      xstep = _ref.xstep,\n\t      ystep = _ref.ystep,\n\t      onChange = _ref.onChange,\n\t      onDragStart = _ref.onDragStart,\n\t      onDragEnd = _ref.onDragEnd,\n\t      xreverse = _ref.xreverse,\n\t      yreverse = _ref.yreverse,\n\t      customStyles = _ref.styles,\n\t      props = _objectWithoutPropertiesLoose(_ref, [\"disabled\", \"axis\", \"x\", \"y\", \"xmin\", \"xmax\", \"ymin\", \"ymax\", \"xstep\", \"ystep\", \"onChange\", \"onDragStart\", \"onDragEnd\", \"xreverse\", \"yreverse\", \"styles\"]);\n\t\n\t  var container = react.useRef(null);\n\t  var handle = react.useRef(null);\n\t  var start = react.useRef({});\n\t  var offset = react.useRef({});\n\t\n\t  function getPosition() {\n\t    var top = (y - ymin) / (ymax - ymin) * 100;\n\t    var left = (x - xmin) / (xmax - xmin) * 100;\n\t    if (top > 100) top = 100;\n\t    if (top < 0) top = 0;\n\t    if (axis === 'x') top = 0;\n\t    if (left > 100) left = 100;\n\t    if (left < 0) left = 0;\n\t    if (axis === 'y') left = 0;\n\t    return {\n\t      top: top,\n\t      left: left\n\t    };\n\t  }\n\t\n\t  function change(_ref2) {\n\t    var top = _ref2.top,\n\t        left = _ref2.left;\n\t    if (!onChange) return;\n\t\n\t    var _container$current$ge = container.current.getBoundingClientRect(),\n\t        width = _container$current$ge.width,\n\t        height = _container$current$ge.height;\n\t\n\t    var dx = 0;\n\t    var dy = 0;\n\t    if (left < 0) left = 0;\n\t    if (left > width) left = width;\n\t    if (top < 0) top = 0;\n\t    if (top > height) top = height;\n\t\n\t    if (axis === 'x' || axis === 'xy') {\n\t      dx = left / width * (xmax - xmin);\n\t    }\n\t\n\t    if (axis === 'y' || axis === 'xy') {\n\t      dy = top / height * (ymax - ymin);\n\t    }\n\t\n\t    var x = (dx !== 0 ? parseInt(dx / xstep, 10) * xstep : 0) + xmin;\n\t    var y = (dy !== 0 ? parseInt(dy / ystep, 10) * ystep : 0) + ymin;\n\t    onChange({\n\t      x: xreverse ? xmax - x + xmin : x,\n\t      y: yreverse ? ymax - y + ymin : y\n\t    });\n\t  }\n\t\n\t  function handleMouseDown(e) {\n\t    if (disabled) return;\n\t    e.preventDefault();\n\t    e.stopPropagation();\n\t    e.nativeEvent.stopImmediatePropagation();\n\t    var dom = handle.current;\n\t    var clientPos = getClientPosition(e);\n\t    start.current = {\n\t      x: dom.offsetLeft,\n\t      y: dom.offsetTop\n\t    };\n\t    offset.current = {\n\t      x: clientPos.x,\n\t      y: clientPos.y\n\t    };\n\t    document.addEventListener('mousemove', handleDrag);\n\t    document.addEventListener('mouseup', handleDragEnd);\n\t    document.addEventListener('touchmove', handleDrag, {\n\t      passive: false\n\t    });\n\t    document.addEventListener('touchend', handleDragEnd);\n\t    document.addEventListener('touchcancel', handleDragEnd);\n\t\n\t    if (onDragStart) {\n\t      onDragStart(e);\n\t    }\n\t  }\n\t\n\t  function getPos(e) {\n\t    var clientPos = getClientPosition(e);\n\t    var left = clientPos.x + start.current.x - offset.current.x;\n\t    var top = clientPos.y + start.current.y - offset.current.y;\n\t    return {\n\t      left: left,\n\t      top: top\n\t    };\n\t  }\n\t\n\t  function handleDrag(e) {\n\t    if (disabled) return;\n\t    e.preventDefault();\n\t    change(getPos(e));\n\t  }\n\t\n\t  function handleDragEnd(e) {\n\t    if (disabled) return;\n\t    e.preventDefault();\n\t    document.removeEventListener('mousemove', handleDrag);\n\t    document.removeEventListener('mouseup', handleDragEnd);\n\t    document.removeEventListener('touchmove', handleDrag, {\n\t      passive: false\n\t    });\n\t    document.removeEventListener('touchend', handleDragEnd);\n\t    document.removeEventListener('touchcancel', handleDragEnd);\n\t\n\t    if (onDragEnd) {\n\t      onDragEnd(e);\n\t    }\n\t  }\n\t\n\t  function handleTrackMouseDown(e) {\n\t    if (disabled) return;\n\t    e.preventDefault();\n\t    var clientPos = getClientPosition(e);\n\t    var rect = container.current.getBoundingClientRect();\n\t    start.current = {\n\t      x: clientPos.x - rect.left,\n\t      y: clientPos.y - rect.top\n\t    };\n\t    offset.current = {\n\t      x: clientPos.x,\n\t      y: clientPos.y\n\t    };\n\t    document.addEventListener('mousemove', handleDrag);\n\t    document.addEventListener('mouseup', handleDragEnd);\n\t    document.addEventListener('touchmove', handleDrag, {\n\t      passive: false\n\t    });\n\t    document.addEventListener('touchend', handleDragEnd);\n\t    document.addEventListener('touchcancel', handleDragEnd);\n\t    change({\n\t      left: clientPos.x - rect.left,\n\t      top: clientPos.y - rect.top\n\t    });\n\t\n\t    if (onDragStart) {\n\t      onDragStart(e);\n\t    }\n\t  }\n\t\n\t  var pos = getPosition();\n\t  var valueStyle = {};\n\t  if (axis === 'x') valueStyle.width = pos.left + '%';\n\t  if (axis === 'y') valueStyle.height = pos.top + '%';\n\t  if (xreverse) valueStyle.left = 100 - pos.left + '%';\n\t  if (yreverse) valueStyle.top = 100 - pos.top + '%';\n\t  var handleStyle = {\n\t    position: 'absolute',\n\t    transform: 'translate(-50%, -50%)',\n\t    left: xreverse ? 100 - pos.left + '%' : pos.left + '%',\n\t    top: yreverse ? 100 - pos.top + '%' : pos.top + '%'\n\t  };\n\t\n\t  if (axis === 'x') {\n\t    handleStyle.top = '50%';\n\t  } else if (axis === 'y') {\n\t    handleStyle.left = '50%';\n\t  }\n\t\n\t  var styles$1 = {\n\t    track: _extends({}, styles[axis].track, {}, customStyles.track),\n\t    active: _extends({}, styles[axis].active, {}, customStyles.active),\n\t    thumb: _extends({}, styles[axis].thumb, {}, customStyles.thumb),\n\t    disabled: _extends({}, styles.disabled, {}, customStyles.disabled)\n\t  };\n\t  return core.jsx(\"div\", _extends({}, props, {\n\t    ref: container,\n\t    css: /*#__PURE__*/_css([styles$1.track, disabled && styles$1.disabled], \";label:Slider;\" + ( true ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNsaWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5TU0iLCJmaWxlIjoic2xpZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3ggfSBmcm9tICdAZW1vdGlvbi9jb3JlJztcbmltcG9ydCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldENsaWVudFBvc2l0aW9uIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgZGVmYXVsdFN0eWxlcyBmcm9tICcuL3N0eWxlcyc7XG5cbmNvbnN0IFNsaWRlciA9ICh7XG4gIGRpc2FibGVkLFxuICBheGlzLFxuICB4LFxuICB5LFxuICB4bWluLFxuICB4bWF4LFxuICB5bWluLFxuICB5bWF4LFxuICB4c3RlcCxcbiAgeXN0ZXAsXG4gIG9uQ2hhbmdlLFxuICBvbkRyYWdTdGFydCxcbiAgb25EcmFnRW5kLFxuICB4cmV2ZXJzZSxcbiAgeXJldmVyc2UsXG4gIHN0eWxlczogY3VzdG9tU3R5bGVzLFxuICAuLi5wcm9wc1xufSkgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGhhbmRsZSA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgc3RhcnQgPSB1c2VSZWYoe30pO1xuICBjb25zdCBvZmZzZXQgPSB1c2VSZWYoe30pO1xuXG4gIGZ1bmN0aW9uIGdldFBvc2l0aW9uKCkge1xuICAgIGxldCB0b3AgPSAoKHkgLSB5bWluKSAvICh5bWF4IC0geW1pbikpICogMTAwO1xuICAgIGxldCBsZWZ0ID0gKCh4IC0geG1pbikgLyAoeG1heCAtIHhtaW4pKSAqIDEwMDtcblxuICAgIGlmICh0b3AgPiAxMDApIHRvcCA9IDEwMDtcbiAgICBpZiAodG9wIDwgMCkgdG9wID0gMDtcbiAgICBpZiAoYXhpcyA9PT0gJ3gnKSB0b3AgPSAwO1xuXG4gICAgaWYgKGxlZnQgPiAxMDApIGxlZnQgPSAxMDA7XG4gICAgaWYgKGxlZnQgPCAwKSBsZWZ0ID0gMDtcbiAgICBpZiAoYXhpcyA9PT0gJ3knKSBsZWZ0ID0gMDtcblxuICAgIHJldHVybiB7IHRvcCwgbGVmdCB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY2hhbmdlKHsgdG9wLCBsZWZ0IH0pIHtcbiAgICBpZiAoIW9uQ2hhbmdlKSByZXR1cm47XG5cbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGNvbnRhaW5lci5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBkeCA9IDA7XG4gICAgbGV0IGR5ID0gMDtcblxuICAgIGlmIChsZWZ0IDwgMCkgbGVmdCA9IDA7XG4gICAgaWYgKGxlZnQgPiB3aWR0aCkgbGVmdCA9IHdpZHRoO1xuICAgIGlmICh0b3AgPCAwKSB0b3AgPSAwO1xuICAgIGlmICh0b3AgPiBoZWlnaHQpIHRvcCA9IGhlaWdodDtcblxuICAgIGlmIChheGlzID09PSAneCcgfHwgYXhpcyA9PT0gJ3h5Jykge1xuICAgICAgZHggPSAobGVmdCAvIHdpZHRoKSAqICh4bWF4IC0geG1pbik7XG4gICAgfVxuXG4gICAgaWYgKGF4aXMgPT09ICd5JyB8fCBheGlzID09PSAneHknKSB7XG4gICAgICBkeSA9ICh0b3AgLyBoZWlnaHQpICogKHltYXggLSB5bWluKTtcbiAgICB9XG5cbiAgICBjb25zdCB4ID0gKGR4ICE9PSAwID8gcGFyc2VJbnQoZHggLyB4c3RlcCwgMTApICogeHN0ZXAgOiAwKSArIHhtaW47XG4gICAgY29uc3QgeSA9IChkeSAhPT0gMCA/IHBhcnNlSW50KGR5IC8geXN0ZXAsIDEwKSAqIHlzdGVwIDogMCkgKyB5bWluO1xuXG4gICAgb25DaGFuZ2Uoe1xuICAgICAgeDogeHJldmVyc2UgPyB4bWF4IC0geCArIHhtaW4gOiB4LFxuICAgICAgeTogeXJldmVyc2UgPyB5bWF4IC0geSArIHltaW4gOiB5XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZSkge1xuICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZS5uYXRpdmVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICBjb25zdCBkb20gPSBoYW5kbGUuY3VycmVudDtcbiAgICBjb25zdCBjbGllbnRQb3MgPSBnZXRDbGllbnRQb3NpdGlvbihlKTtcblxuICAgIHN0YXJ0LmN1cnJlbnQgPSB7XG4gICAgICB4OiBkb20ub2Zmc2V0TGVmdCxcbiAgICAgIHk6IGRvbS5vZmZzZXRUb3BcbiAgICB9O1xuXG4gICAgb2Zmc2V0LmN1cnJlbnQgPSB7XG4gICAgICB4OiBjbGllbnRQb3MueCxcbiAgICAgIHk6IGNsaWVudFBvcy55XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZURyYWcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBoYW5kbGVEcmFnLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaGFuZGxlRHJhZ0VuZCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBoYW5kbGVEcmFnRW5kKTtcblxuICAgIGlmIChvbkRyYWdTdGFydCkge1xuICAgICAgb25EcmFnU3RhcnQoZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UG9zKGUpIHtcbiAgICBjb25zdCBjbGllbnRQb3MgPSBnZXRDbGllbnRQb3NpdGlvbihlKTtcbiAgICBjb25zdCBsZWZ0ID0gY2xpZW50UG9zLnggKyBzdGFydC5jdXJyZW50LnggLSBvZmZzZXQuY3VycmVudC54O1xuICAgIGNvbnN0IHRvcCA9IGNsaWVudFBvcy55ICsgc3RhcnQuY3VycmVudC55IC0gb2Zmc2V0LmN1cnJlbnQueTtcblxuICAgIHJldHVybiB7IGxlZnQsIHRvcCB9O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRHJhZyhlKSB7XG4gICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2hhbmdlKGdldFBvcyhlKSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVEcmFnRW5kKGUpIHtcbiAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVEcmFnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlRHJhZ0VuZCk7XG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBoYW5kbGVEcmFnLCB7XG4gICAgICBwYXNzaXZlOiBmYWxzZVxuICAgIH0pO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaGFuZGxlRHJhZ0VuZCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBoYW5kbGVEcmFnRW5kKTtcblxuICAgIGlmIChvbkRyYWdFbmQpIHtcbiAgICAgIG9uRHJhZ0VuZChlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVUcmFja01vdXNlRG93bihlKSB7XG4gICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgY2xpZW50UG9zID0gZ2V0Q2xpZW50UG9zaXRpb24oZSk7XG4gICAgY29uc3QgcmVjdCA9IGNvbnRhaW5lci5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgc3RhcnQuY3VycmVudCA9IHtcbiAgICAgIHg6IGNsaWVudFBvcy54IC0gcmVjdC5sZWZ0LFxuICAgICAgeTogY2xpZW50UG9zLnkgLSByZWN0LnRvcFxuICAgIH07XG5cbiAgICBvZmZzZXQuY3VycmVudCA9IHtcbiAgICAgIHg6IGNsaWVudFBvcy54LFxuICAgICAgeTogY2xpZW50UG9zLnlcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlRHJhZyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZURyYWdFbmQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGhhbmRsZURyYWcsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIGhhbmRsZURyYWdFbmQpO1xuXG4gICAgY2hhbmdlKHtcbiAgICAgIGxlZnQ6IGNsaWVudFBvcy54IC0gcmVjdC5sZWZ0LFxuICAgICAgdG9wOiBjbGllbnRQb3MueSAtIHJlY3QudG9wXG4gICAgfSk7XG5cbiAgICBpZiAob25EcmFnU3RhcnQpIHtcbiAgICAgIG9uRHJhZ1N0YXJ0KGUpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHBvcyA9IGdldFBvc2l0aW9uKCk7XG4gIGNvbnN0IHZhbHVlU3R5bGUgPSB7fTtcbiAgaWYgKGF4aXMgPT09ICd4JykgdmFsdWVTdHlsZS53aWR0aCA9IHBvcy5sZWZ0ICsgJyUnO1xuICBpZiAoYXhpcyA9PT0gJ3knKSB2YWx1ZVN0eWxlLmhlaWdodCA9IHBvcy50b3AgKyAnJSc7XG4gIGlmICh4cmV2ZXJzZSkgdmFsdWVTdHlsZS5sZWZ0ID0gMTAwIC0gcG9zLmxlZnQgKyAnJSc7XG4gIGlmICh5cmV2ZXJzZSkgdmFsdWVTdHlsZS50b3AgPSAxMDAgLSBwb3MudG9wICsgJyUnO1xuXG4gIGNvbnN0IGhhbmRsZVN0eWxlID0ge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG4gICAgbGVmdDogeHJldmVyc2UgPyAxMDAgLSBwb3MubGVmdCArICclJyA6IHBvcy5sZWZ0ICsgJyUnLFxuICAgIHRvcDogeXJldmVyc2UgPyAxMDAgLSBwb3MudG9wICsgJyUnIDogcG9zLnRvcCArICclJ1xuICB9O1xuXG4gIGlmIChheGlzID09PSAneCcpIHtcbiAgICBoYW5kbGVTdHlsZS50b3AgPSAnNTAlJztcbiAgfSBlbHNlIGlmIChheGlzID09PSAneScpIHtcbiAgICBoYW5kbGVTdHlsZS5sZWZ0ID0gJzUwJSc7XG4gIH1cblxuICBjb25zdCBzdHlsZXMgPSB7XG4gICAgdHJhY2s6IHsgLi4uZGVmYXVsdFN0eWxlc1theGlzXS50cmFjaywgLi4uY3VzdG9tU3R5bGVzLnRyYWNrIH0sXG4gICAgYWN0aXZlOiB7IC4uLmRlZmF1bHRTdHlsZXNbYXhpc10uYWN0aXZlLCAuLi5jdXN0b21TdHlsZXMuYWN0aXZlIH0sXG4gICAgdGh1bWI6IHsgLi4uZGVmYXVsdFN0eWxlc1theGlzXS50aHVtYiwgLi4uY3VzdG9tU3R5bGVzLnRodW1iIH0sXG4gICAgZGlzYWJsZWQ6IHsgLi4uZGVmYXVsdFN0eWxlcy5kaXNhYmxlZCwgLi4uY3VzdG9tU3R5bGVzLmRpc2FibGVkIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5wcm9wc31cbiAgICAgIHJlZj17Y29udGFpbmVyfVxuICAgICAgY3NzPXtbc3R5bGVzLnRyYWNrLCBkaXNhYmxlZCAmJiBzdHlsZXMuZGlzYWJsZWRdfVxuICAgICAgb25Ub3VjaFN0YXJ0PXtoYW5kbGVUcmFja01vdXNlRG93bn1cbiAgICAgIG9uTW91c2VEb3duPXtoYW5kbGVUcmFja01vdXNlRG93bn1cbiAgICA+XG4gICAgICA8ZGl2IGNzcz17c3R5bGVzLmFjdGl2ZX0gc3R5bGU9e3ZhbHVlU3R5bGV9IC8+XG4gICAgICA8ZGl2XG4gICAgICAgIHJlZj17aGFuZGxlfVxuICAgICAgICBzdHlsZT17aGFuZGxlU3R5bGV9XG4gICAgICAgIG9uVG91Y2hTdGFydD17aGFuZGxlTW91c2VEb3dufVxuICAgICAgICBvbk1vdXNlRG93bj17aGFuZGxlTW91c2VEb3dufVxuICAgICAgICBvbkNsaWNrPXtmdW5jdGlvbihlKSB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLm5hdGl2ZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNzcz17c3R5bGVzLnRodW1ifSAvPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5TbGlkZXIuZGVmYXVsdFByb3BzID0ge1xuICBkaXNhYmxlZDogZmFsc2UsXG4gIGF4aXM6ICd4JyxcbiAgeDogNTAsXG4gIHhtaW46IDAsXG4gIHhtYXg6IDEwMCxcbiAgeTogNTAsXG4gIHltaW46IDAsXG4gIHltYXg6IDEwMCxcbiAgeHN0ZXA6IDEsXG4gIHlzdGVwOiAxLFxuICB4cmV2ZXJzZTogZmFsc2UsXG4gIHlyZXZlcnNlOiBmYWxzZSxcbiAgc3R5bGVzOiB7fVxufTtcblxuZXhwb3J0IGRlZmF1bHQgU2xpZGVyO1xuIl19 */\")),\n\t    onTouchStart: handleTrackMouseDown,\n\t    onMouseDown: handleTrackMouseDown\n\t  }), core.jsx(\"div\", {\n\t    css: styles$1.active,\n\t    style: valueStyle\n\t  }), core.jsx(\"div\", {\n\t    ref: handle,\n\t    style: handleStyle,\n\t    onTouchStart: handleMouseDown,\n\t    onMouseDown: handleMouseDown,\n\t    onClick: function onClick(e) {\n\t      e.stopPropagation();\n\t      e.nativeEvent.stopImmediatePropagation();\n\t    }\n\t  }, core.jsx(\"div\", {\n\t    css: styles$1.thumb\n\t  })));\n\t};\n\t\n\tSlider.defaultProps = {\n\t  disabled: false,\n\t  axis: 'x',\n\t  x: 50,\n\t  xmin: 0,\n\t  xmax: 100,\n\t  y: 50,\n\t  ymin: 0,\n\t  ymax: 100,\n\t  xstep: 1,\n\t  ystep: 1,\n\t  xreverse: false,\n\t  yreverse: false,\n\t  styles: {}\n\t};\n\t\n\tmodule.exports = Slider;\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/** @license React v17.0.2\n\t * react.production.min.js\n\t *\n\t * Copyright (c) Facebook, Inc. and its affiliates.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t'use strict';var l=__webpack_require__(8),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\n\tif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\n\tfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\n\tvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\n\tfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\n\tfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\n\tfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\n\tfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n\t0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\n\tfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\n\texports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\n\texports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\n\tkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\n\texports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\n\texports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.2\";\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\n\t/** @license React v0.20.2\n\t * scheduler.production.min.js\n\t *\n\t * Copyright (c) Facebook, Inc. and its affiliates.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t'use strict';var f,g,h,k;if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}\n\tif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var t=null,u=null,w=function(){if(null!==t)try{var a=exports.unstable_now();t(!0,a);t=null}catch(b){throw setTimeout(w,0),b;}};f=function(a){null!==t?setTimeout(f,0,a):(t=a,setTimeout(w,0))};g=function(a,b){u=setTimeout(a,b)};h=function(){clearTimeout(u)};exports.unstable_shouldYield=function(){return!1};k=exports.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,y=window.clearTimeout;if(\"undefined\"!==typeof console){var z=\n\twindow.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\");\"function\"!==typeof z&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\")}var A=!1,B=null,C=-1,D=5,E=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=\n\tE};k=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):D=0<a?Math.floor(1E3/a):5};var F=new MessageChannel,G=F.port2;F.port1.onmessage=function(){if(null!==B){var a=exports.unstable_now();E=a+D;try{B(!0,a)?G.postMessage(null):(A=!1,B=null)}catch(b){throw G.postMessage(null),b;}}else A=!1};f=function(a){B=a;A||(A=!0,G.postMessage(null))};g=function(a,b){C=\n\tx(function(){a(exports.unstable_now())},b)};h=function(){y(C);C=-1}}function H(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<I(e,b))a[d]=b,a[c]=e,c=d;else break a}}function J(a){a=a[0];return void 0===a?null:a}\n\tfunction K(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>I(n,c))void 0!==r&&0>I(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>I(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function I(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var L=[],M=[],N=1,O=null,P=3,Q=!1,R=!1,S=!1;\n\tfunction T(a){for(var b=J(M);null!==b;){if(null===b.callback)K(M);else if(b.startTime<=a)K(M),b.sortIndex=b.expirationTime,H(L,b);else break;b=J(M)}}function U(a){S=!1;T(a);if(!R)if(null!==J(L))R=!0,f(V);else{var b=J(M);null!==b&&g(U,b.startTime-a)}}\n\tfunction V(a,b){R=!1;S&&(S=!1,h());Q=!0;var c=P;try{T(b);for(O=J(L);null!==O&&(!(O.expirationTime>b)||a&&!exports.unstable_shouldYield());){var d=O.callback;if(\"function\"===typeof d){O.callback=null;P=O.priorityLevel;var e=d(O.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?O.callback=e:O===J(L)&&K(L);T(b)}else K(L);O=J(L)}if(null!==O)var m=!0;else{var n=J(M);null!==n&&g(U,n.startTime-b);m=!1}return m}finally{O=null,P=c,Q=!1}}var W=k;exports.unstable_IdlePriority=5;\n\texports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){R||Q||(R=!0,f(V))};exports.unstable_getCurrentPriorityLevel=function(){return P};exports.unstable_getFirstCallbackNode=function(){return J(L)};\n\texports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=W;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};\n\texports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:N++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,H(M,a),null===J(L)&&a===J(M)&&(S?h():S=!0,g(U,c-d))):(a.sortIndex=e,H(L,a),R||Q||(R=!0,f(V)));return a};\n\texports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tif (true) {\n\t  module.exports = __webpack_require__(31);\n\t} else {\n\t  module.exports = require('./cjs/scheduler.development.js');\n\t}\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = function(THREE) {\n\t\tvar MOUSE = THREE.MOUSE\n\t\tif (!MOUSE)\n\t\t\tMOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\t\n\t\t/**\n\t\t * @author qiao / https://github.com/qiao\n\t\t * @author mrdoob / http://mrdoob.com\n\t\t * @author alteredq / http://alteredqualia.com/\n\t\t * @author WestLangley / http://github.com/WestLangley\n\t\t * @author erich666 / http://erichaines.com\n\t\t */\n\t\t/*global THREE, console */\n\t\n\t\tfunction OrbitConstraint ( object ) {\n\t\n\t\t\tthis.object = object;\n\t\n\t\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\t\t// and where it pans with respect to.\n\t\t\tthis.target = new THREE.Vector3();\n\t\n\t\t\t// Limits to how far you can dolly in and out ( PerspectiveCamera only )\n\t\t\tthis.minDistance = 0;\n\t\t\tthis.maxDistance = Infinity;\n\t\n\t\t\t// Limits to how far you can zoom in and out ( OrthographicCamera only )\n\t\t\tthis.minZoom = 0;\n\t\t\tthis.maxZoom = Infinity;\n\t\n\t\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t\t// Range is 0 to Math.PI radians.\n\t\t\tthis.minPolarAngle = 0; // radians\n\t\t\tthis.maxPolarAngle = Math.PI; // radians\n\t\n\t\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\t\tthis.maxAzimuthAngle = Infinity; // radians\n\t\n\t\t\t// Set to true to enable damping (inertia)\n\t\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\t\tthis.enableDamping = false;\n\t\t\tthis.dampingFactor = 0.25;\n\t\n\t\t\t////////////\n\t\t\t// internals\n\t\n\t\t\tvar scope = this;\n\t\n\t\t\tvar EPS = 0.000001;\n\t\n\t\t\t// Current position in spherical coordinate system.\n\t\t\tvar theta;\n\t\t\tvar phi;\n\t\n\t\t\t// Pending changes\n\t\t\tvar phiDelta = 0;\n\t\t\tvar thetaDelta = 0;\n\t\t\tvar scale = 1;\n\t\t\tvar panOffset = new THREE.Vector3();\n\t\t\tvar zoomChanged = false;\n\t\n\t\t\t// API\n\t\n\t\t\tthis.getPolarAngle = function () {\n\t\n\t\t\t\treturn phi;\n\t\n\t\t\t};\n\t\n\t\t\tthis.getAzimuthalAngle = function () {\n\t\n\t\t\t\treturn theta;\n\t\n\t\t\t};\n\t\n\t\t\tthis.rotateLeft = function ( angle ) {\n\t\n\t\t\t\tthetaDelta -= angle;\n\t\n\t\t\t};\n\t\n\t\t\tthis.rotateUp = function ( angle ) {\n\t\n\t\t\t\tphiDelta -= angle;\n\t\n\t\t\t};\n\t\n\t\t\t// pass in distance in world space to move left\n\t\t\tthis.panLeft = function() {\n\t\n\t\t\t\tvar v = new THREE.Vector3();\n\t\n\t\t\t\treturn function panLeft ( distance ) {\n\t\n\t\t\t\t\tvar te = this.object.matrix.elements;\n\t\n\t\t\t\t\t// get X column of matrix\n\t\t\t\t\tv.set( te[ 0 ], te[ 1 ], te[ 2 ] );\n\t\t\t\t\tv.multiplyScalar( - distance );\n\t\n\t\t\t\t\tpanOffset.add( v );\n\t\n\t\t\t\t};\n\t\n\t\t\t}();\n\t\n\t\t\t// pass in distance in world space to move up\n\t\t\tthis.panUp = function() {\n\t\n\t\t\t\tvar v = new THREE.Vector3();\n\t\n\t\t\t\treturn function panUp ( distance ) {\n\t\n\t\t\t\t\tvar te = this.object.matrix.elements;\n\t\n\t\t\t\t\t// get Y column of matrix\n\t\t\t\t\tv.set( te[ 4 ], te[ 5 ], te[ 6 ] );\n\t\t\t\t\tv.multiplyScalar( distance );\n\t\n\t\t\t\t\tpanOffset.add( v );\n\t\n\t\t\t\t};\n\t\n\t\t\t}();\n\t\n\t\t\t// pass in x,y of change desired in pixel space,\n\t\t\t// right and down are positive\n\t\t\tthis.pan = function ( deltaX, deltaY, screenWidth, screenHeight ) {\n\t\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\t\n\t\t\t\t\t// perspective\n\t\t\t\t\tvar position = scope.object.position;\n\t\t\t\t\tvar offset = position.clone().sub( scope.target );\n\t\t\t\t\tvar targetDistance = offset.length();\n\t\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\t\n\t\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\t\tscope.panLeft( 2 * deltaX * targetDistance / screenHeight );\n\t\t\t\t\tscope.panUp( 2 * deltaY * targetDistance / screenHeight );\n\t\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\t\n\t\t\t\t\t// orthographic\n\t\t\t\t\tscope.panLeft( deltaX * ( scope.object.right - scope.object.left ) / screenWidth );\n\t\t\t\t\tscope.panUp( deltaY * ( scope.object.top - scope.object.bottom ) / screenHeight );\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\t// camera neither orthographic or perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.dollyIn = function ( dollyScale ) {\n\t\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\t\n\t\t\t\t\tscale /= dollyScale;\n\t\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\t\n\t\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom * dollyScale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.dollyOut = function ( dollyScale ) {\n\t\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\t\n\t\t\t\t\tscale *= dollyScale;\n\t\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\t\n\t\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / dollyScale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.update = function() {\n\t\n\t\t\t\tvar offset = new THREE.Vector3();\n\t\n\t\t\t\t// so camera.up is the orbit axis\n\t\t\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\t\t\tvar quatInverse = quat.clone().inverse();\n\t\n\t\t\t\tvar lastPosition = new THREE.Vector3();\n\t\t\t\tvar lastQuaternion = new THREE.Quaternion();\n\t\n\t\t\t\treturn function () {\n\t\n\t\t\t\t\tvar position = this.object.position;\n\t\n\t\t\t\t\toffset.copy( position ).sub( this.target );\n\t\n\t\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\t\toffset.applyQuaternion( quat );\n\t\n\t\t\t\t\t// angle from z-axis around y-axis\n\t\n\t\t\t\t\ttheta = Math.atan2( offset.x, offset.z );\n\t\n\t\t\t\t\t// angle from y-axis\n\t\n\t\t\t\t\tphi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );\n\t\n\t\t\t\t\ttheta += thetaDelta;\n\t\t\t\t\tphi += phiDelta;\n\t\n\t\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\t\ttheta = Math.max( this.minAzimuthAngle, Math.min( this.maxAzimuthAngle, theta ) );\n\t\n\t\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\t\tphi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, phi ) );\n\t\n\t\t\t\t\t// restrict phi to be betwee EPS and PI-EPS\n\t\t\t\t\tphi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );\n\t\n\t\t\t\t\tvar radius = offset.length() * scale;\n\t\n\t\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\t\tradius = Math.max( this.minDistance, Math.min( this.maxDistance, radius ) );\n\t\n\t\t\t\t\t// move target to panned location\n\t\t\t\t\tthis.target.add( panOffset );\n\t\n\t\t\t\t\toffset.x = radius * Math.sin( phi ) * Math.sin( theta );\n\t\t\t\t\toffset.y = radius * Math.cos( phi );\n\t\t\t\t\toffset.z = radius * Math.sin( phi ) * Math.cos( theta );\n\t\n\t\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\t\toffset.applyQuaternion( quatInverse );\n\t\n\t\t\t\t\tposition.copy( this.target ).add( offset );\n\t\n\t\t\t\t\tthis.object.lookAt( this.target );\n\t\n\t\t\t\t\tif ( this.enableDamping === true ) {\n\t\n\t\t\t\t\t\tthetaDelta *= ( 1 - this.dampingFactor );\n\t\t\t\t\t\tphiDelta *= ( 1 - this.dampingFactor );\n\t\n\t\t\t\t\t} else {\n\t\n\t\t\t\t\t\tthetaDelta = 0;\n\t\t\t\t\t\tphiDelta = 0;\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\tscale = 1;\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\t\n\t\t\t\t\t// update condition is:\n\t\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\t\n\t\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\t\t lastPosition.distanceToSquared( this.object.position ) > EPS ||\n\t\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( this.object.quaternion ) ) > EPS ) {\n\t\n\t\t\t\t\t\tlastPosition.copy( this.object.position );\n\t\t\t\t\t\tlastQuaternion.copy( this.object.quaternion );\n\t\t\t\t\t\tzoomChanged = false;\n\t\n\t\t\t\t\t\treturn true;\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn false;\n\t\n\t\t\t\t};\n\t\n\t\t\t}();\n\t\n\t\t};\n\t\n\t\n\t\t// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n\t\t// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n\t\t// supported.\n\t\t//\n\t\t//    Orbit - left mouse / touch: one finger move\n\t\t//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n\t\t//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\t\n\t\tfunction OrbitControls ( object, domElement ) {\n\t\n\t\t\tvar constraint = new OrbitConstraint( object );\n\t\n\t\t\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\t\n\t\t\t// API\n\t\n\t\t\tObject.defineProperty( this, 'constraint', {\n\t\n\t\t\t\tget: function() {\n\t\n\t\t\t\t\treturn constraint;\n\t\n\t\t\t\t}\n\t\n\t\t\t} );\n\t\n\t\t\tthis.getPolarAngle = function () {\n\t\n\t\t\t\treturn constraint.getPolarAngle();\n\t\n\t\t\t};\n\t\n\t\t\tthis.getAzimuthalAngle = function () {\n\t\n\t\t\t\treturn constraint.getAzimuthalAngle();\n\t\n\t\t\t};\n\t\n\t\t\t// Set to false to disable this control\n\t\t\tthis.enabled = true;\n\t\n\t\t\t// center is old, deprecated; use \"target\" instead\n\t\t\tthis.center = this.target;\n\t\n\t\t\t// This option actually enables dollying in and out; left as \"zoom\" for\n\t\t\t// backwards compatibility.\n\t\t\t// Set to false to disable zooming\n\t\t\tthis.enableZoom = true;\n\t\t\tthis.zoomSpeed = 1.0;\n\t\n\t\t\t// Set to false to disable rotating\n\t\t\tthis.enableRotate = true;\n\t\t\tthis.rotateSpeed = 1.0;\n\t\n\t\t\t// Set to false to disable panning\n\t\t\tthis.enablePan = true;\n\t\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\t\n\t\t\t// Set to true to automatically rotate around the target\n\t\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\t\tthis.autoRotate = false;\n\t\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\t\n\t\t\t// Set to false to disable use of the keys\n\t\t\tthis.enableKeys = true;\n\t\n\t\t\t// The four arrow keys\n\t\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\t\n\t\t\t// Mouse buttons\n\t\t\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\t\n\t\t\t////////////\n\t\t\t// internals\n\t\n\t\t\tvar scope = this;\n\t\n\t\t\tvar rotateStart = new THREE.Vector2();\n\t\t\tvar rotateEnd = new THREE.Vector2();\n\t\t\tvar rotateDelta = new THREE.Vector2();\n\t\n\t\t\tvar panStart = new THREE.Vector2();\n\t\t\tvar panEnd = new THREE.Vector2();\n\t\t\tvar panDelta = new THREE.Vector2();\n\t\n\t\t\tvar dollyStart = new THREE.Vector2();\n\t\t\tvar dollyEnd = new THREE.Vector2();\n\t\t\tvar dollyDelta = new THREE.Vector2();\n\t\n\t\t\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\t\n\t\t\tvar state = STATE.NONE;\n\t\n\t\t\t// for reset\n\t\n\t\t\tthis.target0 = this.target.clone();\n\t\t\tthis.position0 = this.object.position.clone();\n\t\t\tthis.zoom0 = this.object.zoom;\n\t\n\t\t\t// events\n\t\n\t\t\tvar changeEvent = { type: 'change' };\n\t\t\tvar startEvent = { type: 'start' };\n\t\t\tvar endEvent = { type: 'end' };\n\t\n\t\t\t// pass in x,y of change desired in pixel space,\n\t\t\t// right and down are positive\n\t\t\tfunction pan( deltaX, deltaY ) {\n\t\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\tconstraint.pan( deltaX, deltaY, element.clientWidth, element.clientHeight );\n\t\n\t\t\t}\n\t\n\t\t\tthis.update = function () {\n\t\n\t\t\t\tif ( this.autoRotate && state === STATE.NONE ) {\n\t\n\t\t\t\t\tconstraint.rotateLeft( getAutoRotationAngle() );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( constraint.update() === true ) {\n\t\n\t\t\t\t\tthis.dispatchEvent( changeEvent );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.reset = function () {\n\t\n\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\tthis.target.copy( this.target0 );\n\t\t\t\tthis.object.position.copy( this.position0 );\n\t\t\t\tthis.object.zoom = this.zoom0;\n\t\n\t\t\t\tthis.object.updateProjectionMatrix();\n\t\t\t\tthis.dispatchEvent( changeEvent );\n\t\n\t\t\t\tthis.update();\n\t\n\t\t\t};\n\t\n\t\t\tfunction getAutoRotationAngle() {\n\t\n\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t\n\t\t\t}\n\t\n\t\t\tfunction getZoomScale() {\n\t\n\t\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseDown( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\n\t\t\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\t\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\n\t\t\t\t\tstate = STATE.ROTATE;\n\t\n\t\t\t\t\trotateStart.set( event.clientX, event.clientY );\n\t\n\t\t\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\t\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\n\t\t\t\t\tstate = STATE.DOLLY;\n\t\n\t\t\t\t\tdollyStart.set( event.clientX, event.clientY );\n\t\n\t\t\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\t\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\n\t\t\t\t\tstate = STATE.PAN;\n\t\n\t\t\t\t\tpanStart.set( event.clientX, event.clientY );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( state !== STATE.NONE ) {\n\t\n\t\t\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\t\t\t\t\tscope.dispatchEvent( startEvent );\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseMove( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\tif ( state === STATE.ROTATE ) {\n\t\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\n\t\t\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\t\n\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\n\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\t\n\t\t\t\t\trotateStart.copy( rotateEnd );\n\t\n\t\t\t\t} else if ( state === STATE.DOLLY ) {\n\t\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\n\t\t\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\t\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\t\n\t\t\t\t\tif ( dollyDelta.y > 0 ) {\n\t\n\t\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\t\n\t\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\t\n\t\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\tdollyStart.copy( dollyEnd );\n\t\n\t\t\t\t} else if ( state === STATE.PAN ) {\n\t\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\n\t\t\t\t\tpanEnd.set( event.clientX, event.clientY );\n\t\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\t\n\t\t\t\t\tpan( panDelta.x, panDelta.y );\n\t\n\t\t\t\t\tpanStart.copy( panEnd );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( state !== STATE.NONE ) scope.update();\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseUp( /* event */ ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\t\t\tscope.dispatchEvent( endEvent );\n\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseWheel( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\n\t\t\t\tvar delta = 0;\n\t\n\t\t\t\tif ( event.wheelDelta !== undefined ) {\n\t\n\t\t\t\t\t// WebKit / Opera / Explorer 9\n\t\n\t\t\t\t\tdelta = event.wheelDelta;\n\t\n\t\t\t\t} else if ( event.detail !== undefined ) {\n\t\n\t\t\t\t\t// Firefox\n\t\n\t\t\t\t\tdelta = - event.detail;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( delta > 0 ) {\n\t\n\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\t\n\t\t\t\t} else if ( delta < 0 ) {\n\t\n\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tscope.update();\n\t\t\t\tscope.dispatchEvent( startEvent );\n\t\t\t\tscope.dispatchEvent( endEvent );\n\t\n\t\t\t}\n\t\n\t\t\tfunction onKeyDown( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\t\n\t\t\t\tswitch ( event.keyCode ) {\n\t\n\t\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t\tfunction touchstart( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tswitch ( event.touches.length ) {\n\t\n\t\t\t\t\tcase 1:\t// one-fingered touch: rotate\n\t\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\t\n\t\t\t\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 2:\t// two-fingered touch: dolly\n\t\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\t\n\t\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\t\t\tdollyStart.set( 0, distance );\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 3: // three-fingered touch: pan\n\t\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\t\n\t\t\t\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tdefault:\n\t\n\t\t\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( state !== STATE.NONE ) scope.dispatchEvent( startEvent );\n\t\n\t\t\t}\n\t\n\t\t\tfunction touchmove( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\tswitch ( event.touches.length ) {\n\t\n\t\t\t\t\tcase 1: // one-fingered touch: rotate\n\t\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return;\n\t\n\t\t\t\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\t\n\t\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\t\n\t\t\t\t\t\trotateStart.copy( rotateEnd );\n\t\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 2: // two-fingered touch: dolly\n\t\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return;\n\t\n\t\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\n\t\t\t\t\t\tdollyEnd.set( 0, distance );\n\t\t\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\t\n\t\t\t\t\t\tif ( dollyDelta.y > 0 ) {\n\t\n\t\t\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\t\n\t\t\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\t\n\t\t\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\t\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tdollyStart.copy( dollyEnd );\n\t\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 3: // three-fingered touch: pan\n\t\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return;\n\t\n\t\t\t\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\t\n\t\t\t\t\t\tpan( panDelta.x, panDelta.y );\n\t\n\t\t\t\t\t\tpanStart.copy( panEnd );\n\t\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tdefault:\n\t\n\t\t\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t\tfunction touchend( /* event */ ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tscope.dispatchEvent( endEvent );\n\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t}\n\t\n\t\t\tfunction contextmenu( event ) {\n\t\n\t\t\t\tevent.preventDefault();\n\t\n\t\t\t}\n\t\n\t\t\tthis.dispose = function() {\n\t\n\t\t\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\t\t\tthis.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\t\t\tthis.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );\n\t\t\t\tthis.domElement.removeEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\t\n\t\t\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\t\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\t\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\t\n\t\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\n\t\t\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\t\n\t\t\t}\n\t\n\t\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\t\n\t\t\tthis.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\t\t\tthis.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\n\t\t\tthis.domElement.addEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\t\n\t\t\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\t\t\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\t\t\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\t\n\t\t\twindow.addEventListener( 'keydown', onKeyDown, false );\n\t\n\t\t\t// force an update at start\n\t\t\tthis.update();\n\t\n\t\t};\n\t\n\t\tOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\n\t\tOrbitControls.prototype.constructor = OrbitControls;\n\t\n\t\tObject.defineProperties( OrbitControls.prototype, {\n\t\n\t\t\tobject: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.object;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\ttarget: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.target;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: target is now immutable. Use target.set() instead.' );\n\t\t\t\t\tthis.constraint.target.copy( value );\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminDistance : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minDistance;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minDistance = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxDistance : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxDistance;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxDistance = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminZoom : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minZoom;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minZoom = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxZoom : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxZoom;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxZoom = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminPolarAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minPolarAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minPolarAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxPolarAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxPolarAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxPolarAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminAzimuthAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minAzimuthAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minAzimuthAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxAzimuthAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxAzimuthAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxAzimuthAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tenableDamping : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.enableDamping;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.enableDamping = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tdampingFactor : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.dampingFactor;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.dampingFactor = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\t// backward compatibility\n\t\n\t\t\tnoZoom: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\t\treturn ! this.enableZoom;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\t\tthis.enableZoom = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoRotate: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\t\treturn ! this.enableRotate;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\t\tthis.enableRotate = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoPan: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\t\treturn ! this.enablePan;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\t\tthis.enablePan = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoKeys: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\t\treturn ! this.enableKeys;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\t\tthis.enableKeys = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tstaticMoving : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\t\treturn ! this.constraint.enableDamping;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\t\tthis.constraint.enableDamping = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tdynamicDampingFactor : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\t\treturn this.constraint.dampingFactor;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\t\tthis.constraint.dampingFactor = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t} );\n\t\n\t\treturn OrbitControls;\n\t}\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;var self = self || {};// File:src/Three.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tvar THREE = { REVISION: '72' };\r\n\t\r\n\t//\r\n\t\r\n\tif ( true ) {\r\n\t\r\n\t\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (THREE), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t\r\n\t} else if ( 'undefined' !== typeof exports && 'undefined' !== typeof module ) {\r\n\t\r\n\t\t\tmodule.exports = THREE;\r\n\t\r\n\t}\r\n\t\r\n\t\r\n\t// polyfills\r\n\t\r\n\tif ( self.requestAnimationFrame === undefined || self.cancelAnimationFrame === undefined ) {\r\n\t\r\n\t\t// Missing in Android stock browser.\r\n\t\r\n\t\t( function () {\r\n\t\r\n\t\t\tvar lastTime = 0;\r\n\t\t\tvar vendors = [ 'ms', 'moz', 'webkit', 'o' ];\r\n\t\r\n\t\t\tfor ( var x = 0; x < vendors.length && ! self.requestAnimationFrame; ++ x ) {\r\n\t\r\n\t\t\t\tself.requestAnimationFrame = self[ vendors[ x ] + 'RequestAnimationFrame' ];\r\n\t\t\t\tself.cancelAnimationFrame = self[ vendors[ x ] + 'CancelAnimationFrame' ] || self[ vendors[ x ] + 'CancelRequestAnimationFrame' ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( self.requestAnimationFrame === undefined && self.setTimeout !== undefined ) {\r\n\t\r\n\t\t\t\tself.requestAnimationFrame = function ( callback ) {\r\n\t\r\n\t\t\t\t\tvar currTime = Date.now(), timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) );\r\n\t\t\t\t\tvar id = self.setTimeout( function () {\r\n\t\r\n\t\t\t\t\t\tcallback( currTime + timeToCall );\r\n\t\r\n\t\t\t\t\t}, timeToCall );\r\n\t\t\t\t\tlastTime = currTime + timeToCall;\r\n\t\t\t\t\treturn id;\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( self.cancelAnimationFrame === undefined && self.clearTimeout !== undefined ) {\r\n\t\r\n\t\t\t\tself.cancelAnimationFrame = function ( id ) {\r\n\t\r\n\t\t\t\t\tself.clearTimeout( id );\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}() );\r\n\t\r\n\t}\r\n\t\r\n\tif ( Math.sign === undefined ) {\r\n\t\r\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\t\r\n\t\tMath.sign = function ( x ) {\r\n\t\r\n\t\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\t\r\n\t\t};\r\n\t\r\n\t}\r\n\t\r\n\tif ( Function.prototype.name === undefined && Object.defineProperty !== undefined ) {\r\n\t\r\n\t\t// Missing in IE9-11.\r\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\t\r\n\t\tObject.defineProperty( Function.prototype, 'name', {\r\n\t\r\n\t\t\tget: function () {\r\n\t\r\n\t\t\t\treturn this.toString().match( /^\\s*function\\s*(\\S*)\\s*\\(/ )[ 1 ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t} );\r\n\t\r\n\t}\r\n\t\r\n\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\r\n\t\r\n\tTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\r\n\t\r\n\t// GL STATE CONSTANTS\r\n\t\r\n\tTHREE.CullFaceNone = 0;\r\n\tTHREE.CullFaceBack = 1;\r\n\tTHREE.CullFaceFront = 2;\r\n\tTHREE.CullFaceFrontBack = 3;\r\n\t\r\n\tTHREE.FrontFaceDirectionCW = 0;\r\n\tTHREE.FrontFaceDirectionCCW = 1;\r\n\t\r\n\t// SHADOWING TYPES\r\n\t\r\n\tTHREE.BasicShadowMap = 0;\r\n\tTHREE.PCFShadowMap = 1;\r\n\tTHREE.PCFSoftShadowMap = 2;\r\n\t\r\n\t// MATERIAL CONSTANTS\r\n\t\r\n\t// side\r\n\t\r\n\tTHREE.FrontSide = 0;\r\n\tTHREE.BackSide = 1;\r\n\tTHREE.DoubleSide = 2;\r\n\t\r\n\t// shading\r\n\t\r\n\tTHREE.FlatShading = 1;\r\n\tTHREE.SmoothShading = 2;\r\n\t\r\n\t// colors\r\n\t\r\n\tTHREE.NoColors = 0;\r\n\tTHREE.FaceColors = 1;\r\n\tTHREE.VertexColors = 2;\r\n\t\r\n\t// blending modes\r\n\t\r\n\tTHREE.NoBlending = 0;\r\n\tTHREE.NormalBlending = 1;\r\n\tTHREE.AdditiveBlending = 2;\r\n\tTHREE.SubtractiveBlending = 3;\r\n\tTHREE.MultiplyBlending = 4;\r\n\tTHREE.CustomBlending = 5;\r\n\t\r\n\t// custom blending equations\r\n\t// (numbers start from 100 not to clash with other\r\n\t// mappings to OpenGL constants defined in Texture.js)\r\n\t\r\n\tTHREE.AddEquation = 100;\r\n\tTHREE.SubtractEquation = 101;\r\n\tTHREE.ReverseSubtractEquation = 102;\r\n\tTHREE.MinEquation = 103;\r\n\tTHREE.MaxEquation = 104;\r\n\t\r\n\t// custom blending destination factors\r\n\t\r\n\tTHREE.ZeroFactor = 200;\r\n\tTHREE.OneFactor = 201;\r\n\tTHREE.SrcColorFactor = 202;\r\n\tTHREE.OneMinusSrcColorFactor = 203;\r\n\tTHREE.SrcAlphaFactor = 204;\r\n\tTHREE.OneMinusSrcAlphaFactor = 205;\r\n\tTHREE.DstAlphaFactor = 206;\r\n\tTHREE.OneMinusDstAlphaFactor = 207;\r\n\t\r\n\t// custom blending source factors\r\n\t\r\n\t//THREE.ZeroFactor = 200;\r\n\t//THREE.OneFactor = 201;\r\n\t//THREE.SrcAlphaFactor = 204;\r\n\t//THREE.OneMinusSrcAlphaFactor = 205;\r\n\t//THREE.DstAlphaFactor = 206;\r\n\t//THREE.OneMinusDstAlphaFactor = 207;\r\n\tTHREE.DstColorFactor = 208;\r\n\tTHREE.OneMinusDstColorFactor = 209;\r\n\tTHREE.SrcAlphaSaturateFactor = 210;\r\n\t\r\n\t// depth modes\r\n\t\r\n\tTHREE.NeverDepth = 0;\r\n\tTHREE.AlwaysDepth = 1;\r\n\tTHREE.LessDepth = 2;\r\n\tTHREE.LessEqualDepth = 3;\r\n\tTHREE.EqualDepth = 4;\r\n\tTHREE.GreaterEqualDepth = 5;\r\n\tTHREE.GreaterDepth = 6;\r\n\tTHREE.NotEqualDepth = 7;\r\n\t\r\n\t\r\n\t// TEXTURE CONSTANTS\r\n\t\r\n\tTHREE.MultiplyOperation = 0;\r\n\tTHREE.MixOperation = 1;\r\n\tTHREE.AddOperation = 2;\r\n\t\r\n\t// Mapping modes\r\n\t\r\n\tTHREE.UVMapping = 300;\r\n\t\r\n\tTHREE.CubeReflectionMapping = 301;\r\n\tTHREE.CubeRefractionMapping = 302;\r\n\t\r\n\tTHREE.EquirectangularReflectionMapping = 303;\r\n\tTHREE.EquirectangularRefractionMapping = 304;\r\n\t\r\n\tTHREE.SphericalReflectionMapping = 305;\r\n\t\r\n\t// Wrapping modes\r\n\t\r\n\tTHREE.RepeatWrapping = 1000;\r\n\tTHREE.ClampToEdgeWrapping = 1001;\r\n\tTHREE.MirroredRepeatWrapping = 1002;\r\n\t\r\n\t// Filters\r\n\t\r\n\tTHREE.NearestFilter = 1003;\r\n\tTHREE.NearestMipMapNearestFilter = 1004;\r\n\tTHREE.NearestMipMapLinearFilter = 1005;\r\n\tTHREE.LinearFilter = 1006;\r\n\tTHREE.LinearMipMapNearestFilter = 1007;\r\n\tTHREE.LinearMipMapLinearFilter = 1008;\r\n\t\r\n\t// Data types\r\n\t\r\n\tTHREE.UnsignedByteType = 1009;\r\n\tTHREE.ByteType = 1010;\r\n\tTHREE.ShortType = 1011;\r\n\tTHREE.UnsignedShortType = 1012;\r\n\tTHREE.IntType = 1013;\r\n\tTHREE.UnsignedIntType = 1014;\r\n\tTHREE.FloatType = 1015;\r\n\tTHREE.HalfFloatType = 1025;\r\n\t\r\n\t// Pixel types\r\n\t\r\n\t//THREE.UnsignedByteType = 1009;\r\n\tTHREE.UnsignedShort4444Type = 1016;\r\n\tTHREE.UnsignedShort5551Type = 1017;\r\n\tTHREE.UnsignedShort565Type = 1018;\r\n\t\r\n\t// Pixel formats\r\n\t\r\n\tTHREE.AlphaFormat = 1019;\r\n\tTHREE.RGBFormat = 1020;\r\n\tTHREE.RGBAFormat = 1021;\r\n\tTHREE.LuminanceFormat = 1022;\r\n\tTHREE.LuminanceAlphaFormat = 1023;\r\n\t// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\r\n\tTHREE.RGBEFormat = THREE.RGBAFormat; //1024;\r\n\t\r\n\t// DDS / ST3C Compressed texture formats\r\n\t\r\n\tTHREE.RGB_S3TC_DXT1_Format = 2001;\r\n\tTHREE.RGBA_S3TC_DXT1_Format = 2002;\r\n\tTHREE.RGBA_S3TC_DXT3_Format = 2003;\r\n\tTHREE.RGBA_S3TC_DXT5_Format = 2004;\r\n\t\r\n\t\r\n\t// PVRTC compressed texture formats\r\n\t\r\n\tTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\r\n\tTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\r\n\tTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\r\n\tTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\r\n\t\r\n\t\r\n\t// DEPRECATED\r\n\t\r\n\tTHREE.Projector = function () {\r\n\t\r\n\t\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\t\r\n\t\tthis.projectVector = function ( vector, camera ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n\t\t\tvector.project( camera );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.unprojectVector = function ( vector, camera ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n\t\t\tvector.unproject( camera );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.pickingRay = function ( vector, camera ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CanvasRenderer = function () {\r\n\t\r\n\t\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\t\r\n\t\tthis.domElement = document.createElement( 'canvas' );\r\n\t\tthis.clear = function () {};\r\n\t\tthis.render = function () {};\r\n\t\tthis.setClearColor = function () {};\r\n\t\tthis.setSize = function () {};\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Color.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Color = function ( color ) {\r\n\t\r\n\t\tif ( arguments.length === 3 ) {\r\n\t\r\n\t\t\treturn this.setRGB( arguments[ 0 ], arguments[ 1 ], arguments[ 2 ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this.set( color );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Color.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Color,\r\n\t\r\n\t\tr: 1, g: 1, b: 1,\r\n\t\r\n\t\tset: function ( value ) {\r\n\t\r\n\t\t\tif ( value instanceof THREE.Color ) {\r\n\t\r\n\t\t\t\tthis.copy( value );\r\n\t\r\n\t\t\t} else if ( typeof value === 'number' ) {\r\n\t\r\n\t\t\t\tthis.setHex( value );\r\n\t\r\n\t\t\t} else if ( typeof value === 'string' ) {\r\n\t\r\n\t\t\t\tthis.setStyle( value );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetHex: function ( hex ) {\r\n\t\r\n\t\t\thex = Math.floor( hex );\r\n\t\r\n\t\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\t\tthis.b = ( hex & 255 ) / 255;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRGB: function ( r, g, b ) {\r\n\t\r\n\t\t\tthis.r = r;\r\n\t\t\tthis.g = g;\r\n\t\t\tthis.b = b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetHSL: function () {\r\n\t\r\n\t\t\tfunction hue2rgb ( p, q, t ) {\r\n\t\r\n\t\t\t\tif ( t < 0 ) t += 1;\r\n\t\t\t\tif ( t > 1 ) t -= 1;\r\n\t\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\t\t\t\tif ( t < 1 / 2 ) return q;\r\n\t\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\t\t\t\treturn p;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn function ( h, s, l ) {\r\n\t\r\n\t\t\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\t\t\th = THREE.Math.euclideanModulo( h, 1 );\r\n\t\t\t\ts = THREE.Math.clamp( s, 0, 1 );\r\n\t\t\t\tl = THREE.Math.clamp( l, 0, 1 );\r\n\t\r\n\t\t\t\tif ( s === 0 ) {\r\n\t\r\n\t\t\t\t\tthis.r = this.g = this.b = l;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\t\t\tvar q = ( 2 * l ) - p;\r\n\t\r\n\t\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tsetStyle: function ( style ) {\r\n\t\r\n\t\t\tvar parseAlpha = function ( strAlpha ) {\r\n\t\r\n\t\t\t\tvar alpha = parseFloat( strAlpha );\r\n\t\r\n\t\t\t\tif ( alpha < 1 ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of color ' + style + ' will be ignored.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn alpha;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\tvar m;\r\n\t\r\n\t\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\t\r\n\t\t\t\t// rgb / hsl\r\n\t\r\n\t\t\t\tvar color;\r\n\t\t\t\tvar name = m[ 1 ];\r\n\t\t\t\tvar components = m[ 2 ];\r\n\t\r\n\t\t\t\tswitch ( name ) {\r\n\t\r\n\t\t\t\t\tcase 'rgb':\r\n\t\r\n\t\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// rgb(255,0,0)\r\n\t\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\t\r\n\t\t\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// rgb(100%,0%,0%)\r\n\t\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\t\r\n\t\t\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'rgba':\r\n\t\r\n\t\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// rgba(255,0,0,0.5)\r\n\t\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\t\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\t\r\n\t\t\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\t\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\t\r\n\t\t\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'hsl':\r\n\t\r\n\t\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// hsl(120,50%,50%)\r\n\t\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] );\r\n\t\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\t\r\n\t\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'hsla':\r\n\t\r\n\t\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] );\r\n\t\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\t\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\t\r\n\t\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\t\r\n\t\t\t\t// hex color\r\n\t\r\n\t\t\t\tvar hex = m[ 1 ];\r\n\t\t\t\tvar size = hex.length;\r\n\t\r\n\t\t\t\tif ( size === 3 ) {\r\n\t\r\n\t\t\t\t\t// #ff0\r\n\t\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\t\r\n\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t} else if ( size === 6 ) {\r\n\t\r\n\t\t\t\t\t// #ff0000\r\n\t\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\t\r\n\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( style && style.length > 0 ) {\r\n\t\r\n\t\t\t\t// color keywords\r\n\t\t\t\tvar hex = THREE.ColorKeywords[ style ];\r\n\t\r\n\t\t\t\tif ( hex !== undefined ) {\r\n\t\r\n\t\t\t\t\t// red\r\n\t\t\t\t\tthis.setHex( hex );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// unknown color\r\n\t\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( color ) {\r\n\t\r\n\t\t\tthis.r = color.r;\r\n\t\t\tthis.g = color.g;\r\n\t\t\tthis.b = color.b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\t\r\n\t\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\t\r\n\t\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\t\r\n\t\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\t\r\n\t\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\t\r\n\t\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tconvertGammaToLinear: function () {\r\n\t\r\n\t\t\tvar r = this.r, g = this.g, b = this.b;\r\n\t\r\n\t\t\tthis.r = r * r;\r\n\t\t\tthis.g = g * g;\r\n\t\t\tthis.b = b * b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tconvertLinearToGamma: function () {\r\n\t\r\n\t\t\tthis.r = Math.sqrt( this.r );\r\n\t\t\tthis.g = Math.sqrt( this.g );\r\n\t\t\tthis.b = Math.sqrt( this.b );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetHex: function () {\r\n\t\r\n\t\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetHexString: function () {\r\n\t\r\n\t\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetHSL: function ( optionalTarget ) {\r\n\t\r\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\r\n\t\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\r\n\t\r\n\t\t\tvar r = this.r, g = this.g, b = this.b;\r\n\t\r\n\t\t\tvar max = Math.max( r, g, b );\r\n\t\t\tvar min = Math.min( r, g, b );\r\n\t\r\n\t\t\tvar hue, saturation;\r\n\t\t\tvar lightness = ( min + max ) / 2.0;\r\n\t\r\n\t\t\tif ( min === max ) {\r\n\t\r\n\t\t\t\thue = 0;\r\n\t\t\t\tsaturation = 0;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tvar delta = max - min;\r\n\t\r\n\t\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\t\r\n\t\t\t\tswitch ( max ) {\r\n\t\r\n\t\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\thue /= 6;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\thsl.h = hue;\r\n\t\t\thsl.s = saturation;\r\n\t\t\thsl.l = lightness;\r\n\t\r\n\t\t\treturn hsl;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetStyle: function () {\r\n\t\r\n\t\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\t\r\n\t\t},\r\n\t\r\n\t\toffsetHSL: function ( h, s, l ) {\r\n\t\r\n\t\t\tvar hsl = this.getHSL();\r\n\t\r\n\t\t\thsl.h += h; hsl.s += s; hsl.l += l;\r\n\t\r\n\t\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tadd: function ( color ) {\r\n\t\r\n\t\t\tthis.r += color.r;\r\n\t\t\tthis.g += color.g;\r\n\t\t\tthis.b += color.b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddColors: function ( color1, color2 ) {\r\n\t\r\n\t\t\tthis.r = color1.r + color2.r;\r\n\t\t\tthis.g = color1.g + color2.g;\r\n\t\t\tthis.b = color1.b + color2.b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.r += s;\r\n\t\t\tthis.g += s;\r\n\t\t\tthis.b += s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiply: function ( color ) {\r\n\t\r\n\t\t\tthis.r *= color.r;\r\n\t\t\tthis.g *= color.g;\r\n\t\t\tthis.b *= color.b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.r *= s;\r\n\t\t\tthis.g *= s;\r\n\t\t\tthis.b *= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerp: function ( color, alpha ) {\r\n\t\r\n\t\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( c ) {\r\n\t\r\n\t\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array ) {\r\n\t\r\n\t\t\tthis.r = array[ 0 ];\r\n\t\t\tthis.g = array[ 1 ];\r\n\t\t\tthis.b = array[ 2 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this.r;\r\n\t\t\tarray[ offset + 1 ] = this.g;\r\n\t\t\tarray[ offset + 2 ] = this.b;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\t\r\n\t// File:src/math/Quaternion.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Quaternion = function ( x, y, z, w ) {\r\n\t\r\n\t\tthis._x = x || 0;\r\n\t\tthis._y = y || 0;\r\n\t\tthis._z = z || 0;\r\n\t\tthis._w = ( w !== undefined ) ? w : 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Quaternion.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Quaternion,\r\n\t\r\n\t\tget x () {\r\n\t\r\n\t\t\treturn this._x;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset x ( value ) {\r\n\t\r\n\t\t\tthis._x = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget y () {\r\n\t\r\n\t\t\treturn this._y;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset y ( value ) {\r\n\t\r\n\t\t\tthis._y = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget z () {\r\n\t\r\n\t\t\treturn this._z;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset z ( value ) {\r\n\t\r\n\t\t\tthis._z = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget w () {\r\n\t\r\n\t\t\treturn this._w;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset w ( value ) {\r\n\t\r\n\t\t\tthis._w = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset: function ( x, y, z, w ) {\r\n\t\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\t\t\tthis._w = w;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( quaternion ) {\r\n\t\r\n\t\t\tthis._x = quaternion.x;\r\n\t\t\tthis._y = quaternion.y;\r\n\t\t\tthis._z = quaternion.z;\r\n\t\t\tthis._w = quaternion.w;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromEuler: function ( euler, update ) {\r\n\t\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\t\r\n\t\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t\t//\tcontent/SpinCalc.m\r\n\t\r\n\t\t\tvar c1 = Math.cos( euler._x / 2 );\r\n\t\t\tvar c2 = Math.cos( euler._y / 2 );\r\n\t\t\tvar c3 = Math.cos( euler._z / 2 );\r\n\t\t\tvar s1 = Math.sin( euler._x / 2 );\r\n\t\t\tvar s2 = Math.sin( euler._y / 2 );\r\n\t\t\tvar s3 = Math.sin( euler._z / 2 );\r\n\t\r\n\t\t\tvar order = euler.order;\r\n\t\r\n\t\t\tif ( order === 'XYZ' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\r\n\t\t\t} else if ( order === 'YXZ' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\r\n\t\t\t} else if ( order === 'ZXY' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\r\n\t\t\t} else if ( order === 'ZYX' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\r\n\t\t\t} else if ( order === 'YZX' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\r\n\t\t\t} else if ( order === 'XZY' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( update !== false ) this.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromAxisAngle: function ( axis, angle ) {\r\n\t\r\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\t\r\n\t\t\t// assumes axis is normalized\r\n\t\r\n\t\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\t\r\n\t\t\tthis._x = axis.x * s;\r\n\t\t\tthis._y = axis.y * s;\r\n\t\t\tthis._z = axis.z * s;\r\n\t\t\tthis._w = Math.cos( halfAngle );\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromRotationMatrix: function ( m ) {\r\n\t\r\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\t\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\t\r\n\t\t\tvar te = m.elements,\r\n\t\r\n\t\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\t\r\n\t\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\t\ts;\r\n\t\r\n\t\t\tif ( trace > 0 ) {\r\n\t\r\n\t\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\t\r\n\t\t\t\tthis._w = 0.25 / s;\r\n\t\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\t\r\n\t\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\t\r\n\t\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\t\r\n\t\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\t\tthis._x = 0.25 * s;\r\n\t\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\t\r\n\t\t\t} else if ( m22 > m33 ) {\r\n\t\r\n\t\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\t\r\n\t\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\t\tthis._y = 0.25 * s;\r\n\t\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\t\r\n\t\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\t\tthis._z = 0.25 * s;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromUnitVectors: function () {\r\n\t\r\n\t\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\r\n\t\r\n\t\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\t\r\n\t\t\tvar v1, r;\r\n\t\r\n\t\t\tvar EPS = 0.000001;\r\n\t\r\n\t\t\treturn function ( vFrom, vTo ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\r\n\t\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\t\r\n\t\t\t\tif ( r < EPS ) {\r\n\t\r\n\t\t\t\t\tr = 0;\r\n\t\r\n\t\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\t\r\n\t\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis._x = v1.x;\r\n\t\t\t\tthis._y = v1.y;\r\n\t\t\t\tthis._z = v1.z;\r\n\t\t\t\tthis._w = r;\r\n\t\r\n\t\t\t\tthis.normalize();\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tinverse: function () {\r\n\t\r\n\t\t\tthis.conjugate().normalize();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tconjugate: function () {\r\n\t\r\n\t\t\tthis._x *= - 1;\r\n\t\t\tthis._y *= - 1;\r\n\t\t\tthis._z *= - 1;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdot: function ( v ) {\r\n\t\r\n\t\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthSq: function () {\r\n\t\r\n\t\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlength: function () {\r\n\t\r\n\t\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\tvar l = this.length();\r\n\t\r\n\t\t\tif ( l === 0 ) {\r\n\t\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = 0;\r\n\t\t\t\tthis._w = 1;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tl = 1 / l;\r\n\t\r\n\t\t\t\tthis._x = this._x * l;\r\n\t\t\t\tthis._y = this._y * l;\r\n\t\t\t\tthis._z = this._z * l;\r\n\t\t\t\tthis._w = this._w * l;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiply: function ( q, p ) {\r\n\t\r\n\t\t\tif ( p !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\t\treturn this.multiplyQuaternions( q, p );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this.multiplyQuaternions( this, q );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyQuaternions: function ( a, b ) {\r\n\t\r\n\t\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\t\r\n\t\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\t\r\n\t\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector3: function ( vector ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\t\t\treturn vector.applyQuaternion( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tslerp: function ( qb, t ) {\r\n\t\r\n\t\t\tif ( t === 0 ) return this;\r\n\t\t\tif ( t === 1 ) return this.copy( qb );\r\n\t\r\n\t\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\t\r\n\t\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\t\r\n\t\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\t\r\n\t\t\tif ( cosHalfTheta < 0 ) {\r\n\t\r\n\t\t\t\tthis._w = - qb._w;\r\n\t\t\t\tthis._x = - qb._x;\r\n\t\t\t\tthis._y = - qb._y;\r\n\t\t\t\tthis._z = - qb._z;\r\n\t\r\n\t\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.copy( qb );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\t\r\n\t\t\t\tthis._w = w;\r\n\t\t\t\tthis._x = x;\r\n\t\t\t\tthis._y = y;\r\n\t\t\t\tthis._z = z;\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar halfTheta = Math.acos( cosHalfTheta );\r\n\t\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\t\r\n\t\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\t\r\n\t\t\t\tthis._w = 0.5 * ( w + this._w );\r\n\t\t\t\tthis._x = 0.5 * ( x + this._x );\r\n\t\t\t\tthis._y = 0.5 * ( y + this._y );\r\n\t\t\t\tthis._z = 0.5 * ( z + this._z );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\t\r\n\t\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( quaternion ) {\r\n\t\r\n\t\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis._x = array[ offset ];\r\n\t\t\tthis._y = array[ offset + 1 ];\r\n\t\t\tthis._z = array[ offset + 2 ];\r\n\t\t\tthis._w = array[ offset + 3 ];\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this._x;\r\n\t\t\tarray[ offset + 1 ] = this._y;\r\n\t\t\tarray[ offset + 2 ] = this._z;\r\n\t\t\tarray[ offset + 3 ] = this._w;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tonChange: function ( callback ) {\r\n\t\r\n\t\t\tthis.onChangeCallback = callback;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tonChangeCallback: function () {}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Quaternion.slerp = function ( qa, qb, qm, t ) {\r\n\t\r\n\t\treturn qm.copy( qa ).slerp( qb, t );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Vector2.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author philogb / http://blog.thejit.org/\r\n\t * @author egraether / http://egraether.com/\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t */\r\n\t\r\n\tTHREE.Vector2 = function ( x, y ) {\r\n\t\r\n\t\tthis.x = x || 0;\r\n\t\tthis.y = y || 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Vector2.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Vector2,\r\n\t\r\n\t\tset: function ( x, y ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetX: function ( x ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetY: function ( y ) {\r\n\t\r\n\t\t\tthis.y = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetComponent: function ( index, value ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: this.x = value; break;\r\n\t\t\t\tcase 1: this.y = value; break;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetComponent: function ( index ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: return this.x;\r\n\t\t\t\tcase 1: return this.y;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this.x, this.y );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( v ) {\r\n\t\r\n\t\t\tthis.x = v.x;\r\n\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tadd: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.addVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x += v.x;\r\n\t\t\tthis.y += v.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x += s;\r\n\t\t\tthis.y += s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x + b.x;\r\n\t\t\tthis.y = a.y + b.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScaledVector: function ( v, s ) {\r\n\t\r\n\t\t\tthis.x += v.x * s;\r\n\t\t\tthis.y += v.y * s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsub: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.subVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x -= v.x;\r\n\t\t\tthis.y -= v.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x -= s;\r\n\t\t\tthis.y -= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x - b.x;\r\n\t\t\tthis.y = a.y - b.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiply: function ( v ) {\r\n\t\r\n\t\t\tthis.x *= v.x;\r\n\t\t\tthis.y *= v.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x *= s;\r\n\t\t\tthis.y *= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdivide: function ( v ) {\r\n\t\r\n\t\t\tthis.x /= v.x;\r\n\t\t\tthis.y /= v.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdivideScalar: function ( scalar ) {\r\n\t\r\n\t\t\tif ( scalar !== 0 ) {\r\n\t\r\n\t\t\t\tvar invScalar = 1 / scalar;\r\n\t\r\n\t\t\t\tthis.x *= invScalar;\r\n\t\t\t\tthis.y *= invScalar;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.x = 0;\r\n\t\t\t\tthis.y = 0;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmin: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x > v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y > v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmax: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x < v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclamp: function ( min, max ) {\r\n\t\r\n\t\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\t\r\n\t\t\tif ( this.x < min.x ) {\r\n\t\r\n\t\t\t\tthis.x = min.x;\r\n\t\r\n\t\t\t} else if ( this.x > max.x ) {\r\n\t\r\n\t\t\t\tthis.x = max.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < min.y ) {\r\n\t\r\n\t\t\t\tthis.y = min.y;\r\n\t\r\n\t\t\t} else if ( this.y > max.y ) {\r\n\t\r\n\t\t\t\tthis.y = max.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampScalar: function () {\r\n\t\r\n\t\t\tvar min, max;\r\n\t\r\n\t\t\treturn function clampScalar( minVal, maxVal ) {\r\n\t\r\n\t\t\t\tif ( min === undefined ) {\r\n\t\r\n\t\t\t\t\tmin = new THREE.Vector2();\r\n\t\t\t\t\tmax = new THREE.Vector2();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tmin.set( minVal, minVal );\r\n\t\t\t\tmax.set( maxVal, maxVal );\r\n\t\r\n\t\t\t\treturn this.clamp( min, max );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tfloor: function () {\r\n\t\r\n\t\t\tthis.x = Math.floor( this.x );\r\n\t\t\tthis.y = Math.floor( this.y );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tceil: function () {\r\n\t\r\n\t\t\tthis.x = Math.ceil( this.x );\r\n\t\t\tthis.y = Math.ceil( this.y );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tround: function () {\r\n\t\r\n\t\t\tthis.x = Math.round( this.x );\r\n\t\t\tthis.y = Math.round( this.y );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\troundToZero: function () {\r\n\t\r\n\t\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnegate: function () {\r\n\t\r\n\t\t\tthis.x = - this.x;\r\n\t\t\tthis.y = - this.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdot: function ( v ) {\r\n\t\r\n\t\t\treturn this.x * v.x + this.y * v.y;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthSq: function () {\r\n\t\r\n\t\t\treturn this.x * this.x + this.y * this.y;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlength: function () {\r\n\t\r\n\t\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthManhattan: function() {\r\n\t\r\n\t\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\treturn this.divideScalar( this.length() );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceTo: function ( v ) {\r\n\t\r\n\t\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToSquared: function ( v ) {\r\n\t\r\n\t\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\t\treturn dx * dx + dy * dy;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetLength: function ( l ) {\r\n\t\r\n\t\t\tvar oldLength = this.length();\r\n\t\r\n\t\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\t\r\n\t\t\t\tthis.multiplyScalar( l / oldLength );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerp: function ( v, alpha ) {\r\n\t\r\n\t\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerpVectors: function ( v1, v2, alpha ) {\r\n\t\r\n\t\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( v ) {\r\n\t\r\n\t\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis.x = array[ offset ];\r\n\t\t\tthis.y = array[ offset + 1 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this.x;\r\n\t\t\tarray[ offset + 1 ] = this.y;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromAttribute: function ( attribute, index, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tindex = index * attribute.itemSize + offset;\r\n\t\r\n\t\t\tthis.x = attribute.array[ index ];\r\n\t\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Vector3.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author *kile / http://kile.stravaganza.org/\r\n\t * @author philogb / http://blog.thejit.org/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author egraether / http://egraether.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.Vector3 = function ( x, y, z ) {\r\n\t\r\n\t\tthis.x = x || 0;\r\n\t\tthis.y = y || 0;\r\n\t\tthis.z = z || 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Vector3.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Vector3,\r\n\t\r\n\t\tset: function ( x, y, z ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t\tthis.z = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetX: function ( x ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetY: function ( y ) {\r\n\t\r\n\t\t\tthis.y = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetZ: function ( z ) {\r\n\t\r\n\t\t\tthis.z = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetComponent: function ( index, value ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: this.x = value; break;\r\n\t\t\t\tcase 1: this.y = value; break;\r\n\t\t\t\tcase 2: this.z = value; break;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetComponent: function ( index ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: return this.x;\r\n\t\t\t\tcase 1: return this.y;\r\n\t\t\t\tcase 2: return this.z;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( v ) {\r\n\t\r\n\t\t\tthis.x = v.x;\r\n\t\t\tthis.y = v.y;\r\n\t\t\tthis.z = v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tadd: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.addVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x += v.x;\r\n\t\t\tthis.y += v.y;\r\n\t\t\tthis.z += v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x += s;\r\n\t\t\tthis.y += s;\r\n\t\t\tthis.z += s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x + b.x;\r\n\t\t\tthis.y = a.y + b.y;\r\n\t\t\tthis.z = a.z + b.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScaledVector: function ( v, s ) {\r\n\t\r\n\t\t\tthis.x += v.x * s;\r\n\t\t\tthis.y += v.y * s;\r\n\t\t\tthis.z += v.z * s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsub: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.subVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x -= v.x;\r\n\t\t\tthis.y -= v.y;\r\n\t\t\tthis.z -= v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x -= s;\r\n\t\t\tthis.y -= s;\r\n\t\t\tthis.z -= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x - b.x;\r\n\t\t\tthis.y = a.y - b.y;\r\n\t\t\tthis.z = a.z - b.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiply: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.multiplyVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x *= v.x;\r\n\t\t\tthis.y *= v.y;\r\n\t\t\tthis.z *= v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyScalar: function ( scalar ) {\r\n\t\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x * b.x;\r\n\t\t\tthis.y = a.y * b.y;\r\n\t\t\tthis.z = a.z * b.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyEuler: function () {\r\n\t\r\n\t\t\tvar quaternion;\r\n\t\r\n\t\t\treturn function applyEuler( euler ) {\r\n\t\r\n\t\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\t\r\n\t\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tapplyAxisAngle: function () {\r\n\t\r\n\t\t\tvar quaternion;\r\n\t\r\n\t\t\treturn function applyAxisAngle( axis, angle ) {\r\n\t\r\n\t\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\t\r\n\t\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tapplyMatrix3: function ( m ) {\r\n\t\r\n\t\t\tvar x = this.x;\r\n\t\t\tvar y = this.y;\r\n\t\t\tvar z = this.z;\r\n\t\r\n\t\t\tvar e = m.elements;\r\n\t\r\n\t\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function ( m ) {\r\n\t\r\n\t\t\t// input: THREE.Matrix4 affine matrix\r\n\t\r\n\t\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\r\n\t\t\tvar e = m.elements;\r\n\t\r\n\t\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\r\n\t\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\r\n\t\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyProjection: function ( m ) {\r\n\t\r\n\t\t\t// input: THREE.Matrix4 projection matrix\r\n\t\r\n\t\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\r\n\t\t\tvar e = m.elements;\r\n\t\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\r\n\t\r\n\t\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\r\n\t\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\r\n\t\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyQuaternion: function ( q ) {\r\n\t\r\n\t\t\tvar x = this.x;\r\n\t\t\tvar y = this.y;\r\n\t\t\tvar z = this.z;\r\n\t\r\n\t\t\tvar qx = q.x;\r\n\t\t\tvar qy = q.y;\r\n\t\t\tvar qz = q.z;\r\n\t\t\tvar qw = q.w;\r\n\t\r\n\t\t\t// calculate quat * vector\r\n\t\r\n\t\t\tvar ix =  qw * x + qy * z - qz * y;\r\n\t\t\tvar iy =  qw * y + qz * x - qx * z;\r\n\t\t\tvar iz =  qw * z + qx * y - qy * x;\r\n\t\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\t\r\n\t\t\t// calculate result * inverse quat\r\n\t\r\n\t\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tproject: function () {\r\n\t\r\n\t\t\tvar matrix;\r\n\t\r\n\t\t\treturn function project( camera ) {\r\n\t\r\n\t\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n\t\t\t\treturn this.applyProjection( matrix );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tunproject: function () {\r\n\t\r\n\t\t\tvar matrix;\r\n\t\r\n\t\t\treturn function unproject( camera ) {\r\n\t\r\n\t\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n\t\t\t\treturn this.applyProjection( matrix );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttransformDirection: function ( m ) {\r\n\t\r\n\t\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t\t// vector interpreted as a direction\r\n\t\r\n\t\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\r\n\t\t\tvar e = m.elements;\r\n\t\r\n\t\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\r\n\t\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\r\n\t\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\t\r\n\t\t\tthis.normalize();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdivide: function ( v ) {\r\n\t\r\n\t\t\tthis.x /= v.x;\r\n\t\t\tthis.y /= v.y;\r\n\t\t\tthis.z /= v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdivideScalar: function ( scalar ) {\r\n\t\r\n\t\t\tif ( scalar !== 0 ) {\r\n\t\r\n\t\t\t\tvar invScalar = 1 / scalar;\r\n\t\r\n\t\t\t\tthis.x *= invScalar;\r\n\t\t\t\tthis.y *= invScalar;\r\n\t\t\t\tthis.z *= invScalar;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.x = 0;\r\n\t\t\t\tthis.y = 0;\r\n\t\t\t\tthis.z = 0;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmin: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x > v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y > v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z > v.z ) {\r\n\t\r\n\t\t\t\tthis.z = v.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmax: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x < v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z < v.z ) {\r\n\t\r\n\t\t\t\tthis.z = v.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclamp: function ( min, max ) {\r\n\t\r\n\t\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\t\r\n\t\t\tif ( this.x < min.x ) {\r\n\t\r\n\t\t\t\tthis.x = min.x;\r\n\t\r\n\t\t\t} else if ( this.x > max.x ) {\r\n\t\r\n\t\t\t\tthis.x = max.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < min.y ) {\r\n\t\r\n\t\t\t\tthis.y = min.y;\r\n\t\r\n\t\t\t} else if ( this.y > max.y ) {\r\n\t\r\n\t\t\t\tthis.y = max.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z < min.z ) {\r\n\t\r\n\t\t\t\tthis.z = min.z;\r\n\t\r\n\t\t\t} else if ( this.z > max.z ) {\r\n\t\r\n\t\t\t\tthis.z = max.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampScalar: function () {\r\n\t\r\n\t\t\tvar min, max;\r\n\t\r\n\t\t\treturn function clampScalar( minVal, maxVal ) {\r\n\t\r\n\t\t\t\tif ( min === undefined ) {\r\n\t\r\n\t\t\t\t\tmin = new THREE.Vector3();\r\n\t\t\t\t\tmax = new THREE.Vector3();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\t\r\n\t\t\t\treturn this.clamp( min, max );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tfloor: function () {\r\n\t\r\n\t\t\tthis.x = Math.floor( this.x );\r\n\t\t\tthis.y = Math.floor( this.y );\r\n\t\t\tthis.z = Math.floor( this.z );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tceil: function () {\r\n\t\r\n\t\t\tthis.x = Math.ceil( this.x );\r\n\t\t\tthis.y = Math.ceil( this.y );\r\n\t\t\tthis.z = Math.ceil( this.z );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tround: function () {\r\n\t\r\n\t\t\tthis.x = Math.round( this.x );\r\n\t\t\tthis.y = Math.round( this.y );\r\n\t\t\tthis.z = Math.round( this.z );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\troundToZero: function () {\r\n\t\r\n\t\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnegate: function () {\r\n\t\r\n\t\t\tthis.x = - this.x;\r\n\t\t\tthis.y = - this.y;\r\n\t\t\tthis.z = - this.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdot: function ( v ) {\r\n\t\r\n\t\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthSq: function () {\r\n\t\r\n\t\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlength: function () {\r\n\t\r\n\t\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthManhattan: function () {\r\n\t\r\n\t\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\treturn this.divideScalar( this.length() );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetLength: function ( l ) {\r\n\t\r\n\t\t\tvar oldLength = this.length();\r\n\t\r\n\t\t\tif ( oldLength !== 0 && l !== oldLength  ) {\r\n\t\r\n\t\t\t\tthis.multiplyScalar( l / oldLength );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerp: function ( v, alpha ) {\r\n\t\r\n\t\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerpVectors: function ( v1, v2, alpha ) {\r\n\t\r\n\t\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcross: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.crossVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\r\n\t\t\tthis.x = y * v.z - z * v.y;\r\n\t\t\tthis.y = z * v.x - x * v.z;\r\n\t\t\tthis.z = x * v.y - y * v.x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcrossVectors: function ( a, b ) {\r\n\t\r\n\t\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\t\r\n\t\t\tthis.x = ay * bz - az * by;\r\n\t\t\tthis.y = az * bx - ax * bz;\r\n\t\t\tthis.z = ax * by - ay * bx;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tprojectOnVector: function () {\r\n\t\r\n\t\t\tvar v1, dot;\r\n\t\r\n\t\t\treturn function projectOnVector( vector ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\r\n\t\t\t\tv1.copy( vector ).normalize();\r\n\t\r\n\t\t\t\tdot = this.dot( v1 );\r\n\t\r\n\t\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tprojectOnPlane: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function projectOnPlane( planeNormal ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\r\n\t\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\t\r\n\t\t\t\treturn this.sub( v1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\treflect: function () {\r\n\t\r\n\t\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t\t// normal is assumed to have unit length\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function reflect( normal ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\r\n\t\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tangleTo: function ( v ) {\r\n\t\r\n\t\t\tvar theta = this.dot( v ) / ( this.length() * v.length() );\r\n\t\r\n\t\t\t// clamp, to handle numerical problems\r\n\t\r\n\t\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceTo: function ( v ) {\r\n\t\r\n\t\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToSquared: function ( v ) {\r\n\t\r\n\t\t\tvar dx = this.x - v.x;\r\n\t\t\tvar dy = this.y - v.y;\r\n\t\t\tvar dz = this.z - v.z;\r\n\t\r\n\t\t\treturn dx * dx + dy * dy + dz * dz;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetEulerFromRotationMatrix: function ( m, order ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetEulerFromQuaternion: function ( q, order ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetPositionFromMatrix: function ( m ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\t\r\n\t\t\treturn this.setFromMatrixPosition( m );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetScaleFromMatrix: function ( m ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\t\r\n\t\t\treturn this.setFromMatrixScale( m );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\t\r\n\t\t\treturn this.setFromMatrixColumn( index, matrix );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromMatrixPosition: function ( m ) {\r\n\t\r\n\t\t\tthis.x = m.elements[ 12 ];\r\n\t\t\tthis.y = m.elements[ 13 ];\r\n\t\t\tthis.z = m.elements[ 14 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromMatrixScale: function ( m ) {\r\n\t\r\n\t\t\tvar sx = this.set( m.elements[ 0 ], m.elements[ 1 ], m.elements[ 2 ] ).length();\r\n\t\t\tvar sy = this.set( m.elements[ 4 ], m.elements[ 5 ], m.elements[ 6 ] ).length();\r\n\t\t\tvar sz = this.set( m.elements[ 8 ], m.elements[ 9 ], m.elements[ 10 ] ).length();\r\n\t\r\n\t\t\tthis.x = sx;\r\n\t\t\tthis.y = sy;\r\n\t\t\tthis.z = sz;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromMatrixColumn: function ( index, matrix ) {\r\n\t\r\n\t\t\tvar offset = index * 4;\r\n\t\r\n\t\t\tvar me = matrix.elements;\r\n\t\r\n\t\t\tthis.x = me[ offset ];\r\n\t\t\tthis.y = me[ offset + 1 ];\r\n\t\t\tthis.z = me[ offset + 2 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( v ) {\r\n\t\r\n\t\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis.x = array[ offset ];\r\n\t\t\tthis.y = array[ offset + 1 ];\r\n\t\t\tthis.z = array[ offset + 2 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this.x;\r\n\t\t\tarray[ offset + 1 ] = this.y;\r\n\t\t\tarray[ offset + 2 ] = this.z;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromAttribute: function ( attribute, index, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tindex = index * attribute.itemSize + offset;\r\n\t\r\n\t\t\tthis.x = attribute.array[ index ];\r\n\t\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\t\tthis.z = attribute.array[ index + 2 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Vector4.js\r\n\t\r\n\t/**\r\n\t * @author supereggbert / http://www.paulbrunt.co.uk/\r\n\t * @author philogb / http://blog.thejit.org/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author egraether / http://egraether.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.Vector4 = function ( x, y, z, w ) {\r\n\t\r\n\t\tthis.x = x || 0;\r\n\t\tthis.y = y || 0;\r\n\t\tthis.z = z || 0;\r\n\t\tthis.w = ( w !== undefined ) ? w : 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Vector4.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Vector4,\r\n\t\r\n\t\tset: function ( x, y, z, w ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t\tthis.z = z;\r\n\t\t\tthis.w = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetX: function ( x ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetY: function ( y ) {\r\n\t\r\n\t\t\tthis.y = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetZ: function ( z ) {\r\n\t\r\n\t\t\tthis.z = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetW: function ( w ) {\r\n\t\r\n\t\t\tthis.w = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetComponent: function ( index, value ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: this.x = value; break;\r\n\t\t\t\tcase 1: this.y = value; break;\r\n\t\t\t\tcase 2: this.z = value; break;\r\n\t\t\t\tcase 3: this.w = value; break;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetComponent: function ( index ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: return this.x;\r\n\t\t\t\tcase 1: return this.y;\r\n\t\t\t\tcase 2: return this.z;\r\n\t\t\t\tcase 3: return this.w;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( v ) {\r\n\t\r\n\t\t\tthis.x = v.x;\r\n\t\t\tthis.y = v.y;\r\n\t\t\tthis.z = v.z;\r\n\t\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tadd: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.addVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x += v.x;\r\n\t\t\tthis.y += v.y;\r\n\t\t\tthis.z += v.z;\r\n\t\t\tthis.w += v.w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x += s;\r\n\t\t\tthis.y += s;\r\n\t\t\tthis.z += s;\r\n\t\t\tthis.w += s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x + b.x;\r\n\t\t\tthis.y = a.y + b.y;\r\n\t\t\tthis.z = a.z + b.z;\r\n\t\t\tthis.w = a.w + b.w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScaledVector: function ( v, s ) {\r\n\t\r\n\t\t\tthis.x += v.x * s;\r\n\t\t\tthis.y += v.y * s;\r\n\t\t\tthis.z += v.z * s;\r\n\t\t\tthis.w += v.w * s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsub: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.subVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x -= v.x;\r\n\t\t\tthis.y -= v.y;\r\n\t\t\tthis.z -= v.z;\r\n\t\t\tthis.w -= v.w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x -= s;\r\n\t\t\tthis.y -= s;\r\n\t\t\tthis.z -= s;\r\n\t\t\tthis.w -= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x - b.x;\r\n\t\t\tthis.y = a.y - b.y;\r\n\t\t\tthis.z = a.z - b.z;\r\n\t\t\tthis.w = a.w - b.w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyScalar: function ( scalar ) {\r\n\t\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\t\t\tthis.w *= scalar;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function ( m ) {\r\n\t\r\n\t\t\tvar x = this.x;\r\n\t\t\tvar y = this.y;\r\n\t\t\tvar z = this.z;\r\n\t\t\tvar w = this.w;\r\n\t\r\n\t\t\tvar e = m.elements;\r\n\t\r\n\t\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdivideScalar: function ( scalar ) {\r\n\t\r\n\t\t\tif ( scalar !== 0 ) {\r\n\t\r\n\t\t\t\tvar invScalar = 1 / scalar;\r\n\t\r\n\t\t\t\tthis.x *= invScalar;\r\n\t\t\t\tthis.y *= invScalar;\r\n\t\t\t\tthis.z *= invScalar;\r\n\t\t\t\tthis.w *= invScalar;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.x = 0;\r\n\t\t\t\tthis.y = 0;\r\n\t\t\t\tthis.z = 0;\r\n\t\t\t\tthis.w = 1;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\t\r\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\t\r\n\t\t\t// q is assumed to be normalized\r\n\t\r\n\t\t\tthis.w = 2 * Math.acos( q.w );\r\n\t\r\n\t\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\t\r\n\t\t\tif ( s < 0.0001 ) {\r\n\t\r\n\t\t\t\t this.x = 1;\r\n\t\t\t\t this.y = 0;\r\n\t\t\t\t this.z = 0;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t this.x = q.x / s;\r\n\t\t\t\t this.y = q.y / s;\r\n\t\t\t\t this.z = q.z / s;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\t\r\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\t\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\t\r\n\t\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\t\r\n\t\t\t\tte = m.elements,\r\n\t\r\n\t\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\t\r\n\t\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\r\n\t\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\r\n\t\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\t\r\n\t\t\t\t// singularity found\r\n\t\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t\t// in leading diagonal and zero in other terms\r\n\t\r\n\t\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\r\n\t\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\r\n\t\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\r\n\t\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\t\r\n\t\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\t\r\n\t\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\t\r\n\t\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// otherwise this singularity is angle = 180\r\n\t\r\n\t\t\t\tangle = Math.PI;\r\n\t\r\n\t\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\t\r\n\t\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\t\r\n\t\t\t\t\t// m11 is the largest diagonal term\r\n\t\r\n\t\t\t\t\tif ( xx < epsilon ) {\r\n\t\r\n\t\t\t\t\t\tx = 0;\r\n\t\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\t\tz = 0.707106781;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\t\tz = xz / x;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else if ( yy > zz ) {\r\n\t\r\n\t\t\t\t\t// m22 is the largest diagonal term\r\n\t\r\n\t\t\t\t\tif ( yy < epsilon ) {\r\n\t\r\n\t\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\t\ty = 0;\r\n\t\t\t\t\t\tz = 0.707106781;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\t\tz = yz / y;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\t\r\n\t\t\t\t\tif ( zz < epsilon ) {\r\n\t\r\n\t\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\t\tz = 0;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\t\ty = yz / z;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.set( x, y, z, angle );\r\n\t\r\n\t\t\t\treturn this; // return 180 deg rotation\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// as we have reached here there are no singularities so we can handle normally\r\n\t\r\n\t\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\r\n\t\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\r\n\t\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\t\r\n\t\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\t\r\n\t\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t\t// caught by singularity test above, but I've left it in just in case\r\n\t\r\n\t\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmin: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x > v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y > v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z > v.z ) {\r\n\t\r\n\t\t\t\tthis.z = v.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.w > v.w ) {\r\n\t\r\n\t\t\t\tthis.w = v.w;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmax: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x < v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z < v.z ) {\r\n\t\r\n\t\t\t\tthis.z = v.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.w < v.w ) {\r\n\t\r\n\t\t\t\tthis.w = v.w;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclamp: function ( min, max ) {\r\n\t\r\n\t\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\t\r\n\t\t\tif ( this.x < min.x ) {\r\n\t\r\n\t\t\t\tthis.x = min.x;\r\n\t\r\n\t\t\t} else if ( this.x > max.x ) {\r\n\t\r\n\t\t\t\tthis.x = max.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < min.y ) {\r\n\t\r\n\t\t\t\tthis.y = min.y;\r\n\t\r\n\t\t\t} else if ( this.y > max.y ) {\r\n\t\r\n\t\t\t\tthis.y = max.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z < min.z ) {\r\n\t\r\n\t\t\t\tthis.z = min.z;\r\n\t\r\n\t\t\t} else if ( this.z > max.z ) {\r\n\t\r\n\t\t\t\tthis.z = max.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.w < min.w ) {\r\n\t\r\n\t\t\t\tthis.w = min.w;\r\n\t\r\n\t\t\t} else if ( this.w > max.w ) {\r\n\t\r\n\t\t\t\tthis.w = max.w;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampScalar: function () {\r\n\t\r\n\t\t\tvar min, max;\r\n\t\r\n\t\t\treturn function clampScalar( minVal, maxVal ) {\r\n\t\r\n\t\t\t\tif ( min === undefined ) {\r\n\t\r\n\t\t\t\t\tmin = new THREE.Vector4();\r\n\t\t\t\t\tmax = new THREE.Vector4();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\t\r\n\t\t\t\treturn this.clamp( min, max );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tfloor: function () {\r\n\t\r\n\t\t\tthis.x = Math.floor( this.x );\r\n\t\t\tthis.y = Math.floor( this.y );\r\n\t\t\tthis.z = Math.floor( this.z );\r\n\t\t\tthis.w = Math.floor( this.w );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tceil: function () {\r\n\t\r\n\t\t\tthis.x = Math.ceil( this.x );\r\n\t\t\tthis.y = Math.ceil( this.y );\r\n\t\t\tthis.z = Math.ceil( this.z );\r\n\t\t\tthis.w = Math.ceil( this.w );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tround: function () {\r\n\t\r\n\t\t\tthis.x = Math.round( this.x );\r\n\t\t\tthis.y = Math.round( this.y );\r\n\t\t\tthis.z = Math.round( this.z );\r\n\t\t\tthis.w = Math.round( this.w );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\troundToZero: function () {\r\n\t\r\n\t\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnegate: function () {\r\n\t\r\n\t\t\tthis.x = - this.x;\r\n\t\t\tthis.y = - this.y;\r\n\t\t\tthis.z = - this.z;\r\n\t\t\tthis.w = - this.w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdot: function ( v ) {\r\n\t\r\n\t\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthSq: function () {\r\n\t\r\n\t\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlength: function () {\r\n\t\r\n\t\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthManhattan: function () {\r\n\t\r\n\t\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\treturn this.divideScalar( this.length() );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetLength: function ( l ) {\r\n\t\r\n\t\t\tvar oldLength = this.length();\r\n\t\r\n\t\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\t\r\n\t\t\t\tthis.multiplyScalar( l / oldLength );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerp: function ( v, alpha ) {\r\n\t\r\n\t\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerpVectors: function ( v1, v2, alpha ) {\r\n\t\r\n\t\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( v ) {\r\n\t\r\n\t\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis.x = array[ offset ];\r\n\t\t\tthis.y = array[ offset + 1 ];\r\n\t\t\tthis.z = array[ offset + 2 ];\r\n\t\t\tthis.w = array[ offset + 3 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this.x;\r\n\t\t\tarray[ offset + 1 ] = this.y;\r\n\t\t\tarray[ offset + 2 ] = this.z;\r\n\t\t\tarray[ offset + 3 ] = this.w;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromAttribute: function ( attribute, index, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tindex = index * attribute.itemSize + offset;\r\n\t\r\n\t\t\tthis.x = attribute.array[ index ];\r\n\t\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\t\tthis.z = attribute.array[ index + 2 ];\r\n\t\t\tthis.w = attribute.array[ index + 3 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Euler.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Euler = function ( x, y, z, order ) {\r\n\t\r\n\t\tthis._x = x || 0;\r\n\t\tthis._y = y || 0;\r\n\t\tthis._z = z || 0;\r\n\t\tthis._order = order || THREE.Euler.DefaultOrder;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\t\r\n\tTHREE.Euler.DefaultOrder = 'XYZ';\r\n\t\r\n\tTHREE.Euler.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Euler,\r\n\t\r\n\t\tget x () {\r\n\t\r\n\t\t\treturn this._x;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset x ( value ) {\r\n\t\r\n\t\t\tthis._x = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget y () {\r\n\t\r\n\t\t\treturn this._y;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset y ( value ) {\r\n\t\r\n\t\t\tthis._y = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget z () {\r\n\t\r\n\t\t\treturn this._z;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset z ( value ) {\r\n\t\r\n\t\t\tthis._z = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget order () {\r\n\t\r\n\t\t\treturn this._order;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset order ( value ) {\r\n\t\r\n\t\t\tthis._order = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset: function ( x, y, z, order ) {\r\n\t\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\t\t\tthis._order = order || this._order;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this._x, this._y, this._z, this._order);\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( euler ) {\r\n\t\r\n\t\t\tthis._x = euler._x;\r\n\t\t\tthis._y = euler._y;\r\n\t\t\tthis._z = euler._z;\r\n\t\t\tthis._order = euler._order;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\t\r\n\t\t\tvar clamp = THREE.Math.clamp;\r\n\t\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\t\r\n\t\t\tvar te = m.elements;\r\n\t\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\t\r\n\t\t\torder = order || this._order;\r\n\t\r\n\t\t\tif ( order === 'XYZ' ) {\r\n\t\r\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._z = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( order === 'YXZ' ) {\r\n\t\r\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\t\tthis._z = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( order === 'ZXY' ) {\r\n\t\r\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._y = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( order === 'ZYX' ) {\r\n\t\r\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( order === 'YZX' ) {\r\n\t\r\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( order === 'XZY' ) {\r\n\t\r\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._y = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order )\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis._order = order;\r\n\t\r\n\t\t\tif ( update !== false ) this.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromQuaternion: function () {\r\n\t\r\n\t\t\tvar matrix;\r\n\t\r\n\t\t\treturn function ( q, order, update ) {\r\n\t\r\n\t\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\t\t\tmatrix.makeRotationFromQuaternion( q );\r\n\t\t\t\tthis.setFromRotationMatrix( matrix, order, update );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tsetFromVector3: function ( v, order ) {\r\n\t\r\n\t\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\t\r\n\t\t},\r\n\t\r\n\t\treorder: function () {\r\n\t\r\n\t\t\t// WARNING: this discards revolution information -bhouston\r\n\t\r\n\t\t\tvar q = new THREE.Quaternion();\r\n\t\r\n\t\t\treturn function ( newOrder ) {\r\n\t\r\n\t\t\t\tq.setFromEuler( this );\r\n\t\t\t\tthis.setFromQuaternion( q, newOrder );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tequals: function ( euler ) {\r\n\t\r\n\t\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array ) {\r\n\t\r\n\t\t\tthis._x = array[ 0 ];\r\n\t\t\tthis._y = array[ 1 ];\r\n\t\t\tthis._z = array[ 2 ];\r\n\t\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this._x;\r\n\t\t\tarray[ offset + 1 ] = this._y;\r\n\t\t\tarray[ offset + 2 ] = this._z;\r\n\t\t\tarray[ offset + 3 ] = this._order;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoVector3: function ( optionalResult ) {\r\n\t\r\n\t\t\tif ( optionalResult ) {\r\n\t\r\n\t\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tonChange: function ( callback ) {\r\n\t\r\n\t\t\tthis.onChangeCallback = callback;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tonChangeCallback: function () {}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Line3.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Line3 = function ( start, end ) {\r\n\t\r\n\t\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\r\n\t\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Line3.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Line3,\r\n\t\r\n\t\tset: function ( start, end ) {\r\n\t\r\n\t\t\tthis.start.copy( start );\r\n\t\t\tthis.end.copy( end );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( line ) {\r\n\t\r\n\t\t\tthis.start.copy( line.start );\r\n\t\t\tthis.end.copy( line.end );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcenter: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdelta: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.subVectors( this.end, this.start );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceSq: function () {\r\n\t\r\n\t\t\treturn this.start.distanceToSquared( this.end );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistance: function () {\r\n\t\r\n\t\t\treturn this.start.distanceTo( this.end );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tat: function ( t, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclosestPointToPointParameter: function () {\r\n\t\r\n\t\t\tvar startP = new THREE.Vector3();\r\n\t\t\tvar startEnd = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( point, clampToLine ) {\r\n\t\r\n\t\t\t\tstartP.subVectors( point, this.start );\r\n\t\t\t\tstartEnd.subVectors( this.end, this.start );\r\n\t\r\n\t\t\t\tvar startEnd2 = startEnd.dot( startEnd );\r\n\t\t\t\tvar startEnd_startP = startEnd.dot( startP );\r\n\t\r\n\t\t\t\tvar t = startEnd_startP / startEnd2;\r\n\t\r\n\t\t\t\tif ( clampToLine ) {\r\n\t\r\n\t\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn t;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\r\n\t\r\n\t\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function ( matrix ) {\r\n\t\r\n\t\t\tthis.start.applyMatrix4( matrix );\r\n\t\t\tthis.end.applyMatrix4( matrix );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( line ) {\r\n\t\r\n\t\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Box2.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Box2 = function ( min, max ) {\r\n\t\r\n\t\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( Infinity, Infinity );\r\n\t\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Box2.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Box2,\r\n\t\r\n\t\tset: function ( min, max ) {\r\n\t\r\n\t\t\tthis.min.copy( min );\r\n\t\t\tthis.max.copy( max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromPoints: function ( points ) {\r\n\t\r\n\t\t\tthis.makeEmpty();\r\n\t\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.expandByPoint( points[ i ] )\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromCenterAndSize: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector2();\r\n\t\r\n\t\t\treturn function ( center, size ) {\r\n\t\r\n\t\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\t\tthis.max.copy( center ).add( halfSize );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( box ) {\r\n\t\r\n\t\t\tthis.min.copy( box.min );\r\n\t\t\tthis.max.copy( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeEmpty: function () {\r\n\t\r\n\t\t\tthis.min.x = this.min.y = Infinity;\r\n\t\t\tthis.max.x = this.max.y = - Infinity;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tempty: function () {\r\n\t\r\n\t\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\t\r\n\t\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcenter: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsize: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\t\treturn result.subVectors( this.max, this.min );\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByPoint: function ( point ) {\r\n\t\r\n\t\t\tthis.min.min( point );\r\n\t\t\tthis.max.max( point );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByVector: function ( vector ) {\r\n\t\r\n\t\t\tthis.min.sub( vector );\r\n\t\t\tthis.max.add( vector );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByScalar: function ( scalar ) {\r\n\t\r\n\t\t\tthis.min.addScalar( - scalar );\r\n\t\t\tthis.max.addScalar( scalar );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsPoint: function ( point ) {\r\n\t\r\n\t\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\t     point.y < this.min.y || point.y > this.max.y ) {\r\n\t\r\n\t\t\t\treturn false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsBox: function ( box ) {\r\n\t\r\n\t\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetParameter: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\t// This can potentially have a divide by zero if the box\r\n\t\t\t// has a size dimension of 0.\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\r\n\t\t\treturn result.set(\r\n\t\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t\t);\r\n\t\r\n\t\t},\r\n\t\r\n\t\tisIntersectionBox: function ( box ) {\r\n\t\r\n\t\t\t// using 6 splitting planes to rule out intersections.\r\n\t\r\n\t\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\r\n\t\r\n\t\t\t\treturn false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPoint: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector2();\r\n\t\r\n\t\t\treturn function ( point ) {\r\n\t\r\n\t\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\t\treturn clampedPoint.sub( point ).length();\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tintersect: function ( box ) {\r\n\t\r\n\t\t\tthis.min.max( box.min );\r\n\t\t\tthis.max.min( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tunion: function ( box ) {\r\n\t\r\n\t\t\tthis.min.min( box.min );\r\n\t\t\tthis.max.max( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranslate: function ( offset ) {\r\n\t\r\n\t\t\tthis.min.add( offset );\r\n\t\t\tthis.max.add( offset );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( box ) {\r\n\t\r\n\t\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Box3.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.Box3 = function ( min, max ) {\r\n\t\r\n\t\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( Infinity, Infinity, Infinity );\r\n\t\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Box3.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Box3,\r\n\t\r\n\t\tset: function ( min, max ) {\r\n\t\r\n\t\t\tthis.min.copy( min );\r\n\t\t\tthis.max.copy( max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromPoints: function ( points ) {\r\n\t\r\n\t\t\tthis.makeEmpty();\r\n\t\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.expandByPoint( points[ i ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromCenterAndSize: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( center, size ) {\r\n\t\r\n\t\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\r\n\t\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\t\tthis.max.copy( center ).add( halfSize );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tsetFromObject: function () {\r\n\t\r\n\t\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t\t// accounting for both the object's, and children's, world transforms\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( object ) {\r\n\t\r\n\t\t\t\tvar scope = this;\r\n\t\r\n\t\t\t\tobject.updateMatrixWorld( true );\r\n\t\r\n\t\t\t\tthis.makeEmpty();\r\n\t\r\n\t\t\t\tobject.traverse( function ( node ) {\r\n\t\r\n\t\t\t\t\tvar geometry = node.geometry;\r\n\t\r\n\t\t\t\t\tif ( geometry !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\t\t\t\tvar vertices = geometry.vertices;\r\n\t\r\n\t\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\r\n\t\r\n\t\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\t\r\n\t\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\r\n\t\r\n\t\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\t\tv1.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\t\r\n\t\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\t\r\n\t\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( box ) {\r\n\t\r\n\t\t\tthis.min.copy( box.min );\r\n\t\t\tthis.max.copy( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeEmpty: function () {\r\n\t\r\n\t\t\tthis.min.x = this.min.y = this.min.z = Infinity;\r\n\t\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tempty: function () {\r\n\t\r\n\t\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\t\r\n\t\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcenter: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsize: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.subVectors( this.max, this.min );\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByPoint: function ( point ) {\r\n\t\r\n\t\t\tthis.min.min( point );\r\n\t\t\tthis.max.max( point );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByVector: function ( vector ) {\r\n\t\r\n\t\t\tthis.min.sub( vector );\r\n\t\t\tthis.max.add( vector );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByScalar: function ( scalar ) {\r\n\t\r\n\t\t\tthis.min.addScalar( - scalar );\r\n\t\t\tthis.max.addScalar( scalar );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsPoint: function ( point ) {\r\n\t\r\n\t\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\t     point.y < this.min.y || point.y > this.max.y ||\r\n\t\t\t     point.z < this.min.z || point.z > this.max.z ) {\r\n\t\r\n\t\t\t\treturn false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsBox: function ( box ) {\r\n\t\r\n\t\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\r\n\t\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetParameter: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\t// This can potentially have a divide by zero if the box\r\n\t\t\t// has a size dimension of 0.\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\treturn result.set(\r\n\t\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t\t);\r\n\t\r\n\t\t},\r\n\t\r\n\t\tisIntersectionBox: function ( box ) {\r\n\t\r\n\t\t\t// using 6 splitting planes to rule out intersections.\r\n\t\r\n\t\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\t     box.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t\t     box.max.z < this.min.z || box.min.z > this.max.z ) {\r\n\t\r\n\t\t\t\treturn false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPoint: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( point ) {\r\n\t\r\n\t\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\t\treturn clampedPoint.sub( point ).length();\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tgetBoundingSphere: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Sphere();\r\n\t\r\n\t\t\t\tresult.center = this.center();\r\n\t\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\r\n\t\r\n\t\t\t\treturn result;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tintersect: function ( box ) {\r\n\t\r\n\t\t\tthis.min.max( box.min );\r\n\t\t\tthis.max.min( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tunion: function ( box ) {\r\n\t\r\n\t\t\tthis.min.min( box.min );\r\n\t\t\tthis.max.max( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function () {\r\n\t\r\n\t\t\tvar points = [\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3()\r\n\t\t\t];\r\n\t\r\n\t\t\treturn function ( matrix ) {\r\n\t\r\n\t\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );  // 111\r\n\t\r\n\t\t\t\tthis.makeEmpty();\r\n\t\t\t\tthis.setFromPoints( points );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslate: function ( offset ) {\r\n\t\r\n\t\t\tthis.min.add( offset );\r\n\t\t\tthis.max.add( offset );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( box ) {\r\n\t\r\n\t\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Matrix3.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Matrix3 = function () {\r\n\t\r\n\t\tthis.elements = new Float32Array( [\r\n\t\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\t\r\n\t\t] );\r\n\t\r\n\t\tif ( arguments.length > 0 ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Matrix3.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Matrix3,\r\n\t\r\n\t\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 0 ] = n11; te[ 3 ] = n12; te[ 6 ] = n13;\r\n\t\t\tte[ 1 ] = n21; te[ 4 ] = n22; te[ 7 ] = n23;\r\n\t\t\tte[ 2 ] = n31; te[ 5 ] = n32; te[ 8 ] = n33;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tidentity: function () {\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\t1, 0, 0,\r\n\t\t\t\t0, 1, 0,\r\n\t\t\t\t0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().fromArray( this.elements );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( m ) {\r\n\t\r\n\t\t\tvar me = m.elements;\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\r\n\t\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\r\n\t\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector3: function ( vector ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix3( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector3Array: function ( a ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\t\treturn this.applyToVector3Array( a );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyToVector3Array: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function ( array, offset, length ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\t\tif ( length === undefined ) length = array.length;\r\n\t\r\n\t\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\t\r\n\t\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\t\tv1.applyMatrix3( this );\r\n\t\t\t\t\tv1.toArray( array, j );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn array;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tapplyToBuffer: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\t\r\n\t\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\t\r\n\t\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\t\tv1.z = buffer.getZ( j );\r\n\t\r\n\t\t\t\t\tv1.applyMatrix3( this );\r\n\t\r\n\t\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn buffer;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tmultiplyScalar: function ( s ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdeterminant: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\t\r\n\t\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetInverse: function ( matrix, throwOnInvertible ) {\r\n\t\r\n\t\t\t// input: THREE.Matrix4\r\n\t\t\t// ( based on http://code.google.com/p/webgl-mjs/ )\r\n\t\r\n\t\t\tvar me = matrix.elements;\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 0 ] =   me[ 10 ] * me[ 5 ] - me[ 6 ] * me[ 9 ];\r\n\t\t\tte[ 1 ] = - me[ 10 ] * me[ 1 ] + me[ 2 ] * me[ 9 ];\r\n\t\t\tte[ 2 ] =   me[ 6 ] * me[ 1 ] - me[ 2 ] * me[ 5 ];\r\n\t\t\tte[ 3 ] = - me[ 10 ] * me[ 4 ] + me[ 6 ] * me[ 8 ];\r\n\t\t\tte[ 4 ] =   me[ 10 ] * me[ 0 ] - me[ 2 ] * me[ 8 ];\r\n\t\t\tte[ 5 ] = - me[ 6 ] * me[ 0 ] + me[ 2 ] * me[ 4 ];\r\n\t\t\tte[ 6 ] =   me[ 9 ] * me[ 4 ] - me[ 5 ] * me[ 8 ];\r\n\t\t\tte[ 7 ] = - me[ 9 ] * me[ 0 ] + me[ 1 ] * me[ 8 ];\r\n\t\t\tte[ 8 ] =   me[ 5 ] * me[ 0 ] - me[ 1 ] * me[ 4 ];\r\n\t\r\n\t\t\tvar det = me[ 0 ] * te[ 0 ] + me[ 1 ] * te[ 3 ] + me[ 2 ] * te[ 6 ];\r\n\t\r\n\t\t\t// no inverse\r\n\t\r\n\t\t\tif ( det === 0 ) {\r\n\t\r\n\t\t\t\tvar msg = \"Matrix3.getInverse(): can't invert matrix, determinant is 0\";\r\n\t\r\n\t\t\t\tif ( throwOnInvertible || false ) {\r\n\t\r\n\t\t\t\t\tthrow new Error( msg );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tconsole.warn( msg );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.identity();\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.multiplyScalar( 1.0 / det );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranspose: function () {\r\n\t\r\n\t\t\tvar tmp, m = this.elements;\r\n\t\r\n\t\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tflattenToArrayOffset: function ( array, offset ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tarray[ offset ] = te[ 0 ];\r\n\t\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\r\n\t\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\r\n\t\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetNormalMatrix: function ( m ) {\r\n\t\r\n\t\t\t// input: THREE.Matrix4\r\n\t\r\n\t\t\tthis.getInverse( m ).transpose();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttransposeIntoArray: function ( r ) {\r\n\t\r\n\t\t\tvar m = this.elements;\r\n\t\r\n\t\t\tr[ 0 ] = m[ 0 ];\r\n\t\t\tr[ 1 ] = m[ 3 ];\r\n\t\t\tr[ 2 ] = m[ 6 ];\r\n\t\t\tr[ 3 ] = m[ 1 ];\r\n\t\t\tr[ 4 ] = m[ 4 ];\r\n\t\t\tr[ 5 ] = m[ 7 ];\r\n\t\t\tr[ 6 ] = m[ 2 ];\r\n\t\t\tr[ 7 ] = m[ 5 ];\r\n\t\t\tr[ 8 ] = m[ 8 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array ) {\r\n\t\r\n\t\t\tthis.elements.set( array );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\treturn [\r\n\t\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\r\n\t\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\r\n\t\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\r\n\t\t\t];\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Matrix4.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author supereggbert / http://www.paulbrunt.co.uk/\r\n\t * @author philogb / http://blog.thejit.org/\r\n\t * @author jordi_ros / http://plattsoft.com\r\n\t * @author D1plo1d / http://github.com/D1plo1d\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author timknip / http://www.floorplanner.com/\r\n\t * @author bhouston / http://exocortex.com\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.Matrix4 = function () {\r\n\t\r\n\t\tthis.elements = new Float32Array( [\r\n\t\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\t\r\n\t\t] );\r\n\t\r\n\t\tif ( arguments.length > 0 ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Matrix4.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Matrix4,\r\n\t\r\n\t\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tidentity: function () {\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\t1, 0, 0, 0,\r\n\t\t\t\t0, 1, 0, 0,\r\n\t\t\t\t0, 0, 1, 0,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new THREE.Matrix4().fromArray( this.elements );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( m ) {\r\n\t\r\n\t\t\tthis.elements.set( m.elements );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\textractPosition: function ( m ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\t\treturn this.copyPosition( m );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyPosition: function ( m ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\t\r\n\t\t\tte[ 12 ] = me[ 12 ];\r\n\t\t\tte[ 13 ] = me[ 13 ];\r\n\t\t\tte[ 14 ] = me[ 14 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\txAxis.set( te[ 0 ], te[ 1 ], te[ 2 ] );\r\n\t\t\tyAxis.set( te[ 4 ], te[ 5 ], te[ 6 ] );\r\n\t\t\tzAxis.set( te[ 8 ], te[ 9 ], te[ 10 ] );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\t\r\n\t\t\tthis.set(\r\n\t\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t\t0,       0,       0,       1\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\textractRotation: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function ( m ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\r\n\t\t\t\tvar te = this.elements;\r\n\t\t\t\tvar me = m.elements;\r\n\t\r\n\t\t\t\tvar scaleX = 1 / v1.set( me[ 0 ], me[ 1 ], me[ 2 ] ).length();\r\n\t\t\t\tvar scaleY = 1 / v1.set( me[ 4 ], me[ 5 ], me[ 6 ] ).length();\r\n\t\t\t\tvar scaleZ = 1 / v1.set( me[ 8 ], me[ 9 ], me[ 10 ] ).length();\r\n\t\r\n\t\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\t\r\n\t\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\t\r\n\t\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tmakeRotationFromEuler: function ( euler ) {\r\n\t\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\t\r\n\t\t\tif ( euler.order === 'XYZ' ) {\r\n\t\r\n\t\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\t\r\n\t\t\t\tte[ 0 ] = c * e;\r\n\t\t\t\tte[ 4 ] = - c * f;\r\n\t\t\t\tte[ 8 ] = d;\r\n\t\r\n\t\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\t\tte[ 9 ] = - b * c;\r\n\t\r\n\t\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\t\tte[ 10 ] = a * c;\r\n\t\r\n\t\t\t} else if ( euler.order === 'YXZ' ) {\r\n\t\r\n\t\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\t\r\n\t\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\t\tte[ 8 ] = a * d;\r\n\t\r\n\t\t\t\tte[ 1 ] = a * f;\r\n\t\t\t\tte[ 5 ] = a * e;\r\n\t\t\t\tte[ 9 ] = - b;\r\n\t\r\n\t\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\t\tte[ 10 ] = a * c;\r\n\t\r\n\t\t\t} else if ( euler.order === 'ZXY' ) {\r\n\t\r\n\t\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\t\r\n\t\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\t\tte[ 4 ] = - a * f;\r\n\t\t\t\tte[ 8 ] = de + cf * b;\r\n\t\r\n\t\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\t\tte[ 5 ] = a * e;\r\n\t\t\t\tte[ 9 ] = df - ce * b;\r\n\t\r\n\t\t\t\tte[ 2 ] = - a * d;\r\n\t\t\t\tte[ 6 ] = b;\r\n\t\t\t\tte[ 10 ] = a * c;\r\n\t\r\n\t\t\t} else if ( euler.order === 'ZYX' ) {\r\n\t\r\n\t\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\t\r\n\t\t\t\tte[ 0 ] = c * e;\r\n\t\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\t\tte[ 8 ] = ae * d + bf;\r\n\t\r\n\t\t\t\tte[ 1 ] = c * f;\r\n\t\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\t\tte[ 9 ] = af * d - be;\r\n\t\r\n\t\t\t\tte[ 2 ] = - d;\r\n\t\t\t\tte[ 6 ] = b * c;\r\n\t\t\t\tte[ 10 ] = a * c;\r\n\t\r\n\t\t\t} else if ( euler.order === 'YZX' ) {\r\n\t\r\n\t\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\t\r\n\t\t\t\tte[ 0 ] = c * e;\r\n\t\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\t\tte[ 8 ] = bc * f + ad;\r\n\t\r\n\t\t\t\tte[ 1 ] = f;\r\n\t\t\t\tte[ 5 ] = a * e;\r\n\t\t\t\tte[ 9 ] = - b * e;\r\n\t\r\n\t\t\t\tte[ 2 ] = - d * e;\r\n\t\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\t\tte[ 10 ] = ac - bd * f;\r\n\t\r\n\t\t\t} else if ( euler.order === 'XZY' ) {\r\n\t\r\n\t\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\t\r\n\t\t\t\tte[ 0 ] = c * e;\r\n\t\t\t\tte[ 4 ] = - f;\r\n\t\t\t\tte[ 8 ] = d * e;\r\n\t\r\n\t\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\t\tte[ 5 ] = a * e;\r\n\t\t\t\tte[ 9 ] = ad * f - bc;\r\n\t\r\n\t\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\t\tte[ 6 ] = b * e;\r\n\t\t\t\tte[ 10 ] = bd * f + ac;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// last column\r\n\t\t\tte[ 3 ] = 0;\r\n\t\t\tte[ 7 ] = 0;\r\n\t\t\tte[ 11 ] = 0;\r\n\t\r\n\t\t\t// bottom row\r\n\t\t\tte[ 12 ] = 0;\r\n\t\t\tte[ 13 ] = 0;\r\n\t\t\tte[ 14 ] = 0;\r\n\t\t\tte[ 15 ] = 1;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRotationFromQuaternion: function ( q ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\t\r\n\t\t\treturn this.makeRotationFromQuaternion( q );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeRotationFromQuaternion: function ( q ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\r\n\t\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\r\n\t\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\t\r\n\t\t\tte[ 0 ] = 1 - ( yy + zz );\r\n\t\t\tte[ 4 ] = xy - wz;\r\n\t\t\tte[ 8 ] = xz + wy;\r\n\t\r\n\t\t\tte[ 1 ] = xy + wz;\r\n\t\t\tte[ 5 ] = 1 - ( xx + zz );\r\n\t\t\tte[ 9 ] = yz - wx;\r\n\t\r\n\t\t\tte[ 2 ] = xz - wy;\r\n\t\t\tte[ 6 ] = yz + wx;\r\n\t\t\tte[ 10 ] = 1 - ( xx + yy );\r\n\t\r\n\t\t\t// last column\r\n\t\t\tte[ 3 ] = 0;\r\n\t\t\tte[ 7 ] = 0;\r\n\t\t\tte[ 11 ] = 0;\r\n\t\r\n\t\t\t// bottom row\r\n\t\t\tte[ 12 ] = 0;\r\n\t\t\tte[ 13 ] = 0;\r\n\t\t\tte[ 14 ] = 0;\r\n\t\t\tte[ 15 ] = 1;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlookAt: function () {\r\n\t\r\n\t\t\tvar x, y, z;\r\n\t\r\n\t\t\treturn function ( eye, target, up ) {\r\n\t\r\n\t\t\t\tif ( x === undefined ) x = new THREE.Vector3();\r\n\t\t\t\tif ( y === undefined ) y = new THREE.Vector3();\r\n\t\t\t\tif ( z === undefined ) z = new THREE.Vector3();\r\n\t\r\n\t\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\t\tz.subVectors( eye, target ).normalize();\r\n\t\r\n\t\t\t\tif ( z.length() === 0 ) {\r\n\t\r\n\t\t\t\t\tz.z = 1;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\t\r\n\t\t\t\tif ( x.length() === 0 ) {\r\n\t\r\n\t\t\t\t\tz.x += 0.0001;\r\n\t\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\ty.crossVectors( z, x );\r\n\t\r\n\t\r\n\t\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tmultiply: function ( m, n ) {\r\n\t\r\n\t\t\tif ( n !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\t\treturn this.multiplyMatrices( m, n );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this.multiplyMatrices( this, m );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyMatrices: function ( a, b ) {\r\n\t\r\n\t\t\tvar ae = a.elements;\r\n\t\t\tvar be = b.elements;\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\t\r\n\t\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\t\r\n\t\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\t\r\n\t\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\t\r\n\t\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\t\r\n\t\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyToArray: function ( a, b, r ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tthis.multiplyMatrices( a, b );\r\n\t\r\n\t\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\r\n\t\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\r\n\t\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\r\n\t\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyScalar: function ( s ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector3: function ( vector ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\r\n\t\t\treturn vector.applyProjection( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector4: function ( vector ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix4( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector3Array: function ( a ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\t\treturn this.applyToVector3Array( a );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyToVector3Array: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function ( array, offset, length ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\t\tif ( length === undefined ) length = array.length;\r\n\t\r\n\t\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\t\r\n\t\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\t\tv1.applyMatrix4( this );\r\n\t\t\t\t\tv1.toArray( array, j );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn array;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tapplyToBuffer: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\t\r\n\t\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\t\r\n\t\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\t\tv1.z = buffer.getZ( j );\r\n\t\r\n\t\t\t\t\tv1.applyMatrix4( this );\r\n\t\r\n\t\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn buffer;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateAxis: function ( v ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\t\r\n\t\t\tv.transformDirection( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcrossVector: function ( vector ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix4( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdeterminant: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\t\r\n\t\t\t//TODO: make this more efficient\r\n\t\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\t\r\n\t\t\treturn (\r\n\t\t\t\tn41 * (\r\n\t\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t\t - n12 * n23 * n34\r\n\t\t\t\t) +\r\n\t\t\t\tn42 * (\r\n\t\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t\t - n14 * n23 * n31\r\n\t\t\t\t) +\r\n\t\t\t\tn43 * (\r\n\t\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t\t - n12 * n24 * n31\r\n\t\t\t\t) +\r\n\t\t\t\tn44 * (\r\n\t\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t\t + n12 * n23 * n31\r\n\t\t\t\t)\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranspose: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar tmp;\r\n\t\r\n\t\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\t\r\n\t\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tflattenToArrayOffset: function ( array, offset ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tarray[ offset ] = te[ 0 ];\r\n\t\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\r\n\t\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\r\n\t\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\t\tarray[ offset + 9 ]  = te[ 9 ];\r\n\t\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\t\r\n\t\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetPosition: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function () {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\t\r\n\t\t\t\tvar te = this.elements;\r\n\t\t\t\treturn v1.set( te[ 12 ], te[ 13 ], te[ 14 ] );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tsetPosition: function ( v ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 12 ] = v.x;\r\n\t\t\tte[ 13 ] = v.y;\r\n\t\t\tte[ 14 ] = v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetInverse: function ( m, throwOnInvertible ) {\r\n\t\r\n\t\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\t\r\n\t\t\tvar n11 = me[ 0 ], n12 = me[ 4 ], n13 = me[ 8 ], n14 = me[ 12 ];\r\n\t\t\tvar n21 = me[ 1 ], n22 = me[ 5 ], n23 = me[ 9 ], n24 = me[ 13 ];\r\n\t\t\tvar n31 = me[ 2 ], n32 = me[ 6 ], n33 = me[ 10 ], n34 = me[ 14 ];\r\n\t\t\tvar n41 = me[ 3 ], n42 = me[ 7 ], n43 = me[ 11 ], n44 = me[ 15 ];\r\n\t\r\n\t\t\tte[ 0 ] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\r\n\t\t\tte[ 4 ] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\r\n\t\t\tte[ 8 ] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\r\n\t\t\tte[ 12 ] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\t\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\r\n\t\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\r\n\t\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\r\n\t\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\r\n\t\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\r\n\t\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\r\n\t\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\r\n\t\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\r\n\t\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\r\n\t\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\r\n\t\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\r\n\t\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\r\n\t\r\n\t\t\tvar det = n11 * te[ 0 ] + n21 * te[ 4 ] + n31 * te[ 8 ] + n41 * te[ 12 ];\r\n\t\r\n\t\t\tif ( det === 0 ) {\r\n\t\r\n\t\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\r\n\t\r\n\t\t\t\tif ( throwOnInvertible || false ) {\r\n\t\r\n\t\t\t\t\tthrow new Error( msg );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tconsole.warn( msg );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.identity();\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.multiplyScalar( 1 / det );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranslate: function ( v ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateX: function ( angle ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateY: function ( angle ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateZ: function ( angle ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateByAxis: function ( axis, angle ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tscale: function ( v ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar x = v.x, y = v.y, z = v.z;\r\n\t\r\n\t\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetMaxScaleOnAxis: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\t\r\n\t\t\treturn Math.sqrt( Math.max( scaleXSq, Math.max( scaleYSq, scaleZSq ) ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeTranslation: function ( x, y, z ) {\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\t1, 0, 0, x,\r\n\t\t\t\t0, 1, 0, y,\r\n\t\t\t\t0, 0, 1, z,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeRotationX: function ( theta ) {\r\n\t\r\n\t\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\t1, 0,  0, 0,\r\n\t\t\t\t0, c, - s, 0,\r\n\t\t\t\t0, s,  c, 0,\r\n\t\t\t\t0, 0,  0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeRotationY: function ( theta ) {\r\n\t\r\n\t\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\t c, 0, s, 0,\r\n\t\t\t\t 0, 1, 0, 0,\r\n\t\t\t\t- s, 0, c, 0,\r\n\t\t\t\t 0, 0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeRotationZ: function ( theta ) {\r\n\t\r\n\t\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\tc, - s, 0, 0,\r\n\t\t\t\ts,  c, 0, 0,\r\n\t\t\t\t0,  0, 1, 0,\r\n\t\t\t\t0,  0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeRotationAxis: function ( axis, angle ) {\r\n\t\r\n\t\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\t\r\n\t\t\tvar c = Math.cos( angle );\r\n\t\t\tvar s = Math.sin( angle );\r\n\t\t\tvar t = 1 - c;\r\n\t\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\t\tvar tx = t * x, ty = t * y;\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\t return this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeScale: function ( x, y, z ) {\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\tx, 0, 0, 0,\r\n\t\t\t\t0, y, 0, 0,\r\n\t\t\t\t0, 0, z, 0,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcompose: function ( position, quaternion, scale ) {\r\n\t\r\n\t\t\tthis.makeRotationFromQuaternion( quaternion );\r\n\t\t\tthis.scale( scale );\r\n\t\t\tthis.setPosition( position );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdecompose: function () {\r\n\t\r\n\t\t\tvar vector, matrix;\r\n\t\r\n\t\t\treturn function ( position, quaternion, scale ) {\r\n\t\r\n\t\t\t\tif ( vector === undefined ) vector = new THREE.Vector3();\r\n\t\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\t\r\n\t\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\t\tvar det = this.determinant();\r\n\t\t\t\tif ( det < 0 ) {\r\n\t\r\n\t\t\t\t\tsx = - sx;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tposition.x = te[ 12 ];\r\n\t\t\t\tposition.y = te[ 13 ];\r\n\t\t\t\tposition.z = te[ 14 ];\r\n\t\r\n\t\t\t\t// scale the rotation part\r\n\t\r\n\t\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\r\n\t\r\n\t\t\t\tvar invSX = 1 / sx;\r\n\t\t\t\tvar invSY = 1 / sy;\r\n\t\t\t\tvar invSZ = 1 / sz;\r\n\t\r\n\t\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\t\r\n\t\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\t\r\n\t\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\t\r\n\t\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\t\r\n\t\t\t\tscale.x = sx;\r\n\t\t\t\tscale.y = sy;\r\n\t\t\t\tscale.z = sz;\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar x = 2 * near / ( right - left );\r\n\t\t\tvar y = 2 * near / ( top - bottom );\r\n\t\r\n\t\t\tvar a = ( right + left ) / ( right - left );\r\n\t\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\t\tvar d = - 2 * far * near / ( far - near );\r\n\t\r\n\t\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakePerspective: function ( fov, aspect, near, far ) {\r\n\t\r\n\t\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\r\n\t\t\tvar ymin = - ymax;\r\n\t\t\tvar xmin = ymin * aspect;\r\n\t\t\tvar xmax = ymax * aspect;\r\n\t\r\n\t\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar w = right - left;\r\n\t\t\tvar h = top - bottom;\r\n\t\t\tvar p = far - near;\r\n\t\r\n\t\t\tvar x = ( right + left ) / w;\r\n\t\t\tvar y = ( top + bottom ) / h;\r\n\t\t\tvar z = ( far + near ) / p;\r\n\t\r\n\t\t\tte[ 0 ] = 2 / w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 / h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 / p;\tte[ 14 ] = - z;\r\n\t\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( matrix ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = matrix.elements;\r\n\t\r\n\t\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\t\r\n\t\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array ) {\r\n\t\r\n\t\t\tthis.elements.set( array );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\treturn [\r\n\t\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\r\n\t\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\r\n\t\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\r\n\t\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\r\n\t\t\t];\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Ray.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Ray = function ( origin, direction ) {\r\n\t\r\n\t\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\r\n\t\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Ray.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Ray,\r\n\t\r\n\t\tset: function ( origin, direction ) {\r\n\t\r\n\t\t\tthis.origin.copy( origin );\r\n\t\t\tthis.direction.copy( direction );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( ray ) {\r\n\t\r\n\t\t\tthis.origin.copy( ray.origin );\r\n\t\t\tthis.direction.copy( ray.direction );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tat: function ( t, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trecast: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( t ) {\r\n\t\r\n\t\t\t\tthis.origin.copy( this.at( t, v1 ) );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tclosestPointToPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\tresult.subVectors( point, this.origin );\r\n\t\t\tvar directionDistance = result.dot( this.direction );\r\n\t\r\n\t\t\tif ( directionDistance < 0 ) {\r\n\t\r\n\t\t\t\treturn result.copy( this.origin );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPoint: function ( point ) {\r\n\t\r\n\t\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceSqToPoint: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( point ) {\r\n\t\r\n\t\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\t\r\n\t\t\t\t// point behind the ray\r\n\t\r\n\t\t\t\tif ( directionDistance < 0 ) {\r\n\t\r\n\t\t\t\t\treturn this.origin.distanceToSquared( point );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\t\r\n\t\t\t\treturn v1.distanceToSquared( point );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tdistanceSqToSegment: function () {\r\n\t\r\n\t\t\tvar segCenter = new THREE.Vector3();\r\n\t\t\tvar segDir = new THREE.Vector3();\r\n\t\t\tvar diff = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\t\r\n\t\t\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\r\n\t\t\t\t// It returns the min distance between the ray and the segment\r\n\t\t\t\t// defined by v0 and v1\r\n\t\t\t\t// It can also set two optional targets :\r\n\t\t\t\t// - The closest point on the ray\r\n\t\t\t\t// - The closest point on the segment\r\n\t\r\n\t\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t\t\tdiff.copy( this.origin ).sub( segCenter );\r\n\t\r\n\t\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\t\t\tvar a01 = - this.direction.dot( segDir );\r\n\t\t\t\tvar b0 = diff.dot( this.direction );\r\n\t\t\t\tvar b1 = - diff.dot( segDir );\r\n\t\t\t\tvar c = diff.lengthSq();\r\n\t\t\t\tvar det = Math.abs( 1 - a01 * a01 );\r\n\t\t\t\tvar s0, s1, sqrDist, extDet;\r\n\t\r\n\t\t\t\tif ( det > 0 ) {\r\n\t\r\n\t\t\t\t\t// The ray and segment are not parallel.\r\n\t\r\n\t\t\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\t\t\textDet = segExtent * det;\r\n\t\r\n\t\t\t\t\tif ( s0 >= 0 ) {\r\n\t\r\n\t\t\t\t\t\tif ( s1 >= - extDet ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( s1 <= extDet ) {\r\n\t\r\n\t\t\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\t\r\n\t\t\t\t\t\t\t\tvar invDet = 1 / det;\r\n\t\t\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\t// region 1\r\n\t\r\n\t\t\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t// region 5\r\n\t\r\n\t\t\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( s1 <= - extDet ) {\r\n\t\r\n\t\t\t\t\t\t\t// region 4\r\n\t\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t} else if ( s1 <= extDet ) {\r\n\t\r\n\t\t\t\t\t\t\t// region 3\r\n\t\r\n\t\t\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t// region 2\r\n\t\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// Ray and segment are parallel.\r\n\t\r\n\t\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( optionalPointOnRay ) {\r\n\t\r\n\t\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( optionalPointOnSegment ) {\r\n\t\r\n\t\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn sqrDist;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\r\n\t\tisIntersectionSphere: function ( sphere ) {\r\n\t\r\n\t\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectSphere: function () {\r\n\t\r\n\t\t\t// from http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-sphere-intersection/\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( sphere, optionalTarget ) {\r\n\t\r\n\t\t\t\tv1.subVectors( sphere.center, this.origin );\r\n\t\r\n\t\t\t\tvar tca = v1.dot( this.direction );\r\n\t\r\n\t\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\r\n\t\r\n\t\t\t\tvar radius2 = sphere.radius * sphere.radius;\r\n\t\r\n\t\t\t\tif ( d2 > radius2 ) return null;\r\n\t\r\n\t\t\t\tvar thc = Math.sqrt( radius2 - d2 );\r\n\t\r\n\t\t\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\t\t\tvar t0 = tca - thc;\r\n\t\r\n\t\t\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\t\t\tvar t1 = tca + thc;\r\n\t\r\n\t\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\t\r\n\t\t\t\t// test to see if t0 is behind the ray:\r\n\t\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\r\n\t\r\n\t\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\t\t\treturn this.at( t0, optionalTarget );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tisIntersectionPlane: function ( plane ) {\r\n\t\r\n\t\t\t// check if the ray lies on the plane first\r\n\t\r\n\t\t\tvar distToPoint = plane.distanceToPoint( this.origin );\r\n\t\r\n\t\t\tif ( distToPoint === 0 ) {\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar denominator = plane.normal.dot( this.direction );\r\n\t\r\n\t\t\tif ( denominator * distToPoint < 0 ) {\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\t\r\n\t\t\treturn false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPlane: function ( plane ) {\r\n\t\r\n\t\t\tvar denominator = plane.normal.dot( this.direction );\r\n\t\t\tif ( denominator === 0 ) {\r\n\t\r\n\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\t\r\n\t\t\t\t\treturn 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\t\r\n\t\t\t\treturn null;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\t\r\n\t\t\t// Return if the ray never intersects the plane\r\n\t\r\n\t\t\treturn t >= 0 ? t :  null;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectPlane: function ( plane, optionalTarget ) {\r\n\t\r\n\t\t\tvar t = this.distanceToPlane( plane );\r\n\t\r\n\t\t\tif ( t === null ) {\r\n\t\r\n\t\t\t\treturn null;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this.at( t, optionalTarget );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tisIntersectionBox: function () {\r\n\t\r\n\t\t\tvar v = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( box ) {\r\n\t\r\n\t\t\t\treturn this.intersectBox( box, v ) !== null;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tintersectBox: function ( box, optionalTarget ) {\r\n\t\r\n\t\t\t// http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\r\n\t\r\n\t\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\t\r\n\t\t\tvar invdirx = 1 / this.direction.x,\r\n\t\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\t\tinvdirz = 1 / this.direction.z;\r\n\t\r\n\t\t\tvar origin = this.origin;\r\n\t\r\n\t\t\tif ( invdirx >= 0 ) {\r\n\t\r\n\t\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( invdiry >= 0 ) {\r\n\t\r\n\t\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\t\r\n\t\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\t\r\n\t\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\t\r\n\t\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\t\r\n\t\t\tif ( invdirz >= 0 ) {\r\n\t\r\n\t\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\t\r\n\t\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\t\r\n\t\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\t\r\n\t\t\t//return point closest to the ray (positive side)\r\n\t\r\n\t\t\tif ( tmax < 0 ) return null;\r\n\t\r\n\t\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectTriangle: function () {\r\n\t\r\n\t\t\t// Compute the offset origin, edges, and normal.\r\n\t\t\tvar diff = new THREE.Vector3();\r\n\t\t\tvar edge1 = new THREE.Vector3();\r\n\t\t\tvar edge2 = new THREE.Vector3();\r\n\t\t\tvar normal = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\r\n\t\r\n\t\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\r\n\t\r\n\t\t\t\tedge1.subVectors( b, a );\r\n\t\t\t\tedge2.subVectors( c, a );\r\n\t\t\t\tnormal.crossVectors( edge1, edge2 );\r\n\t\r\n\t\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\t\t\tvar DdN = this.direction.dot( normal );\r\n\t\t\t\tvar sign;\r\n\t\r\n\t\t\t\tif ( DdN > 0 ) {\r\n\t\r\n\t\t\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\t\t\tsign = 1;\r\n\t\r\n\t\t\t\t} else if ( DdN < 0 ) {\r\n\t\r\n\t\t\t\t\tsign = - 1;\r\n\t\t\t\t\tDdN = - DdN;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\treturn null;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tdiff.subVectors( this.origin, a );\r\n\t\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\t\r\n\t\t\t\t// b1 < 0, no intersection\r\n\t\t\t\tif ( DdQxE2 < 0 ) {\r\n\t\r\n\t\t\t\t\treturn null;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\t\r\n\t\t\t\t// b2 < 0, no intersection\r\n\t\t\t\tif ( DdE1xQ < 0 ) {\r\n\t\r\n\t\t\t\t\treturn null;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// b1+b2 > 1, no intersection\r\n\t\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\t\r\n\t\t\t\t\treturn null;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Line intersects triangle, check if ray does.\r\n\t\t\t\tvar QdN = - sign * diff.dot( normal );\r\n\t\r\n\t\t\t\t// t < 0, no intersection\r\n\t\t\t\tif ( QdN < 0 ) {\r\n\t\r\n\t\t\t\t\treturn null;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Ray intersects triangle.\r\n\t\t\t\treturn this.at( QdN / DdN, optionalTarget );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tapplyMatrix4: function ( matrix4 ) {\r\n\t\r\n\t\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\r\n\t\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\t\tthis.direction.sub( this.origin );\r\n\t\t\tthis.direction.normalize();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( ray ) {\r\n\t\r\n\t\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Sphere.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Sphere = function ( center, radius ) {\r\n\t\r\n\t\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\r\n\t\tthis.radius = ( radius !== undefined ) ? radius : 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Sphere.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Sphere,\r\n\t\r\n\t\tset: function ( center, radius ) {\r\n\t\r\n\t\t\tthis.center.copy( center );\r\n\t\t\tthis.radius = radius;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromPoints: function () {\r\n\t\r\n\t\t\tvar box = new THREE.Box3();\r\n\t\r\n\t\t\treturn function ( points, optionalCenter ) {\r\n\t\r\n\t\t\t\tvar center = this.center;\r\n\t\r\n\t\t\t\tif ( optionalCenter !== undefined ) {\r\n\t\r\n\t\t\t\t\tcenter.copy( optionalCenter );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tbox.setFromPoints( points ).center( center );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar maxRadiusSq = 0;\r\n\t\r\n\t\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( sphere ) {\r\n\t\r\n\t\t\tthis.center.copy( sphere.center );\r\n\t\t\tthis.radius = sphere.radius;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tempty: function () {\r\n\t\r\n\t\t\treturn ( this.radius <= 0 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsPoint: function ( point ) {\r\n\t\r\n\t\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPoint: function ( point ) {\r\n\t\r\n\t\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectsSphere: function ( sphere ) {\r\n\t\r\n\t\t\tvar radiusSum = this.radius + sphere.radius;\r\n\t\r\n\t\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\tresult.copy( point );\r\n\t\r\n\t\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\t\r\n\t\t\t\tresult.sub( this.center ).normalize();\r\n\t\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn result;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetBoundingBox: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar box = optionalTarget || new THREE.Box3();\r\n\t\r\n\t\t\tbox.set( this.center, this.center );\r\n\t\t\tbox.expandByScalar( this.radius );\r\n\t\r\n\t\t\treturn box;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function ( matrix ) {\r\n\t\r\n\t\t\tthis.center.applyMatrix4( matrix );\r\n\t\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranslate: function ( offset ) {\r\n\t\r\n\t\t\tthis.center.add( offset );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( sphere ) {\r\n\t\r\n\t\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Frustum.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\r\n\t\r\n\t\tthis.planes = [\r\n\t\r\n\t\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\r\n\t\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\r\n\t\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\r\n\t\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\r\n\t\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\r\n\t\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\r\n\t\r\n\t\t];\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Frustum.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Frustum,\r\n\t\r\n\t\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\t\r\n\t\t\tvar planes = this.planes;\r\n\t\r\n\t\t\tplanes[ 0 ].copy( p0 );\r\n\t\t\tplanes[ 1 ].copy( p1 );\r\n\t\t\tplanes[ 2 ].copy( p2 );\r\n\t\t\tplanes[ 3 ].copy( p3 );\r\n\t\t\tplanes[ 4 ].copy( p4 );\r\n\t\t\tplanes[ 5 ].copy( p5 );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( frustum ) {\r\n\t\r\n\t\t\tvar planes = this.planes;\r\n\t\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromMatrix: function ( m ) {\r\n\t\r\n\t\t\tvar planes = this.planes;\r\n\t\t\tvar me = m.elements;\r\n\t\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\t\r\n\t\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectsObject: function () {\r\n\t\r\n\t\t\tvar sphere = new THREE.Sphere();\r\n\t\r\n\t\t\treturn function ( object ) {\r\n\t\r\n\t\t\t\tvar geometry = object.geometry;\r\n\t\r\n\t\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\t\r\n\t\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\t\tsphere.applyMatrix4( object.matrixWorld );\r\n\t\r\n\t\t\t\treturn this.intersectsSphere( sphere );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tintersectsSphere: function ( sphere ) {\r\n\t\r\n\t\t\tvar planes = this.planes;\r\n\t\t\tvar center = sphere.center;\r\n\t\t\tvar negRadius = - sphere.radius;\r\n\t\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\tvar distance = planes[ i ].distanceToPoint( center );\r\n\t\r\n\t\t\t\tif ( distance < negRadius ) {\r\n\t\r\n\t\t\t\t\treturn false;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectsBox: function () {\r\n\t\r\n\t\t\tvar p1 = new THREE.Vector3(),\r\n\t\t\t\tp2 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( box ) {\r\n\t\r\n\t\t\t\tvar planes = this.planes;\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar plane = planes[ i ];\r\n\t\r\n\t\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n\t\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n\t\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n\t\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\t\r\n\t\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\r\n\t\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\r\n\t\r\n\t\t\t\t\t// if both outside plane, no intersection\r\n\t\r\n\t\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\r\n\t\r\n\t\t\t\t\t\treturn false;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\r\n\t\tcontainsPoint: function ( point ) {\r\n\t\r\n\t\t\tvar planes = this.planes;\r\n\t\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\t\r\n\t\t\t\t\treturn false;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Plane.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Plane = function ( normal, constant ) {\r\n\t\r\n\t\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\r\n\t\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Plane.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Plane,\r\n\t\r\n\t\tset: function ( normal, constant ) {\r\n\t\r\n\t\t\tthis.normal.copy( normal );\r\n\t\t\tthis.constant = constant;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetComponents: function ( x, y, z, w ) {\r\n\t\r\n\t\t\tthis.normal.set( x, y, z );\r\n\t\t\tthis.constant = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\t\r\n\t\t\tthis.normal.copy( normal );\r\n\t\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromCoplanarPoints: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\t\tvar v2 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( a, b, c ) {\r\n\t\r\n\t\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\t\r\n\t\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\t\r\n\t\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( plane ) {\r\n\t\r\n\t\t\tthis.normal.copy( plane.normal );\r\n\t\t\tthis.constant = plane.constant;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\t\r\n\t\t\tvar inverseNormalLength = 1.0 / this.normal.length();\r\n\t\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\t\tthis.constant *= inverseNormalLength;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnegate: function () {\r\n\t\r\n\t\t\tthis.constant *= - 1;\r\n\t\t\tthis.normal.negate();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPoint: function ( point ) {\r\n\t\r\n\t\t\treturn this.normal.dot( point ) + this.constant;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToSphere: function ( sphere ) {\r\n\t\r\n\t\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tprojectPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\r\n\t\r\n\t\t},\r\n\t\r\n\t\torthoPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tisIntersectionLine: function ( line ) {\r\n\t\r\n\t\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\t\r\n\t\t\tvar startSign = this.distanceToPoint( line.start );\r\n\t\t\tvar endSign = this.distanceToPoint( line.end );\r\n\t\r\n\t\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectLine: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( line, optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\t\tvar direction = line.delta( v1 );\r\n\t\r\n\t\t\t\tvar denominator = this.normal.dot( direction );\r\n\t\r\n\t\t\t\tif ( denominator === 0 ) {\r\n\t\r\n\t\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\t\r\n\t\t\t\t\t\treturn result.copy( line.start );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\t\t\treturn undefined;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\t\r\n\t\t\t\tif ( t < 0 || t > 1 ) {\r\n\t\r\n\t\t\t\t\treturn undefined;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\r\n\t\tcoplanarPoint: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\t\tvar v2 = new THREE.Vector3();\r\n\t\t\tvar m1 = new THREE.Matrix3();\r\n\t\r\n\t\t\treturn function ( matrix, optionalNormalMatrix ) {\r\n\t\r\n\t\t\t\t// compute new normal based on theory here:\r\n\t\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\r\n\t\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\t\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\r\n\t\r\n\t\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\r\n\t\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\r\n\t\r\n\t\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslate: function ( offset ) {\r\n\t\r\n\t\t\tthis.constant = this.constant - offset.dot( this.normal );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( plane ) {\r\n\t\r\n\t\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Math.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Math = {\r\n\t\r\n\t\tgenerateUUID: function () {\r\n\t\r\n\t\t\t// http://www.broofa.com/Tools/Math.uuid.htm\r\n\t\r\n\t\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\r\n\t\t\tvar uuid = new Array( 36 );\r\n\t\t\tvar rnd = 0, r;\r\n\t\r\n\t\t\treturn function () {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < 36; i ++ ) {\r\n\t\r\n\t\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\r\n\t\r\n\t\t\t\t\t\tuuid[ i ] = '-';\r\n\t\r\n\t\t\t\t\t} else if ( i === 14 ) {\r\n\t\r\n\t\t\t\t\t\tuuid[ i ] = '4';\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\r\n\t\t\t\t\t\tr = rnd & 0xf;\r\n\t\t\t\t\t\trnd = rnd >> 4;\r\n\t\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn uuid.join( '' );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\t// Clamp value to range <a, b>\r\n\t\r\n\t\tclamp: function ( x, a, b ) {\r\n\t\r\n\t\t\treturn ( x < a ) ? a : ( ( x > b ) ? b : x );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Clamp value to range <a, inf)\r\n\t\r\n\t\tclampBottom: function ( x, a ) {\r\n\t\r\n\t\t\treturn x < a ? a : x;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// compute euclidian modulo of m % n\r\n\t\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\t\r\n\t\teuclideanModulo: function ( n, m ) {\r\n\t\r\n\t\t\treturn ( ( n % m ) + m ) % m;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\t\r\n\t\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\t\r\n\t\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\t\r\n\t\tsmoothstep: function ( x, min, max ) {\r\n\t\r\n\t\t\tif ( x <= min ) return 0;\r\n\t\t\tif ( x >= max ) return 1;\r\n\t\r\n\t\t\tx = ( x - min ) / ( max - min );\r\n\t\r\n\t\t\treturn x * x * ( 3 - 2 * x );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsmootherstep: function ( x, min, max ) {\r\n\t\r\n\t\t\tif ( x <= min ) return 0;\r\n\t\t\tif ( x >= max ) return 1;\r\n\t\r\n\t\t\tx = ( x - min ) / ( max - min );\r\n\t\r\n\t\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Random float from <0, 1> with 16 bits of randomness\r\n\t\t// (standard Math.random() creates repetitive patterns when applied over larger space)\r\n\t\r\n\t\trandom16: function () {\r\n\t\r\n\t\t\treturn ( 65280 * Math.random() + 255 * Math.random() ) / 65535;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Random integer from <low, high> interval\r\n\t\r\n\t\trandInt: function ( low, high ) {\r\n\t\r\n\t\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Random float from <low, high> interval\r\n\t\r\n\t\trandFloat: function ( low, high ) {\r\n\t\r\n\t\t\treturn low + Math.random() * ( high - low );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Random float from <-range/2, range/2> interval\r\n\t\r\n\t\trandFloatSpread: function ( range ) {\r\n\t\r\n\t\t\treturn range * ( 0.5 - Math.random() );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdegToRad: function () {\r\n\t\r\n\t\t\tvar degreeToRadiansFactor = Math.PI / 180;\r\n\t\r\n\t\t\treturn function ( degrees ) {\r\n\t\r\n\t\t\t\treturn degrees * degreeToRadiansFactor;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tradToDeg: function () {\r\n\t\r\n\t\t\tvar radianToDegreesFactor = 180 / Math.PI;\r\n\t\r\n\t\t\treturn function ( radians ) {\r\n\t\r\n\t\t\t\treturn radians * radianToDegreesFactor;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tisPowerOfTwo: function ( value ) {\r\n\t\r\n\t\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnextPowerOfTwo: function ( value ) {\r\n\t\r\n\t\t\tvalue --;\r\n\t\t\tvalue |= value >> 1;\r\n\t\t\tvalue |= value >> 2;\r\n\t\t\tvalue |= value >> 4;\r\n\t\t\tvalue |= value >> 8;\r\n\t\t\tvalue |= value >> 16;\r\n\t\t\tvalue ++;\r\n\t\r\n\t\t\treturn value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Spline.js\r\n\t\r\n\t/**\r\n\t * Spline from Tween.js, slightly optimized (and trashed)\r\n\t * http://sole.github.com/tween.js/examples/05_spline.html\r\n\t *\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Spline = function ( points ) {\r\n\t\r\n\t\tthis.points = points;\r\n\t\r\n\t\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\r\n\t\tpoint, intPoint, weight, w2, w3,\r\n\t\tpa, pb, pc, pd;\r\n\t\r\n\t\tthis.initFromArray = function ( a ) {\r\n\t\r\n\t\t\tthis.points = [];\r\n\t\r\n\t\t\tfor ( var i = 0; i < a.length; i ++ ) {\r\n\t\r\n\t\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getPoint = function ( k ) {\r\n\t\r\n\t\t\tpoint = ( this.points.length - 1 ) * k;\r\n\t\t\tintPoint = Math.floor( point );\r\n\t\t\tweight = point - intPoint;\r\n\t\r\n\t\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\t\tc[ 1 ] = intPoint;\r\n\t\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\r\n\t\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\r\n\t\r\n\t\t\tpa = this.points[ c[ 0 ] ];\r\n\t\t\tpb = this.points[ c[ 1 ] ];\r\n\t\t\tpc = this.points[ c[ 2 ] ];\r\n\t\t\tpd = this.points[ c[ 3 ] ];\r\n\t\r\n\t\t\tw2 = weight * weight;\r\n\t\t\tw3 = weight * w2;\r\n\t\r\n\t\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\r\n\t\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\r\n\t\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\r\n\t\r\n\t\t\treturn v3;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getControlPointsArray = function () {\r\n\t\r\n\t\t\tvar i, p, l = this.points.length,\r\n\t\t\t\tcoords = [];\r\n\t\r\n\t\t\tfor ( i = 0; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tp = this.points[ i ];\r\n\t\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn coords;\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// approximate length by summing linear segments\r\n\t\r\n\t\tthis.getLength = function ( nSubDivisions ) {\r\n\t\r\n\t\t\tvar i, index, nSamples, position,\r\n\t\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\r\n\t\t\t\toldPosition = new THREE.Vector3(),\r\n\t\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\t\tchunkLengths = [],\r\n\t\t\t\ttotalLength = 0;\r\n\t\r\n\t\t\t// first point has 0 length\r\n\t\r\n\t\t\tchunkLengths[ 0 ] = 0;\r\n\t\r\n\t\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\r\n\t\r\n\t\t\tnSamples = this.points.length * nSubDivisions;\r\n\t\r\n\t\t\toldPosition.copy( this.points[ 0 ] );\r\n\t\r\n\t\t\tfor ( i = 1; i < nSamples; i ++ ) {\r\n\t\r\n\t\t\t\tindex = i / nSamples;\r\n\t\r\n\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\ttmpVec.copy( position );\r\n\t\r\n\t\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\r\n\t\r\n\t\t\t\toldPosition.copy( position );\r\n\t\r\n\t\t\t\tpoint = ( this.points.length - 1 ) * index;\r\n\t\t\t\tintPoint = Math.floor( point );\r\n\t\r\n\t\t\t\tif ( intPoint !== oldIntPoint ) {\r\n\t\r\n\t\t\t\t\tchunkLengths[ intPoint ] = totalLength;\r\n\t\t\t\t\toldIntPoint = intPoint;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// last point ends with total length\r\n\t\r\n\t\t\tchunkLengths[ chunkLengths.length ] = totalLength;\r\n\t\r\n\t\t\treturn { chunks: chunkLengths, total: totalLength };\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\r\n\t\r\n\t\t\tvar i, j,\r\n\t\t\t\tindex, indexCurrent, indexNext,\r\n\t\t\t\trealDistance,\r\n\t\t\t\tsampling, position,\r\n\t\t\t\tnewpoints = [],\r\n\t\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\t\tsl = this.getLength();\r\n\t\r\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\r\n\t\r\n\t\t\tfor ( i = 1; i < this.points.length; i ++ ) {\r\n\t\r\n\t\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\r\n\t\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\r\n\t\r\n\t\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\r\n\t\r\n\t\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\r\n\t\r\n\t\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\r\n\t\t\t\tindexNext = i / ( this.points.length - 1 );\r\n\t\r\n\t\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\r\n\t\r\n\t\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\r\n\t\r\n\t\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.points = newpoints;\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Catmull-Rom\r\n\t\r\n\t\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\r\n\t\r\n\t\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\t\r\n\t\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Triangle.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Triangle = function ( a, b, c ) {\r\n\t\r\n\t\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\r\n\t\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\r\n\t\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Triangle.normal = function () {\r\n\t\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\r\n\t\treturn function ( a, b, c, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\tresult.subVectors( c, b );\r\n\t\t\tv0.subVectors( a, b );\r\n\t\t\tresult.cross( v0 );\r\n\t\r\n\t\t\tvar resultLengthSq = result.lengthSq();\r\n\t\t\tif ( resultLengthSq > 0 ) {\r\n\t\r\n\t\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn result.set( 0, 0, 0 );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\t// static/instance method to calculate barycentric coordinates\r\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\n\tTHREE.Triangle.barycoordFromPoint = function () {\r\n\t\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\r\n\t\treturn function ( point, a, b, c, optionalTarget ) {\r\n\t\r\n\t\t\tv0.subVectors( c, a );\r\n\t\t\tv1.subVectors( b, a );\r\n\t\t\tv2.subVectors( point, a );\r\n\t\r\n\t\t\tvar dot00 = v0.dot( v0 );\r\n\t\t\tvar dot01 = v0.dot( v1 );\r\n\t\t\tvar dot02 = v0.dot( v2 );\r\n\t\t\tvar dot11 = v1.dot( v1 );\r\n\t\t\tvar dot12 = v1.dot( v2 );\r\n\t\r\n\t\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\t// collinear or singular triangle\r\n\t\t\tif ( denom === 0 ) {\r\n\t\r\n\t\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\t\treturn result.set( - 2, - 1, - 1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar invDenom = 1 / denom;\r\n\t\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\t\r\n\t\t\t// barycentric coordinates must always sum to 1\r\n\t\t\treturn result.set( 1 - u - v, v, u );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\tTHREE.Triangle.containsPoint = function () {\r\n\t\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\treturn function ( point, a, b, c ) {\r\n\t\r\n\t\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\r\n\t\r\n\t\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\tTHREE.Triangle.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Triangle,\r\n\t\r\n\t\tset: function ( a, b, c ) {\r\n\t\r\n\t\t\tthis.a.copy( a );\r\n\t\t\tthis.b.copy( b );\r\n\t\t\tthis.c.copy( c );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\t\r\n\t\t\tthis.a.copy( points[ i0 ] );\r\n\t\t\tthis.b.copy( points[ i1 ] );\r\n\t\t\tthis.c.copy( points[ i2 ] );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( triangle ) {\r\n\t\r\n\t\t\tthis.a.copy( triangle.a );\r\n\t\t\tthis.b.copy( triangle.b );\r\n\t\t\tthis.c.copy( triangle.c );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tarea: function () {\r\n\t\r\n\t\t\tvar v0 = new THREE.Vector3();\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function () {\r\n\t\r\n\t\t\t\tv0.subVectors( this.c, this.b );\r\n\t\t\t\tv1.subVectors( this.a, this.b );\r\n\t\r\n\t\t\t\treturn v0.cross( v1 ).length() * 0.5;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tmidpoint: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormal: function ( optionalTarget ) {\r\n\t\r\n\t\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tplane: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Plane();\r\n\t\r\n\t\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tbarycoordFromPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsPoint: function ( point ) {\r\n\t\r\n\t\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( triangle ) {\r\n\t\r\n\t\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/Clock.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Clock = function ( autoStart ) {\r\n\t\r\n\t\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\t\r\n\t\tthis.startTime = 0;\r\n\t\tthis.oldTime = 0;\r\n\t\tthis.elapsedTime = 0;\r\n\t\r\n\t\tthis.running = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Clock.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Clock,\r\n\t\r\n\t\tstart: function () {\r\n\t\r\n\t\t\tthis.startTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t\t : Date.now();\r\n\t\r\n\t\t\tthis.oldTime = this.startTime;\r\n\t\t\tthis.running = true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tstop: function () {\r\n\t\r\n\t\t\tthis.getElapsedTime();\r\n\t\t\tthis.running = false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetElapsedTime: function () {\r\n\t\r\n\t\t\tthis.getDelta();\r\n\t\t\treturn this.elapsedTime;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetDelta: function () {\r\n\t\r\n\t\t\tvar diff = 0;\r\n\t\r\n\t\t\tif ( this.autoStart && ! this.running ) {\r\n\t\r\n\t\t\t\tthis.start();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.running ) {\r\n\t\r\n\t\t\t\tvar newTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t\t : Date.now();\r\n\t\r\n\t\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\r\n\t\t\t\tthis.oldTime = newTime;\r\n\t\r\n\t\t\t\tthis.elapsedTime += diff;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn diff;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/EventDispatcher.js\r\n\t\r\n\t/**\r\n\t * https://github.com/mrdoob/eventdispatcher.js/\r\n\t */\r\n\t\r\n\tTHREE.EventDispatcher = function () {};\r\n\t\r\n\tTHREE.EventDispatcher.prototype = {\r\n\t\r\n\t\tconstructor: THREE.EventDispatcher,\r\n\t\r\n\t\tapply: function ( object ) {\r\n\t\r\n\t\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\r\n\t\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\r\n\t\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\r\n\t\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddEventListener: function ( type, listener ) {\r\n\t\r\n\t\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\t\r\n\t\t\tvar listeners = this._listeners;\r\n\t\r\n\t\t\tif ( listeners[ type ] === undefined ) {\r\n\t\r\n\t\t\t\tlisteners[ type ] = [];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\t\r\n\t\t\t\tlisteners[ type ].push( listener );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\thasEventListener: function ( type, listener ) {\r\n\t\r\n\t\t\tif ( this._listeners === undefined ) return false;\r\n\t\r\n\t\t\tvar listeners = this._listeners;\r\n\t\r\n\t\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tremoveEventListener: function ( type, listener ) {\r\n\t\r\n\t\t\tif ( this._listeners === undefined ) return;\r\n\t\r\n\t\t\tvar listeners = this._listeners;\r\n\t\t\tvar listenerArray = listeners[ type ];\r\n\t\r\n\t\t\tif ( listenerArray !== undefined ) {\r\n\t\r\n\t\t\t\tvar index = listenerArray.indexOf( listener );\r\n\t\r\n\t\t\t\tif ( index !== - 1 ) {\r\n\t\r\n\t\t\t\t\tlistenerArray.splice( index, 1 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispatchEvent: function ( event ) {\r\n\t\r\n\t\t\tif ( this._listeners === undefined ) return;\r\n\t\r\n\t\t\tvar listeners = this._listeners;\r\n\t\t\tvar listenerArray = listeners[ event.type ];\r\n\t\r\n\t\t\tif ( listenerArray !== undefined ) {\r\n\t\r\n\t\t\t\tevent.target = this;\r\n\t\r\n\t\t\t\tvar array = [];\r\n\t\t\t\tvar length = listenerArray.length;\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\t\r\n\t\t\t\t\tarray[ i ] = listenerArray[ i ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\t\r\n\t\t\t\t\tarray[ i ].call( this, event );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/Raycaster.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author bhouston / http://exocortex.com/\r\n\t * @author stephomi / http://stephaneginier.com/\r\n\t */\r\n\t\r\n\t( function ( THREE ) {\r\n\t\r\n\t\tTHREE.Raycaster = function ( origin, direction, near, far ) {\r\n\t\r\n\t\t\tthis.ray = new THREE.Ray( origin, direction );\r\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\t\r\n\t\t\tthis.near = near || 0;\r\n\t\t\tthis.far = far || Infinity;\r\n\t\r\n\t\t\tthis.params = {\r\n\t\t\t\tMesh: {},\r\n\t\t\t\tLine: {},\r\n\t\t\t\tLOD: {},\r\n\t\t\t\tPoints: { threshold: 1 },\r\n\t\t\t\tSprite: {}\r\n\t\t\t};\r\n\t\r\n\t\t\tObject.defineProperties( this.params, {\r\n\t\t\t\tPointCloud: {\r\n\t\t\t\t\tget: function () {\r\n\t\t\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\t\t\treturn this.Points;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction descSort( a, b ) {\r\n\t\r\n\t\t\treturn a.distance - b.distance;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar intersectObject = function ( object, raycaster, intersects, recursive ) {\r\n\t\r\n\t\t\tif ( object.visible === false ) return;\r\n\t\r\n\t\t\tobject.raycast( raycaster, intersects );\r\n\t\r\n\t\t\tif ( recursive === true ) {\r\n\t\r\n\t\t\t\tvar children = object.children;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\t//\r\n\t\r\n\t\tTHREE.Raycaster.prototype = {\r\n\t\r\n\t\t\tconstructor: THREE.Raycaster,\r\n\t\r\n\t\t\tlinePrecision: 1,\r\n\t\r\n\t\t\tset: function ( origin, direction ) {\r\n\t\r\n\t\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\t\r\n\t\t\t\tthis.ray.set( origin, direction );\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tsetFromCamera: function ( coords, camera ) {\r\n\t\r\n\t\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\r\n\t\r\n\t\t\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\t\r\n\t\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\r\n\t\r\n\t\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\r\n\t\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tintersectObject: function ( object, recursive ) {\r\n\t\r\n\t\t\t\tvar intersects = [];\r\n\t\r\n\t\t\t\tintersectObject( object, this, intersects, recursive );\r\n\t\r\n\t\t\t\tintersects.sort( descSort );\r\n\t\r\n\t\t\t\treturn intersects;\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tintersectObjects: function ( objects, recursive ) {\r\n\t\r\n\t\t\t\tvar intersects = [];\r\n\t\r\n\t\t\t\tif ( Array.isArray( objects ) === false ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\t\t\treturn intersects;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tintersects.sort( descSort );\r\n\t\r\n\t\t\t\treturn intersects;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}( THREE ) );\r\n\t\r\n\t// File:src/core/Object3D.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author elephantatwork / www.elephantatwork.ch\r\n\t */\r\n\t\r\n\tTHREE.Object3D = function () {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.type = 'Object3D';\r\n\t\r\n\t\tthis.parent = null;\r\n\t\tthis.children = [];\r\n\t\r\n\t\tthis.up = THREE.Object3D.DefaultUp.clone();\r\n\t\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar rotation = new THREE.Euler();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\t\tvar scale = new THREE.Vector3( 1, 1, 1 );\r\n\t\r\n\t\tvar onRotationChange = function () {\r\n\t\r\n\t\t\tquaternion.setFromEuler( rotation, false );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tvar onQuaternionChange = function () {\r\n\t\r\n\t\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\t\r\n\t\t};\r\n\t\r\n\t\trotation.onChange( onRotationChange );\r\n\t\tquaternion.onChange( onQuaternionChange );\r\n\t\r\n\t\tObject.defineProperties( this, {\r\n\t\t\tposition: {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tvalue: position\r\n\t\t\t},\r\n\t\t\trotation: {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tvalue: rotation\r\n\t\t\t},\r\n\t\t\tquaternion: {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tvalue: quaternion\r\n\t\t\t},\r\n\t\t\tscale: {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tvalue: scale\r\n\t\t\t},\r\n\t\t\tmodelViewMatrix: {\r\n\t\t\t\tvalue: new THREE.Matrix4()\r\n\t\t\t},\r\n\t\t\tnormalMatrix: {\r\n\t\t\t\tvalue: new THREE.Matrix3()\r\n\t\t\t}\r\n\t\t} );\r\n\t\r\n\t\tthis.rotationAutoUpdate = true;\r\n\t\r\n\t\tthis.matrix = new THREE.Matrix4();\r\n\t\tthis.matrixWorld = new THREE.Matrix4();\r\n\t\r\n\t\tthis.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = false;\r\n\t\r\n\t\tthis.visible = true;\r\n\t\r\n\t\tthis.castShadow = false;\r\n\t\tthis.receiveShadow = false;\r\n\t\r\n\t\tthis.frustumCulled = true;\r\n\t\tthis.renderOrder = 0;\r\n\t\r\n\t\tthis.userData = {};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\r\n\tTHREE.Object3D.DefaultMatrixAutoUpdate = true;\r\n\t\r\n\tTHREE.Object3D.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Object3D,\r\n\t\r\n\t\tget eulerOrder () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\t\r\n\t\t\treturn this.rotation.order;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset eulerOrder ( value ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\t\r\n\t\t\tthis.rotation.order = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget useQuaternion () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset useQuaternion ( value ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset renderDepth ( value ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix: function ( matrix ) {\r\n\t\r\n\t\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\r\n\t\r\n\t\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\t\r\n\t\t\t// assumes axis is normalized\r\n\t\r\n\t\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRotationFromEuler: function ( euler ) {\r\n\t\r\n\t\t\tthis.quaternion.setFromEuler( euler, true );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRotationFromMatrix: function ( m ) {\r\n\t\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\t\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRotationFromQuaternion: function ( q ) {\r\n\t\r\n\t\t\t// assumes q is normalized\r\n\t\r\n\t\t\tthis.quaternion.copy( q );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateOnAxis: function () {\r\n\t\r\n\t\t\t// rotate object on axis in object space\r\n\t\t\t// axis is assumed to be normalized\r\n\t\r\n\t\t\tvar q1 = new THREE.Quaternion();\r\n\t\r\n\t\t\treturn function ( axis, angle ) {\r\n\t\r\n\t\t\t\tq1.setFromAxisAngle( axis, angle );\r\n\t\r\n\t\t\t\tthis.quaternion.multiply( q1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateX: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\t\r\n\t\t\treturn function ( angle ) {\r\n\t\r\n\t\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateY: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\r\n\t\t\treturn function ( angle ) {\r\n\t\r\n\t\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateZ: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\t\r\n\t\t\treturn function ( angle ) {\r\n\t\r\n\t\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslateOnAxis: function () {\r\n\t\r\n\t\t\t// translate object by distance along axis in object space\r\n\t\t\t// axis is assumed to be normalized\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( axis, distance ) {\r\n\t\r\n\t\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\r\n\t\r\n\t\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslate: function ( distance, axis ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\t\treturn this.translateOnAxis( axis, distance );\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranslateX: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\t\r\n\t\t\treturn function ( distance ) {\r\n\t\r\n\t\t\t\treturn this.translateOnAxis( v1, distance );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslateY: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\r\n\t\t\treturn function ( distance ) {\r\n\t\r\n\t\t\t\treturn this.translateOnAxis( v1, distance );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslateZ: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\t\r\n\t\t\treturn function ( distance ) {\r\n\t\r\n\t\t\t\treturn this.translateOnAxis( v1, distance );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tlocalToWorld: function ( vector ) {\r\n\t\r\n\t\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tworldToLocal: function () {\r\n\t\r\n\t\t\tvar m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\treturn function ( vector ) {\r\n\t\r\n\t\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tlookAt: function () {\r\n\t\r\n\t\t\t// This routine does not support objects with rotated and/or translated parent(s)\r\n\t\r\n\t\t\tvar m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\treturn function ( vector ) {\r\n\t\r\n\t\t\t\tm1.lookAt( vector, this.position, this.up );\r\n\t\r\n\t\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tadd: function ( object ) {\r\n\t\r\n\t\t\tif ( arguments.length > 1 ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\t\r\n\t\t\t\t\tthis.add( arguments[ i ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object === this ) {\r\n\t\r\n\t\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object instanceof THREE.Object3D ) {\r\n\t\r\n\t\t\t\tif ( object.parent !== null ) {\r\n\t\r\n\t\t\t\t\tobject.parent.remove( object );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tobject.parent = this;\r\n\t\t\t\tobject.dispatchEvent( { type: 'added' } );\r\n\t\r\n\t\t\t\tthis.children.push( object );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tremove: function ( object ) {\r\n\t\r\n\t\t\tif ( arguments.length > 1 ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\t\r\n\t\t\t\t\tthis.remove( arguments[ i ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar index = this.children.indexOf( object );\r\n\t\r\n\t\t\tif ( index !== - 1 ) {\r\n\t\r\n\t\t\t\tobject.parent = null;\r\n\t\r\n\t\t\t\tobject.dispatchEvent( { type: 'removed' } );\r\n\t\r\n\t\t\t\tthis.children.splice( index, 1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetChildByName: function ( name ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\t\treturn this.getObjectByName( name );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetObjectById: function ( id ) {\r\n\t\r\n\t\t\treturn this.getObjectByProperty( 'id', id );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetObjectByName: function ( name ) {\r\n\t\r\n\t\t\treturn this.getObjectByProperty( 'name', name );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetObjectByProperty: function ( name, value ) {\r\n\t\r\n\t\t\tif ( this[ name ] === value ) return this;\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar child = this.children[ i ];\r\n\t\t\t\tvar object = child.getObjectByProperty( name, value );\r\n\t\r\n\t\t\t\tif ( object !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn object;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn undefined;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetWorldPosition: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\t\r\n\t\t\treturn result.setFromMatrixPosition( this.matrixWorld );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetWorldQuaternion: function () {\r\n\t\r\n\t\t\tvar position = new THREE.Vector3();\r\n\t\t\tvar scale = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Quaternion();\r\n\t\r\n\t\t\t\tthis.updateMatrixWorld( true );\r\n\t\r\n\t\t\t\tthis.matrixWorld.decompose( position, result, scale );\r\n\t\r\n\t\t\t\treturn result;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tgetWorldRotation: function () {\r\n\t\r\n\t\t\tvar quaternion = new THREE.Quaternion();\r\n\t\r\n\t\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Euler();\r\n\t\r\n\t\t\t\tthis.getWorldQuaternion( quaternion );\r\n\t\r\n\t\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tgetWorldScale: function () {\r\n\t\r\n\t\t\tvar position = new THREE.Vector3();\r\n\t\t\tvar quaternion = new THREE.Quaternion();\r\n\t\r\n\t\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\t\tthis.updateMatrixWorld( true );\r\n\t\r\n\t\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\r\n\t\r\n\t\t\t\treturn result;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tgetWorldDirection: function () {\r\n\t\r\n\t\t\tvar quaternion = new THREE.Quaternion();\r\n\t\r\n\t\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\t\tthis.getWorldQuaternion( quaternion );\r\n\t\r\n\t\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\traycast: function () {},\r\n\t\r\n\t\ttraverse: function ( callback ) {\r\n\t\r\n\t\t\tcallback( this );\r\n\t\r\n\t\t\tvar children = this.children;\r\n\t\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tchildren[ i ].traverse( callback );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttraverseVisible: function ( callback ) {\r\n\t\r\n\t\t\tif ( this.visible === false ) return;\r\n\t\r\n\t\t\tcallback( this );\r\n\t\r\n\t\t\tvar children = this.children;\r\n\t\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tchildren[ i ].traverseVisible( callback );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttraverseAncestors: function ( callback ) {\r\n\t\r\n\t\t\tvar parent = this.parent;\r\n\t\r\n\t\t\tif ( parent !== null ) {\r\n\t\r\n\t\t\t\tcallback( parent );\r\n\t\r\n\t\t\t\tparent.traverseAncestors( callback );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdateMatrix: function () {\r\n\t\r\n\t\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\t\r\n\t\t\tthis.matrixWorldNeedsUpdate = true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdateMatrixWorld: function ( force ) {\r\n\t\r\n\t\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\r\n\t\r\n\t\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\r\n\t\r\n\t\t\t\tif ( this.parent === null ) {\r\n\t\r\n\t\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\t\r\n\t\t\t\tforce = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// update children\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoJSON: function ( meta ) {\r\n\t\r\n\t\t\tvar isRootObject = ( meta === undefined );\r\n\t\r\n\t\t\tvar data = {};\r\n\t\r\n\t\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t\t// not providing it implies that this is the root object\r\n\t\t\t// being serialized.\r\n\t\t\tif ( isRootObject ) {\r\n\t\r\n\t\t\t\t// initialize meta obj\r\n\t\t\t\tmeta = {\r\n\t\t\t\t\tgeometries: {},\r\n\t\t\t\t\tmaterials: {},\r\n\t\t\t\t\ttextures: {},\r\n\t\t\t\t\timages: {}\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tdata.metadata = {\r\n\t\t\t\t\tversion: 4.4,\r\n\t\t\t\t\ttype: 'Object',\r\n\t\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// standard Object3D serialization\r\n\t\r\n\t\t\tdata.uuid = this.uuid;\r\n\t\t\tdata.type = this.type;\r\n\t\r\n\t\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\r\n\t\t\tif ( this.visible !== true ) data.visible = this.visible;\r\n\t\r\n\t\t\tdata.matrix = this.matrix.toArray();\r\n\t\r\n\t\t\tif ( this.children.length > 0 ) {\r\n\t\r\n\t\t\t\tdata.children = [];\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\r\n\t\r\n\t\t\t\t\tdata.children.push( this.children[ i ].toJSON( meta ).object );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar output = {};\r\n\t\r\n\t\t\tif ( isRootObject ) {\r\n\t\r\n\t\t\t\tvar geometries = extractFromCache( meta.geometries );\r\n\t\t\t\tvar materials = extractFromCache( meta.materials );\r\n\t\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\t\tvar images = extractFromCache( meta.images );\r\n\t\r\n\t\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\t\tif ( images.length > 0 ) output.images = images;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\toutput.object = data;\r\n\t\r\n\t\t\treturn output;\r\n\t\r\n\t\t\t// extract data from the cache hash\r\n\t\t\t// remove metadata on each item\r\n\t\t\t// and return as array\r\n\t\t\tfunction extractFromCache ( cache ) {\r\n\t\r\n\t\t\t\tvar values = [];\r\n\t\t\t\tfor ( var key in cache ) {\r\n\t\r\n\t\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\t\tdelete data.metadata;\r\n\t\t\t\t\tvalues.push( data );\r\n\t\r\n\t\t\t\t}\r\n\t\t\t\treturn values;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function ( recursive ) {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this, recursive );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source, recursive ) {\r\n\t\r\n\t\t\tif ( recursive === undefined ) recursive = true;\r\n\t\r\n\t\t\tthis.name = source.name;\r\n\t\r\n\t\t\tthis.up.copy( source.up );\r\n\t\r\n\t\t\tthis.position.copy( source.position );\r\n\t\t\tthis.quaternion.copy( source.quaternion );\r\n\t\t\tthis.scale.copy( source.scale );\r\n\t\r\n\t\t\tthis.rotationAutoUpdate = source.rotationAutoUpdate;\r\n\t\r\n\t\t\tthis.matrix.copy( source.matrix );\r\n\t\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\t\r\n\t\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\t\r\n\t\t\tthis.visible = source.visible;\r\n\t\r\n\t\t\tthis.castShadow = source.castShadow;\r\n\t\t\tthis.receiveShadow = source.receiveShadow;\r\n\t\r\n\t\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\t\tthis.renderOrder = source.renderOrder;\r\n\t\r\n\t\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\t\r\n\t\t\tif ( recursive === true ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar child = source.children[ i ];\r\n\t\t\t\t\tthis.add( child.clone() );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\r\n\t\r\n\tTHREE.Object3DIdCount = 0;\r\n\t\r\n\t// File:src/core/Face3.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\r\n\t\r\n\t\tthis.a = a;\r\n\t\tthis.b = b;\r\n\t\tthis.c = c;\r\n\t\r\n\t\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\r\n\t\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\t\r\n\t\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\r\n\t\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\t\r\n\t\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Face3.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Face3,\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.a = source.a;\r\n\t\t\tthis.b = source.b;\r\n\t\t\tthis.c = source.c;\r\n\t\r\n\t\t\tthis.normal.copy( source.normal );\r\n\t\t\tthis.color.copy( source.color );\r\n\t\r\n\t\t\tthis.materialIndex = source.materialIndex;\r\n\t\r\n\t\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/Face4.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\t\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/BufferAttribute.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.BufferAttribute = function ( array, itemSize ) {\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.array = array;\r\n\t\tthis.itemSize = itemSize;\r\n\t\r\n\t\tthis.dynamic = false;\r\n\t\tthis.updateRange = { offset: 0, count: - 1 };\r\n\t\r\n\t\tthis.version = 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BufferAttribute.prototype = {\r\n\t\r\n\t\tconstructor: THREE.BufferAttribute,\r\n\t\r\n\t\tget length() {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\t\treturn this.array.length;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget count() {\r\n\t\r\n\t\t\treturn this.array.length / this.itemSize;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset needsUpdate( value ) {\r\n\t\r\n\t\t\tif ( value === true ) this.version ++;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetDynamic: function ( value ) {\r\n\t\r\n\t\t\tthis.dynamic = value;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.array = new source.array.constructor( source.array );\r\n\t\t\tthis.itemSize = source.itemSize;\r\n\t\r\n\t\t\tthis.dynamic = source.dynamic;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyAt: function ( index1, attribute, index2 ) {\r\n\t\r\n\t\t\tindex1 *= this.itemSize;\r\n\t\t\tindex2 *= attribute.itemSize;\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyArray: function ( array ) {\r\n\t\r\n\t\t\tthis.array.set( array );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyColorsArray: function ( colors ) {\r\n\t\r\n\t\t\tvar array = this.array, offset = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar color = colors[ i ];\r\n\t\r\n\t\t\t\tif ( color === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\t\tcolor = new THREE.Color();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\t\tarray[ offset ++ ] = color.b;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyIndicesArray: function ( indices ) {\r\n\t\r\n\t\t\tvar array = this.array, offset = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar index = indices[ i ];\r\n\t\r\n\t\t\t\tarray[ offset ++ ] = index.a;\r\n\t\t\t\tarray[ offset ++ ] = index.b;\r\n\t\t\t\tarray[ offset ++ ] = index.c;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyVector2sArray: function ( vectors ) {\r\n\t\r\n\t\t\tvar array = this.array, offset = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar vector = vectors[ i ];\r\n\t\r\n\t\t\t\tif ( vector === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\t\tvector = new THREE.Vector2();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyVector3sArray: function ( vectors ) {\r\n\t\r\n\t\t\tvar array = this.array, offset = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar vector = vectors[ i ];\r\n\t\r\n\t\t\t\tif ( vector === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\t\tvector = new THREE.Vector3();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyVector4sArray: function ( vectors ) {\r\n\t\r\n\t\t\tvar array = this.array, offset = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar vector = vectors[ i ];\r\n\t\r\n\t\t\t\tif ( vector === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\t\tvector = new THREE.Vector4();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\t\tarray[ offset ++ ] = vector.w;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset: function ( value, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis.array.set( value, offset );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetX: function ( index ) {\r\n\t\r\n\t\t\treturn this.array[ index * this.itemSize ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetX: function ( index, x ) {\r\n\t\r\n\t\t\tthis.array[ index * this.itemSize ] = x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetY: function ( index ) {\r\n\t\r\n\t\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetY: function ( index, y ) {\r\n\t\r\n\t\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetZ: function ( index ) {\r\n\t\r\n\t\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetZ: function ( index, z ) {\r\n\t\r\n\t\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetW: function ( index ) {\r\n\t\r\n\t\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetW: function ( index, w ) {\r\n\t\r\n\t\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXY: function ( index, x, y ) {\r\n\t\r\n\t\t\tindex *= this.itemSize;\r\n\t\r\n\t\t\tthis.array[ index + 0 ] = x;\r\n\t\t\tthis.array[ index + 1 ] = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXYZ: function ( index, x, y, z ) {\r\n\t\r\n\t\t\tindex *= this.itemSize;\r\n\t\r\n\t\t\tthis.array[ index + 0 ] = x;\r\n\t\t\tthis.array[ index + 1 ] = y;\r\n\t\t\tthis.array[ index + 2 ] = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXYZW: function ( index, x, y, z, w ) {\r\n\t\r\n\t\t\tindex *= this.itemSize;\r\n\t\r\n\t\t\tthis.array[ index + 0 ] = x;\r\n\t\t\tthis.array[ index + 1 ] = y;\r\n\t\t\tthis.array[ index + 2 ] = z;\r\n\t\t\tthis.array[ index + 3 ] = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t//\r\n\t\r\n\tTHREE.Int8Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Int8Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Uint8Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Uint8Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Uint8ClampedAttribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Uint8ClampedArray( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Int16Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Int16Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Uint16Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Uint16Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Int32Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Int32Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Uint32Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Uint32Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Float32Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Float32Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Float64Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Float64Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t// Deprecated\r\n\t\r\n\tTHREE.DynamicBufferAttribute = function ( array, itemSize ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\r\n\t\treturn new THREE.BufferAttribute( array, itemSize ).setDynamic( true );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/InstancedBufferAttribute.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.InstancedBufferAttribute = function ( array, itemSize, meshPerAttribute ) {\r\n\t\r\n\t\tTHREE.BufferAttribute.call( this, array, itemSize );\r\n\t\r\n\t\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.InstancedBufferAttribute.prototype = Object.create( THREE.BufferAttribute.prototype );\r\n\tTHREE.InstancedBufferAttribute.prototype.constructor = THREE.InstancedBufferAttribute;\r\n\t\r\n\tTHREE.InstancedBufferAttribute.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.BufferAttribute.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/InterleavedBuffer.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.InterleavedBuffer = function ( array, stride ) {\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.array = array;\r\n\t\tthis.stride = stride;\r\n\t\r\n\t\tthis.dynamic = false;\r\n\t\tthis.updateRange = { offset: 0, count: - 1 };\r\n\t\r\n\t\tthis.version = 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.InterleavedBuffer.prototype = {\r\n\t\r\n\t\tconstructor: THREE.InterleavedBuffer,\r\n\t\r\n\t\tget length () {\r\n\t\r\n\t\t\treturn this.array.length;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget count () {\r\n\t\r\n\t\t\treturn this.array.length / this.stride;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset needsUpdate( value ) {\r\n\t\r\n\t\t\tif ( value === true ) this.version ++;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetDynamic: function ( value ) {\r\n\t\r\n\t\t\tthis.dynamic = value;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.array = new source.array.constructor( source.array );\r\n\t\t\tthis.stride = source.stride;\r\n\t\t\tthis.dynamic = source.dynamic;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyAt: function ( index1, attribute, index2 ) {\r\n\t\r\n\t\t\tindex1 *= this.stride;\r\n\t\t\tindex2 *= attribute.stride;\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset: function ( value, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis.array.set( value, offset );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/InstancedInterleavedBuffer.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.InstancedInterleavedBuffer = function ( array, stride, meshPerAttribute ) {\r\n\t\r\n\t\tTHREE.InterleavedBuffer.call( this, array, stride );\r\n\t\r\n\t\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.InstancedInterleavedBuffer.prototype = Object.create( THREE.InterleavedBuffer.prototype );\r\n\tTHREE.InstancedInterleavedBuffer.prototype.constructor = THREE.InstancedInterleavedBuffer;\r\n\t\r\n\tTHREE.InstancedInterleavedBuffer.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.InterleavedBuffer.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/InterleavedBufferAttribute.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.InterleavedBufferAttribute = function ( interleavedBuffer, itemSize, offset ) {\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.data = interleavedBuffer;\r\n\t\tthis.itemSize = itemSize;\r\n\t\tthis.offset = offset;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.InterleavedBufferAttribute.prototype = {\r\n\t\r\n\t\tconstructor: THREE.InterleavedBufferAttribute,\r\n\t\r\n\t\tget length() {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\t\treturn this.array.length;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget count() {\r\n\t\r\n\t\t\treturn this.data.array.length / this.data.stride;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetX: function ( index, x ) {\r\n\t\r\n\t\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetY: function ( index, y ) {\r\n\t\r\n\t\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetZ: function ( index, z ) {\r\n\t\r\n\t\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetW: function ( index, w ) {\r\n\t\r\n\t\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetX: function ( index ) {\r\n\t\r\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetY: function ( index ) {\r\n\t\r\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetZ: function ( index ) {\r\n\t\r\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetW: function ( index ) {\r\n\t\r\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXY: function ( index, x, y ) {\r\n\t\r\n\t\t\tindex = index * this.data.stride + this.offset;\r\n\t\r\n\t\t\tthis.data.array[ index + 0 ] = x;\r\n\t\t\tthis.data.array[ index + 1 ] = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXYZ: function ( index, x, y, z ) {\r\n\t\r\n\t\t\tindex = index * this.data.stride + this.offset;\r\n\t\r\n\t\t\tthis.data.array[ index + 0 ] = x;\r\n\t\t\tthis.data.array[ index + 1 ] = y;\r\n\t\t\tthis.data.array[ index + 2 ] = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXYZW: function ( index, x, y, z, w ) {\r\n\t\r\n\t\t\tindex = index * this.data.stride + this.offset;\r\n\t\r\n\t\t\tthis.data.array[ index + 0 ] = x;\r\n\t\t\tthis.data.array[ index + 1 ] = y;\r\n\t\t\tthis.data.array[ index + 2 ] = z;\r\n\t\t\tthis.data.array[ index + 3 ] = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/Geometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author kile / http://kile.stravaganza.org/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Geometry = function () {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.type = 'Geometry';\r\n\t\r\n\t\tthis.vertices = [];\r\n\t\tthis.colors = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [ [] ];\r\n\t\r\n\t\tthis.morphTargets = [];\r\n\t\tthis.morphColors = [];\r\n\t\tthis.morphNormals = [];\r\n\t\r\n\t\tthis.skinWeights = [];\r\n\t\tthis.skinIndices = [];\r\n\t\r\n\t\tthis.lineDistances = [];\r\n\t\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\t\r\n\t\t// update flags\r\n\t\r\n\t\tthis.verticesNeedUpdate = false;\r\n\t\tthis.elementsNeedUpdate = false;\r\n\t\tthis.uvsNeedUpdate = false;\r\n\t\tthis.normalsNeedUpdate = false;\r\n\t\tthis.colorsNeedUpdate = false;\r\n\t\tthis.lineDistancesNeedUpdate = false;\r\n\t\tthis.groupsNeedUpdate = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Geometry.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Geometry,\r\n\t\r\n\t\tapplyMatrix: function ( matrix ) {\r\n\t\r\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\t\r\n\t\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\t\tvertex.applyMatrix4( matrix );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = this.faces[ i ];\r\n\t\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tthis.computeBoundingBox();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.boundingSphere !== null ) {\r\n\t\r\n\t\t\t\tthis.computeBoundingSphere();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.verticesNeedUpdate = true;\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateX: function () {\r\n\t\r\n\t\t\t// rotate geometry around world x-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateX( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationX( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateY: function () {\r\n\t\r\n\t\t\t// rotate geometry around world y-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateY( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationY( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateZ: function () {\r\n\t\r\n\t\t\t// rotate geometry around world z-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateZ( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationZ( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslate: function () {\r\n\t\r\n\t\t\t// translate geometry\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function translate( x, y, z ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeTranslation( x, y, z );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tscale: function () {\r\n\t\r\n\t\t\t// scale geometry\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function scale( x, y, z ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeScale( x, y, z );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tlookAt: function () {\r\n\t\r\n\t\t\tvar obj;\r\n\t\r\n\t\t\treturn function lookAt( vector ) {\r\n\t\r\n\t\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\t\r\n\t\t\t\tobj.lookAt( vector );\r\n\t\r\n\t\t\t\tobj.updateMatrix();\r\n\t\r\n\t\t\t\tthis.applyMatrix( obj.matrix );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tfromBufferGeometry: function ( geometry ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\r\n\t\t\tvar vertices = attributes.position.array;\r\n\t\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n\t\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n\t\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n\t\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\r\n\t\r\n\t\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\t\r\n\t\t\tvar tempNormals = [];\r\n\t\t\tvar tempUVs = [];\r\n\t\t\tvar tempUVs2 = [];\r\n\t\r\n\t\t\tfor ( var i = 0, j = 0, k = 0; i < vertices.length; i += 3, j += 2, k += 4 ) {\r\n\t\r\n\t\t\t\tscope.vertices.push( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\t\r\n\t\t\t\tif ( normals !== undefined ) {\r\n\t\r\n\t\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( colors !== undefined ) {\r\n\t\r\n\t\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( uvs !== undefined ) {\r\n\t\r\n\t\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( uvs2 !== undefined ) {\r\n\t\r\n\t\t\t\t\ttempUVs2.push( new THREE.Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar addFace = function ( a, b, c ) {\r\n\t\r\n\t\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n\t\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\t\r\n\t\t\t\tvar face = new THREE.Face3( a, b, c, vertexNormals, vertexColors );\r\n\t\r\n\t\t\t\tscope.faces.push( face );\r\n\t\r\n\t\t\t\tif ( uvs !== undefined ) {\r\n\t\r\n\t\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( uvs2 !== undefined ) {\r\n\t\r\n\t\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tif ( indices !== undefined ) {\r\n\t\r\n\t\t\t\tvar groups = geometry.groups;\r\n\t\r\n\t\t\t\tif ( groups.length > 0 ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar group = groups[ i ];\r\n\t\r\n\t\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\t\tvar count = group.count;\r\n\t\r\n\t\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ] );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < vertices.length / 3; i += 3 ) {\r\n\t\r\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.computeFaceNormals();\r\n\t\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\t\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcenter: function () {\r\n\t\r\n\t\t\tthis.computeBoundingBox();\r\n\t\r\n\t\t\tvar offset = this.boundingBox.center().negate();\r\n\t\r\n\t\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\t\r\n\t\t\treturn offset;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\tthis.computeBoundingSphere();\r\n\t\r\n\t\t\tvar center = this.boundingSphere.center;\r\n\t\t\tvar radius = this.boundingSphere.radius;\r\n\t\r\n\t\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\r\n\t\r\n\t\t\tvar matrix = new THREE.Matrix4();\r\n\t\t\tmatrix.set(\r\n\t\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\t\t);\r\n\t\r\n\t\t\tthis.applyMatrix( matrix );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeFaceNormals: function () {\r\n\t\r\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\t\r\n\t\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\tvar face = this.faces[ f ];\r\n\t\r\n\t\t\t\tvar vA = this.vertices[ face.a ];\r\n\t\t\t\tvar vB = this.vertices[ face.b ];\r\n\t\t\t\tvar vC = this.vertices[ face.c ];\r\n\t\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\t\r\n\t\t\t\tcb.normalize();\r\n\t\r\n\t\t\t\tface.normal.copy( cb );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\t\r\n\t\t\tvar v, vl, f, fl, face, vertices;\r\n\t\r\n\t\t\tvertices = new Array( this.vertices.length );\r\n\t\r\n\t\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\t\r\n\t\t\t\tvertices[ v ] = new THREE.Vector3();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( areaWeighted ) {\r\n\t\r\n\t\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\t\r\n\t\t\t\tvar vA, vB, vC;\r\n\t\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\t\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\t\tvA = this.vertices[ face.a ];\r\n\t\t\t\t\tvB = this.vertices[ face.b ];\r\n\t\t\t\t\tvC = this.vertices[ face.c ];\r\n\t\r\n\t\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\t\r\n\t\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\t\tvertices[ face.c ].add( cb );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\t\r\n\t\t\t\tvertices[ v ].normalize();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\t\r\n\t\t\t\tif ( vertexNormals.length === 3 ) {\r\n\t\r\n\t\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeMorphNormals: function () {\r\n\t\r\n\t\t\tvar i, il, f, fl, face;\r\n\t\r\n\t\t\t// save original normals\r\n\t\t\t// - create temp variables on first access\r\n\t\t\t//   otherwise just copy (for faster repeated calls)\r\n\t\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\t\r\n\t\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\t\r\n\t\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\t\r\n\t\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\t\r\n\t\t\tvar tmpGeo = new THREE.Geometry();\r\n\t\t\ttmpGeo.faces = this.faces;\r\n\t\r\n\t\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t// create on first access\r\n\t\r\n\t\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\t\r\n\t\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\t\r\n\t\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\t\r\n\t\t\t\t\tvar faceNormal, vertexNormals;\r\n\t\r\n\t\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\t\t\tfaceNormal = new THREE.Vector3();\r\n\t\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\r\n\t\r\n\t\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar morphNormals = this.morphNormals[ i ];\r\n\t\r\n\t\t\t\t// set vertices to morph target\r\n\t\r\n\t\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\t\r\n\t\t\t\t// compute morph normals\r\n\t\r\n\t\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\t\ttmpGeo.computeVertexNormals();\r\n\t\r\n\t\t\t\t// store morph normals\r\n\t\r\n\t\t\t\tvar faceNormal, vertexNormals;\r\n\t\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\r\n\t\r\n\t\t\t\t\tfaceNormal.copy( face.normal );\r\n\t\r\n\t\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// restore original normals\r\n\t\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeTangents: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeLineDistances: function () {\r\n\t\r\n\t\t\tvar d = 0;\r\n\t\t\tvar vertices = this.vertices;\r\n\t\r\n\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tif ( i > 0 ) {\r\n\t\r\n\t\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.lineDistances[ i ] = d;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeBoundingBox: function () {\r\n\t\r\n\t\t\tif ( this.boundingBox === null ) {\r\n\t\r\n\t\t\t\tthis.boundingBox = new THREE.Box3();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeBoundingSphere: function () {\r\n\t\r\n\t\t\tif ( this.boundingSphere === null ) {\r\n\t\r\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.Geometry === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar normalMatrix,\r\n\t\t\tvertexOffset = this.vertices.length,\r\n\t\t\tvertices1 = this.vertices,\r\n\t\t\tvertices2 = geometry.vertices,\r\n\t\t\tfaces1 = this.faces,\r\n\t\t\tfaces2 = geometry.faces,\r\n\t\t\tuvs1 = this.faceVertexUvs[ 0 ],\r\n\t\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\r\n\t\r\n\t\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\t\r\n\t\t\tif ( matrix !== undefined ) {\r\n\t\r\n\t\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// vertices\r\n\t\r\n\t\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar vertex = vertices2[ i ];\r\n\t\r\n\t\t\t\tvar vertexCopy = vertex.clone();\r\n\t\r\n\t\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\t\r\n\t\t\t\tvertices1.push( vertexCopy );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// faces\r\n\t\r\n\t\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\t\tfaceVertexColors = face.vertexColors;\r\n\t\r\n\t\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\t\tfaceCopy.normal.copy( face.normal );\r\n\t\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\t\r\n\t\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\t\r\n\t\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfaceCopy.color.copy( face.color );\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\t\r\n\t\t\t\tfaces1.push( faceCopy );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// uvs\r\n\t\r\n\t\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar uv = uvs2[ i ], uvCopy = [];\r\n\t\r\n\t\t\t\tif ( uv === undefined ) {\r\n\t\r\n\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tuvCopy.push( uv[ j ].clone() );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tuvs1.push( uvCopy );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmergeMesh: function ( mesh ) {\r\n\t\r\n\t\t\tif ( mesh instanceof THREE.Mesh === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\r\n\t\r\n\t\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t/*\r\n\t\t * Checks for duplicate vertices with hashmap.\r\n\t\t * Duplicated vertices are removed\r\n\t\t * and faces' vertices are updated.\r\n\t\t */\r\n\t\r\n\t\tmergeVertices: function () {\r\n\t\r\n\t\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\t\tvar unique = [], changes = [];\r\n\t\r\n\t\t\tvar v, key;\r\n\t\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\t\tvar precision = Math.pow( 10, precisionPoints );\r\n\t\t\tvar i, il, face;\r\n\t\t\tvar indices, j, jl;\r\n\t\r\n\t\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tv = this.vertices[ i ];\r\n\t\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\t\r\n\t\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\t\r\n\t\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t\t// have to remove them from the geometry.\r\n\t\t\tvar faceIndicesToRemove = [];\r\n\t\r\n\t\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tface = this.faces[ i ];\r\n\t\r\n\t\t\t\tface.a = changes[ face.a ];\r\n\t\t\t\tface.b = changes[ face.b ];\r\n\t\t\t\tface.c = changes[ face.c ];\r\n\t\r\n\t\t\t\tindices = [ face.a, face.b, face.c ];\r\n\t\r\n\t\t\t\tvar dupIndex = - 1;\r\n\t\r\n\t\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\t\tfor ( var n = 0; n < 3; n ++ ) {\r\n\t\r\n\t\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\t\r\n\t\t\t\t\t\tdupIndex = n;\r\n\t\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\t\r\n\t\t\t\tvar idx = faceIndicesToRemove[ i ];\r\n\t\r\n\t\t\t\tthis.faces.splice( idx, 1 );\r\n\t\r\n\t\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// Use unique set of vertices\r\n\t\r\n\t\t\tvar diff = this.vertices.length - unique.length;\r\n\t\t\tthis.vertices = unique;\r\n\t\t\treturn diff;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoJSON: function () {\r\n\t\r\n\t\t\tvar data = {\r\n\t\t\t\tmetadata: {\r\n\t\t\t\t\tversion: 4.4,\r\n\t\t\t\t\ttype: 'Geometry',\r\n\t\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\t// standard Geometry serialization\r\n\t\r\n\t\t\tdata.uuid = this.uuid;\r\n\t\t\tdata.type = this.type;\r\n\t\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\r\n\t\t\tif ( this.parameters !== undefined ) {\r\n\t\r\n\t\t\t\tvar parameters = this.parameters;\r\n\t\r\n\t\t\t\tfor ( var key in parameters ) {\r\n\t\r\n\t\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn data;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar vertices = [];\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar faces = [];\r\n\t\t\tvar normals = [];\r\n\t\t\tvar normalsHash = {};\r\n\t\t\tvar colors = [];\r\n\t\t\tvar colorsHash = {};\r\n\t\t\tvar uvs = [];\r\n\t\t\tvar uvsHash = {};\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = this.faces[ i ];\r\n\t\r\n\t\t\t\tvar hasMaterial = false; // face.materialIndex !== undefined;\r\n\t\t\t\tvar hasFaceUv = false; // deprecated\r\n\t\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\t\tvar hasFaceNormal = face.normal.length() > 0;\r\n\t\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\r\n\t\r\n\t\t\t\tvar faceType = 0;\r\n\t\r\n\t\t\t\tfaceType = setBit( faceType, 0, 0 );\r\n\t\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\t\r\n\t\t\t\tfaces.push( faceType );\r\n\t\t\t\tfaces.push( face.a, face.b, face.c );\r\n\t\r\n\t\t\t\tif ( hasFaceVertexUv ) {\r\n\t\r\n\t\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\t\r\n\t\t\t\t\tfaces.push(\r\n\t\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t\t);\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceNormal ) {\r\n\t\r\n\t\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\t\r\n\t\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\t\r\n\t\t\t\t\tfaces.push(\r\n\t\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t\t);\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceColor ) {\r\n\t\r\n\t\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceVertexColor ) {\r\n\t\r\n\t\t\t\t\tvar vertexColors = face.vertexColors;\r\n\t\r\n\t\t\t\t\tfaces.push(\r\n\t\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t\t);\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction setBit( value, position, enabled ) {\r\n\t\r\n\t\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getNormalIndex( normal ) {\r\n\t\r\n\t\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\t\r\n\t\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn normalsHash[ hash ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\t\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getColorIndex( color ) {\r\n\t\r\n\t\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\t\r\n\t\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn colorsHash[ hash ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\t\tcolors.push( color.getHex() );\r\n\t\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getUvIndex( uv ) {\r\n\t\r\n\t\t\t\tvar hash = uv.x.toString() + uv.y.toString();\r\n\t\r\n\t\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn uvsHash[ hash ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\t\tuvs.push( uv.x, uv.y );\r\n\t\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tdata.data = {};\r\n\t\r\n\t\t\tdata.data.vertices = vertices;\r\n\t\t\tdata.data.normals = normals;\r\n\t\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\t\tdata.data.faces = faces;\r\n\t\r\n\t\t\treturn data;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.vertices = [];\r\n\t\t\tthis.faces = [];\r\n\t\t\tthis.faceVertexUvs = [ [] ];\r\n\t\r\n\t\t\tvar vertices = source.vertices;\r\n\t\r\n\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar faces = source.faces;\r\n\t\r\n\t\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\r\n\t\r\n\t\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\t\r\n\t\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\t\r\n\t\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar uv = uvs[ k ];\r\n\t\r\n\t\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\r\n\t\r\n\tTHREE.GeometryIdCount = 0;\r\n\t\r\n\t// File:src/core/DirectGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.DirectGeometry = function () {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.type = 'DirectGeometry';\r\n\t\r\n\t\tthis.indices = [];\r\n\t\tthis.vertices = [];\r\n\t\tthis.normals = [];\r\n\t\tthis.colors = [];\r\n\t\tthis.uvs = [];\r\n\t\tthis.uvs2 = [];\r\n\t\r\n\t\tthis.groups = [];\r\n\t\r\n\t\tthis.morphTargets = {};\r\n\t\r\n\t\tthis.skinWeights = [];\r\n\t\tthis.skinIndices = [];\r\n\t\r\n\t\t// this.lineDistances = [];\r\n\t\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\t\r\n\t\t// update flags\r\n\t\r\n\t\tthis.verticesNeedUpdate = false;\r\n\t\tthis.normalsNeedUpdate = false;\r\n\t\tthis.colorsNeedUpdate = false;\r\n\t\tthis.uvsNeedUpdate = false;\r\n\t\tthis.groupsNeedUpdate = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DirectGeometry.prototype = {\r\n\t\r\n\t\tconstructor: THREE.DirectGeometry,\r\n\t\r\n\t\tcomputeBoundingBox: THREE.Geometry.prototype.computeBoundingBox,\r\n\t\tcomputeBoundingSphere: THREE.Geometry.prototype.computeBoundingSphere,\r\n\t\r\n\t\tcomputeFaceNormals: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeVertexNormals: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeGroups: function ( geometry ) {\r\n\t\r\n\t\t\tvar group;\r\n\t\t\tvar groups = [];\r\n\t\t\tvar materialIndex;\r\n\t\r\n\t\t\tvar faces = geometry.faces;\r\n\t\r\n\t\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\t\t// materials\r\n\t\r\n\t\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\t\r\n\t\t\t\t\tmaterialIndex = face.materialIndex;\r\n\t\r\n\t\t\t\t\tif ( group !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\t\tgroups.push( group );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tgroup = {\r\n\t\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( group !== undefined ) {\r\n\t\r\n\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\tgroups.push( group );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.groups = groups;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromGeometry: function ( geometry ) {\r\n\t\r\n\t\t\tvar faces = geometry.faces;\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar faceVertexUvs = geometry.faceVertexUvs;\r\n\t\r\n\t\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\t\r\n\t\t\t// morphs\r\n\t\r\n\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\tvar morphTargetsLength = morphTargets.length;\r\n\t\r\n\t\t\tif ( morphTargetsLength > 0 ) {\r\n\t\r\n\t\t\t\tvar morphTargetsPosition = [];\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\r\n\t\r\n\t\t\t\t\tmorphTargetsPosition[ i ] = [];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar morphNormals = geometry.morphNormals;\r\n\t\t\tvar morphNormalsLength = morphNormals.length;\r\n\t\r\n\t\t\tif ( morphNormalsLength > 0 ) {\r\n\t\r\n\t\t\t\tvar morphTargetsNormal = [];\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\r\n\t\r\n\t\t\t\t\tmorphTargetsNormal[ i ] = [];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// skins\r\n\t\r\n\t\t\tvar skinIndices = geometry.skinIndices;\r\n\t\t\tvar skinWeights = geometry.skinWeights;\r\n\t\r\n\t\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\t\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\t\r\n\t\t\t\tif ( vertexNormals.length === 3 ) {\r\n\t\r\n\t\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvar normal = face.normal;\r\n\t\r\n\t\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar vertexColors = face.vertexColors;\r\n\t\r\n\t\t\t\tif ( vertexColors.length === 3 ) {\r\n\t\r\n\t\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvar color = face.color;\r\n\t\r\n\t\t\t\t\tthis.colors.push( color, color, color );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceVertexUv === true ) {\r\n\t\r\n\t\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\t\r\n\t\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\t\r\n\t\t\t\t\t\tthis.uvs.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\t\r\n\t\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\t\r\n\t\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\t\r\n\t\t\t\t\t\tthis.uvs2.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// morphs\r\n\t\r\n\t\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\r\n\t\r\n\t\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\t\r\n\t\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// skins\r\n\t\r\n\t\t\t\tif ( hasSkinIndices ) {\r\n\t\r\n\t\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasSkinWeights ) {\r\n\t\r\n\t\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.computeGroups( geometry );\r\n\t\r\n\t\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.DirectGeometry.prototype );\r\n\t\r\n\t// File:src/core/BufferGeometry.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.BufferGeometry = function () {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.type = 'BufferGeometry';\r\n\t\r\n\t\tthis.index = null;\r\n\t\tthis.attributes = {};\r\n\t\r\n\t\tthis.morphAttributes = {};\r\n\t\r\n\t\tthis.groups = [];\r\n\t\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\t\r\n\t\tthis.drawRange = { start: 0, count: Infinity };\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BufferGeometry.prototype = {\r\n\t\r\n\t\tconstructor: THREE.BufferGeometry,\r\n\t\r\n\t\taddIndex: function ( index ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\t\tthis.setIndex( index );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetIndex: function () {\r\n\t\r\n\t\t\treturn this.index;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetIndex: function ( index ) {\r\n\t\r\n\t\t\tthis.index = index;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddAttribute: function ( name, attribute ) {\r\n\t\r\n\t\t\tif ( attribute instanceof THREE.BufferAttribute === false && attribute instanceof THREE.InterleavedBufferAttribute === false ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\t\r\n\t\t\t\tthis.addAttribute( name, new THREE.BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\t\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( name === 'index' ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\t\tthis.setIndex( attribute );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.attributes[ name ] = attribute;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetAttribute: function ( name ) {\r\n\t\r\n\t\t\treturn this.attributes[ name ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tremoveAttribute: function ( name ) {\r\n\t\r\n\t\t\tdelete this.attributes[ name ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget drawcalls() {\r\n\t\r\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget offsets() {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddDrawCall: function ( start, count, indexOffset ) {\r\n\t\r\n\t\t\tif ( indexOffset !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\t\tthis.addGroup( start, count );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclearDrawCalls: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\t\tthis.clearGroups();\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddGroup: function ( start, count, materialIndex ) {\r\n\t\r\n\t\t\tthis.groups.push( {\r\n\t\r\n\t\t\t\tstart: start,\r\n\t\t\t\tcount: count,\r\n\t\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclearGroups: function () {\r\n\t\r\n\t\t\tthis.groups = [];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetDrawRange: function ( start, count ) {\r\n\t\r\n\t\t\tthis.drawRange.start = start;\r\n\t\t\tthis.drawRange.count = count;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix: function ( matrix ) {\r\n\t\r\n\t\t\tvar position = this.attributes.position;\r\n\t\r\n\t\t\tif ( position !== undefined ) {\r\n\t\r\n\t\t\t\tmatrix.applyToVector3Array( position.array );\r\n\t\t\t\tposition.needsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar normal = this.attributes.normal;\r\n\t\r\n\t\t\tif ( normal !== undefined ) {\r\n\t\r\n\t\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\t\r\n\t\t\t\tnormalMatrix.applyToVector3Array( normal.array );\r\n\t\t\t\tnormal.needsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tthis.computeBoundingBox();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.boundingSphere !== null ) {\r\n\t\r\n\t\t\t\tthis.computeBoundingSphere();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateX: function () {\r\n\t\r\n\t\t\t// rotate geometry around world x-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateX( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationX( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateY: function () {\r\n\t\r\n\t\t\t// rotate geometry around world y-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateY( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationY( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateZ: function () {\r\n\t\r\n\t\t\t// rotate geometry around world z-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateZ( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationZ( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslate: function () {\r\n\t\r\n\t\t\t// translate geometry\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function translate( x, y, z ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeTranslation( x, y, z );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tscale: function () {\r\n\t\r\n\t\t\t// scale geometry\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function scale( x, y, z ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeScale( x, y, z );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tlookAt: function () {\r\n\t\r\n\t\t\tvar obj;\r\n\t\r\n\t\t\treturn function lookAt( vector ) {\r\n\t\r\n\t\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\t\r\n\t\t\t\tobj.lookAt( vector );\r\n\t\r\n\t\t\t\tobj.updateMatrix();\r\n\t\r\n\t\t\t\tthis.applyMatrix( obj.matrix );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tcenter: function () {\r\n\t\r\n\t\t\tthis.computeBoundingBox();\r\n\t\r\n\t\t\tvar offset = this.boundingBox.center().negate();\r\n\t\r\n\t\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\t\r\n\t\t\treturn offset;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromObject: function ( object ) {\r\n\t\r\n\t\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\t\r\n\t\t\tvar geometry = object.geometry;\r\n\t\r\n\t\t\tif ( object instanceof THREE.Points || object instanceof THREE.Line ) {\r\n\t\r\n\t\t\t\tvar positions = new THREE.Float32Attribute( geometry.vertices.length * 3, 3 );\r\n\t\t\t\tvar colors = new THREE.Float32Attribute( geometry.colors.length * 3, 3 );\r\n\t\r\n\t\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\t\r\n\t\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\t\r\n\t\t\t\t\tvar lineDistances = new THREE.Float32Attribute( geometry.lineDistances.length, 1 );\r\n\t\r\n\t\t\t\t\tthis.addAttribute( 'lineDistance',  lineDistances.copyArray( geometry.lineDistances ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\t\r\n\t\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( geometry.boundingBox !== null ) {\r\n\t\r\n\t\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\t\r\n\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\t\tthis.fromGeometry( geometry );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdateFromObject: function ( object ) {\r\n\t\r\n\t\t\tvar geometry = object.geometry;\r\n\t\r\n\t\t\tif ( object instanceof THREE.Mesh ) {\r\n\t\r\n\t\t\t\tvar direct = geometry.__directGeometry;\r\n\t\r\n\t\t\t\tif ( direct === undefined ) {\r\n\t\r\n\t\t\t\t\treturn this.fromGeometry( geometry );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\t\r\n\t\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\t\tgeometry.groupsNeedUpdate = false;\r\n\t\r\n\t\t\t\tgeometry = direct;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\t\r\n\t\t\t\tvar attribute = this.attributes.position;\r\n\t\r\n\t\t\t\tif ( attribute !== undefined ) {\r\n\t\r\n\t\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\t\r\n\t\t\t\tvar attribute = this.attributes.normal;\r\n\t\r\n\t\t\t\tif ( attribute !== undefined ) {\r\n\t\r\n\t\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\t\r\n\t\t\t\tvar attribute = this.attributes.color;\r\n\t\r\n\t\t\t\tif ( attribute !== undefined ) {\r\n\t\r\n\t\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\t\r\n\t\t\t\tvar attribute = this.attributes.lineDistance;\r\n\t\r\n\t\t\t\tif ( attribute !== undefined ) {\r\n\t\r\n\t\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.groupsNeedUpdate ) {\r\n\t\r\n\t\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\t\tthis.groups = geometry.groups;\r\n\t\r\n\t\t\t\tgeometry.groupsNeedUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromGeometry: function ( geometry ) {\r\n\t\r\n\t\t\tgeometry.__directGeometry = new THREE.DirectGeometry().fromGeometry( geometry );\r\n\t\r\n\t\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromDirectGeometry: function ( geometry ) {\r\n\t\r\n\t\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\t\r\n\t\t\tif ( geometry.normals.length > 0 ) {\r\n\t\r\n\t\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.colors.length > 0 ) {\r\n\t\r\n\t\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.uvs.length > 0 ) {\r\n\t\r\n\t\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.uvs2.length > 0 ) {\r\n\t\r\n\t\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\t\tthis.addAttribute( 'uv2', new THREE.BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.indices.length > 0 ) {\r\n\t\r\n\t\t\t\tvar TypeArray = geometry.vertices.length > 65535 ? Uint32Array : Uint16Array;\r\n\t\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\r\n\t\t\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// groups\r\n\t\r\n\t\t\tthis.groups = geometry.groups;\r\n\t\r\n\t\t\t// morphs\r\n\t\r\n\t\t\tfor ( var name in geometry.morphTargets ) {\r\n\t\r\n\t\t\t\tvar array = [];\r\n\t\t\t\tvar morphTargets = geometry.morphTargets[ name ];\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar morphTarget = morphTargets[ i ];\r\n\t\r\n\t\t\t\t\tvar attribute = new THREE.Float32Attribute( morphTarget.length * 3, 3 );\r\n\t\r\n\t\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.morphAttributes[ name ] = array;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// skinning\r\n\t\r\n\t\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\t\r\n\t\t\t\tvar skinIndices = new THREE.Float32Attribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\t\r\n\t\t\t\tvar skinWeights = new THREE.Float32Attribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\t\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeBoundingBox: function () {\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function () {\r\n\t\r\n\t\t\t\tif ( this.boundingBox === null ) {\r\n\t\r\n\t\t\t\t\tthis.boundingBox = new THREE.Box3();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar positions = this.attributes.position.array;\r\n\t\r\n\t\t\t\tif ( positions ) {\r\n\t\r\n\t\t\t\t\tvar bb = this.boundingBox;\r\n\t\t\t\t\tbb.makeEmpty();\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\t\tbb.expandByPoint( vector );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( positions === undefined || positions.length === 0 ) {\r\n\t\r\n\t\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\r\n\t\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tcomputeBoundingSphere: function () {\r\n\t\r\n\t\t\tvar box = new THREE.Box3();\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function () {\r\n\t\r\n\t\t\t\tif ( this.boundingSphere === null ) {\r\n\t\r\n\t\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar positions = this.attributes.position.array;\r\n\t\r\n\t\t\t\tif ( positions ) {\r\n\t\r\n\t\t\t\t\tbox.makeEmpty();\r\n\t\r\n\t\t\t\t\tvar center = this.boundingSphere.center;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\t\tbox.expandByPoint( vector );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tbox.center( center );\r\n\t\r\n\t\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\t\r\n\t\t\t\t\tvar maxRadiusSq = 0;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\t\r\n\t\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\t\r\n\t\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tcomputeFaceNormals: function () {\r\n\t\r\n\t\t\t// backwards compatibility\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeVertexNormals: function () {\r\n\t\r\n\t\t\tvar index = this.index;\r\n\t\t\tvar attributes = this.attributes;\r\n\t\t\tvar groups = this.groups;\r\n\t\r\n\t\t\tif ( attributes.position ) {\r\n\t\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\tif ( attributes.normal === undefined ) {\r\n\t\r\n\t\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// reset existing normals to zero\r\n\t\r\n\t\t\t\t\tvar normals = attributes.normal.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = normals.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tnormals[ i ] = 0;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar normals = attributes.normal.array;\r\n\t\r\n\t\t\t\tvar vA, vB, vC,\r\n\t\r\n\t\t\t\tpA = new THREE.Vector3(),\r\n\t\t\t\tpB = new THREE.Vector3(),\r\n\t\t\t\tpC = new THREE.Vector3(),\r\n\t\r\n\t\t\t\tcb = new THREE.Vector3(),\r\n\t\t\t\tab = new THREE.Vector3();\r\n\t\r\n\t\t\t\t// indexed elements\r\n\t\r\n\t\t\t\tif ( index ) {\r\n\t\r\n\t\t\t\t\tvar indices = index.array;\r\n\t\r\n\t\t\t\t\tif ( groups.length === 0 ) {\r\n\t\r\n\t\t\t\t\t\tthis.addGroup( 0, indices.length );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\r\n\t\r\n\t\t\t\t\t\tvar group = groups[ j ];\r\n\t\r\n\t\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\t\tvar count = group.count;\r\n\t\r\n\t\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\r\n\t\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\r\n\t\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\r\n\t\r\n\t\t\t\t\t\t\tpA.fromArray( positions, vA );\r\n\t\t\t\t\t\t\tpB.fromArray( positions, vB );\r\n\t\t\t\t\t\t\tpC.fromArray( positions, vC );\r\n\t\r\n\t\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\t\tcb.cross( ab );\r\n\t\r\n\t\t\t\t\t\t\tnormals[ vA ] += cb.x;\r\n\t\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\r\n\t\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\r\n\t\r\n\t\t\t\t\t\t\tnormals[ vB ] += cb.x;\r\n\t\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\r\n\t\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\r\n\t\r\n\t\t\t\t\t\t\tnormals[ vC ] += cb.x;\r\n\t\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\r\n\t\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\t\r\n\t\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n\t\r\n\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\tcb.cross( ab );\r\n\t\r\n\t\t\t\t\t\tnormals[ i ] = cb.x;\r\n\t\t\t\t\t\tnormals[ i + 1 ] = cb.y;\r\n\t\t\t\t\t\tnormals[ i + 2 ] = cb.z;\r\n\t\r\n\t\t\t\t\t\tnormals[ i + 3 ] = cb.x;\r\n\t\t\t\t\t\tnormals[ i + 4 ] = cb.y;\r\n\t\t\t\t\t\tnormals[ i + 5 ] = cb.z;\r\n\t\r\n\t\t\t\t\t\tnormals[ i + 6 ] = cb.x;\r\n\t\t\t\t\t\tnormals[ i + 7 ] = cb.y;\r\n\t\t\t\t\t\tnormals[ i + 8 ] = cb.z;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.normalizeNormals();\r\n\t\r\n\t\t\t\tattributes.normal.needsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeTangents: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeOffsets: function ( size ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.')\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmerge: function ( geometry, offset ) {\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tvar attributes = this.attributes;\r\n\t\r\n\t\t\tfor ( var key in attributes ) {\r\n\t\r\n\t\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\t\r\n\t\t\t\tvar attribute1 = attributes[ key ];\r\n\t\t\t\tvar attributeArray1 = attribute1.array;\r\n\t\r\n\t\t\t\tvar attribute2 = geometry.attributes[ key ];\r\n\t\t\t\tvar attributeArray2 = attribute2.array;\r\n\t\r\n\t\t\t\tvar attributeSize = attribute2.itemSize;\r\n\t\r\n\t\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\t\r\n\t\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalizeNormals: function () {\r\n\t\r\n\t\t\tvar normals = this.attributes.normal.array;\r\n\t\r\n\t\t\tvar x, y, z, n;\r\n\t\r\n\t\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\tx = normals[ i ];\r\n\t\t\t\ty = normals[ i + 1 ];\r\n\t\t\t\tz = normals[ i + 2 ];\r\n\t\r\n\t\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\r\n\t\r\n\t\t\t\tnormals[ i ] *= n;\r\n\t\t\t\tnormals[ i + 1 ] *= n;\r\n\t\t\t\tnormals[ i + 2 ] *= n;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoJSON: function () {\r\n\t\r\n\t\t\tvar data = {\r\n\t\t\t\tmetadata: {\r\n\t\t\t\t\tversion: 4.4,\r\n\t\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\t// standard BufferGeometry serialization\r\n\t\r\n\t\t\tdata.uuid = this.uuid;\r\n\t\t\tdata.type = this.type;\r\n\t\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\r\n\t\t\tif ( this.parameters !== undefined ) {\r\n\t\r\n\t\t\t\tvar parameters = this.parameters;\r\n\t\r\n\t\t\t\tfor ( var key in parameters ) {\r\n\t\r\n\t\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn data;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tdata.data = { attributes: {} };\r\n\t\r\n\t\t\tvar index = this.index;\r\n\t\r\n\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\tvar array = Array.prototype.slice.call( index.array );\r\n\t\r\n\t\t\t\tdata.data.index = {\r\n\t\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\t\tarray: array\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar attributes = this.attributes;\r\n\t\r\n\t\t\tfor ( var key in attributes ) {\r\n\t\r\n\t\t\t\tvar attribute = attributes[ key ];\r\n\t\r\n\t\t\t\tvar array = Array.prototype.slice.call( attribute.array );\r\n\t\r\n\t\t\t\tdata.data.attributes[ key ] = {\r\n\t\t\t\t\titemSize: attribute.itemSize,\r\n\t\t\t\t\ttype: attribute.array.constructor.name,\r\n\t\t\t\t\tarray: array\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar groups = this.groups;\r\n\t\r\n\t\t\tif ( groups.length > 0 ) {\r\n\t\r\n\t\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar boundingSphere = this.boundingSphere;\r\n\t\r\n\t\t\tif ( boundingSphere !== null ) {\r\n\t\r\n\t\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn data;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tvar index = source.index;\r\n\t\r\n\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\tthis.setIndex( index.clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar attributes = source.attributes;\r\n\t\r\n\t\t\tfor ( var name in attributes ) {\r\n\t\r\n\t\t\t\tvar attribute = attributes[ name ];\r\n\t\t\t\tthis.addAttribute( name, attribute.clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar groups = source.groups;\r\n\t\r\n\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar group = groups[ i ];\r\n\t\t\t\tthis.addGroup( group.start, group.count );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\r\n\t\r\n\tTHREE.BufferGeometry.MaxIndex = 65535;\r\n\t\r\n\t// File:src/core/InstancedBufferGeometry.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.InstancedBufferGeometry = function () {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tthis.type = 'InstancedBufferGeometry';\r\n\t\tthis.maxInstancedCount = undefined;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.InstancedBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.InstancedBufferGeometry.prototype.constructor = THREE.InstancedBufferGeometry;\r\n\t\r\n\tTHREE.InstancedBufferGeometry.prototype.addGroup = function ( start, count, instances ) {\r\n\t\r\n\t\tthis.groups.push( {\r\n\t\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tinstances: instances\r\n\t\r\n\t\t} );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.InstancedBufferGeometry.prototype.copy = function ( source ) {\r\n\t\r\n\t\tvar index = source.index;\r\n\t\r\n\t\tif ( index !== null ) {\r\n\t\r\n\t\t\tthis.setIndex( index.clone() );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar attributes = source.attributes;\r\n\t\r\n\t\tfor ( var name in attributes ) {\r\n\t\r\n\t\t\tvar attribute = attributes[ name ];\r\n\t\t\tthis.addAttribute( name, attribute.clone() );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar groups = source.groups;\r\n\t\r\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tvar group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count, group.instances );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.InstancedBufferGeometry.prototype );\r\n\t\r\n\t// File:src/cameras/Camera.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t*/\r\n\t\r\n\tTHREE.Camera = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Camera';\r\n\t\r\n\t\tthis.matrixWorldInverse = new THREE.Matrix4();\r\n\t\tthis.projectionMatrix = new THREE.Matrix4();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Camera.prototype.constructor = THREE.Camera;\r\n\t\r\n\tTHREE.Camera.prototype.getWorldDirection = function () {\r\n\t\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\t\r\n\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\t\r\n\t\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\tTHREE.Camera.prototype.lookAt = function () {\r\n\t\r\n\t\t// This routine does not support cameras with rotated and/or translated parent(s)\r\n\t\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\t\r\n\t\treturn function ( vector ) {\r\n\t\r\n\t\t\tm1.lookAt( this.position, vector, this.up );\r\n\t\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\tTHREE.Camera.prototype.clone = function () {\r\n\t\r\n\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Camera.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/cameras/CubeCamera.js\r\n\t\r\n\t/**\r\n\t * Camera for rendering cube maps\r\n\t *\t- renders scene into axis-aligned cube\r\n\t *\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.CubeCamera = function ( near, far, cubeResolution ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'CubeCamera';\r\n\t\r\n\t\tvar fov = 90, aspect = 1;\r\n\t\r\n\t\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraPX.up.set( 0, - 1, 0 );\r\n\t\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\r\n\t\tthis.add( cameraPX );\r\n\t\r\n\t\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraNX.up.set( 0, - 1, 0 );\r\n\t\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\r\n\t\tthis.add( cameraNX );\r\n\t\r\n\t\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraPY.up.set( 0, 0, 1 );\r\n\t\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\r\n\t\tthis.add( cameraPY );\r\n\t\r\n\t\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraNY.up.set( 0, 0, - 1 );\r\n\t\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\r\n\t\tthis.add( cameraNY );\r\n\t\r\n\t\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraPZ.up.set( 0, - 1, 0 );\r\n\t\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\r\n\t\tthis.add( cameraPZ );\r\n\t\r\n\t\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraNZ.up.set( 0, - 1, 0 );\r\n\t\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\r\n\t\tthis.add( cameraNZ );\r\n\t\r\n\t\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter } );\r\n\t\r\n\t\tthis.updateCubeMap = function ( renderer, scene ) {\r\n\t\r\n\t\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\t\r\n\t\t\tvar renderTarget = this.renderTarget;\r\n\t\t\tvar generateMipmaps = renderTarget.generateMipmaps;\r\n\t\r\n\t\t\trenderTarget.generateMipmaps = false;\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 0;\r\n\t\t\trenderer.render( scene, cameraPX, renderTarget );\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 1;\r\n\t\t\trenderer.render( scene, cameraNX, renderTarget );\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 2;\r\n\t\t\trenderer.render( scene, cameraPY, renderTarget );\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 3;\r\n\t\t\trenderer.render( scene, cameraNY, renderTarget );\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 4;\r\n\t\t\trenderer.render( scene, cameraPZ, renderTarget );\r\n\t\r\n\t\t\trenderTarget.generateMipmaps = generateMipmaps;\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 5;\r\n\t\t\trenderer.render( scene, cameraNZ, renderTarget );\r\n\t\r\n\t\t\trenderer.setRenderTarget( null );\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\r\n\t\r\n\t// File:src/cameras/OrthographicCamera.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\r\n\t\r\n\t\tTHREE.Camera.call( this );\r\n\t\r\n\t\tthis.type = 'OrthographicCamera';\r\n\t\r\n\t\tthis.zoom = 1;\r\n\t\r\n\t\tthis.left = left;\r\n\t\tthis.right = right;\r\n\t\tthis.top = top;\r\n\t\tthis.bottom = bottom;\r\n\t\r\n\t\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\t\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\t\r\n\t\tthis.updateProjectionMatrix();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\r\n\tTHREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera;\r\n\t\r\n\tTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\r\n\t\r\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\t\tvar cx = ( this.right + this.left ) / 2;\r\n\t\tvar cy = ( this.top + this.bottom ) / 2;\r\n\t\r\n\t\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.OrthographicCamera.prototype.copy = function ( source ) {\r\n\t\t\r\n\t\tTHREE.Camera.prototype.copy.call( this, source );\r\n\t\t\r\n\t\tthis.left = source.left;\r\n\t\tthis.right = source.right;\r\n\t\tthis.top = source.top;\r\n\t\tthis.bottom = source.bottom;\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\t\t\r\n\t\tthis.zoom = source.zoom;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\t\r\n\t};\r\n\t\r\n\tTHREE.OrthographicCamera.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.zoom = this.zoom;\r\n\t\tdata.object.left = this.left;\r\n\t\tdata.object.right = this.right;\r\n\t\tdata.object.top = this.top;\r\n\t\tdata.object.bottom = this.bottom;\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/cameras/PerspectiveCamera.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author greggman / http://games.greggman.com/\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t */\r\n\t\r\n\tTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\r\n\t\r\n\t\tTHREE.Camera.call( this );\r\n\t\r\n\t\tthis.type = 'PerspectiveCamera';\r\n\t\r\n\t\tthis.zoom = 1;\r\n\t\r\n\t\tthis.fov = fov !== undefined ? fov : 50;\r\n\t\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\t\tthis.near = near !== undefined ? near : 0.1;\r\n\t\tthis.far = far !== undefined ? far : 2000;\r\n\t\r\n\t\tthis.updateProjectionMatrix();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\r\n\tTHREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera;\r\n\t\r\n\t\r\n\t/**\r\n\t * Uses Focal Length (in mm) to estimate and set FOV\r\n\t * 35mm (full-frame) camera is used if frame size is not specified;\r\n\t * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\r\n\t */\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\r\n\t\r\n\t\tif ( frameHeight === undefined ) frameHeight = 24;\r\n\t\r\n\t\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\r\n\t\tthis.updateProjectionMatrix();\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\r\n\t * multi-monitor/multi-machine setups.\r\n\t *\r\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n\t * the monitors are in grid like this\r\n\t *\r\n\t *   +---+---+---+\r\n\t *   | A | B | C |\r\n\t *   +---+---+---+\r\n\t *   | D | E | F |\r\n\t *   +---+---+---+\r\n\t *\r\n\t * then for each monitor you would call it like this\r\n\t *\r\n\t *   var w = 1920;\r\n\t *   var h = 1080;\r\n\t *   var fullWidth = w * 3;\r\n\t *   var fullHeight = h * 2;\r\n\t *\r\n\t *   --A--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n\t *   --B--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n\t *   --C--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n\t *   --D--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n\t *   --E--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n\t *   --F--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n\t *\r\n\t *   Note there is no reason monitors have to be the same size or in a grid.\r\n\t */\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\t\r\n\t\tthis.fullWidth = fullWidth;\r\n\t\tthis.fullHeight = fullHeight;\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\r\n\t\tthis.updateProjectionMatrix();\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\r\n\t\r\n\t\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\r\n\t\r\n\t\tif ( this.fullWidth ) {\r\n\t\r\n\t\t\tvar aspect = this.fullWidth / this.fullHeight;\r\n\t\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\r\n\t\t\tvar bottom = - top;\r\n\t\t\tvar left = aspect * bottom;\r\n\t\t\tvar right = aspect * top;\r\n\t\t\tvar width = Math.abs( right - left );\r\n\t\t\tvar height = Math.abs( top - bottom );\r\n\t\r\n\t\t\tthis.projectionMatrix.makeFrustum(\r\n\t\t\t\tleft + this.x * width / this.fullWidth,\r\n\t\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\r\n\t\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\r\n\t\t\t\ttop - this.y * height / this.fullHeight,\r\n\t\t\t\tthis.near,\r\n\t\t\t\tthis.far\r\n\t\t\t);\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype.copy = function ( source ) {\r\n\t\t\r\n\t\tTHREE.Camera.prototype.copy.call( this, source );\r\n\t\t\r\n\t\tthis.fov = source.fov;\r\n\t\tthis.aspect = source.aspect;\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\t\t\r\n\t\tthis.zoom = source.zoom;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\t\r\n\t};\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.zoom = this.zoom;\r\n\t\tdata.object.fov = this.fov;\r\n\t\tdata.object.aspect = this.aspect;\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/lights/Light.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Light = function ( color ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Light';\r\n\t\r\n\t\tthis.color = new THREE.Color( color );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Light.prototype.constructor = THREE.Light;\r\n\t\r\n\tTHREE.Light.prototype.copy = function ( source ) {\r\n\t\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\t\r\n\t\tthis.color.copy( source.color );\r\n\t\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t// File:src/lights/AmbientLight.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.AmbientLight = function ( color ) {\r\n\t\r\n\t\tTHREE.Light.call( this, color );\r\n\t\r\n\t\tthis.type = 'AmbientLight';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\r\n\tTHREE.AmbientLight.prototype.constructor = THREE.AmbientLight;\r\n\t\r\n\tTHREE.AmbientLight.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/lights/DirectionalLight.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.DirectionalLight = function ( color, intensity ) {\r\n\t\r\n\t\tTHREE.Light.call( this, color );\r\n\t\r\n\t\tthis.type = 'DirectionalLight';\r\n\t\r\n\t\tthis.position.set( 0, 1, 0 );\r\n\t\tthis.updateMatrix();\r\n\t\r\n\t\tthis.target = new THREE.Object3D();\r\n\t\r\n\t\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\t\r\n\t\tthis.castShadow = false;\r\n\t\tthis.onlyShadow = false;\r\n\t\r\n\t\tthis.shadowCameraNear = 50;\r\n\t\tthis.shadowCameraFar = 5000;\r\n\t\r\n\t\tthis.shadowCameraLeft = - 500;\r\n\t\tthis.shadowCameraRight = 500;\r\n\t\tthis.shadowCameraTop = 500;\r\n\t\tthis.shadowCameraBottom = - 500;\r\n\t\r\n\t\tthis.shadowCameraVisible = false;\r\n\t\r\n\t\tthis.shadowBias = 0;\r\n\t\tthis.shadowDarkness = 0.5;\r\n\t\r\n\t\tthis.shadowMapWidth = 512;\r\n\t\tthis.shadowMapHeight = 512;\r\n\t\r\n\t\tthis.shadowMap = null;\r\n\t\tthis.shadowMapSize = null;\r\n\t\tthis.shadowCamera = null;\r\n\t\tthis.shadowMatrix = null;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\r\n\tTHREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight;\r\n\t\r\n\tTHREE.DirectionalLight.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.intensity = source.intensity;\r\n\t\tthis.target = source.target.clone();\r\n\t\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.onlyShadow = source.onlyShadow;\r\n\t\r\n\t\tthis.shadowCameraNear = source.shadowCameraNear;\r\n\t\tthis.shadowCameraFar = source.shadowCameraFar;\r\n\t\r\n\t\tthis.shadowCameraLeft = source.shadowCameraLeft;\r\n\t\tthis.shadowCameraRight = source.shadowCameraRight;\r\n\t\tthis.shadowCameraTop = source.shadowCameraTop;\r\n\t\tthis.shadowCameraBottom = source.shadowCameraBottom;\r\n\t\r\n\t\tthis.shadowCameraVisible = source.shadowCameraVisible;\r\n\t\r\n\t\tthis.shadowBias = source.shadowBias;\r\n\t\tthis.shadowDarkness = source.shadowDarkness;\r\n\t\r\n\t\tthis.shadowMapWidth = source.shadowMapWidth;\r\n\t\tthis.shadowMapHeight = source.shadowMapHeight;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DirectionalLight.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/lights/HemisphereLight.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\r\n\t\r\n\t\tTHREE.Light.call( this, skyColor );\r\n\t\r\n\t\tthis.type = 'HemisphereLight';\r\n\t\r\n\t\tthis.position.set( 0, 1, 0 );\r\n\t\tthis.updateMatrix();\r\n\t\r\n\t\tthis.groundColor = new THREE.Color( groundColor );\r\n\t\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\r\n\tTHREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight;\r\n\t\r\n\tTHREE.HemisphereLight.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.groundColor.copy( source.groundColor );\r\n\t\tthis.intensity = source.intensity;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.HemisphereLight.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.groundColor = this.groundColor.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/lights/PointLight.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.PointLight = function ( color, intensity, distance, decay ) {\r\n\t\r\n\t\tTHREE.Light.call( this, color );\r\n\t\r\n\t\tthis.type = 'PointLight';\r\n\t\r\n\t\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\t\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\t\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\r\n\tTHREE.PointLight.prototype.constructor = THREE.PointLight;\r\n\t\r\n\tTHREE.PointLight.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.intensity = source.intensity;\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.decay = source.decay;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PointLight.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\t\tdata.object.distance = this.distance;\r\n\t\tdata.object.decay = this.decay;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/lights/SpotLight.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.SpotLight = function ( color, intensity, distance, angle, exponent, decay ) {\r\n\t\r\n\t\tTHREE.Light.call( this, color );\r\n\t\r\n\t\tthis.type = 'SpotLight';\r\n\t\r\n\t\tthis.position.set( 0, 1, 0 );\r\n\t\tthis.updateMatrix();\r\n\t\r\n\t\tthis.target = new THREE.Object3D();\r\n\t\r\n\t\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\t\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\t\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\t\tthis.exponent = ( exponent !== undefined ) ? exponent : 10;\r\n\t\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\t\r\n\t\tthis.castShadow = false;\r\n\t\tthis.onlyShadow = false;\r\n\t\r\n\t\tthis.shadowCameraNear = 50;\r\n\t\tthis.shadowCameraFar = 5000;\r\n\t\tthis.shadowCameraFov = 50;\r\n\t\r\n\t\tthis.shadowCameraVisible = false;\r\n\t\r\n\t\tthis.shadowBias = 0;\r\n\t\tthis.shadowDarkness = 0.5;\r\n\t\r\n\t\tthis.shadowMapWidth = 512;\r\n\t\tthis.shadowMapHeight = 512;\r\n\t\r\n\t\tthis.shadowMap = null;\r\n\t\tthis.shadowMapSize = null;\r\n\t\tthis.shadowCamera = null;\r\n\t\tthis.shadowMatrix = null;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\r\n\tTHREE.SpotLight.prototype.constructor = THREE.SpotLight;\r\n\t\r\n\tTHREE.SpotLight.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.intensity = source.intensity;\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.angle = source.angle;\r\n\t\tthis.exponent = source.exponent;\r\n\t\tthis.decay = source.decay;\r\n\t\r\n\t\tthis.target = source.target.clone();\r\n\t\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.onlyShadow = source.onlyShadow;\r\n\t\r\n\t\tthis.shadowCameraNear = source.shadowCameraNear;\r\n\t\tthis.shadowCameraFar = source.shadowCameraFar;\r\n\t\tthis.shadowCameraFov = source.shadowCameraFov;\r\n\t\r\n\t\tthis.shadowCameraVisible = source.shadowCameraVisible;\r\n\t\r\n\t\tthis.shadowBias = source.shadowBias;\r\n\t\tthis.shadowDarkness = source.shadowDarkness;\r\n\t\r\n\t\tthis.shadowMapWidth = source.shadowMapWidth;\r\n\t\tthis.shadowMapHeight = source.shadowMapHeight;\r\n\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tTHREE.SpotLight.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\t\tdata.object.distance = this.distance;\r\n\t\tdata.object.angle = this.angle;\r\n\t\tdata.object.exponent = this.exponent;\r\n\t\tdata.object.decay = this.decay;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/Cache.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Cache = {\r\n\t\r\n\t\tenabled: false,\r\n\t\r\n\t\tfiles: {},\r\n\t\r\n\t\tadd: function ( key, file ) {\r\n\t\r\n\t\t\tif ( this.enabled === false ) return;\r\n\t\r\n\t\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\t\r\n\t\t\tthis.files[ key ] = file;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget: function ( key ) {\r\n\t\r\n\t\t\tif ( this.enabled === false ) return;\r\n\t\r\n\t\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\t\r\n\t\t\treturn this.files[ key ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tremove: function ( key ) {\r\n\t\r\n\t\t\tdelete this.files[ key ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclear: function () {\r\n\t\r\n\t\t\tthis.files = {};\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/Loader.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Loader = function () {\r\n\t\r\n\t\tthis.onLoadStart = function () {};\r\n\t\tthis.onLoadProgress = function () {};\r\n\t\tthis.onLoadComplete = function () {};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Loader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Loader,\r\n\t\r\n\t\tcrossOrigin: undefined,\r\n\t\r\n\t\textractUrlBase: function ( url ) {\r\n\t\r\n\t\t\tvar parts = url.split( '/' );\r\n\t\r\n\t\t\tif ( parts.length === 1 ) return './';\r\n\t\r\n\t\t\tparts.pop();\r\n\t\r\n\t\t\treturn parts.join( '/' ) + '/';\r\n\t\r\n\t\t},\r\n\t\r\n\t\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\r\n\t\r\n\t\t\tvar array = [];\r\n\t\r\n\t\t\tfor ( var i = 0; i < materials.length; ++ i ) {\r\n\t\r\n\t\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcreateMaterial: ( function () {\r\n\t\r\n\t\t\tvar imageLoader;\r\n\t\r\n\t\t\treturn function createMaterial( m, texturePath, crossOrigin ) {\r\n\t\r\n\t\t\t\tvar scope = this;\r\n\t\r\n\t\t\t\tif ( crossOrigin === undefined && scope.crossOrigin !== undefined ) crossOrigin = scope.crossOrigin;\r\n\t\r\n\t\t\t\tif ( imageLoader === undefined ) imageLoader = new THREE.ImageLoader();\r\n\t\r\n\t\t\t\tfunction nearest_pow2( n ) {\r\n\t\r\n\t\t\t\t\tvar l = Math.log( n ) / Math.LN2;\r\n\t\t\t\t\treturn Math.pow( 2, Math.round(  l ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfunction create_texture( where, name, sourceFile, repeat, offset, wrap, anisotropy ) {\r\n\t\r\n\t\t\t\t\tvar fullPath = texturePath + sourceFile;\r\n\t\r\n\t\t\t\t\tvar texture;\r\n\t\r\n\t\t\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\r\n\t\r\n\t\t\t\t\tif ( loader !== null ) {\r\n\t\r\n\t\t\t\t\t\ttexture = loader.load( fullPath );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\ttexture = new THREE.Texture();\r\n\t\r\n\t\t\t\t\t\tloader = imageLoader;\r\n\t\t\t\t\t\tloader.setCrossOrigin( crossOrigin );\r\n\t\t\t\t\t\tloader.load( fullPath, function ( image ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( THREE.Math.isPowerOfTwo( image.width ) === false ||\r\n\t\t\t\t\t\t\t\tTHREE.Math.isPowerOfTwo( image.height ) === false ) {\r\n\t\r\n\t\t\t\t\t\t\t\tvar width = nearest_pow2( image.width );\r\n\t\t\t\t\t\t\t\tvar height = nearest_pow2( image.height );\r\n\t\r\n\t\t\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\t\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\t\t\t\tcanvas.height = height;\r\n\t\r\n\t\t\t\t\t\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\t\t\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\r\n\t\r\n\t\t\t\t\t\t\t\ttexture.image = canvas;\r\n\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\ttexture.image = image;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttexture.sourceFile = sourceFile;\r\n\t\r\n\t\t\t\t\tif ( repeat ) {\r\n\t\r\n\t\t\t\t\t\ttexture.repeat.set( repeat[ 0 ], repeat[ 1 ] );\r\n\t\r\n\t\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( offset ) {\r\n\t\r\n\t\t\t\t\t\ttexture.offset.set( offset[ 0 ], offset[ 1 ] );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( wrap ) {\r\n\t\r\n\t\t\t\t\t\tvar wrapMap = {\r\n\t\t\t\t\t\t\t'repeat': THREE.RepeatWrapping,\r\n\t\t\t\t\t\t\t'mirror': THREE.MirroredRepeatWrapping\r\n\t\t\t\t\t\t};\r\n\t\r\n\t\t\t\t\t\tif ( wrapMap[ wrap[ 0 ] ] !== undefined ) texture.wrapS = wrapMap[ wrap[ 0 ] ];\r\n\t\t\t\t\t\tif ( wrapMap[ wrap[ 1 ] ] !== undefined ) texture.wrapT = wrapMap[ wrap[ 1 ] ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( anisotropy ) {\r\n\t\r\n\t\t\t\t\t\ttexture.anisotropy = anisotropy;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\twhere[ name ] = texture;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfunction rgb2hex( rgb ) {\r\n\t\r\n\t\t\t\t\treturn ( rgb[ 0 ] * 255 << 16 ) + ( rgb[ 1 ] * 255 << 8 ) + rgb[ 2 ] * 255;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// defaults\r\n\t\r\n\t\t\t\tvar mtype = 'MeshLambertMaterial';\r\n\t\t\t\tvar mpars = {};\r\n\t\r\n\t\t\t\t// parameters from model file\r\n\t\r\n\t\t\t\tif ( m.shading ) {\r\n\t\r\n\t\t\t\t\tvar shading = m.shading.toLowerCase();\r\n\t\r\n\t\t\t\t\tif ( shading === 'phong' ) mtype = 'MeshPhongMaterial';\r\n\t\t\t\t\telse if ( shading === 'basic' ) mtype = 'MeshBasicMaterial';\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.blending !== undefined && THREE[ m.blending ] !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.blending = THREE[ m.blending ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.transparent !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.transparent = m.transparent;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.opacity !== undefined && m.opacity < 1.0 ) {\r\n\t\r\n\t\t\t\t\tmpars.transparent = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.depthTest !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.depthTest = m.depthTest;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.depthWrite !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.depthWrite = m.depthWrite;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.visible !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.visible = m.visible;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.flipSided !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.side = THREE.BackSide;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.doubleSided !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.side = THREE.DoubleSide;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.wireframe !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.wireframe = m.wireframe;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.vertexColors !== undefined ) {\r\n\t\r\n\t\t\t\t\tif ( m.vertexColors === 'face' ) {\r\n\t\r\n\t\t\t\t\t\tmpars.vertexColors = THREE.FaceColors;\r\n\t\r\n\t\t\t\t\t} else if ( m.vertexColors ) {\r\n\t\r\n\t\t\t\t\t\tmpars.vertexColors = THREE.VertexColors;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// colors\r\n\t\r\n\t\t\t\tif ( m.colorDiffuse ) {\r\n\t\r\n\t\t\t\t\tmpars.color = rgb2hex( m.colorDiffuse );\r\n\t\r\n\t\t\t\t} else if ( m.DbgColor ) {\r\n\t\r\n\t\t\t\t\tmpars.color = m.DbgColor;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.colorEmissive ) {\r\n\t\r\n\t\t\t\t\tmpars.emissive = rgb2hex( m.colorEmissive );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( mtype === 'MeshPhongMaterial' ) {\r\n\t\r\n\t\t\t\t\tif ( m.colorSpecular ) {\r\n\t\r\n\t\t\t\t\t\tmpars.specular = rgb2hex( m.colorSpecular );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.specularCoef ) {\r\n\t\r\n\t\t\t\t\t\tmpars.shininess = m.specularCoef;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// modifiers\r\n\t\r\n\t\t\t\tif ( m.transparency !== undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.Loader: transparency has been renamed to opacity' );\r\n\t\t\t\t\tm.opacity = m.transparency;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.opacity !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.opacity = m.opacity;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// textures\r\n\t\r\n\t\t\t\tif ( texturePath ) {\r\n\t\r\n\t\t\t\t\tif ( m.mapDiffuse ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'map', m.mapDiffuse, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapLight ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'lightMap', m.mapLight, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapAO ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'aoMap', m.mapAO, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapBump ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'bumpMap', m.mapBump, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapNormal ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'normalMap', m.mapNormal, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapSpecular ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'specularMap', m.mapSpecular, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapAlpha ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'alphaMap', m.mapAlpha, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t//\r\n\t\r\n\t\t\t\tif ( m.mapBumpScale ) {\r\n\t\r\n\t\t\t\t\tmpars.bumpScale = m.mapBumpScale;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.mapNormalFactor ) {\r\n\t\r\n\t\t\t\t\tmpars.normalScale = new THREE.Vector2( m.mapNormalFactor, m.mapNormalFactor );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar material = new THREE[ mtype ]( mpars );\r\n\t\r\n\t\t\t\tif ( m.DbgName !== undefined ) material.name = m.DbgName;\r\n\t\r\n\t\t\t\treturn material;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t} )()\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Loader.Handlers = {\r\n\t\r\n\t\thandlers: [],\r\n\t\r\n\t\tadd: function ( regex, loader ) {\r\n\t\r\n\t\t\tthis.handlers.push( regex, loader );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget: function ( file ) {\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.handlers.length; i < l; i += 2 ) {\r\n\t\r\n\t\t\t\tvar regex = this.handlers[ i ];\r\n\t\t\t\tvar loader  = this.handlers[ i + 1 ];\r\n\t\r\n\t\t\t\tif ( regex.test( file ) ) {\r\n\t\r\n\t\t\t\t\treturn loader;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn null;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/XHRLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.XHRLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.XHRLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.XHRLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar cached = THREE.Cache.get( url );\r\n\t\r\n\t\t\tif ( cached !== undefined ) {\r\n\t\r\n\t\t\t\tif ( onLoad ) {\r\n\t\r\n\t\t\t\t\tsetTimeout( function () {\r\n\t\r\n\t\t\t\t\t\tonLoad( cached );\r\n\t\r\n\t\t\t\t\t}, 0 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn cached;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar request = new XMLHttpRequest();\r\n\t\t\trequest.open( 'GET', url, true );\r\n\t\r\n\t\t\trequest.addEventListener( 'load', function ( event ) {\r\n\t\r\n\t\t\t\tTHREE.Cache.add( url, this.response );\r\n\t\r\n\t\t\t\tif ( onLoad ) onLoad( this.response );\r\n\t\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\t\r\n\t\t\t}, false );\r\n\t\r\n\t\t\tif ( onProgress !== undefined ) {\r\n\t\r\n\t\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\t\r\n\t\t\t\t\tonProgress( event );\r\n\t\r\n\t\t\t\t}, false );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\trequest.addEventListener( 'error', function ( event ) {\r\n\t\r\n\t\t\t\tif ( onError ) onError( event );\r\n\t\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\r\n\t\t\t}, false );\r\n\t\r\n\t\t\tif ( this.crossOrigin !== undefined ) request.crossOrigin = this.crossOrigin;\r\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\t\r\n\t\t\trequest.send( null );\r\n\t\r\n\t\t\tscope.manager.itemStart( url );\r\n\t\r\n\t\t\treturn request;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetResponseType: function ( value ) {\r\n\t\r\n\t\t\tthis.responseType = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetWithCredentials: function ( value ) {\r\n\t\r\n\t\t\tthis.withCredentials = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/ImageLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.ImageLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ImageLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.ImageLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar cached = THREE.Cache.get( url );\r\n\t\r\n\t\t\tif ( cached !== undefined ) {\r\n\t\r\n\t\t\t\tif ( onLoad ) {\r\n\t\r\n\t\t\t\t\tsetTimeout( function () {\r\n\t\r\n\t\t\t\t\t\tonLoad( cached );\r\n\t\r\n\t\t\t\t\t}, 0 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn cached;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar image = document.createElement( 'img' );\r\n\t\r\n\t\t\timage.addEventListener( 'load', function ( event ) {\r\n\t\r\n\t\t\t\tTHREE.Cache.add( url, this );\r\n\t\r\n\t\t\t\tif ( onLoad ) onLoad( this );\r\n\t\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\t\r\n\t\t\t}, false );\r\n\t\r\n\t\t\tif ( onProgress !== undefined ) {\r\n\t\r\n\t\t\t\timage.addEventListener( 'progress', function ( event ) {\r\n\t\r\n\t\t\t\t\tonProgress( event );\r\n\t\r\n\t\t\t\t}, false );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\timage.addEventListener( 'error', function ( event ) {\r\n\t\r\n\t\t\t\tif ( onError ) onError( event );\r\n\t\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\r\n\t\t\t}, false );\r\n\t\r\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\t\r\n\t\t\tscope.manager.itemStart( url );\r\n\t\r\n\t\t\timage.src = url;\r\n\t\r\n\t\t\treturn image;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/JSONLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.JSONLoader = function ( manager ) {\r\n\t\r\n\t\tif ( typeof manager === 'boolean' ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\r\n\t\t\tmanager = undefined;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t\tthis.withCredentials = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.JSONLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.JSONLoader,\r\n\t\r\n\t\t// Deprecated\r\n\t\t\r\n\t\tget statusDomElement () {\r\n\t\r\n\t\t\tif ( this._statusDomElement === undefined ) {\r\n\t\r\n\t\t\t\tthis._statusDomElement = document.createElement( 'div' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tconsole.warn( 'THREE.JSONLoader: .statusDomElement has been removed.' );\r\n\t\t\treturn this._statusDomElement;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tload: function( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : THREE.Loader.prototype.extractUrlBase( url );\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.setWithCredentials( this.withCredentials );\r\n\t\t\tloader.load( url, function ( text ) {\r\n\t\r\n\t\t\t\tvar json = JSON.parse( text );\r\n\t\t\t\tvar metadata = json.metadata;\r\n\t\r\n\t\t\t\tif ( metadata !== undefined ) {\r\n\t\r\n\t\t\t\t\tif ( metadata.type === 'object' ) {\r\n\t\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( metadata.type === 'scene' ) {\r\n\t\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar object = scope.parse( json, texturePath );\r\n\t\t\t\tonLoad( object.geometry, object.materials );\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetTexturePath: function ( value ) {\r\n\t\r\n\t\t\tthis.texturePath = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparse: function ( json, texturePath ) {\r\n\t\r\n\t\t\tvar geometry = new THREE.Geometry(),\r\n\t\t\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\r\n\t\r\n\t\t\tparseModel( scale );\r\n\t\r\n\t\t\tparseSkin();\r\n\t\t\tparseMorphing( scale );\r\n\t\r\n\t\t\tgeometry.computeFaceNormals();\r\n\t\t\tgeometry.computeBoundingSphere();\r\n\t\r\n\t\t\tfunction parseModel( scale ) {\r\n\t\r\n\t\t\t\tfunction isBitSet( value, position ) {\r\n\t\r\n\t\t\t\t\treturn value & ( 1 << position );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar i, j, fi,\r\n\t\r\n\t\t\t\toffset, zLength,\r\n\t\r\n\t\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\r\n\t\r\n\t\t\t\ttype,\r\n\t\t\t\tisQuad,\r\n\t\t\t\thasMaterial,\r\n\t\t\t\thasFaceVertexUv,\r\n\t\t\t\thasFaceNormal, hasFaceVertexNormal,\r\n\t\t\t\thasFaceColor, hasFaceVertexColor,\r\n\t\r\n\t\t\tvertex, face, faceA, faceB, hex, normal,\r\n\t\r\n\t\t\t\tuvLayer, uv, u, v,\r\n\t\r\n\t\t\t\tfaces = json.faces,\r\n\t\t\t\tvertices = json.vertices,\r\n\t\t\t\tnormals = json.normals,\r\n\t\t\t\tcolors = json.colors,\r\n\t\r\n\t\t\t\tnUvLayers = 0;\r\n\t\r\n\t\t\t\tif ( json.uvs !== undefined ) {\r\n\t\r\n\t\t\t\t\t// disregard empty arrays\r\n\t\r\n\t\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\toffset = 0;\r\n\t\t\t\tzLength = vertices.length;\r\n\t\r\n\t\t\t\twhile ( offset < zLength ) {\r\n\t\r\n\t\t\t\t\tvertex = new THREE.Vector3();\r\n\t\r\n\t\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\r\n\t\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\r\n\t\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\r\n\t\r\n\t\t\t\t\tgeometry.vertices.push( vertex );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\toffset = 0;\r\n\t\t\t\tzLength = faces.length;\r\n\t\r\n\t\t\t\twhile ( offset < zLength ) {\r\n\t\r\n\t\t\t\t\ttype = faces[ offset ++ ];\r\n\t\r\n\t\r\n\t\t\t\t\tisQuad              = isBitSet( type, 0 );\r\n\t\t\t\t\thasMaterial         = isBitSet( type, 1 );\r\n\t\t\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\r\n\t\t\t\t\thasFaceNormal       = isBitSet( type, 4 );\r\n\t\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\r\n\t\t\t\t\thasFaceColor\t     = isBitSet( type, 6 );\r\n\t\t\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\r\n\t\r\n\t\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\t\r\n\t\t\t\t\tif ( isQuad ) {\r\n\t\r\n\t\t\t\t\t\tfaceA = new THREE.Face3();\r\n\t\t\t\t\t\tfaceA.a = faces[ offset ];\r\n\t\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\r\n\t\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\r\n\t\r\n\t\t\t\t\t\tfaceB = new THREE.Face3();\r\n\t\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\r\n\t\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\r\n\t\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\r\n\t\r\n\t\t\t\t\t\toffset += 4;\r\n\t\r\n\t\t\t\t\t\tif ( hasMaterial ) {\r\n\t\r\n\t\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\r\n\t\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t// to get face <=> uv index correspondence\r\n\t\r\n\t\t\t\t\t\tfi = geometry.faces.length;\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\t\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\r\n\t\r\n\t\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\t\r\n\t\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\t\r\n\t\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\t\r\n\t\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceNormal ) {\r\n\t\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\t\r\n\t\t\t\t\t\t\tfaceA.normal.set(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\t\r\n\t\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t\t);\r\n\t\r\n\t\r\n\t\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n\t\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceColor ) {\r\n\t\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\t\r\n\t\t\t\t\t\t\tfaceA.color.setHex( hex );\r\n\t\t\t\t\t\t\tfaceB.color.setHex( hex );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\t\r\n\t\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\r\n\t\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tgeometry.faces.push( faceA );\r\n\t\t\t\t\t\tgeometry.faces.push( faceB );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tface = new THREE.Face3();\r\n\t\t\t\t\t\tface.a = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.b = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.c = faces[ offset ++ ];\r\n\t\r\n\t\t\t\t\t\tif ( hasMaterial ) {\r\n\t\r\n\t\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tface.materialIndex = materialIndex;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t// to get face <=> uv index correspondence\r\n\t\r\n\t\t\t\t\t\tfi = geometry.faces.length;\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\t\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\r\n\t\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\t\r\n\t\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\t\r\n\t\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\t\r\n\t\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceNormal ) {\r\n\t\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\t\r\n\t\t\t\t\t\t\tface.normal.set(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\t\r\n\t\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\t\tface.vertexNormals.push( normal );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceColor ) {\r\n\t\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tgeometry.faces.push( face );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tfunction parseSkin() {\r\n\t\r\n\t\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\t\r\n\t\t\t\tif ( json.skinWeights ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\t\r\n\t\t\t\t\t\tvar x =                               json.skinWeights[ i ];\r\n\t\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n\t\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n\t\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\t\r\n\t\t\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( json.skinIndices ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\t\r\n\t\t\t\t\t\tvar a =                               json.skinIndices[ i ];\r\n\t\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n\t\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n\t\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\t\r\n\t\t\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.bones = json.bones;\r\n\t\r\n\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n\t\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t// could change this to json.animations[0] or remove completely\r\n\t\r\n\t\t\t\tgeometry.animation = json.animation;\r\n\t\t\t\tgeometry.animations = json.animations;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tfunction parseMorphing( scale ) {\r\n\t\r\n\t\t\t\tif ( json.morphTargets !== undefined ) {\r\n\t\r\n\t\t\t\t\tvar i, l, v, vl, dstVertices, srcVertices;\r\n\t\r\n\t\t\t\t\tfor ( i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tgeometry.morphTargets[ i ] = {};\r\n\t\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n\t\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\r\n\t\r\n\t\t\t\t\t\tdstVertices = geometry.morphTargets[ i ].vertices;\r\n\t\t\t\t\t\tsrcVertices = json.morphTargets[ i ].vertices;\r\n\t\r\n\t\t\t\t\t\tfor ( v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\r\n\t\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\r\n\t\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\r\n\t\r\n\t\t\t\t\t\t\tdstVertices.push( vertex );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( json.morphColors !== undefined ) {\r\n\t\r\n\t\t\t\t\tvar i, l, c, cl, dstColors, srcColors, color;\r\n\t\r\n\t\t\t\t\tfor ( i = 0, l = json.morphColors.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tgeometry.morphColors[ i ] = {};\r\n\t\t\t\t\t\tgeometry.morphColors[ i ].name = json.morphColors[ i ].name;\r\n\t\t\t\t\t\tgeometry.morphColors[ i ].colors = [];\r\n\t\r\n\t\t\t\t\t\tdstColors = geometry.morphColors[ i ].colors;\r\n\t\t\t\t\t\tsrcColors = json.morphColors[ i ].colors;\r\n\t\r\n\t\t\t\t\t\tfor ( c = 0, cl = srcColors.length; c < cl; c += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\tcolor = new THREE.Color( 0xffaa00 );\r\n\t\t\t\t\t\t\tcolor.setRGB( srcColors[ c ], srcColors[ c + 1 ], srcColors[ c + 2 ] );\r\n\t\t\t\t\t\t\tdstColors.push( color );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\r\n\t\r\n\t\t\t\treturn { geometry: geometry };\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tvar materials = THREE.Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\r\n\t\r\n\t\t\t\treturn { geometry: geometry, materials: materials };\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/LoadingManager.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\r\n\t\r\n\t\tvar scope = this;\r\n\t\r\n\t\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\r\n\t\r\n\t\tthis.onStart = undefined;\r\n\t\tthis.onLoad = onLoad;\r\n\t\tthis.onProgress = onProgress;\r\n\t\tthis.onError = onError;\r\n\t\r\n\t\tthis.itemStart = function ( url ) {\r\n\t\r\n\t\t\titemsTotal ++;\r\n\t\r\n\t\t\tif ( isLoading === false ) {\r\n\t\r\n\t\t\t\tif ( scope.onStart !== undefined ) {\r\n\t\r\n\t\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tisLoading = true;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.itemEnd = function ( url ) {\r\n\t\r\n\t\t\titemsLoaded ++;\r\n\t\r\n\t\t\tif ( scope.onProgress !== undefined ) {\r\n\t\r\n\t\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( itemsLoaded === itemsTotal ) {\r\n\t\r\n\t\t\t\tisLoading = false;\r\n\t\r\n\t\t\t\tif ( scope.onLoad !== undefined ) {\r\n\t\r\n\t\t\t\t\tscope.onLoad();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.itemError = function ( url ) {\r\n\t\r\n\t\t\tif ( scope.onError !== undefined ) {\r\n\t\r\n\t\t\t\tscope.onError( url );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DefaultLoadingManager = new THREE.LoadingManager();\r\n\t\r\n\t// File:src/loaders/BufferGeometryLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.BufferGeometryLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BufferGeometryLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.BufferGeometryLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.load( url, function ( text ) {\r\n\t\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\t\r\n\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparse: function ( json ) {\r\n\t\r\n\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\r\n\t\t\tvar index = json.data.index;\r\n\t\r\n\t\t\tif ( index !== undefined ) {\r\n\t\r\n\t\t\t\tvar typedArray = new self[ index.type ]( index.array );\r\n\t\t\t\tgeometry.setIndex( new THREE.BufferAttribute( typedArray, 1 ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar attributes = json.data.attributes;\r\n\t\r\n\t\t\tfor ( var key in attributes ) {\r\n\t\r\n\t\t\t\tvar attribute = attributes[ key ];\r\n\t\t\t\tvar typedArray = new self[ attribute.type ]( attribute.array );\r\n\t\r\n\t\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\t\r\n\t\t\tif ( groups !== undefined ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\r\n\t\r\n\t\t\t\t\tvar group = groups[ i ];\r\n\t\r\n\t\t\t\t\tgeometry.addGroup( group.start, group.count );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar boundingSphere = json.data.boundingSphere;\r\n\t\r\n\t\t\tif ( boundingSphere !== undefined ) {\r\n\t\r\n\t\t\t\tvar center = new THREE.Vector3();\r\n\t\r\n\t\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\t\r\n\t\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn geometry;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/MaterialLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.MaterialLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\tthis.textures = {};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MaterialLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.MaterialLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.load( url, function ( text ) {\r\n\t\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\t\r\n\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetTextures: function ( value ) {\r\n\t\r\n\t\t\tthis.textures = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetTexture: function ( name ) {\r\n\t\r\n\t\t\tvar textures = this.textures;\r\n\t\r\n\t\t\tif ( textures[ name ] === undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn textures[ name ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparse: function ( json ) {\r\n\t\r\n\t\t\tvar material = new THREE[ json.type ];\r\n\t\t\tmaterial.uuid = json.uuid;\r\n\t\r\n\t\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n\t\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\t\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n\t\t\tif ( json.shading !== undefined ) material.shading = json.shading;\r\n\t\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\t\r\n\t\t\t// for PointsMaterial\r\n\t\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\t\r\n\t\t\t// maps\r\n\t\r\n\t\t\tif ( json.map !== undefined ) material.map = this.getTexture( json.map );\r\n\t\r\n\t\t\tif ( json.alphaMap !== undefined ) {\r\n\t\r\n\t\t\t\tmaterial.alphaMap = this.getTexture( json.alphaMap );\r\n\t\t\t\tmaterial.transparent = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( json.bumpMap !== undefined ) material.bumpMap = this.getTexture( json.bumpMap );\r\n\t\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\t\r\n\t\t\tif ( json.normalMap !== undefined ) material.normalMap = this.getTexture( json.normalMap );\r\n\t\t\tif ( json.normalScale )\tmaterial.normalScale = new THREE.Vector2( json.normalScale, json.normalScale );\r\n\t\r\n\t\t\tif ( json.displacementMap !== undefined ) material.displacementMap = this.getTexture( json.displacementMap );\r\n\t\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\t\r\n\t\t\tif ( json.specularMap !== undefined ) material.specularMap = this.getTexture( json.specularMap );\r\n\t\r\n\t\t\tif ( json.envMap !== undefined ) {\r\n\t\r\n\t\t\t\tmaterial.envMap = this.getTexture( json.envMap );\r\n\t\t\t\tmaterial.combine = THREE.MultiplyOperation;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( json.reflectivity ) material.reflectivity = json.reflectivity;\r\n\t\r\n\t\t\tif ( json.lightMap !== undefined ) material.lightMap = this.getTexture( json.lightMap );\r\n\t\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\t\r\n\t\t\tif ( json.aoMap !== undefined ) material.aoMap = this.getTexture( json.aoMap );\r\n\t\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\t\r\n\t\t\t// MeshFaceMaterial\r\n\t\r\n\t\t\tif ( json.materials !== undefined ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn material;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/ObjectLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.ObjectLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\tthis.texturePath = '';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ObjectLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.ObjectLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tif ( this.texturePath === '' ) {\r\n\t\r\n\t\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.load( url, function ( text ) {\r\n\t\r\n\t\t\t\tscope.parse( JSON.parse( text ), onLoad );\r\n\t\r\n\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetTexturePath: function ( value ) {\r\n\t\r\n\t\t\tthis.texturePath = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparse: function ( json, onLoad ) {\r\n\t\r\n\t\t\tvar geometries = this.parseGeometries( json.geometries );\r\n\t\r\n\t\t\tvar images = this.parseImages( json.images, function () {\r\n\t\r\n\t\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t\tvar textures  = this.parseTextures( json.textures, images );\r\n\t\t\tvar materials = this.parseMaterials( json.materials, textures );\r\n\t\t\tvar object = this.parseObject( json.object, geometries, materials );\r\n\t\r\n\t\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\t\r\n\t\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn object;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparseGeometries: function ( json ) {\r\n\t\r\n\t\t\tvar geometries = {};\r\n\t\r\n\t\t\tif ( json !== undefined ) {\r\n\t\r\n\t\t\t\tvar geometryLoader = new THREE.JSONLoader();\r\n\t\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar geometry;\r\n\t\t\t\t\tvar data = json[ i ];\r\n\t\r\n\t\t\t\t\tswitch ( data.type ) {\r\n\t\r\n\t\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.BoxGeometry(\r\n\t\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.CircleBufferGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'CircleGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.CircleGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'CylinderGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.CylinderGeometry(\r\n\t\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'SphereGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.SphereGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.SphereBufferGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.DodecahedronGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'OctahedronGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.OctahedronGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.TetrahedronGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'RingGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.RingGeometry(\r\n\t\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'TorusGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.TorusGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.TorusKnotGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\t\tdata.q,\r\n\t\t\t\t\t\t\t\tdata.heightScale\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'TextGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.TextGeometry(\r\n\t\t\t\t\t\t\t\tdata.text,\r\n\t\t\t\t\t\t\t\tdata.data\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'BufferGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'Geometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data, this.texturePath ).geometry;\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tdefault:\r\n\t\r\n\t\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\t\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tgeometry.uuid = data.uuid;\r\n\t\r\n\t\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\t\r\n\t\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn geometries;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparseMaterials: function ( json, textures ) {\r\n\t\r\n\t\t\tvar materials = {};\r\n\t\r\n\t\t\tif ( json !== undefined ) {\r\n\t\r\n\t\t\t\tvar loader = new THREE.MaterialLoader();\r\n\t\t\t\tloader.setTextures( textures );\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar material = loader.parse( json[ i ] );\r\n\t\t\t\t\tmaterials[ material.uuid ] = material;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn materials;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparseImages: function ( json, onLoad ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\t\tvar images = {};\r\n\t\r\n\t\t\tfunction loadImage( url ) {\r\n\t\r\n\t\t\t\tscope.manager.itemStart( url );\r\n\t\r\n\t\t\t\treturn loader.load( url, function () {\r\n\t\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\t\r\n\t\t\t\t} );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( json !== undefined && json.length > 0 ) {\r\n\t\r\n\t\t\t\tvar manager = new THREE.LoadingManager( onLoad );\r\n\t\r\n\t\t\t\tvar loader = new THREE.ImageLoader( manager );\r\n\t\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar image = json[ i ];\r\n\t\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\r\n\t\r\n\t\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn images;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparseTextures: function ( json, images ) {\r\n\t\r\n\t\t\tfunction parseConstant( value ) {\r\n\t\r\n\t\t\t\tif ( typeof( value ) === 'number' ) return value;\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\t\r\n\t\t\t\treturn THREE[ value ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar textures = {};\r\n\t\r\n\t\t\tif ( json !== undefined ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar data = json[ i ];\r\n\t\r\n\t\t\t\t\tif ( data.image === undefined ) {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar texture = new THREE.Texture( images[ data.image ] );\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\t\ttexture.uuid = data.uuid;\r\n\t\r\n\t\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\t\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping );\r\n\t\t\t\t\tif ( data.offset !== undefined ) texture.offset = new THREE.Vector2( data.offset[ 0 ], data.offset[ 1 ] );\r\n\t\t\t\t\tif ( data.repeat !== undefined ) texture.repeat = new THREE.Vector2( data.repeat[ 0 ], data.repeat[ 1 ] );\r\n\t\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter );\r\n\t\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter );\r\n\t\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\t\t\t\t\tif ( Array.isArray( data.wrap ) ) {\r\n\t\r\n\t\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ] );\r\n\t\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ] );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttextures[ data.uuid ] = texture;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn textures;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparseObject: function () {\r\n\t\r\n\t\t\tvar matrix = new THREE.Matrix4();\r\n\t\r\n\t\t\treturn function ( data, geometries, materials ) {\r\n\t\r\n\t\t\t\tvar object;\r\n\t\r\n\t\t\t\tvar getGeometry = function ( name ) {\r\n\t\r\n\t\t\t\t\tif ( geometries[ name ] === undefined ) {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\treturn geometries[ name ];\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tvar getMaterial = function ( name ) {\r\n\t\r\n\t\t\t\t\tif ( materials[ name ] === undefined ) {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\treturn materials[ name ];\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tswitch ( data.type ) {\r\n\t\r\n\t\t\t\t\tcase 'Scene':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Scene();\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'PerspectiveCamera':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'OrthographicCamera':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'AmbientLight':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.AmbientLight( data.color );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'DirectionalLight':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'PointLight':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'SpotLight':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.exponent, data.decay );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'HemisphereLight':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Mesh':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Mesh( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'LOD':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.LOD();\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Line':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'PointCloud':\r\n\t\t\t\t\tcase 'Points':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Sprite':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Sprite( getMaterial( data.material ) );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Group':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Group();\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tdefault:\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Object3D();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tobject.uuid = data.uuid;\r\n\t\r\n\t\t\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\t\t\t\tif ( data.matrix !== undefined ) {\r\n\t\r\n\t\t\t\t\tmatrix.fromArray( data.matrix );\r\n\t\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\t\r\n\t\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\t\r\n\t\t\t\tif ( data.children !== undefined ) {\r\n\t\r\n\t\t\t\t\tfor ( var child in data.children ) {\r\n\t\r\n\t\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( data.type === 'LOD' ) {\r\n\t\r\n\t\t\t\t\tvar levels = data.levels;\r\n\t\r\n\t\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar level = levels[ l ];\r\n\t\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\r\n\t\r\n\t\t\t\t\t\tif ( child !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn object;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}()\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/TextureLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.TextureLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TextureLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.TextureLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar loader = new THREE.ImageLoader( scope.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.load( url, function ( image ) {\r\n\t\r\n\t\t\t\tvar texture = new THREE.Texture( image );\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\tif ( onLoad !== undefined ) {\r\n\t\r\n\t\t\t\t\tonLoad( texture );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/BinaryTextureLoader.js\r\n\t\r\n\t/**\r\n\t * @author Nikos M. / https://github.com/foo123/\r\n\t *\r\n\t * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n\t */\r\n\t\r\n\tTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t\t// override in sub classes\r\n\t\tthis._parser = null;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BinaryTextureLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.BinaryTextureLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar texture = new THREE.DataTexture();\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\t\r\n\t\t\t\tvar texData = scope._parser( buffer );\r\n\t\r\n\t\t\t\tif ( ! texData ) return;\r\n\t\r\n\t\t\t\tif ( undefined !== texData.image ) {\r\n\t\r\n\t\t\t\t\ttexture.image = texData.image;\r\n\t\r\n\t\t\t\t} else if ( undefined !== texData.data ) {\r\n\t\r\n\t\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\t\ttexture.image.data = texData.data;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\r\n\t\r\n\t\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\r\n\t\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\r\n\t\r\n\t\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\t\r\n\t\t\t\tif ( undefined !== texData.format ) {\r\n\t\r\n\t\t\t\t\ttexture.format = texData.format;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t\tif ( undefined !== texData.type ) {\r\n\t\r\n\t\t\t\t\ttexture.type = texData.type;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( undefined !== texData.mipmaps ) {\r\n\t\r\n\t\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( 1 === texData.mipmapCount ) {\r\n\t\r\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\t\r\n\t\t\t}, onProgress, onError );\r\n\t\r\n\t\r\n\t\t\treturn texture;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/CompressedTextureLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t *\r\n\t * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n\t */\r\n\t\r\n\tTHREE.CompressedTextureLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t\t// override in sub classes\r\n\t\tthis._parser = null;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.CompressedTextureLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.CompressedTextureLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar images = [];\r\n\t\r\n\t\t\tvar texture = new THREE.CompressedTexture();\r\n\t\t\ttexture.image = images;\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\r\n\t\t\tif ( Array.isArray( url ) ) {\r\n\t\r\n\t\t\t\tvar loaded = 0;\r\n\t\r\n\t\t\t\tvar loadTexture = function ( i ) {\r\n\t\r\n\t\t\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\t\r\n\t\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\t\r\n\t\t\t\t\t\timages[ i ] = {\r\n\t\t\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t\t\t};\r\n\t\r\n\t\t\t\t\t\tloaded += 1;\r\n\t\r\n\t\t\t\t\t\tif ( loaded === 6 ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n\t \t\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\t\r\n\t\t\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\t\r\n\t\t\t\t\tloadTexture( i );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\t\r\n\t\t\t\tloader.load( url, function ( buffer ) {\r\n\t\r\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\t\r\n\t\t\t\t\tif ( texDatas.isCubemap ) {\r\n\t\r\n\t\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\t\r\n\t\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\r\n\t\r\n\t\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\r\n\t\r\n\t\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\t\r\n\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\t\r\n\t\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn texture;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/Material.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Material = function () {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.type = 'Material';\r\n\t\r\n\t\tthis.side = THREE.FrontSide;\r\n\t\r\n\t\tthis.opacity = 1;\r\n\t\tthis.transparent = false;\r\n\t\r\n\t\tthis.blending = THREE.NormalBlending;\r\n\t\r\n\t\tthis.blendSrc = THREE.SrcAlphaFactor;\r\n\t\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\r\n\t\tthis.blendEquation = THREE.AddEquation;\r\n\t\tthis.blendSrcAlpha = null;\r\n\t\tthis.blendDstAlpha = null;\r\n\t\tthis.blendEquationAlpha = null;\r\n\t\r\n\t\tthis.depthFunc = THREE.LessEqualDepth;\r\n\t\tthis.depthTest = true;\r\n\t\tthis.depthWrite = true;\r\n\t\r\n\t\tthis.colorWrite = true;\r\n\t\r\n\t\tthis.precision = null; // override the renderer's default precision for this material\r\n\t\r\n\t\tthis.polygonOffset = false;\r\n\t\tthis.polygonOffsetFactor = 0;\r\n\t\tthis.polygonOffsetUnits = 0;\r\n\t\r\n\t\tthis.alphaTest = 0;\r\n\t\r\n\t\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\t\r\n\t\tthis.visible = true;\r\n\t\r\n\t\tthis._needsUpdate = true;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Material.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Material,\r\n\t\r\n\t\tget needsUpdate () {\r\n\t\r\n\t\t\treturn this._needsUpdate;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset needsUpdate ( value ) {\r\n\t\r\n\t\t\tif ( value === true ) this.update();\r\n\t\r\n\t\t\tthis._needsUpdate = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetValues: function ( values ) {\r\n\t\r\n\t\t\tif ( values === undefined ) return;\r\n\t\r\n\t\t\tfor ( var key in values ) {\r\n\t\r\n\t\t\t\tvar newValue = values[ key ];\r\n\t\r\n\t\t\t\tif ( newValue === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar currentValue = this[ key ];\r\n\t\r\n\t\t\t\tif ( currentValue === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( currentValue instanceof THREE.Color ) {\r\n\t\r\n\t\t\t\t\tcurrentValue.set( newValue );\r\n\t\r\n\t\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\r\n\t\r\n\t\t\t\t\tcurrentValue.copy( newValue );\r\n\t\r\n\t\t\t\t} else if ( key === 'overdraw' ) {\r\n\t\r\n\t\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\r\n\t\t\t\t\tthis[ key ] = Number( newValue );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis[ key ] = newValue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoJSON: function ( meta ) {\r\n\t\r\n\t\t\tvar data = {\r\n\t\t\t\tmetadata: {\r\n\t\t\t\t\tversion: 4.4,\r\n\t\t\t\t\ttype: 'Material',\r\n\t\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\t// standard Material serialization\r\n\t\t\tdata.uuid = this.uuid;\r\n\t\t\tdata.type = this.type;\r\n\t\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\r\n\t\t\tif ( this.color instanceof THREE.Color ) data.color = this.color.getHex();\r\n\t\t\tif ( this.emissive instanceof THREE.Color ) data.emissive = this.emissive.getHex();\r\n\t\t\tif ( this.specular instanceof THREE.Color ) data.specular = this.specular.getHex();\r\n\t\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\t\r\n\t\t\tif ( this.map instanceof THREE.Texture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\t\tif ( this.alphaMap instanceof THREE.Texture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\t\tif ( this.lightMap instanceof THREE.Texture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\t\t\tif ( this.bumpMap instanceof THREE.Texture ) {\r\n\t\r\n\t\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\t\tdata.bumpScale = this.bumpScale;\r\n\t\r\n\t\t\t}\r\n\t\t\tif ( this.normalMap instanceof THREE.Texture ) {\r\n\t\r\n\t\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\t\tdata.normalScale = this.normalScale; // Removed for now, causes issue in editor ui.js\r\n\t\r\n\t\t\t}\r\n\t\t\tif ( this.displacementMap instanceof THREE.Texture ) {\r\n\t\r\n\t\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\t\tdata.displacementBias = this.displacementBias;\r\n\t\r\n\t\t\t}\r\n\t\t\tif ( this.specularMap instanceof THREE.Texture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\t\t\tif ( this.envMap instanceof THREE.Texture ) {\r\n\t\r\n\t\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\t\r\n\t\t\tif ( this.vertexColors !== undefined && this.vertexColors !== THREE.NoColors ) data.vertexColors = this.vertexColors;\r\n\t\t\tif ( this.shading !== undefined && this.shading !== THREE.SmoothShading ) data.shading = this.shading;\r\n\t\t\tif ( this.blending !== undefined && this.blending !== THREE.NormalBlending ) data.blending = this.blending;\r\n\t\t\tif ( this.side !== undefined && this.side !== THREE.FrontSide ) data.side = this.side;\r\n\t\r\n\t\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\t\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\t\r\n\t\t\treturn data;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.name = source.name;\r\n\t\r\n\t\t\tthis.side = source.side;\r\n\t\r\n\t\t\tthis.opacity = source.opacity;\r\n\t\t\tthis.transparent = source.transparent;\r\n\t\r\n\t\t\tthis.blending = source.blending;\r\n\t\r\n\t\t\tthis.blendSrc = source.blendSrc;\r\n\t\t\tthis.blendDst = source.blendDst;\r\n\t\t\tthis.blendEquation = source.blendEquation;\r\n\t\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\t\r\n\t\t\tthis.depthFunc = source.depthFunc;\r\n\t\t\tthis.depthTest = source.depthTest;\r\n\t\t\tthis.depthWrite = source.depthWrite;\r\n\t\r\n\t\t\tthis.precision = source.precision;\r\n\t\r\n\t\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\t\r\n\t\t\tthis.alphaTest = source.alphaTest;\r\n\t\r\n\t\t\tthis.overdraw = source.overdraw;\r\n\t\r\n\t\t\tthis.visible = source.visible;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdate: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'update' } );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Deprecated\r\n\t\r\n\t\tget wrapAround () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset wrapAround ( boolean ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget wrapRGB () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapRGB has been removed.' );\r\n\t\t\treturn new THREE.Color();\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\r\n\t\r\n\tTHREE.MaterialIdCount = 0;\r\n\t\r\n\t// File:src/materials/LineBasicMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  linewidth: <float>,\r\n\t *  linecap: \"round\",\r\n\t *  linejoin: \"round\",\r\n\t *\r\n\t *  vertexColors: <bool>\r\n\t *\r\n\t *  fog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.LineBasicMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'LineBasicMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff );\r\n\t\r\n\t\tthis.linewidth = 1;\r\n\t\tthis.linecap = 'round';\r\n\t\tthis.linejoin = 'round';\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\r\n\t\r\n\tTHREE.LineBasicMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\r\n\t\tthis.linewidth = source.linewidth;\r\n\t\tthis.linecap = source.linecap;\r\n\t\tthis.linejoin = source.linejoin;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/LineDashedMaterial.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  linewidth: <float>,\r\n\t *\r\n\t *  scale: <float>,\r\n\t *  dashSize: <float>,\r\n\t *  gapSize: <float>,\r\n\t *\r\n\t *  vertexColors: <bool>\r\n\t *\r\n\t *  fog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.LineDashedMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'LineDashedMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff );\r\n\t\r\n\t\tthis.linewidth = 1;\r\n\t\r\n\t\tthis.scale = 1;\r\n\t\tthis.dashSize = 3;\r\n\t\tthis.gapSize = 1;\r\n\t\r\n\t\tthis.vertexColors = false;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\r\n\t\r\n\tTHREE.LineDashedMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\t\r\n\t\tthis.linewidth = source.linewidth;\r\n\t\r\n\t\tthis.scale = source.scale;\r\n\t\tthis.dashSize = source.dashSize;\r\n\t\tthis.gapSize = source.gapSize;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MeshBasicMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  shading: THREE.SmoothShading,\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *\r\n\t *  fog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.MeshBasicMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'MeshBasicMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff ); // emissive\r\n\t\r\n\t\tthis.map = null;\r\n\t\r\n\t\tthis.aoMap = null;\r\n\t\tthis.aoMapIntensity = 1.0;\r\n\t\r\n\t\tthis.specularMap = null;\r\n\t\r\n\t\tthis.alphaMap = null;\r\n\t\r\n\t\tthis.envMap = null;\r\n\t\tthis.combine = THREE.MultiplyOperation;\r\n\t\tthis.reflectivity = 1;\r\n\t\tthis.refractionRatio = 0.98;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.shading = THREE.SmoothShading;\r\n\t\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\tthis.wireframeLinecap = 'round';\r\n\t\tthis.wireframeLinejoin = 'round';\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors;\r\n\t\r\n\t\tthis.skinning = false;\r\n\t\tthis.morphTargets = false;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\r\n\t\r\n\tTHREE.MeshBasicMaterial.prototype.copy = function ( source ) {\r\n\t\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\r\n\t\tthis.map = source.map;\r\n\t\r\n\t\tthis.aoMap = source.aoMap;\r\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\t\r\n\t\tthis.specularMap = source.specularMap;\r\n\t\r\n\t\tthis.alphaMap = source.alphaMap;\r\n\t\r\n\t\tthis.envMap = source.envMap;\r\n\t\tthis.combine = source.combine;\r\n\t\tthis.reflectivity = source.reflectivity;\r\n\t\tthis.refractionRatio = source.refractionRatio;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\tthis.shading = source.shading;\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.skinning = source.skinning;\r\n\t\tthis.morphTargets = source.morphTargets;\r\n\t\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MeshLambertMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  emissive: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>,\r\n\t *\r\n\t *\tfog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.MeshLambertMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'MeshLambertMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\t\tthis.emissive = new THREE.Color( 0x000000 );\r\n\t\r\n\t\tthis.map = null;\r\n\t\r\n\t\tthis.specularMap = null;\r\n\t\r\n\t\tthis.alphaMap = null;\r\n\t\r\n\t\tthis.envMap = null;\r\n\t\tthis.combine = THREE.MultiplyOperation;\r\n\t\tthis.reflectivity = 1;\r\n\t\tthis.refractionRatio = 0.98;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\tthis.wireframeLinecap = 'round';\r\n\t\tthis.wireframeLinejoin = 'round';\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors;\r\n\t\r\n\t\tthis.skinning = false;\r\n\t\tthis.morphTargets = false;\r\n\t\tthis.morphNormals = false;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\r\n\t\r\n\tTHREE.MeshLambertMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.emissive.copy( source.emissive );\r\n\t\r\n\t\tthis.map = source.map;\r\n\t\r\n\t\tthis.specularMap = source.specularMap;\r\n\t\r\n\t\tthis.alphaMap = source.alphaMap;\r\n\t\r\n\t\tthis.envMap = source.envMap;\r\n\t\tthis.combine = source.combine;\r\n\t\tthis.reflectivity = source.reflectivity;\r\n\t\tthis.refractionRatio = source.refractionRatio;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.skinning = source.skinning;\r\n\t\tthis.morphTargets = source.morphTargets;\r\n\t\tthis.morphNormals = source.morphNormals;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MeshPhongMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  emissive: <hex>,\r\n\t *  specular: <hex>,\r\n\t *  shininess: <float>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  lightMap: new THREE.Texture( <Image> ),\r\n\t *  lightMapIntensity: <float>\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  emissiveMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  bumpMap: new THREE.Texture( <Image> ),\r\n\t *  bumpScale: <float>,\r\n\t *\r\n\t *  normalMap: new THREE.Texture( <Image> ),\r\n\t *  normalScale: <Vector2>,\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>,\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  shading: THREE.SmoothShading,\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>,\r\n\t *\r\n\t *\tfog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.MeshPhongMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'MeshPhongMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\t\tthis.emissive = new THREE.Color( 0x000000 );\r\n\t\tthis.specular = new THREE.Color( 0x111111 );\r\n\t\tthis.shininess = 30;\r\n\t\r\n\t\tthis.metal = false;\r\n\t\r\n\t\tthis.map = null;\r\n\t\r\n\t\tthis.lightMap = null;\r\n\t\tthis.lightMapIntensity = 1.0;\r\n\t\r\n\t\tthis.aoMap = null;\r\n\t\tthis.aoMapIntensity = 1.0;\r\n\t\r\n\t\tthis.emissiveMap = null;\r\n\t\r\n\t\tthis.bumpMap = null;\r\n\t\tthis.bumpScale = 1;\r\n\t\r\n\t\tthis.normalMap = null;\r\n\t\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\t\r\n\t\tthis.displacementMap = null;\r\n\t\tthis.displacementScale = 1;\r\n\t\tthis.displacementBias = 0;\r\n\t\r\n\t\tthis.specularMap = null;\r\n\t\r\n\t\tthis.alphaMap = null;\r\n\t\r\n\t\tthis.envMap = null;\r\n\t\tthis.combine = THREE.MultiplyOperation;\r\n\t\tthis.reflectivity = 1;\r\n\t\tthis.refractionRatio = 0.98;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.shading = THREE.SmoothShading;\r\n\t\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\tthis.wireframeLinecap = 'round';\r\n\t\tthis.wireframeLinejoin = 'round';\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors;\r\n\t\r\n\t\tthis.skinning = false;\r\n\t\tthis.morphTargets = false;\r\n\t\tthis.morphNormals = false;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\r\n\t\r\n\tTHREE.MeshPhongMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.emissive.copy( source.emissive );\r\n\t\tthis.specular.copy( source.specular );\r\n\t\tthis.shininess = source.shininess;\r\n\t\r\n\t\tthis.metal = source.metal;\r\n\t\r\n\t\tthis.map = source.map;\r\n\t\r\n\t\tthis.lightMap = source.lightMap;\r\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\t\r\n\t\tthis.aoMap = source.aoMap;\r\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\t\r\n\t\tthis.emissiveMap = source.emissiveMap;\r\n\t\r\n\t\tthis.bumpMap = source.bumpMap;\r\n\t\tthis.bumpScale = source.bumpScale;\r\n\t\r\n\t\tthis.normalMap = source.normalMap;\r\n\t\tthis.normalScale.copy( source.normalScale );\r\n\t\r\n\t\tthis.displacementMap = source.displacementMap;\r\n\t\tthis.displacementScale = source.displacementScale;\r\n\t\tthis.displacementBias = source.displacementBias;\r\n\t\r\n\t\tthis.specularMap = source.specularMap;\r\n\t\r\n\t\tthis.alphaMap = source.alphaMap;\r\n\t\r\n\t\tthis.envMap = source.envMap;\r\n\t\tthis.combine = source.combine;\r\n\t\tthis.reflectivity = source.reflectivity;\r\n\t\tthis.refractionRatio = source.refractionRatio;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\tthis.shading = source.shading;\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.skinning = source.skinning;\r\n\t\tthis.morphTargets = source.morphTargets;\r\n\t\tthis.morphNormals = source.morphNormals;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MeshDepthMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.MeshDepthMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'MeshDepthMaterial';\r\n\t\r\n\t\tthis.morphTargets = false;\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\r\n\t\r\n\tTHREE.MeshDepthMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MeshNormalMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  shading: THREE.FlatShading,\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.MeshNormalMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this, parameters );\r\n\t\r\n\t\tthis.type = 'MeshNormalMaterial';\r\n\t\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\r\n\t\tthis.morphTargets = false;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\r\n\t\r\n\tTHREE.MeshNormalMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MultiMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.MultiMaterial = function ( materials ) {\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.type = 'MultiMaterial';\r\n\t\r\n\t\tthis.materials = materials instanceof Array ? materials : [];\r\n\t\r\n\t\tthis.visible = true;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MultiMaterial.prototype = {\r\n\t\r\n\t\tconstructor: THREE.MultiMaterial,\r\n\t\r\n\t\ttoJSON: function () {\r\n\t\r\n\t\t\tvar output = {\r\n\t\t\t\tmetadata: {\r\n\t\t\t\t\tversion: 4.2,\r\n\t\t\t\t\ttype: 'material',\r\n\t\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t\t},\r\n\t\t\t\tuuid: this.uuid,\r\n\t\t\t\ttype: this.type,\r\n\t\t\t\tmaterials: []\r\n\t\t\t};\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.materials.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\toutput.materials.push( this.materials[ i ].toJSON() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\toutput.visible = this.visible;\r\n\t\r\n\t\t\treturn output;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\tvar material = new this.constructor();\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\r\n\t\r\n\t\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tmaterial.visible = this.visible;\r\n\t\r\n\t\t\treturn material;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// backwards compatibility\r\n\t\r\n\tTHREE.MeshFaceMaterial = THREE.MultiMaterial;\r\n\t\r\n\t// File:src/materials/PointsMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  size: <float>,\r\n\t *  sizeAttenuation: <bool>,\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  vertexColors: <bool>,\r\n\t *\r\n\t *  fog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.PointsMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'PointsMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff );\r\n\t\r\n\t\tthis.map = null;\r\n\t\r\n\t\tthis.size = 1;\r\n\t\tthis.sizeAttenuation = true;\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PointsMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.PointsMaterial.prototype.constructor = THREE.PointsMaterial;\r\n\t\r\n\tTHREE.PointsMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\r\n\t\tthis.map = source.map;\r\n\t\r\n\t\tthis.size = source.size;\r\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// backwards compatibility\r\n\t\r\n\tTHREE.PointCloudMaterial = function ( parameters ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ParticleBasicMaterial = function ( parameters ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ParticleSystemMaterial = function ( parameters ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/ShaderMaterial.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  defines: { \"label\" : \"value\" },\r\n\t *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\r\n\t *\r\n\t *  fragmentShader: <string>,\r\n\t *  vertexShader: <string>,\r\n\t *\r\n\t *  shading: THREE.SmoothShading,\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  lights: <bool>,\r\n\t *\r\n\t *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>,\r\n\t *\r\n\t *\tfog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.ShaderMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'ShaderMaterial';\r\n\t\r\n\t\tthis.defines = {};\r\n\t\tthis.uniforms = {};\r\n\t\r\n\t\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n\t\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\t\r\n\t\tthis.shading = THREE.SmoothShading;\r\n\t\r\n\t\tthis.linewidth = 1;\r\n\t\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\r\n\t\tthis.fog = false; // set to use scene fog\r\n\t\r\n\t\tthis.lights = false; // set to use scene lights\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\r\n\t\r\n\t\tthis.skinning = false; // set to use skinning attribute streams\r\n\t\r\n\t\tthis.morphTargets = false; // set to use morph targets\r\n\t\tthis.morphNormals = false; // set to use morph normals\r\n\t\r\n\t\tthis.derivatives = false; // set to use derivatives\r\n\t\r\n\t\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\t\tthis.defaultAttributeValues = {\r\n\t\t\t'color': [ 1, 1, 1 ],\r\n\t\t\t'uv': [ 0, 0 ],\r\n\t\t\t'uv2': [ 0, 0 ]\r\n\t\t};\r\n\t\r\n\t\tthis.index0AttributeName = undefined;\r\n\t\r\n\t\tif ( parameters !== undefined ) {\r\n\t\r\n\t\t\tif ( parameters.attributes !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.setValues( parameters );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\r\n\t\r\n\tTHREE.ShaderMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.fragmentShader = source.fragmentShader;\r\n\t\tthis.vertexShader = source.vertexShader;\r\n\t\r\n\t\tthis.uniforms = THREE.UniformsUtils.clone( source.uniforms );\r\n\t\r\n\t\tthis.attributes = source.attributes;\r\n\t\tthis.defines = source.defines;\r\n\t\r\n\t\tthis.shading = source.shading;\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\tthis.lights = source.lights;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.skinning = source.skinning;\r\n\t\r\n\t\tthis.morphTargets = source.morphTargets;\r\n\t\tthis.morphNormals = source.morphNormals;\r\n\t\r\n\t\tthis.derivatives = source.derivatives;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Material.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.uniforms = this.uniforms;\r\n\t\tdata.attributes = this.attributes;\r\n\t\tdata.vertexShader = this.vertexShader;\r\n\t\tdata.fragmentShader = this.fragmentShader;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/RawShaderMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.RawShaderMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.ShaderMaterial.call( this, parameters );\r\n\t\r\n\t\tthis.type = 'RawShaderMaterial';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\n\tTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\r\n\t// File:src/materials/SpriteMaterial.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *\tuvOffset: new THREE.Vector2(),\r\n\t *\tuvScale: new THREE.Vector2(),\r\n\t *\r\n\t *  fog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.SpriteMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'SpriteMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff );\r\n\t\tthis.map = null;\r\n\t\r\n\t\tthis.rotation = 0;\r\n\t\r\n\t\tthis.fog = false;\r\n\t\r\n\t\t// set parameters\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\r\n\t\r\n\tTHREE.SpriteMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.map = source.map;\r\n\t\r\n\t\tthis.rotation = source.rotation;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/textures/Texture.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author szimek / https://github.com/szimek/\r\n\t */\r\n\t\r\n\tTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.sourceFile = '';\r\n\t\r\n\t\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\r\n\t\tthis.mipmaps = [];\r\n\t\r\n\t\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\r\n\t\r\n\t\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\r\n\t\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\r\n\t\r\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\r\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\r\n\t\r\n\t\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\t\r\n\t\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\r\n\t\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\r\n\t\r\n\t\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\t\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\t\r\n\t\tthis.generateMipmaps = true;\r\n\t\tthis.premultiplyAlpha = false;\r\n\t\tthis.flipY = true;\r\n\t\tthis.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\t\r\n\t\tthis.version = 0;\r\n\t\tthis.onUpdate = null;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Texture.DEFAULT_IMAGE = undefined;\r\n\tTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\r\n\t\r\n\tTHREE.Texture.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Texture,\r\n\t\r\n\t\tset needsUpdate ( value ) {\r\n\t\r\n\t\t\tif ( value === true ) this.version ++;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.image = source.image;\r\n\t\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\t\r\n\t\t\tthis.mapping = source.mapping;\r\n\t\r\n\t\t\tthis.wrapS = source.wrapS;\r\n\t\t\tthis.wrapT = source.wrapT;\r\n\t\r\n\t\t\tthis.magFilter = source.magFilter;\r\n\t\t\tthis.minFilter = source.minFilter;\r\n\t\r\n\t\t\tthis.anisotropy = source.anisotropy;\r\n\t\r\n\t\t\tthis.format = source.format;\r\n\t\t\tthis.type = source.type;\r\n\t\r\n\t\t\tthis.offset.copy( source.offset );\r\n\t\t\tthis.repeat.copy( source.repeat );\r\n\t\r\n\t\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\t\tthis.flipY = source.flipY;\r\n\t\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoJSON: function ( meta ) {\r\n\t\r\n\t\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\r\n\t\r\n\t\t\t\treturn meta.textures[ this.uuid ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getDataURL( image ) {\r\n\t\r\n\t\t\t\tvar canvas;\r\n\t\r\n\t\t\t\tif ( image.toDataURL !== undefined ) {\r\n\t\r\n\t\t\t\t\tcanvas = image;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tcanvas = document.createElement( 'canvas' );\r\n\t\t\t\t\tcanvas.width = image.width;\r\n\t\t\t\t\tcanvas.height = image.height;\r\n\t\r\n\t\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\t\r\n\t\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar output = {\r\n\t\t\t\tmetadata: {\r\n\t\t\t\t\tversion: 4.4,\r\n\t\t\t\t\ttype: 'Texture',\r\n\t\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t\t},\r\n\t\r\n\t\t\t\tuuid: this.uuid,\r\n\t\t\t\tname: this.name,\r\n\t\r\n\t\t\t\tmapping: this.mapping,\r\n\t\r\n\t\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\t\r\n\t\t\t\tminFilter: this.minFilter,\r\n\t\t\t\tmagFilter: this.magFilter,\r\n\t\t\t\tanisotropy: this.anisotropy\r\n\t\t\t};\r\n\t\r\n\t\t\tif ( this.image !== undefined ) {\r\n\t\r\n\t\t\t\t// TODO: Move to THREE.Image\r\n\t\r\n\t\t\t\tvar image = this.image;\r\n\t\r\n\t\t\t\tif ( image.uuid === undefined ) {\r\n\t\r\n\t\t\t\t\timage.uuid = THREE.Math.generateUUID(); // UGH\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\r\n\t\r\n\t\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\t\turl: getDataURL( image )\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\toutput.image = image.uuid;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tmeta.textures[ this.uuid ] = output;\r\n\t\r\n\t\t\treturn output;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttransformUv: function ( uv ) {\r\n\t\r\n\t\t\tif ( this.mapping !== THREE.UVMapping )  return;\r\n\t\r\n\t\t\tuv.multiply( this.repeat );\r\n\t\t\tuv.add( this.offset );\r\n\t\r\n\t\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\t\r\n\t\t\t\tswitch ( this.wrapS ) {\r\n\t\r\n\t\t\t\t\tcase THREE.RepeatWrapping:\r\n\t\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\t\r\n\t\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\t\r\n\t\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\t\r\n\t\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\t\r\n\t\t\t\tswitch ( this.wrapT ) {\r\n\t\r\n\t\t\t\t\tcase THREE.RepeatWrapping:\r\n\t\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\t\r\n\t\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\t\r\n\t\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\t\r\n\t\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.flipY ) {\r\n\t\r\n\t\t\t\tuv.y = 1 - uv.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\r\n\t\r\n\tTHREE.TextureIdCount = 0;\r\n\t\r\n\t// File:src/textures/CanvasTexture.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.CanvasTexture = function ( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\t\r\n\t\tTHREE.Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\t\r\n\t\tthis.needsUpdate = true;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CanvasTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\tTHREE.CanvasTexture.prototype.constructor = THREE.CanvasTexture;\r\n\t\r\n\t// File:src/textures/CubeTexture.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\t\r\n\t\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\r\n\t\r\n\t\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\t\r\n\t\tthis.images = images;\r\n\t\tthis.flipY = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\tTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\r\n\t\r\n\tTHREE.CubeTexture.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Texture.prototype.copy.call( this, source );\r\n\t\t\r\n\t\tthis.images = source.images;\r\n\t\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t// File:src/textures/CompressedTexture.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\t\r\n\t\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\t\r\n\t\tthis.image = { width: width, height: height };\r\n\t\tthis.mipmaps = mipmaps;\r\n\t\r\n\t\t// no flipping for cube textures\r\n\t\t// (also flipping doesn't work for compressed textures )\r\n\t\r\n\t\tthis.flipY = false;\r\n\t\r\n\t\t// can't generate mipmaps for compressed textures\r\n\t\t// mips must be embedded in DDS files\r\n\t\r\n\t\tthis.generateMipmaps = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\tTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\r\n\t\r\n\t// File:src/textures/DataTexture.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\t\r\n\t\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\t\r\n\t\tthis.image = { data: data, width: width, height: height };\r\n\t\r\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\r\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\r\n\t\t\r\n\t\tthis.flipY = false;\r\n\t\tthis.generateMipmaps  = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\tTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\r\n\t\r\n\t// File:src/textures/VideoTexture.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\t\r\n\t\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\t\r\n\t\tthis.generateMipmaps = false;\r\n\t\r\n\t\tvar scope = this;\r\n\t\r\n\t\tvar update = function () {\r\n\t\r\n\t\t\trequestAnimationFrame( update );\r\n\t\r\n\t\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\r\n\t\r\n\t\t\t\tscope.needsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tupdate();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\tTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\r\n\t\r\n\t// File:src/objects/Group.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Group = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Group';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Group.prototype.constructor = THREE.Group;\r\n\t// File:src/objects/Points.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Points = function ( geometry, material ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Points';\r\n\t\r\n\t\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\t\tthis.material = material !== undefined ? material : new THREE.PointsMaterial( { color: Math.random() * 0xffffff } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Points.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Points.prototype.constructor = THREE.Points;\r\n\t\r\n\tTHREE.Points.prototype.raycast = ( function () {\r\n\t\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\t\r\n\t\t\tvar object = this;\r\n\t\t\tvar geometry = object.geometry;\r\n\t\t\tvar threshold = raycaster.params.Points.threshold;\r\n\t\r\n\t\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\t\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\r\n\t\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\t\tvar localThresholdSq = localThreshold * localThreshold;\r\n\t\t\tvar position = new THREE.Vector3();\r\n\t\r\n\t\t\tfunction testPoint( point, index ) {\r\n\t\r\n\t\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\r\n\t\r\n\t\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\t\r\n\t\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\r\n\t\t\t\t\tintersectPoint.applyMatrix4( object.matrixWorld );\r\n\t\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\t\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\t\r\n\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\t\t\t\tpoint: intersectPoint.clone(),\r\n\t\t\t\t\t\tindex: index,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tobject: object\r\n\t\r\n\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\t\tvar indices = index.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar a = indices[ i ];\r\n\t\r\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\r\n\t\r\n\t\t\t\t\t\ttestPoint( position, a );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tposition.fromArray( positions, i * 3 );\r\n\t\r\n\t\t\t\t\t\ttestPoint( position, i );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\ttestPoint( vertices[ i ], i );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.Points.prototype.clone = function () {\r\n\t\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Points.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\t// only serialize if not in meta geometries cache\r\n\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON();\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// only serialize if not in meta materials cache\r\n\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tdata.object.geometry = this.geometry.uuid;\r\n\t\tdata.object.material = this.material.uuid;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// Backwards compatibility\r\n\t\r\n\tTHREE.PointCloud = function ( geometry, material ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\t\treturn new THREE.Points( geometry, material );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ParticleSystem = function ( geometry, material ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\t\treturn new THREE.Points( geometry, material );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/Line.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Line = function ( geometry, material, mode ) {\r\n\t\r\n\t\tif ( mode === 1 ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\r\n\t\t\treturn new THREE.LineSegments( geometry, material );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Line';\r\n\t\r\n\t\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\t\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Line.prototype.constructor = THREE.Line;\r\n\t\r\n\tTHREE.Line.prototype.raycast = ( function () {\r\n\t\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\tvar sphere = new THREE.Sphere();\r\n\t\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\t\r\n\t\t\tvar precision = raycaster.linePrecision;\r\n\t\t\tvar precisionSq = precision * precision;\r\n\t\r\n\t\t\tvar geometry = this.geometry;\r\n\t\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\t\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\t\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\t\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\t\r\n\t\t\tvar vStart = new THREE.Vector3();\r\n\t\t\tvar vEnd = new THREE.Vector3();\r\n\t\t\tvar interSegment = new THREE.Vector3();\r\n\t\t\tvar interRay = new THREE.Vector3();\r\n\t\t\tvar step = this instanceof THREE.LineSegments ? 2 : 1;\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\r\n\t\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\t\tvar indices = index.array;\r\n\t\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\t\r\n\t\t\t\t\t\tvar a = indices[ i ];\r\n\t\t\t\t\t\tvar b = indices[ i + 1 ];\r\n\t\r\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\t\r\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\t\r\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\t\r\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\t\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\t\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\t\r\n\t\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\t\r\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\t\r\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\t\r\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\t\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\t\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\t\t\t\tvar nbVertices = vertices.length;\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\t\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\t\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\t\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\t\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\t\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.Line.prototype.clone = function () {\r\n\t\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Line.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\t// only serialize if not in meta geometries cache\r\n\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON();\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// only serialize if not in meta materials cache\r\n\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tdata.object.geometry = this.geometry.uuid;\r\n\t\tdata.object.material = this.material.uuid;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// DEPRECATED\r\n\t\r\n\tTHREE.LineStrip = 0;\r\n\tTHREE.LinePieces = 1;\r\n\t\r\n\t// File:src/objects/LineSegments.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.LineSegments = function ( geometry, material ) {\r\n\t\r\n\t\tTHREE.Line.call( this, geometry, material );\r\n\t\r\n\t\tthis.type = 'LineSegments';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LineSegments.prototype = Object.create( THREE.Line.prototype );\r\n\tTHREE.LineSegments.prototype.constructor = THREE.LineSegments;\r\n\t\r\n\t// File:src/objects/Mesh.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author jonobr1 / http://jonobr1.com/\r\n\t */\r\n\t\r\n\tTHREE.Mesh = function ( geometry, material ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Mesh';\r\n\t\r\n\t\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\t\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\t\r\n\t\tthis.updateMorphTargets();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Mesh.prototype.constructor = THREE.Mesh;\r\n\t\r\n\tTHREE.Mesh.prototype.updateMorphTargets = function () {\r\n\t\r\n\t\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\r\n\t\r\n\t\t\tthis.morphTargetBase = - 1;\r\n\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\tthis.morphTargetDictionary = {};\r\n\t\r\n\t\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\r\n\t\r\n\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\r\n\t\r\n\t\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\r\n\t\r\n\t\t\treturn this.morphTargetDictionary[ name ];\r\n\t\r\n\t\t}\r\n\t\r\n\t\tconsole.warn( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\r\n\t\r\n\t\treturn 0;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.Mesh.prototype.raycast = ( function () {\r\n\t\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\tvar sphere = new THREE.Sphere();\r\n\t\r\n\t\tvar vA = new THREE.Vector3();\r\n\t\tvar vB = new THREE.Vector3();\r\n\t\tvar vC = new THREE.Vector3();\r\n\t\r\n\t\tvar tempA = new THREE.Vector3();\r\n\t\tvar tempB = new THREE.Vector3();\r\n\t\tvar tempC = new THREE.Vector3();\r\n\t\r\n\t\tvar uvA = new THREE.Vector2();\r\n\t\tvar uvB = new THREE.Vector2();\r\n\t\tvar uvC = new THREE.Vector2();\r\n\t\r\n\t\tvar barycoord = new THREE.Vector3();\r\n\t\r\n\t\tvar intersectionPoint = new THREE.Vector3();\r\n\t\tvar intersectionPointWorld = new THREE.Vector3();\r\n\t\r\n\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\r\n\t\r\n\t\t\tTHREE.Triangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\r\n\t\r\n\t\t\tuv1.multiplyScalar( barycoord.x );\r\n\t\t\tuv2.multiplyScalar( barycoord.y );\r\n\t\t\tuv3.multiplyScalar( barycoord.z );\r\n\t\r\n\t\t\tuv1.add( uv2 ).add( uv3 );\r\n\t\r\n\t\t\treturn uv1.clone();\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\t\r\n\t\t\tvar geometry = this.geometry;\r\n\t\t\tvar material = this.material;\r\n\t\r\n\t\t\tif ( material === undefined ) return;\r\n\t\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\t\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\t\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\t\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// Check boundingBox before continuing\r\n\t\r\n\t\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\t\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\r\n\t\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar a, b, c;\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\r\n\t\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\t\tvar indices = index.array;\r\n\t\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\ta = indices[ i ];\r\n\t\t\t\t\t\tb = indices[ i + 1 ];\r\n\t\t\t\t\t\tc = indices[ i + 2 ];\r\n\t\r\n\t\t\t\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\t\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\t\t\t\tvC.fromArray( positions, c * 3 );\r\n\t\r\n\t\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( ray.intersectTriangle( vC, vB, vA, true, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tif ( ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\t\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\t\tvar uv;\r\n\t\r\n\t\t\t\t\t\tif ( attributes.uv !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tvar uvs = attributes.uv.array;\r\n\t\t\t\t\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\t\t\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\t\t\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\t\t\t\t\t\t\tuv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\t\t\tuv: uv,\r\n\t\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\t\tfaceIndex: Math.floor( i / 3 ), // triangle number in indices buffer semantics\r\n\t\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 9 ) {\r\n\t\r\n\t\t\t\t\t\tvA.fromArray( positions, i );\r\n\t\t\t\t\t\tvB.fromArray( positions, i + 3 );\r\n\t\t\t\t\t\tvC.fromArray( positions, i + 6 );\r\n\t\r\n\t\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( ray.intersectTriangle( vC, vB, vA, true, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tif ( ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\t\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\t\tvar uv;\r\n\t\r\n\t\t\t\t\t\tif ( attributes.uv !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tvar uvs = attributes.uv.array;\r\n\t\t\t\t\t\t\tuvA.fromArray( uvs, i );\r\n\t\t\t\t\t\t\tuvB.fromArray( uvs, i + 2 );\r\n\t\t\t\t\t\t\tuvC.fromArray( uvs, i + 4 );\r\n\t\t\t\t\t\t\tuv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\ta = i / 3;\r\n\t\t\t\t\t\tb = a + 1;\r\n\t\t\t\t\t\tc = a + 2;\r\n\t\r\n\t\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\t\t\tuv: uv,\r\n\t\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\t\tindex: a, // triangle number in positions buffer semantics\r\n\t\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\tvar isFaceMaterial = material instanceof THREE.MeshFaceMaterial;\r\n\t\t\t\tvar materials = isFaceMaterial === true ? material.materials : null;\r\n\t\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\t\t\t\tvar faces = geometry.faces;\r\n\t\r\n\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\t\tvar face = faces[ f ];\r\n\t\t\t\t\tvar faceMaterial = isFaceMaterial === true ? materials[ face.materialIndex ] : material;\r\n\t\r\n\t\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\t\r\n\t\t\t\t\ta = vertices[ face.a ];\r\n\t\t\t\t\tb = vertices[ face.b ];\r\n\t\t\t\t\tc = vertices[ face.c ];\r\n\t\r\n\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\r\n\t\r\n\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\r\n\t\r\n\t\t\t\t\t\tvA.set( 0, 0, 0 );\r\n\t\t\t\t\t\tvB.set( 0, 0, 0 );\r\n\t\t\t\t\t\tvC.set( 0, 0, 0 );\r\n\t\r\n\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\r\n\t\r\n\t\t\t\t\t\t\tif ( influence === 0 ) continue;\r\n\t\r\n\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\r\n\t\r\n\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], a ), influence );\r\n\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], b ), influence );\r\n\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], c ), influence );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tvA.add( a );\r\n\t\t\t\t\t\tvB.add( b );\r\n\t\t\t\t\t\tvC.add( c );\r\n\t\r\n\t\t\t\t\t\ta = vA;\r\n\t\t\t\t\t\tb = vB;\r\n\t\t\t\t\t\tc = vC;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( faceMaterial.side === THREE.BackSide ) {\r\n\t\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( c, b, a, true, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( a, b, c, faceMaterial.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\t\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\tvar uv;\r\n\t\r\n\t\t\t\t\tif ( geometry.faceVertexUvs[ 0 ].length > 0 ) {\r\n\t\r\n\t\t\t\t\t\tvar uvs = geometry.faceVertexUvs[ 0 ][ f ];\r\n\t\t\t\t\t\tuvA.copy( uvs[ 0 ] );\r\n\t\t\t\t\t\tuvB.copy( uvs[ 1 ] );\r\n\t\t\t\t\t\tuvC.copy( uvs[ 2 ] );\r\n\t\t\t\t\t\tuv = uvIntersection( intersectionPoint, a, b, c, uvA, uvB, uvC );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\t\tuv: uv,\r\n\t\t\t\t\t\tface: face,\r\n\t\t\t\t\t\tfaceIndex: f,\r\n\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.Mesh.prototype.clone = function () {\r\n\t\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Mesh.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\t// only serialize if not in meta geometries cache\r\n\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON( meta );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// only serialize if not in meta materials cache\r\n\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON( meta );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tdata.object.geometry = this.geometry.uuid;\r\n\t\tdata.object.material = this.material.uuid;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/Bone.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author ikerr / http://verold.com\r\n\t */\r\n\t\r\n\tTHREE.Bone = function ( skin ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Bone';\r\n\t\r\n\t\tthis.skin = skin;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Bone.prototype.constructor = THREE.Bone;\r\n\t\r\n\tTHREE.Bone.prototype.copy = function ( source ) {\r\n\t\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\t\r\n\t\tthis.skin = source.skin;\r\n\t\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/Skeleton.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author michael guerrero / http://realitymeltdown.com\r\n\t * @author ikerr / http://verold.com\r\n\t */\r\n\t\r\n\tTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\r\n\t\r\n\t\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\r\n\t\r\n\t\tthis.identityMatrix = new THREE.Matrix4();\r\n\t\r\n\t\t// copy the bone array\r\n\t\r\n\t\tbones = bones || [];\r\n\t\r\n\t\tthis.bones = bones.slice( 0 );\r\n\t\r\n\t\t// create a bone texture or an array of floats\r\n\t\r\n\t\tif ( this.useVertexTexture ) {\r\n\t\r\n\t\t\t// layout (1 matrix = 4 pixels)\r\n\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\t\r\n\t\t\t\r\n\t\t\tvar size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\t\tsize = THREE.Math.nextPowerOfTwo( Math.ceil( size ) );\r\n\t\t\tsize = Math.max( size, 4 );\r\n\t\r\n\t\t\tthis.boneTextureWidth = size;\r\n\t\t\tthis.boneTextureHeight = size;\r\n\t\r\n\t\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\r\n\t\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// use the supplied bone inverses or calculate the inverses\r\n\t\r\n\t\tif ( boneInverses === undefined ) {\r\n\t\r\n\t\t\tthis.calculateInverses();\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tif ( this.bones.length === boneInverses.length ) {\r\n\t\r\n\t\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\r\n\t\r\n\t\t\t\tthis.boneInverses = [];\r\n\t\r\n\t\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\t\r\n\t\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Skeleton.prototype.calculateInverses = function () {\r\n\t\r\n\t\tthis.boneInverses = [];\r\n\t\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\t\r\n\t\t\tvar inverse = new THREE.Matrix4();\r\n\t\r\n\t\t\tif ( this.bones[ b ] ) {\r\n\t\r\n\t\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.boneInverses.push( inverse );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Skeleton.prototype.pose = function () {\r\n\t\r\n\t\tvar bone;\r\n\t\r\n\t\t// recover the bind-time world matrices\r\n\t\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\t\r\n\t\t\tbone = this.bones[ b ];\r\n\t\r\n\t\t\tif ( bone ) {\r\n\t\r\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// compute the local matrices, positions, rotations and scales\r\n\t\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\t\r\n\t\t\tbone = this.bones[ b ];\r\n\t\r\n\t\t\tif ( bone ) {\r\n\t\r\n\t\t\t\tif ( bone.parent ) {\r\n\t\r\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Skeleton.prototype.update = ( function () {\r\n\t\r\n\t\tvar offsetMatrix = new THREE.Matrix4();\r\n\t\r\n\t\treturn function update() {\r\n\t\r\n\t\t\t// flatten bone matrices to array\r\n\t\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\t\r\n\t\t\t\t// compute the offset between the current and the original transform\r\n\t\r\n\t\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\r\n\t\r\n\t\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\r\n\t\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.useVertexTexture ) {\r\n\t\r\n\t\t\t\tthis.boneTexture.needsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\tTHREE.Skeleton.prototype.clone = function () {\r\n\t\r\n\t\treturn new THREE.Skeleton( this.bones, this.boneInverses, this.useVertexTexture );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/SkinnedMesh.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author ikerr / http://verold.com\r\n\t */\r\n\t\r\n\tTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\r\n\t\r\n\t\tTHREE.Mesh.call( this, geometry, material );\r\n\t\r\n\t\tthis.type = 'SkinnedMesh';\r\n\t\r\n\t\tthis.bindMode = \"attached\";\r\n\t\tthis.bindMatrix = new THREE.Matrix4();\r\n\t\tthis.bindMatrixInverse = new THREE.Matrix4();\r\n\t\r\n\t\t// init bones\r\n\t\r\n\t\t// TODO: remove bone creation as there is no reason (other than\r\n\t\t// convenience) for THREE.SkinnedMesh to do this.\r\n\t\r\n\t\tvar bones = [];\r\n\t\r\n\t\tif ( this.geometry && this.geometry.bones !== undefined ) {\r\n\t\r\n\t\t\tvar bone, gbone;\r\n\t\r\n\t\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\t\r\n\t\t\t\tgbone = this.geometry.bones[ b ];\r\n\t\r\n\t\t\t\tbone = new THREE.Bone( this );\r\n\t\t\t\tbones.push( bone );\r\n\t\r\n\t\t\t\tbone.name = gbone.name;\r\n\t\t\t\tbone.position.fromArray( gbone.pos );\r\n\t\t\t\tbone.quaternion.fromArray( gbone.rotq );\r\n\t\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\t\r\n\t\t\t\tgbone = this.geometry.bones[ b ];\r\n\t\r\n\t\t\t\tif ( gbone.parent !== - 1 ) {\r\n\t\r\n\t\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis.add( bones[ b ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.normalizeSkinWeights();\r\n\t\r\n\t\tthis.updateMatrixWorld( true );\r\n\t\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ), this.matrixWorld );\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\tTHREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh;\r\n\t\r\n\tTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\r\n\t\r\n\t\tthis.skeleton = skeleton;\r\n\t\r\n\t\tif ( bindMatrix === undefined ) {\r\n\t\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\t\t\t\r\n\t\t\tthis.skeleton.calculateInverses();\r\n\t\r\n\t\t\tbindMatrix = this.matrixWorld;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.bindMatrix.copy( bindMatrix );\r\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SkinnedMesh.prototype.pose = function () {\r\n\t\r\n\t\tthis.skeleton.pose();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\r\n\t\r\n\t\tif ( this.geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.geometry.skinIndices.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar sw = this.geometry.skinWeights[ i ];\r\n\t\r\n\t\t\t\tvar scale = 1.0 / sw.lengthManhattan();\r\n\t\r\n\t\t\t\tif ( scale !== Infinity ) {\r\n\t\r\n\t\t\t\t\tsw.multiplyScalar( scale );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tsw.set( 1 ); // this will be normalized by the shader anyway\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\t// skinning weights assumed to be normalized for THREE.BufferGeometry\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\r\n\t\r\n\t\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\r\n\t\r\n\t\tif ( this.bindMode === \"attached\" ) {\r\n\t\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\t\r\n\t\t} else if ( this.bindMode === \"detached\" ) {\r\n\t\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.SkinnedMesh unrecognized bindMode: ' + this.bindMode );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SkinnedMesh.prototype.clone = function() {\r\n\t\r\n\t\treturn new this.constructor( this.geometry, this.material, this.useVertexTexture ).copy( this );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/MorphAnimMesh.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.MorphAnimMesh = function ( geometry, material ) {\r\n\t\r\n\t\tTHREE.Mesh.call( this, geometry, material );\r\n\t\r\n\t\tthis.type = 'MorphAnimMesh';\r\n\t\r\n\t\t// API\r\n\t\r\n\t\tthis.duration = 1000; // milliseconds\r\n\t\tthis.mirroredLoop = false;\r\n\t\tthis.time = 0;\r\n\t\r\n\t\t// internals\r\n\t\r\n\t\tthis.lastKeyframe = 0;\r\n\t\tthis.currentKeyframe = 0;\r\n\t\r\n\t\tthis.direction = 1;\r\n\t\tthis.directionBackwards = false;\r\n\t\r\n\t\tthis.setFrameRange( 0, geometry.morphTargets.length - 1 );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\tTHREE.MorphAnimMesh.prototype.constructor = THREE.MorphAnimMesh;\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.setFrameRange = function ( start, end ) {\r\n\t\r\n\t\tthis.startKeyframe = start;\r\n\t\tthis.endKeyframe = end;\r\n\t\r\n\t\tthis.length = this.endKeyframe - this.startKeyframe + 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.setDirectionForward = function () {\r\n\t\r\n\t\tthis.direction = 1;\r\n\t\tthis.directionBackwards = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.setDirectionBackward = function () {\r\n\t\r\n\t\tthis.direction = - 1;\r\n\t\tthis.directionBackwards = true;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.parseAnimations = function () {\r\n\t\r\n\t\tvar geometry = this.geometry;\r\n\t\r\n\t\tif ( ! geometry.animations ) geometry.animations = {};\r\n\t\r\n\t\tvar firstAnimation, animations = geometry.animations;\r\n\t\r\n\t\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\t\r\n\t\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\t\r\n\t\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\t\tvar parts = morph.name.match( pattern );\r\n\t\r\n\t\t\tif ( parts && parts.length > 1 ) {\r\n\t\r\n\t\t\t\tvar label = parts[ 1 ];\r\n\t\r\n\t\t\t\tif ( ! animations[ label ] ) animations[ label ] = { start: Infinity, end: - Infinity };\r\n\t\r\n\t\t\t\tvar animation = animations[ label ];\r\n\t\r\n\t\t\t\tif ( i < animation.start ) animation.start = i;\r\n\t\t\t\tif ( i > animation.end ) animation.end = i;\r\n\t\r\n\t\t\t\tif ( ! firstAnimation ) firstAnimation = label;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tgeometry.firstAnimation = firstAnimation;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.setAnimationLabel = function ( label, start, end ) {\r\n\t\r\n\t\tif ( ! this.geometry.animations ) this.geometry.animations = {};\r\n\t\r\n\t\tthis.geometry.animations[ label ] = { start: start, end: end };\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.playAnimation = function ( label, fps ) {\r\n\t\r\n\t\tvar animation = this.geometry.animations[ label ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tthis.setFrameRange( animation.start, animation.end );\r\n\t\t\tthis.duration = 1000 * ( ( animation.end - animation.start ) / fps );\r\n\t\t\tthis.time = 0;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.MorphAnimMesh: animation[' + label + '] undefined in .playAnimation()' );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.updateAnimation = function ( delta ) {\r\n\t\r\n\t\tvar frameTime = this.duration / this.length;\r\n\t\r\n\t\tthis.time += this.direction * delta;\r\n\t\r\n\t\tif ( this.mirroredLoop ) {\r\n\t\r\n\t\t\tif ( this.time > this.duration || this.time < 0 ) {\r\n\t\r\n\t\t\t\tthis.direction *= - 1;\r\n\t\r\n\t\t\t\tif ( this.time > this.duration ) {\r\n\t\r\n\t\t\t\t\tthis.time = this.duration;\r\n\t\t\t\t\tthis.directionBackwards = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( this.time < 0 ) {\r\n\t\r\n\t\t\t\t\tthis.time = 0;\r\n\t\t\t\t\tthis.directionBackwards = false;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.time = this.time % this.duration;\r\n\t\r\n\t\t\tif ( this.time < 0 ) this.time += this.duration;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar keyframe = this.startKeyframe + THREE.Math.clamp( Math.floor( this.time / frameTime ), 0, this.length - 1 );\r\n\t\r\n\t\tvar influences = this.morphTargetInfluences;\r\n\t\r\n\t\tif ( keyframe !== this.currentKeyframe ) {\r\n\t\r\n\t\t\tinfluences[ this.lastKeyframe ] = 0;\r\n\t\t\tinfluences[ this.currentKeyframe ] = 1;\r\n\t\t\tinfluences[ keyframe ] = 0;\r\n\t\r\n\t\t\tthis.lastKeyframe = this.currentKeyframe;\r\n\t\t\tthis.currentKeyframe = keyframe;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar mix = ( this.time % frameTime ) / frameTime;\r\n\t\r\n\t\tif ( this.directionBackwards ) {\r\n\t\r\n\t\t\tmix = 1 - mix;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tinfluences[ this.currentKeyframe ] = mix;\r\n\t\tinfluences[ this.lastKeyframe ] = 1 - mix;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.interpolateTargets = function ( a, b, t ) {\r\n\t\r\n\t\tvar influences = this.morphTargetInfluences;\r\n\t\r\n\t\tfor ( var i = 0, l = influences.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tinfluences[ i ] = 0;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tif ( a > - 1 ) influences[ a ] = 1 - t;\r\n\t\tif ( b > - 1 ) influences[ b ] = t;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Mesh.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.duration = source.duration;\r\n\t\tthis.mirroredLoop = source.mirroredLoop;\r\n\t\tthis.time = source.time;\r\n\t\r\n\t\tthis.lastKeyframe = source.lastKeyframe;\r\n\t\tthis.currentKeyframe = source.currentKeyframe;\r\n\t\r\n\t\tthis.direction = source.direction;\r\n\t\tthis.directionBackwards = source.directionBackwards;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/LOD.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.LOD = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'LOD';\r\n\t\r\n\t\tObject.defineProperties( this, {\r\n\t\t\tlevels: {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tvalue: []\r\n\t\t\t},\r\n\t\t\tobjects: {\r\n\t\t\t\tget: function () {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\t\t\treturn this.levels;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.LOD.prototype.constructor = THREE.LOD;\r\n\t\r\n\tTHREE.LOD.prototype.addLevel = function ( object, distance ) {\r\n\t\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\t\r\n\t\tdistance = Math.abs( distance );\r\n\t\r\n\t\tvar levels = this.levels;\r\n\t\r\n\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\t\r\n\t\t\tif ( distance < levels[ l ].distance ) {\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\t\r\n\t\tthis.add( object );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\r\n\t\r\n\t\tvar levels = this.levels;\r\n\t\r\n\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tif ( distance < levels[ i ].distance ) {\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn levels[ i - 1 ].object;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LOD.prototype.raycast = ( function () {\r\n\t\r\n\t\tvar matrixPosition = new THREE.Vector3();\r\n\t\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\t\r\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\t\r\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\t\r\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.LOD.prototype.update = function () {\r\n\t\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\r\n\t\treturn function update( camera ) {\r\n\t\r\n\t\t\tvar levels = this.levels;\r\n\t\r\n\t\t\tif ( levels.length > 1 ) {\r\n\t\r\n\t\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\r\n\t\r\n\t\t\t\tvar distance = v1.distanceTo( v2 );\r\n\t\r\n\t\t\t\tlevels[ 0 ].object.visible = true;\r\n\t\r\n\t\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\t\r\n\t\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( ; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tlevels[ i ].object.visible = false;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\tTHREE.LOD.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source, false );\r\n\t\r\n\t\tvar levels = source.levels;\r\n\t\r\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tvar level = levels[ i ];\r\n\t\r\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LOD.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.levels = [];\r\n\t\r\n\t\tvar levels = this.levels;\r\n\t\r\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tvar level = levels[ i ];\r\n\t\r\n\t\t\tdata.object.levels.push( {\r\n\t\t\t\tobject: level.object.uuid,\r\n\t\t\t\tdistance: level.distance\r\n\t\t\t} );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/Sprite.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Sprite = ( function () {\r\n\t\r\n\t\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\r\n\t\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\r\n\t\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\r\n\t\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\t\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\t\r\n\t\treturn function Sprite( material ) {\r\n\t\r\n\t\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\t\tthis.type = 'Sprite';\r\n\t\r\n\t\t\tthis.geometry = geometry;\r\n\t\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\tTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Sprite.prototype.constructor = THREE.Sprite;\r\n\t\r\n\tTHREE.Sprite.prototype.raycast = ( function () {\r\n\t\r\n\t\tvar matrixPosition = new THREE.Vector3();\r\n\t\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\t\r\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\t\r\n\t\t\tvar distanceSq = raycaster.ray.distanceSqToPoint( matrixPosition );\r\n\t\t\tvar guessSizeSq = this.scale.x * this.scale.y;\r\n\t\r\n\t\t\tif ( distanceSq > guessSizeSq ) {\r\n\t\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\tdistance: Math.sqrt( distanceSq ),\r\n\t\t\t\tpoint: this.position,\r\n\t\t\t\tface: null,\r\n\t\t\t\tobject: this\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.Sprite.prototype.clone = function () {\r\n\t\r\n\t\treturn new this.constructor( this.material ).copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Sprite.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\t// only serialize if not in meta materials cache\r\n\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tdata.object.material = this.material.uuid;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// Backwards compatibility\r\n\t\r\n\tTHREE.Particle = THREE.Sprite;\r\n\t\r\n\t// File:src/objects/LensFlare.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.lensFlares = [];\r\n\t\r\n\t\tthis.positionScreen = new THREE.Vector3();\r\n\t\tthis.customUpdateCallback = undefined;\r\n\t\r\n\t\tif ( texture !== undefined ) {\r\n\t\r\n\t\t\tthis.add( texture, size, distance, blending, color );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.LensFlare.prototype.constructor = THREE.LensFlare;\r\n\t\r\n\t\r\n\t/*\r\n\t * Add: adds another flare\r\n\t */\r\n\t\r\n\tTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\r\n\t\r\n\t\tif ( size === undefined ) size = - 1;\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\t\tif ( opacity === undefined ) opacity = 1;\r\n\t\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\r\n\t\tif ( blending === undefined ) blending = THREE.NormalBlending;\r\n\t\r\n\t\tdistance = Math.min( distance, Math.max( 0, distance ) );\r\n\t\r\n\t\tthis.lensFlares.push( {\r\n\t\t\ttexture: texture,\t// THREE.Texture\r\n\t\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\r\n\t\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\r\n\t\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\r\n\t\t\tscale: 1, \t\t// scale\r\n\t\t\trotation: 0, \t\t// rotation\r\n\t\t\topacity: opacity,\t// opacity\r\n\t\t\tcolor: color,\t\t// color\r\n\t\t\tblending: blending\t// blending\r\n\t\t} );\r\n\t\r\n\t};\r\n\t\r\n\t/*\r\n\t * Update lens flares update positions on all flares based on the screen position\r\n\t * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n\t */\r\n\t\r\n\tTHREE.LensFlare.prototype.updateLensFlares = function () {\r\n\t\r\n\t\tvar f, fl = this.lensFlares.length;\r\n\t\tvar flare;\r\n\t\tvar vecX = - this.positionScreen.x * 2;\r\n\t\tvar vecY = - this.positionScreen.y * 2;\r\n\t\r\n\t\tfor ( f = 0; f < fl; f ++ ) {\r\n\t\r\n\t\t\tflare = this.lensFlares[ f ];\r\n\t\r\n\t\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\r\n\t\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\r\n\t\r\n\t\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\r\n\t\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LensFlare.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.positionScreen.copy( source.positionScreen );\r\n\t\tthis.customUpdateCallback = source.customUpdateCallback;\r\n\t\r\n\t\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tthis.lensFlares.push( source.lensFlares[ i ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/scenes/Scene.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Scene = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Scene';\r\n\t\r\n\t\tthis.fog = null;\r\n\t\tthis.overrideMaterial = null;\r\n\t\r\n\t\tthis.autoUpdate = true; // checked by the renderer\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Scene.prototype.constructor = THREE.Scene;\r\n\t\r\n\tTHREE.Scene.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\t\r\n\t\tthis.autoUpdate = source.autoUpdate;\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/scenes/Fog.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Fog = function ( color, near, far ) {\r\n\t\r\n\t\tthis.name = '';\r\n\t\r\n\t\tthis.color = new THREE.Color( color );\r\n\t\r\n\t\tthis.near = ( near !== undefined ) ? near : 1;\r\n\t\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Fog.prototype.clone = function () {\r\n\t\r\n\t\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/scenes/FogExp2.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.FogExp2 = function ( color, density ) {\r\n\t\r\n\t\tthis.name = '';\r\n\t\r\n\t\tthis.color = new THREE.Color( color );\r\n\t\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.FogExp2.prototype.clone = function () {\r\n\t\r\n\t\treturn new THREE.FogExp2( this.color.getHex(), this.density );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk.js\r\n\t\r\n\tTHREE.ShaderChunk = {};\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'alphamap_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'alphamap_pars_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tuniform sampler2D alphaMap;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'alphatest_fragment'] = \"#ifdef ALPHATEST\\n\\n\tif ( diffuseColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/aomap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'aomap_fragment'] = \"#ifdef USE_AOMAP\\n\\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'aomap_pars_fragment'] = \"#ifdef USE_AOMAP\\n\\n\tuniform sampler2D aoMap;\\n\tuniform float aoMapIntensity;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/begin_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'begin_vertex'] = \"\\nvec3 transformed = vec3( position );\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'beginnormal_vertex'] = \"\\nvec3 objectNormal = vec3( normal );\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'bumpmap_pars_fragment'] = \"#ifdef USE_BUMPMAP\\n\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\tvec2 dHdxy_fwd() {\\n\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\n\t\treturn vec2( dBx, dBy );\\n\\n\t}\\n\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\t\t// normalized\\n\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\t}\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'color_fragment'] = \"#ifdef USE_COLOR\\n\\n\tdiffuseColor.rgb *= vColor;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'color_pars_fragment'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'color_pars_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'color_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvColor.xyz = color.xyz;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/common.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'common'] = \"#define PI 3.14159\\n#define PI2 6.28318\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\n\\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\\n\\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\\n\\n}\\n\\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\\n\\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\\n\\n}\\n\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\n\treturn - distance * planeNormal + point;\\n\\n}\\n\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n\\n}\\n\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n\\n}\\n\\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\\n\\n\tif ( decayExponent > 0.0 ) {\\n\\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\n\t}\\n\\n\treturn 1.0;\\n\\n}\\n\\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\\n\\n\t// Original approximation by Christophe Schlick '94\\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\\n\\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\\n\\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n\\n}\\n\\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\\n\\n\t// geometry term is (n⋅l)(n⋅v) / 4(n⋅l)(n⋅v)\\n\\n\treturn 0.25;\\n\\n}\\n\\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\\n\\n\t// factor of 1/PI in distribution term omitted\\n\\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n\\n}\\n\\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\\n\\n\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\n\t//float dotNL = saturate( dot( normal, lightDir ) );\\n\t//float dotNV = saturate( dot( normal, viewDir ) );\\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\\n\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\\n\\n\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\n\treturn F * G * D;\\n\\n}\\n\\nvec3 inputToLinear( in vec3 a ) {\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\\n\\n\t#else\\n\\n\t\treturn a;\\n\\n\t#endif\\n\\n}\\n\\nvec3 linearToOutput( in vec3 a ) {\\n\\n\t#ifdef GAMMA_OUTPUT\\n\\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\\n\\n\t#else\\n\\n\t\treturn a;\\n\\n\t#endif\\n\\n}\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'defaultnormal_vertex'] = \"#ifdef FLIP_SIDED\\n\\n\tobjectNormal = -objectNormal;\\n\\n#endif\\n\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'displacementmap_vertex'] = \"#ifdef USE_DISPLACEMENTMAP\\n\\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'displacementmap_pars_vertex'] = \"#ifdef USE_DISPLACEMENTMAP\\n\\n\tuniform sampler2D displacementMap;\\n\tuniform float displacementScale;\\n\tuniform float displacementBias;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'emissivemap_fragment'] = \"#ifdef USE_EMISSIVEMAP\\n\\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\\n\\n\ttotalEmissiveLight *= emissiveColor.rgb;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'emissivemap_pars_fragment'] = \"#ifdef USE_EMISSIVEMAP\\n\\n\tuniform sampler2D emissiveMap;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'envmap_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\t\t// Transforming Normal Vectors with the Inverse Transformation\\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\t\t#else\\n\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t\t#endif\\n\\n\t#else\\n\\n\t\tvec3 reflectVec = vReflect;\\n\\n\t#endif\\n\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\\n\tenvColor.xyz = inputToLinear( envColor.xyz );\\n\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'envmap_pars_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tuniform float reflectivity;\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tuniform float refractionRatio;\\n\\n\t#else\\n\\n\t\tvarying vec3 vReflect;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'envmap_pars_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvarying vec3 vReflect;\\n\\n\tuniform float refractionRatio;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'envmap_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvec3 worldNormal = transformDirection( objectNormal, modelMatrix );\\n\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\t#else\\n\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'fog_fragment'] = \"#ifdef USE_FOG\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\\n\t#else\\n\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n\t#endif\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\\n\\n\t#else\\n\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n\t#endif\\n\t\\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'fog_pars_fragment'] = \"#ifdef USE_FOG\\n\\n\tuniform vec3 fogColor;\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tuniform float fogDensity;\\n\\n\t#else\\n\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lightmap_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lightmap_pars_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tuniform sampler2D lightMap;\\n\tuniform float lightMapIntensity;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_lambert_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_lambert_pars_vertex'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_lambert_vertex'] = \"vLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vec3( 0.0 );\\n\\n#endif\\n\\nvec3 normal = normalize( transformedNormal );\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = pointLightColor[ i ];\\n\\n\t\tvec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\t// attenuation\\n\\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = spotLightColor[ i ];\\n\\n\t\tvec3 lightPosition = spotLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition - mvPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\\n\\n\t\t\t// attenuation\\n\\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\\n\\n\t\t\tattenuation *= spotEffect;\\n\\n\t\t\t// diffuse\\n\\n\t\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = directionalLightColor[ i ];\\n\\n\t\tvec3 lightDir = directionalLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tvLightFront += lightColor * saturate( dotProduct );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\\n\\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\nvLightFront += ambientLightColor;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack += ambientLightColor;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_phong_fragment'] = \"#ifndef FLAT_SHADED\\n\\n\tvec3 normal = normalize( vNormal );\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\\n\t#endif\\n\\n#else\\n\\n\tvec3 fdx = dFdx( vViewPosition );\\n\tvec3 fdy = dFdy( vViewPosition );\\n\tvec3 normal = normalize( cross( fdx, fdy ) );\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\\nvec3 viewDir = normalize( vViewPosition );\\n\\nvec3 totalDiffuseLight = vec3( 0.0 );\\nvec3 totalSpecularLight = vec3( 0.0 );\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = pointLightColor[ i ];\\n\\n\t\tvec3 lightPosition = pointLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\t// attenuation\\n\\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\\n\\n\t\t// diffuse\\n\\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\\n\\n\t\t// specular\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\\n\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = spotLightColor[ i ];\\n\\n\t\tvec3 lightPosition = spotLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\\n\\n\t\t\t// attenuation\\n\\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\\n\\n\t\t\tattenuation *= spotEffect;\\n\\n\t\t\t// diffuse\\n\\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\\n\\n\t\t\t// specular\\n\\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = directionalLightColor[ i ];\\n\\n\t\tvec3 lightDir = directionalLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\\n\\n\t\t// specular\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\ttotalDiffuseLight += lightColor;\\n\\n\t\t// specular (sky term only)\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * max( dotProduct, 0.0 );\\n\\n\t}\\n\\n#endif\\n\\n#ifdef METAL\\n\\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\\n\\n#else\\n\\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_phong_pars_fragment'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\\nvarying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\tvarying vec3 vNormal;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_phong_pars_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_phong_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvWorldPosition = worldPosition.xyz;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/linear_to_gamma_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'linear_to_gamma_fragment'] = \"\\n\toutgoingLight = linearToOutput( outgoingLight );\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'logdepthbuf_fragment'] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tuniform float logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n\tuniform float logDepthBufFC;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'logdepthbuf_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\\n#else\\n\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\n\t#endif\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'map_fragment'] = \"#ifdef USE_MAP\\n\\n\tvec4 texelColor = texture2D( map, vUv );\\n\\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\\n\\n\tdiffuseColor *= texelColor;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'map_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'map_particle_fragment'] = \"#ifdef USE_MAP\\n\\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'map_particle_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform vec4 offsetRepeat;\\n\tuniform sampler2D map;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'morphnormal_vertex'] = \"#ifdef USE_MORPHNORMALS\\n\\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'morphtarget_pars_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tuniform float morphTargetInfluences[ 8 ];\\n\\n\t#else\\n\\n\tuniform float morphTargetInfluences[ 4 ];\\n\\n\t#endif\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'morphtarget_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'normalmap_pars_fragment'] = \"#ifdef USE_NORMALMAP\\n\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\\n\t// Per-Pixel Tangent Space Normal Mapping\\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\\n\t}\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/project_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'project_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n\\n#else\\n\\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n\\n#endif\\n\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/shadowmap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'shadowmap_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\tvec3 frustumColors[3];\\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\\n\\n\t#endif\\n\\n\tfloat fDepth;\\n\tvec3 shadowColor = vec3( 1.0 );\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\\n\\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\t\t\t\t// if ( all( something, something ) ) using this instead\\n\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\t\tbool frustumTest = all( frustumTestVec );\\n\\n\t\tif ( frustumTest ) {\\n\\n\t\t\tshadowCoord.z += shadowBias[ i ];\\n\\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t/*\\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\\n\t\t\t\t\t\t// must enroll loop manually\\n\\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\\n\\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\\n\\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\\n\\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\\n\t\t\t\t\t\t\tshadow += 1.0;\\n\\n\t\t\t\t}\\n\\n\t\t\t\tshadow /= 9.0;\\n\\n\t\t*/\\n\\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\\n\\n\t\t\t\tmat3 shadowKernel;\\n\t\t\t\tmat3 depthKernel;\\n\\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\\n\\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\\n\\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\\n\\n\t\t\t\tvec4 shadowValues;\\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\\n\\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#else\\n\\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\tif ( fDepth < shadowCoord.z )\\n\\n\t\t// spot with multiple shadows is darker\\n\\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\\n\\n\t\t// spot with multiple shadows has the same color as single shadow spot\\n\\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\\n\t\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\t\tif ( inFrustum ) outgoingLight *= frustumColors[ i ];\\n\\n\t\t#endif\\n\\n\t}\\n\\n\toutgoingLight = outgoingLight * shadowColor;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'shadowmap_pars_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\\n\\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\\n\tuniform float shadowBias[ MAX_SHADOWS ];\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\tfloat depth = dot( rgba_depth, bit_shift );\\n\t\treturn depth;\\n\\n\t}\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'shadowmap_pars_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'shadowmap_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\\n\\n\t}\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'skinbase_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'skinning_pars_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\\n\t#ifdef BONE_TEXTURE\\n\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\n\t\t\ty = dy * ( y + 0.5 );\\n\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'skinning_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'skinnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'specularmap_fragment'] = \"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\tspecularStrength = 1.0;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'specularmap_pars_fragment'] = \"#ifdef USE_SPECULARMAP\\n\\n\tuniform sampler2D specularMap;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv2_pars_fragment'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tvarying vec2 vUv2;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv2_pars_vertex'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tattribute vec2 uv2;\\n\tvarying vec2 vUv2;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv2_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv2_vertex'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tvUv2 = uv2;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv_pars_fragment'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvarying vec2 vUv;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv_pars_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'worldpos_vertex'] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\n\t#ifdef USE_SKINNING\\n\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\\n\t#else\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/UniformsUtils.js\r\n\t\r\n\t/**\r\n\t * Uniform Utilities\r\n\t */\r\n\t\r\n\tTHREE.UniformsUtils = {\r\n\t\r\n\t\tmerge: function ( uniforms ) {\r\n\t\r\n\t\t\tvar merged = {};\r\n\t\r\n\t\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\r\n\t\r\n\t\t\t\tvar tmp = this.clone( uniforms[ u ] );\r\n\t\r\n\t\t\t\tfor ( var p in tmp ) {\r\n\t\r\n\t\t\t\t\tmerged[ p ] = tmp[ p ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn merged;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function ( uniforms_src ) {\r\n\t\r\n\t\t\tvar uniforms_dst = {};\r\n\t\r\n\t\t\tfor ( var u in uniforms_src ) {\r\n\t\r\n\t\t\t\tuniforms_dst[ u ] = {};\r\n\t\r\n\t\t\t\tfor ( var p in uniforms_src[ u ] ) {\r\n\t\r\n\t\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\r\n\t\r\n\t\t\t\t\tif ( parameter_src instanceof THREE.Color ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Matrix3 ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\r\n\t\r\n\t\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\t\r\n\t\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\r\n\t\r\n\t\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn uniforms_dst;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/shaders/UniformsLib.js\r\n\t\r\n\t/**\r\n\t * Uniforms library for shared webgl shaders\r\n\t */\r\n\t\r\n\tTHREE.UniformsLib = {\r\n\t\r\n\t\tcommon: {\r\n\t\r\n\t\t\t\"diffuse\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\t\r\n\t\t\t\"map\" : { type: \"t\", value: null },\r\n\t\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\t\r\n\t\t\t\"specularMap\" : { type: \"t\", value: null },\r\n\t\t\t\"alphaMap\" : { type: \"t\", value: null },\r\n\t\r\n\t\t\t\"envMap\" : { type: \"t\", value: null },\r\n\t\t\t\"flipEnvMap\" : { type: \"f\", value: - 1 },\r\n\t\t\t\"reflectivity\" : { type: \"f\", value: 1.0 },\r\n\t\t\t\"refractionRatio\" : { type: \"f\", value: 0.98 }\r\n\t\r\n\t\t},\r\n\t\r\n\t\taomap: {\r\n\t\r\n\t\t\t\"aoMap\" : { type: \"t\", value: null },\r\n\t\t\t\"aoMapIntensity\" : { type: \"f\", value: 1 },\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlightmap: {\r\n\t\r\n\t\t\t\"lightMap\" : { type: \"t\", value: null },\r\n\t\t\t\"lightMapIntensity\" : { type: \"f\", value: 1 },\r\n\t\r\n\t\t},\r\n\t\r\n\t\temissivemap: {\r\n\t\r\n\t\t\t\"emissiveMap\" : { type: \"t\", value: null },\r\n\t\r\n\t\t},\r\n\t\r\n\t\tbumpmap: {\r\n\t\r\n\t\t\t\"bumpMap\" : { type: \"t\", value: null },\r\n\t\t\t\"bumpScale\" : { type: \"f\", value: 1 }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalmap: {\r\n\t\r\n\t\t\t\"normalMap\" : { type: \"t\", value: null },\r\n\t\t\t\"normalScale\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdisplacementmap: {\r\n\t\r\n\t\t\t\"displacementMap\" : { type: \"t\", value: null },\r\n\t\t\t\"displacementScale\" : { type: \"f\", value: 1 },\r\n\t\t\t\"displacementBias\" : { type: \"f\", value: 0 }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfog : {\r\n\t\r\n\t\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlights: {\r\n\t\r\n\t\t\t\"ambientLightColor\" : { type: \"fv\", value: [] },\r\n\t\r\n\t\t\t\"directionalLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\t\"directionalLightColor\" : { type: \"fv\", value: [] },\r\n\t\r\n\t\t\t\"hemisphereLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\t\"hemisphereLightSkyColor\" : { type: \"fv\", value: [] },\r\n\t\t\t\"hemisphereLightGroundColor\" : { type: \"fv\", value: [] },\r\n\t\r\n\t\t\t\"pointLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\t\"pointLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\t\"pointLightDistance\" : { type: \"fv1\", value: [] },\r\n\t\t\t\"pointLightDecay\" : { type: \"fv1\", value: [] },\r\n\t\r\n\t\t\t\"spotLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\t\"spotLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\t\"spotLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\t\"spotLightDistance\" : { type: \"fv1\", value: [] },\r\n\t\t\t\"spotLightAngleCos\" : { type: \"fv1\", value: [] },\r\n\t\t\t\"spotLightExponent\" : { type: \"fv1\", value: [] },\r\n\t\t\t\"spotLightDecay\" : { type: \"fv1\", value: [] }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tpoints: {\r\n\t\r\n\t\t\t\"psColor\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\t\t\t\"size\" : { type: \"f\", value: 1.0 },\r\n\t\t\t\"scale\" : { type: \"f\", value: 1.0 },\r\n\t\t\t\"map\" : { type: \"t\", value: null },\r\n\t\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\t\r\n\t\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tshadowmap: {\r\n\t\r\n\t\t\t\"shadowMap\": { type: \"tv\", value: [] },\r\n\t\t\t\"shadowMapSize\": { type: \"v2v\", value: [] },\r\n\t\r\n\t\t\t\"shadowBias\" : { type: \"fv1\", value: [] },\r\n\t\t\t\"shadowDarkness\": { type: \"fv1\", value: [] },\r\n\t\r\n\t\t\t\"shadowMatrix\" : { type: \"m4v\", value: [] }\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/shaders/ShaderLib.js\r\n\t\r\n\t/**\r\n\t * Webgl Shader Library for three.js\r\n\t *\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t */\r\n\t\r\n\t\r\n\tTHREE.ShaderLib = {\r\n\t\r\n\t\t'basic': {\r\n\t\r\n\t\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\r\n\t\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\t\r\n\t\t\t] ),\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\r\n\t\t\t\t\"\t#ifdef USE_ENVMAP\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\t\r\n\t\t\t\t\"\t#endif\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\t\"\tvec3 totalAmbientLight = vec3( 1.0 );\", // hardwired\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\t\r\n\t\t\t\t\"\toutgoingLight = diffuseColor.rgb * totalAmbientLight;\", // simple shader\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\t\t// TODO: Shadows on an otherwise unlit surface doesn't make sense.\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'lambert': {\r\n\t\r\n\t\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\r\n\t\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\t\r\n\t\t\t\t{\r\n\t\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) }\r\n\t\t\t\t}\r\n\t\r\n\t\t\t] ),\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"#define LAMBERT\",\r\n\t\r\n\t\t\t\t\"varying vec3 vLightFront;\",\r\n\t\r\n\t\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\t\r\n\t\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\t\r\n\t\t\t\t\"#endif\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\t\"varying vec3 vLightFront;\",\r\n\t\r\n\t\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\t\r\n\t\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\t\r\n\t\t\t\t\"#endif\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\t// outgoing light does not have an alpha, the surface does\r\n\t\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\r\n\t\t\t\t\"\t#ifdef DOUBLE_SIDED\",\r\n\t\r\n\t\t\t\t\"\t\tif ( gl_FrontFacing )\",\r\n\t\t\t\t\"\t\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\",\r\n\t\t\t\t\"\t\telse\",\r\n\t\t\t\t\"\t\t\toutgoingLight += diffuseColor.rgb * vLightBack + emissive;\",\r\n\t\r\n\t\t\t\t\"\t#else\",\r\n\t\r\n\t\t\t\t\"\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\",\r\n\t\r\n\t\t\t\t\"\t#endif\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'phong': {\r\n\t\r\n\t\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\r\n\t\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"lightmap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"emissivemap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"bumpmap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"displacementmap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\t\r\n\t\t\t\t{\r\n\t\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\t\t\"shininess\": { type: \"f\", value: 30 }\r\n\t\t\t\t}\r\n\t\r\n\t\t\t] ),\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"#define PHONG\",\r\n\t\r\n\t\t\t\t\"varying vec3 vViewPosition;\",\r\n\t\r\n\t\t\t\t\"#ifndef FLAT_SHADED\",\r\n\t\r\n\t\t\t\t\"\tvarying vec3 vNormal;\",\r\n\t\r\n\t\t\t\t\"#endif\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"displacementmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\t\r\n\t\t\t\t\"#ifndef FLAT_SHADED\", // Normal computed with derivatives when FLAT_SHADED\r\n\t\r\n\t\t\t\t\"\tvNormal = normalize( transformedNormal );\",\r\n\t\r\n\t\t\t\t\"#endif\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"displacementmap_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"\tvViewPosition = - mvPosition.xyz;\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"#define PHONG\",\r\n\t\r\n\t\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\t\"uniform vec3 specular;\",\r\n\t\t\t\t\"uniform float shininess;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"emissivemap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\t\"\tvec3 totalAmbientLight = ambientLightColor;\",\r\n\t\t\t\t\"\tvec3 totalEmissiveLight = emissive;\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"emissivemap_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'points': {\r\n\t\r\n\t\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\r\n\t\t\t\tTHREE.UniformsLib[ \"points\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\t\r\n\t\t\t] ),\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"uniform float size;\",\r\n\t\t\t\t\"uniform float scale;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\r\n\t\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\r\n\t\t\t\t\"\t#ifdef USE_SIZEATTENUATION\",\r\n\t\t\t\t\"\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\",\r\n\t\t\t\t\"\t#else\",\r\n\t\t\t\t\"\t\tgl_PointSize = size;\",\r\n\t\t\t\t\"\t#endif\",\r\n\t\r\n\t\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform vec3 psColor;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_particle_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\t\"\tvec4 diffuseColor = vec4( psColor, opacity );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"map_particle_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\r\n\t\t\t\t\"\toutgoingLight = diffuseColor.rgb;\", // simple shader\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'dashed': {\r\n\t\r\n\t\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\r\n\t\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\r\n\t\t\t\t{\r\n\t\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\r\n\t\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\r\n\t\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\r\n\t\t\t\t}\r\n\t\r\n\t\t\t] ),\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"uniform float scale;\",\r\n\t\t\t\t\"attribute float lineDistance;\",\r\n\t\r\n\t\t\t\t\"varying float vLineDistance;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\r\n\t\t\t\t\"\tvLineDistance = scale * lineDistance;\",\r\n\t\r\n\t\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\t\"uniform float dashSize;\",\r\n\t\t\t\t\"uniform float totalSize;\",\r\n\t\r\n\t\t\t\t\"varying float vLineDistance;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\",\r\n\t\r\n\t\t\t\t\"\t\tdiscard;\",\r\n\t\r\n\t\t\t\t\"\t}\",\r\n\t\r\n\t\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\r\n\t\t\t\t\"\toutgoingLight = diffuseColor.rgb;\", // simple shader\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'depth': {\r\n\t\r\n\t\t\tuniforms: {\r\n\t\r\n\t\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\r\n\t\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\r\n\t\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform float mNear;\",\r\n\t\t\t\t\"uniform float mFar;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\r\n\t\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\t\r\n\t\t\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\r\n\t\r\n\t\t\t\t\"\t#else\",\r\n\t\r\n\t\t\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\r\n\t\r\n\t\t\t\t\"\t#endif\",\r\n\t\r\n\t\t\t\t\"\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\",\r\n\t\t\t\t\"\tgl_FragColor = vec4( vec3( color ), opacity );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'normal': {\r\n\t\r\n\t\t\tuniforms: {\r\n\t\r\n\t\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"varying vec3 vNormal;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvNormal = normalize( normalMatrix * normal );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\"varying vec3 vNormal;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t/* -------------------------------------------------------------------------\r\n\t\t//\tCube map shader\r\n\t\t ------------------------------------------------------------------------- */\r\n\t\r\n\t\t'cube': {\r\n\t\r\n\t\t\tuniforms: { \"tCube\": { type: \"t\", value: null },\r\n\t\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"varying vec3 vWorldPosition;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvWorldPosition = transformDirection( position, modelMatrix );\",\r\n\t\r\n\t\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform samplerCube tCube;\",\r\n\t\t\t\t\"uniform float tFlip;\",\r\n\t\r\n\t\t\t\t\"varying vec3 vWorldPosition;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t/* -------------------------------------------------------------------------\r\n\t\t//\tCube map shader\r\n\t\t ------------------------------------------------------------------------- */\r\n\t\r\n\t\t'equirect': {\r\n\t\r\n\t\t\tuniforms: { \"tEquirect\": { type: \"t\", value: null },\r\n\t\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"varying vec3 vWorldPosition;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvWorldPosition = transformDirection( position, modelMatrix );\",\r\n\t\r\n\t\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform sampler2D tEquirect;\",\r\n\t\t\t\t\"uniform float tFlip;\",\r\n\t\r\n\t\t\t\t\"varying vec3 vWorldPosition;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\t// \"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\t\t\t\t\t\"vec3 direction = normalize( vWorldPosition );\",\r\n\t\t\t\t\t\"vec2 sampleUV;\",\r\n\t\t\t\t\t\"sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\",\r\n\t\t\t\t\t\"sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\",\r\n\t\t\t\t\t\"gl_FragColor = texture2D( tEquirect, sampleUV );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t/* Depth encoding into RGBA texture\r\n\t\t *\r\n\t\t * based on SpiderGL shadow map example\r\n\t\t * http://spidergl.org/example.php?id=6\r\n\t\t *\r\n\t\t * originally from\r\n\t\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\r\n\t\t *\r\n\t\t * see also\r\n\t\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\r\n\t\t */\r\n\t\r\n\t\t'depthRGBA': {\r\n\t\r\n\t\t\tuniforms: {},\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"vec4 pack_depth( const in float depth ) {\",\r\n\t\r\n\t\t\t\t\"\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\r\n\t\t\t\t\"\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\r\n\t\t\t\t\"\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\", // \"\tvec4 res = fract( depth * bit_shift );\",\r\n\t\t\t\t\"\tres -= res.xxyz * bit_mask;\",\r\n\t\t\t\t\"\treturn res;\",\r\n\t\r\n\t\t\t\t\"}\",\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\r\n\t\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\t\r\n\t\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\",\r\n\t\r\n\t\t\t\t\"\t#else\",\r\n\t\r\n\t\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\",\r\n\t\r\n\t\t\t\t\"\t#endif\",\r\n\t\r\n\t\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z / gl_FragCoord.w );\",\r\n\t\t\t\t\t//\"float z = ( ( gl_FragCoord.z / gl_FragCoord.w ) - 3.0 ) / ( 4000.0 - 3.0 );\",\r\n\t\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( z );\",\r\n\t\t\t\t\t//\"gl_FragData[ 0 ] = vec4( z, z, z, 1.0 );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/WebGLRenderer.js\r\n\t\r\n\t/**\r\n\t * @author supereggbert / http://www.paulbrunt.co.uk/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author szimek / https://github.com/szimek/\r\n\t */\r\n\t\r\n\tTHREE.WebGLRenderer = function ( parameters ) {\r\n\t\r\n\t\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\r\n\t\r\n\t\tparameters = parameters || {};\r\n\t\r\n\t\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\r\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\t\r\n\t\t_width = _canvas.width,\r\n\t\t_height = _canvas.height,\r\n\t\r\n\t\tpixelRatio = 1,\r\n\t\r\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n\t\r\n\t\t_clearColor = new THREE.Color( 0x000000 ),\r\n\t\t_clearAlpha = 0;\r\n\t\r\n\t\tvar lights = [];\r\n\t\r\n\t\tvar opaqueObjects = [];\r\n\t\tvar opaqueObjectsLastIndex = -1;\r\n\t\tvar transparentObjects = [];\r\n\t\tvar transparentObjectsLastIndex = -1;\r\n\t\r\n\t\tvar opaqueImmediateObjects = [];\r\n\t\tvar opaqueImmediateObjectsLastIndex = -1;\r\n\t\tvar transparentImmediateObjects = [];\r\n\t\tvar transparentImmediateObjectsLastIndex = -1;\r\n\t\r\n\t\tvar morphInfluences = new Float32Array( 8 );\r\n\t\r\n\t\r\n\t\tvar sprites = [];\r\n\t\tvar lensFlares = [];\r\n\t\r\n\t\t// public properties\r\n\t\r\n\t\tthis.domElement = _canvas;\r\n\t\tthis.context = null;\r\n\t\r\n\t\t// clearing\r\n\t\r\n\t\tthis.autoClear = true;\r\n\t\tthis.autoClearColor = true;\r\n\t\tthis.autoClearDepth = true;\r\n\t\tthis.autoClearStencil = true;\r\n\t\r\n\t\t// scene graph\r\n\t\r\n\t\tthis.sortObjects = true;\r\n\t\r\n\t\t// physically based shading\r\n\t\r\n\t\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\t\tthis.gammaInput = false;\r\n\t\tthis.gammaOutput = false;\r\n\t\r\n\t\t// morphs\r\n\t\r\n\t\tthis.maxMorphTargets = 8;\r\n\t\tthis.maxMorphNormals = 4;\r\n\t\r\n\t\t// flags\r\n\t\r\n\t\tthis.autoScaleCubemaps = true;\r\n\t\r\n\t\t// internal properties\r\n\t\r\n\t\tvar _this = this,\r\n\t\r\n\t\t// internal state cache\r\n\t\r\n\t\t_currentProgram = null,\r\n\t\t_currentFramebuffer = null,\r\n\t\t_currentMaterialId = - 1,\r\n\t\t_currentGeometryProgram = '',\r\n\t\t_currentCamera = null,\r\n\t\r\n\t\t_usedTextureUnits = 0,\r\n\t\r\n\t\t_viewportX = 0,\r\n\t\t_viewportY = 0,\r\n\t\t_viewportWidth = _canvas.width,\r\n\t\t_viewportHeight = _canvas.height,\r\n\t\t_currentWidth = 0,\r\n\t\t_currentHeight = 0,\r\n\t\r\n\t\t// frustum\r\n\t\r\n\t\t_frustum = new THREE.Frustum(),\r\n\t\r\n\t\t // camera matrices cache\r\n\t\r\n\t\t_projScreenMatrix = new THREE.Matrix4(),\r\n\t\r\n\t\t_vector3 = new THREE.Vector3(),\r\n\t\r\n\t\t// light arrays cache\r\n\t\r\n\t\t_direction = new THREE.Vector3(),\r\n\t\r\n\t\t_lightsNeedUpdate = true,\r\n\t\r\n\t\t_lights = {\r\n\t\r\n\t\t\tambient: [ 0, 0, 0 ],\r\n\t\t\tdirectional: { length: 0, colors: [], positions: [] },\r\n\t\t\tpoint: { length: 0, colors: [], positions: [], distances: [], decays: [] },\r\n\t\t\tspot: { length: 0, colors: [], positions: [], distances: [], directions: [], anglesCos: [], exponents: [], decays: [] },\r\n\t\t\themi: { length: 0, skyColors: [], groundColors: [], positions: [] }\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// info\r\n\t\r\n\t\t_infoMemory = {\r\n\t\r\n\t\t\tgeometries: 0,\r\n\t\t\ttextures: 0\r\n\t\r\n\t\t},\r\n\t\r\n\t\t_infoRender = {\r\n\t\r\n\t\t\tcalls: 0,\r\n\t\t\tvertices: 0,\r\n\t\t\tfaces: 0,\r\n\t\t\tpoints: 0\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.info = {\r\n\t\r\n\t\t\trender: _infoRender,\r\n\t\t\tmemory: _infoMemory,\r\n\t\t\tprograms: null\r\n\t\r\n\t\t};\r\n\t\r\n\t\r\n\t\t// initialize\r\n\t\r\n\t\tvar _gl;\r\n\t\r\n\t\ttry {\r\n\t\r\n\t\t\tvar attributes = {\r\n\t\t\t\talpha: _alpha,\r\n\t\t\t\tdepth: _depth,\r\n\t\t\t\tstencil: _stencil,\r\n\t\t\t\tantialias: _antialias,\r\n\t\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\r\n\t\t\t};\r\n\t\r\n\t\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\r\n\t\r\n\t\t\tif ( _gl === null ) {\r\n\t\r\n\t\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\r\n\t\r\n\t\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthrow 'Error creating WebGL context.';\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\t\r\n\t\t} catch ( error ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar extensions = new THREE.WebGLExtensions( _gl );\r\n\t\r\n\t\textensions.get( 'OES_texture_float' );\r\n\t\textensions.get( 'OES_texture_float_linear' );\r\n\t\textensions.get( 'OES_texture_half_float' );\r\n\t\textensions.get( 'OES_texture_half_float_linear' );\r\n\t\textensions.get( 'OES_standard_derivatives' );\r\n\t\textensions.get( 'ANGLE_instanced_arrays' );\r\n\t\r\n\t\tif ( extensions.get( 'OES_element_index_uint' ) ) {\r\n\t\r\n\t\t\tTHREE.BufferGeometry.MaxIndex = 4294967296;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar capabilities = new THREE.WebGLCapabilities( _gl, extensions, parameters );\r\n\t\r\n\t\tvar state = new THREE.WebGLState( _gl, extensions, paramThreeToGL );\r\n\t\tvar properties = new THREE.WebGLProperties();\r\n\t\tvar objects = new THREE.WebGLObjects( _gl, properties, this.info );\r\n\t\tvar programCache = new THREE.WebGLPrograms( this, capabilities );\r\n\t\r\n\t\tthis.info.programs = programCache.programs;\r\n\t\r\n\t\tvar bufferRenderer = new THREE.WebGLBufferRenderer( _gl, extensions, _infoRender );\r\n\t\tvar indexedBufferRenderer = new THREE.WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\r\n\t\r\n\t\t//\r\n\t\r\n\t\tfunction glClearColor( r, g, b, a ) {\r\n\t\r\n\t\t\tif ( _premultipliedAlpha === true ) {\r\n\t\r\n\t\t\t\tr *= a; g *= a; b *= a;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_gl.clearColor( r, g, b, a );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setDefaultGLState() {\r\n\t\r\n\t\t\tstate.init();\r\n\t\r\n\t\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\t\r\n\t\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction resetGLState() {\r\n\t\r\n\t\t\t_currentProgram = null;\r\n\t\t\t_currentCamera = null;\r\n\t\r\n\t\t\t_currentGeometryProgram = '';\r\n\t\t\t_currentMaterialId = - 1;\r\n\t\r\n\t\t\t_lightsNeedUpdate = true;\r\n\t\r\n\t\t\tstate.reset();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tsetDefaultGLState();\r\n\t\r\n\t\tthis.context = _gl;\r\n\t\tthis.capabilities = capabilities;\r\n\t\tthis.extensions = extensions;\r\n\t\tthis.state = state;\r\n\t\r\n\t\t// shadow map\r\n\t\r\n\t\tvar shadowMap = new THREE.WebGLShadowMap( this, lights, objects );\r\n\t\r\n\t\tthis.shadowMap = shadowMap;\r\n\t\r\n\t\r\n\t\t// Plugins\r\n\t\r\n\t\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\r\n\t\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\r\n\t\r\n\t\t// API\r\n\t\r\n\t\tthis.getContext = function () {\r\n\t\r\n\t\t\treturn _gl;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getContextAttributes = function () {\r\n\t\r\n\t\t\treturn _gl.getContextAttributes();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.forceContextLoss = function () {\r\n\t\r\n\t\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getMaxAnisotropy = ( function () {\r\n\t\r\n\t\t\tvar value;\r\n\t\r\n\t\t\treturn function getMaxAnisotropy() {\r\n\t\r\n\t\t\t\tif ( value !== undefined ) return value;\r\n\t\r\n\t\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\t\r\n\t\t\t\tif ( extension !== null ) {\r\n\t\r\n\t\t\t\t\tvalue = _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvalue = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn value;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t} )();\r\n\t\r\n\t\tthis.getPrecision = function () {\r\n\t\r\n\t\t\treturn capabilities.precision;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getPixelRatio = function () {\r\n\t\r\n\t\t\treturn pixelRatio;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setPixelRatio = function ( value ) {\r\n\t\r\n\t\t\tif ( value !== undefined ) pixelRatio = value;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getSize = function () {\r\n\t\r\n\t\t\treturn {\r\n\t\t\t\twidth: _width,\r\n\t\t\t\theight: _height\r\n\t\t\t};\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setSize = function ( width, height, updateStyle ) {\r\n\t\r\n\t\t\t_width = width;\r\n\t\t\t_height = height;\r\n\t\r\n\t\t\t_canvas.width = width * pixelRatio;\r\n\t\t\t_canvas.height = height * pixelRatio;\r\n\t\r\n\t\t\tif ( updateStyle !== false ) {\r\n\t\r\n\t\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t\t_canvas.style.height = height + 'px';\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.setViewport( 0, 0, width, height );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setViewport = function ( x, y, width, height ) {\r\n\t\r\n\t\t\t_viewportX = x * pixelRatio;\r\n\t\t\t_viewportY = y * pixelRatio;\r\n\t\r\n\t\t\t_viewportWidth = width * pixelRatio;\r\n\t\t\t_viewportHeight = height * pixelRatio;\r\n\t\r\n\t\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setScissor = function ( x, y, width, height ) {\r\n\t\r\n\t\t\t_gl.scissor(\r\n\t\t\t\tx * pixelRatio,\r\n\t\t\t\ty * pixelRatio,\r\n\t\t\t\twidth * pixelRatio,\r\n\t\t\t\theight * pixelRatio\r\n\t\t\t);\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.enableScissorTest = function ( boolean ) {\r\n\t\r\n\t\t\tstate.setScissorTest( boolean );\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Clearing\r\n\t\r\n\t\tthis.getClearColor = function () {\r\n\t\r\n\t\t\treturn _clearColor;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setClearColor = function ( color, alpha ) {\r\n\t\r\n\t\t\t_clearColor.set( color );\r\n\t\r\n\t\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\r\n\t\r\n\t\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getClearAlpha = function () {\r\n\t\r\n\t\t\treturn _clearAlpha;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setClearAlpha = function ( alpha ) {\r\n\t\r\n\t\t\t_clearAlpha = alpha;\r\n\t\r\n\t\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clear = function ( color, depth, stencil ) {\r\n\t\r\n\t\t\tvar bits = 0;\r\n\t\r\n\t\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n\t\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n\t\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\t\r\n\t\t\t_gl.clear( bits );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clearColor = function () {\r\n\t\r\n\t\t\t_gl.clear( _gl.COLOR_BUFFER_BIT );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clearDepth = function () {\r\n\t\r\n\t\t\t_gl.clear( _gl.DEPTH_BUFFER_BIT );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clearStencil = function () {\r\n\t\r\n\t\t\t_gl.clear( _gl.STENCIL_BUFFER_BIT );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\t\r\n\t\t\tthis.setRenderTarget( renderTarget );\r\n\t\t\tthis.clear( color, depth, stencil );\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Reset\r\n\t\r\n\t\tthis.resetGLState = resetGLState;\r\n\t\r\n\t\tthis.dispose = function() {\r\n\t\r\n\t\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Events\r\n\t\r\n\t\tfunction onContextLost( event ) {\r\n\t\r\n\t\t\tevent.preventDefault();\r\n\t\r\n\t\t\tresetGLState();\r\n\t\t\tsetDefaultGLState();\r\n\t\r\n\t\t\tproperties.clear();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction onTextureDispose( event ) {\r\n\t\r\n\t\t\tvar texture = event.target;\r\n\t\r\n\t\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\t\r\n\t\t\tdeallocateTexture( texture );\r\n\t\r\n\t\t\t_infoMemory.textures --;\r\n\t\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction onRenderTargetDispose( event ) {\r\n\t\r\n\t\t\tvar renderTarget = event.target;\r\n\t\r\n\t\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\t\r\n\t\t\tdeallocateRenderTarget( renderTarget );\r\n\t\r\n\t\t\t_infoMemory.textures --;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction onMaterialDispose( event ) {\r\n\t\r\n\t\t\tvar material = event.target;\r\n\t\r\n\t\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\t\r\n\t\t\tdeallocateMaterial( material );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Buffer deallocation\r\n\t\r\n\t\tfunction deallocateTexture( texture ) {\r\n\t\r\n\t\t\tvar textureProperties = properties.get( texture );\r\n\t\r\n\t\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\r\n\t\r\n\t\t\t\t// cube texture\r\n\t\r\n\t\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// 2D texture\r\n\t\r\n\t\t\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\t\r\n\t\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// remove all webgl properties\r\n\t\t\tproperties.delete( texture );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction deallocateRenderTarget( renderTarget ) {\r\n\t\r\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\r\n\t\t\tif ( ! renderTarget || renderTargetProperties.__webglTexture === undefined ) return;\r\n\t\r\n\t\t\t_gl.deleteTexture( renderTargetProperties.__webglTexture );\r\n\t\r\n\t\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglRenderbuffer[ i ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglRenderbuffer );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tproperties.delete( renderTarget );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction deallocateMaterial( material ) {\r\n\t\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\t\r\n\t\t\tproperties.delete( material );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tfunction releaseMaterialProgramReference( material ) {\r\n\t\r\n\t\t\tvar programInfo = properties.get( material ).program;\r\n\t\r\n\t\t\tmaterial.program = undefined;\r\n\t\r\n\t\t\tif ( programInfo !== undefined ) {\r\n\t\r\n\t\t\t\tprogramCache.releaseProgram( programInfo );\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Buffer rendering\r\n\t\r\n\t\tthis.renderBufferImmediate = function ( object, program, material ) {\r\n\t\r\n\t\t\tstate.initAttributes();\r\n\t\r\n\t\t\tvar buffers = properties.get( object );\r\n\t\r\n\t\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\t\r\n\t\t\tvar attributes = program.getAttributes();\r\n\t\r\n\t\t\tif ( object.hasPositions ) {\r\n\t\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\t\r\n\t\t\t\tstate.enableAttribute( attributes.position );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object.hasNormals ) {\r\n\t\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\r\n\t\r\n\t\t\t\tif ( material.type !== 'MeshPhongMaterial' && material.shading === THREE.FlatShading ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\r\n\t\r\n\t\t\t\t\t\tvar array = object.normalArray;\r\n\t\r\n\t\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\r\n\t\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\r\n\t\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\r\n\t\r\n\t\t\t\t\t\tarray[ i + 0 ] = nx;\r\n\t\t\t\t\t\tarray[ i + 1 ] = ny;\r\n\t\t\t\t\t\tarray[ i + 2 ] = nz;\r\n\t\r\n\t\t\t\t\t\tarray[ i + 3 ] = nx;\r\n\t\t\t\t\t\tarray[ i + 4 ] = ny;\r\n\t\t\t\t\t\tarray[ i + 5 ] = nz;\r\n\t\r\n\t\t\t\t\t\tarray[ i + 6 ] = nx;\r\n\t\t\t\t\t\tarray[ i + 7 ] = ny;\r\n\t\t\t\t\t\tarray[ i + 8 ] = nz;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\t\r\n\t\t\t\tstate.enableAttribute( attributes.normal );\r\n\t\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object.hasUvs && material.map ) {\r\n\t\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\t\r\n\t\t\t\tstate.enableAttribute( attributes.uv );\r\n\t\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\r\n\t\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\t\r\n\t\t\t\tstate.enableAttribute( attributes.color );\r\n\t\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tstate.disableUnusedAttributes();\r\n\t\r\n\t\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\t\r\n\t\t\tobject.count = 0;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.renderBufferDirect = function ( camera, lights, fog, geometry, material, object, group ) {\r\n\t\r\n\t\t\tsetMaterial( material );\r\n\t\r\n\t\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\t\r\n\t\t\tvar updateBuffers = false;\r\n\t\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + material.wireframe;\r\n\t\r\n\t\t\tif ( geometryProgram !== _currentGeometryProgram ) {\r\n\t\r\n\t\t\t\t_currentGeometryProgram = geometryProgram;\r\n\t\t\t\tupdateBuffers = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// morph targets\r\n\t\r\n\t\t\tvar morphTargetInfluences = object.morphTargetInfluences;\r\n\t\r\n\t\t\tif ( morphTargetInfluences !== undefined ) {\r\n\t\r\n\t\t\t\tvar activeInfluences = [];\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar influence = morphTargetInfluences[ i ];\r\n\t\t\t\t\tactiveInfluences.push( [ influence, i ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tactiveInfluences.sort( numericalSort );\r\n\t\r\n\t\t\t\tif ( activeInfluences.length > 8 ) {\r\n\t\r\n\t\t\t\t\tactiveInfluences.length = 8;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar morphAttributes = geometry.morphAttributes;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar influence = activeInfluences[ i ];\r\n\t\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\r\n\t\r\n\t\t\t\t\tif ( influence[ 0 ] !== 0 ) {\r\n\t\r\n\t\t\t\t\t\tvar index = influence[ 1 ];\r\n\t\r\n\t\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\r\n\t\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\r\n\t\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar uniforms = program.getUniforms();\r\n\t\r\n\t\t\t\tif ( uniforms.morphTargetInfluences !== null ) {\r\n\t\r\n\t\t\t\t\t_gl.uniform1fv( uniforms.morphTargetInfluences, morphInfluences );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tupdateBuffers = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar position = geometry.attributes.position;\r\n\t\r\n\t\t\tif ( material.wireframe === true ) {\r\n\t\r\n\t\t\t\tindex = objects.getWireframeAttribute( geometry );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar renderer;\r\n\t\r\n\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\t\trenderer.setIndex( index );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\trenderer = bufferRenderer;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( updateBuffers ) {\r\n\t\r\n\t\t\t\tsetupVertexAttributes( material, program, geometry );\r\n\t\r\n\t\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, objects.getAttributeBuffer( index ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( group === undefined ) {\r\n\t\r\n\t\t\t\tvar count;\r\n\t\r\n\t\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\t\tcount = index.count;\r\n\t\r\n\t\t\t\t} else if ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\t\tcount = position.data.array.length / 3;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tcount = position.count;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar drawRange = geometry.drawRange;\r\n\t\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: drawRange.start,\r\n\t\t\t\t\tcount: Math.min( drawRange.count, count )\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object instanceof THREE.Mesh ) {\r\n\t\r\n\t\t\t\tif ( material.wireframe === true ) {\r\n\t\r\n\t\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * pixelRatio );\r\n\t\t\t\t\trenderer.setMode( _gl.LINES );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( geometry instanceof THREE.InstancedBufferGeometry && geometry.maxInstancedCount > 0 ) {\r\n\t\r\n\t\t\t\t\trenderer.renderInstances( geometry );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\trenderer.render( group.start, group.count );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.Line ) {\r\n\t\r\n\t\t\t\tvar lineWidth = material.linewidth;\r\n\t\r\n\t\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\t\r\n\t\t\t\tstate.setLineWidth( lineWidth * pixelRatio );\r\n\t\r\n\t\t\t\tif ( object instanceof THREE.LineSegments ) {\r\n\t\r\n\t\t\t\t\trenderer.setMode( _gl.LINES );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\trenderer.render( group.start, group.count );\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.Points ) {\r\n\t\r\n\t\t\t\trenderer.setMode( _gl.POINTS );\r\n\t\t\t\trenderer.render( group.start, group.count );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\r\n\t\r\n\t\t\tvar extension;\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\t\r\n\t\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\r\n\t\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( startIndex === undefined ) startIndex = 0;\r\n\t\r\n\t\t\tstate.initAttributes();\r\n\t\r\n\t\t\tvar geometryAttributes = geometry.attributes;\r\n\t\r\n\t\t\tvar programAttributes = program.getAttributes();\r\n\t\r\n\t\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\t\r\n\t\t\tfor ( var name in programAttributes ) {\r\n\t\r\n\t\t\t\tvar programAttribute = programAttributes[ name ];\r\n\t\r\n\t\t\t\tif ( programAttribute >= 0 ) {\r\n\t\r\n\t\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\r\n\t\r\n\t\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\t\r\n\t\t\t\t\t\tvar size = geometryAttribute.itemSize;\r\n\t\t\t\t\t\tvar buffer = objects.getAttributeBuffer( geometryAttribute );\r\n\t\r\n\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\t\t\t\tvar data = geometryAttribute.data;\r\n\t\t\t\t\t\t\tvar stride = data.stride;\r\n\t\t\t\t\t\t\tvar offset = geometryAttribute.offset;\r\n\t\r\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, stride * data.array.BYTES_PER_ELEMENT, ( startIndex * stride + offset ) * data.array.BYTES_PER_ELEMENT );\r\n\t\r\n\t\t\t\t\t\t\tif ( data instanceof THREE.InstancedInterleavedBuffer ) {\r\n\t\r\n\t\t\t\t\t\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t\textension.vertexAttribDivisorANGLE( programAttribute, data.meshPerAttribute );\r\n\t\r\n\t\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\r\n\t\r\n\t\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InstancedBufferAttribute ) {\r\n\t\r\n\t\t\t\t\t\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t\textension.vertexAttribDivisorANGLE( programAttribute, geometryAttribute.meshPerAttribute );\r\n\t\r\n\t\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\r\n\t\r\n\t\t\t\t\t\tif ( value !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tswitch ( value.length ) {\r\n\t\r\n\t\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tstate.disableUnusedAttributes();\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Sorting\r\n\t\r\n\t\tfunction numericalSort ( a, b ) {\r\n\t\r\n\t\t\treturn b[ 0 ] - a[ 0 ];\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction painterSortStable ( a, b ) {\r\n\t\r\n\t\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\t\r\n\t\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\t\r\n\t\t\t} else if ( a.material.id !== b.material.id ) {\r\n\t\r\n\t\t\t\treturn a.material.id - b.material.id;\r\n\t\r\n\t\t\t} else if ( a.z !== b.z ) {\r\n\t\r\n\t\t\t\treturn a.z - b.z;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\treturn a.id - b.id;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction reversePainterSortStable ( a, b ) {\r\n\t\r\n\t\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\t\r\n\t\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\t\r\n\t\t\t} if ( a.z !== b.z ) {\r\n\t\r\n\t\t\t\treturn b.z - a.z;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\treturn a.id - b.id;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Rendering\r\n\t\r\n\t\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\t\r\n\t\t\tif ( camera instanceof THREE.Camera === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar fog = scene.fog;\r\n\t\r\n\t\t\t// reset caching for this frame\r\n\t\r\n\t\t\t_currentGeometryProgram = '';\r\n\t\t\t_currentMaterialId = - 1;\r\n\t\t\t_currentCamera = null;\r\n\t\t\t_lightsNeedUpdate = true;\r\n\t\r\n\t\t\t// update scene graph\r\n\t\r\n\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\t\r\n\t\t\t// update camera matrices and frustum\r\n\t\r\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\t\r\n\t\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\t\r\n\t\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\t\r\n\t\t\tlights.length = 0;\r\n\t\r\n\t\t\topaqueObjectsLastIndex = -1;\r\n\t\t\ttransparentObjectsLastIndex = -1;\r\n\t\r\n\t\t\topaqueImmediateObjectsLastIndex = -1;\r\n\t\t\ttransparentImmediateObjectsLastIndex = -1;\r\n\t\r\n\t\t\tsprites.length = 0;\r\n\t\t\tlensFlares.length = 0;\r\n\t\r\n\t\t\tprojectObject( scene );\r\n\t\r\n\t\t\topaqueObjects.length = opaqueObjectsLastIndex + 1;\r\n\t\t\ttransparentObjects.length = transparentObjectsLastIndex + 1;\r\n\t\r\n\t\t\topaqueImmediateObjects.length = opaqueImmediateObjectsLastIndex + 1;\r\n\t\t\ttransparentImmediateObjects.length = transparentImmediateObjectsLastIndex + 1;\r\n\t\r\n\t\t\tif ( _this.sortObjects === true ) {\r\n\t\r\n\t\t\t\topaqueObjects.sort( painterSortStable );\r\n\t\t\t\ttransparentObjects.sort( reversePainterSortStable );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tshadowMap.render( scene, camera );\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\t_infoRender.calls = 0;\r\n\t\t\t_infoRender.vertices = 0;\r\n\t\t\t_infoRender.faces = 0;\r\n\t\t\t_infoRender.points = 0;\r\n\t\r\n\t\t\tthis.setRenderTarget( renderTarget );\r\n\t\r\n\t\t\tif ( this.autoClear || forceClear ) {\r\n\t\r\n\t\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tif ( scene.overrideMaterial ) {\r\n\t\r\n\t\t\t\tvar overrideMaterial = scene.overrideMaterial;\r\n\t\r\n\t\t\t\trenderObjects( opaqueObjects, camera, lights, fog, overrideMaterial );\r\n\t\t\t\trenderObjects( transparentObjects, camera, lights, fog, overrideMaterial );\r\n\t\r\n\t\t\t\trenderObjectsImmediate( opaqueImmediateObjects, camera, lights, fog, overrideMaterial );\r\n\t\t\t\trenderObjectsImmediate( transparentImmediateObjects, camera, lights, fog, overrideMaterial );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// opaque pass (front-to-back order)\r\n\t\r\n\t\t\t\tstate.setBlending( THREE.NoBlending );\r\n\t\r\n\t\t\t\trenderObjects( opaqueObjects, camera, lights, fog );\r\n\t\t\t\trenderObjectsImmediate( opaqueImmediateObjects, camera, lights, fog );\r\n\t\r\n\t\t\t\t// transparent pass (back-to-front order)\r\n\t\r\n\t\t\t\trenderObjects( transparentObjects, camera, lights, fog );\r\n\t\t\t\trenderObjectsImmediate( transparentImmediateObjects, camera, lights, fog );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// custom render plugins (post pass)\r\n\t\r\n\t\t\tspritePlugin.render( scene, camera );\r\n\t\t\tlensFlarePlugin.render( scene, camera, _currentWidth, _currentHeight );\r\n\t\r\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\t\r\n\t\t\tif ( renderTarget && renderTarget.generateMipmaps && renderTarget.minFilter !== THREE.NearestFilter && renderTarget.minFilter !== THREE.LinearFilter ) {\r\n\t\r\n\t\t\t\tupdateRenderTargetMipmap( renderTarget );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\t\r\n\t\t\tstate.setDepthTest( true );\r\n\t\t\tstate.setDepthWrite( true );\r\n\t\t\tstate.setColorWrite( true );\r\n\t\r\n\t\t\t// _gl.finish();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction pushImmediateRenderItem( object ) {\r\n\t\r\n\t\t\tvar array, index;\r\n\t\r\n\t\t\t// allocate the next position in the appropriate array\r\n\t\r\n\t\t\tif ( object.material.transparent ) {\r\n\t\r\n\t\t\t\tarray = transparentImmediateObjects;\r\n\t\t\t\tindex = ++ transparentImmediateObjectsLastIndex;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tarray = opaqueImmediateObjects;\r\n\t\t\t\tindex = ++ opaqueImmediateObjectsLastIndex;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// recycle existing position or grow the array\r\n\t\r\n\t\t\tif ( index < array.length ) {\r\n\t\r\n\t\t\t\tarray[ index ] = object;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// assert( index === array.length );\r\n\t\t\t\tarray.push( object );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction pushRenderItem( object, geometry, material, z, group ) {\r\n\t\r\n\t\t\tvar array, index;\r\n\t\r\n\t\t\t// allocate the next position in the appropriate array\r\n\t\r\n\t\t\tif ( material.transparent ) {\r\n\t\r\n\t\t\t\tarray = transparentObjects;\r\n\t\t\t\tindex = ++ transparentObjectsLastIndex;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tarray = opaqueObjects;\r\n\t\t\t\tindex = ++ opaqueObjectsLastIndex;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// recycle existing render item or grow the array\r\n\t\r\n\t\t\tvar renderItem = array[ index ];\r\n\t\r\n\t\t\tif ( renderItem !== undefined ) {\r\n\t\r\n\t\t\t\trenderItem.id = object.id;\r\n\t\t\t\trenderItem.object = object;\r\n\t\t\t\trenderItem.geometry = geometry;\r\n\t\t\t\trenderItem.material = material;\r\n\t\t\t\trenderItem.z = _vector3.z;\r\n\t\t\t\trenderItem.group = group;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\trenderItem = {\r\n\t\t\t\t\tid: object.id,\r\n\t\t\t\t\tobject: object,\r\n\t\t\t\t\tgeometry: geometry,\r\n\t\t\t\t\tmaterial: material,\r\n\t\t\t\t\tz: _vector3.z,\r\n\t\t\t\t\tgroup: group\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\t// assert( index === array.length );\r\n\t\t\t\tarray.push( renderItem );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction projectObject( object ) {\r\n\t\r\n\t\t\tif ( object.visible === false ) return;\r\n\t\r\n\t\t\tif ( object instanceof THREE.Light ) {\r\n\t\r\n\t\t\t\tlights.push( object );\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\t\r\n\t\t\t\tsprites.push( object );\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\r\n\t\r\n\t\t\t\tlensFlares.push( object );\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject ) {\r\n\t\r\n\t\t\t\tpushImmediateRenderItem( object );\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\t\r\n\t\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\r\n\t\r\n\t\t\t\t\tobject.skeleton.update();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) {\r\n\t\r\n\t\t\t\t\tvar material = object.material;\r\n\t\r\n\t\t\t\t\tif ( material.visible === true ) {\r\n\t\r\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\r\n\t\r\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tvar geometry = objects.update( object );\r\n\t\r\n\t\t\t\t\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\r\n\t\r\n\t\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\t\tvar materials = material.materials;\r\n\t\r\n\t\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tvar group = groups[ i ];\r\n\t\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\t\r\n\t\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tpushRenderItem( object, geometry, groupMaterial, _vector3.z, group );\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tpushRenderItem( object, geometry, material, _vector3.z );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar children = object.children;\r\n\t\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tprojectObject( children[ i ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction renderObjects( renderList, camera, lights, fog, overrideMaterial ) {\r\n\t\r\n\t\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar renderItem = renderList[ i ];\r\n\t\r\n\t\t\t\tvar object = renderItem.object;\r\n\t\t\t\tvar geometry = renderItem.geometry;\r\n\t\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\r\n\t\t\t\tvar group = renderItem.group;\r\n\t\r\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\t\r\n\t\t\t\t_this.renderBufferDirect( camera, lights, fog, geometry, material, object, group );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction renderObjectsImmediate( renderList, camera, lights, fog, overrideMaterial ) {\r\n\t\r\n\t\t\tvar material = overrideMaterial;\r\n\t\r\n\t\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar object = renderList[ i ];\r\n\t\r\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\t\r\n\t\t\t\tif ( overrideMaterial === undefined ) material = object.material;\r\n\t\r\n\t\t\t\tsetMaterial( material );\r\n\t\r\n\t\t\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\t\r\n\t\t\t\t_currentGeometryProgram = '';\r\n\t\r\n\t\t\t\tobject.render( function ( object ) {\r\n\t\r\n\t\t\t\t\t_this.renderBufferImmediate( object, program, material );\r\n\t\r\n\t\t\t\t} );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction initMaterial( material, lights, fog, object ) {\r\n\t\r\n\t\t\tvar materialProperties = properties.get( material );\r\n\t\r\n\t\t\tvar parameters = programCache.getParameters( material, lights, fog, object );\r\n\t\t\tvar code = programCache.getProgramCode( material, parameters );\r\n\t\r\n\t\t\tvar program = materialProperties.program;\r\n\t\t\tvar programChange = true;\r\n\t\r\n\t\t\tif ( program === undefined ) {\r\n\t\r\n\t\t\t\t// new material\r\n\t\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\t\r\n\t\t\t} else if ( program.code !== code ) {\r\n\t\r\n\t\t\t\t// changed glsl or parameters\r\n\t\t\t\treleaseMaterialProgramReference( material );\r\n\t\r\n\t\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\t\r\n\t\t\t\t// same glsl and uniform list\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// only rebuild uniform list\r\n\t\t\t\tprogramChange = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( programChange ) {\r\n\t\r\n\t\t\t\tif ( parameters.shaderID ) {\r\n\t\r\n\t\t\t\t\tvar shader = THREE.ShaderLib[ parameters.shaderID ];\r\n\t\r\n\t\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\t\tname: material.type,\r\n\t\t\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\r\n\t\t\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\t\tname: material.type,\r\n\t\t\t\t\t\tuniforms: material.uniforms,\r\n\t\t\t\t\t\tvertexShader: material.vertexShader,\r\n\t\t\t\t\t\tfragmentShader: material.fragmentShader\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\r\n\t\r\n\t\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\r\n\t\r\n\t\t\t\tmaterialProperties.program = program;\r\n\t\t\t\tmaterial.program = program;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar attributes = program.getAttributes();\r\n\t\r\n\t\t\tif ( material.morphTargets ) {\r\n\t\r\n\t\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\t\r\n\t\t\t\t\tif ( attributes[ 'morphTarget' + i ] >= 0 ) {\r\n\t\r\n\t\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.morphNormals ) {\r\n\t\r\n\t\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\t\r\n\t\t\t\tfor ( i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\t\r\n\t\t\t\t\tif ( attributes[ 'morphNormal' + i ] >= 0 ) {\r\n\t\r\n\t\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tmaterialProperties.uniformsList = [];\r\n\t\r\n\t\t\tvar uniformLocations = materialProperties.program.getUniforms();\r\n\t\r\n\t\t\tfor ( var u in materialProperties.__webglShader.uniforms ) {\r\n\t\r\n\t\t\t\tvar location = uniformLocations[ u ];\r\n\t\r\n\t\t\t\tif ( location ) {\r\n\t\r\n\t\t\t\t\tmaterialProperties.uniformsList.push( [ materialProperties.__webglShader.uniforms[ u ], location ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setMaterial( material ) {\r\n\t\r\n\t\t\tsetMaterialFaces( material );\r\n\t\r\n\t\t\tif ( material.transparent === true ) {\r\n\t\r\n\t\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tstate.setBlending( THREE.NoBlending );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tstate.setDepthFunc( material.depthFunc );\r\n\t\t\tstate.setDepthTest( material.depthTest );\r\n\t\t\tstate.setDepthWrite( material.depthWrite );\r\n\t\t\tstate.setColorWrite( material.colorWrite );\r\n\t\t\tstate.setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setMaterialFaces( material ) {\r\n\t\r\n\t\t\tmaterial.side !== THREE.DoubleSide ? state.enable( _gl.CULL_FACE ) : state.disable( _gl.CULL_FACE );\r\n\t\t\tstate.setFlipSided( material.side === THREE.BackSide );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setProgram( camera, lights, fog, material, object ) {\r\n\t\r\n\t\t\t_usedTextureUnits = 0;\r\n\t\r\n\t\t\tvar materialProperties = properties.get( material );\r\n\t\r\n\t\t\tif ( material.needsUpdate || ! materialProperties.program ) {\r\n\t\r\n\t\t\t\tinitMaterial( material, lights, fog, object );\r\n\t\t\t\tmaterial.needsUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar refreshProgram = false;\r\n\t\t\tvar refreshMaterial = false;\r\n\t\t\tvar refreshLights = false;\r\n\t\r\n\t\t\tvar program = materialProperties.program,\r\n\t\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\r\n\t\r\n\t\t\tif ( program.id !== _currentProgram ) {\r\n\t\r\n\t\t\t\t_gl.useProgram( program.program );\r\n\t\t\t\t_currentProgram = program.id;\r\n\t\r\n\t\t\t\trefreshProgram = true;\r\n\t\t\t\trefreshMaterial = true;\r\n\t\t\t\trefreshLights = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.id !== _currentMaterialId ) {\r\n\t\r\n\t\t\t\tif ( _currentMaterialId === - 1 ) refreshLights = true;\r\n\t\t\t\t_currentMaterialId = material.id;\r\n\t\r\n\t\t\t\trefreshMaterial = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( refreshProgram || camera !== _currentCamera ) {\r\n\t\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\t\r\n\t\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\t\r\n\t\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\tif ( camera !== _currentCamera ) _currentCamera = camera;\r\n\t\r\n\t\t\t\t// load material specific uniforms\r\n\t\t\t\t// (shader material also gets them for the sake of genericity)\r\n\t\r\n\t\t\t\tif ( material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t\t material.envMap ) {\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.cameraPosition !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t\t material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t\t material.skinning ) {\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.viewMatrix !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t\t// not sure why, but otherwise weird things happen\r\n\t\r\n\t\t\tif ( material.skinning ) {\r\n\t\r\n\t\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== undefined ) {\r\n\t\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== undefined ) {\r\n\t\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( capabilities.floatVertexTextures && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.boneTexture !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tvar textureUnit = getTextureUnit();\r\n\t\r\n\t\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\r\n\t\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.boneTextureWidth !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.boneTextureHeight !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( refreshMaterial ) {\r\n\t\r\n\t\t\t\t// refresh uniforms common to several materials\r\n\t\r\n\t\t\t\tif ( fog && material.fog ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsFog( m_uniforms, fog );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t\t material.lights ) {\r\n\t\r\n\t\t\t\t\tif ( _lightsNeedUpdate ) {\r\n\t\r\n\t\t\t\t\t\trefreshLights = true;\r\n\t\t\t\t\t\tsetupLights( lights, camera );\r\n\t\t\t\t\t\t_lightsNeedUpdate = false;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( refreshLights ) {\r\n\t\r\n\t\t\t\t\t\trefreshUniformsLights( m_uniforms, _lights );\r\n\t\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, true );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, false );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshPhongMaterial ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsCommon( m_uniforms, material );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// refresh single material specific uniforms\r\n\t\r\n\t\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\r\n\t\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\t\t\t\trefreshUniformsDash( m_uniforms, material );\r\n\t\r\n\t\t\t\t} else if ( material instanceof THREE.PointsMaterial ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsParticle( m_uniforms, material );\r\n\t\r\n\t\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsPhong( m_uniforms, material );\r\n\t\r\n\t\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\r\n\t\r\n\t\t\t\t\tm_uniforms.mNear.value = camera.near;\r\n\t\t\t\t\tm_uniforms.mFar.value = camera.far;\r\n\t\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\t\r\n\t\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\t\r\n\t\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( object.receiveShadow && ! material._shadowPass ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsShadow( m_uniforms, lights );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// load common uniforms\r\n\t\r\n\t\t\t\tloadUniformsGeneric( materialProperties.uniformsList );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tloadUniformsMatrices( p_uniforms, object );\r\n\t\r\n\t\t\tif ( p_uniforms.modelMatrix !== undefined ) {\r\n\t\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn program;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Uniforms (refresh uniforms objects)\r\n\t\r\n\t\tfunction refreshUniformsCommon ( uniforms, material ) {\r\n\t\r\n\t\t\tuniforms.opacity.value = material.opacity;\r\n\t\r\n\t\t\tuniforms.diffuse.value = material.color;\r\n\t\r\n\t\t\tif ( material.emissive ) {\r\n\t\r\n\t\t\t\tuniforms.emissive.value = material.emissive;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tuniforms.map.value = material.map;\r\n\t\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\t\r\n\t\t\tif ( material.aoMap ) {\r\n\t\r\n\t\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// uv repeat and offset setting priorities\r\n\t\t\t// 1. color map\r\n\t\t\t// 2. specular map\r\n\t\t\t// 3. normal map\r\n\t\t\t// 4. bump map\r\n\t\t\t// 5. alpha map\r\n\t\t\t// 6. emissive map\r\n\t\r\n\t\t\tvar uvScaleMap;\r\n\t\r\n\t\t\tif ( material.map ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.map;\r\n\t\r\n\t\t\t} else if ( material.specularMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.specularMap;\r\n\t\r\n\t\t\t} else if ( material.displacementMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.displacementMap;\r\n\t\r\n\t\t\t} else if ( material.normalMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.normalMap;\r\n\t\r\n\t\t\t} else if ( material.bumpMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.bumpMap;\r\n\t\r\n\t\t\t} else if ( material.alphaMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.alphaMap;\r\n\t\r\n\t\t\t} else if ( material.emissiveMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.emissiveMap;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( uvScaleMap !== undefined ) {\r\n\t\r\n\t\t\t\tvar offset = uvScaleMap.offset;\r\n\t\t\t\tvar repeat = uvScaleMap.repeat;\r\n\t\r\n\t\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tuniforms.envMap.value = material.envMap;\r\n\t\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\r\n\t\r\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsLine ( uniforms, material ) {\r\n\t\r\n\t\t\tuniforms.diffuse.value = material.color;\r\n\t\t\tuniforms.opacity.value = material.opacity;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsDash ( uniforms, material ) {\r\n\t\r\n\t\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\t\tuniforms.scale.value = material.scale;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsParticle ( uniforms, material ) {\r\n\t\r\n\t\t\tuniforms.psColor.value = material.color;\r\n\t\t\tuniforms.opacity.value = material.opacity;\r\n\t\t\tuniforms.size.value = material.size;\r\n\t\t\tuniforms.scale.value = _canvas.height / 2.0; // TODO: Cache this.\r\n\t\r\n\t\t\tuniforms.map.value = material.map;\r\n\t\r\n\t\t\tif ( material.map !== null ) {\r\n\t\r\n\t\t\t\tvar offset = material.map.offset;\r\n\t\t\t\tvar repeat = material.map.repeat;\r\n\t\r\n\t\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsFog ( uniforms, fog ) {\r\n\t\r\n\t\t\tuniforms.fogColor.value = fog.color;\r\n\t\r\n\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\t\r\n\t\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\t\tuniforms.fogFar.value = fog.far;\r\n\t\r\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\t\r\n\t\t\t\tuniforms.fogDensity.value = fog.density;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsPhong ( uniforms, material ) {\r\n\t\r\n\t\t\tuniforms.specular.value = material.specular;\r\n\t\t\tuniforms.shininess.value = material.shininess;\r\n\t\r\n\t\t\tif ( material.lightMap ) {\r\n\t\r\n\t\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.emissiveMap ) {\r\n\t\r\n\t\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.bumpMap ) {\r\n\t\r\n\t\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.normalMap ) {\r\n\t\r\n\t\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.displacementMap ) {\r\n\t\r\n\t\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsLights ( uniforms, lights ) {\r\n\t\r\n\t\t\tuniforms.ambientLightColor.value = lights.ambient;\r\n\t\r\n\t\t\tuniforms.directionalLightColor.value = lights.directional.colors;\r\n\t\t\tuniforms.directionalLightDirection.value = lights.directional.positions;\r\n\t\r\n\t\t\tuniforms.pointLightColor.value = lights.point.colors;\r\n\t\t\tuniforms.pointLightPosition.value = lights.point.positions;\r\n\t\t\tuniforms.pointLightDistance.value = lights.point.distances;\r\n\t\t\tuniforms.pointLightDecay.value = lights.point.decays;\r\n\t\r\n\t\t\tuniforms.spotLightColor.value = lights.spot.colors;\r\n\t\t\tuniforms.spotLightPosition.value = lights.spot.positions;\r\n\t\t\tuniforms.spotLightDistance.value = lights.spot.distances;\r\n\t\t\tuniforms.spotLightDirection.value = lights.spot.directions;\r\n\t\t\tuniforms.spotLightAngleCos.value = lights.spot.anglesCos;\r\n\t\t\tuniforms.spotLightExponent.value = lights.spot.exponents;\r\n\t\t\tuniforms.spotLightDecay.value = lights.spot.decays;\r\n\t\r\n\t\t\tuniforms.hemisphereLightSkyColor.value = lights.hemi.skyColors;\r\n\t\t\tuniforms.hemisphereLightGroundColor.value = lights.hemi.groundColors;\r\n\t\t\tuniforms.hemisphereLightDirection.value = lights.hemi.positions;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\t\r\n\t\tfunction markUniformsLightsNeedsUpdate ( uniforms, value ) {\r\n\t\r\n\t\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\t\r\n\t\t\tuniforms.directionalLightColor.needsUpdate = value;\r\n\t\t\tuniforms.directionalLightDirection.needsUpdate = value;\r\n\t\r\n\t\t\tuniforms.pointLightColor.needsUpdate = value;\r\n\t\t\tuniforms.pointLightPosition.needsUpdate = value;\r\n\t\t\tuniforms.pointLightDistance.needsUpdate = value;\r\n\t\t\tuniforms.pointLightDecay.needsUpdate = value;\r\n\t\r\n\t\t\tuniforms.spotLightColor.needsUpdate = value;\r\n\t\t\tuniforms.spotLightPosition.needsUpdate = value;\r\n\t\t\tuniforms.spotLightDistance.needsUpdate = value;\r\n\t\t\tuniforms.spotLightDirection.needsUpdate = value;\r\n\t\t\tuniforms.spotLightAngleCos.needsUpdate = value;\r\n\t\t\tuniforms.spotLightExponent.needsUpdate = value;\r\n\t\t\tuniforms.spotLightDecay.needsUpdate = value;\r\n\t\r\n\t\t\tuniforms.hemisphereLightSkyColor.needsUpdate = value;\r\n\t\t\tuniforms.hemisphereLightGroundColor.needsUpdate = value;\r\n\t\t\tuniforms.hemisphereLightDirection.needsUpdate = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsShadow ( uniforms, lights ) {\r\n\t\r\n\t\t\tif ( uniforms.shadowMatrix ) {\r\n\t\r\n\t\t\t\tvar j = 0;\r\n\t\r\n\t\t\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar light = lights[ i ];\r\n\t\r\n\t\t\t\t\tif ( ! light.castShadow ) continue;\r\n\t\r\n\t\t\t\t\tif ( light instanceof THREE.SpotLight || ( light instanceof THREE.DirectionalLight ) ) {\r\n\t\r\n\t\t\t\t\t\tuniforms.shadowMap.value[ j ] = light.shadowMap;\r\n\t\t\t\t\t\tuniforms.shadowMapSize.value[ j ] = light.shadowMapSize;\r\n\t\r\n\t\t\t\t\t\tuniforms.shadowMatrix.value[ j ] = light.shadowMatrix;\r\n\t\r\n\t\t\t\t\t\tuniforms.shadowDarkness.value[ j ] = light.shadowDarkness;\r\n\t\t\t\t\t\tuniforms.shadowBias.value[ j ] = light.shadowBias;\r\n\t\r\n\t\t\t\t\t\tj ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Uniforms (load to GPU)\r\n\t\r\n\t\tfunction loadUniformsMatrices ( uniforms, object ) {\r\n\t\r\n\t\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object.modelViewMatrix.elements );\r\n\t\r\n\t\t\tif ( uniforms.normalMatrix ) {\r\n\t\r\n\t\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object.normalMatrix.elements );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction getTextureUnit() {\r\n\t\r\n\t\t\tvar textureUnit = _usedTextureUnits;\r\n\t\r\n\t\t\tif ( textureUnit >= capabilities.maxTextures ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_usedTextureUnits += 1;\r\n\t\r\n\t\t\treturn textureUnit;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction loadUniformsGeneric ( uniforms ) {\r\n\t\r\n\t\t\tvar texture, textureUnit;\r\n\t\r\n\t\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\tvar uniform = uniforms[ j ][ 0 ];\r\n\t\r\n\t\t\t\t// needsUpdate property is not added to all uniforms.\r\n\t\t\t\tif ( uniform.needsUpdate === false ) continue;\r\n\t\r\n\t\t\t\tvar type = uniform.type;\r\n\t\t\t\tvar value = uniform.value;\r\n\t\t\t\tvar location = uniforms[ j ][ 1 ];\r\n\t\r\n\t\t\t\tswitch ( type ) {\r\n\t\r\n\t\t\t\t\tcase '1i':\r\n\t\t\t\t\t\t_gl.uniform1i( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '1f':\r\n\t\t\t\t\t\t_gl.uniform1f( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '2f':\r\n\t\t\t\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '3f':\r\n\t\t\t\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '4f':\r\n\t\t\t\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '1iv':\r\n\t\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '3iv':\r\n\t\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '1fv':\r\n\t\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '2fv':\r\n\t\t\t\t\t\t_gl.uniform2fv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '3fv':\r\n\t\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '4fv':\r\n\t\t\t\t\t\t_gl.uniform4fv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Matrix3fv':\r\n\t\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Matrix4fv':\r\n\t\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t//\r\n\t\r\n\t\t\t\t\tcase 'i':\r\n\t\r\n\t\t\t\t\t\t// single integer\r\n\t\t\t\t\t\t_gl.uniform1i( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'f':\r\n\t\r\n\t\t\t\t\t\t// single float\r\n\t\t\t\t\t\t_gl.uniform1f( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v2':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Vector2\r\n\t\t\t\t\t\t_gl.uniform2f( location, value.x, value.y );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v3':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Vector3\r\n\t\t\t\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v4':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Vector4\r\n\t\t\t\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'c':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Color\r\n\t\t\t\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'iv1':\r\n\t\r\n\t\t\t\t\t\t// flat array of integers (JS or typed array)\r\n\t\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'iv':\r\n\t\r\n\t\t\t\t\t\t// flat array of integers with 3 x N size (JS or typed array)\r\n\t\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'fv1':\r\n\t\r\n\t\t\t\t\t\t// flat array of floats (JS or typed array)\r\n\t\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'fv':\r\n\t\r\n\t\t\t\t\t\t// flat array of floats with 3 x N size (JS or typed array)\r\n\t\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v2v':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Vector2\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, i2 = 0, il = value.length; i < il; i ++, i2 += 2 ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array[ i2 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\t\tuniform._array[ i2 + 1 ] = value[ i ].y;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniform2fv( location, uniform._array );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v3v':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Vector3\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, i3 = 0, il = value.length; i < il; i ++, i3 += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array[ i3 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\t\tuniform._array[ i3 + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\t\tuniform._array[ i3 + 2 ] = value[ i ].z;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniform3fv( location, uniform._array );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v4v':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Vector4\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, i4 = 0, il = value.length; i < il; i ++, i4 += 4 ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array[ i4 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\t\tuniform._array[ i4 + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\t\tuniform._array[ i4 + 2 ] = value[ i ].z;\r\n\t\t\t\t\t\t\tuniform._array[ i4 + 3 ] = value[ i ].w;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniform4fv( location, uniform._array );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'm3':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Matrix3\r\n\t\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'm3v':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Matrix3\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'm4':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Matrix4\r\n\t\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'm4v':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Matrix4\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 't':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Texture (2d or cube)\r\n\t\r\n\t\t\t\t\t\ttexture = value;\r\n\t\t\t\t\t\ttextureUnit = getTextureUnit();\r\n\t\r\n\t\t\t\t\t\t_gl.uniform1i( location, textureUnit );\r\n\t\r\n\t\t\t\t\t\tif ( ! texture ) continue;\r\n\t\r\n\t\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t\t\t\t ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// CompressedTexture can have Array in image :/\r\n\t\r\n\t\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\r\n\t\r\n\t\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\t\r\n\t\t\t\t\t\t\tsetCubeTextureDynamic( texture, textureUnit );\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'tv':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Texture (2d)\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = [];\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array[ i ] = getTextureUnit();\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniform1iv( location, uniform._array );\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\ttexture = uniform.value[ i ];\r\n\t\t\t\t\t\t\ttextureUnit = uniform._array[ i ];\r\n\t\r\n\t\t\t\t\t\t\tif ( ! texture ) continue;\r\n\t\r\n\t\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tdefault:\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setColorLinear( array, offset, color, intensity ) {\r\n\t\r\n\t\t\tarray[ offset + 0 ] = color.r * intensity;\r\n\t\t\tarray[ offset + 1 ] = color.g * intensity;\r\n\t\t\tarray[ offset + 2 ] = color.b * intensity;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setupLights ( lights, camera ) {\r\n\t\r\n\t\t\tvar l, ll, light,\r\n\t\t\tr = 0, g = 0, b = 0,\r\n\t\t\tcolor, skyColor, groundColor,\r\n\t\t\tintensity,\r\n\t\t\tdistance,\r\n\t\r\n\t\t\tzlights = _lights,\r\n\t\r\n\t\t\tviewMatrix = camera.matrixWorldInverse,\r\n\t\r\n\t\t\tdirColors = zlights.directional.colors,\r\n\t\t\tdirPositions = zlights.directional.positions,\r\n\t\r\n\t\t\tpointColors = zlights.point.colors,\r\n\t\t\tpointPositions = zlights.point.positions,\r\n\t\t\tpointDistances = zlights.point.distances,\r\n\t\t\tpointDecays = zlights.point.decays,\r\n\t\r\n\t\t\tspotColors = zlights.spot.colors,\r\n\t\t\tspotPositions = zlights.spot.positions,\r\n\t\t\tspotDistances = zlights.spot.distances,\r\n\t\t\tspotDirections = zlights.spot.directions,\r\n\t\t\tspotAnglesCos = zlights.spot.anglesCos,\r\n\t\t\tspotExponents = zlights.spot.exponents,\r\n\t\t\tspotDecays = zlights.spot.decays,\r\n\t\r\n\t\t\themiSkyColors = zlights.hemi.skyColors,\r\n\t\t\themiGroundColors = zlights.hemi.groundColors,\r\n\t\t\themiPositions = zlights.hemi.positions,\r\n\t\r\n\t\t\tdirLength = 0,\r\n\t\t\tpointLength = 0,\r\n\t\t\tspotLength = 0,\r\n\t\t\themiLength = 0,\r\n\t\r\n\t\t\tdirCount = 0,\r\n\t\t\tpointCount = 0,\r\n\t\t\tspotCount = 0,\r\n\t\t\themiCount = 0,\r\n\t\r\n\t\t\tdirOffset = 0,\r\n\t\t\tpointOffset = 0,\r\n\t\t\tspotOffset = 0,\r\n\t\t\themiOffset = 0;\r\n\t\r\n\t\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\t\r\n\t\t\t\tlight = lights[ l ];\r\n\t\r\n\t\t\t\tif ( light.onlyShadow ) continue;\r\n\t\r\n\t\t\t\tcolor = light.color;\r\n\t\t\t\tintensity = light.intensity;\r\n\t\t\t\tdistance = light.distance;\r\n\t\r\n\t\t\t\tif ( light instanceof THREE.AmbientLight ) {\r\n\t\r\n\t\t\t\t\tif ( ! light.visible ) continue;\r\n\t\r\n\t\t\t\t\tr += color.r;\r\n\t\t\t\t\tg += color.g;\r\n\t\t\t\t\tb += color.b;\r\n\t\r\n\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\t\r\n\t\t\t\t\tdirCount += 1;\r\n\t\r\n\t\t\t\t\tif ( ! light.visible ) continue;\r\n\t\r\n\t\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\t\r\n\t\t\t\t\tdirOffset = dirLength * 3;\r\n\t\r\n\t\t\t\t\tdirPositions[ dirOffset + 0 ] = _direction.x;\r\n\t\t\t\t\tdirPositions[ dirOffset + 1 ] = _direction.y;\r\n\t\t\t\t\tdirPositions[ dirOffset + 2 ] = _direction.z;\r\n\t\r\n\t\t\t\t\tsetColorLinear( dirColors, dirOffset, color, intensity );\r\n\t\r\n\t\t\t\t\tdirLength += 1;\r\n\t\r\n\t\t\t\t} else if ( light instanceof THREE.PointLight ) {\r\n\t\r\n\t\t\t\t\tpointCount += 1;\r\n\t\r\n\t\t\t\t\tif ( ! light.visible ) continue;\r\n\t\r\n\t\t\t\t\tpointOffset = pointLength * 3;\r\n\t\r\n\t\t\t\t\tsetColorLinear( pointColors, pointOffset, color, intensity );\r\n\t\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t\t_vector3.applyMatrix4( viewMatrix );\r\n\t\r\n\t\t\t\t\tpointPositions[ pointOffset + 0 ] = _vector3.x;\r\n\t\t\t\t\tpointPositions[ pointOffset + 1 ] = _vector3.y;\r\n\t\t\t\t\tpointPositions[ pointOffset + 2 ] = _vector3.z;\r\n\t\r\n\t\t\t\t\t// distance is 0 if decay is 0, because there is no attenuation at all.\r\n\t\t\t\t\tpointDistances[ pointLength ] = distance;\r\n\t\t\t\t\tpointDecays[ pointLength ] = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\t\r\n\t\t\t\t\tpointLength += 1;\r\n\t\r\n\t\t\t\t} else if ( light instanceof THREE.SpotLight ) {\r\n\t\r\n\t\t\t\t\tspotCount += 1;\r\n\t\r\n\t\t\t\t\tif ( ! light.visible ) continue;\r\n\t\r\n\t\t\t\t\tspotOffset = spotLength * 3;\r\n\t\r\n\t\t\t\t\tsetColorLinear( spotColors, spotOffset, color, intensity );\r\n\t\r\n\t\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t\t_vector3.copy( _direction ).applyMatrix4( viewMatrix );\r\n\t\r\n\t\t\t\t\tspotPositions[ spotOffset + 0 ] = _vector3.x;\r\n\t\t\t\t\tspotPositions[ spotOffset + 1 ] = _vector3.y;\r\n\t\t\t\t\tspotPositions[ spotOffset + 2 ] = _vector3.z;\r\n\t\r\n\t\t\t\t\tspotDistances[ spotLength ] = distance;\r\n\t\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\t\r\n\t\t\t\t\tspotDirections[ spotOffset + 0 ] = _direction.x;\r\n\t\t\t\t\tspotDirections[ spotOffset + 1 ] = _direction.y;\r\n\t\t\t\t\tspotDirections[ spotOffset + 2 ] = _direction.z;\r\n\t\r\n\t\t\t\t\tspotAnglesCos[ spotLength ] = Math.cos( light.angle );\r\n\t\t\t\t\tspotExponents[ spotLength ] = light.exponent;\r\n\t\t\t\t\tspotDecays[ spotLength ] = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\t\r\n\t\t\t\t\tspotLength += 1;\r\n\t\r\n\t\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\r\n\t\r\n\t\t\t\t\themiCount += 1;\r\n\t\r\n\t\t\t\t\tif ( ! light.visible ) continue;\r\n\t\r\n\t\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\t\r\n\t\t\t\t\themiOffset = hemiLength * 3;\r\n\t\r\n\t\t\t\t\themiPositions[ hemiOffset + 0 ] = _direction.x;\r\n\t\t\t\t\themiPositions[ hemiOffset + 1 ] = _direction.y;\r\n\t\t\t\t\themiPositions[ hemiOffset + 2 ] = _direction.z;\r\n\t\r\n\t\t\t\t\tskyColor = light.color;\r\n\t\t\t\t\tgroundColor = light.groundColor;\r\n\t\r\n\t\t\t\t\tsetColorLinear( hemiSkyColors, hemiOffset, skyColor, intensity );\r\n\t\t\t\t\tsetColorLinear( hemiGroundColors, hemiOffset, groundColor, intensity );\r\n\t\r\n\t\t\t\t\themiLength += 1;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// null eventual remains from removed lights\r\n\t\t\t// (this is to avoid if in shader)\r\n\t\r\n\t\t\tfor ( l = dirLength * 3, ll = Math.max( dirColors.length, dirCount * 3 ); l < ll; l ++ ) dirColors[ l ] = 0.0;\r\n\t\t\tfor ( l = pointLength * 3, ll = Math.max( pointColors.length, pointCount * 3 ); l < ll; l ++ ) pointColors[ l ] = 0.0;\r\n\t\t\tfor ( l = spotLength * 3, ll = Math.max( spotColors.length, spotCount * 3 ); l < ll; l ++ ) spotColors[ l ] = 0.0;\r\n\t\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiSkyColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiSkyColors[ l ] = 0.0;\r\n\t\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiGroundColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiGroundColors[ l ] = 0.0;\r\n\t\r\n\t\t\tzlights.directional.length = dirLength;\r\n\t\t\tzlights.point.length = pointLength;\r\n\t\t\tzlights.spot.length = spotLength;\r\n\t\t\tzlights.hemi.length = hemiLength;\r\n\t\r\n\t\t\tzlights.ambient[ 0 ] = r;\r\n\t\t\tzlights.ambient[ 1 ] = g;\r\n\t\t\tzlights.ambient[ 2 ] = b;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// GL state setting\r\n\t\r\n\t\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\r\n\t\r\n\t\t\tif ( cullFace === THREE.CullFaceNone ) {\r\n\t\r\n\t\t\t\tstate.disable( _gl.CULL_FACE );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\r\n\t\r\n\t\t\t\t\t_gl.frontFace( _gl.CW );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t_gl.frontFace( _gl.CCW );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( cullFace === THREE.CullFaceBack ) {\r\n\t\r\n\t\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\t\r\n\t\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\r\n\t\r\n\t\t\t\t\t_gl.cullFace( _gl.FRONT );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tstate.enable( _gl.CULL_FACE );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Textures\r\n\t\r\n\t\tfunction setTextureParameters ( textureType, texture, isImagePowerOfTwo ) {\r\n\t\r\n\t\t\tvar extension;\r\n\t\r\n\t\t\tif ( isImagePowerOfTwo ) {\r\n\t\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\r\n\t\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\t\r\n\t\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( ' + texture.sourceFile + ' )' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\t\r\n\t\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( ' + texture.sourceFile + ' )' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\t\r\n\t\t\tif ( extension ) {\r\n\t\r\n\t\t\t\tif ( texture.type === THREE.FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\t\tif ( texture.type === THREE.HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\r\n\t\r\n\t\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\t\r\n\t\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\r\n\t\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\t\r\n\t\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\t\r\n\t\t\t\ttextureProperties.__webglInit = true;\r\n\t\r\n\t\t\t\ttexture.__webglInit = true;\r\n\t\r\n\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\t\r\n\t\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\t\r\n\t\t\t\t_infoMemory.textures ++;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\t\r\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\t\r\n\t\t\ttexture.image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\r\n\t\r\n\t\t\tvar image = texture.image,\r\n\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\tglType = paramThreeToGL( texture.type );\r\n\t\r\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isImagePowerOfTwo );\r\n\t\r\n\t\t\tvar mipmap, mipmaps = texture.mipmaps;\r\n\t\r\n\t\t\tif ( texture instanceof THREE.DataTexture ) {\r\n\t\r\n\t\t\t\t// use manually created mipmaps if available\r\n\t\t\t\t// if there are no manual mipmaps\r\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\t\r\n\t\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttexture.generateMipmaps = false;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\r\n\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\t\r\n\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\t\r\n\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// regular Texture (image, video, canvas)\r\n\t\r\n\t\t\t\t// use manually created mipmaps if available\r\n\t\t\t\t// if there are no manual mipmaps\r\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\t\r\n\t\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttexture.generateMipmaps = false;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, texture.image );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\r\n\t\t\ttextureProperties.__version = texture.version;\r\n\t\r\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setTexture = function ( texture, slot ) {\r\n\t\r\n\t\t\tvar textureProperties = properties.get( texture );\r\n\t\r\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\t\r\n\t\t\t\tvar image = texture.image;\r\n\t\r\n\t\t\t\tif ( image === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( image.complete === false ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction clampToMaxSize ( image, maxSize ) {\r\n\t\r\n\t\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\t\r\n\t\t\t\t// Warning: Scaling through the canvas will only work with images that use\r\n\t\t\t\t// premultiplied alpha.\r\n\t\r\n\t\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\r\n\t\r\n\t\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\t\tcanvas.width = Math.floor( image.width * scale );\r\n\t\t\t\tcanvas.height = Math.floor( image.height * scale );\r\n\t\r\n\t\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\t\r\n\t\t\t\treturn canvas;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn image;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setCubeTexture ( texture, slot ) {\r\n\t\r\n\t\t\tvar textureProperties = properties.get( texture );\r\n\t\r\n\t\t\tif ( texture.image.length === 6 ) {\r\n\t\r\n\t\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\t\r\n\t\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\r\n\t\r\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\t\r\n\t\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\r\n\t\r\n\t\t\t\t\t\t_infoMemory.textures ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\t\r\n\t\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\r\n\t\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\r\n\t\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\r\n\t\r\n\t\t\t\t\tvar cubeImage = [];\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\r\n\t\r\n\t\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar image = cubeImage[ 0 ],\r\n\t\t\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\t\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\t\t\tglType = paramThreeToGL( texture.type );\r\n\t\r\n\t\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isImagePowerOfTwo );\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tif ( ! isCompressed ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( isDataTexture ) {\r\n\t\r\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\t\r\n\t\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\r\n\t\r\n\t\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\t\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()\" );\r\n\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) {\r\n\t\r\n\t\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttextureProperties.__version = texture.version;\r\n\t\r\n\t\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setCubeTextureDynamic ( texture, slot ) {\r\n\t\r\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Render targets\r\n\t\r\n\t\tfunction setupFrameBuffer ( framebuffer, renderTarget, textureTarget ) {\r\n\t\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureTarget, properties.get( renderTarget ).__webglTexture, 0 );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setupRenderBuffer ( renderbuffer, renderTarget ) {\r\n\t\r\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\t\r\n\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\t\r\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\t\r\n\t\t\t/* For some reason this is not working. Defaulting to RGBA4.\r\n\t\t\t} else if ( ! renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\t\r\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.STENCIL_INDEX8, renderTarget.width, renderTarget.height );\r\n\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\t\t\t*/\r\n\t\r\n\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\t\r\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setRenderTarget = function ( renderTarget ) {\r\n\t\r\n\t\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\r\n\t\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\t\r\n\t\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\r\n\t\t\t\tif ( renderTarget.depthBuffer === undefined ) renderTarget.depthBuffer = true;\r\n\t\t\t\tif ( renderTarget.stencilBuffer === undefined ) renderTarget.stencilBuffer = true;\r\n\t\r\n\t\t\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\t\r\n\t\t\t\trenderTargetProperties.__webglTexture = _gl.createTexture();\r\n\t\r\n\t\t\t\t_infoMemory.textures ++;\r\n\t\r\n\t\t\t\t// Setup texture, create render and frame buffers\r\n\t\r\n\t\t\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height ),\r\n\t\t\t\t\tglFormat = paramThreeToGL( renderTarget.format ),\r\n\t\t\t\t\tglType = paramThreeToGL( renderTarget.type );\r\n\t\r\n\t\t\t\tif ( isCube ) {\r\n\t\r\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\t\t\t\t\trenderTargetProperties.__webglRenderbuffer = [];\r\n\t\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTargetProperties.__webglTexture );\r\n\t\r\n\t\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget, isTargetPowerOfTwo );\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\t\t\t\t\t\trenderTargetProperties.__webglRenderbuffer[ i ] = _gl.createRenderbuffer();\r\n\t\r\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\r\n\t\t\t\t\t\tsetupFrameBuffer( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\t\t\t\t\t\tsetupRenderBuffer( renderTargetProperties.__webglRenderbuffer[ i ], renderTarget );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( renderTarget.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\t\r\n\t\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\t\r\n\t\t\t\t\t\trenderTargetProperties.__webglRenderbuffer = renderTarget.shareDepthFrom.__webglRenderbuffer;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\trenderTargetProperties.__webglRenderbuffer = _gl.createRenderbuffer();\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, renderTargetProperties.__webglTexture );\r\n\t\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget, isTargetPowerOfTwo );\r\n\t\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\r\n\t\t\t\t\tsetupFrameBuffer( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.TEXTURE_2D );\r\n\t\r\n\t\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\t\r\n\t\t\t\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\t\r\n\t\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderTargetProperties.__webglRenderbuffer );\r\n\t\r\n\t\t\t\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\t\r\n\t\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderTargetProperties.__webglRenderbuffer );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tsetupRenderBuffer( renderTargetProperties.__webglRenderbuffer, renderTarget );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( renderTarget.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Release everything\r\n\t\r\n\t\t\t\tif ( isCube ) {\r\n\t\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar framebuffer, width, height, vx, vy;\r\n\t\r\n\t\t\tif ( renderTarget ) {\r\n\t\r\n\t\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\r\n\t\t\t\tif ( isCube ) {\r\n\t\r\n\t\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\twidth = renderTarget.width;\r\n\t\t\t\theight = renderTarget.height;\r\n\t\r\n\t\t\t\tvx = 0;\r\n\t\t\t\tvy = 0;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tframebuffer = null;\r\n\t\r\n\t\t\t\twidth = _viewportWidth;\r\n\t\t\t\theight = _viewportHeight;\r\n\t\r\n\t\t\t\tvx = _viewportX;\r\n\t\t\t\tvy = _viewportY;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\t\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t\t_gl.viewport( vx, vy, width, height );\r\n\t\r\n\t\t\t\t_currentFramebuffer = framebuffer;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_currentWidth = width;\r\n\t\t\t_currentHeight = height;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.readRenderTargetPixels = function( renderTarget, x, y, width, height, buffer ) {\r\n\t\r\n\t\t\tif ( ! ( renderTarget instanceof THREE.WebGLRenderTarget ) ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( properties.get( renderTarget ).__webglFramebuffer ) {\r\n\t\r\n\t\t\t\tif ( renderTarget.format !== THREE.RGBAFormat ) {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.' );\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar restore = false;\r\n\t\r\n\t\t\t\tif ( properties.get( renderTarget ).__webglFramebuffer !== _currentFramebuffer ) {\r\n\t\r\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, properties.get( renderTarget ).__webglFramebuffer );\r\n\t\r\n\t\t\t\t\trestore = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\r\n\t\r\n\t\t\t\t\t_gl.readPixels( x, y, width, height, _gl.RGBA, _gl.UNSIGNED_BYTE, buffer );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( restore ) {\r\n\t\r\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction updateRenderTargetMipmap ( renderTarget ) {\r\n\t\r\n\t\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\t\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( renderTarget ).__webglTexture );\r\n\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, properties.get( renderTarget ).__webglTexture );\r\n\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Fallback filters for non-power-of-2 textures\r\n\t\r\n\t\tfunction filterFallback ( f ) {\r\n\t\r\n\t\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\r\n\t\r\n\t\t\t\treturn _gl.NEAREST;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn _gl.LINEAR;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Map three.js constants to WebGL constants\r\n\t\r\n\t\tfunction paramThreeToGL ( p ) {\r\n\t\r\n\t\t\tvar extension;\r\n\t\r\n\t\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\r\n\t\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\r\n\t\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\r\n\t\r\n\t\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\r\n\t\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\r\n\t\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\r\n\t\r\n\t\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\r\n\t\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\r\n\t\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\r\n\t\r\n\t\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\r\n\t\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\r\n\t\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\r\n\t\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\r\n\t\r\n\t\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\r\n\t\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\r\n\t\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\r\n\t\t\tif ( p === THREE.IntType ) return _gl.INT;\r\n\t\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\r\n\t\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\r\n\t\r\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\t\r\n\t\t\tif ( extension !== null ) {\r\n\t\r\n\t\t\t\tif ( p === THREE.HalfFloatType ) return extension.HALF_FLOAT_OES;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\r\n\t\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\r\n\t\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\r\n\t\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\r\n\t\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\r\n\t\r\n\t\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\r\n\t\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\r\n\t\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\r\n\t\r\n\t\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\r\n\t\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\r\n\t\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\r\n\t\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\r\n\t\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\r\n\t\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\r\n\t\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\r\n\t\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\r\n\t\r\n\t\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\r\n\t\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\r\n\t\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\r\n\t\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\t\r\n\t\t\tif ( extension !== null ) {\r\n\t\r\n\t\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\t\r\n\t\t\tif ( extension !== null ) {\r\n\t\r\n\t\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\textension = extensions.get( 'EXT_blend_minmax' );\r\n\t\r\n\t\t\tif ( extension !== null ) {\r\n\t\r\n\t\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\r\n\t\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn 0;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// DEPRECATED\r\n\t\r\n\t\tthis.supportsFloatTextures = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\t\treturn extensions.get( 'OES_texture_float' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsHalfFloatTextures = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\t\treturn extensions.get( 'OES_texture_half_float' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsStandardDerivatives = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\t\treturn extensions.get( 'OES_standard_derivatives' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsCompressedTextureS3TC = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\t\treturn extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsCompressedTexturePVRTC = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\t\treturn extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsBlendMinMax = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\t\treturn extensions.get( 'EXT_blend_minmax' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsVertexTextures = function () {\r\n\t\r\n\t\t\treturn capabilities.vertexTextures;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsInstancedArrays = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\t\treturn extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\t//\r\n\t\r\n\t\tthis.initMaterial = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.addPrePlugin = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.addPostPlugin = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.updateShadowMap = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tObject.defineProperties( this, {\r\n\t\t\tshadowMapEnabled: {\r\n\t\t\t\tget: function () {\r\n\t\r\n\t\t\t\t\treturn shadowMap.enabled;\r\n\t\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( value ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\t\t\tshadowMap.enabled = value;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshadowMapType: {\r\n\t\t\t\tget: function () {\r\n\t\r\n\t\t\t\t\treturn shadowMap.type;\r\n\t\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( value ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\t\t\tshadowMap.type = value;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshadowMapCullFace: {\r\n\t\t\t\tget: function () {\r\n\t\r\n\t\t\t\t\treturn shadowMap.cullFace;\r\n\t\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( value ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\r\n\t\t\t\t\tshadowMap.cullFace = value;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshadowMapDebug: {\r\n\t\t\t\tget: function () {\r\n\t\r\n\t\t\t\t\treturn shadowMap.debug;\r\n\t\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( value ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug.' );\r\n\t\t\t\t\tshadowMap.debug = value;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/WebGLRenderTarget.js\r\n\t\r\n\t/**\r\n\t * @author szimek / https://github.com/szimek/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.WebGLRenderTarget = function ( width, height, options ) {\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\r\n\t\toptions = options || {};\r\n\t\r\n\t\tthis.wrapS = options.wrapS !== undefined ? options.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\tthis.wrapT = options.wrapT !== undefined ? options.wrapT : THREE.ClampToEdgeWrapping;\r\n\t\r\n\t\tthis.magFilter = options.magFilter !== undefined ? options.magFilter : THREE.LinearFilter;\r\n\t\tthis.minFilter = options.minFilter !== undefined ? options.minFilter : THREE.LinearMipMapLinearFilter;\r\n\t\r\n\t\tthis.anisotropy = options.anisotropy !== undefined ? options.anisotropy : 1;\r\n\t\r\n\t\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\t\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\t\r\n\t\tthis.format = options.format !== undefined ? options.format : THREE.RGBAFormat;\r\n\t\tthis.type = options.type !== undefined ? options.type : THREE.UnsignedByteType;\r\n\t\r\n\t\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\t\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\t\r\n\t\tthis.generateMipmaps = true;\r\n\t\r\n\t\tthis.shareDepthFrom = options.shareDepthFrom !== undefined ? options.shareDepthFrom : null;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.WebGLRenderTarget.prototype = {\r\n\t\r\n\t\tconstructor: THREE.WebGLRenderTarget,\r\n\t\r\n\t\tsetSize: function ( width, height ) {\r\n\t\r\n\t\t\tif ( this.width !== width || this.height !== height ) {\r\n\t\r\n\t\t\t\tthis.width = width;\r\n\t\t\t\tthis.height = height;\r\n\t\r\n\t\t\t\tthis.dispose();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.width = source.width;\r\n\t\t\tthis.height = source.height;\r\n\t\r\n\t\t\tthis.wrapS = source.wrapS;\r\n\t\t\tthis.wrapT = source.wrapT;\r\n\t\r\n\t\t\tthis.magFilter = source.magFilter;\r\n\t\t\tthis.minFilter = source.minFilter;\r\n\t\r\n\t\t\tthis.anisotropy = source.anisotropy;\r\n\t\r\n\t\t\tthis.offset.copy( source.offset );\r\n\t\t\tthis.repeat.copy( source.repeat );\r\n\t\r\n\t\t\tthis.format = source.format;\r\n\t\t\tthis.type = source.type;\r\n\t\r\n\t\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\t\r\n\t\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\r\n\t\t\tthis.shareDepthFrom = source.shareDepthFrom;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\r\n\t\r\n\t// File:src/renderers/WebGLRenderTargetCube.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com\r\n\t */\r\n\t\r\n\tTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\r\n\t\r\n\t\tTHREE.WebGLRenderTarget.call( this, width, height, options );\r\n\t\r\n\t\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\r\n\tTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\r\n\t\r\n\t// File:src/renderers/webgl/WebGLBufferRenderer.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\t\r\n\t\tvar mode;\r\n\t\r\n\t\tfunction setMode( value ) {\r\n\t\r\n\t\t\tmode = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction render( start, count ) {\r\n\t\r\n\t\t\t_gl.drawArrays( mode, start, count );\r\n\t\r\n\t\t\t_infoRender.calls ++;\r\n\t\t\t_infoRender.vertices += count;\r\n\t\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction renderInstances( geometry ) {\r\n\t\r\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\r\n\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar position = geometry.attributes.position;\r\n\t\r\n\t\t\tif ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\textension.drawArraysInstancedANGLE( mode, 0, position.data.count, geometry.maxInstancedCount );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\textension.drawArraysInstancedANGLE( mode, 0, position.count, geometry.maxInstancedCount );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setMode = setMode;\r\n\t\tthis.render = render;\r\n\t\tthis.renderInstances = renderInstances;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLIndexedBufferRenderer.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLIndexedBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\t\r\n\t\tvar mode;\r\n\t\r\n\t\tfunction setMode( value ) {\r\n\t\r\n\t\t\tmode = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar type, size;\r\n\t\r\n\t\tfunction setIndex( index ) {\r\n\t\r\n\t\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\t\r\n\t\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\t\tsize = 4;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\t\tsize = 2;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction render( start, count ) {\r\n\t\r\n\t\t\t_gl.drawElements( mode, count, type, start * size );\r\n\t\r\n\t\t\t_infoRender.calls ++;\r\n\t\t\t_infoRender.vertices += count;\r\n\t\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction renderInstances( geometry ) {\r\n\t\r\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\r\n\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar index = geometry.index;\r\n\t\r\n\t\t\textension.drawElementsInstancedANGLE( mode, index.array.length, type, 0, geometry.maxInstancedCount );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setMode = setMode;\r\n\t\tthis.setIndex = setIndex;\r\n\t\tthis.render = render;\r\n\t\tthis.renderInstances = renderInstances;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLExtensions.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLExtensions = function ( gl ) {\r\n\t\r\n\t\tvar extensions = {};\r\n\t\r\n\t\tthis.get = function ( name ) {\r\n\t\r\n\t\t\tif ( extensions[ name ] !== undefined ) {\r\n\t\r\n\t\t\t\treturn extensions[ name ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar extension;\r\n\t\r\n\t\t\tswitch ( name ) {\r\n\t\r\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\textension = gl.getExtension( name );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\textensions[ name ] = extension;\r\n\t\r\n\t\t\treturn extension;\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLCapabilities.js\r\n\t\r\n\tTHREE.WebGLCapabilities = function ( gl, extensions, parameters ) {\r\n\t\r\n\t\tfunction getMaxPrecision( precision ) {\r\n\t\r\n\t\t\tif ( precision === 'highp' ) {\r\n\t\r\n\t\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\r\n\t\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\r\n\t\r\n\t\t\t\t\treturn 'highp';\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tprecision = 'mediump';\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( precision === 'mediump' ) {\r\n\t\r\n\t\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\r\n\t\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\r\n\t\r\n\t\t\t\t\treturn 'mediump';\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn 'lowp';\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.getMaxPrecision = getMaxPrecision;\r\n\t\r\n\t\tthis.precision = parameters.precision !== undefined ? parameters.precision : 'highp',\r\n\t\tthis.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false;\r\n\t\r\n\t\tthis.maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\t\tthis.maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n\t\tthis.maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\r\n\t\tthis.maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\t\r\n\t\tthis.maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n\t\tthis.maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n\t\tthis.maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\r\n\t\tthis.maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\r\n\t\r\n\t\tthis.vertexTextures = this.maxVertexTextures > 0;\r\n\t\tthis.floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\r\n\t\tthis.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\r\n\t\r\n\t\tvar _maxPrecision = getMaxPrecision( this.precision );\r\n\t\r\n\t\tif ( _maxPrecision !== this.precision ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer:', this.precision, 'not supported, using', _maxPrecision, 'instead.' );\r\n\t\t\tthis.precision = _maxPrecision;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tif ( this.logarithmicDepthBuffer ) {\r\n\t\r\n\t\t\tthis.logarithmicDepthBuffer = !! extensions.get( 'EXT_frag_depth' );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLGeometries.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLGeometries = function ( gl, properties, info ) {\r\n\t\r\n\t\tvar geometries = {};\r\n\t\r\n\t\tfunction get( object ) {\r\n\t\r\n\t\t\tvar geometry = object.geometry;\r\n\t\r\n\t\t\tif ( geometries[ geometry.id ] !== undefined ) {\r\n\t\r\n\t\t\t\treturn geometries[ geometry.id ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\t\r\n\t\t\tvar buffergeometry;\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\t\tbuffergeometry = geometry;\r\n\t\r\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\t\r\n\t\t\t\t\tgeometry._bufferGeometry = new THREE.BufferGeometry().setFromObject( object );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgeometries[ geometry.id ] = buffergeometry;\r\n\t\r\n\t\t\tinfo.memory.geometries ++;\r\n\t\r\n\t\t\treturn buffergeometry;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction onGeometryDispose( event ) {\r\n\t\r\n\t\t\tvar geometry = event.target;\r\n\t\t\tvar buffergeometry = geometries[ geometry.id ];\r\n\t\r\n\t\t\tdeleteAttributes( buffergeometry.attributes );\r\n\t\r\n\t\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\t\r\n\t\t\tdelete geometries[ geometry.id ];\r\n\t\r\n\t\t\tvar property = properties.get( geometry );\r\n\t\t\tif ( property.wireframe ) deleteAttribute( property.wireframe );\r\n\t\r\n\t\t\tinfo.memory.geometries --;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction getAttributeBuffer( attribute ) {\r\n\t\r\n\t\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn properties.get( attribute ).__webglBuffer;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction deleteAttribute( attribute ) {\r\n\t\r\n\t\t\tvar buffer = getAttributeBuffer( attribute );\r\n\t\r\n\t\t\tif ( buffer !== undefined ) {\r\n\t\r\n\t\t\t\tgl.deleteBuffer( buffer );\r\n\t\t\t\tremoveAttributeBuffer( attribute );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction deleteAttributes( attributes ) {\r\n\t\r\n\t\t\tfor ( var name in attributes ) {\r\n\t\r\n\t\t\t\tdeleteAttribute( attributes[ name ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction removeAttributeBuffer( attribute ) {\r\n\t\r\n\t\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\tproperties.delete( attribute.data );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tproperties.delete( attribute );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.get = get;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLObjects.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLObjects = function ( gl, properties, info ) {\r\n\t\r\n\t\tvar geometries = new THREE.WebGLGeometries( gl, properties, info );\r\n\t\r\n\t\t//\r\n\t\r\n\t\tfunction update( object ) {\r\n\t\r\n\t\t\t// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\r\n\t\r\n\t\t\tvar geometry = geometries.get( object );\r\n\t\r\n\t\t\tif ( object.geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\tgeometry.updateFromObject( object );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\r\n\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\tupdateAttribute( index, gl.ELEMENT_ARRAY_BUFFER );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var name in attributes ) {\r\n\t\r\n\t\t\t\tupdateAttribute( attributes[ name ], gl.ARRAY_BUFFER );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// morph targets\r\n\t\r\n\t\t\tvar morphAttributes = geometry.morphAttributes;\r\n\t\r\n\t\t\tfor ( var name in morphAttributes ) {\r\n\t\r\n\t\t\t\tvar array = morphAttributes[ name ];\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tupdateAttribute( array[ i ], gl.ARRAY_BUFFER );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn geometry;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction updateAttribute( attribute, bufferType ) {\r\n\t\r\n\t\t\tvar data = ( attribute instanceof THREE.InterleavedBufferAttribute ) ? attribute.data : attribute;\r\n\t\r\n\t\t\tvar attributeProperties = properties.get( data );\r\n\t\r\n\t\t\tif ( attributeProperties.__webglBuffer === undefined ) {\r\n\t\r\n\t\t\t\tcreateBuffer( attributeProperties, data, bufferType );\r\n\t\r\n\t\t\t} else if ( attributeProperties.version !== data.version ) {\r\n\t\r\n\t\t\t\tupdateBuffer( attributeProperties, data, bufferType );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction createBuffer( attributeProperties, data, bufferType ) {\r\n\t\r\n\t\t\tattributeProperties.__webglBuffer = gl.createBuffer();\r\n\t\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\t\r\n\t\t\tvar usage = data.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\t\r\n\t\t\tgl.bufferData( bufferType, data.array, usage );\r\n\t\r\n\t\t\tattributeProperties.version = data.version;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction updateBuffer( attributeProperties, data, bufferType ) {\r\n\t\r\n\t\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\t\r\n\t\t\tif ( data.dynamic === false || data.updateRange.count === - 1 ) {\r\n\t\r\n\t\t\t\t// Not using update ranges\r\n\t\r\n\t\t\t\tgl.bufferSubData( bufferType, 0, data.array );\r\n\t\r\n\t\t\t} else if ( data.updateRange.count === 0 ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tgl.bufferSubData( bufferType, data.updateRange.offset * data.array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\t\t\t\t  data.array.subarray( data.updateRange.offset, data.updateRange.offset + data.updateRange.count ) );\r\n\t\r\n\t\t\t\tdata.updateRange.count = 0; // reset range\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tattributeProperties.version = data.version;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction getAttributeBuffer( attribute ) {\r\n\t\r\n\t\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn properties.get( attribute ).__webglBuffer;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction getWireframeAttribute( geometry ) {\r\n\t\r\n\t\t\tvar property = properties.get( geometry );\r\n\t\r\n\t\t\tif ( property.wireframe !== undefined ) {\r\n\t\r\n\t\t\t\treturn property.wireframe;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar indices = [];\r\n\t\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar position = attributes.position;\r\n\t\r\n\t\t\t// console.time( 'wireframe' );\r\n\t\r\n\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\tvar edges = {};\r\n\t\t\t\tvar array = index.array;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\t\r\n\t\t\t\t\tvar a = array[ i + 0 ];\r\n\t\t\t\t\tvar b = array[ i + 1 ];\r\n\t\t\t\t\tvar c = array[ i + 2 ];\r\n\t\r\n\t\t\t\t\tif ( checkEdge( edges, a, b ) ) indices.push( a, b );\r\n\t\t\t\t\tif ( checkEdge( edges, b, c ) ) indices.push( b, c );\r\n\t\t\t\t\tif ( checkEdge( edges, c, a ) ) indices.push( c, a );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tvar array = attributes.position.array;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\t\r\n\t\t\t\t\tvar a = i + 0;\r\n\t\t\t\t\tvar b = i + 1;\r\n\t\t\t\t\tvar c = i + 2;\r\n\t\r\n\t\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// console.timeEnd( 'wireframe' );\r\n\t\r\n\t\t\tvar TypeArray = position.count > 65535 ? Uint32Array : Uint16Array;\r\n\t\t\tvar attribute = new THREE.BufferAttribute( new TypeArray( indices ), 1 );\r\n\t\r\n\t\t\tupdateAttribute( attribute, gl.ELEMENT_ARRAY_BUFFER );\r\n\t\r\n\t\t\tproperty.wireframe = attribute;\r\n\t\r\n\t\t\treturn attribute;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction checkEdge( edges, a, b ) {\r\n\t\r\n\t\t\tif ( a > b ) {\r\n\t\r\n\t\t\t\tvar tmp = a;\r\n\t\t\t\ta = b;\r\n\t\t\t\tb = tmp;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar list = edges[ a ];\r\n\t\r\n\t\t\tif ( list === undefined ) {\r\n\t\r\n\t\t\t\tedges[ a ] = [ b ];\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t} else if ( list.indexOf( b ) === -1 ) {\r\n\t\r\n\t\t\t\tlist.push( b );\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn false;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.getAttributeBuffer = getAttributeBuffer;\r\n\t\tthis.getWireframeAttribute = getWireframeAttribute;\r\n\t\r\n\t\tthis.update = update;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLProgram.js\r\n\t\r\n\tTHREE.WebGLProgram = ( function () {\r\n\t\r\n\t\tvar programIdCount = 0;\r\n\t\r\n\t\tfunction generateDefines( defines ) {\r\n\t\r\n\t\t\tvar chunks = [];\r\n\t\r\n\t\t\tfor ( var name in defines ) {\r\n\t\r\n\t\t\t\tvar value = defines[ name ];\r\n\t\r\n\t\t\t\tif ( value === false ) continue;\r\n\t\r\n\t\t\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn chunks.join( '\\n' );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction fetchUniformLocations( gl, program, identifiers ) {\r\n\t\r\n\t\t\tvar uniforms = {};\r\n\t\r\n\t\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\r\n\t\r\n\t\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\t\r\n\t\t\t\tvar info = gl.getActiveUniform( program, i );\r\n\t\t\t\tvar name = info.name;\r\n\t\t\t\tvar location = gl.getUniformLocation( program, name );\r\n\t\r\n\t\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE UNIFORM:\", name);\r\n\t\r\n\t\t\t\tvar suffixPos = name.lastIndexOf( '[0]' );\r\n\t\t\t\tif ( suffixPos !== - 1 && suffixPos === name.length - 3 ) {\r\n\t\r\n\t\t\t\t\tuniforms[ name.substr( 0, suffixPos ) ] = location;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tuniforms[ name ] = location;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn uniforms;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction fetchAttributeLocations( gl, program, identifiers ) {\r\n\t\r\n\t\t\tvar attributes = {};\r\n\t\r\n\t\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\r\n\t\r\n\t\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\t\r\n\t\t\t\tvar info = gl.getActiveAttrib( program, i );\r\n\t\t\t\tvar name = info.name;\r\n\t\r\n\t\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\r\n\t\r\n\t\t\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn attributes;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction filterEmptyLine( string ) {\r\n\t\r\n\t\t\treturn string !== '';\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn function WebGLProgram( renderer, code, material, parameters ) {\r\n\t\r\n\t\t\tvar gl = renderer.context;\r\n\t\r\n\t\t\tvar defines = material.defines;\r\n\t\r\n\t\t\tvar vertexShader = material.__webglShader.vertexShader;\r\n\t\t\tvar fragmentShader = material.__webglShader.fragmentShader;\r\n\t\r\n\t\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\t\r\n\t\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\r\n\t\r\n\t\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\t\r\n\t\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\t\r\n\t\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\t\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\r\n\t\t\tif ( parameters.envMap ) {\r\n\t\r\n\t\t\t\tswitch ( material.envMap.mapping ) {\r\n\t\r\n\t\t\t\t\tcase THREE.CubeReflectionMapping:\r\n\t\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.EquirectangularReflectionMapping:\r\n\t\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.SphericalReflectionMapping:\r\n\t\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tswitch ( material.envMap.mapping ) {\r\n\t\r\n\t\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tswitch ( material.combine ) {\r\n\t\r\n\t\t\t\t\tcase THREE.MultiplyOperation:\r\n\t\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.MixOperation:\r\n\t\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.AddOperation:\r\n\t\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\t\r\n\t\t\t// console.log( 'building new program ' );\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar customDefines = generateDefines( defines );\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar program = gl.createProgram();\r\n\t\r\n\t\t\tvar prefixVertex, prefixFragment;\r\n\t\r\n\t\t\tif ( material instanceof THREE.RawShaderMaterial ) {\r\n\t\r\n\t\t\t\tprefixVertex = '';\r\n\t\t\t\tprefixFragment = '';\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tprefixVertex = [\r\n\t\r\n\t\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\t\r\n\t\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\t\r\n\t\t\t\t\tcustomDefines,\r\n\t\r\n\t\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\t\r\n\t\t\t\t\trenderer.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\t\trenderer.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\t\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\t\r\n\t\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\r\n\t\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\r\n\t\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\r\n\t\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\r\n\t\r\n\t\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\r\n\t\r\n\t\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\t\r\n\t\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\t\r\n\t\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\t\r\n\t\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\t\r\n\t\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\t\r\n\t\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\r\n\t\r\n\t\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\t\r\n\t\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\t\r\n\t\r\n\t\t\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t\t\t'uniform vec3 cameraPosition;',\r\n\t\r\n\t\t\t\t\t'attribute vec3 position;',\r\n\t\t\t\t\t'attribute vec3 normal;',\r\n\t\t\t\t\t'attribute vec2 uv;',\r\n\t\r\n\t\t\t\t\t'#ifdef USE_COLOR',\r\n\t\r\n\t\t\t\t\t'\tattribute vec3 color;',\r\n\t\r\n\t\t\t\t\t'#endif',\r\n\t\r\n\t\t\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\t\r\n\t\t\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t\t\t'\tattribute vec3 morphTarget3;',\r\n\t\r\n\t\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\t\r\n\t\t\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\t\r\n\t\t\t\t\t'\t#else',\r\n\t\r\n\t\t\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\t\r\n\t\t\t\t\t'\t#endif',\r\n\t\r\n\t\t\t\t\t'#endif',\r\n\t\r\n\t\t\t\t\t'#ifdef USE_SKINNING',\r\n\t\r\n\t\t\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t\t\t'\tattribute vec4 skinWeight;',\r\n\t\r\n\t\t\t\t\t'#endif',\r\n\t\r\n\t\t\t\t\t'\\n'\r\n\t\r\n\t\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\t\r\n\t\t\t\tprefixFragment = [\r\n\t\r\n\t\t\t\t\tparameters.bumpMap || parameters.normalMap || parameters.flatShading || material.derivatives ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\t\r\n\t\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\t\r\n\t\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\t\r\n\t\t\t\t\tcustomDefines,\r\n\t\r\n\t\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\r\n\t\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\r\n\t\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\r\n\t\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\r\n\t\r\n\t\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\r\n\t\r\n\t\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\r\n\t\r\n\t\t\t\t\trenderer.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\t\trenderer.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\t\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\t\r\n\t\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\t\r\n\t\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\t\r\n\t\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\t\r\n\t\t\t\t\tparameters.metal ? '#define METAL' : '',\r\n\t\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\t\r\n\t\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\r\n\t\r\n\t\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\t\r\n\t\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t\t'uniform vec3 cameraPosition;',\r\n\t\r\n\t\t\t\t\t'\\n'\r\n\t\r\n\t\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar vertexGlsl = prefixVertex + vertexShader;\r\n\t\t\tvar fragmentGlsl = prefixFragment + fragmentShader;\r\n\t\r\n\t\t\tvar glVertexShader = THREE.WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\r\n\t\t\tvar glFragmentShader = THREE.WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\r\n\t\r\n\t\t\tgl.attachShader( program, glVertexShader );\r\n\t\t\tgl.attachShader( program, glFragmentShader );\r\n\t\r\n\t\t\t// Force a particular attribute to index 0.\r\n\t\r\n\t\t\tif ( material.index0AttributeName !== undefined ) {\r\n\t\r\n\t\t\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\r\n\t\r\n\t\t\t} else if ( parameters.morphTargets === true ) {\r\n\t\r\n\t\t\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\t\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgl.linkProgram( program );\r\n\t\r\n\t\t\tvar programLog = gl.getProgramInfoLog( program );\r\n\t\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\r\n\t\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\r\n\t\r\n\t\t\tvar runnable = true;\r\n\t\t\tvar haveDiagnostics = true;\r\n\t\r\n\t\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\r\n\t\r\n\t\t\t\trunnable = false;\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\r\n\t\r\n\t\t\t} else if ( programLog !== '' ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\t\r\n\t\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\t\r\n\t\t\t\thaveDiagnostics = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( haveDiagnostics ) {\r\n\t\r\n\t\t\t\tthis.diagnostics = {\r\n\t\r\n\t\t\t\t\trunnable: runnable,\r\n\t\t\t\t\tmaterial: material,\r\n\t\r\n\t\t\t\t\tprogramLog: programLog,\r\n\t\r\n\t\t\t\t\tvertexShader: {\r\n\t\r\n\t\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\t\tprefix: prefixVertex\r\n\t\r\n\t\t\t\t\t},\r\n\t\r\n\t\t\t\t\tfragmentShader: {\r\n\t\r\n\t\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\t\tprefix: prefixFragment\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// clean up\r\n\t\r\n\t\t\tgl.deleteShader( glVertexShader );\r\n\t\t\tgl.deleteShader( glFragmentShader );\r\n\t\r\n\t\t\t// set up caching for uniform locations\r\n\t\r\n\t\t\tvar cachedUniforms;\r\n\t\r\n\t\t\tthis.getUniforms = function() {\r\n\t\r\n\t\t\t\tif ( cachedUniforms === undefined ) {\r\n\t\r\n\t\t\t\t\tcachedUniforms = fetchUniformLocations( gl, program );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn cachedUniforms;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\t// set up caching for attribute locations\r\n\t\r\n\t\t\tvar cachedAttributes;\r\n\t\r\n\t\t\tthis.getAttributes = function() {\r\n\t\r\n\t\t\t\tif ( cachedAttributes === undefined ) {\r\n\t\r\n\t\t\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn cachedAttributes;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\t// free resource\r\n\t\r\n\t\t\tthis.destroy = function() {\r\n\t\r\n\t\t\t\tgl.deleteProgram( program );\r\n\t\t\t\tthis.program = undefined;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\t// DEPRECATED\r\n\t\r\n\t\t\tObject.defineProperties( this, {\r\n\t\r\n\t\t\t\tuniforms: {\r\n\t\t\t\t\tget: function() {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\r\n\t\t\t\t\t\treturn this.getUniforms();\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\r\n\t\t\t\tattributes: {\r\n\t\t\t\t\tget: function() {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\r\n\t\t\t\t\t\treturn this.getAttributes();\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tthis.id = programIdCount ++;\r\n\t\t\tthis.code = code;\r\n\t\t\tthis.usedTimes = 1;\r\n\t\t\tthis.program = program;\r\n\t\t\tthis.vertexShader = glVertexShader;\r\n\t\t\tthis.fragmentShader = glFragmentShader;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/renderers/webgl/WebGLPrograms.js\r\n\t\r\n\tTHREE.WebGLPrograms = function ( renderer, capabilities ) {\r\n\t\r\n\t\tvar programs = [];\r\n\t\r\n\t\tvar shaderIDs = {\r\n\t\t\tMeshDepthMaterial: 'depth',\r\n\t\t\tMeshNormalMaterial: 'normal',\r\n\t\t\tMeshBasicMaterial: 'basic',\r\n\t\t\tMeshLambertMaterial: 'lambert',\r\n\t\t\tMeshPhongMaterial: 'phong',\r\n\t\t\tLineBasicMaterial: 'basic',\r\n\t\t\tLineDashedMaterial: 'dashed',\r\n\t\t\tPointsMaterial: 'points'\r\n\t\t};\r\n\t\r\n\t\tvar parameterNames = [\r\n\t\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"envMap\", \"envMapMode\",\r\n\t\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"bumpMap\", \"normalMap\", \"specularMap\",\r\n\t\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\r\n\t\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"maxDirLights\", \"maxPointLights\",\r\n\t\t\t\"maxSpotLights\", \"maxHemiLights\", \"maxShadows\", \"shadowMapEnabled\",\r\n\t\t\t\"shadowMapType\", \"shadowMapDebug\", \"alphaTest\", \"metal\", \"doubleSided\",\r\n\t\t\t\"flipSided\"\r\n\t\t];\r\n\t\r\n\t\r\n\t\tfunction allocateBones ( object ) {\r\n\t\r\n\t\t\tif ( capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\t\r\n\t\t\t\treturn 1024;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// default for when object is not specified\r\n\t\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t\t//\r\n\t\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t\t//    (up to 54 should be safe)\r\n\t\r\n\t\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\r\n\t\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\t\r\n\t\t\t\tvar maxBones = nVertexMatrices;\r\n\t\r\n\t\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\r\n\t\r\n\t\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\r\n\t\r\n\t\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn maxBones;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction allocateLights( lights ) {\r\n\t\r\n\t\t\tvar dirLights = 0;\r\n\t\t\tvar pointLights = 0;\r\n\t\t\tvar spotLights = 0;\r\n\t\t\tvar hemiLights = 0;\r\n\t\r\n\t\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\t\r\n\t\t\t\tvar light = lights[ l ];\r\n\t\r\n\t\t\t\tif ( light.onlyShadow || light.visible === false ) continue;\r\n\t\r\n\t\t\t\tif ( light instanceof THREE.DirectionalLight ) dirLights ++;\r\n\t\t\t\tif ( light instanceof THREE.PointLight ) pointLights ++;\r\n\t\t\t\tif ( light instanceof THREE.SpotLight ) spotLights ++;\r\n\t\t\t\tif ( light instanceof THREE.HemisphereLight ) hemiLights ++;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn { 'directional': dirLights, 'point': pointLights, 'spot': spotLights, 'hemi': hemiLights };\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction allocateShadows( lights ) {\r\n\t\r\n\t\t\tvar maxShadows = 0;\r\n\t\r\n\t\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\t\r\n\t\t\t\tvar light = lights[ l ];\r\n\t\r\n\t\t\t\tif ( ! light.castShadow ) continue;\r\n\t\r\n\t\t\t\tif ( light instanceof THREE.SpotLight ) maxShadows ++;\r\n\t\t\t\tif ( light instanceof THREE.DirectionalLight ) maxShadows ++;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn maxShadows;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.getParameters = function ( material, lights, fog, object ) {\r\n\t\r\n\t\t\tvar shaderID = shaderIDs[ material.type ];\r\n\t\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t\t// (not to blow over maxLights budget)\r\n\t\r\n\t\t\tvar maxLightCount = allocateLights( lights );\r\n\t\t\tvar maxShadows = allocateShadows( lights );\r\n\t\t\tvar maxBones = allocateBones( object );\r\n\t\t\tvar precision = renderer.getPrecision();\r\n\t\r\n\t\t\tif ( material.precision !== null ) {\r\n\t\r\n\t\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\t\r\n\t\t\t\tif ( precision !== material.precision ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.initMaterial:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar parameters = {\r\n\t\r\n\t\t\t\tshaderID: shaderID,\r\n\t\r\n\t\t\t\tprecision: precision,\r\n\t\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\r\n\t\r\n\t\t\t\tmap: !! material.map,\r\n\t\t\t\tenvMap: !! material.envMap,\r\n\t\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\r\n\t\t\t\tlightMap: !! material.lightMap,\r\n\t\t\t\taoMap: !! material.aoMap,\r\n\t\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\t\talphaMap: !! material.alphaMap,\r\n\t\r\n\t\t\t\tcombine: material.combine,\r\n\t\r\n\t\t\t\tvertexColors: material.vertexColors,\r\n\t\r\n\t\t\t\tfog: fog,\r\n\t\t\t\tuseFog: material.fog,\r\n\t\t\t\tfogExp: fog instanceof THREE.FogExp2,\r\n\t\r\n\t\t\t\tflatShading: material.shading === THREE.FlatShading,\r\n\t\r\n\t\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\r\n\t\r\n\t\t\t\tskinning: material.skinning,\r\n\t\t\t\tmaxBones: maxBones,\r\n\t\t\t\tuseVertexTexture: capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture,\r\n\t\r\n\t\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\t\r\n\t\t\t\tmaxDirLights: maxLightCount.directional,\r\n\t\t\t\tmaxPointLights: maxLightCount.point,\r\n\t\t\t\tmaxSpotLights: maxLightCount.spot,\r\n\t\t\t\tmaxHemiLights: maxLightCount.hemi,\r\n\t\r\n\t\t\t\tmaxShadows: maxShadows,\r\n\t\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && maxShadows > 0,\r\n\t\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\t\t\t\tshadowMapDebug: renderer.shadowMap.debug,\r\n\t\r\n\t\t\t\talphaTest: material.alphaTest,\r\n\t\t\t\tmetal: material.metal,\r\n\t\t\t\tdoubleSided: material.side === THREE.DoubleSide,\r\n\t\t\t\tflipSided: material.side === THREE.BackSide\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\treturn parameters;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getProgramCode = function ( material, parameters ) {\r\n\t\r\n\t\t\tvar chunks = [];\r\n\t\r\n\t\t\tif ( parameters.shaderID ) {\r\n\t\r\n\t\t\t\tchunks.push( parameters.shaderID );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tchunks.push( material.fragmentShader );\r\n\t\t\t\tchunks.push( material.vertexShader );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.defines !== undefined ) {\r\n\t\r\n\t\t\t\tfor ( var name in material.defines ) {\r\n\t\r\n\t\t\t\t\tchunks.push( name );\r\n\t\t\t\t\tchunks.push( material.defines[ name ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar parameterName = parameterNames[ i ];\r\n\t\t\t\tchunks.push( parameterName );\r\n\t\t\t\tchunks.push( parameters[ parameterName ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn chunks.join();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.acquireProgram = function ( material, parameters, code ) {\r\n\t\r\n\t\t\tvar program;\r\n\t\r\n\t\t\t// Check if code has been already compiled\r\n\t\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\t\r\n\t\t\t\tvar programInfo = programs[ p ];\r\n\t\r\n\t\t\t\tif ( programInfo.code === code ) {\r\n\t\r\n\t\t\t\t\tprogram = programInfo;\r\n\t\t\t\t\t++ program.usedTimes;\r\n\t\r\n\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( program === undefined ) {\r\n\t\r\n\t\t\t\tprogram = new THREE.WebGLProgram( renderer, code, material, parameters );\r\n\t\t\t\tprograms.push( program );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn program;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.releaseProgram = function( program ) {\r\n\t\r\n\t\t\tif ( -- program.usedTimes === 0 ) {\r\n\t\r\n\t\t\t\t// Remove from unordered set\r\n\t\t\t\tvar i = programs.indexOf( program );\r\n\t\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\t\tprograms.pop();\r\n\t\r\n\t\t\t\t// Free WebGL resources\r\n\t\t\t\tprogram.destroy();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\t\tthis.programs = programs;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLProperties.js\r\n\t\r\n\t/**\r\n\t* @author fordacious / fordacious.github.io\r\n\t*/\r\n\t\r\n\tTHREE.WebGLProperties = function () {\r\n\t\r\n\t\tvar properties = {};\r\n\t\r\n\t\tthis.get = function ( object ) {\r\n\t\r\n\t\t\tvar uuid = object.uuid;\r\n\t\t\tvar map = properties[ uuid ];\r\n\t\r\n\t\t\tif ( map === undefined ) {\r\n\t\r\n\t\t\t\tmap = {};\r\n\t\t\t\tproperties[ uuid ] = map;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn map;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.delete = function ( object ) {\r\n\t\r\n\t\t\tdelete properties[ object.uuid ];\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clear = function () {\r\n\t\r\n\t\t\tproperties = {};\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLShader.js\r\n\t\r\n\tTHREE.WebGLShader = ( function () {\r\n\t\r\n\t\tvar addLineNumbers = function ( string ) {\r\n\t\r\n\t\t\tvar lines = string.split( '\\n' );\r\n\t\r\n\t\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\t\r\n\t\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn lines.join( '\\n' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\treturn function WebGLShader( gl, type, string ) {\r\n\t\r\n\t\t\tvar shader = gl.createShader( type );\r\n\t\r\n\t\t\tgl.shaderSource( shader, string );\r\n\t\t\tgl.compileShader( shader );\r\n\t\r\n\t\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// --enable-privileged-webgl-extension\r\n\t\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\t\r\n\t\t\treturn shader;\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/renderers/webgl/WebGLShadowMap.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.WebGLShadowMap = function ( _renderer, _lights, _objects ) {\r\n\t\r\n\t\tvar _gl = _renderer.context,\r\n\t\t_state = _renderer.state,\r\n\t\t_frustum = new THREE.Frustum(),\r\n\t\t_projScreenMatrix = new THREE.Matrix4(),\r\n\t\r\n\t\t_min = new THREE.Vector3(),\r\n\t\t_max = new THREE.Vector3(),\r\n\t\r\n\t\t_matrixPosition = new THREE.Vector3(),\r\n\t\r\n\t\t_renderList = [];\r\n\t\r\n\t\t// init\r\n\t\r\n\t\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\r\n\t\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\r\n\t\r\n\t\tvar _depthMaterial = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: depthUniforms,\r\n\t\t\tvertexShader: depthShader.vertexShader,\r\n\t\t\tfragmentShader: depthShader.fragmentShader\r\n\t\t } );\r\n\t\r\n\t\tvar _depthMaterialMorph = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: depthUniforms,\r\n\t\t\tvertexShader: depthShader.vertexShader,\r\n\t\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\t\tmorphTargets: true\r\n\t\t} );\r\n\t\r\n\t\tvar _depthMaterialSkin = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: depthUniforms,\r\n\t\t\tvertexShader: depthShader.vertexShader,\r\n\t\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\t\tskinning: true\r\n\t\t} );\r\n\t\r\n\t\tvar _depthMaterialMorphSkin = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: depthUniforms,\r\n\t\t\tvertexShader: depthShader.vertexShader,\r\n\t\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\t\tmorphTargets: true,\r\n\t\t\tskinning: true\r\n\t\t} );\r\n\t\r\n\t\t_depthMaterial._shadowPass = true;\r\n\t\t_depthMaterialMorph._shadowPass = true;\r\n\t\t_depthMaterialSkin._shadowPass = true;\r\n\t\t_depthMaterialMorphSkin._shadowPass = true;\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar scope = this;\r\n\t\r\n\t\tthis.enabled = false;\r\n\t\r\n\t\tthis.autoUpdate = true;\r\n\t\tthis.needsUpdate = false;\r\n\t\r\n\t\tthis.type = THREE.PCFShadowMap;\r\n\t\tthis.cullFace = THREE.CullFaceFront;\r\n\t\r\n\t\tthis.render = function ( scene, camera ) {\r\n\t\r\n\t\t\tif ( scope.enabled === false ) return;\r\n\t\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\t\r\n\t\t\t// set GL state for depth map\r\n\t\r\n\t\t\t_gl.clearColor( 1, 1, 1, 1 );\r\n\t\t\t_state.disable( _gl.BLEND );\r\n\t\r\n\t\t\t_state.enable( _gl.CULL_FACE );\r\n\t\t\t_gl.frontFace( _gl.CCW );\r\n\t\r\n\t\t\tif ( scope.cullFace === THREE.CullFaceFront ) {\r\n\t\r\n\t\t\t\t_gl.cullFace( _gl.FRONT );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_state.setDepthTest( true );\r\n\t\r\n\t\t\t// render depth map\r\n\t\r\n\t\t\tfor ( var i = 0, il = _lights.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar light = _lights[ i ];\r\n\t\r\n\t\t\t\tif ( ! light.castShadow ) continue;\r\n\t\r\n\t\t\t\tif ( ! light.shadowMap ) {\r\n\t\r\n\t\t\t\t\tvar shadowFilter = THREE.LinearFilter;\r\n\t\r\n\t\t\t\t\tif ( scope.type === THREE.PCFSoftShadowMap ) {\r\n\t\r\n\t\t\t\t\t\tshadowFilter = THREE.NearestFilter;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar pars = { minFilter: shadowFilter, magFilter: shadowFilter, format: THREE.RGBAFormat };\r\n\t\r\n\t\t\t\t\tlight.shadowMap = new THREE.WebGLRenderTarget( light.shadowMapWidth, light.shadowMapHeight, pars );\r\n\t\t\t\t\tlight.shadowMapSize = new THREE.Vector2( light.shadowMapWidth, light.shadowMapHeight );\r\n\t\r\n\t\t\t\t\tlight.shadowMatrix = new THREE.Matrix4();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( ! light.shadowCamera ) {\r\n\t\r\n\t\t\t\t\tif ( light instanceof THREE.SpotLight ) {\r\n\t\r\n\t\t\t\t\t\tlight.shadowCamera = new THREE.PerspectiveCamera( light.shadowCameraFov, light.shadowMapWidth / light.shadowMapHeight, light.shadowCameraNear, light.shadowCameraFar );\r\n\t\r\n\t\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\t\r\n\t\t\t\t\t\tlight.shadowCamera = new THREE.OrthographicCamera( light.shadowCameraLeft, light.shadowCameraRight, light.shadowCameraTop, light.shadowCameraBottom, light.shadowCameraNear, light.shadowCameraFar );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tconsole.error( \"THREE.ShadowMapPlugin: Unsupported light type for shadow\", light );\r\n\t\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tscene.add( light.shadowCamera );\r\n\t\r\n\t\t\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( light.shadowCameraVisible && ! light.cameraHelper ) {\r\n\t\r\n\t\t\t\t\tlight.cameraHelper = new THREE.CameraHelper( light.shadowCamera );\r\n\t\t\t\t\tscene.add( light.cameraHelper );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar shadowMap = light.shadowMap;\r\n\t\t\t\tvar shadowMatrix = light.shadowMatrix;\r\n\t\t\t\tvar shadowCamera = light.shadowCamera;\r\n\t\r\n\t\t\t\t//\r\n\t\r\n\t\t\t\tshadowCamera.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_matrixPosition.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tshadowCamera.lookAt( _matrixPosition );\r\n\t\t\t\tshadowCamera.updateMatrixWorld();\r\n\t\r\n\t\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\r\n\t\r\n\t\t\t\t//\r\n\t\r\n\t\t\t\tif ( light.cameraHelper ) light.cameraHelper.visible = light.shadowCameraVisible;\r\n\t\t\t\tif ( light.shadowCameraVisible ) light.cameraHelper.update();\r\n\t\r\n\t\t\t\t// compute shadow matrix\r\n\t\r\n\t\t\t\tshadowMatrix.set(\r\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t\t);\r\n\t\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\t\r\n\t\t\t\t// update camera matrices and frustum\r\n\t\r\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\t\r\n\t\t\t\t// render shadow map\r\n\t\r\n\t\t\t\t_renderer.setRenderTarget( shadowMap );\r\n\t\t\t\t_renderer.clear();\r\n\t\r\n\t\t\t\t// set object matrices & frustum culling\r\n\t\r\n\t\t\t\t_renderList.length = 0;\r\n\t\r\n\t\t\t\tprojectObject( scene, shadowCamera );\r\n\t\r\n\t\r\n\t\t\t\t// render regular objects\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = _renderList.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar object = _renderList[ j ];\r\n\t\t\t\t\tvar geometry = _objects.update( object );\r\n\t\t\t\t\tvar material = object.material;\r\n\t\r\n\t\t\t\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\r\n\t\r\n\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\tvar materials = material.materials;\r\n\t\r\n\t\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tvar group = groups[ k ];\r\n\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\t\r\n\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\t\r\n\t\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, null, geometry, getDepthMaterial( object, groupMaterial ), object, group );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, null, geometry, getDepthMaterial( object, material ), object );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// restore GL state\r\n\t\r\n\t\t\tvar clearColor = _renderer.getClearColor(),\r\n\t\t\tclearAlpha = _renderer.getClearAlpha();\r\n\t\r\n\t\t\t_renderer.setClearColor( clearColor, clearAlpha );\r\n\t\t\t_state.enable( _gl.BLEND );\r\n\t\r\n\t\t\tif ( scope.cullFace === THREE.CullFaceFront ) {\r\n\t\r\n\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_renderer.resetGLState();\r\n\t\r\n\t\t\tscope.needsUpdate = false;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction getDepthMaterial( object, material ) {\r\n\t\r\n\t\t\tvar geometry = object.geometry;\r\n\t\r\n\t\t\tvar useMorphing = geometry.morphTargets !== undefined && geometry.morphTargets.length > 0 && material.morphTargets;\r\n\t\t\tvar useSkinning = object instanceof THREE.SkinnedMesh && material.skinning;\r\n\t\r\n\t\t\tvar depthMaterial;\r\n\t\r\n\t\t\tif ( object.customDepthMaterial ) {\r\n\t\r\n\t\t\t\tdepthMaterial = object.customDepthMaterial;\r\n\t\r\n\t\t\t} else if ( useSkinning ) {\r\n\t\r\n\t\t\t\tdepthMaterial = useMorphing ? _depthMaterialMorphSkin : _depthMaterialSkin;\r\n\t\r\n\t\t\t} else if ( useMorphing ) {\r\n\t\r\n\t\t\t\tdepthMaterial = _depthMaterialMorph;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tdepthMaterial = _depthMaterial;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tdepthMaterial.visible = material.visible;\r\n\t\t\tdepthMaterial.wireframe = material.wireframe;\r\n\t\t\tdepthMaterial.wireframeLinewidth = material.wireframeLinewidth;\r\n\t\r\n\t\t\treturn depthMaterial;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction projectObject( object, camera ) {\r\n\t\r\n\t\t\tif ( object.visible === false ) return;\r\n\t\r\n\t\t\tif ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\t\r\n\t\t\t\tif ( object.castShadow && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\r\n\t\r\n\t\t\t\t\tvar material = object.material;\r\n\t\r\n\t\t\t\t\tif ( material.visible === true ) {\r\n\t\r\n\t\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\t\t\t_renderList.push( object );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar children = object.children;\r\n\t\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tprojectObject( children[ i ], camera );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLState.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLState = function ( gl, extensions, paramThreeToGL ) {\r\n\t\r\n\t\tvar _this = this;\r\n\t\r\n\t\tvar newAttributes = new Uint8Array( 16 );\r\n\t\tvar enabledAttributes = new Uint8Array( 16 );\r\n\t\r\n\t\tvar capabilities = {};\r\n\t\r\n\t\tvar compressedTextureFormats = null;\r\n\t\r\n\t\tvar currentBlending = null;\r\n\t\tvar currentBlendEquation = null;\r\n\t\tvar currentBlendSrc = null;\r\n\t\tvar currentBlendDst = null;\r\n\t\tvar currentBlendEquationAlpha = null;\r\n\t\tvar currentBlendSrcAlpha = null;\r\n\t\tvar currentBlendDstAlpha = null;\r\n\t\r\n\t\tvar currentDepthFunc = null;\r\n\t\tvar currentDepthWrite = null;\r\n\t\r\n\t\tvar currentColorWrite = null;\r\n\t\r\n\t\tvar currentFlipSided = null;\r\n\t\r\n\t\tvar currentLineWidth = null;\r\n\t\r\n\t\tvar currentPolygonOffsetFactor = null;\r\n\t\tvar currentPolygonOffsetUnits = null;\r\n\t\r\n\t\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\t\r\n\t\tvar currentTextureSlot = undefined;\r\n\t\tvar currentBoundTextures = {};\r\n\t\r\n\t\tthis.init = function () {\r\n\t\r\n\t\t\tgl.clearColor( 0, 0, 0, 1 );\r\n\t\t\tgl.clearDepth( 1 );\r\n\t\t\tgl.clearStencil( 0 );\r\n\t\r\n\t\t\tthis.enable( gl.DEPTH_TEST );\r\n\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\r\n\t\t\tgl.frontFace( gl.CCW );\r\n\t\t\tgl.cullFace( gl.BACK );\r\n\t\t\tthis.enable( gl.CULL_FACE );\r\n\t\r\n\t\t\tthis.enable( gl.BLEND );\r\n\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.initAttributes = function () {\r\n\t\r\n\t\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tnewAttributes[ i ] = 0;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.enableAttribute = function ( attribute ) {\r\n\t\r\n\t\t\tnewAttributes[ attribute ] = 1;\r\n\t\r\n\t\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\t\r\n\t\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\t\tenabledAttributes[ attribute ] = 1;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.disableUnusedAttributes = function () {\r\n\t\r\n\t\t\tfor ( var i = 0, l = enabledAttributes.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\t\r\n\t\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\t\tenabledAttributes[ i ] = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.enable = function ( id ) {\r\n\t\r\n\t\t\tif ( capabilities[ id ] !== true ) {\r\n\t\r\n\t\t\t\tgl.enable( id );\r\n\t\t\t\tcapabilities[ id ] = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.disable = function ( id ) {\r\n\t\r\n\t\t\tif ( capabilities[ id ] !== false ) {\r\n\t\r\n\t\t\t\tgl.disable( id );\r\n\t\t\t\tcapabilities[ id ] = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getCompressedTextureFormats = function () {\r\n\t\r\n\t\t\tif ( compressedTextureFormats === null ) {\r\n\t\r\n\t\t\t\tcompressedTextureFormats = [];\r\n\t\r\n\t\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\r\n\t\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ) {\r\n\t\r\n\t\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn compressedTextureFormats;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha ) {\r\n\t\r\n\t\t\tif ( blending !== currentBlending ) {\r\n\t\r\n\t\t\t\tif ( blending === THREE.NoBlending ) {\r\n\t\r\n\t\t\t\t\tthis.disable( gl.BLEND );\r\n\t\r\n\t\t\t\t} else if ( blending === THREE.AdditiveBlending ) {\r\n\t\r\n\t\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\r\n\t\r\n\t\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\r\n\t\r\n\t\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\t\r\n\t\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\r\n\t\r\n\t\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\r\n\t\r\n\t\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\t\r\n\t\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\r\n\t\r\n\t\t\t\t} else if ( blending === THREE.CustomBlending ) {\r\n\t\r\n\t\t\t\t\tthis.enable( gl.BLEND );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tcurrentBlending = blending;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( blending === THREE.CustomBlending ) {\r\n\t\r\n\t\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\t\r\n\t\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\t\r\n\t\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\r\n\t\r\n\t\t\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\t\r\n\t\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\r\n\t\r\n\t\t\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tcurrentBlendEquation = null;\r\n\t\t\t\tcurrentBlendSrc = null;\r\n\t\t\t\tcurrentBlendDst = null;\r\n\t\t\t\tcurrentBlendEquationAlpha = null;\r\n\t\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\t\tcurrentBlendDstAlpha = null;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setDepthFunc = function ( depthFunc ) {\r\n\t\r\n\t\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\t\r\n\t\t\t\tif ( depthFunc ) {\r\n\t\r\n\t\t\t\t\tswitch ( depthFunc ) {\r\n\t\r\n\t\t\t\t\t\tcase THREE.NeverDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.AlwaysDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.LessDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.LessEqualDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.EqualDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.GreaterEqualDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.GreaterDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.NotEqualDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tdefault:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tcurrentDepthFunc = depthFunc;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setDepthTest = function ( depthTest ) {\r\n\t\r\n\t\t\tif ( depthTest ) {\r\n\t\r\n\t\t\t\tthis.enable( gl.DEPTH_TEST );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.disable( gl.DEPTH_TEST );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setDepthWrite = function ( depthWrite ) {\r\n\t\r\n\t\t\tif ( currentDepthWrite !== depthWrite ) {\r\n\t\r\n\t\t\t\tgl.depthMask( depthWrite );\r\n\t\t\t\tcurrentDepthWrite = depthWrite;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setColorWrite = function ( colorWrite ) {\r\n\t\r\n\t\t\tif ( currentColorWrite !== colorWrite ) {\r\n\t\r\n\t\t\t\tgl.colorMask( colorWrite, colorWrite, colorWrite, colorWrite );\r\n\t\t\t\tcurrentColorWrite = colorWrite;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setFlipSided = function ( flipSided ) {\r\n\t\r\n\t\t\tif ( currentFlipSided !== flipSided ) {\r\n\t\r\n\t\t\t\tif ( flipSided ) {\r\n\t\r\n\t\t\t\t\tgl.frontFace( gl.CW );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tgl.frontFace( gl.CCW );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tcurrentFlipSided = flipSided;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setLineWidth = function ( width ) {\r\n\t\r\n\t\t\tif ( width !== currentLineWidth ) {\r\n\t\r\n\t\t\t\tgl.lineWidth( width );\r\n\t\r\n\t\t\t\tcurrentLineWidth = width;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setPolygonOffset = function ( polygonOffset, factor, units ) {\r\n\t\r\n\t\t\tif ( polygonOffset ) {\r\n\t\r\n\t\t\t\tthis.enable( gl.POLYGON_OFFSET_FILL );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.disable( gl.POLYGON_OFFSET_FILL );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( polygonOffset && ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) ) {\r\n\t\r\n\t\t\t\tgl.polygonOffset( factor, units );\r\n\t\r\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\t\tcurrentPolygonOffsetUnits = units;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setScissorTest = function ( scissorTest ) {\r\n\t\r\n\t\t\tif ( scissorTest ) {\r\n\t\r\n\t\t\t\tthis.enable( gl.SCISSOR_TEST );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.disable( gl.SCISSOR_TEST );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// texture\r\n\t\r\n\t\tthis.activeTexture = function ( webglSlot ) {\r\n\t\r\n\t\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\r\n\t\r\n\t\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\t\r\n\t\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\t\tcurrentTextureSlot = webglSlot;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.bindTexture = function ( webglType, webglTexture ) {\r\n\t\r\n\t\t\tif ( currentTextureSlot === undefined ) {\r\n\t\r\n\t\t\t\t_this.activeTexture();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\t\r\n\t\t\tif ( boundTexture === undefined ) {\r\n\t\r\n\t\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\t\r\n\t\t\t\tgl.bindTexture( webglType, webglTexture );\r\n\t\r\n\t\t\t\tboundTexture.type = webglType;\r\n\t\t\t\tboundTexture.texture = webglTexture;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.compressedTexImage2D = function () {\r\n\t\r\n\t\t\ttry {\r\n\t\r\n\t\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\t\r\n\t\t\t} catch ( error ) {\r\n\t\r\n\t\t\t\tconsole.error( error );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.texImage2D = function () {\r\n\t\r\n\t\t\ttry {\r\n\t\r\n\t\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\t\r\n\t\t\t} catch ( error ) {\r\n\t\r\n\t\t\t\tconsole.error( error );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\t//\r\n\t\r\n\t\tthis.reset = function () {\r\n\t\r\n\t\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\r\n\t\r\n\t\t\t\tif ( enabledAttributes[ i ] === 1 ) {\r\n\t\r\n\t\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\t\tenabledAttributes[ i ] = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tcapabilities = {};\r\n\t\r\n\t\t\tcompressedTextureFormats = null;\r\n\t\r\n\t\t\tcurrentBlending = null;\r\n\t\r\n\t\t\tcurrentDepthWrite = null;\r\n\t\t\tcurrentColorWrite = null;\r\n\t\r\n\t\t\tcurrentFlipSided = null;\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/plugins/LensFlarePlugin.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.LensFlarePlugin = function ( renderer, flares ) {\r\n\t\r\n\t\tvar gl = renderer.context;\r\n\t\tvar state = renderer.state;\r\n\t\r\n\t\tvar vertexBuffer, elementBuffer;\r\n\t\tvar program, attributes, uniforms;\r\n\t\tvar hasVertexTexture;\r\n\t\r\n\t\tvar tempTexture, occlusionTexture;\r\n\t\r\n\t\tvar init = function () {\r\n\t\r\n\t\t\tvar vertices = new Float32Array( [\r\n\t\t\t\t- 1, - 1,  0, 0,\r\n\t\t\t\t 1, - 1,  1, 0,\r\n\t\t\t\t 1,  1,  1, 1,\r\n\t\t\t\t- 1,  1,  0, 1\r\n\t\t\t] );\r\n\t\r\n\t\t\tvar faces = new Uint16Array( [\r\n\t\t\t\t0, 1, 2,\r\n\t\t\t\t0, 2, 3\r\n\t\t\t] );\r\n\t\r\n\t\t\t// buffers\r\n\t\r\n\t\t\tvertexBuffer     = gl.createBuffer();\r\n\t\t\telementBuffer    = gl.createBuffer();\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\t\r\n\t\t\t// textures\r\n\t\r\n\t\t\ttempTexture      = gl.createTexture();\r\n\t\t\tocclusionTexture = gl.createTexture();\r\n\t\r\n\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\t\r\n\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\t\r\n\t\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\r\n\t\r\n\t\t\tvar shader;\r\n\t\r\n\t\t\tif ( hasVertexTexture ) {\r\n\t\r\n\t\t\t\tshader = {\r\n\t\r\n\t\t\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\t\"uniform float rotation;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\t\r\n\t\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\t\"attribute vec2 uv;\",\r\n\t\r\n\t\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\t\"varying float vVisibility;\",\r\n\t\r\n\t\t\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\t\t\t\"vUV = uv;\",\r\n\t\r\n\t\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\t\r\n\t\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\r\n\t\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\r\n\t\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\r\n\t\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\t\r\n\t\t\t\t\t\t\t\"}\",\r\n\t\r\n\t\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\t\r\n\t\t\t\t\t\t\"}\"\r\n\t\r\n\t\t\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\t\"uniform vec3 color;\",\r\n\t\r\n\t\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\t\"varying float vVisibility;\",\r\n\t\r\n\t\t\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\t\t\t// pink square\r\n\t\r\n\t\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\r\n\t\r\n\t\t\t\t\t\t\t// restore\r\n\t\r\n\t\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\t\r\n\t\t\t\t\t\t\t// flare\r\n\t\r\n\t\t\t\t\t\t\t\"} else {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\t\r\n\t\t\t\t\t\t\t\"}\",\r\n\t\r\n\t\t\t\t\t\t\"}\"\r\n\t\r\n\t\t\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tshader = {\r\n\t\r\n\t\t\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\t\"uniform float rotation;\",\r\n\t\r\n\t\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\t\"attribute vec2 uv;\",\r\n\t\r\n\t\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\r\n\t\t\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\t\t\t\"vUV = uv;\",\r\n\t\r\n\t\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\t\r\n\t\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\t\r\n\t\t\t\t\t\t\t\"}\",\r\n\t\r\n\t\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\t\r\n\t\t\t\t\t\t\"}\"\r\n\t\r\n\t\t\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\t\t\"precision mediump float;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\t\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\t\"uniform vec3 color;\",\r\n\t\r\n\t\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\r\n\t\t\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\t\t\t// pink square\r\n\t\r\n\t\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\r\n\t\r\n\t\t\t\t\t\t\t// restore\r\n\t\r\n\t\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\t\r\n\t\t\t\t\t\t\t// flare\r\n\t\r\n\t\t\t\t\t\t\t\"} else {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\t\r\n\t\t\t\t\t\t\t\"}\",\r\n\t\r\n\t\t\t\t\t\t\"}\"\r\n\t\r\n\t\t\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tprogram = createProgram( shader );\r\n\t\r\n\t\t\tattributes = {\r\n\t\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\r\n\t\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\r\n\t\t\t};\r\n\t\r\n\t\t\tuniforms = {\r\n\t\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\r\n\t\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\r\n\t\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\r\n\t\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\r\n\t\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\r\n\t\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\r\n\t\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\r\n\t\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\r\n\t\t\t};\r\n\t\r\n\t\t};\r\n\t\r\n\t\t/*\r\n\t\t * Render lens flares\r\n\t\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t\t *         reads these back and calculates occlusion.\r\n\t\t */\r\n\t\r\n\t\tthis.render = function ( scene, camera, viewportWidth, viewportHeight ) {\r\n\t\r\n\t\t\tif ( flares.length === 0 ) return;\r\n\t\r\n\t\t\tvar tempPosition = new THREE.Vector3();\r\n\t\r\n\t\t\tvar invAspect = viewportHeight / viewportWidth,\r\n\t\t\t\thalfViewportWidth = viewportWidth * 0.5,\r\n\t\t\t\thalfViewportHeight = viewportHeight * 0.5;\r\n\t\r\n\t\t\tvar size = 16 / viewportHeight,\r\n\t\t\t\tscale = new THREE.Vector2( size * invAspect, size );\r\n\t\r\n\t\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\r\n\t\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\r\n\t\r\n\t\t\tif ( program === undefined ) {\r\n\t\r\n\t\t\t\tinit();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgl.useProgram( program );\r\n\t\r\n\t\t\tstate.initAttributes();\r\n\t\t\tstate.enableAttribute( attributes.vertex );\r\n\t\t\tstate.enableAttribute( attributes.uv );\r\n\t\t\tstate.disableUnusedAttributes();\r\n\t\r\n\t\t\t// loop through all lens flares to update their occlusion and positions\r\n\t\t\t// setup gl and common used attribs/uniforms\r\n\t\r\n\t\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\r\n\t\t\tgl.uniform1i( uniforms.map, 1 );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\r\n\t\t\tstate.disable( gl.CULL_FACE );\r\n\t\t\tgl.depthMask( false );\r\n\t\r\n\t\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tsize = 16 / viewportHeight;\r\n\t\t\t\tscale.set( size * invAspect, size );\r\n\t\r\n\t\t\t\t// calc object screen position\r\n\t\r\n\t\t\t\tvar flare = flares[ i ];\r\n\t\r\n\t\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\r\n\t\r\n\t\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\r\n\t\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\r\n\t\r\n\t\t\t\t// setup arrays for gl programs\r\n\t\r\n\t\t\t\tscreenPosition.copy( tempPosition );\r\n\t\r\n\t\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\r\n\t\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\r\n\t\r\n\t\t\t\t// screen cull\r\n\t\r\n\t\t\t\tif ( hasVertexTexture || (\r\n\t\t\t\t\tscreenPositionPixels.x > 0 &&\r\n\t\t\t\t\tscreenPositionPixels.x < viewportWidth &&\r\n\t\t\t\t\tscreenPositionPixels.y > 0 &&\r\n\t\t\t\t\tscreenPositionPixels.y < viewportHeight ) ) {\r\n\t\r\n\t\t\t\t\t// save current RGB to temp texture\r\n\t\r\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\r\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\t\r\n\t\r\n\t\t\t\t\t// render pink quad\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\r\n\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\r\n\t\t\t\t\tstate.disable( gl.BLEND );\r\n\t\t\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\t\r\n\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\t\r\n\t\r\n\t\t\t\t\t// copy result to occlusionMap\r\n\t\r\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\t\r\n\t\r\n\t\t\t\t\t// restore graphics\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\r\n\t\t\t\t\tstate.disable( gl.DEPTH_TEST );\r\n\t\r\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\t\r\n\t\r\n\t\t\t\t\t// update object positions\r\n\t\r\n\t\t\t\t\tflare.positionScreen.copy( screenPosition );\r\n\t\r\n\t\t\t\t\tif ( flare.customUpdateCallback ) {\r\n\t\r\n\t\t\t\t\t\tflare.customUpdateCallback( flare );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tflare.updateLensFlares();\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// render flares\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\r\n\t\t\t\t\tstate.enable( gl.BLEND );\r\n\t\r\n\t\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\r\n\t\r\n\t\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\r\n\t\r\n\t\t\t\t\t\t\tscreenPosition.x = sprite.x;\r\n\t\t\t\t\t\t\tscreenPosition.y = sprite.y;\r\n\t\t\t\t\t\t\tscreenPosition.z = sprite.z;\r\n\t\r\n\t\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewportHeight;\r\n\t\r\n\t\t\t\t\t\t\tscale.x = size * invAspect;\r\n\t\t\t\t\t\t\tscale.y = size;\r\n\t\r\n\t\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\r\n\t\r\n\t\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\r\n\t\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\r\n\t\r\n\t\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\r\n\t\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\r\n\t\r\n\t\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// restore gl\r\n\t\r\n\t\t\tstate.enable( gl.CULL_FACE );\r\n\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\t\t\tgl.depthMask( true );\r\n\t\r\n\t\t\trenderer.resetGLState();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction createProgram ( shader ) {\r\n\t\r\n\t\t\tvar program = gl.createProgram();\r\n\t\r\n\t\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\r\n\t\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\r\n\t\r\n\t\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\r\n\t\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\r\n\t\r\n\t\t\tgl.compileShader( fragmentShader );\r\n\t\t\tgl.compileShader( vertexShader );\r\n\t\r\n\t\t\tgl.attachShader( program, fragmentShader );\r\n\t\t\tgl.attachShader( program, vertexShader );\r\n\t\r\n\t\t\tgl.linkProgram( program );\r\n\t\r\n\t\t\treturn program;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/plugins/SpritePlugin.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.SpritePlugin = function ( renderer, sprites ) {\r\n\t\r\n\t\tvar gl = renderer.context;\r\n\t\tvar state = renderer.state;\r\n\t\r\n\t\tvar vertexBuffer, elementBuffer;\r\n\t\tvar program, attributes, uniforms;\r\n\t\r\n\t\tvar texture;\r\n\t\r\n\t\t// decompose matrixWorld\r\n\t\r\n\t\tvar spritePosition = new THREE.Vector3();\r\n\t\tvar spriteRotation = new THREE.Quaternion();\r\n\t\tvar spriteScale = new THREE.Vector3();\r\n\t\r\n\t\tvar init = function () {\r\n\t\r\n\t\t\tvar vertices = new Float32Array( [\r\n\t\t\t\t- 0.5, - 0.5,  0, 0,\r\n\t\t\t\t  0.5, - 0.5,  1, 0,\r\n\t\t\t\t  0.5,   0.5,  1, 1,\r\n\t\t\t\t- 0.5,   0.5,  0, 1\r\n\t\t\t] );\r\n\t\r\n\t\t\tvar faces = new Uint16Array( [\r\n\t\t\t\t0, 1, 2,\r\n\t\t\t\t0, 2, 3\r\n\t\t\t] );\r\n\t\r\n\t\t\tvertexBuffer  = gl.createBuffer();\r\n\t\t\telementBuffer = gl.createBuffer();\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\t\r\n\t\t\tprogram = createProgram();\r\n\t\r\n\t\t\tattributes = {\r\n\t\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\r\n\t\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\r\n\t\t\t};\r\n\t\r\n\t\t\tuniforms = {\r\n\t\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\r\n\t\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\r\n\t\r\n\t\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\r\n\t\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\r\n\t\r\n\t\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\r\n\t\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\r\n\t\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\r\n\t\r\n\t\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\r\n\t\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\r\n\t\r\n\t\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\r\n\t\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\r\n\t\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\r\n\t\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\r\n\t\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\r\n\t\r\n\t\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\r\n\t\t\t};\r\n\t\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = 8;\r\n\t\t\tcanvas.height = 8;\r\n\t\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.fillStyle = 'white';\r\n\t\t\tcontext.fillRect( 0, 0, 8, 8 );\r\n\t\r\n\t\t\ttexture = new THREE.Texture( canvas );\r\n\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.render = function ( scene, camera ) {\r\n\t\r\n\t\t\tif ( sprites.length === 0 ) return;\r\n\t\r\n\t\t\t// setup gl\r\n\t\r\n\t\t\tif ( program === undefined ) {\r\n\t\r\n\t\t\t\tinit();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgl.useProgram( program );\r\n\t\r\n\t\t\tstate.initAttributes();\r\n\t\t\tstate.enableAttribute( attributes.position );\r\n\t\t\tstate.enableAttribute( attributes.uv );\r\n\t\t\tstate.disableUnusedAttributes();\r\n\t\r\n\t\t\tstate.disable( gl.CULL_FACE );\r\n\t\t\tstate.enable( gl.BLEND );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\r\n\t\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\t\r\n\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\tgl.uniform1i( uniforms.map, 0 );\r\n\t\r\n\t\t\tvar oldFogType = 0;\r\n\t\t\tvar sceneFogType = 0;\r\n\t\t\tvar fog = scene.fog;\r\n\t\r\n\t\t\tif ( fog ) {\r\n\t\r\n\t\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\t\r\n\t\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\t\r\n\t\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\r\n\t\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\r\n\t\t\t\t\toldFogType = 1;\r\n\t\t\t\t\tsceneFogType = 1;\r\n\t\r\n\t\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\t\r\n\t\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\r\n\t\t\t\t\toldFogType = 2;\r\n\t\t\t\t\tsceneFogType = 2;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 0 );\r\n\t\t\t\toldFogType = 0;\r\n\t\t\t\tsceneFogType = 0;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\t// update positions and sort\r\n\t\r\n\t\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar sprite = sprites[ i ];\r\n\t\r\n\t\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n\t\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tsprites.sort( painterSortStable );\r\n\t\r\n\t\t\t// render all sprites\r\n\t\r\n\t\t\tvar scale = [];\r\n\t\r\n\t\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar sprite = sprites[ i ];\r\n\t\t\t\tvar material = sprite.material;\r\n\t\r\n\t\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n\t\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\r\n\t\r\n\t\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\t\r\n\t\t\t\tscale[ 0 ] = spriteScale.x;\r\n\t\t\t\tscale[ 1 ] = spriteScale.y;\r\n\t\r\n\t\t\t\tvar fogType = 0;\r\n\t\r\n\t\t\t\tif ( scene.fog && material.fog ) {\r\n\t\r\n\t\t\t\t\tfogType = sceneFogType;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( oldFogType !== fogType ) {\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\r\n\t\t\t\t\toldFogType = fogType;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( material.map !== null ) {\r\n\t\r\n\t\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n\t\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n\t\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\r\n\t\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\t\r\n\t\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\r\n\t\t\t\tgl.uniform2fv( uniforms.scale, scale );\r\n\t\r\n\t\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\t\tstate.setDepthTest( material.depthTest );\r\n\t\t\t\tstate.setDepthWrite( material.depthWrite );\r\n\t\r\n\t\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\r\n\t\r\n\t\t\t\t\trenderer.setTexture( material.map, 0 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\trenderer.setTexture( texture, 0 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// restore gl\r\n\t\r\n\t\t\tstate.enable( gl.CULL_FACE );\r\n\t\r\n\t\t\trenderer.resetGLState();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction createProgram () {\r\n\t\r\n\t\t\tvar program = gl.createProgram();\r\n\t\r\n\t\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\r\n\t\t\tgl.shaderSource( vertexShader, [\r\n\t\r\n\t\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\t\r\n\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t'uniform float rotation;',\r\n\t\t\t\t'uniform vec2 scale;',\r\n\t\t\t\t'uniform vec2 uvOffset;',\r\n\t\t\t\t'uniform vec2 uvScale;',\r\n\t\r\n\t\t\t\t'attribute vec2 position;',\r\n\t\t\t\t'attribute vec2 uv;',\r\n\t\r\n\t\t\t\t'varying vec2 vUV;',\r\n\t\r\n\t\t\t\t'void main() {',\r\n\t\r\n\t\t\t\t\t'vUV = uvOffset + uv * uvScale;',\r\n\t\r\n\t\t\t\t\t'vec2 alignedPosition = position * scale;',\r\n\t\r\n\t\t\t\t\t'vec2 rotatedPosition;',\r\n\t\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n\t\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\t\r\n\t\t\t\t\t'vec4 finalPosition;',\r\n\t\r\n\t\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n\t\t\t\t\t'finalPosition.xy += rotatedPosition;',\r\n\t\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\r\n\t\r\n\t\t\t\t\t'gl_Position = finalPosition;',\r\n\t\r\n\t\t\t\t'}'\r\n\t\r\n\t\t\t].join( '\\n' ) );\r\n\t\r\n\t\t\tgl.shaderSource( fragmentShader, [\r\n\t\r\n\t\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\t\r\n\t\t\t\t'uniform vec3 color;',\r\n\t\t\t\t'uniform sampler2D map;',\r\n\t\t\t\t'uniform float opacity;',\r\n\t\r\n\t\t\t\t'uniform int fogType;',\r\n\t\t\t\t'uniform vec3 fogColor;',\r\n\t\t\t\t'uniform float fogDensity;',\r\n\t\t\t\t'uniform float fogNear;',\r\n\t\t\t\t'uniform float fogFar;',\r\n\t\t\t\t'uniform float alphaTest;',\r\n\t\r\n\t\t\t\t'varying vec2 vUV;',\r\n\t\r\n\t\t\t\t'void main() {',\r\n\t\r\n\t\t\t\t\t'vec4 texture = texture2D( map, vUV );',\r\n\t\r\n\t\t\t\t\t'if ( texture.a < alphaTest ) discard;',\r\n\t\r\n\t\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\t\r\n\t\t\t\t\t'if ( fogType > 0 ) {',\r\n\t\r\n\t\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\r\n\t\t\t\t\t\t'float fogFactor = 0.0;',\r\n\t\r\n\t\t\t\t\t\t'if ( fogType == 1 ) {',\r\n\t\r\n\t\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\r\n\t\r\n\t\t\t\t\t\t'} else {',\r\n\t\r\n\t\t\t\t\t\t\t'const float LOG2 = 1.442695;',\r\n\t\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\r\n\t\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\t\r\n\t\t\t\t\t\t'}',\r\n\t\r\n\t\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\r\n\t\r\n\t\t\t\t\t'}',\r\n\t\r\n\t\t\t\t'}'\r\n\t\r\n\t\t\t].join( '\\n' ) );\r\n\t\r\n\t\t\tgl.compileShader( vertexShader );\r\n\t\t\tgl.compileShader( fragmentShader );\r\n\t\r\n\t\t\tgl.attachShader( program, vertexShader );\r\n\t\t\tgl.attachShader( program, fragmentShader );\r\n\t\r\n\t\t\tgl.linkProgram( program );\r\n\t\r\n\t\t\treturn program;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction painterSortStable ( a, b ) {\r\n\t\r\n\t\t\tif ( a.z !== b.z ) {\r\n\t\r\n\t\t\t\treturn b.z - a.z;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\treturn b.id - a.id;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/GeometryUtils.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.GeometryUtils = {\r\n\t\r\n\t\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\t\r\n\t\t\tvar matrix;\r\n\t\r\n\t\t\tif ( geometry2 instanceof THREE.Mesh ) {\r\n\t\r\n\t\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\t\r\n\t\t\t\tmatrix = geometry2.matrix;\r\n\t\t\t\tgeometry2 = geometry2.geometry;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcenter: function ( geometry ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\t\treturn geometry.center();\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/ImageUtils.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author Daosheng Mu / https://github.com/DaoshengMu/\r\n\t */\r\n\t\r\n\tTHREE.ImageUtils = {\r\n\t\r\n\t\tcrossOrigin: undefined,\r\n\t\r\n\t\tloadTexture: function ( url, mapping, onLoad, onError ) {\r\n\t\r\n\t\t\tvar loader = new THREE.ImageLoader();\r\n\t\t\tloader.crossOrigin = this.crossOrigin;\r\n\t\r\n\t\t\tvar texture = new THREE.Texture( undefined, mapping );\r\n\t\r\n\t\t\tloader.load( url, function ( image ) {\r\n\t\r\n\t\t\t\ttexture.image = image;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\t\r\n\t\t\t}, undefined, function ( event ) {\r\n\t\r\n\t\t\t\tif ( onError ) onError( event );\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t\ttexture.sourceFile = url;\r\n\t\r\n\t\t\treturn texture;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tloadTextureCube: function ( array, mapping, onLoad, onError ) {\r\n\t\r\n\t\t\tvar images = [];\r\n\t\r\n\t\t\tvar loader = new THREE.ImageLoader();\r\n\t\t\tloader.crossOrigin = this.crossOrigin;\r\n\t\r\n\t\t\tvar texture = new THREE.CubeTexture( images, mapping );\r\n\t\r\n\t\t\tvar loaded = 0;\r\n\t\r\n\t\t\tvar loadTexture = function ( i ) {\r\n\t\r\n\t\t\t\tloader.load( array[ i ], function ( image ) {\r\n\t\r\n\t\t\t\t\ttexture.images[ i ] = image;\r\n\t\r\n\t\t\t\t\tloaded += 1;\r\n\t\r\n\t\t\t\t\tif ( loaded === 6 ) {\r\n\t\r\n\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}, undefined, onError );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tfor ( var i = 0, il = array.length; i < il; ++ i ) {\r\n\t\r\n\t\t\t\tloadTexture( i );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn texture;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tloadCompressedTexture: function () {\r\n\t\r\n\t\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' )\r\n\t\r\n\t\t},\r\n\t\r\n\t\tloadCompressedTextureCube: function () {\r\n\t\r\n\t\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' )\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetNormalMap: function ( image, depth ) {\r\n\t\r\n\t\t\t// Adapted from http://www.paulbrunt.co.uk/lab/heightnormal/\r\n\t\r\n\t\t\tvar cross = function ( a, b ) {\r\n\t\r\n\t\t\t\treturn [ a[ 1 ] * b[ 2 ] - a[ 2 ] * b[ 1 ], a[ 2 ] * b[ 0 ] - a[ 0 ] * b[ 2 ], a[ 0 ] * b[ 1 ] - a[ 1 ] * b[ 0 ] ];\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tvar subtract = function ( a, b ) {\r\n\t\r\n\t\t\t\treturn [ a[ 0 ] - b[ 0 ], a[ 1 ] - b[ 1 ], a[ 2 ] - b[ 2 ] ];\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tvar normalize = function ( a ) {\r\n\t\r\n\t\t\t\tvar l = Math.sqrt( a[ 0 ] * a[ 0 ] + a[ 1 ] * a[ 1 ] + a[ 2 ] * a[ 2 ] );\r\n\t\t\t\treturn [ a[ 0 ] / l, a[ 1 ] / l, a[ 2 ] / l ];\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tdepth = depth | 1;\r\n\t\r\n\t\t\tvar width = image.width;\r\n\t\t\tvar height = image.height;\r\n\t\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = width;\r\n\t\t\tcanvas.height = height;\r\n\t\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0 );\r\n\t\r\n\t\t\tvar data = context.getImageData( 0, 0, width, height ).data;\r\n\t\t\tvar imageData = context.createImageData( width, height );\r\n\t\t\tvar output = imageData.data;\r\n\t\r\n\t\t\tfor ( var x = 0; x < width; x ++ ) {\r\n\t\r\n\t\t\t\tfor ( var y = 0; y < height; y ++ ) {\r\n\t\r\n\t\t\t\t\tvar ly = y - 1 < 0 ? 0 : y - 1;\r\n\t\t\t\t\tvar uy = y + 1 > height - 1 ? height - 1 : y + 1;\r\n\t\t\t\t\tvar lx = x - 1 < 0 ? 0 : x - 1;\r\n\t\t\t\t\tvar ux = x + 1 > width - 1 ? width - 1 : x + 1;\r\n\t\r\n\t\t\t\t\tvar points = [];\r\n\t\t\t\t\tvar origin = [ 0, 0, data[ ( y * width + x ) * 4 ] / 255 * depth ];\r\n\t\t\t\t\tpoints.push( [ - 1, 0, data[ ( y * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ - 1, - 1, data[ ( ly * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ 0, - 1, data[ ( ly * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ 1, - 1, data[ ( ly * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ 1, 0, data[ ( y * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ 1, 1, data[ ( uy * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ 0, 1, data[ ( uy * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ - 1, 1, data[ ( uy * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\r\n\t\t\t\t\tvar normals = [];\r\n\t\t\t\t\tvar num_points = points.length;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < num_points; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar v1 = points[ i ];\r\n\t\t\t\t\t\tvar v2 = points[ ( i + 1 ) % num_points ];\r\n\t\t\t\t\t\tv1 = subtract( v1, origin );\r\n\t\t\t\t\t\tv2 = subtract( v2, origin );\r\n\t\t\t\t\t\tnormals.push( normalize( cross( v1, v2 ) ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar normal = [ 0, 0, 0 ];\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < normals.length; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tnormal[ 0 ] += normals[ i ][ 0 ];\r\n\t\t\t\t\t\tnormal[ 1 ] += normals[ i ][ 1 ];\r\n\t\t\t\t\t\tnormal[ 2 ] += normals[ i ][ 2 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tnormal[ 0 ] /= normals.length;\r\n\t\t\t\t\tnormal[ 1 ] /= normals.length;\r\n\t\t\t\t\tnormal[ 2 ] /= normals.length;\r\n\t\r\n\t\t\t\t\tvar idx = ( y * width + x ) * 4;\r\n\t\r\n\t\t\t\t\toutput[ idx ] = ( ( normal[ 0 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\t\toutput[ idx + 1 ] = ( ( normal[ 1 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\t\toutput[ idx + 2 ] = ( normal[ 2 ] * 255 ) | 0;\r\n\t\t\t\t\toutput[ idx + 3 ] = 255;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tcontext.putImageData( imageData, 0, 0 );\r\n\t\r\n\t\t\treturn canvas;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgenerateDataTexture: function ( width, height, color ) {\r\n\t\r\n\t\t\tvar size = width * height;\r\n\t\t\tvar data = new Uint8Array( 3 * size );\r\n\t\r\n\t\t\tvar r = Math.floor( color.r * 255 );\r\n\t\t\tvar g = Math.floor( color.g * 255 );\r\n\t\t\tvar b = Math.floor( color.b * 255 );\r\n\t\r\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\r\n\t\r\n\t\t\t\tdata[ i * 3 ] \t   = r;\r\n\t\t\t\tdata[ i * 3 + 1 ] = g;\r\n\t\t\t\tdata[ i * 3 + 2 ] = b;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar texture = new THREE.DataTexture( data, width, height, THREE.RGBFormat );\r\n\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\treturn texture;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/SceneUtils.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.SceneUtils = {\r\n\t\r\n\t\tcreateMultiMaterialObject: function ( geometry, materials ) {\r\n\t\r\n\t\t\tvar group = new THREE.Group();\r\n\t\r\n\t\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn group;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdetach: function ( child, parent, scene ) {\r\n\t\r\n\t\t\tchild.applyMatrix( parent.matrixWorld );\r\n\t\t\tparent.remove( child );\r\n\t\t\tscene.add( child );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tattach: function ( child, scene, parent ) {\r\n\t\r\n\t\t\tvar matrixWorldInverse = new THREE.Matrix4();\r\n\t\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\r\n\t\t\tchild.applyMatrix( matrixWorldInverse );\r\n\t\r\n\t\t\tscene.remove( child );\r\n\t\t\tparent.add( child );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/FontUtils.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * For Text operations in three.js (See TextGeometry)\r\n\t *\r\n\t * It uses techniques used in:\r\n\t *\r\n\t *\tTriangulation ported from AS3\r\n\t *\t\tSimple Polygon Triangulation\r\n\t *\t\thttp://actionsnippet.com/?p=1462\r\n\t *\r\n\t * \tA Method to triangulate shapes with holes\r\n\t *\t\thttp://www.sakri.net/blog/2009/06/12/an-approach-to-triangulating-polygons-with-holes/\r\n\t *\r\n\t */\r\n\t\r\n\tTHREE.FontUtils = {\r\n\t\r\n\t\tfaces: {},\r\n\t\r\n\t\t// Just for now. face[weight][style]\r\n\t\r\n\t\tface: 'helvetiker',\r\n\t\tweight: 'normal',\r\n\t\tstyle: 'normal',\r\n\t\tsize: 150,\r\n\t\tdivisions: 10,\r\n\t\r\n\t\tgetFace: function () {\r\n\t\r\n\t\t\ttry {\r\n\t\r\n\t\t\t\treturn this.faces[ this.face.toLowerCase() ][ this.weight ][ this.style ];\r\n\t\r\n\t\t\t} catch ( e ) {\r\n\t\r\n\t\t\t\tthrow \"The font \" + this.face + \" with \" + this.weight + \" weight and \" + this.style + \" style is missing.\"\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tloadFace: function ( data ) {\r\n\t\r\n\t\t\tvar family = data.familyName.toLowerCase();\r\n\t\r\n\t\t\tvar ThreeFont = this;\r\n\t\r\n\t\t\tThreeFont.faces[ family ] = ThreeFont.faces[ family ] || {};\r\n\t\r\n\t\t\tThreeFont.faces[ family ][ data.cssFontWeight ] = ThreeFont.faces[ family ][ data.cssFontWeight ] || {};\r\n\t\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\t\r\n\t\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\t\r\n\t\t\treturn data;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdrawText: function ( text ) {\r\n\t\r\n\t\t\t// RenderText\r\n\t\r\n\t\t\tvar i,\r\n\t\t\t\tface = this.getFace(),\r\n\t\t\t\tscale = this.size / face.resolution,\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tchars = String( text ).split( '' ),\r\n\t\t\t\tlength = chars.length;\r\n\t\r\n\t\t\tvar fontPaths = [];\r\n\t\r\n\t\t\tfor ( i = 0; i < length; i ++ ) {\r\n\t\r\n\t\t\t\tvar path = new THREE.Path();\r\n\t\r\n\t\t\t\tvar ret = this.extractGlyphPoints( chars[ i ], face, scale, offset, path );\r\n\t\t\t\toffset += ret.offset;\r\n\t\r\n\t\t\t\tfontPaths.push( ret.path );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// get the width\r\n\t\r\n\t\t\tvar width = offset / 2;\r\n\t\t\t//\r\n\t\t\t// for ( p = 0; p < allPts.length; p++ ) {\r\n\t\t\t//\r\n\t\t\t// \tallPts[ p ].x -= width;\r\n\t\t\t//\r\n\t\t\t// }\r\n\t\r\n\t\t\t//var extract = this.extractPoints( allPts, characterPts );\r\n\t\t\t//extract.contour = allPts;\r\n\t\r\n\t\t\t//extract.paths = fontPaths;\r\n\t\t\t//extract.offset = width;\r\n\t\r\n\t\t\treturn { paths: fontPaths, offset: width };\r\n\t\r\n\t\t},\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\textractGlyphPoints: function ( c, face, scale, offset, path ) {\r\n\t\r\n\t\t\tvar pts = [];\r\n\t\r\n\t\t\tvar i, i2, divisions,\r\n\t\t\t\toutline, action, length,\r\n\t\t\t\tscaleX, scaleY,\r\n\t\t\t\tx, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2,\r\n\t\t\t\tlaste,\r\n\t\t\t\tglyph = face.glyphs[ c ] || face.glyphs[ '?' ];\r\n\t\r\n\t\t\tif ( ! glyph ) return;\r\n\t\r\n\t\t\tif ( glyph.o ) {\r\n\t\r\n\t\t\t\toutline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\t\t\t\tlength = outline.length;\r\n\t\r\n\t\t\t\tscaleX = scale;\r\n\t\t\t\tscaleY = scale;\r\n\t\r\n\t\t\t\tfor ( i = 0; i < length; ) {\r\n\t\r\n\t\t\t\t\taction = outline[ i ++ ];\r\n\t\r\n\t\t\t\t\t//console.log( action );\r\n\t\r\n\t\t\t\t\tswitch ( action ) {\r\n\t\r\n\t\t\t\t\tcase 'm':\r\n\t\r\n\t\t\t\t\t\t// Move To\r\n\t\r\n\t\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\t\r\n\t\t\t\t\t\tpath.moveTo( x, y );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'l':\r\n\t\r\n\t\t\t\t\t\t// Line To\r\n\t\r\n\t\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\t\tpath.lineTo( x, y );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'q':\r\n\t\r\n\t\t\t\t\t\t// QuadraticCurveTo\r\n\t\r\n\t\t\t\t\t\tcpx  = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\t\tcpy  = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scaleY;\r\n\t\r\n\t\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\t\r\n\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\t\r\n\t\t\t\t\t\tif ( laste ) {\r\n\t\r\n\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\t\r\n\t\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\tTHREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\t\t\t\tTHREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'b':\r\n\t\r\n\t\t\t\t\t\t// Cubic Bezier Curve\r\n\t\r\n\t\t\t\t\t\tcpx  = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\t\tcpy  = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\t\tcpx1 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\t\tcpy1 = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\t\tcpx2 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\t\tcpy2 = outline[ i ++ ] *  scaleY;\r\n\t\r\n\t\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\t\r\n\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\t\r\n\t\t\t\t\t\tif ( laste ) {\r\n\t\r\n\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\t\r\n\t\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\tTHREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\t\t\t\tTHREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\r\n\t\t\treturn { offset: glyph.ha * scale, path: path };\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.FontUtils.generateShapes = function ( text, parameters ) {\r\n\t\r\n\t\t// Parameters\r\n\t\r\n\t\tparameters = parameters || {};\r\n\t\r\n\t\tvar size = parameters.size !== undefined ? parameters.size : 100;\r\n\t\tvar curveSegments = parameters.curveSegments !== undefined ? parameters.curveSegments : 4;\r\n\t\r\n\t\tvar font = parameters.font !== undefined ? parameters.font : 'helvetiker';\r\n\t\tvar weight = parameters.weight !== undefined ? parameters.weight : 'normal';\r\n\t\tvar style = parameters.style !== undefined ? parameters.style : 'normal';\r\n\t\r\n\t\tTHREE.FontUtils.size = size;\r\n\t\tTHREE.FontUtils.divisions = curveSegments;\r\n\t\r\n\t\tTHREE.FontUtils.face = font;\r\n\t\tTHREE.FontUtils.weight = weight;\r\n\t\tTHREE.FontUtils.style = style;\r\n\t\r\n\t\t// Get a Font data json object\r\n\t\r\n\t\tvar data = THREE.FontUtils.drawText( text );\r\n\t\r\n\t\tvar paths = data.paths;\r\n\t\tvar shapes = [];\r\n\t\r\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\t\r\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn shapes;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * This code is a quick port of code written in C++ which was submitted to\r\n\t * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n\t * See original code and more information here:\r\n\t * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n\t *\r\n\t * ported to actionscript by Zevan Rosser\r\n\t * www.actionsnippet.com\r\n\t *\r\n\t * ported to javascript by Joshua Koo\r\n\t * http://www.lab4games.net/zz85/blog\r\n\t *\r\n\t */\r\n\t\r\n\t\r\n\t( function ( namespace ) {\r\n\t\r\n\t\tvar EPSILON = 0.0000000001;\r\n\t\r\n\t\t// takes in an contour array and returns\r\n\t\r\n\t\tvar process = function ( contour, indices ) {\r\n\t\r\n\t\t\tvar n = contour.length;\r\n\t\r\n\t\t\tif ( n < 3 ) return null;\r\n\t\r\n\t\t\tvar result = [],\r\n\t\t\t\tverts = [],\r\n\t\t\t\tvertIndices = [];\r\n\t\r\n\t\t\t/* we want a counter-clockwise polygon in verts */\r\n\t\r\n\t\t\tvar u, v, w;\r\n\t\r\n\t\t\tif ( area( contour ) > 0.0 ) {\r\n\t\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar nv = n;\r\n\t\r\n\t\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\r\n\t\r\n\t\t\tvar count = 2 * nv;   /* error detection */\r\n\t\r\n\t\t\tfor ( v = nv - 1; nv > 2; ) {\r\n\t\r\n\t\t\t\t/* if we loop, it is probably a non-simple polygon */\r\n\t\r\n\t\t\t\tif ( ( count -- ) <= 0 ) {\r\n\t\r\n\t\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\r\n\t\r\n\t\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\r\n\t\t\t\t\t//return null;\r\n\t\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\r\n\t\t\t\t\tconsole.warn( 'THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()' );\r\n\t\r\n\t\t\t\t\tif ( indices ) return vertIndices;\r\n\t\t\t\t\treturn result;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\r\n\t\r\n\t\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\r\n\t\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\r\n\t\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\r\n\t\r\n\t\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\r\n\t\r\n\t\t\t\t\tvar a, b, c, s, t;\r\n\t\r\n\t\t\t\t\t/* true names of the vertices */\r\n\t\r\n\t\t\t\t\ta = verts[ u ];\r\n\t\t\t\t\tb = verts[ v ];\r\n\t\t\t\t\tc = verts[ w ];\r\n\t\r\n\t\t\t\t\t/* output Triangle */\r\n\t\r\n\t\t\t\t\tresult.push( [ contour[ a ],\r\n\t\t\t\t\t\tcontour[ b ],\r\n\t\t\t\t\t\tcontour[ c ] ] );\r\n\t\r\n\t\r\n\t\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\r\n\t\r\n\t\t\t\t\t/* remove v from the remaining polygon */\r\n\t\r\n\t\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\r\n\t\r\n\t\t\t\t\t\tverts[ s ] = verts[ t ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tnv --;\r\n\t\r\n\t\t\t\t\t/* reset error detection counter */\r\n\t\r\n\t\t\t\t\tcount = 2 * nv;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( indices ) return vertIndices;\r\n\t\t\treturn result;\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// calculate area of the contour polygon\r\n\t\r\n\t\tvar area = function ( contour ) {\r\n\t\r\n\t\t\tvar n = contour.length;\r\n\t\t\tvar a = 0.0;\r\n\t\r\n\t\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\t\r\n\t\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn a * 0.5;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tvar snip = function ( contour, u, v, w, n, verts ) {\r\n\t\r\n\t\t\tvar p;\r\n\t\t\tvar ax, ay, bx, by;\r\n\t\t\tvar cx, cy, px, py;\r\n\t\r\n\t\t\tax = contour[ verts[ u ] ].x;\r\n\t\t\tay = contour[ verts[ u ] ].y;\r\n\t\r\n\t\t\tbx = contour[ verts[ v ] ].x;\r\n\t\t\tby = contour[ verts[ v ] ].y;\r\n\t\r\n\t\t\tcx = contour[ verts[ w ] ].x;\r\n\t\t\tcy = contour[ verts[ w ] ].y;\r\n\t\r\n\t\t\tif ( EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\r\n\t\r\n\t\t\tvar aX, aY, bX, bY, cX, cY;\r\n\t\t\tvar apx, apy, bpx, bpy, cpx, cpy;\r\n\t\t\tvar cCROSSap, bCROSScp, aCROSSbp;\r\n\t\r\n\t\t\taX = cx - bx;  aY = cy - by;\r\n\t\t\tbX = ax - cx;  bY = ay - cy;\r\n\t\t\tcX = bx - ax;  cY = by - ay;\r\n\t\r\n\t\t\tfor ( p = 0; p < n; p ++ ) {\r\n\t\r\n\t\t\t\tpx = contour[ verts[ p ] ].x;\r\n\t\t\t\tpy = contour[ verts[ p ] ].y;\r\n\t\r\n\t\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\r\n\t\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\r\n\t\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\r\n\t\r\n\t\t\t\tapx = px - ax;  apy = py - ay;\r\n\t\t\t\tbpx = px - bx;  bpy = py - by;\r\n\t\t\t\tcpx = px - cx;  cpy = py - cy;\r\n\t\r\n\t\t\t\t// see if p is inside triangle abc\r\n\t\r\n\t\t\t\taCROSSbp = aX * bpy - aY * bpx;\r\n\t\t\t\tcCROSSap = cX * apy - cY * apx;\r\n\t\t\t\tbCROSScp = bX * cpy - bY * cpx;\r\n\t\r\n\t\t\t\tif ( ( aCROSSbp >= - EPSILON ) && ( bCROSScp >= - EPSILON ) && ( cCROSSap >= - EPSILON ) ) return false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t};\r\n\t\r\n\t\r\n\t\tnamespace.Triangulate = process;\r\n\t\tnamespace.Triangulate.area = area;\r\n\t\r\n\t\treturn namespace;\r\n\t\r\n\t} )( THREE.FontUtils );\r\n\t\r\n\t// To use the typeface.js face files, hook up the API\r\n\t\r\n\tTHREE.typeface_js = { faces: THREE.FontUtils.faces, loadFace: THREE.FontUtils.loadFace };\r\n\tif ( typeof self !== 'undefined' ) self._typeface_js = THREE.typeface_js;\r\n\t\r\n\t// File:src/extras/audio/Audio.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Audio = function ( listener ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Audio';\r\n\t\r\n\t\tthis.context = listener.context;\r\n\t\tthis.source = this.context.createBufferSource();\r\n\t\tthis.source.onended = this.onEnded.bind( this );\r\n\t\r\n\t\tthis.gain = this.context.createGain();\r\n\t\tthis.gain.connect( this.context.destination );\r\n\t\r\n\t\tthis.panner = this.context.createPanner();\r\n\t\tthis.panner.connect( this.gain );\r\n\t\r\n\t\tthis.autoplay = false;\r\n\t\r\n\t\tthis.startTime = 0;\r\n\t\tthis.playbackRate = 1;\r\n\t\tthis.isPlaying = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Audio.prototype.constructor = THREE.Audio;\r\n\t\r\n\tTHREE.Audio.prototype.load = function ( file ) {\r\n\t\r\n\t\tvar scope = this;\r\n\t\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.open( 'GET', file, true );\r\n\t\trequest.responseType = 'arraybuffer';\r\n\t\trequest.onload = function ( e ) {\r\n\t\r\n\t\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\r\n\t\r\n\t\t\t\tscope.source.buffer = buffer;\r\n\t\r\n\t\t\t\tif ( scope.autoplay ) scope.play();\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t};\r\n\t\trequest.send();\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.play = function () {\r\n\t\r\n\t\tif ( this.isPlaying === true ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\t\treturn;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar source = this.context.createBufferSource();\r\n\t\r\n\t\tsource.buffer = this.source.buffer;\r\n\t\tsource.loop = this.source.loop;\r\n\t\tsource.onended = this.source.onended;\r\n\t\tsource.start( 0, this.startTime );\r\n\t\tsource.playbackRate.value = this.playbackRate;\r\n\t\r\n\t\tthis.isPlaying = true;\r\n\t\r\n\t\tthis.source = source;\r\n\t\r\n\t\tthis.connect();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.pause = function () {\r\n\t\r\n\t\tthis.source.stop();\r\n\t\tthis.startTime = this.context.currentTime;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.stop = function () {\r\n\t\r\n\t\tthis.source.stop();\r\n\t\tthis.startTime = 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.connect = function () {\r\n\t\r\n\t\tif ( this.filter !== undefined ) {\r\n\t\r\n\t\t\tthis.source.connect( this.filter );\r\n\t\t\tthis.filter.connect( this.panner );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.source.connect( this.panner );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.disconnect = function () {\r\n\t\r\n\t\tif ( this.filter !== undefined ) {\r\n\t\r\n\t\t\tthis.source.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.panner );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.source.disconnect( this.panner );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setFilter = function ( value ) {\r\n\t\r\n\t\tif ( this.isPlaying === true ) {\r\n\t\r\n\t\t\tthis.disconnect();\r\n\t\t\tthis.filter = value;\r\n\t\t\tthis.connect();\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.filter = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getFilter = function () {\r\n\t\r\n\t\treturn this.filter;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setPlaybackRate = function ( value ) {\r\n\t\r\n\t\tthis.playbackRate = value;\r\n\t\r\n\t\tif ( this.isPlaying === true ) {\r\n\t\r\n\t\t\tthis.source.playbackRate.value = this.playbackRate;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getPlaybackRate = function () {\r\n\t\r\n\t\treturn this.playbackRate;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.onEnded = function() {\r\n\t\r\n\t\tthis.isPlaying = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setLoop = function ( value ) {\r\n\t\r\n\t\tthis.source.loop = value;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getLoop = function () {\r\n\t\r\n\t\treturn this.source.loop;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setRefDistance = function ( value ) {\r\n\t\r\n\t\tthis.panner.refDistance = value;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getRefDistance = function () {\r\n\t\r\n\t\treturn this.panner.refDistance;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setRolloffFactor = function ( value ) {\r\n\t\r\n\t\tthis.panner.rolloffFactor = value;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getRolloffFactor = function () {\r\n\t\r\n\t\treturn this.panner.rolloffFactor;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setVolume = function ( value ) {\r\n\t\r\n\t\tthis.gain.gain.value = value;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getVolume = function () {\r\n\t\r\n\t\treturn this.gain.gain.value;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.updateMatrixWorld = ( function () {\r\n\t\r\n\t\tvar position = new THREE.Vector3();\r\n\t\r\n\t\treturn function updateMatrixWorld( force ) {\r\n\t\r\n\t\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\t\r\n\t\t\tposition.setFromMatrixPosition( this.matrixWorld );\r\n\t\r\n\t\t\tthis.panner.setPosition( position.x, position.y, position.z );\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/extras/audio/AudioListener.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.AudioListener = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'AudioListener';\r\n\t\r\n\t\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.AudioListener.prototype.constructor = THREE.AudioListener;\r\n\t\r\n\tTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\r\n\t\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\t\tvar scale = new THREE.Vector3();\r\n\t\r\n\t\tvar orientation = new THREE.Vector3();\r\n\t\r\n\t\treturn function updateMatrixWorld( force ) {\r\n\t\r\n\t\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\t\r\n\t\t\tvar listener = this.context.listener;\r\n\t\t\tvar up = this.up;\r\n\t\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, scale );\r\n\t\r\n\t\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\t\r\n\t\t\tlistener.setPosition( position.x, position.y, position.z );\r\n\t\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/extras/core/Curve.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * Extensible curve object\r\n\t *\r\n\t * Some common of Curve methods\r\n\t * .getPoint(t), getTangent(t)\r\n\t * .getPointAt(u), getTagentAt(u)\r\n\t * .getPoints(), .getSpacedPoints()\r\n\t * .getLength()\r\n\t * .updateArcLengths()\r\n\t *\r\n\t * This following classes subclasses THREE.Curve:\r\n\t *\r\n\t * -- 2d classes --\r\n\t * THREE.LineCurve\r\n\t * THREE.QuadraticBezierCurve\r\n\t * THREE.CubicBezierCurve\r\n\t * THREE.SplineCurve\r\n\t * THREE.ArcCurve\r\n\t * THREE.EllipseCurve\r\n\t *\r\n\t * -- 3d classes --\r\n\t * THREE.LineCurve3\r\n\t * THREE.QuadraticBezierCurve3\r\n\t * THREE.CubicBezierCurve3\r\n\t * THREE.SplineCurve3\r\n\t * THREE.ClosedSplineCurve3\r\n\t *\r\n\t * A series of curves can be represented as a THREE.CurvePath\r\n\t *\r\n\t **/\r\n\t\r\n\t/**************************************************************\r\n\t *\tAbstract Curve base class\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.Curve = function () {\r\n\t\r\n\t};\r\n\t\r\n\t// Virtual base class method to overwrite and implement in subclasses\r\n\t//\t- t [0 .. 1]\r\n\t\r\n\tTHREE.Curve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tconsole.warn( \"THREE.Curve: Warning, getPoint() not implemented!\" );\r\n\t\treturn null;\r\n\t\r\n\t};\r\n\t\r\n\t// Get point at relative position in curve according to arc length\r\n\t// - u [0 .. 1]\r\n\t\r\n\tTHREE.Curve.prototype.getPointAt = function ( u ) {\r\n\t\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getPoint( t );\r\n\t\r\n\t};\r\n\t\r\n\t// Get sequence of points using getPoint( t )\r\n\t\r\n\tTHREE.Curve.prototype.getPoints = function ( divisions ) {\r\n\t\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\t\r\n\t\tvar d, pts = [];\r\n\t\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\t\r\n\t\t\tpts.push( this.getPoint( d / divisions ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn pts;\r\n\t\r\n\t};\r\n\t\r\n\t// Get sequence of points using getPointAt( u )\r\n\t\r\n\tTHREE.Curve.prototype.getSpacedPoints = function ( divisions ) {\r\n\t\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\t\r\n\t\tvar d, pts = [];\r\n\t\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\t\r\n\t\t\tpts.push( this.getPointAt( d / divisions ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn pts;\r\n\t\r\n\t};\r\n\t\r\n\t// Get total curve arc length\r\n\t\r\n\tTHREE.Curve.prototype.getLength = function () {\r\n\t\r\n\t\tvar lengths = this.getLengths();\r\n\t\treturn lengths[ lengths.length - 1 ];\r\n\t\r\n\t};\r\n\t\r\n\t// Get list of cumulative segment lengths\r\n\t\r\n\tTHREE.Curve.prototype.getLengths = function ( divisions ) {\r\n\t\r\n\t\tif ( ! divisions ) divisions = ( this.__arcLengthDivisions ) ? ( this.__arcLengthDivisions ) : 200;\r\n\t\r\n\t\tif ( this.cacheArcLengths\r\n\t\t\t&& ( this.cacheArcLengths.length === divisions + 1 )\r\n\t\t\t&& ! this.needsUpdate ) {\r\n\t\r\n\t\t\t//console.log( \"cached\", this.cacheArcLengths );\r\n\t\t\treturn this.cacheArcLengths;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.needsUpdate = false;\r\n\t\r\n\t\tvar cache = [];\r\n\t\tvar current, last = this.getPoint( 0 );\r\n\t\tvar p, sum = 0;\r\n\t\r\n\t\tcache.push( 0 );\r\n\t\r\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\r\n\t\r\n\t\t\tcurrent = this.getPoint ( p / divisions );\r\n\t\t\tsum += current.distanceTo( last );\r\n\t\t\tcache.push( sum );\r\n\t\t\tlast = current;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.cacheArcLengths = cache;\r\n\t\r\n\t\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.Curve.prototype.updateArcLengths = function() {\r\n\t\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.getLengths();\r\n\t\r\n\t};\r\n\t\r\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\t\r\n\tTHREE.Curve.prototype.getUtoTmapping = function ( u, distance ) {\r\n\t\r\n\t\tvar arcLengths = this.getLengths();\r\n\t\r\n\t\tvar i = 0, il = arcLengths.length;\r\n\t\r\n\t\tvar targetArcLength; // The targeted u distance value to get\r\n\t\r\n\t\tif ( distance ) {\r\n\t\r\n\t\t\ttargetArcLength = distance;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\t\r\n\t\t}\r\n\t\r\n\t\t//var time = Date.now();\r\n\t\r\n\t\t// binary search for the index with largest value smaller than target u distance\r\n\t\r\n\t\tvar low = 0, high = il - 1, comparison;\r\n\t\r\n\t\twhile ( low <= high ) {\r\n\t\r\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\t\r\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\t\r\n\t\t\tif ( comparison < 0 ) {\r\n\t\r\n\t\t\t\tlow = i + 1;\r\n\t\r\n\t\t\t} else if ( comparison > 0 ) {\r\n\t\r\n\t\t\t\thigh = i - 1;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\thigh = i;\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t// DONE\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\ti = high;\r\n\t\r\n\t\t//console.log('b' , i, low, high, Date.now()- time);\r\n\t\r\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\t\r\n\t\t\tvar t = i / ( il - 1 );\r\n\t\t\treturn t;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\t\r\n\t\tvar lengthBefore = arcLengths[ i ];\r\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\r\n\t\r\n\t\tvar segmentLength = lengthAfter - lengthBefore;\r\n\t\r\n\t\t// determine where we are between the 'before' and 'after' points\r\n\t\r\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\t\r\n\t\t// add that fractional amount to t\r\n\t\r\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\r\n\t\r\n\t\treturn t;\r\n\t\r\n\t};\r\n\t\r\n\t// Returns a unit vector tangent at t\r\n\t// In case any sub curve does not implement its tangent derivation,\r\n\t// 2 points a small delta apart will be used to find its gradient\r\n\t// which seems to give a reasonable approximation\r\n\t\r\n\tTHREE.Curve.prototype.getTangent = function( t ) {\r\n\t\r\n\t\tvar delta = 0.0001;\r\n\t\tvar t1 = t - delta;\r\n\t\tvar t2 = t + delta;\r\n\t\r\n\t\t// Capping in case of danger\r\n\t\r\n\t\tif ( t1 < 0 ) t1 = 0;\r\n\t\tif ( t2 > 1 ) t2 = 1;\r\n\t\r\n\t\tvar pt1 = this.getPoint( t1 );\r\n\t\tvar pt2 = this.getPoint( t2 );\r\n\t\r\n\t\tvar vec = pt2.clone().sub( pt1 );\r\n\t\treturn vec.normalize();\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.Curve.prototype.getTangentAt = function ( u ) {\r\n\t\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getTangent( t );\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t/**************************************************************\r\n\t *\tUtils\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.Curve.Utils = {\r\n\t\r\n\t\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\r\n\t\r\n\t\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Puay Bing, thanks for helping with this derivative!\r\n\t\r\n\t\ttangentCubicBezier: function ( t, p0, p1, p2, p3 ) {\r\n\t\r\n\t\t\treturn - 3 * p0 * ( 1 - t ) * ( 1 - t )  +\r\n\t\t\t\t3 * p1 * ( 1 - t ) * ( 1 - t ) - 6 * t * p1 * ( 1 - t ) +\r\n\t\t\t\t6 * t *  p2 * ( 1 - t ) - 3 * t * t * p2 +\r\n\t\t\t\t3 * t * t * p3;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\r\n\t\r\n\t\t\t// To check if my formulas are correct\r\n\t\r\n\t\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3 − 3t^2 + 1\r\n\t\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3 − 2t^2 + t\r\n\t\t\tvar h01 = - 6 * t * t + 6 * t; \t// − 2t3 + 3t2\r\n\t\t\tvar h11 = 3 * t * t - 2 * t;\t// t3 − t2\r\n\t\r\n\t\t\treturn h00 + h10 + h01 + h11;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Catmull-Rom\r\n\t\r\n\t\tinterpolate: function( p0, p1, p2, p3, t ) {\r\n\t\r\n\t\t\tvar v0 = ( p2 - p0 ) * 0.5;\r\n\t\t\tvar v1 = ( p3 - p1 ) * 0.5;\r\n\t\t\tvar t2 = t * t;\r\n\t\t\tvar t3 = t * t2;\r\n\t\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t// TODO: Transformation for Curves?\r\n\t\r\n\t/**************************************************************\r\n\t *\t3D Curves\r\n\t **************************************************************/\r\n\t\r\n\t// A Factory method for creating new curve subclasses\r\n\t\r\n\tTHREE.Curve.create = function ( constructor, getPointFunc ) {\r\n\t\r\n\t\tconstructor.prototype = Object.create( THREE.Curve.prototype );\r\n\t\tconstructor.prototype.constructor = constructor;\r\n\t\tconstructor.prototype.getPoint = getPointFunc;\r\n\t\r\n\t\treturn constructor;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/core/CurvePath.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t *\r\n\t **/\r\n\t\r\n\t/**************************************************************\r\n\t *\tCurved Path - a curve path is simply a array of connected\r\n\t *  curves, but retains the api of a curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.CurvePath = function () {\r\n\t\r\n\t\tthis.curves = [];\r\n\t\tthis.bends = [];\r\n\t\r\n\t\tthis.autoClose = false; // Automatically closes the path\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.CurvePath.prototype.constructor = THREE.CurvePath;\r\n\t\r\n\tTHREE.CurvePath.prototype.add = function ( curve ) {\r\n\t\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype.checkConnection = function() {\r\n\t\t// TODO\r\n\t\t// If the ending of curve is not connected to the starting\r\n\t\t// or the next curve, then, this is not a real path\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype.closePath = function() {\r\n\t\r\n\t\t// TODO Test\r\n\t\t// and verify for vector3 (needs to implement equals)\r\n\t\t// Add a line curve if start and end of lines are not connected\r\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\t\r\n\t\tif ( ! startPoint.equals( endPoint ) ) {\r\n\t\r\n\t\t\tthis.curves.push( new THREE.LineCurve( endPoint, startPoint ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// To get accurate point with reference to\r\n\t// entire path distance at time t,\r\n\t// following has to be done:\r\n\t\r\n\t// 1. Length of each sub path have to be known\r\n\t// 2. Locate and identify type of curve\r\n\t// 3. Get t for the curve\r\n\t// 4. Return curve.getPointAt(t')\r\n\t\r\n\tTHREE.CurvePath.prototype.getPoint = function( t ) {\r\n\t\r\n\t\tvar d = t * this.getLength();\r\n\t\tvar curveLengths = this.getCurveLengths();\r\n\t\tvar i = 0, diff, curve;\r\n\t\r\n\t\t// To think about boundaries points.\r\n\t\r\n\t\twhile ( i < curveLengths.length ) {\r\n\t\r\n\t\t\tif ( curveLengths[ i ] >= d ) {\r\n\t\r\n\t\t\t\tdiff = curveLengths[ i ] - d;\r\n\t\t\t\tcurve = this.curves[ i ];\r\n\t\r\n\t\t\t\tvar u = 1 - diff / curve.getLength();\r\n\t\r\n\t\t\t\treturn curve.getPointAt( u );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\ti ++;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn null;\r\n\t\r\n\t\t// loop where sum != 0, sum > d , sum+1 <d\r\n\t\r\n\t};\r\n\t\r\n\t/*\r\n\tTHREE.CurvePath.prototype.getTangent = function( t ) {\r\n\t};*/\r\n\t\r\n\t\r\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n\t// getPoint() depends on getLength\r\n\t\r\n\tTHREE.CurvePath.prototype.getLength = function() {\r\n\t\r\n\t\tvar lens = this.getCurveLengths();\r\n\t\treturn lens[ lens.length - 1 ];\r\n\t\r\n\t};\r\n\t\r\n\t// Compute lengths and cache them\r\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\t\r\n\tTHREE.CurvePath.prototype.getCurveLengths = function() {\r\n\t\r\n\t\t// We use cache values if curves and cache array are same length\r\n\t\r\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\t\r\n\t\t\treturn this.cacheLengths;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Get length of sub-curve\r\n\t\t// Push sums into cached array\r\n\t\r\n\t\tvar lengths = [], sums = 0;\r\n\t\tvar i, il = this.curves.length;\r\n\t\r\n\t\tfor ( i = 0; i < il; i ++ ) {\r\n\t\r\n\t\t\tsums += this.curves[ i ].getLength();\r\n\t\t\tlengths.push( sums );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.cacheLengths = lengths;\r\n\t\r\n\t\treturn lengths;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// Returns min and max coordinates\r\n\t\r\n\tTHREE.CurvePath.prototype.getBoundingBox = function () {\r\n\t\r\n\t\tvar points = this.getPoints();\r\n\t\r\n\t\tvar maxX, maxY, maxZ;\r\n\t\tvar minX, minY, minZ;\r\n\t\r\n\t\tmaxX = maxY = Number.NEGATIVE_INFINITY;\r\n\t\tminX = minY = Number.POSITIVE_INFINITY;\r\n\t\r\n\t\tvar p, i, il, sum;\r\n\t\r\n\t\tvar v3 = points[ 0 ] instanceof THREE.Vector3;\r\n\t\r\n\t\tsum = v3 ? new THREE.Vector3() : new THREE.Vector2();\r\n\t\r\n\t\tfor ( i = 0, il = points.length; i < il; i ++ ) {\r\n\t\r\n\t\t\tp = points[ i ];\r\n\t\r\n\t\t\tif ( p.x > maxX ) maxX = p.x;\r\n\t\t\telse if ( p.x < minX ) minX = p.x;\r\n\t\r\n\t\t\tif ( p.y > maxY ) maxY = p.y;\r\n\t\t\telse if ( p.y < minY ) minY = p.y;\r\n\t\r\n\t\t\tif ( v3 ) {\r\n\t\r\n\t\t\t\tif ( p.z > maxZ ) maxZ = p.z;\r\n\t\t\t\telse if ( p.z < minZ ) minZ = p.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tsum.add( p );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar ret = {\r\n\t\r\n\t\t\tminX: minX,\r\n\t\t\tminY: minY,\r\n\t\t\tmaxX: maxX,\r\n\t\t\tmaxY: maxY\r\n\t\r\n\t\t};\r\n\t\r\n\t\tif ( v3 ) {\r\n\t\r\n\t\t\tret.maxZ = maxZ;\r\n\t\t\tret.minZ = minZ;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn ret;\r\n\t\r\n\t};\r\n\t\r\n\t/**************************************************************\r\n\t *\tCreate Geometries Helpers\r\n\t **************************************************************/\r\n\t\r\n\t/// Generate geometry from path points (for Line or Points objects)\r\n\t\r\n\tTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\r\n\t\r\n\t\tvar pts = this.getPoints( divisions, true );\r\n\t\treturn this.createGeometry( pts );\r\n\t\r\n\t};\r\n\t\r\n\t// Generate geometry from equidistant sampling along the path\r\n\t\r\n\tTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\r\n\t\r\n\t\tvar pts = this.getSpacedPoints( divisions, true );\r\n\t\treturn this.createGeometry( pts );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype.createGeometry = function( points ) {\r\n\t\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\r\n\t\tfor ( var i = 0; i < points.length; i ++ ) {\r\n\t\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3( points[ i ].x, points[ i ].y, points[ i ].z || 0 ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t/**************************************************************\r\n\t *\tBend / Wrap Helper Methods\r\n\t **************************************************************/\r\n\t\r\n\t// Wrap path / Bend modifiers?\r\n\t\r\n\tTHREE.CurvePath.prototype.addWrapPath = function ( bendpath ) {\r\n\t\r\n\t\tthis.bends.push( bendpath );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype.getTransformedPoints = function( segments, bends ) {\r\n\t\r\n\t\tvar oldPts = this.getPoints( segments ); // getPoints getSpacedPoints\r\n\t\tvar i, il;\r\n\t\r\n\t\tif ( ! bends ) {\r\n\t\r\n\t\t\tbends = this.bends;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\t\r\n\t\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn oldPts;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype.getTransformedSpacedPoints = function( segments, bends ) {\r\n\t\r\n\t\tvar oldPts = this.getSpacedPoints( segments );\r\n\t\r\n\t\tvar i, il;\r\n\t\r\n\t\tif ( ! bends ) {\r\n\t\r\n\t\t\tbends = this.bends;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\t\r\n\t\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn oldPts;\r\n\t\r\n\t};\r\n\t\r\n\t// This returns getPoints() bend/wrapped around the contour of a path.\r\n\t// Read http://www.planetclegg.com/projects/WarpingTextToSplines.html\r\n\t\r\n\tTHREE.CurvePath.prototype.getWrapPoints = function ( oldPts, path ) {\r\n\t\r\n\t\tvar bounds = this.getBoundingBox();\r\n\t\r\n\t\tvar i, il, p, oldX, oldY, xNorm;\r\n\t\r\n\t\tfor ( i = 0, il = oldPts.length; i < il; i ++ ) {\r\n\t\r\n\t\t\tp = oldPts[ i ];\r\n\t\r\n\t\t\toldX = p.x;\r\n\t\t\toldY = p.y;\r\n\t\r\n\t\t\txNorm = oldX / bounds.maxX;\r\n\t\r\n\t\t\t// If using actual distance, for length > path, requires line extrusions\r\n\t\t\t//xNorm = path.getUtoTmapping(xNorm, oldX); // 3 styles. 1) wrap stretched. 2) wrap stretch by arc length 3) warp by actual distance\r\n\t\r\n\t\t\txNorm = path.getUtoTmapping( xNorm, oldX );\r\n\t\r\n\t\t\t// check for out of bounds?\r\n\t\r\n\t\t\tvar pathPt = path.getPoint( xNorm );\r\n\t\t\tvar normal = path.getTangent( xNorm );\r\n\t\t\tnormal.set( - normal.y, normal.x ).multiplyScalar( oldY );\r\n\t\r\n\t\t\tp.x = pathPt.x + normal.x;\r\n\t\t\tp.y = pathPt.y + normal.y;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn oldPts;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/core/Path.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * Creates free form 2d path using series of points, lines or curves.\r\n\t *\r\n\t **/\r\n\t\r\n\tTHREE.Path = function ( points ) {\r\n\t\r\n\t\tTHREE.CurvePath.call( this );\r\n\t\r\n\t\tthis.actions = [];\r\n\t\r\n\t\tif ( points ) {\r\n\t\r\n\t\t\tthis.fromPoints( points );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\r\n\tTHREE.Path.prototype.constructor = THREE.Path;\r\n\t\r\n\tTHREE.PathActions = {\r\n\t\r\n\t\tMOVE_TO: 'moveTo',\r\n\t\tLINE_TO: 'lineTo',\r\n\t\tQUADRATIC_CURVE_TO: 'quadraticCurveTo', // Bezier quadratic curve\r\n\t\tBEZIER_CURVE_TO: 'bezierCurveTo', \t\t// Bezier cubic curve\r\n\t\tCSPLINE_THRU: 'splineThru',\t\t\t\t// Catmull-Rom spline\r\n\t\tARC: 'arc',\t\t\t\t\t\t\t\t// Circle\r\n\t\tELLIPSE: 'ellipse'\r\n\t};\r\n\t\r\n\t// TODO Clean up PATH API\r\n\t\r\n\t// Create path using straight lines to connect all points\r\n\t// - vectors: array of Vector2\r\n\t\r\n\tTHREE.Path.prototype.fromPoints = function ( vectors ) {\r\n\t\r\n\t\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\r\n\t\r\n\t\tfor ( var v = 1, vlen = vectors.length; v < vlen; v ++ ) {\r\n\t\r\n\t\t\tthis.lineTo( vectors[ v ].x, vectors[ v ].y );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// startPath() endPath()?\r\n\t\r\n\tTHREE.Path.prototype.moveTo = function ( x, y ) {\r\n\t\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\tthis.actions.push( { action: THREE.PathActions.MOVE_TO, args: args } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Path.prototype.lineTo = function ( x, y ) {\r\n\t\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\r\n\t\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t\tthis.actions.push( { action: THREE.PathActions.LINE_TO, args: args } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\r\n\t\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\r\n\t\tvar curve = new THREE.QuadraticBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCPx, aCPy ),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t\tthis.actions.push( { action: THREE.PathActions.QUADRATIC_CURVE_TO, args: args } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y,\r\n\t\t\t\t\t\t\t\t\t\t\t\t   aCP2x, aCP2y,\r\n\t\t\t\t\t\t\t\t\t\t\t\t   aX, aY ) {\r\n\t\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\r\n\t\tvar curve = new THREE.CubicBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t\tthis.actions.push( { action: THREE.PathActions.BEZIER_CURVE_TO, args: args } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\r\n\t\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\t//---\r\n\t\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\r\n\t\tArray.prototype.push.apply( npts, pts );\r\n\t\r\n\t\tvar curve = new THREE.SplineCurve( npts );\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t\tthis.actions.push( { action: THREE.PathActions.CSPLINE_THRU, args: args } );\r\n\t\r\n\t};\r\n\t\r\n\t// FUTURE: Change the API or follow canvas API?\r\n\t\r\n\tTHREE.Path.prototype.arc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\t\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\r\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\t\taStartAngle, aEndAngle, aClockwise );\r\n\t\r\n\t };\r\n\t\r\n\t THREE.Path.prototype.absarc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\t\r\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\t\r\n\t };\r\n\t\r\n\tTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\t\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\r\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius,\r\n\t\t\taStartAngle, aEndAngle, aClockwise, aRotation );\r\n\t\r\n\t };\r\n\t\r\n\t\r\n\tTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\t\r\n\t\tvar args = [\r\n\t\t\taX, aY,\r\n\t\t\txRadius, yRadius,\r\n\t\t\taStartAngle, aEndAngle,\r\n\t\t\taClockwise,\r\n\t\t\taRotation || 0 // aRotation is optional.\r\n\t\t];\r\n\t\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t\taStartAngle, aEndAngle, aClockwise, aRotation );\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t\tvar lastPoint = curve.getPoint( 1 );\r\n\t\targs.push( lastPoint.x );\r\n\t\targs.push( lastPoint.y );\r\n\t\r\n\t\tthis.actions.push( { action: THREE.PathActions.ELLIPSE, args: args } );\r\n\t\r\n\t };\r\n\t\r\n\tTHREE.Path.prototype.getSpacedPoints = function ( divisions, closedPath ) {\r\n\t\r\n\t\tif ( ! divisions ) divisions = 40;\r\n\t\r\n\t\tvar points = [];\r\n\t\r\n\t\tfor ( var i = 0; i < divisions; i ++ ) {\r\n\t\r\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\t\r\n\t\t\t//if( !this.getPoint( i / divisions ) ) throw \"DIE\";\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// if ( closedPath ) {\r\n\t\t//\r\n\t\t// \tpoints.push( points[ 0 ] );\r\n\t\t//\r\n\t\t// }\r\n\t\r\n\t\treturn points;\r\n\t\r\n\t};\r\n\t\r\n\t/* Return an array of vectors based on contour of the path */\r\n\t\r\n\tTHREE.Path.prototype.getPoints = function( divisions, closedPath ) {\r\n\t\r\n\t\tif ( this.useSpacedPoints ) {\r\n\t\r\n\t\t\treturn this.getSpacedPoints( divisions, closedPath );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tdivisions = divisions || 12;\r\n\t\r\n\t\tvar points = [];\r\n\t\r\n\t\tvar i, il, item, action, args;\r\n\t\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\r\n\t\t\tlaste, j,\r\n\t\t\tt, tx, ty;\r\n\t\r\n\t\tfor ( i = 0, il = this.actions.length; i < il; i ++ ) {\r\n\t\r\n\t\t\titem = this.actions[ i ];\r\n\t\r\n\t\t\taction = item.action;\r\n\t\t\targs = item.args;\r\n\t\r\n\t\t\tswitch ( action ) {\r\n\t\r\n\t\t\tcase THREE.PathActions.MOVE_TO:\r\n\t\r\n\t\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.LINE_TO:\r\n\t\r\n\t\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.QUADRATIC_CURVE_TO:\r\n\t\r\n\t\t\t\tcpx  = args[ 2 ];\r\n\t\t\t\tcpy  = args[ 3 ];\r\n\t\r\n\t\t\t\tcpx1 = args[ 0 ];\r\n\t\t\t\tcpy1 = args[ 1 ];\r\n\t\r\n\t\t\t\tif ( points.length > 0 ) {\r\n\t\r\n\t\t\t\t\tlaste = points[ points.length - 1 ];\r\n\t\r\n\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\tcpy0 = laste.y;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\t\r\n\t\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\t\r\n\t\t\t\t\tt = j / divisions;\r\n\t\r\n\t\t\t\t\ttx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\tty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\t\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.BEZIER_CURVE_TO:\r\n\t\r\n\t\t\t\tcpx  = args[ 4 ];\r\n\t\t\t\tcpy  = args[ 5 ];\r\n\t\r\n\t\t\t\tcpx1 = args[ 0 ];\r\n\t\t\t\tcpy1 = args[ 1 ];\r\n\t\r\n\t\t\t\tcpx2 = args[ 2 ];\r\n\t\t\t\tcpy2 = args[ 3 ];\r\n\t\r\n\t\t\t\tif ( points.length > 0 ) {\r\n\t\r\n\t\t\t\t\tlaste = points[ points.length - 1 ];\r\n\t\r\n\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\tcpy0 = laste.y;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\t\r\n\t\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\t\r\n\t\t\t\t\tt = j / divisions;\r\n\t\r\n\t\t\t\t\ttx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\tty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\t\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.CSPLINE_THRU:\r\n\t\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\t\r\n\t\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\r\n\t\t\t\tvar spts = [ last ];\r\n\t\r\n\t\t\t\tvar n = divisions * args[ 0 ].length;\r\n\t\r\n\t\t\t\tspts = spts.concat( args[ 0 ] );\r\n\t\r\n\t\t\t\tvar spline = new THREE.SplineCurve( spts );\r\n\t\r\n\t\t\t\tfor ( j = 1; j <= n; j ++ ) {\r\n\t\r\n\t\t\t\t\tpoints.push( spline.getPointAt( j / n ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.ARC:\r\n\t\r\n\t\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\t\taRadius = args[ 2 ],\r\n\t\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\r\n\t\t\t\t\taClockwise = !! args[ 5 ];\r\n\t\r\n\t\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\t\tvar angle;\r\n\t\t\t\tvar tdivisions = divisions * 2;\r\n\t\r\n\t\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\t\r\n\t\t\t\t\tt = j / tdivisions;\r\n\t\r\n\t\t\t\t\tif ( ! aClockwise ) {\r\n\t\r\n\t\t\t\t\t\tt = 1 - t;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\t\r\n\t\t\t\t\ttx = aX + aRadius * Math.cos( angle );\r\n\t\t\t\t\tty = aY + aRadius * Math.sin( angle );\r\n\t\r\n\t\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\t\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t//console.log(points);\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.ELLIPSE:\r\n\t\r\n\t\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\t\txRadius = args[ 2 ],\r\n\t\t\t\t\tyRadius = args[ 3 ],\r\n\t\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\r\n\t\t\t\t\taClockwise = !! args[ 6 ],\r\n\t\t\t\t\taRotation = args[ 7 ];\r\n\t\r\n\t\r\n\t\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\t\tvar angle;\r\n\t\t\t\tvar tdivisions = divisions * 2;\r\n\t\r\n\t\t\t\tvar cos, sin;\r\n\t\t\t\tif ( aRotation !== 0 ) {\r\n\t\t\t\r\n\t\t\t\t\tcos = Math.cos( aRotation );\r\n\t\t\t\t\tsin = Math.sin( aRotation );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\t\r\n\t\t\t\t\tt = j / tdivisions;\r\n\t\r\n\t\t\t\t\tif ( ! aClockwise ) {\r\n\t\r\n\t\t\t\t\t\tt = 1 - t;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\t\r\n\t\t\t\t\ttx = aX + xRadius * Math.cos( angle );\r\n\t\t\t\t\tty = aY + yRadius * Math.sin( angle );\r\n\t\r\n\t\t\t\t\tif ( aRotation !== 0 ) {\r\n\t\r\n\t\t\t\t\t\tvar x = tx, y = ty;\r\n\t\r\n\t\t\t\t\t\t// Rotate the point about the center of the ellipse.\r\n\t\t\t\t\t\ttx = ( x - aX ) * cos - ( y - aY ) * sin + aX;\r\n\t\t\t\t\t\tty = ( x - aX ) * sin + ( y - aY ) * cos + aY;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\t\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t//console.log(points);\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\t} // end switch\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\r\n\t\t// Normalize to remove the closing point by default.\r\n\t\tvar lastPoint = points[ points.length - 1 ];\r\n\t\tvar EPSILON = 0.0000000001;\r\n\t\tif ( Math.abs( lastPoint.x - points[ 0 ].x ) < EPSILON &&\r\n\t\t\t\t Math.abs( lastPoint.y - points[ 0 ].y ) < EPSILON )\r\n\t\t\tpoints.splice( points.length - 1, 1 );\r\n\t\tif ( closedPath ) {\r\n\t\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn points;\r\n\t\r\n\t};\r\n\t\r\n\t//\r\n\t// Breaks path into shapes\r\n\t//\r\n\t//\tAssumptions (if parameter isCCW==true the opposite holds):\r\n\t//\t- solid shapes are defined clockwise (CW)\r\n\t//\t- holes are defined counterclockwise (CCW)\r\n\t//\r\n\t//\tIf parameter noHoles==true:\r\n\t//  - all subPaths are regarded as solid shapes\r\n\t//  - definition order CW/CCW has no relevance\r\n\t//\r\n\t\r\n\tTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\r\n\t\r\n\t\tfunction extractSubpaths( inActions ) {\r\n\t\r\n\t\t\tvar i, il, item, action, args;\r\n\t\r\n\t\t\tvar subPaths = [], lastPath = new THREE.Path();\r\n\t\r\n\t\t\tfor ( i = 0, il = inActions.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\titem = inActions[ i ];\r\n\t\r\n\t\t\t\targs = item.args;\r\n\t\t\t\taction = item.action;\r\n\t\r\n\t\t\t\tif ( action === THREE.PathActions.MOVE_TO ) {\r\n\t\r\n\t\t\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\t\r\n\t\t\t\t\t\tsubPaths.push( lastPath );\r\n\t\t\t\t\t\tlastPath = new THREE.Path();\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tlastPath[ action ].apply( lastPath, args );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\t\r\n\t\t\t\tsubPaths.push( lastPath );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// console.log(subPaths);\r\n\t\r\n\t\t\treturn\tsubPaths;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction toShapesNoHoles( inSubpaths ) {\r\n\t\r\n\t\t\tvar shapes = [];\r\n\t\r\n\t\t\tfor ( var i = 0, il = inSubpaths.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\r\n\t\r\n\t\t\t\tvar tmpShape = new THREE.Shape();\r\n\t\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\t\ttmpShape.curves = tmpPath.curves;\r\n\t\r\n\t\t\t\tshapes.push( tmpShape );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//console.log(\"shape\", shapes);\r\n\t\r\n\t\t\treturn shapes;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\t\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\t\r\n\t\t\tvar polyLen = inPolygon.length;\r\n\t\r\n\t\t\t// inPt on polygon contour => immediate success    or\r\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\t\tvar inside = false;\r\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\t\r\n\t\t\t\tvar edgeLowPt  = inPolygon[ p ];\r\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\r\n\t\r\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\t\r\n\t\t\t\tif ( Math.abs( edgeDy ) > EPSILON ) {\r\n\t\r\n\t\t\t\t\t// not parallel\r\n\t\t\t\t\tif ( edgeDy < 0 ) {\r\n\t\r\n\t\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\t\r\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\t\r\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// parallel or collinear\r\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t\t// continue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn\tinside;\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tvar subPaths = extractSubpaths( this.actions );\r\n\t\tif ( subPaths.length === 0 ) return [];\r\n\t\r\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\t\r\n\t\r\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\r\n\t\r\n\t\tif ( subPaths.length === 1 ) {\r\n\t\r\n\t\t\ttmpPath = subPaths[ 0 ];\r\n\t\t\ttmpShape = new THREE.Shape();\r\n\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\treturn shapes;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar holesFirst = ! THREE.Shape.Utils.isClockWise( subPaths[ 0 ].getPoints() );\r\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\t\r\n\t\t// console.log(\"Holes first\", holesFirst);\r\n\t\r\n\t\tvar betterShapeHoles = [];\r\n\t\tvar newShapes = [];\r\n\t\tvar newShapeHoles = [];\r\n\t\tvar mainIdx = 0;\r\n\t\tvar tmpPoints;\r\n\t\r\n\t\tnewShapes[ mainIdx ] = undefined;\r\n\t\tnewShapeHoles[ mainIdx ] = [];\r\n\t\r\n\t\tvar i, il;\r\n\t\r\n\t\tfor ( i = 0, il = subPaths.length; i < il; i ++ ) {\r\n\t\r\n\t\t\ttmpPath = subPaths[ i ];\r\n\t\t\ttmpPoints = tmpPath.getPoints();\r\n\t\t\tsolid = THREE.Shape.Utils.isClockWise( tmpPoints );\r\n\t\t\tsolid = isCCW ? ! solid : solid;\r\n\t\r\n\t\t\tif ( solid ) {\r\n\t\r\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\t\r\n\t\t\t\tnewShapes[ mainIdx ] = { s: new THREE.Shape(), p: tmpPoints };\r\n\t\t\t\tnewShapes[ mainIdx ].s.actions = tmpPath.actions;\r\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\t\r\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\t\r\n\t\t\t\t//console.log('cw', i);\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\t\r\n\t\t\t\t//console.log('ccw', i);\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// only Holes? -> probably all Shapes with wrong orientation\r\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\t\r\n\t\r\n\t\tif ( newShapes.length > 1 ) {\r\n\t\r\n\t\t\tvar ambiguous = false;\r\n\t\t\tvar toChange = [];\r\n\t\r\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\t\r\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\t\r\n\t\t\t}\r\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\t\r\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\r\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\t\r\n\t\t\t\t\tvar ho = sho[ hIdx ];\r\n\t\t\t\t\tvar hole_unassigned = true;\r\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\t\r\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\t\r\n\t\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\tambiguous = true;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( hole_unassigned ) {\r\n\t\r\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\t\t\tif ( toChange.length > 0 ) {\r\n\t\r\n\t\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar tmpHoles, j, jl;\r\n\t\tfor ( i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\t\r\n\t\t\ttmpShape = newShapes[ i ].s;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\ttmpHoles = newShapeHoles[ i ];\r\n\t\t\tfor ( j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t//console.log(\"shape\", shapes);\r\n\t\r\n\t\treturn shapes;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/core/Shape.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * Defines a 2d shape plane using paths.\r\n\t **/\r\n\t\r\n\t// STEP 1 Create a path.\r\n\t// STEP 2 Turn path into shape.\r\n\t// STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n\t// STEP 3a - Extract points from each shape, turn to vertices\r\n\t// STEP 3b - Triangulate each shape, add faces.\r\n\t\r\n\tTHREE.Shape = function () {\r\n\t\r\n\t\tTHREE.Path.apply( this, arguments );\r\n\t\tthis.holes = [];\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\r\n\tTHREE.Shape.prototype.constructor = THREE.Shape;\r\n\t\r\n\t// Convenience method to return ExtrudeGeometry\r\n\t\r\n\tTHREE.Shape.prototype.extrude = function ( options ) {\r\n\t\r\n\t\tvar extruded = new THREE.ExtrudeGeometry( this, options );\r\n\t\treturn extruded;\r\n\t\r\n\t};\r\n\t\r\n\t// Convenience method to return ShapeGeometry\r\n\t\r\n\tTHREE.Shape.prototype.makeGeometry = function ( options ) {\r\n\t\r\n\t\tvar geometry = new THREE.ShapeGeometry( this, options );\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// Get points of holes\r\n\t\r\n\tTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\r\n\t\r\n\t\tvar i, il = this.holes.length, holesPts = [];\r\n\t\r\n\t\tfor ( i = 0; i < il; i ++ ) {\r\n\t\r\n\t\t\tholesPts[ i ] = this.holes[ i ].getTransformedPoints( divisions, this.bends );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn holesPts;\r\n\t\r\n\t};\r\n\t\r\n\t// Get points of holes (spaced by regular distance)\r\n\t\r\n\tTHREE.Shape.prototype.getSpacedPointsHoles = function ( divisions ) {\r\n\t\r\n\t\tvar i, il = this.holes.length, holesPts = [];\r\n\t\r\n\t\tfor ( i = 0; i < il; i ++ ) {\r\n\t\r\n\t\t\tholesPts[ i ] = this.holes[ i ].getTransformedSpacedPoints( divisions, this.bends );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn holesPts;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t// Get points of shape and holes (keypoints based on segments parameter)\r\n\t\r\n\tTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\r\n\t\r\n\t\treturn {\r\n\t\r\n\t\t\tshape: this.getTransformedPoints( divisions ),\r\n\t\t\tholes: this.getPointsHoles( divisions )\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Shape.prototype.extractPoints = function ( divisions ) {\r\n\t\r\n\t\tif ( this.useSpacedPoints ) {\r\n\t\r\n\t\t\treturn this.extractAllSpacedPoints( divisions );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this.extractAllPoints( divisions );\r\n\t\r\n\t};\r\n\t\r\n\t//\r\n\t// THREE.Shape.prototype.extractAllPointsWithBend = function ( divisions, bend ) {\r\n\t//\r\n\t// \treturn {\r\n\t//\r\n\t// \t\tshape: this.transform( bend, divisions ),\r\n\t// \t\tholes: this.getPointsHoles( divisions, bend )\r\n\t//\r\n\t// \t};\r\n\t//\r\n\t// };\r\n\t\r\n\t// Get points of shape and holes (spaced by regular distance)\r\n\t\r\n\tTHREE.Shape.prototype.extractAllSpacedPoints = function ( divisions ) {\r\n\t\r\n\t\treturn {\r\n\t\r\n\t\t\tshape: this.getTransformedSpacedPoints( divisions ),\r\n\t\t\tholes: this.getSpacedPointsHoles( divisions )\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\t/**************************************************************\r\n\t *\tUtils\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.Shape.Utils = {\r\n\t\r\n\t\ttriangulateShape: function ( contour, holes ) {\r\n\t\r\n\t\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\r\n\t\r\n\t\t\t\t// inOtherPt needs to be collinear to the inSegment\r\n\t\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\r\n\t\r\n\t\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\r\n\t\r\n\t\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\r\n\t\r\n\t\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\r\n\t\r\n\t\t\t\tvar EPSILON = 0.0000000001;\r\n\t\r\n\t\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\r\n\t\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\r\n\t\r\n\t\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\r\n\t\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\r\n\t\r\n\t\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\r\n\t\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\r\n\t\r\n\t\t\t\tif ( Math.abs( limit ) > EPSILON ) {\r\n\t\r\n\t\t\t\t\t// not parallel\r\n\t\r\n\t\t\t\t\tvar perpSeg2;\r\n\t\t\t\t\tif ( limit > 0 ) {\r\n\t\r\n\t\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\r\n\t\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\r\n\t\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// i.e. to reduce rounding errors\r\n\t\t\t\t\t// intersection at endpoint of segment#1?\r\n\t\t\t\t\tif ( perpSeg2 === 0 ) {\r\n\t\r\n\t\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( perpSeg2 === limit ) {\r\n\t\r\n\t\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\t\treturn [ inSeg1Pt2 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// intersection at endpoint of segment#2?\r\n\t\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\r\n\t\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\r\n\t\r\n\t\t\t\t\t// return real intersection point\r\n\t\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\r\n\t\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\r\n\t\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// parallel or collinear\r\n\t\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\r\n\t\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\r\n\t\r\n\t\t\t\t\t// they are collinear or degenerate\r\n\t\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\r\n\t\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\r\n\t\t\t\t\t// both segments are points\r\n\t\t\t\t\tif ( seg1Pt && seg2Pt ) {\r\n\t\r\n\t\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\r\n\t\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\r\n\t\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// segment#1  is a single point\r\n\t\t\t\t\tif ( seg1Pt ) {\r\n\t\r\n\t\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\r\n\t\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// segment#2  is a single point\r\n\t\t\t\t\tif ( seg2Pt ) {\r\n\t\r\n\t\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\r\n\t\t\t\t\t\treturn [ inSeg2Pt1 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// they are collinear segments, which might overlap\r\n\t\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\r\n\t\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\r\n\t\t\t\t\tif ( seg1dx !== 0 ) {\r\n\t\r\n\t\t\t\t\t\t// the segments are NOT on a vertical line\r\n\t\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\r\n\t\r\n\t\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\r\n\t\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\r\n\t\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\r\n\t\r\n\t\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\r\n\t\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\r\n\t\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t// the segments are on a vertical line\r\n\t\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\r\n\t\r\n\t\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\r\n\t\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\r\n\t\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\r\n\t\r\n\t\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\r\n\t\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\r\n\t\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1minVal <= seg2minVal ) {\r\n\t\r\n\t\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\r\n\t\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\r\n\t\r\n\t\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\t\treturn [ seg2min ];\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\r\n\t\t\t\t\t\treturn\t[ seg2min, seg2max ];\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\r\n\t\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\r\n\t\r\n\t\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\t\treturn [ seg1min ];\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\r\n\t\t\t\t\t\treturn\t[ seg1min, seg2max ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\r\n\t\r\n\t\t\t\t// The order of legs is important\r\n\t\r\n\t\t\t\tvar EPSILON = 0.0000000001;\r\n\t\r\n\t\t\t\t// translation of all points, so that Vertex is at (0,0)\r\n\t\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\r\n\t\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\r\n\t\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\r\n\t\r\n\t\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\r\n\t\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\r\n\t\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\r\n\t\r\n\t\t\t\tif ( Math.abs( from2toAngle ) > EPSILON ) {\r\n\t\r\n\t\t\t\t\t// angle != 180 deg.\r\n\t\r\n\t\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\r\n\t\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\r\n\t\r\n\t\t\t\t\tif ( from2toAngle > 0 ) {\r\n\t\r\n\t\t\t\t\t\t// main angle < 180 deg.\r\n\t\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t// main angle > 180 deg.\r\n\t\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// angle == 180 deg.\r\n\t\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\r\n\t\t\t\t\treturn\t( from2otherAngle > 0 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\tfunction removeHoles( contour, holes ) {\r\n\t\r\n\t\t\t\tvar shape = contour.concat(); // work on this shape\r\n\t\t\t\tvar hole;\r\n\t\r\n\t\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\r\n\t\r\n\t\t\t\t\t// Check if hole point lies within angle around shape point\r\n\t\t\t\t\tvar lastShapeIdx = shape.length - 1;\r\n\t\r\n\t\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\r\n\t\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\r\n\t\r\n\t\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\r\n\t\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\r\n\t\r\n\t\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\r\n\t\t\t\t\tif ( ! insideAngle ) {\r\n\t\r\n\t\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\r\n\t\t\t\t\t\treturn\tfalse;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// Check if shape point lies within angle around hole point\r\n\t\t\t\t\tvar lastHoleIdx = hole.length - 1;\r\n\t\r\n\t\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\r\n\t\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\r\n\t\r\n\t\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\r\n\t\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\r\n\t\r\n\t\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\r\n\t\t\t\t\tif ( ! insideAngle ) {\r\n\t\r\n\t\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\r\n\t\t\t\t\t\treturn\tfalse;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\treturn\ttrue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\r\n\t\r\n\t\t\t\t\t// checks for intersections with shape edges\r\n\t\t\t\t\tvar sIdx, nextIdx, intersection;\r\n\t\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\r\n\t\r\n\t\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\r\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\r\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\treturn\tfalse;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar indepHoles = [];\r\n\t\r\n\t\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\r\n\t\r\n\t\t\t\t\t// checks for intersections with hole edges\r\n\t\t\t\t\tvar ihIdx, chkHole,\r\n\t\t\t\t\t\thIdx, nextIdx, intersection;\r\n\t\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\r\n\t\r\n\t\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\r\n\t\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\r\n\t\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\r\n\t\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn\tfalse;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar holeIndex, shapeIndex,\r\n\t\t\t\t\tshapePt, holePt,\r\n\t\t\t\t\tholeIdx, cutKey, failedCuts = [],\r\n\t\t\t\t\ttmpShape1, tmpShape2,\r\n\t\t\t\t\ttmpHole1, tmpHole2;\r\n\t\r\n\t\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\t\tindepHoles.push( h );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar minShapeIndex = 0;\r\n\t\t\t\tvar counter = indepHoles.length * 2;\r\n\t\t\t\twhile ( indepHoles.length > 0 ) {\r\n\t\r\n\t\t\t\t\tcounter --;\r\n\t\t\t\t\tif ( counter < 0 ) {\r\n\t\r\n\t\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// search for shape-vertex and hole-vertex,\r\n\t\t\t\t\t// which can be connected without intersections\r\n\t\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\r\n\t\r\n\t\t\t\t\t\tshapePt = shape[ shapeIndex ];\r\n\t\t\t\t\t\tholeIndex\t= - 1;\r\n\t\r\n\t\t\t\t\t\t// search for hole which can be reached without intersections\r\n\t\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tholeIdx = indepHoles[ h ];\r\n\t\r\n\t\t\t\t\t\t\t// prevent multiple checks\r\n\t\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\r\n\t\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\r\n\t\r\n\t\t\t\t\t\t\thole = holes[ holeIdx ];\r\n\t\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tholePt = hole[ h2 ];\r\n\t\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\r\n\t\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\r\n\t\t\t\t\t\t\t\tholeIndex = h2;\r\n\t\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\r\n\t\r\n\t\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\r\n\t\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\r\n\t\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\r\n\t\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\r\n\t\r\n\t\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\r\n\t\r\n\t\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\r\n\t\r\n\t\t\t\t\t\t\t\t// Debug only, to show the selected cuts\r\n\t\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\r\n\t\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\t\r\n\t\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn shape; \t\t\t/* shape with no holes */\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\tvar i, il, f, face,\r\n\t\t\t\tkey, index,\r\n\t\t\t\tallPointsMap = {};\r\n\t\r\n\t\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\r\n\t\r\n\t\t\tvar allpoints = contour.concat();\r\n\t\r\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\r\n\t\r\n\t\t\t// prepare all points map\r\n\t\r\n\t\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\r\n\t\r\n\t\t\t\tif ( allPointsMap[ key ] !== undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( \"THREE.Shape: Duplicate point\", key );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tallPointsMap[ key ] = i;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// remove holes by cutting paths to holes and adding them to the shape\r\n\t\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\r\n\t\r\n\t\t\tvar triangles = THREE.FontUtils.Triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\r\n\t\t\t//console.log( \"triangles\",triangles, triangles.length );\r\n\t\r\n\t\t\t// check all face vertices against all points map\r\n\t\r\n\t\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tface = triangles[ i ];\r\n\t\r\n\t\t\t\tfor ( f = 0; f < 3; f ++ ) {\r\n\t\r\n\t\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\r\n\t\r\n\t\t\t\t\tindex = allPointsMap[ key ];\r\n\t\r\n\t\t\t\t\tif ( index !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tface[ f ] = index;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn triangles.concat();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tisClockWise: function ( pts ) {\r\n\t\r\n\t\t\treturn THREE.FontUtils.Triangulate.area( pts ) < 0;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Bezier Curves formulas obtained from\r\n\t\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\r\n\t\r\n\t\t// Quad Bezier Functions\r\n\t\r\n\t\tb2p0: function ( t, p ) {\r\n\t\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb2p1: function ( t, p ) {\r\n\t\r\n\t\t\treturn 2 * ( 1 - t ) * t * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb2p2: function ( t, p ) {\r\n\t\r\n\t\t\treturn t * t * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb2: function ( t, p0, p1, p2 ) {\r\n\t\r\n\t\t\treturn this.b2p0( t, p0 ) + this.b2p1( t, p1 ) + this.b2p2( t, p2 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Cubic Bezier Functions\r\n\t\r\n\t\tb3p0: function ( t, p ) {\r\n\t\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * k * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb3p1: function ( t, p ) {\r\n\t\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * k * t * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb3p2: function ( t, p ) {\r\n\t\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * t * t * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb3p3: function ( t, p ) {\r\n\t\r\n\t\t\treturn t * t * t * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb3: function ( t, p0, p1, p2, p3 ) {\r\n\t\r\n\t\t\treturn this.b3p0( t, p0 ) + this.b3p1( t, p1 ) + this.b3p2( t, p2 ) +  this.b3p3( t, p3 );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/LineCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tLine\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.LineCurve = function ( v1, v2 ) {\r\n\t\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\r\n\t\r\n\tTHREE.LineCurve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tvar point = this.v2.clone().sub( this.v1 );\r\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\t\r\n\t\treturn point;\r\n\t\r\n\t};\r\n\t\r\n\t// Line curve is linear, so we can overwrite default getPointAt\r\n\t\r\n\tTHREE.LineCurve.prototype.getPointAt = function ( u ) {\r\n\t\r\n\t\treturn this.getPoint( u );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LineCurve.prototype.getTangent = function( t ) {\r\n\t\r\n\t\tvar tangent = this.v2.clone().sub( this.v1 );\r\n\t\r\n\t\treturn tangent.normalize();\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/QuadraticBezierCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tQuadratic Bezier curve\r\n\t **************************************************************/\r\n\t\r\n\t\r\n\tTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\r\n\t\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\r\n\t\r\n\t\r\n\tTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tvar vector = new THREE.Vector2();\r\n\t\r\n\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\t\r\n\t\treturn vector;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\r\n\t\r\n\t\tvar vector = new THREE.Vector2();\r\n\t\r\n\t\tvector.x = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x );\r\n\t\tvector.y = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y );\r\n\t\r\n\t\t// returns unit vector\r\n\t\r\n\t\treturn vector.normalize();\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/CubicBezierCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tCubic Bezier curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\r\n\t\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\tthis.v3 = v3;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\r\n\t\r\n\tTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tvar tx, ty;\r\n\t\r\n\t\ttx = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\t\tty = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\t\r\n\t\treturn new THREE.Vector2( tx, ty );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\r\n\t\r\n\t\tvar tx, ty;\r\n\t\r\n\t\ttx = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\t\tty = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\t\r\n\t\tvar tangent = new THREE.Vector2( tx, ty );\r\n\t\ttangent.normalize();\r\n\t\r\n\t\treturn tangent;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/SplineCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tSpline curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\r\n\t\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\r\n\t\r\n\tTHREE.SplineCurve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 1 ) * t;\r\n\t\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\t\r\n\t\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\t\tvar point1 = points[ intPoint ];\r\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\t\r\n\t\tvar vector = new THREE.Vector2();\r\n\t\r\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\r\n\t\treturn vector;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/EllipseCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tEllipse curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\t\r\n\t\tthis.aX = aX;\r\n\t\tthis.aY = aY;\r\n\t\r\n\t\tthis.xRadius = xRadius;\r\n\t\tthis.yRadius = yRadius;\r\n\t\r\n\t\tthis.aStartAngle = aStartAngle;\r\n\t\tthis.aEndAngle = aEndAngle;\r\n\t\r\n\t\tthis.aClockwise = aClockwise;\r\n\t\t\r\n\t\tthis.aRotation = aRotation || 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\r\n\t\r\n\tTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\t\r\n\t\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\r\n\t\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\r\n\t\r\n\t\tvar angle;\r\n\t\r\n\t\tif ( this.aClockwise === true ) {\r\n\t\r\n\t\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tangle = this.aStartAngle + t * deltaAngle;\r\n\t\r\n\t\t}\r\n\t\t\r\n\t\tvar x = this.aX + this.xRadius * Math.cos( angle );\r\n\t\tvar y = this.aY + this.yRadius * Math.sin( angle );\r\n\t\r\n\t\tif ( this.aRotation !== 0 ) {\r\n\t\r\n\t\t\tvar cos = Math.cos( this.aRotation );\r\n\t\t\tvar sin = Math.sin( this.aRotation );\r\n\t\r\n\t\t\tvar tx = x, ty = y;\r\n\t\r\n\t\t\t// Rotate the point about the center of the ellipse.\r\n\t\t\tx = ( tx - this.aX ) * cos - ( ty - this.aY ) * sin + this.aX;\r\n\t\t\ty = ( tx - this.aX ) * sin + ( ty - this.aY ) * cos + this.aY;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn new THREE.Vector2( x, y );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/ArcCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tArc curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\t\r\n\t\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\r\n\tTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\r\n\t\r\n\t// File:src/extras/curves/LineCurve3.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tLine3D\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.LineCurve3 = THREE.Curve.create(\r\n\t\r\n\t\tfunction ( v1, v2 ) {\r\n\t\r\n\t\t\tthis.v1 = v1;\r\n\t\t\tthis.v2 = v2;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfunction ( t ) {\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\tvector.subVectors( this.v2, this.v1 ); // diff\r\n\t\t\tvector.multiplyScalar( t );\r\n\t\t\tvector.add( this.v1 );\r\n\t\r\n\t\t\treturn vector;\r\n\t\r\n\t\t}\r\n\t\r\n\t);\r\n\t\r\n\t// File:src/extras/curves/QuadraticBezierCurve3.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tQuadratic Bezier 3D curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\r\n\t\r\n\t\tfunction ( v0, v1, v2 ) {\r\n\t\r\n\t\t\tthis.v0 = v0;\r\n\t\t\tthis.v1 = v1;\r\n\t\t\tthis.v2 = v2;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfunction ( t ) {\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\t\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\t\t\tvector.z = THREE.Shape.Utils.b2( t, this.v0.z, this.v1.z, this.v2.z );\r\n\t\r\n\t\t\treturn vector;\r\n\t\r\n\t\t}\r\n\t\r\n\t);\r\n\t\r\n\t// File:src/extras/curves/CubicBezierCurve3.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tCubic Bezier 3D curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.CubicBezierCurve3 = THREE.Curve.create(\r\n\t\r\n\t\tfunction ( v0, v1, v2, v3 ) {\r\n\t\r\n\t\t\tthis.v0 = v0;\r\n\t\t\tthis.v1 = v1;\r\n\t\t\tthis.v2 = v2;\r\n\t\t\tthis.v3 = v3;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfunction ( t ) {\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\tvector.x = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\t\t\tvector.y = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\t\t\tvector.z = THREE.Shape.Utils.b3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z );\r\n\t\r\n\t\t\treturn vector;\r\n\t\r\n\t\t}\r\n\t\r\n\t);\r\n\t\r\n\t// File:src/extras/curves/SplineCurve3.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tSpline 3D curve\r\n\t **************************************************************/\r\n\t\r\n\t\r\n\tTHREE.SplineCurve3 = THREE.Curve.create(\r\n\t\r\n\t\tfunction ( points /* array of Vector3 */ ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3' );\r\n\t\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfunction ( t ) {\r\n\t\r\n\t\t\tvar points = this.points;\r\n\t\t\tvar point = ( points.length - 1 ) * t;\r\n\t\r\n\t\t\tvar intPoint = Math.floor( point );\r\n\t\t\tvar weight = point - intPoint;\r\n\t\r\n\t\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\r\n\t\t\tvar point1 = points[ intPoint ];\r\n\t\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\t\r\n\t\t\treturn vector;\r\n\t\r\n\t\t}\r\n\t\r\n\t);\r\n\t\r\n\t// File:src/extras/curves/CatmullRomCurve3.js\r\n\t\r\n\t/**\r\n\t * @author zz85 https://github.com/zz85\r\n\t *\r\n\t * Centripetal CatmullRom Curve - which is useful for avoiding\r\n\t * cusps and self-intersections in non-uniform catmull rom curves.\r\n\t * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n\t *\r\n\t * curve.type accepts centripetal(default), chordal and catmullrom\r\n\t * curve.tension is used for catmullrom which defaults to 0.5\r\n\t */\r\n\t\r\n\tTHREE.CatmullRomCurve3 = ( function() {\r\n\t\r\n\t\tvar\r\n\t\t\ttmp = new THREE.Vector3(),\r\n\t\t\tpx = new CubicPoly(),\r\n\t\t\tpy = new CubicPoly(),\r\n\t\t\tpz = new CubicPoly();\r\n\t\r\n\t\t/*\r\n\t\tBased on an optimized c++ solution in\r\n\t\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t\t - http://ideone.com/NoEbVM\r\n\t\r\n\t\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\t\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\t\twhich can be placed in CurveUtils.\r\n\t\t*/\r\n\t\r\n\t\tfunction CubicPoly() {\r\n\t\r\n\t\t}\r\n\t\r\n\t\t/*\r\n\t\t * Compute coefficients for a cubic polynomial\r\n\t\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t\t * such that\r\n\t\t *   p(0) = x0, p(1) = x1\r\n\t\t *  and\r\n\t\t *   p'(0) = t0, p'(1) = t1.\r\n\t\t */\r\n\t\tCubicPoly.prototype.init = function( x0, x1, t0, t1 ) {\r\n\t\r\n\t\t\tthis.c0 = x0;\r\n\t\t\tthis.c1 = t0;\r\n\t\t\tthis.c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\t\tthis.c3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tCubicPoly.prototype.initNonuniformCatmullRom = function( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\t\r\n\t\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\t\r\n\t\t\t// rescale tangents for parametrization in [0,1]\r\n\t\t\tt1 *= dt1;\r\n\t\t\tt2 *= dt1;\r\n\t\r\n\t\t\t// initCubicPoly\r\n\t\t\tthis.init( x1, x2, t1, t2 );\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// standard Catmull-Rom spline: interpolate between x1 and x2 with previous/following points x1/x4\r\n\t\tCubicPoly.prototype.initCatmullRom = function( x0, x1, x2, x3, tension ) {\r\n\t\r\n\t\t\tthis.init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tCubicPoly.prototype.calc = function( t ) {\r\n\t\r\n\t\t\tvar t2 = t * t;\r\n\t\t\tvar t3 = t2 * t;\r\n\t\t\treturn this.c0 + this.c1 * t + this.c2 * t2 + this.c3 * t3;\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Subclass Three.js curve\r\n\t\treturn THREE.Curve.create(\r\n\t\r\n\t\t\tfunction ( p /* array of Vector3 */ ) {\r\n\t\r\n\t\t\t\tthis.points = p || [];\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tfunction ( t ) {\r\n\t\r\n\t\t\t\tvar points = this.points,\r\n\t\t\t\t\tpoint, intPoint, weight, l;\r\n\t\r\n\t\t\t\tl = points.length;\r\n\t\r\n\t\t\t\tif ( l < 2 ) console.log( 'duh, you need at least 2 points' );\r\n\t\r\n\t\t\t\tpoint = ( l - 1 ) * t;\r\n\t\t\t\tintPoint = Math.floor( point );\r\n\t\t\t\tweight = point - intPoint;\r\n\t\r\n\t\t\t\tif ( weight === 0 && intPoint === l - 1 ) {\r\n\t\r\n\t\t\t\t\tintPoint = l - 2;\r\n\t\t\t\t\tweight = 1;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar p0, p1, p2, p3;\r\n\t\r\n\t\t\t\tif ( intPoint === 0 ) {\r\n\t\r\n\t\t\t\t\t// extrapolate first point\r\n\t\t\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\t\t\t\tp0 = tmp;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tp0 = points[ intPoint - 1 ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tp1 = points[ intPoint ];\r\n\t\t\t\tp2 = points[ intPoint + 1 ];\r\n\t\r\n\t\t\t\tif ( intPoint + 2 < l ) {\r\n\t\r\n\t\t\t\t\tp3 = points[ intPoint + 2 ]\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// extrapolate last point\r\n\t\t\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 2 ] );\r\n\t\t\t\t\tp3 = tmp;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\r\n\t\r\n\t\t\t\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\t\t\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\r\n\t\t\t\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\t\t\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\t\t\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\t\r\n\t\t\t\t\t// safety check for repeated points\r\n\t\t\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\t\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\t\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\t\r\n\t\t\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\t\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\t\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\t\r\n\t\t\t\t} else if ( this.type === 'catmullrom' ) {\r\n\t\r\n\t\t\t\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\r\n\t\t\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\r\n\t\t\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\r\n\t\t\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar v = new THREE.Vector3(\r\n\t\t\t\t\tpx.calc( weight ),\r\n\t\t\t\t\tpy.calc( weight ),\r\n\t\t\t\t\tpz.calc( weight )\r\n\t\t\t\t);\r\n\t\r\n\t\t\t\treturn v;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t);\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/extras/curves/ClosedSplineCurve3.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tClosed Spline 3D curve\r\n\t **************************************************************/\r\n\t\r\n\t\r\n\tTHREE.ClosedSplineCurve3 = THREE.Curve.create(\r\n\t\r\n\t\tfunction ( points /* array of Vector3 */ ) {\r\n\t\r\n\t\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfunction ( t ) {\r\n\t\r\n\t\t\tvar points = this.points;\r\n\t\t\tvar point = ( points.length - 0 ) * t; // This needs to be from 0-length +1\r\n\t\r\n\t\t\tvar intPoint = Math.floor( point );\r\n\t\t\tvar weight = point - intPoint;\r\n\t\r\n\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\r\n\t\r\n\t\t\tvar point0 = points[ ( intPoint - 1 ) % points.length ];\r\n\t\t\tvar point1 = points[ ( intPoint     ) % points.length ];\r\n\t\t\tvar point2 = points[ ( intPoint + 1 ) % points.length ];\r\n\t\t\tvar point3 = points[ ( intPoint + 2 ) % points.length ];\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\t\r\n\t\t\treturn vector;\r\n\t\r\n\t\t}\r\n\t\r\n\t);\r\n\t\r\n\t// File:src/extras/animation/AnimationHandler.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t */\r\n\t\r\n\tTHREE.AnimationHandler = {\r\n\t\r\n\t\tLINEAR: 0,\r\n\t\tCATMULLROM: 1,\r\n\t\tCATMULLROM_FORWARD: 2,\r\n\t\r\n\t\t//\r\n\t\r\n\t\tadd: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.AnimationHandler.add() has been deprecated.' );\r\n\t\r\n\t\t},\r\n\t\tget: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.AnimationHandler.get() has been deprecated.' );\r\n\t\r\n\t\t},\r\n\t\tremove: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.AnimationHandler.remove() has been deprecated.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t//\r\n\t\r\n\t\tanimations: [],\r\n\t\r\n\t\tinit: function ( data ) {\r\n\t\r\n\t\t\tif ( data.initialized === true ) return data;\r\n\t\r\n\t\t\t// loop through all keys\r\n\t\r\n\t\t\tfor ( var h = 0; h < data.hierarchy.length; h ++ ) {\r\n\t\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\t\r\n\t\t\t\t\t// remove minus times\r\n\t\r\n\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time < 0 ) {\r\n\t\r\n\t\t\t\t\t\t data.hierarchy[ h ].keys[ k ].time = 0;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// create quaternions\r\n\t\r\n\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].rot !== undefined &&\r\n\t\t\t\t\t  ! ( data.hierarchy[ h ].keys[ k ].rot instanceof THREE.Quaternion ) ) {\r\n\t\r\n\t\t\t\t\t\tvar quat = data.hierarchy[ h ].keys[ k ].rot;\r\n\t\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].rot = new THREE.Quaternion().fromArray( quat );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// prepare morph target keys\r\n\t\r\n\t\t\t\tif ( data.hierarchy[ h ].keys.length && data.hierarchy[ h ].keys[ 0 ].morphTargets !== undefined ) {\r\n\t\r\n\t\t\t\t\t// get all used\r\n\t\r\n\t\t\t\t\tvar usedMorphTargets = {};\r\n\t\r\n\t\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\t\r\n\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tvar morphTargetName = data.hierarchy[ h ].keys[ k ].morphTargets[ m ];\r\n\t\t\t\t\t\t\tusedMorphTargets[ morphTargetName ] = - 1;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tdata.hierarchy[ h ].usedMorphTargets = usedMorphTargets;\r\n\t\r\n\t\r\n\t\t\t\t\t// set all used on all frames\r\n\t\r\n\t\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar influences = {};\r\n\t\r\n\t\t\t\t\t\tfor ( var morphTargetName in usedMorphTargets ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].morphTargets[ m ] === morphTargetName ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = data.hierarchy[ h ].keys[ k ].morphTargetsInfluences[ m ];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\tif ( m === data.hierarchy[ h ].keys[ k ].morphTargets.length ) {\r\n\t\r\n\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = 0;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].morphTargetsInfluences = influences;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t// remove all keys that are on the same time\r\n\t\r\n\t\t\t\tfor ( var k = 1; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\t\r\n\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time === data.hierarchy[ h ].keys[ k - 1 ].time ) {\r\n\t\r\n\t\t\t\t\t\tdata.hierarchy[ h ].keys.splice( k, 1 );\r\n\t\t\t\t\t\tk --;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t// set index\r\n\t\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\t\r\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].index = k;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tdata.initialized = true;\r\n\t\r\n\t\t\treturn data;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparse: function ( root ) {\r\n\t\r\n\t\t\tvar parseRecurseHierarchy = function ( root, hierarchy ) {\r\n\t\r\n\t\t\t\thierarchy.push( root );\r\n\t\r\n\t\t\t\tfor ( var c = 0; c < root.children.length; c ++ )\r\n\t\t\t\t\tparseRecurseHierarchy( root.children[ c ], hierarchy );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\t// setup hierarchy\r\n\t\r\n\t\t\tvar hierarchy = [];\r\n\t\r\n\t\t\tif ( root instanceof THREE.SkinnedMesh ) {\r\n\t\r\n\t\t\t\tfor ( var b = 0; b < root.skeleton.bones.length; b ++ ) {\r\n\t\r\n\t\t\t\t\thierarchy.push( root.skeleton.bones[ b ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tparseRecurseHierarchy( root, hierarchy );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn hierarchy;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tplay: function ( animation ) {\r\n\t\r\n\t\t\tif ( this.animations.indexOf( animation ) === - 1 ) {\r\n\t\r\n\t\t\t\tthis.animations.push( animation );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tstop: function ( animation ) {\r\n\t\r\n\t\t\tvar index = this.animations.indexOf( animation );\r\n\t\r\n\t\t\tif ( index !== - 1 ) {\r\n\t\r\n\t\t\t\tthis.animations.splice( index, 1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdate: function ( deltaTimeMS ) {\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\t\r\n\t\t\t\tthis.animations[ i ].resetBlendWeights();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\t\r\n\t\t\t\tthis.animations[ i ].update( deltaTimeMS );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/animation/Animation.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Animation = function ( root, data ) {\r\n\t\r\n\t\tthis.root = root;\r\n\t\tthis.data = THREE.AnimationHandler.init( data );\r\n\t\tthis.hierarchy = THREE.AnimationHandler.parse( root );\r\n\t\r\n\t\tthis.currentTime = 0;\r\n\t\tthis.timeScale = 1;\r\n\t\r\n\t\tthis.isPlaying = false;\r\n\t\tthis.loop = true;\r\n\t\tthis.weight = 0;\r\n\t\r\n\t\tthis.interpolationType = THREE.AnimationHandler.LINEAR;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Animation.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Animation,\r\n\t\r\n\t\tkeyTypes:  [ \"pos\", \"rot\", \"scl\" ],\r\n\t\r\n\t\tplay: function ( startTime, weight ) {\r\n\t\r\n\t\t\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\t\t\tthis.weight = weight !== undefined ? weight : 1;\r\n\t\r\n\t\t\tthis.isPlaying = true;\r\n\t\r\n\t\t\tthis.reset();\r\n\t\r\n\t\t\tTHREE.AnimationHandler.play( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tstop: function() {\r\n\t\r\n\t\t\tthis.isPlaying = false;\r\n\t\r\n\t\t\tTHREE.AnimationHandler.stop( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\treset: function () {\r\n\t\r\n\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tvar object = this.hierarchy[ h ];\r\n\t\r\n\t\t\t\tif ( object.animationCache === undefined ) {\r\n\t\r\n\t\t\t\t\tobject.animationCache = {\r\n\t\t\t\t\t\tanimations: {},\r\n\t\t\t\t\t\tblending: {\r\n\t\t\t\t\t\t\tpositionWeight: 0.0,\r\n\t\t\t\t\t\t\tquaternionWeight: 0.0,\r\n\t\t\t\t\t\t\tscaleWeight: 0.0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar name = this.data.name;\r\n\t\t\t\tvar animations = object.animationCache.animations;\r\n\t\t\t\tvar animationCache = animations[ name ];\r\n\t\r\n\t\t\t\tif ( animationCache === undefined ) {\r\n\t\r\n\t\t\t\t\tanimationCache = {\r\n\t\t\t\t\t\tprevKey: { pos: 0, rot: 0, scl: 0 },\r\n\t\t\t\t\t\tnextKey: { pos: 0, rot: 0, scl: 0 },\r\n\t\t\t\t\t\toriginalMatrix: object.matrix\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t\tanimations[ name ] = animationCache;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Get keys to match our current time\r\n\t\r\n\t\t\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\t\r\n\t\t\t\t\tvar type = this.keyTypes[ t ];\r\n\t\r\n\t\t\t\t\tvar prevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\t\t\tvar nextKey = this.getNextKeyWith( type, h, 1 );\r\n\t\r\n\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\t\r\n\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tresetBlendWeights: function () {\r\n\t\r\n\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\t\tvar animationCache = object.animationCache;\r\n\t\r\n\t\t\t\tif ( animationCache !== undefined ) {\r\n\t\r\n\t\t\t\t\tvar blending = animationCache.blending;\r\n\t\r\n\t\t\t\t\tblending.positionWeight = 0.0;\r\n\t\t\t\t\tblending.quaternionWeight = 0.0;\r\n\t\t\t\t\tblending.scaleWeight = 0.0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdate: ( function() {\r\n\t\r\n\t\t\tvar points = [];\r\n\t\t\tvar target = new THREE.Vector3();\r\n\t\t\tvar newVector = new THREE.Vector3();\r\n\t\t\tvar newQuat = new THREE.Quaternion();\r\n\t\r\n\t\t\t// Catmull-Rom spline\r\n\t\r\n\t\t\tvar interpolateCatmullRom = function ( points, scale ) {\r\n\t\r\n\t\t\t\tvar c = [], v3 = [],\r\n\t\t\t\tpoint, intPoint, weight, w2, w3,\r\n\t\t\t\tpa, pb, pc, pd;\r\n\t\r\n\t\t\t\tpoint = ( points.length - 1 ) * scale;\r\n\t\t\t\tintPoint = Math.floor( point );\r\n\t\t\t\tweight = point - intPoint;\r\n\t\r\n\t\t\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\t\t\tc[ 1 ] = intPoint;\r\n\t\t\t\tc[ 2 ] = intPoint > points.length - 2 ? intPoint : intPoint + 1;\r\n\t\t\t\tc[ 3 ] = intPoint > points.length - 3 ? intPoint : intPoint + 2;\r\n\t\r\n\t\t\t\tpa = points[ c[ 0 ] ];\r\n\t\t\t\tpb = points[ c[ 1 ] ];\r\n\t\t\t\tpc = points[ c[ 2 ] ];\r\n\t\t\t\tpd = points[ c[ 3 ] ];\r\n\t\r\n\t\t\t\tw2 = weight * weight;\r\n\t\t\t\tw3 = weight * w2;\r\n\t\r\n\t\t\t\tv3[ 0 ] = interpolate( pa[ 0 ], pb[ 0 ], pc[ 0 ], pd[ 0 ], weight, w2, w3 );\r\n\t\t\t\tv3[ 1 ] = interpolate( pa[ 1 ], pb[ 1 ], pc[ 1 ], pd[ 1 ], weight, w2, w3 );\r\n\t\t\t\tv3[ 2 ] = interpolate( pa[ 2 ], pb[ 2 ], pc[ 2 ], pd[ 2 ], weight, w2, w3 );\r\n\t\r\n\t\t\t\treturn v3;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tvar interpolate = function ( p0, p1, p2, p3, t, t2, t3 ) {\r\n\t\r\n\t\t\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\t\r\n\t\t\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\treturn function ( delta ) {\r\n\t\r\n\t\t\t\tif ( this.isPlaying === false ) return;\r\n\t\r\n\t\t\t\tthis.currentTime += delta * this.timeScale;\r\n\t\r\n\t\t\t\tif ( this.weight === 0 )\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t//\r\n\t\r\n\t\t\t\tvar duration = this.data.length;\r\n\t\r\n\t\t\t\tif ( this.currentTime > duration || this.currentTime < 0 ) {\r\n\t\r\n\t\t\t\t\tif ( this.loop ) {\r\n\t\r\n\t\t\t\t\t\tthis.currentTime %= duration;\r\n\t\r\n\t\t\t\t\t\tif ( this.currentTime < 0 )\r\n\t\t\t\t\t\t\tthis.currentTime += duration;\r\n\t\r\n\t\t\t\t\t\tthis.reset();\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tthis.stop();\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\t\t\tvar animationCache = object.animationCache.animations[ this.data.name ];\r\n\t\t\t\t\tvar blending = object.animationCache.blending;\r\n\t\r\n\t\t\t\t\t// loop through pos/rot/scl\r\n\t\r\n\t\t\t\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\t\r\n\t\t\t\t\t\t// get keys\r\n\t\r\n\t\t\t\t\t\tvar type    = this.keyTypes[ t ];\r\n\t\t\t\t\t\tvar prevKey = animationCache.prevKey[ type ];\r\n\t\t\t\t\t\tvar nextKey = animationCache.nextKey[ type ];\r\n\t\r\n\t\t\t\t\t\tif ( ( this.timeScale > 0 && nextKey.time <= this.currentTime ) ||\r\n\t\t\t\t\t\t\t( this.timeScale < 0 && prevKey.time >= this.currentTime ) ) {\r\n\t\r\n\t\t\t\t\t\t\tprevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, 1 );\r\n\t\r\n\t\t\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\t\r\n\t\t\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tvar scale = ( this.currentTime - prevKey.time ) / ( nextKey.time - prevKey.time );\r\n\t\r\n\t\t\t\t\t\tvar prevXYZ = prevKey[ type ];\r\n\t\t\t\t\t\tvar nextXYZ = nextKey[ type ];\r\n\t\r\n\t\t\t\t\t\tif ( scale < 0 ) scale = 0;\r\n\t\t\t\t\t\tif ( scale > 1 ) scale = 1;\r\n\t\r\n\t\t\t\t\t\t// interpolate\r\n\t\r\n\t\t\t\t\t\tif ( type === \"pos\" ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.LINEAR ) {\r\n\t\r\n\t\t\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\t\r\n\t\t\t\t\t\t\t\t// blend\r\n\t\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\t\t\tobject.position.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\t\r\n\t\t\t\t\t\t\t} else if ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t\t\t\t\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\t\r\n\t\t\t\t\t\t\t\tpoints[ 0 ] = this.getPrevKeyWith( \"pos\", h, prevKey.index - 1 )[ \"pos\" ];\r\n\t\t\t\t\t\t\t\tpoints[ 1 ] = prevXYZ;\r\n\t\t\t\t\t\t\t\tpoints[ 2 ] = nextXYZ;\r\n\t\t\t\t\t\t\t\tpoints[ 3 ] = this.getNextKeyWith( \"pos\", h, nextKey.index + 1 )[ \"pos\" ];\r\n\t\r\n\t\t\t\t\t\t\t\tscale = scale * 0.33 + 0.33;\r\n\t\r\n\t\t\t\t\t\t\t\tvar currentPoint = interpolateCatmullRom( points, scale );\r\n\t\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\t\r\n\t\t\t\t\t\t\t\t// blend\r\n\t\r\n\t\t\t\t\t\t\t\tvar vector = object.position;\r\n\t\r\n\t\t\t\t\t\t\t\tvector.x = vector.x + ( currentPoint[ 0 ] - vector.x ) * proportionalWeight;\r\n\t\t\t\t\t\t\t\tvector.y = vector.y + ( currentPoint[ 1 ] - vector.y ) * proportionalWeight;\r\n\t\t\t\t\t\t\t\tvector.z = vector.z + ( currentPoint[ 2 ] - vector.z ) * proportionalWeight;\r\n\t\r\n\t\t\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tvar forwardPoint = interpolateCatmullRom( points, scale * 1.01 );\r\n\t\r\n\t\t\t\t\t\t\t\t\ttarget.set( forwardPoint[ 0 ], forwardPoint[ 1 ], forwardPoint[ 2 ] );\r\n\t\t\t\t\t\t\t\t\ttarget.sub( vector );\r\n\t\t\t\t\t\t\t\t\ttarget.y = 0;\r\n\t\t\t\t\t\t\t\t\ttarget.normalize();\r\n\t\r\n\t\t\t\t\t\t\t\t\tvar angle = Math.atan2( target.x, target.z );\r\n\t\t\t\t\t\t\t\t\tobject.rotation.set( 0, angle, 0 );\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else if ( type === \"rot\" ) {\r\n\t\r\n\t\t\t\t\t\t\tTHREE.Quaternion.slerp( prevXYZ, nextXYZ, newQuat, scale );\r\n\t\r\n\t\t\t\t\t\t\t// Avoid paying the cost of an additional slerp if we don't have to\r\n\t\t\t\t\t\t\tif ( blending.quaternionWeight === 0 ) {\r\n\t\r\n\t\t\t\t\t\t\t\tobject.quaternion.copy( newQuat );\r\n\t\t\t\t\t\t\t\tblending.quaternionWeight = this.weight;\r\n\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.quaternionWeight );\r\n\t\t\t\t\t\t\t\tTHREE.Quaternion.slerp( object.quaternion, newQuat, object.quaternion, proportionalWeight );\r\n\t\t\t\t\t\t\t\tblending.quaternionWeight += this.weight;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else if ( type === \"scl\" ) {\r\n\t\r\n\t\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\t\r\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.scaleWeight );\r\n\t\t\t\t\t\t\tobject.scale.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\t\t\tblending.scaleWeight += this.weight;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t} )(),\r\n\t\r\n\t\tgetNextKeyWith: function ( type, h, key ) {\r\n\t\r\n\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\r\n\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t\t this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\t\r\n\t\t\t\tkey = key < keys.length - 1 ? key : keys.length - 1;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tkey = key % keys.length;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( ; key < keys.length; key ++ ) {\r\n\t\r\n\t\t\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn keys[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetPrevKeyWith: function ( type, h, key ) {\r\n\t\r\n\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\r\n\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\t\r\n\t\t\t\tkey = key > 0 ? key : 0;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tkey = key >= 0 ? key : key + keys.length;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\tfor ( ; key >= 0; key -- ) {\r\n\t\r\n\t\t\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn keys[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this.data.hierarchy[ h ].keys[ keys.length - 1 ];\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/animation/KeyFrameAnimation.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author khang duong\r\n\t * @author erik kitson\r\n\t */\r\n\t\r\n\tTHREE.KeyFrameAnimation = function ( data ) {\r\n\t\r\n\t\tthis.root = data.node;\r\n\t\tthis.data = THREE.AnimationHandler.init( data );\r\n\t\tthis.hierarchy = THREE.AnimationHandler.parse( this.root );\r\n\t\tthis.currentTime = 0;\r\n\t\tthis.timeScale = 0.001;\r\n\t\tthis.isPlaying = false;\r\n\t\tthis.isPaused = true;\r\n\t\tthis.loop = true;\r\n\t\r\n\t\t// initialize to first keyframes\r\n\t\r\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\tvar keys = this.data.hierarchy[ h ].keys,\r\n\t\t\t\tsids = this.data.hierarchy[ h ].sids,\r\n\t\t\t\tobj = this.hierarchy[ h ];\r\n\t\r\n\t\t\tif ( keys.length && sids ) {\r\n\t\r\n\t\t\t\tfor ( var s = 0; s < sids.length; s ++ ) {\r\n\t\r\n\t\t\t\t\tvar sid = sids[ s ],\r\n\t\t\t\t\t\tnext = this.getNextKeyWith( sid, h, 0 );\r\n\t\r\n\t\t\t\t\tif ( next ) {\r\n\t\r\n\t\t\t\t\t\tnext.apply( sid );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tobj.matrixAutoUpdate = false;\r\n\t\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\r\n\t\t\t\tobj.matrixWorldNeedsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.KeyFrameAnimation.prototype = {\r\n\t\r\n\t\tconstructor: THREE.KeyFrameAnimation,\r\n\t\r\n\t\tplay: function ( startTime ) {\r\n\t\r\n\t\t\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\t\r\n\t\t\tif ( this.isPlaying === false ) {\r\n\t\r\n\t\t\t\tthis.isPlaying = true;\r\n\t\r\n\t\t\t\t// reset key cache\r\n\t\r\n\t\t\t\tvar h, hl = this.hierarchy.length,\r\n\t\t\t\t\tobject,\r\n\t\t\t\t\tnode;\r\n\t\r\n\t\t\t\tfor ( h = 0; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\t\tobject = this.hierarchy[ h ];\r\n\t\t\t\t\tnode = this.data.hierarchy[ h ];\r\n\t\r\n\t\t\t\t\tif ( node.animationCache === undefined ) {\r\n\t\r\n\t\t\t\t\t\tnode.animationCache = {};\r\n\t\t\t\t\t\tnode.animationCache.prevKey = null;\r\n\t\t\t\t\t\tnode.animationCache.nextKey = null;\r\n\t\t\t\t\t\tnode.animationCache.originalMatrix = object.matrix;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\r\n\t\t\t\t\tif ( keys.length ) {\r\n\t\r\n\t\t\t\t\t\tnode.animationCache.prevKey = keys[ 0 ];\r\n\t\t\t\t\t\tnode.animationCache.nextKey = keys[ 1 ];\r\n\t\r\n\t\t\t\t\t\tthis.startTime = Math.min( keys[ 0 ].time, this.startTime );\r\n\t\t\t\t\t\tthis.endTime = Math.max( keys[ keys.length - 1 ].time, this.endTime );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.update( 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.isPaused = false;\r\n\t\r\n\t\t\tTHREE.AnimationHandler.play( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tstop: function () {\r\n\t\r\n\t\t\tthis.isPlaying = false;\r\n\t\t\tthis.isPaused  = false;\r\n\t\r\n\t\t\tTHREE.AnimationHandler.stop( this );\r\n\t\r\n\t\t\t// reset JIT matrix and remove cache\r\n\t\r\n\t\t\tfor ( var h = 0; h < this.data.hierarchy.length; h ++ ) {\r\n\t\r\n\t\t\t\tvar obj = this.hierarchy[ h ];\r\n\t\t\t\tvar node = this.data.hierarchy[ h ];\r\n\t\r\n\t\t\t\tif ( node.animationCache !== undefined ) {\r\n\t\r\n\t\t\t\t\tvar original = node.animationCache.originalMatrix;\r\n\t\r\n\t\t\t\t\toriginal.copy( obj.matrix );\r\n\t\t\t\t\tobj.matrix = original;\r\n\t\r\n\t\t\t\t\tdelete node.animationCache;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdate: function ( delta ) {\r\n\t\r\n\t\t\tif ( this.isPlaying === false ) return;\r\n\t\r\n\t\t\tthis.currentTime += delta * this.timeScale;\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar duration = this.data.length;\r\n\t\r\n\t\t\tif ( this.loop === true && this.currentTime > duration ) {\r\n\t\r\n\t\t\t\tthis.currentTime %= duration;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.currentTime = Math.min( this.currentTime, duration );\r\n\t\r\n\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\t\tvar node = this.data.hierarchy[ h ];\r\n\t\r\n\t\t\t\tvar keys = node.keys,\r\n\t\t\t\t\tanimationCache = node.animationCache;\r\n\t\r\n\t\r\n\t\t\t\tif ( keys.length ) {\r\n\t\r\n\t\t\t\t\tvar prevKey = animationCache.prevKey;\r\n\t\t\t\t\tvar nextKey = animationCache.nextKey;\r\n\t\r\n\t\t\t\t\tif ( nextKey.time <= this.currentTime ) {\r\n\t\r\n\t\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\t\r\n\t\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\t\tnextKey = keys[ prevKey.index + 1 ];\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tanimationCache.prevKey = prevKey;\r\n\t\t\t\t\t\tanimationCache.nextKey = nextKey;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( nextKey.time >= this.currentTime ) {\r\n\t\r\n\t\t\t\t\t\tprevKey.interpolate( nextKey, this.currentTime );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tprevKey.interpolate( nextKey, nextKey.time );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\r\n\t\t\t\t\tobject.matrixWorldNeedsUpdate = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetNextKeyWith: function ( sid, h, key ) {\r\n\t\r\n\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\t\tkey = key % keys.length;\r\n\t\r\n\t\t\tfor ( ; key < keys.length; key ++ ) {\r\n\t\r\n\t\t\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\t\r\n\t\t\t\t\treturn keys[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn keys[ 0 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetPrevKeyWith: function ( sid, h, key ) {\r\n\t\r\n\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\t\tkey = key >= 0 ? key : key + keys.length;\r\n\t\r\n\t\t\tfor ( ; key >= 0; key -- ) {\r\n\t\r\n\t\t\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\t\r\n\t\t\t\t\treturn keys[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn keys[ keys.length - 1 ];\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/animation/MorphAnimation.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com\r\n\t * @author willy-vvu / http://willy-vvu.github.io\r\n\t */\r\n\t\r\n\tTHREE.MorphAnimation = function ( mesh ) {\r\n\t\r\n\t\tthis.mesh = mesh;\r\n\t\tthis.frames = mesh.morphTargetInfluences.length;\r\n\t\tthis.currentTime = 0;\r\n\t\tthis.duration = 1000;\r\n\t\tthis.loop = true;\r\n\t\tthis.lastFrame = 0;\r\n\t\tthis.currentFrame = 0;\r\n\t\r\n\t\tthis.isPlaying = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimation.prototype = {\r\n\t\r\n\t\tconstructor: THREE.MorphAnimation,\r\n\t\r\n\t\tplay: function () {\r\n\t\r\n\t\t\tthis.isPlaying = true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tpause: function () {\r\n\t\r\n\t\t\tthis.isPlaying = false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdate: function ( delta ) {\r\n\t\r\n\t\t\tif ( this.isPlaying === false ) return;\r\n\t\r\n\t\t\tthis.currentTime += delta;\r\n\t\r\n\t\t\tif ( this.loop === true && this.currentTime > this.duration ) {\r\n\t\r\n\t\t\t\tthis.currentTime %= this.duration;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.currentTime = Math.min( this.currentTime, this.duration );\r\n\t\r\n\t\t\tvar frameTime = this.duration / this.frames;\r\n\t\t\tvar frame = Math.floor( this.currentTime / frameTime );\r\n\t\r\n\t\t\tvar influences = this.mesh.morphTargetInfluences;\r\n\t\r\n\t\t\tif ( frame !== this.currentFrame ) {\r\n\t\r\n\t\t\t\tinfluences[ this.lastFrame ] = 0;\r\n\t\t\t\tinfluences[ this.currentFrame ] = 1;\r\n\t\t\t\tinfluences[ frame ] = 0;\r\n\t\r\n\t\t\t\tthis.lastFrame = this.currentFrame;\r\n\t\t\t\tthis.currentFrame = frame;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar mix = ( this.currentTime % frameTime ) / frameTime;\r\n\t\r\n\t\t\tinfluences[ frame ] = mix;\r\n\t\t\tinfluences[ this.lastFrame ] = 1 - mix;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/BoxGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n\t */\r\n\t\r\n\tTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'BoxGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tdepth: depth,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tdepthSegments: depthSegments\r\n\t\t};\r\n\t\r\n\t\tthis.widthSegments = widthSegments || 1;\r\n\t\tthis.heightSegments = heightSegments || 1;\r\n\t\tthis.depthSegments = depthSegments || 1;\r\n\t\r\n\t\tvar scope = this;\r\n\t\r\n\t\tvar width_half = width / 2;\r\n\t\tvar height_half = height / 2;\r\n\t\tvar depth_half = depth / 2;\r\n\t\r\n\t\tbuildPlane( 'z', 'y', - 1, - 1, depth, height, width_half, 0 ); // px\r\n\t\tbuildPlane( 'z', 'y',   1, - 1, depth, height, - width_half, 1 ); // nx\r\n\t\tbuildPlane( 'x', 'z',   1,   1, width, depth, height_half, 2 ); // py\r\n\t\tbuildPlane( 'x', 'z',   1, - 1, width, depth, - height_half, 3 ); // ny\r\n\t\tbuildPlane( 'x', 'y',   1, - 1, width, height, depth_half, 4 ); // pz\r\n\t\tbuildPlane( 'x', 'y', - 1, - 1, width, height, - depth_half, 5 ); // nz\r\n\t\r\n\t\tfunction buildPlane( u, v, udir, vdir, width, height, depth, materialIndex ) {\r\n\t\r\n\t\t\tvar w, ix, iy,\r\n\t\t\tgridX = scope.widthSegments,\r\n\t\t\tgridY = scope.heightSegments,\r\n\t\t\twidth_half = width / 2,\r\n\t\t\theight_half = height / 2,\r\n\t\t\toffset = scope.vertices.length;\r\n\t\r\n\t\t\tif ( ( u === 'x' && v === 'y' ) || ( u === 'y' && v === 'x' ) ) {\r\n\t\r\n\t\t\t\tw = 'z';\r\n\t\r\n\t\t\t} else if ( ( u === 'x' && v === 'z' ) || ( u === 'z' && v === 'x' ) ) {\r\n\t\r\n\t\t\t\tw = 'y';\r\n\t\t\t\tgridY = scope.depthSegments;\r\n\t\r\n\t\t\t} else if ( ( u === 'z' && v === 'y' ) || ( u === 'y' && v === 'z' ) ) {\r\n\t\r\n\t\t\t\tw = 'x';\r\n\t\t\t\tgridX = scope.depthSegments;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar gridX1 = gridX + 1,\r\n\t\t\tgridY1 = gridY + 1,\r\n\t\t\tsegment_width = width / gridX,\r\n\t\t\tsegment_height = height / gridY,\r\n\t\t\tnormal = new THREE.Vector3();\r\n\t\r\n\t\t\tnormal[ w ] = depth > 0 ? 1 : - 1;\r\n\t\r\n\t\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\r\n\t\r\n\t\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\r\n\t\r\n\t\t\t\t\tvar vector = new THREE.Vector3();\r\n\t\t\t\t\tvector[ u ] = ( ix * segment_width - width_half ) * udir;\r\n\t\t\t\t\tvector[ v ] = ( iy * segment_height - height_half ) * vdir;\r\n\t\t\t\t\tvector[ w ] = depth;\r\n\t\r\n\t\t\t\t\tscope.vertices.push( vector );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\r\n\t\r\n\t\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\r\n\t\r\n\t\t\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\t\r\n\t\t\t\t\tvar uva = new THREE.Vector2( ix / gridX, 1 - iy / gridY );\r\n\t\t\t\t\tvar uvb = new THREE.Vector2( ix / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\t\tvar uvc = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\t\tvar uvd = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - iy / gridY );\r\n\t\r\n\t\t\t\t\tvar face = new THREE.Face3( a + offset, b + offset, d + offset );\r\n\t\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\t\tface.materialIndex = materialIndex;\r\n\t\r\n\t\t\t\t\tscope.faces.push( face );\r\n\t\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\t\r\n\t\t\t\t\tface = new THREE.Face3( b + offset, c + offset, d + offset );\r\n\t\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\t\tface.materialIndex = materialIndex;\r\n\t\r\n\t\t\t\t\tscope.faces.push( face );\r\n\t\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.mergeVertices();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\r\n\t\r\n\tTHREE.BoxGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.BoxGeometry(\r\n\t\t\tthis.parameters.width,\r\n\t\t\tthis.parameters.height,\r\n\t\t\tthis.parameters.depth,\r\n\t\t\tthis.parameters.widthSegments,\r\n\t\t\tthis.parameters.heightSegments,\r\n\t\t\tthis.parameters.depthSegments\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CubeGeometry = THREE.BoxGeometry; // backwards compatibility\r\n\t\r\n\t// File:src/extras/geometries/CircleGeometry.js\r\n\t\r\n\t/**\r\n\t * @author hughes\r\n\t */\r\n\t\r\n\tTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'CircleGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tsegments: segments,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 50;\r\n\t\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\t\r\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\t\r\n\t\tvar i, uvs = [],\r\n\t\tcenter = new THREE.Vector3(), centerUV = new THREE.Vector2( 0.5, 0.5 );\r\n\t\r\n\t\tthis.vertices.push( center );\r\n\t\tuvs.push( centerUV );\r\n\t\r\n\t\tfor ( i = 0; i <= segments; i ++ ) {\r\n\t\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvar segment = thetaStart + i / segments * thetaLength;\r\n\t\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\t\r\n\t\t\tthis.vertices.push( vertex );\r\n\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / radius + 1 ) / 2, ( vertex.y / radius + 1 ) / 2 ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\t\r\n\t\tfor ( i = 1; i <= segments; i ++ ) {\r\n\t\r\n\t\t\tthis.faces.push( new THREE.Face3( i, i + 1, 0, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ i ].clone(), uvs[ i + 1 ].clone(), centerUV.clone() ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\r\n\t\r\n\tTHREE.CircleGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.CircleGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.segments,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/CircleBufferGeometry.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.CircleBufferGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tthis.type = 'CircleBufferGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tsegments: segments,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 50;\r\n\t\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\t\r\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\t\r\n\t\tvar vertices = segments + 2;\r\n\t\r\n\t\tvar positions = new Float32Array( vertices * 3 );\r\n\t\tvar normals = new Float32Array( vertices * 3 );\r\n\t\tvar uvs = new Float32Array( vertices * 2 );\r\n\t\r\n\t\t// center data is already zero, but need to set a few extras\r\n\t\tnormals[ 3 ] = 1.0;\r\n\t\tuvs[ 0 ] = 0.5;\r\n\t\tuvs[ 1 ] = 0.5;\r\n\t\r\n\t\tfor ( var s = 0, i = 3, ii = 2 ; s <= segments; s ++, i += 3, ii += 2 ) {\r\n\t\r\n\t\t\tvar segment = thetaStart + s / segments * thetaLength;\r\n\t\r\n\t\t\tpositions[ i ] = radius * Math.cos( segment );\r\n\t\t\tpositions[ i + 1 ] = radius * Math.sin( segment );\r\n\t\r\n\t\t\tnormals[ i + 2 ] = 1; // normal z\r\n\t\r\n\t\t\tuvs[ ii ] = ( positions[ i ] / radius + 1 ) / 2;\r\n\t\t\tuvs[ ii + 1 ] = ( positions[ i + 1 ] / radius + 1 ) / 2;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar indices = [];\r\n\t\r\n\t\tfor ( var i = 1; i <= segments; i ++ ) {\r\n\t\r\n\t\t\tindices.push( i );\r\n\t\t\tindices.push( i + 1 );\r\n\t\t\tindices.push( 0 );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\t\r\n\t\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CircleBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.CircleBufferGeometry.prototype.constructor = THREE.CircleBufferGeometry;\r\n\t\r\n\tTHREE.CircleBufferGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.CircleBufferGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.segments,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/CylinderGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'CylinderGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradiusTop: radiusTop,\r\n\t\t\tradiusBottom: radiusBottom,\r\n\t\t\theight: height,\r\n\t\t\tradialSegments: radialSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\topenEnded: openEnded,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\r\n\t\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\r\n\t\theight = height !== undefined ? height : 100;\r\n\t\r\n\t\tradialSegments = radialSegments || 8;\r\n\t\theightSegments = heightSegments || 1;\r\n\t\r\n\t\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : 2 * Math.PI;\r\n\t\r\n\t\tvar heightHalf = height / 2;\r\n\t\r\n\t\tvar x, y, vertices = [], uvs = [];\r\n\t\r\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\t\r\n\t\t\tvar verticesRow = [];\r\n\t\t\tvar uvsRow = [];\r\n\t\r\n\t\t\tvar v = y / heightSegments;\r\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\t\r\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\t\r\n\t\t\t\tvar u = x / radialSegments;\r\n\t\r\n\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\r\n\t\t\t\tvertex.y = - v * height + heightHalf;\r\n\t\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\r\n\t\r\n\t\t\t\tthis.vertices.push( vertex );\r\n\t\r\n\t\t\t\tverticesRow.push( this.vertices.length - 1 );\r\n\t\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvertices.push( verticesRow );\r\n\t\t\tuvs.push( uvsRow );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\r\n\t\tvar na, nb;\r\n\t\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\t\r\n\t\t\tif ( radiusTop !== 0 ) {\r\n\t\r\n\t\t\t\tna = this.vertices[ vertices[ 0 ][ x ] ].clone();\r\n\t\t\t\tnb = this.vertices[ vertices[ 0 ][ x + 1 ] ].clone();\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tna = this.vertices[ vertices[ 1 ][ x ] ].clone();\r\n\t\t\t\tnb = this.vertices[ vertices[ 1 ][ x + 1 ] ].clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tna.setY( Math.sqrt( na.x * na.x + na.z * na.z ) * tanTheta ).normalize();\r\n\t\t\tnb.setY( Math.sqrt( nb.x * nb.x + nb.z * nb.z ) * tanTheta ).normalize();\r\n\t\r\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\t\r\n\t\t\t\tvar v1 = vertices[ y ][ x ];\r\n\t\t\t\tvar v2 = vertices[ y + 1 ][ x ];\r\n\t\t\t\tvar v3 = vertices[ y + 1 ][ x + 1 ];\r\n\t\t\t\tvar v4 = vertices[ y ][ x + 1 ];\r\n\t\r\n\t\t\t\tvar n1 = na.clone();\r\n\t\t\t\tvar n2 = na.clone();\r\n\t\t\t\tvar n3 = nb.clone();\r\n\t\t\t\tvar n4 = nb.clone();\r\n\t\r\n\t\t\t\tvar uv1 = uvs[ y ][ x ].clone();\r\n\t\t\t\tvar uv2 = uvs[ y + 1 ][ x ].clone();\r\n\t\t\t\tvar uv3 = uvs[ y + 1 ][ x + 1 ].clone();\r\n\t\t\t\tvar uv4 = uvs[ y ][ x + 1 ].clone();\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// top cap\r\n\t\r\n\t\tif ( openEnded === false && radiusTop > 0 ) {\r\n\t\r\n\t\t\tthis.vertices.push( new THREE.Vector3( 0, heightHalf, 0 ) );\r\n\t\r\n\t\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\t\r\n\t\t\t\tvar v1 = vertices[ 0 ][ x ];\r\n\t\t\t\tvar v2 = vertices[ 0 ][ x + 1 ];\r\n\t\t\t\tvar v3 = this.vertices.length - 1;\r\n\t\r\n\t\t\t\tvar n1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\t\tvar n2 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\t\tvar n3 = new THREE.Vector3( 0, 1, 0 );\r\n\t\r\n\t\t\t\tvar uv1 = uvs[ 0 ][ x ].clone();\r\n\t\t\t\tvar uv2 = uvs[ 0 ][ x + 1 ].clone();\r\n\t\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 0 );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ], undefined, 1 ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// bottom cap\r\n\t\r\n\t\tif ( openEnded === false && radiusBottom > 0 ) {\r\n\t\r\n\t\t\tthis.vertices.push( new THREE.Vector3( 0, - heightHalf, 0 ) );\r\n\t\r\n\t\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\t\r\n\t\t\t\tvar v1 = vertices[ heightSegments ][ x + 1 ];\r\n\t\t\t\tvar v2 = vertices[ heightSegments ][ x ];\r\n\t\t\t\tvar v3 = this.vertices.length - 1;\r\n\t\r\n\t\t\t\tvar n1 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\t\tvar n2 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\t\tvar n3 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\r\n\t\t\t\tvar uv1 = uvs[ heightSegments ][ x + 1 ].clone();\r\n\t\t\t\tvar uv2 = uvs[ heightSegments ][ x ].clone();\r\n\t\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 1 );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ], undefined, 2 ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\r\n\t\r\n\tTHREE.CylinderGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.CylinderGeometry(\r\n\t\t\tthis.parameters.radiusTop,\r\n\t\t\tthis.parameters.radiusBottom,\r\n\t\t\tthis.parameters.height,\r\n\t\t\tthis.parameters.radialSegments,\r\n\t\t\tthis.parameters.heightSegments,\r\n\t\t\tthis.parameters.openEnded,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/EdgesGeometry.js\r\n\t\r\n\t/**\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.EdgesGeometry = function ( geometry, thresholdAngle ) {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\t\r\n\t\tvar thresholdDot = Math.cos( THREE.Math.degToRad( thresholdAngle ) );\r\n\t\r\n\t\tvar edge = [ 0, 0 ], hash = {};\r\n\t\tvar sortFunction = function ( a, b ) {\r\n\t\r\n\t\t\treturn a - b;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\t\r\n\t\tvar geometry2;\r\n\t\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\tgeometry2 = new THREE.Geometry();\r\n\t\t\tgeometry2.fromBufferGeometry( geometry );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tgeometry2 = geometry.clone();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tgeometry2.mergeVertices();\r\n\t\tgeometry2.computeFaceNormals();\r\n\t\r\n\t\tvar vertices = geometry2.vertices;\r\n\t\tvar faces = geometry2.faces;\r\n\t\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\t\r\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge.sort( sortFunction );\r\n\t\r\n\t\t\t\tvar key = edge.toString();\r\n\t\r\n\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\t\r\n\t\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\thash[ key ].face2 = i;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar coords = [];\r\n\t\r\n\t\tfor ( var key in hash ) {\r\n\t\r\n\t\t\tvar h = hash[ key ];\r\n\t\r\n\t\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) <= thresholdDot ) {\r\n\t\r\n\t\t\t\tvar vertex = vertices[ h.vert1 ];\r\n\t\t\t\tcoords.push( vertex.x );\r\n\t\t\t\tcoords.push( vertex.y );\r\n\t\t\t\tcoords.push( vertex.z );\r\n\t\r\n\t\t\t\tvertex = vertices[ h.vert2 ];\r\n\t\t\t\tcoords.push( vertex.x );\r\n\t\t\t\tcoords.push( vertex.y );\r\n\t\t\t\tcoords.push( vertex.z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( coords ), 3 ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EdgesGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.EdgesGeometry.prototype.constructor = THREE.EdgesGeometry;\r\n\t\r\n\t// File:src/extras/geometries/ExtrudeGeometry.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t *\r\n\t * Creates extruded geometry from a path shape.\r\n\t *\r\n\t * parameters = {\r\n\t *\r\n\t *  curveSegments: <int>, // number of points on the curves\r\n\t *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n\t *  amount: <int>, // Depth to extrude the shape\r\n\t *\r\n\t *  bevelEnabled: <bool>, // turn on bevel\r\n\t *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n\t *  bevelSize: <float>, // how far from shape outline is bevel\r\n\t *  bevelSegments: <int>, // number of bevel layers\r\n\t *\r\n\t *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n\t *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n\t *\r\n\t *  uvGenerator: <Object> // object that provides UV generator functions\r\n\t *\r\n\t * }\r\n\t **/\r\n\t\r\n\tTHREE.ExtrudeGeometry = function ( shapes, options ) {\r\n\t\r\n\t\tif ( typeof( shapes ) === \"undefined\" ) {\r\n\t\r\n\t\t\tshapes = [];\r\n\t\t\treturn;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'ExtrudeGeometry';\r\n\t\r\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\t\r\n\t\tthis.addShapeList( shapes, options );\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t\t// can't really use automatic vertex normals\r\n\t\t// as then front and back sides get smoothed too\r\n\t\t// should do separate smoothing just for sides\r\n\t\r\n\t\t//this.computeVertexNormals();\r\n\t\r\n\t\t//console.log( \"took\", ( Date.now() - startTime ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\r\n\t\r\n\tTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\t\r\n\t\tvar sl = shapes.length;\r\n\t\r\n\t\tfor ( var s = 0; s < sl; s ++ ) {\r\n\t\r\n\t\t\tvar shape = shapes[ s ];\r\n\t\t\tthis.addShape( shape, options );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\r\n\t\r\n\t\tvar amount = options.amount !== undefined ? options.amount : 100;\r\n\t\r\n\t\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\r\n\t\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\r\n\t\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\t\r\n\t\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\r\n\t\r\n\t\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\t\r\n\t\tvar steps = options.steps !== undefined ? options.steps : 1;\r\n\t\r\n\t\tvar extrudePath = options.extrudePath;\r\n\t\tvar extrudePts, extrudeByPath = false;\r\n\t\r\n\t\t// Use default WorldUVGenerator if no UV generators are specified.\r\n\t\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\r\n\t\r\n\t\tvar splineTube, binormal, normal, position2;\r\n\t\tif ( extrudePath ) {\r\n\t\r\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\t\r\n\t\t\textrudeByPath = true;\r\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\t\r\n\t\t\t// SETUP TNB variables\r\n\t\r\n\t\t\t// Reuse TNB from TubeGeomtry for now.\r\n\t\t\t// TODO1 - have a .isClosed in spline?\r\n\t\r\n\t\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames( extrudePath, steps, false );\r\n\t\r\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\t\r\n\t\t\tbinormal = new THREE.Vector3();\r\n\t\t\tnormal = new THREE.Vector3();\r\n\t\t\tposition2 = new THREE.Vector3();\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Safeguards if bevels are not enabled\r\n\t\r\n\t\tif ( ! bevelEnabled ) {\r\n\t\r\n\t\t\tbevelSegments = 0;\r\n\t\t\tbevelThickness = 0;\r\n\t\t\tbevelSize = 0;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Variables initialization\r\n\t\r\n\t\tvar ahole, h, hl; // looping of holes\r\n\t\tvar scope = this;\r\n\t\r\n\t\tvar shapesOffset = this.vertices.length;\r\n\t\r\n\t\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\t\r\n\t\tvar vertices = shapePoints.shape;\r\n\t\tvar holes = shapePoints.holes;\r\n\t\r\n\t\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\r\n\t\r\n\t\tif ( reverse ) {\r\n\t\r\n\t\t\tvertices = vertices.reverse();\r\n\t\r\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\t\r\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tahole = holes[ h ];\r\n\t\r\n\t\t\t\tif ( THREE.Shape.Utils.isClockWise( ahole ) ) {\r\n\t\r\n\t\t\t\t\tholes[ h ] = ahole.reverse();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tvar faces = THREE.Shape.Utils.triangulateShape ( vertices, holes );\r\n\t\r\n\t\t/* Vertices */\r\n\t\r\n\t\tvar contour = vertices; // vertices has all points but contour has only points of circumference\r\n\t\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\tahole = holes[ h ];\r\n\t\r\n\t\t\tvertices = vertices.concat( ahole );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tfunction scalePt2 ( pt, vec, size ) {\r\n\t\r\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\t\r\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar b, bs, t, z,\r\n\t\t\tvert, vlen = vertices.length,\r\n\t\t\tface, flen = faces.length;\r\n\t\r\n\t\r\n\t\t// Find directions for point movement\r\n\t\r\n\t\r\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\t\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\t\r\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t\t//\r\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\t\r\n\t\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\r\n\t\r\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\t\r\n\t\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\r\n\t\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\r\n\t\r\n\t\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\t\r\n\t\t\t// check for collinear edges\r\n\t\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\t\r\n\t\t\tif ( Math.abs( collinear0 ) > EPSILON ) {\r\n\t\r\n\t\t\t\t// not collinear\r\n\t\r\n\t\t\t\t// length of vectors for normalizing\r\n\t\r\n\t\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\t\r\n\t\t\t\t// shift adjacent points by unit vectors to the left\r\n\t\r\n\t\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\t\r\n\t\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\t\r\n\t\t\t\t// scaling factor for v_prev to intersection point\r\n\t\r\n\t\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\r\n\t\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\t\r\n\t\t\t\t// vector from inPt to intersection point\r\n\t\r\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\t\r\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t\t//  but prevent crazy spikes\r\n\t\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\t\r\n\t\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// handle special case of collinear edges\r\n\t\r\n\t\t\t\tvar direction_eq = false;\t\t// assumes: opposite\r\n\t\t\t\tif ( v_prev_x > EPSILON ) {\r\n\t\r\n\t\t\t\t\tif ( v_next_x > EPSILON ) {\r\n\t\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tif ( v_prev_x < - EPSILON ) {\r\n\t\r\n\t\t\t\t\t\tif ( v_next_x < - EPSILON ) {\r\n\t\r\n\t\t\t\t\t\t\tdirection_eq = true;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\t\r\n\t\t\t\t\t\t\tdirection_eq = true;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( direction_eq ) {\r\n\t\r\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\t\tv_trans_y =  v_prev_x;\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tvar contourMovements = [];\r\n\t\r\n\t\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\t\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\t\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\t// console.log('i,j,k', i, j , k)\r\n\t\r\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\t\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\tahole = holes[ h ];\r\n\t\r\n\t\t\toneHoleMovements = [];\r\n\t\r\n\t\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\t\r\n\t\t\t\tif ( j === il ) j = 0;\r\n\t\t\t\tif ( k === il ) k = 0;\r\n\t\r\n\t\t\t\t//  (j)---(i)---(k)\r\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tholesMovements.push( oneHoleMovements );\r\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\t\r\n\t\tfor ( b = 0; b < bevelSegments; b ++ ) {\r\n\t\r\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\t\r\n\t\t\tt = b / bevelSegments;\r\n\t\t\tz = bevelThickness * ( 1 - t );\r\n\t\r\n\t\t\t//z = bevelThickness * t;\r\n\t\t\tbs = bevelSize * ( Math.sin ( t * Math.PI / 2 ) ); // curved\r\n\t\t\t//bs = bevelSize * t; // linear\r\n\t\r\n\t\t\t// contract shape\r\n\t\r\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\r\n\t\t\t\tv( vert.x, vert.y,  - z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// expand holes\r\n\t\r\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tahole = holes[ h ];\r\n\t\t\t\toneHoleMovements = holesMovements[ h ];\r\n\t\r\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\t\r\n\t\t\t\t\tv( vert.x, vert.y,  - z );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tbs = bevelSize;\r\n\t\r\n\t\t// Back facing vertices\r\n\t\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\t\r\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\t\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\t\r\n\t\t\t\tv( vert.x, vert.y, 0 );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\t\r\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\t\r\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\t\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Add stepped vertices...\r\n\t\t// Including front facing vertices\r\n\t\r\n\t\tvar s;\r\n\t\r\n\t\tfor ( s = 1; s <= steps; s ++ ) {\r\n\t\r\n\t\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\t\r\n\t\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\t\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\t\r\n\t\t\t\t\tv( vert.x, vert.y, amount / steps * s );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\t\r\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\t\r\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\t\r\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Add bevel segments planes\r\n\t\r\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\t\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\t\r\n\t\t\tt = b / bevelSegments;\r\n\t\t\tz = bevelThickness * ( 1 - t );\r\n\t\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\r\n\t\t\tbs = bevelSize * Math.sin ( t * Math.PI / 2 );\r\n\t\r\n\t\t\t// contract shape\r\n\t\r\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// expand holes\r\n\t\r\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tahole = holes[ h ];\r\n\t\t\t\toneHoleMovements = holesMovements[ h ];\r\n\t\r\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\t\r\n\t\t\t\t\tif ( ! extrudeByPath ) {\r\n\t\r\n\t\t\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t/* Faces */\r\n\t\r\n\t\t// Top and bottom faces\r\n\t\r\n\t\tbuildLidFaces();\r\n\t\r\n\t\t// Sides faces\r\n\t\r\n\t\tbuildSideFaces();\r\n\t\r\n\t\r\n\t\t/////  Internal functions\r\n\t\r\n\t\tfunction buildLidFaces() {\r\n\t\r\n\t\t\tif ( bevelEnabled ) {\r\n\t\r\n\t\t\t\tvar layer = 0; // steps + 1\r\n\t\t\t\tvar offset = vlen * layer;\r\n\t\r\n\t\t\t\t// Bottom faces\r\n\t\r\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\t\r\n\t\t\t\t\tface = faces[ i ];\r\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\t\toffset = vlen * layer;\r\n\t\r\n\t\t\t\t// Top faces\r\n\t\r\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\t\r\n\t\t\t\t\tface = faces[ i ];\r\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// Bottom faces\r\n\t\r\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\t\r\n\t\t\t\t\tface = faces[ i ];\r\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Top faces\r\n\t\r\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\t\r\n\t\t\t\t\tface = faces[ i ];\r\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Create faces for the z-sides of the shape\r\n\t\r\n\t\tfunction buildSideFaces() {\r\n\t\r\n\t\t\tvar layeroffset = 0;\r\n\t\t\tsidewalls( contour, layeroffset );\r\n\t\t\tlayeroffset += contour.length;\r\n\t\r\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tahole = holes[ h ];\r\n\t\t\t\tsidewalls( ahole, layeroffset );\r\n\t\r\n\t\t\t\t//, true\r\n\t\t\t\tlayeroffset += ahole.length;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction sidewalls( contour, layeroffset ) {\r\n\t\r\n\t\t\tvar j, k;\r\n\t\t\ti = contour.length;\r\n\t\r\n\t\t\twhile ( -- i >= 0 ) {\r\n\t\r\n\t\t\t\tj = i;\r\n\t\t\t\tk = i - 1;\r\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\t\r\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\t\r\n\t\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\r\n\t\r\n\t\t\t\tfor ( s = 0; s < sl; s ++ ) {\r\n\t\r\n\t\t\t\t\tvar slen1 = vlen * s;\r\n\t\t\t\t\tvar slen2 = vlen * ( s + 1 );\r\n\t\r\n\t\t\t\t\tvar a = layeroffset + j + slen1,\r\n\t\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\t\td = layeroffset + j + slen2;\r\n\t\r\n\t\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tfunction v( x, y, z ) {\r\n\t\r\n\t\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction f3( a, b, c ) {\r\n\t\r\n\t\t\ta += shapesOffset;\r\n\t\t\tb += shapesOffset;\r\n\t\t\tc += shapesOffset;\r\n\t\r\n\t\t\tscope.faces.push( new THREE.Face3( a, b, c ) );\r\n\t\r\n\t\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\r\n\t\r\n\t\t\tscope.faceVertexUvs[ 0 ].push( uvs );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\r\n\t\r\n\t\t\ta += shapesOffset;\r\n\t\t\tb += shapesOffset;\r\n\t\t\tc += shapesOffset;\r\n\t\t\td += shapesOffset;\r\n\t\r\n\t\t\tscope.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tscope.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\r\n\t\t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\r\n\t\r\n\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\r\n\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ExtrudeGeometry.WorldUVGenerator = {\r\n\t\r\n\t\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\r\n\t\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\r\n\t\t\tvar a = vertices[ indexA ];\r\n\t\t\tvar b = vertices[ indexB ];\r\n\t\t\tvar c = vertices[ indexC ];\r\n\t\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.x, a.y ),\r\n\t\t\t\tnew THREE.Vector2( b.x, b.y ),\r\n\t\t\t\tnew THREE.Vector2( c.x, c.y )\r\n\t\t\t];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\r\n\t\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\r\n\t\t\tvar a = vertices[ indexA ];\r\n\t\t\tvar b = vertices[ indexB ];\r\n\t\t\tvar c = vertices[ indexC ];\r\n\t\t\tvar d = vertices[ indexD ];\r\n\t\r\n\t\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\r\n\t\r\n\t\t\t\treturn [\r\n\t\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\r\n\t\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\r\n\t\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\r\n\t\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\r\n\t\t\t\t];\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\treturn [\r\n\t\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\r\n\t\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\r\n\t\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\r\n\t\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\r\n\t\t\t\t];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/ShapeGeometry.js\r\n\t\r\n\t/**\r\n\t * @author jonobr1 / http://jonobr1.com\r\n\t *\r\n\t * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n\t * ExtrudeGeometry.\r\n\t *\r\n\t * parameters = {\r\n\t *\r\n\t *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n\t *\r\n\t *\tmaterial: <int> // material index for front and back faces\r\n\t *\tuvGenerator: <Object> // object that provides UV generator functions\r\n\t *\r\n\t * }\r\n\t **/\r\n\t\r\n\tTHREE.ShapeGeometry = function ( shapes, options ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'ShapeGeometry';\r\n\t\r\n\t\tif ( Array.isArray( shapes ) === false ) shapes = [ shapes ];\r\n\t\r\n\t\tthis.addShapeList( shapes, options );\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\r\n\t\r\n\t/**\r\n\t * Add an array of shapes to THREE.ShapeGeometry.\r\n\t */\r\n\tTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\t\r\n\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tthis.addShape( shapes[ i ], options );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t/**\r\n\t * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n\t */\r\n\tTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\r\n\t\r\n\t\tif ( options === undefined ) options = {};\r\n\t\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\t\r\n\t\tvar material = options.material;\r\n\t\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar i, l, hole;\r\n\t\r\n\t\tvar shapesOffset = this.vertices.length;\r\n\t\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\t\r\n\t\tvar vertices = shapePoints.shape;\r\n\t\tvar holes = shapePoints.holes;\r\n\t\r\n\t\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\r\n\t\r\n\t\tif ( reverse ) {\r\n\t\r\n\t\t\tvertices = vertices.reverse();\r\n\t\r\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\r\n\t\r\n\t\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\thole = holes[ i ];\r\n\t\r\n\t\t\t\tif ( THREE.Shape.Utils.isClockWise( hole ) ) {\r\n\t\r\n\t\t\t\t\tholes[ i ] = hole.reverse();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treverse = false;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar faces = THREE.Shape.Utils.triangulateShape( vertices, holes );\r\n\t\r\n\t\t// Vertices\r\n\t\r\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\t\r\n\t\t\thole = holes[ i ];\r\n\t\t\tvertices = vertices.concat( hole );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar vert, vlen = vertices.length;\r\n\t\tvar face, flen = faces.length;\r\n\t\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\t\r\n\t\t\tvert = vertices[ i ];\r\n\t\r\n\t\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\t\r\n\t\t\tface = faces[ i ];\r\n\t\r\n\t\t\tvar a = face[ 0 ] + shapesOffset;\r\n\t\t\tvar b = face[ 1 ] + shapesOffset;\r\n\t\t\tvar c = face[ 2 ] + shapesOffset;\r\n\t\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/LatheGeometry.js\r\n\t\r\n\t/**\r\n\t * @author astrodud / http://astrodud.isgreat.org/\r\n\t * @author zz85 / https://github.com/zz85\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\t// points - to create a closed torus, one must use a set of points \r\n\t//    like so: [ a, b, c, d, a ], see first is the same as last.\r\n\t// segments - the number of circumference segments to create\r\n\t// phiStart - the starting radian\r\n\t// phiLength - the radian (0 to 2*PI) range of the lathed section\r\n\t//    2*pi is a closed lathe, less than 2PI is a portion.\r\n\t\r\n\tTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'LatheGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tpoints: points,\r\n\t\t\tsegments: segments,\r\n\t\t\tphiStart: phiStart,\r\n\t\t\tphiLength: phiLength\r\n\t\t};\r\n\t\r\n\t\tsegments = segments || 12;\r\n\t\tphiStart = phiStart || 0;\r\n\t\tphiLength = phiLength || 2 * Math.PI;\r\n\t\r\n\t\tvar inversePointLength = 1.0 / ( points.length - 1 );\r\n\t\tvar inverseSegments = 1.0 / segments;\r\n\t\r\n\t\tfor ( var i = 0, il = segments; i <= il; i ++ ) {\r\n\t\r\n\t\t\tvar phi = phiStart + i * inverseSegments * phiLength;\r\n\t\r\n\t\t\tvar c = Math.cos( phi ),\r\n\t\t\t\ts = Math.sin( phi );\r\n\t\r\n\t\t\tfor ( var j = 0, jl = points.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\tvar pt = points[ j ];\r\n\t\r\n\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\r\n\t\t\t\tvertex.x = c * pt.x - s * pt.y;\r\n\t\t\t\tvertex.y = s * pt.x + c * pt.y;\r\n\t\t\t\tvertex.z = pt.z;\r\n\t\r\n\t\t\t\tthis.vertices.push( vertex );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar np = points.length;\r\n\t\r\n\t\tfor ( var i = 0, il = segments; i < il; i ++ ) {\r\n\t\r\n\t\t\tfor ( var j = 0, jl = points.length - 1; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\tvar base = j + np * i;\r\n\t\t\t\tvar a = base;\r\n\t\t\t\tvar b = base + np;\r\n\t\t\t\tvar c = base + 1 + np;\r\n\t\t\t\tvar d = base + 1;\r\n\t\r\n\t\t\t\tvar u0 = i * inverseSegments;\r\n\t\t\t\tvar v0 = j * inversePointLength;\r\n\t\t\t\tvar u1 = u0 + inverseSegments;\r\n\t\t\t\tvar v1 = v0 + inversePointLength;\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\t\r\n\t\t\t\t\tnew THREE.Vector2( u0, v0 ),\r\n\t\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\t\r\n\t\t\t\t] );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\t\r\n\t\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\t\tnew THREE.Vector2( u1, v1 ),\r\n\t\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\t\r\n\t\t\t\t] );\r\n\t\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.mergeVertices();\r\n\t\tthis.computeFaceNormals();\r\n\t\tthis.computeVertexNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\r\n\t\r\n\t// File:src/extras/geometries/PlaneGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n\t */\r\n\t\r\n\tTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'PlaneGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments\r\n\t\t};\r\n\t\r\n\t\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\r\n\t\r\n\tTHREE.PlaneGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.PlaneGeometry(\r\n\t\t\tthis.parameters.width,\r\n\t\t\tthis.parameters.height,\r\n\t\t\tthis.parameters.widthSegments,\r\n\t\t\tthis.parameters.heightSegments\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/PlaneBufferGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n\t */\r\n\t\r\n\tTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tthis.type = 'PlaneBufferGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments\r\n\t\t};\r\n\t\r\n\t\tvar width_half = width / 2;\r\n\t\tvar height_half = height / 2;\r\n\t\r\n\t\tvar gridX = Math.floor( widthSegments ) || 1;\r\n\t\tvar gridY = Math.floor( heightSegments ) || 1;\r\n\t\r\n\t\tvar gridX1 = gridX + 1;\r\n\t\tvar gridY1 = gridY + 1;\r\n\t\r\n\t\tvar segment_width = width / gridX;\r\n\t\tvar segment_height = height / gridY;\r\n\t\r\n\t\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\r\n\t\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\r\n\t\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\r\n\t\r\n\t\tvar offset = 0;\r\n\t\tvar offset2 = 0;\r\n\t\r\n\t\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\t\r\n\t\t\tvar y = iy * segment_height - height_half;\r\n\t\r\n\t\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\t\r\n\t\t\t\tvar x = ix * segment_width - width_half;\r\n\t\r\n\t\t\t\tvertices[ offset ] = x;\r\n\t\t\t\tvertices[ offset + 1 ] = - y;\r\n\t\r\n\t\t\t\tnormals[ offset + 2 ] = 1;\r\n\t\r\n\t\t\t\tuvs[ offset2 ] = ix / gridX;\r\n\t\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\r\n\t\r\n\t\t\t\toffset += 3;\r\n\t\t\t\toffset2 += 2;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\toffset = 0;\r\n\t\r\n\t\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\r\n\t\r\n\t\tfor ( var iy = 0; iy < gridY; iy ++ ) {\r\n\t\r\n\t\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\r\n\t\r\n\t\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\t\r\n\t\t\t\tindices[ offset ] = a;\r\n\t\t\t\tindices[ offset + 1 ] = b;\r\n\t\t\t\tindices[ offset + 2 ] = d;\r\n\t\r\n\t\t\t\tindices[ offset + 3 ] = b;\r\n\t\t\t\tindices[ offset + 4 ] = c;\r\n\t\t\t\tindices[ offset + 5 ] = d;\r\n\t\r\n\t\t\t\toffset += 6;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\r\n\t\r\n\tTHREE.PlaneBufferGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.PlaneBufferGeometry(\r\n\t\t\tthis.parameters.width,\r\n\t\t\tthis.parameters.height,\r\n\t\t\tthis.parameters.widthSegments,\r\n\t\t\tthis.parameters.heightSegments\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/RingGeometry.js\r\n\t\r\n\t/**\r\n\t * @author Kaleb Murphy\r\n\t */\r\n\t\r\n\tTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'RingGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tinnerRadius: innerRadius,\r\n\t\t\touterRadius: outerRadius,\r\n\t\t\tthetaSegments: thetaSegments,\r\n\t\t\tphiSegments: phiSegments,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tinnerRadius = innerRadius || 0;\r\n\t\touterRadius = outerRadius || 50;\r\n\t\r\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\t\r\n\t\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\t\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 8;\r\n\t\r\n\t\tvar i, o, uvs = [], radius = innerRadius, radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\t\r\n\t\tfor ( i = 0; i < phiSegments + 1; i ++ ) {\r\n\t\r\n\t\t\t// concentric circles inside ring\r\n\t\r\n\t\t\tfor ( o = 0; o < thetaSegments + 1; o ++ ) {\r\n\t\r\n\t\t\t\t// number of segments per circle\r\n\t\r\n\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\tvar segment = thetaStart + o / thetaSegments * thetaLength;\r\n\t\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\t\tvertex.y = radius * Math.sin( segment );\r\n\t\r\n\t\t\t\tthis.vertices.push( vertex );\r\n\t\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / outerRadius + 1 ) / 2, ( vertex.y / outerRadius + 1 ) / 2 ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tradius += radiusStep;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\t\r\n\t\tfor ( i = 0; i < phiSegments; i ++ ) {\r\n\t\r\n\t\t\t// concentric circles inside ring\r\n\t\r\n\t\t\tvar thetaSegment = i * ( thetaSegments + 1 );\r\n\t\r\n\t\t\tfor ( o = 0; o < thetaSegments ; o ++ ) {\r\n\t\r\n\t\t\t\t// number of segments per circle\r\n\t\r\n\t\t\t\tvar segment = o + thetaSegment;\r\n\t\r\n\t\t\t\tvar v1 = segment;\r\n\t\t\t\tvar v2 = segment + thetaSegments + 1;\r\n\t\t\t\tvar v3 = segment + thetaSegments + 2;\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ] );\r\n\t\r\n\t\t\t\tv1 = segment;\r\n\t\t\t\tv2 = segment + thetaSegments + 2;\r\n\t\t\t\tv3 = segment + 1;\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\r\n\t\r\n\tTHREE.RingGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.RingGeometry(\r\n\t\t\tthis.parameters.innerRadius,\r\n\t\t\tthis.parameters.outerRadius,\r\n\t\t\tthis.parameters.thetaSegments,\r\n\t\t\tthis.parameters.phiSegments,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/SphereGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'SphereGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tphiStart: phiStart,\r\n\t\t\tphiLength: phiLength,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tthis.fromBufferGeometry( new THREE.SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\r\n\t\r\n\tTHREE.SphereGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.SphereGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.widthSegments,\r\n\t\t\tthis.parameters.heightSegments,\r\n\t\t\tthis.parameters.phiStart,\r\n\t\t\tthis.parameters.phiLength,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/SphereBufferGeometry.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t * based on THREE.SphereGeometry\r\n\t */\r\n\t\r\n\tTHREE.SphereBufferGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tthis.type = 'SphereBufferGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tphiStart: phiStart,\r\n\t\t\tphiLength: phiLength,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 50;\r\n\t\r\n\t\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\t\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\t\r\n\t\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\t\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\t\r\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\t\r\n\t\tvar thetaEnd = thetaStart + thetaLength;\r\n\t\r\n\t\tvar vertexCount = ( ( widthSegments + 1 ) * ( heightSegments + 1 ) );\r\n\t\r\n\t\tvar positions = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\t\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\t\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\t\r\n\t\tvar index = 0, vertices = [], normal = new THREE.Vector3();\r\n\t\r\n\t\tfor ( var y = 0; y <= heightSegments; y ++ ) {\r\n\t\r\n\t\t\tvar verticesRow = [];\r\n\t\r\n\t\t\tvar v = y / heightSegments;\r\n\t\r\n\t\t\tfor ( var x = 0; x <= widthSegments; x ++ ) {\r\n\t\r\n\t\t\t\tvar u = x / widthSegments;\r\n\t\r\n\t\t\t\tvar px = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\t\tvar py = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\t\tvar pz = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\r\n\t\t\t\tnormal.set( px, py, pz ).normalize();\r\n\t\r\n\t\t\t\tpositions.setXYZ( index, px, py, pz );\r\n\t\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\t\t\t\tuvs.setXY( index, u, 1 - v );\r\n\t\r\n\t\t\t\tverticesRow.push( index );\r\n\t\r\n\t\t\t\tindex ++;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvertices.push( verticesRow );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar indices = [];\r\n\t\r\n\t\tfor ( var y = 0; y < heightSegments; y ++ ) {\r\n\t\r\n\t\t\tfor ( var x = 0; x < widthSegments; x ++ ) {\r\n\t\r\n\t\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\t\tvar v3 = vertices[ y + 1 ][ x ];\r\n\t\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\r\n\t\r\n\t\t\t\tif ( y !== 0 || thetaStart > 0 ) indices.push( v1, v2, v4 );\r\n\t\t\t\tif ( y !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( v2, v3, v4 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\t\tthis.addAttribute( 'position', positions );\r\n\t\tthis.addAttribute( 'normal', normals );\r\n\t\tthis.addAttribute( 'uv', uvs );\r\n\t\r\n\t\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SphereBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.SphereBufferGeometry.prototype.constructor = THREE.SphereBufferGeometry;\r\n\t\r\n\tTHREE.SphereBufferGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.SphereBufferGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.widthSegments,\r\n\t\t\tthis.parameters.heightSegments,\r\n\t\t\tthis.parameters.phiStart,\r\n\t\t\tthis.parameters.phiLength,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/TextGeometry.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * For creating 3D text geometry in three.js\r\n\t *\r\n\t * Text = 3D Text\r\n\t *\r\n\t * parameters = {\r\n\t *  size: \t\t\t<float>, \t// size of the text\r\n\t *  height: \t\t<float>, \t// thickness to extrude text\r\n\t *  curveSegments: \t<int>,\t\t// number of points on the curves\r\n\t *\r\n\t *  font: \t\t\t<string>,\t\t// font name\r\n\t *  weight: \t\t<string>,\t\t// font weight (normal, bold)\r\n\t *  style: \t\t\t<string>,\t\t// font style  (normal, italics)\r\n\t *\r\n\t *  bevelEnabled:\t<bool>,\t\t\t// turn on bevel\r\n\t *  bevelThickness: <float>, \t\t// how deep into text bevel goes\r\n\t *  bevelSize:\t\t<float>, \t\t// how far from text outline is bevel\r\n\t *  }\r\n\t *\r\n\t */\r\n\t\r\n\t/*\tUsage Examples\r\n\t\r\n\t\t// TextGeometry wrapper\r\n\t\r\n\t\tvar text3d = new TextGeometry( text, options );\r\n\t\r\n\t\t// Complete manner\r\n\t\r\n\t\tvar textShapes = THREE.FontUtils.generateShapes( text, options );\r\n\t\tvar text3d = new ExtrudeGeometry( textShapes, options );\r\n\t\r\n\t*/\r\n\t\r\n\t\r\n\tTHREE.TextGeometry = function ( text, parameters ) {\r\n\t\r\n\t\tparameters = parameters || {};\r\n\t\r\n\t\tvar textShapes = THREE.FontUtils.generateShapes( text, parameters );\r\n\t\r\n\t\t// translate parameters to ExtrudeGeometry API\r\n\t\r\n\t\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\r\n\t\r\n\t\t// defaults\r\n\t\r\n\t\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\t\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\t\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\t\r\n\t\tTHREE.ExtrudeGeometry.call( this, textShapes, parameters );\r\n\t\r\n\t\tthis.type = 'TextGeometry';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\r\n\tTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\r\n\t\r\n\t// File:src/extras/geometries/TorusGeometry.js\r\n\t\r\n\t/**\r\n\t * @author oosmoxiecode\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n\t */\r\n\t\r\n\tTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'TorusGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\ttube: tube,\r\n\t\t\tradialSegments: radialSegments,\r\n\t\t\ttubularSegments: tubularSegments,\r\n\t\t\tarc: arc\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 100;\r\n\t\ttube = tube || 40;\r\n\t\tradialSegments = radialSegments || 8;\r\n\t\ttubularSegments = tubularSegments || 6;\r\n\t\tarc = arc || Math.PI * 2;\r\n\t\r\n\t\tvar center = new THREE.Vector3(), uvs = [], normals = [];\r\n\t\r\n\t\tfor ( var j = 0; j <= radialSegments; j ++ ) {\r\n\t\r\n\t\t\tfor ( var i = 0; i <= tubularSegments; i ++ ) {\r\n\t\r\n\t\t\t\tvar u = i / tubularSegments * arc;\r\n\t\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\t\r\n\t\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\t\tcenter.y = radius * Math.sin( u );\r\n\t\r\n\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\t\tvertex.z = tube * Math.sin( v );\r\n\t\r\n\t\t\t\tthis.vertices.push( vertex );\r\n\t\r\n\t\t\t\tuvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\r\n\t\t\t\tnormals.push( vertex.clone().sub( center ).normalize() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( var j = 1; j <= radialSegments; j ++ ) {\r\n\t\r\n\t\t\tfor ( var i = 1; i <= tubularSegments; i ++ ) {\r\n\t\r\n\t\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\r\n\t\r\n\t\t\t\tvar face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\r\n\t\t\t\tthis.faces.push( face );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\r\n\t\r\n\t\t\t\tface = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\r\n\t\t\t\tthis.faces.push( face );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\r\n\t\r\n\tTHREE.TorusGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.TorusGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.tube,\r\n\t\t\tthis.parameters.radialSegments,\r\n\t\t\tthis.parameters.tubularSegments,\r\n\t\t\tthis.parameters.arc\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/TorusKnotGeometry.js\r\n\t\r\n\t/**\r\n\t * @author oosmoxiecode\r\n\t * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3D/src/away3d/primitives/TorusKnot.as?spec=svn2473&r=2473\r\n\t */\r\n\t\r\n\tTHREE.TorusKnotGeometry = function ( radius, tube, radialSegments, tubularSegments, p, q, heightScale ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'TorusKnotGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\ttube: tube,\r\n\t\t\tradialSegments: radialSegments,\r\n\t\t\ttubularSegments: tubularSegments,\r\n\t\t\tp: p,\r\n\t\t\tq: q,\r\n\t\t\theightScale: heightScale\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 100;\r\n\t\ttube = tube || 40;\r\n\t\tradialSegments = radialSegments || 64;\r\n\t\ttubularSegments = tubularSegments || 8;\r\n\t\tp = p || 2;\r\n\t\tq = q || 3;\r\n\t\theightScale = heightScale || 1;\r\n\t\r\n\t\tvar grid = new Array( radialSegments );\r\n\t\tvar tang = new THREE.Vector3();\r\n\t\tvar n = new THREE.Vector3();\r\n\t\tvar bitan = new THREE.Vector3();\r\n\t\r\n\t\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\t\r\n\t\t\tgrid[ i ] = new Array( tubularSegments );\r\n\t\t\tvar u = i / radialSegments * 2 * p * Math.PI;\r\n\t\t\tvar p1 = getPos( u, q, p, radius, heightScale );\r\n\t\t\tvar p2 = getPos( u + 0.01, q, p, radius, heightScale );\r\n\t\t\ttang.subVectors( p2, p1 );\r\n\t\t\tn.addVectors( p2, p1 );\r\n\t\r\n\t\t\tbitan.crossVectors( tang, n );\r\n\t\t\tn.crossVectors( bitan, tang );\r\n\t\t\tbitan.normalize();\r\n\t\t\tn.normalize();\r\n\t\r\n\t\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\t\r\n\t\t\t\tvar v = j / tubularSegments * 2 * Math.PI;\r\n\t\t\t\tvar cx = - tube * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\t\tvar cy = tube * Math.sin( v );\r\n\t\r\n\t\t\t\tvar pos = new THREE.Vector3();\r\n\t\t\t\tpos.x = p1.x + cx * n.x + cy * bitan.x;\r\n\t\t\t\tpos.y = p1.y + cx * n.y + cy * bitan.y;\r\n\t\t\t\tpos.z = p1.z + cx * n.z + cy * bitan.z;\r\n\t\r\n\t\t\t\tgrid[ i ][ j ] = this.vertices.push( pos ) - 1;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\t\r\n\t\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\t\r\n\t\t\t\tvar ip = ( i + 1 ) % radialSegments;\r\n\t\t\t\tvar jp = ( j + 1 ) % tubularSegments;\r\n\t\r\n\t\t\t\tvar a = grid[ i ][ j ];\r\n\t\t\t\tvar b = grid[ ip ][ j ];\r\n\t\t\t\tvar c = grid[ ip ][ jp ];\r\n\t\t\t\tvar d = grid[ i ][ jp ];\r\n\t\r\n\t\t\t\tvar uva = new THREE.Vector2( i / radialSegments, j / tubularSegments );\r\n\t\t\t\tvar uvb = new THREE.Vector2( ( i + 1 ) / radialSegments, j / tubularSegments );\r\n\t\t\t\tvar uvc = new THREE.Vector2( ( i + 1 ) / radialSegments, ( j + 1 ) / tubularSegments );\r\n\t\t\t\tvar uvd = new THREE.Vector2( i / radialSegments, ( j + 1 ) / tubularSegments );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\tthis.computeVertexNormals();\r\n\t\r\n\t\tfunction getPos( u, in_q, in_p, radius, heightScale ) {\r\n\t\r\n\t\t\tvar cu = Math.cos( u );\r\n\t\t\tvar su = Math.sin( u );\r\n\t\t\tvar quOverP = in_q / in_p * u;\r\n\t\t\tvar cs = Math.cos( quOverP );\r\n\t\r\n\t\t\tvar tx = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\t\tvar ty = radius * ( 2 + cs ) * su * 0.5;\r\n\t\t\tvar tz = heightScale * radius * Math.sin( quOverP ) * 0.5;\r\n\t\r\n\t\t\treturn new THREE.Vector3( tx, ty, tz );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\r\n\t\r\n\tTHREE.TorusKnotGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.TorusKnotGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.tube,\r\n\t\t\tthis.parameters.radialSegments,\r\n\t\t\tthis.parameters.tubularSegments,\r\n\t\t\tthis.parameters.p,\r\n\t\t\tthis.parameters.q,\r\n\t\t\tthis.parameters.heightScale\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/TubeGeometry.js\r\n\t\r\n\t/**\r\n\t * @author WestLangley / https://github.com/WestLangley\r\n\t * @author zz85 / https://github.com/zz85\r\n\t * @author miningold / https://github.com/miningold\r\n\t * @author jonobr1 / https://github.com/jonobr1\r\n\t *\r\n\t * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n\t *\r\n\t * Creates a tube which extrudes along a 3d spline\r\n\t *\r\n\t * Uses parallel transport frames as described in\r\n\t * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n\t */\r\n\t\r\n\tTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'TubeGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tpath: path,\r\n\t\t\tsegments: segments,\r\n\t\t\tradius: radius,\r\n\t\t\tradialSegments: radialSegments,\r\n\t\t\tclosed: closed\r\n\t\t};\r\n\t\r\n\t\tsegments = segments || 64;\r\n\t\tradius = radius || 1;\r\n\t\tradialSegments = radialSegments || 8;\r\n\t\tclosed = closed || false;\r\n\t\ttaper = taper || THREE.TubeGeometry.NoTaper;\r\n\t\r\n\t\tvar grid = [];\r\n\t\r\n\t\tvar scope = this,\r\n\t\r\n\t\t\ttangent,\r\n\t\t\tnormal,\r\n\t\t\tbinormal,\r\n\t\r\n\t\t\tnumpoints = segments + 1,\r\n\t\r\n\t\t\tu, v, r,\r\n\t\r\n\t\t\tcx, cy,\r\n\t\t\tpos, pos2 = new THREE.Vector3(),\r\n\t\t\ti, j,\r\n\t\t\tip, jp,\r\n\t\t\ta, b, c, d,\r\n\t\t\tuva, uvb, uvc, uvd;\r\n\t\r\n\t\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\r\n\t\t\ttangents = frames.tangents,\r\n\t\t\tnormals = frames.normals,\r\n\t\t\tbinormals = frames.binormals;\r\n\t\r\n\t\t// proxy internals\r\n\t\tthis.tangents = tangents;\r\n\t\tthis.normals = normals;\r\n\t\tthis.binormals = binormals;\r\n\t\r\n\t\tfunction vert( x, y, z ) {\r\n\t\r\n\t\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// construct the grid\r\n\t\r\n\t\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\t\r\n\t\t\tgrid[ i ] = [];\r\n\t\r\n\t\t\tu = i / ( numpoints - 1 );\r\n\t\r\n\t\t\tpos = path.getPointAt( u );\r\n\t\r\n\t\t\ttangent = tangents[ i ];\r\n\t\t\tnormal = normals[ i ];\r\n\t\t\tbinormal = binormals[ i ];\r\n\t\r\n\t\t\tr = radius * taper( u );\r\n\t\r\n\t\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\t\r\n\t\t\t\tv = j / radialSegments * 2 * Math.PI;\r\n\t\r\n\t\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\t\tcy = r * Math.sin( v );\r\n\t\r\n\t\t\t\tpos2.copy( pos );\r\n\t\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\r\n\t\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\r\n\t\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\r\n\t\r\n\t\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// construct the mesh\r\n\t\r\n\t\tfor ( i = 0; i < segments; i ++ ) {\r\n\t\r\n\t\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\t\r\n\t\t\t\tip = ( closed ) ? ( i + 1 ) % segments : i + 1;\r\n\t\t\t\tjp = ( j + 1 ) % radialSegments;\r\n\t\r\n\t\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\r\n\t\t\t\tb = grid[ ip ][ j ];\r\n\t\t\t\tc = grid[ ip ][ jp ];\r\n\t\t\t\td = grid[ i ][ jp ];\r\n\t\r\n\t\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\r\n\t\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\r\n\t\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\r\n\t\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\tthis.computeVertexNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\r\n\t\r\n\tTHREE.TubeGeometry.NoTaper = function ( u ) {\r\n\t\r\n\t\treturn 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\r\n\t\r\n\t\treturn Math.sin( Math.PI * u );\r\n\t\r\n\t};\r\n\t\r\n\t// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\r\n\tTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\r\n\t\r\n\t\tvar\tnormal = new THREE.Vector3(),\r\n\t\r\n\t\t\ttangents = [],\r\n\t\t\tnormals = [],\r\n\t\t\tbinormals = [],\r\n\t\r\n\t\t\tvec = new THREE.Vector3(),\r\n\t\t\tmat = new THREE.Matrix4(),\r\n\t\r\n\t\t\tnumpoints = segments + 1,\r\n\t\t\ttheta,\r\n\t\t\tepsilon = 0.0001,\r\n\t\t\tsmallest,\r\n\t\r\n\t\t\ttx, ty, tz,\r\n\t\t\ti, u;\r\n\t\r\n\t\r\n\t\t// expose internals\r\n\t\tthis.tangents = tangents;\r\n\t\tthis.normals = normals;\r\n\t\tthis.binormals = binormals;\r\n\t\r\n\t\t// compute the tangent vectors for each segment on the path\r\n\t\r\n\t\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\t\r\n\t\t\tu = i / ( numpoints - 1 );\r\n\t\r\n\t\t\ttangents[ i ] = path.getTangentAt( u );\r\n\t\t\ttangents[ i ].normalize();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tinitialNormal3();\r\n\t\r\n\t\t/*\r\n\t\tfunction initialNormal1(lastBinormal) {\r\n\t\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t\t}\r\n\t\r\n\t\tfunction initialNormal2() {\r\n\t\r\n\t\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\t\tvar t2 = path.getTangentAt( epsilon );\r\n\t\r\n\t\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\t\r\n\t\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t\r\n\t\t}\r\n\t\t*/\r\n\t\r\n\t\tfunction initialNormal3() {\r\n\t\r\n\t\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t\t// and in the direction of the smallest tangent xyz component\r\n\t\r\n\t\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\t\tsmallest = Number.MAX_VALUE;\r\n\t\t\ttx = Math.abs( tangents[ 0 ].x );\r\n\t\t\tty = Math.abs( tangents[ 0 ].y );\r\n\t\t\ttz = Math.abs( tangents[ 0 ].z );\r\n\t\r\n\t\t\tif ( tx <= smallest ) {\r\n\t\r\n\t\t\t\tsmallest = tx;\r\n\t\t\t\tnormal.set( 1, 0, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( ty <= smallest ) {\r\n\t\r\n\t\t\t\tsmallest = ty;\r\n\t\t\t\tnormal.set( 0, 1, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( tz <= smallest ) {\r\n\t\r\n\t\t\t\tnormal.set( 0, 0, 1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\t\r\n\t\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the path\r\n\t\r\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\t\r\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\t\r\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\t\r\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\t\r\n\t\t\tif ( vec.length() > epsilon ) {\r\n\t\r\n\t\t\t\tvec.normalize();\r\n\t\r\n\t\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\t\r\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\t\r\n\t\tif ( closed ) {\r\n\t\r\n\t\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints - 1 ] ), - 1, 1 ) );\r\n\t\t\ttheta /= ( numpoints - 1 );\r\n\t\r\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints - 1 ] ) ) > 0 ) {\r\n\t\r\n\t\t\t\ttheta = - theta;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\t\r\n\t\t\t\t// twist a little...\r\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/PolyhedronGeometry.js\r\n\t\r\n\t/**\r\n\t * @author clockworkgeek / https://github.com/clockworkgeek\r\n\t * @author timothypratley / https://github.com/timothypratley\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t*/\r\n\t\r\n\tTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'PolyhedronGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tvertices: vertices,\r\n\t\t\tindices: indices,\r\n\t\t\tradius: radius,\r\n\t\t\tdetail: detail\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 1;\r\n\t\tdetail = detail || 0;\r\n\t\r\n\t\tvar that = this;\r\n\t\r\n\t\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\t\r\n\t\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar p = this.vertices;\r\n\t\r\n\t\tvar faces = [];\r\n\t\r\n\t\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\t\r\n\t\t\tvar v1 = p[ indices[ i ] ];\r\n\t\t\tvar v2 = p[ indices[ i + 1 ] ];\r\n\t\t\tvar v3 = p[ indices[ i + 2 ] ];\r\n\t\r\n\t\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, j );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar centroid = new THREE.Vector3();\r\n\t\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tsubdivide( faces[ i ], detail );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Handle case when face straddles the seam\r\n\t\r\n\t\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\t\r\n\t\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\t\r\n\t\t\tvar x0 = uvs[ 0 ].x;\r\n\t\t\tvar x1 = uvs[ 1 ].x;\r\n\t\t\tvar x2 = uvs[ 2 ].x;\r\n\t\r\n\t\t\tvar max = Math.max( x0, Math.max( x1, x2 ) );\r\n\t\t\tvar min = Math.min( x0, Math.min( x1, x2 ) );\r\n\t\r\n\t\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\t\r\n\t\t\t\t// 0.9 is somewhat arbitrary\r\n\t\r\n\t\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n\t\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n\t\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Apply radius\r\n\t\r\n\t\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tthis.vertices[ i ].multiplyScalar( radius );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Merge vertices\r\n\t\r\n\t\tthis.mergeVertices();\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\t\r\n\t\r\n\t\t// Project vector onto sphere's surface\r\n\t\r\n\t\tfunction prepare( vector ) {\r\n\t\r\n\t\t\tvar vertex = vector.normalize().clone();\r\n\t\t\tvertex.index = that.vertices.push( vertex ) - 1;\r\n\t\r\n\t\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\t\r\n\t\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n\t\t\tvar v = inclination( vector ) / Math.PI + 0.5;\r\n\t\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\r\n\t\r\n\t\t\treturn vertex;\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Approximate a curved face with recursively sub-divided triangles.\r\n\t\r\n\t\tfunction make( v1, v2, v3, materialIndex ) {\r\n\t\r\n\t\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, materialIndex );\r\n\t\t\tthat.faces.push( face );\r\n\t\r\n\t\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\t\r\n\t\t\tvar azi = azimuth( centroid );\r\n\t\r\n\t\t\tthat.faceVertexUvs[ 0 ].push( [\r\n\t\t\t\tcorrectUV( v1.uv, v1, azi ),\r\n\t\t\t\tcorrectUV( v2.uv, v2, azi ),\r\n\t\t\t\tcorrectUV( v3.uv, v3, azi )\r\n\t\t\t] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Analytically subdivide a face to the required detail level.\r\n\t\r\n\t\tfunction subdivide( face, detail ) {\r\n\t\r\n\t\t\tvar cols = Math.pow( 2, detail );\r\n\t\t\tvar a = prepare( that.vertices[ face.a ] );\r\n\t\t\tvar b = prepare( that.vertices[ face.b ] );\r\n\t\t\tvar c = prepare( that.vertices[ face.c ] );\r\n\t\t\tvar v = [];\r\n\t\r\n\t\t\tvar materialIndex = face.materialIndex;\r\n\t\r\n\t\t\t// Construct all of the vertices for this subdivision.\r\n\t\r\n\t\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\r\n\t\r\n\t\t\t\tv[ i ] = [];\r\n\t\r\n\t\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\r\n\t\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\r\n\t\t\t\tvar rows = cols - i;\r\n\t\r\n\t\t\t\tfor ( var j = 0; j <= rows; j ++ ) {\r\n\t\r\n\t\t\t\t\tif ( j === 0 && i === cols ) {\r\n\t\r\n\t\t\t\t\t\tv[ i ][ j ] = aj;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// Construct all of the faces.\r\n\t\r\n\t\t\tfor ( var i = 0; i < cols ; i ++ ) {\r\n\t\r\n\t\t\t\tfor ( var j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar k = Math.floor( j / 2 );\r\n\t\r\n\t\t\t\t\tif ( j % 2 === 0 ) {\r\n\t\r\n\t\t\t\t\t\tmake(\r\n\t\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\t\tv[ i ][ k ],\r\n\t\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tmake(\r\n\t\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\t\tv[ i + 1 ][ k + 1 ],\r\n\t\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\t\r\n\t\tfunction azimuth( vector ) {\r\n\t\r\n\t\t\treturn Math.atan2( vector.z, - vector.x );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Angle above the XZ plane.\r\n\t\r\n\t\tfunction inclination( vector ) {\r\n\t\r\n\t\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Texture fixing helper. Spheres have some odd behaviours.\r\n\t\r\n\t\tfunction correctUV( uv, vector, azimuth ) {\r\n\t\r\n\t\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n\t\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n\t\t\treturn uv.clone();\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\r\n\t\r\n\tTHREE.PolyhedronGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.PolyhedronGeometry(\r\n\t\t\tthis.parameters.vertices,\r\n\t\t\tthis.parameters.indices,\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.detail\r\n\t\t);\r\n\t\r\n\t\treturn geometry.copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PolyhedronGeometry.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Geometry.prototype.copy.call( this, source );\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/DodecahedronGeometry.js\r\n\t\r\n\t/**\r\n\t * @author Abe Pazos / https://hamoid.com\r\n\t */\r\n\t\r\n\tTHREE.DodecahedronGeometry = function ( radius, detail ) {\r\n\t\r\n\t\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\t\tvar r = 1 / t;\r\n\t\r\n\t\tvar vertices = [\r\n\t\r\n\t\t\t// (±1, ±1, ±1)\r\n\t\t\t- 1, - 1, - 1,    - 1, - 1,  1,\r\n\t\t\t- 1,  1, - 1,    - 1,  1,  1,\r\n\t\t\t 1, - 1, - 1,     1, - 1,  1,\r\n\t\t\t 1,  1, - 1,     1,  1,  1,\r\n\t\r\n\t\t\t// (0, ±1/φ, ±φ)\r\n\t\t\t 0, - r, - t,     0, - r,  t,\r\n\t\t\t 0,  r, - t,     0,  r,  t,\r\n\t\r\n\t\t\t// (±1/φ, ±φ, 0)\r\n\t\t\t- r, - t,  0,    - r,  t,  0,\r\n\t\t\t r, - t,  0,     r,  t,  0,\r\n\t\r\n\t\t\t// (±φ, 0, ±1/φ)\r\n\t\t\t- t,  0, - r,     t,  0, - r,\r\n\t\t\t- t,  0,  r,     t,  0,  r\r\n\t\t];\r\n\t\r\n\t\tvar indices = [\r\n\t\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\r\n\t\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\r\n\t\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\r\n\t\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\r\n\t\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\r\n\t\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\r\n\t\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\r\n\t\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\r\n\t\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\r\n\t\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\r\n\t\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\r\n\t\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\r\n\t\t];\r\n\t\r\n\t\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\t\r\n\t\tthis.type = 'DodecahedronGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tdetail: detail\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DodecahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\n\tTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\r\n\t\r\n\tTHREE.DodecahedronGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.DodecahedronGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.detail\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/IcosahedronGeometry.js\r\n\t\r\n\t/**\r\n\t * @author timothypratley / https://github.com/timothypratley\r\n\t */\r\n\t\r\n\tTHREE.IcosahedronGeometry = function ( radius, detail ) {\r\n\t\r\n\t\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\t\r\n\t\tvar vertices = [\r\n\t\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\r\n\t\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\r\n\t\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\r\n\t\t];\r\n\t\r\n\t\tvar indices = [\r\n\t\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\r\n\t\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\r\n\t\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\r\n\t\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\r\n\t\t];\r\n\t\r\n\t\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\t\r\n\t\tthis.type = 'IcosahedronGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tdetail: detail\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.IcosahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\n\tTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\r\n\t\r\n\tTHREE.IcosahedronGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.IcosahedronGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.detail\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/OctahedronGeometry.js\r\n\t\r\n\t/**\r\n\t * @author timothypratley / https://github.com/timothypratley\r\n\t */\r\n\t\r\n\tTHREE.OctahedronGeometry = function ( radius, detail ) {\r\n\t\r\n\t\tvar vertices = [\r\n\t\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\r\n\t\t];\r\n\t\r\n\t\tvar indices = [\r\n\t\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n\t\t];\r\n\t\r\n\t\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\t\r\n\t\tthis.type = 'OctahedronGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tdetail: detail\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.OctahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\n\tTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\r\n\t\r\n\tTHREE.OctahedronGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.OctahedronGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.detail\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/TetrahedronGeometry.js\r\n\t\r\n\t/**\r\n\t * @author timothypratley / https://github.com/timothypratley\r\n\t */\r\n\t\r\n\tTHREE.TetrahedronGeometry = function ( radius, detail ) {\r\n\t\r\n\t\tvar vertices = [\r\n\t\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\r\n\t\t];\r\n\t\r\n\t\tvar indices = [\r\n\t\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\r\n\t\t];\r\n\t\r\n\t\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\t\r\n\t\tthis.type = 'TetrahedronGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tdetail: detail\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TetrahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\n\tTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\r\n\t\r\n\tTHREE.TetrahedronGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.TetrahedronGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.detail\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/ParametricGeometry.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / https://github.com/zz85\r\n\t * Parametric Surfaces Geometry\r\n\t * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n\t *\r\n\t * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n\t *\r\n\t */\r\n\t\r\n\tTHREE.ParametricGeometry = function ( func, slices, stacks ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'ParametricGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tfunc: func,\r\n\t\t\tslices: slices,\r\n\t\t\tstacks: stacks\r\n\t\t};\r\n\t\r\n\t\tvar verts = this.vertices;\r\n\t\tvar faces = this.faces;\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\t\r\n\t\tvar i, j, p;\r\n\t\tvar u, v;\r\n\t\r\n\t\tvar sliceCount = slices + 1;\r\n\t\r\n\t\tfor ( i = 0; i <= stacks; i ++ ) {\r\n\t\r\n\t\t\tv = i / stacks;\r\n\t\r\n\t\t\tfor ( j = 0; j <= slices; j ++ ) {\r\n\t\r\n\t\t\t\tu = j / slices;\r\n\t\r\n\t\t\t\tp = func( u, v );\r\n\t\t\t\tverts.push( p );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar a, b, c, d;\r\n\t\tvar uva, uvb, uvc, uvd;\r\n\t\r\n\t\tfor ( i = 0; i < stacks; i ++ ) {\r\n\t\r\n\t\t\tfor ( j = 0; j < slices; j ++ ) {\r\n\t\r\n\t\t\t\ta = i * sliceCount + j;\r\n\t\t\t\tb = i * sliceCount + j + 1;\r\n\t\t\t\tc = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\t\td = ( i + 1 ) * sliceCount + j;\r\n\t\r\n\t\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\r\n\t\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\r\n\t\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\r\n\t\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\r\n\t\r\n\t\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\t\tuvs.push( [ uva, uvb, uvd ] );\r\n\t\r\n\t\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// console.log(this);\r\n\t\r\n\t\t// magic bullet\r\n\t\t// var diff = this.mergeVertices();\r\n\t\t// console.log('removed ', diff, ' vertices by merging');\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\tthis.computeVertexNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\r\n\t\r\n\t// File:src/extras/geometries/WireframeGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.WireframeGeometry = function ( geometry ) {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tvar edge = [ 0, 0 ], hash = {};\r\n\t\tvar sortFunction = function ( a, b ) {\r\n\t\r\n\t\t\treturn a - b;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\t\r\n\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar faces = geometry.faces;\r\n\t\t\tvar numEdges = 0;\r\n\t\r\n\t\t\t// allocate maximal size\r\n\t\t\tvar edges = new Uint32Array( 6 * faces.length );\r\n\t\r\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\t\r\n\t\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\t\tedge.sort( sortFunction );\r\n\t\r\n\t\t\t\t\tvar key = edge.toString();\r\n\t\r\n\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\t\r\n\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\tnumEdges ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\t\r\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j ] ];\r\n\t\r\n\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\tcoords[ index + 0 ] = vertex.x;\r\n\t\t\t\t\tcoords[ index + 1 ] = vertex.y;\r\n\t\t\t\t\tcoords[ index + 2 ] = vertex.z;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\t\r\n\t\t} else if ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\tif ( geometry.index !== null ) {\r\n\t\r\n\t\t\t\t// Indexed BufferGeometry\r\n\t\r\n\t\t\t\tvar indices = geometry.index.array;\r\n\t\t\t\tvar vertices = geometry.attributes.position;\r\n\t\t\t\tvar drawcalls = geometry.drawcalls;\r\n\t\t\t\tvar numEdges = 0;\r\n\t\r\n\t\t\t\tif ( drawcalls.length === 0 ) {\r\n\t\r\n\t\t\t\t\tgeometry.addDrawCall( 0, indices.length );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// allocate maximal size\r\n\t\t\t\tvar edges = new Uint32Array( 2 * indices.length );\r\n\t\r\n\t\t\t\tfor ( var o = 0, ol = drawcalls.length; o < ol; ++ o ) {\r\n\t\r\n\t\t\t\t\tvar drawcall = drawcalls[ o ];\r\n\t\r\n\t\t\t\t\tvar start = drawcall.start;\r\n\t\t\t\t\tvar count = drawcall.count;\r\n\t\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tedge[ 0 ] = indices[ i + j ];\r\n\t\t\t\t\t\t\tedge[ 1 ] = indices[ i + ( j + 1 ) % 3 ];\r\n\t\t\t\t\t\t\tedge.sort( sortFunction );\r\n\t\r\n\t\t\t\t\t\t\tvar key = edge.toString();\r\n\t\r\n\t\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\t\t\tnumEdges ++;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\t\tvar index2 = edges[ 2 * i + j ];\r\n\t\r\n\t\t\t\t\t\tcoords[ index + 0 ] = vertices.getX( index2 );\r\n\t\t\t\t\t\tcoords[ index + 1 ] = vertices.getY( index2 );\r\n\t\t\t\t\t\tcoords[ index + 2 ] = vertices.getZ( index2 );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// non-indexed BufferGeometry\r\n\t\r\n\t\t\t\tvar vertices = geometry.attributes.position.array;\r\n\t\t\t\tvar numEdges = vertices.length / 3;\r\n\t\t\t\tvar numTris = numEdges / 3;\r\n\t\r\n\t\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar index = 18 * i + 6 * j;\r\n\t\r\n\t\t\t\t\t\tvar index1 = 9 * i + 3 * j;\r\n\t\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\r\n\t\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\r\n\t\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\r\n\t\r\n\t\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\r\n\t\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\r\n\t\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.WireframeGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.WireframeGeometry.prototype.constructor = THREE.WireframeGeometry;\r\n\t\r\n\t// File:src/extras/helpers/AxisHelper.js\r\n\t\r\n\t/**\r\n\t * @author sroucheray / http://sroucheray.org/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.AxisHelper = function ( size ) {\r\n\t\r\n\t\tsize = size || 1;\r\n\t\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t0, 0, 0,  size, 0, 0,\r\n\t\t\t0, 0, 0,  0, size, 0,\r\n\t\t\t0, 0, 0,  0, 0, size\r\n\t\t] );\r\n\t\r\n\t\tvar colors = new Float32Array( [\r\n\t\t\t1, 0, 0,  1, 0.6, 0,\r\n\t\t\t0, 1, 0,  0.6, 1, 0,\r\n\t\t\t0, 0, 1,  0, 0.6, 1\r\n\t\t] );\r\n\t\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\t\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\t\r\n\t\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, material );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.AxisHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\r\n\t\r\n\t// File:src/extras/helpers/ArrowHelper.js\r\n\t\r\n\t/**\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author zz85 / http://github.com/zz85\r\n\t * @author bhouston / http://exocortex.com\r\n\t *\r\n\t * Creates an arrow for visualizing directions\r\n\t *\r\n\t * Parameters:\r\n\t *  dir - Vector3\r\n\t *  origin - Vector3\r\n\t *  length - Number\r\n\t *  color - color in hex value\r\n\t *  headLength - Number\r\n\t *  headWidth - Number\r\n\t */\r\n\t\r\n\tTHREE.ArrowHelper = ( function () {\r\n\t\r\n\t\tvar lineGeometry = new THREE.Geometry();\r\n\t\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\r\n\t\r\n\t\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\r\n\t\tconeGeometry.translate( 0, - 0.5, 0 );\r\n\t\r\n\t\treturn function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\t\r\n\t\t\t// dir is assumed to be normalized\r\n\t\r\n\t\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\t\tif ( color === undefined ) color = 0xffff00;\r\n\t\t\tif ( length === undefined ) length = 1;\r\n\t\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\t\r\n\t\t\tthis.position.copy( origin );\r\n\t\t\t\r\n\t\t\tif ( headLength < length ) {\r\n\t\t\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\t\t\tthis.line.matrixAutoUpdate = false;\r\n\t\t\t\tthis.add( this.line );\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\r\n\t\t\tthis.cone.matrixAutoUpdate = false;\r\n\t\t\tthis.add( this.cone );\r\n\t\r\n\t\t\tthis.setDirection( dir );\r\n\t\t\tthis.setLength( length, headLength, headWidth );\r\n\t\r\n\t\t}\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\r\n\t\r\n\tTHREE.ArrowHelper.prototype.setDirection = ( function () {\r\n\t\r\n\t\tvar axis = new THREE.Vector3();\r\n\t\tvar radians;\r\n\t\r\n\t\treturn function setDirection( dir ) {\r\n\t\r\n\t\t\t// dir is assumed to be normalized\r\n\t\r\n\t\t\tif ( dir.y > 0.99999 ) {\r\n\t\r\n\t\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\t\r\n\t\t\t} else if ( dir.y < - 0.99999 ) {\r\n\t\r\n\t\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\r\n\t\r\n\t\t\t\tradians = Math.acos( dir.y );\r\n\t\r\n\t\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\t\r\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\t\r\n\t\tif ( headLength < length ){\r\n\t\t\tthis.line.scale.set( 1, length - headLength, 1 );\r\n\t\t\tthis.line.updateMatrix();\r\n\t\t}\r\n\t\r\n\t\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\t\tthis.cone.position.y = length;\r\n\t\tthis.cone.updateMatrix();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ArrowHelper.prototype.setColor = function ( color ) {\r\n\t\r\n\t\tif ( this.line !== undefined ) this.line.material.color.set( color );\r\n\t\tthis.cone.material.color.set( color );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/helpers/BoxHelper.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.BoxHelper = function ( object ) {\r\n\t\r\n\t\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\t\tvar positions = new Float32Array( 8 * 3 );\r\n\t\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ) );\r\n\t\r\n\t\tif ( object !== undefined ) {\r\n\t\r\n\t\t\tthis.update( object );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\r\n\t\r\n\tTHREE.BoxHelper.prototype.update = ( function () {\r\n\t\r\n\t\tvar box = new THREE.Box3();\r\n\t\r\n\t\treturn function ( object ) {\r\n\t\r\n\t\t\tbox.setFromObject( object );\r\n\t\r\n\t\t\tif ( box.empty() ) return;\r\n\t\r\n\t\t\tvar min = box.min;\r\n\t\t\tvar max = box.max;\r\n\t\r\n\t\t\t/*\r\n\t\t\t  5____4\r\n\t\t\t1/___0/|\r\n\t\t\t| 6__|_7\r\n\t\t\t2/___3/\r\n\t\r\n\t\t\t0: max.x, max.y, max.z\r\n\t\t\t1: min.x, max.y, max.z\r\n\t\t\t2: min.x, min.y, max.z\r\n\t\t\t3: max.x, min.y, max.z\r\n\t\t\t4: max.x, max.y, min.z\r\n\t\t\t5: min.x, max.y, min.z\r\n\t\t\t6: min.x, min.y, min.z\r\n\t\t\t7: max.x, min.y, min.z\r\n\t\t\t*/\r\n\t\r\n\t\t\tvar position = this.geometry.attributes.position;\r\n\t\t\tvar array = position.array;\r\n\t\r\n\t\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\r\n\t\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\r\n\t\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\r\n\t\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\t\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\t\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\t\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\t\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\t\r\n\t\t\tposition.needsUpdate = true;\r\n\t\r\n\t\t\tthis.geometry.computeBoundingSphere();\r\n\t\r\n\t\t}\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/extras/helpers/BoundingBoxHelper.js\r\n\t\r\n\t/**\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\t// a helper to show the world-axis-aligned bounding box for an object\r\n\t\r\n\tTHREE.BoundingBoxHelper = function ( object, hex ) {\r\n\t\r\n\t\tvar color = ( hex !== undefined ) ? hex : 0x888888;\r\n\t\r\n\t\tthis.object = object;\r\n\t\r\n\t\tthis.box = new THREE.Box3();\r\n\t\r\n\t\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\r\n\tTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\r\n\t\r\n\tTHREE.BoundingBoxHelper.prototype.update = function () {\r\n\t\r\n\t\tthis.box.setFromObject( this.object );\r\n\t\r\n\t\tthis.box.size( this.scale );\r\n\t\r\n\t\tthis.box.center( this.position );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/helpers/CameraHelper.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t *\t- shows frustum, line of sight and up of the camera\r\n\t *\t- suitable for fast updates\r\n\t * \t- based on frustum visualization in lightgl.js shadowmap example\r\n\t *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n\t */\r\n\t\r\n\tTHREE.CameraHelper = function ( camera ) {\r\n\t\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\r\n\t\r\n\t\tvar pointMap = {};\r\n\t\r\n\t\t// colors\r\n\t\r\n\t\tvar hexFrustum = 0xffaa00;\r\n\t\tvar hexCone = 0xff0000;\r\n\t\tvar hexUp = 0x00aaff;\r\n\t\tvar hexTarget = 0xffffff;\r\n\t\tvar hexCross = 0x333333;\r\n\t\r\n\t\t// near\r\n\t\r\n\t\taddLine( \"n1\", \"n2\", hexFrustum );\r\n\t\taddLine( \"n2\", \"n4\", hexFrustum );\r\n\t\taddLine( \"n4\", \"n3\", hexFrustum );\r\n\t\taddLine( \"n3\", \"n1\", hexFrustum );\r\n\t\r\n\t\t// far\r\n\t\r\n\t\taddLine( \"f1\", \"f2\", hexFrustum );\r\n\t\taddLine( \"f2\", \"f4\", hexFrustum );\r\n\t\taddLine( \"f4\", \"f3\", hexFrustum );\r\n\t\taddLine( \"f3\", \"f1\", hexFrustum );\r\n\t\r\n\t\t// sides\r\n\t\r\n\t\taddLine( \"n1\", \"f1\", hexFrustum );\r\n\t\taddLine( \"n2\", \"f2\", hexFrustum );\r\n\t\taddLine( \"n3\", \"f3\", hexFrustum );\r\n\t\taddLine( \"n4\", \"f4\", hexFrustum );\r\n\t\r\n\t\t// cone\r\n\t\r\n\t\taddLine( \"p\", \"n1\", hexCone );\r\n\t\taddLine( \"p\", \"n2\", hexCone );\r\n\t\taddLine( \"p\", \"n3\", hexCone );\r\n\t\taddLine( \"p\", \"n4\", hexCone );\r\n\t\r\n\t\t// up\r\n\t\r\n\t\taddLine( \"u1\", \"u2\", hexUp );\r\n\t\taddLine( \"u2\", \"u3\", hexUp );\r\n\t\taddLine( \"u3\", \"u1\", hexUp );\r\n\t\r\n\t\t// target\r\n\t\r\n\t\taddLine( \"c\", \"t\", hexTarget );\r\n\t\taddLine( \"p\", \"c\", hexCross );\r\n\t\r\n\t\t// cross\r\n\t\r\n\t\taddLine( \"cn1\", \"cn2\", hexCross );\r\n\t\taddLine( \"cn3\", \"cn4\", hexCross );\r\n\t\r\n\t\taddLine( \"cf1\", \"cf2\", hexCross );\r\n\t\taddLine( \"cf3\", \"cf4\", hexCross );\r\n\t\r\n\t\tfunction addLine( a, b, hex ) {\r\n\t\r\n\t\t\taddPoint( a, hex );\r\n\t\t\taddPoint( b, hex );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction addPoint( id, hex ) {\r\n\t\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.colors.push( new THREE.Color( hex ) );\r\n\t\r\n\t\t\tif ( pointMap[ id ] === undefined ) {\r\n\t\r\n\t\t\t\tpointMap[ id ] = [];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, material );\r\n\t\r\n\t\tthis.camera = camera;\r\n\t\tthis.matrix = camera.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tthis.pointMap = pointMap;\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CameraHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\r\n\t\r\n\tTHREE.CameraHelper.prototype.update = function () {\r\n\t\r\n\t\tvar geometry, pointMap;\r\n\t\r\n\t\tvar vector = new THREE.Vector3();\r\n\t\tvar camera = new THREE.Camera();\r\n\t\r\n\t\tvar setPoint = function ( point, x, y, z ) {\r\n\t\r\n\t\t\tvector.set( x, y, z ).unproject( camera );\r\n\t\r\n\t\t\tvar points = pointMap[ point ];\r\n\t\r\n\t\t\tif ( points !== undefined ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\treturn function () {\r\n\t\r\n\t\t\tgeometry = this.geometry;\r\n\t\t\tpointMap = this.pointMap;\r\n\t\r\n\t\t\tvar w = 1, h = 1;\r\n\t\r\n\t\t\t// we need just camera projection matrix\r\n\t\t\t// world matrix must be identity\r\n\t\r\n\t\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\t\r\n\t\t\t// center / target\r\n\t\r\n\t\t\tsetPoint( \"c\", 0, 0, - 1 );\r\n\t\t\tsetPoint( \"t\", 0, 0,  1 );\r\n\t\r\n\t\t\t// near\r\n\t\r\n\t\t\tsetPoint( \"n1\", - w, - h, - 1 );\r\n\t\t\tsetPoint( \"n2\",   w, - h, - 1 );\r\n\t\t\tsetPoint( \"n3\", - w,   h, - 1 );\r\n\t\t\tsetPoint( \"n4\",   w,   h, - 1 );\r\n\t\r\n\t\t\t// far\r\n\t\r\n\t\t\tsetPoint( \"f1\", - w, - h, 1 );\r\n\t\t\tsetPoint( \"f2\",   w, - h, 1 );\r\n\t\t\tsetPoint( \"f3\", - w,   h, 1 );\r\n\t\t\tsetPoint( \"f4\",   w,   h, 1 );\r\n\t\r\n\t\t\t// up\r\n\t\r\n\t\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\r\n\t\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\r\n\t\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\r\n\t\r\n\t\t\t// cross\r\n\t\r\n\t\t\tsetPoint( \"cf1\", - w,   0, 1 );\r\n\t\t\tsetPoint( \"cf2\",   w,   0, 1 );\r\n\t\t\tsetPoint( \"cf3\",   0, - h, 1 );\r\n\t\t\tsetPoint( \"cf4\",   0,   h, 1 );\r\n\t\r\n\t\t\tsetPoint( \"cn1\", - w,   0, - 1 );\r\n\t\t\tsetPoint( \"cn2\",   w,   0, - 1 );\r\n\t\t\tsetPoint( \"cn3\",   0, - h, - 1 );\r\n\t\t\tsetPoint( \"cn4\",   0,   h, - 1 );\r\n\t\r\n\t\t\tgeometry.verticesNeedUpdate = true;\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\t// File:src/extras/helpers/DirectionalLightHelper.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.DirectionalLightHelper = function ( light, size ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.light = light;\r\n\t\tthis.light.updateMatrixWorld();\r\n\t\r\n\t\tthis.matrix = light.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tsize = size || 1;\r\n\t\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\tgeometry.vertices.push(\r\n\t\t\tnew THREE.Vector3( - size,   size, 0 ),\r\n\t\t\tnew THREE.Vector3(   size,   size, 0 ),\r\n\t\t\tnew THREE.Vector3(   size, - size, 0 ),\r\n\t\t\tnew THREE.Vector3( - size, - size, 0 ),\r\n\t\t\tnew THREE.Vector3( - size,   size, 0 )\r\n\t\t);\r\n\t\r\n\t\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\t\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\tthis.lightPlane = new THREE.Line( geometry, material );\r\n\t\tthis.add( this.lightPlane );\r\n\t\r\n\t\tgeometry = new THREE.Geometry();\r\n\t\tgeometry.vertices.push(\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3()\r\n\t\t);\r\n\t\r\n\t\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\r\n\t\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\tthis.targetLine = new THREE.Line( geometry, material );\r\n\t\tthis.add( this.targetLine );\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\r\n\t\r\n\tTHREE.DirectionalLightHelper.prototype.dispose = function () {\r\n\t\r\n\t\tthis.lightPlane.geometry.dispose();\r\n\t\tthis.lightPlane.material.dispose();\r\n\t\tthis.targetLine.geometry.dispose();\r\n\t\tthis.targetLine.material.dispose();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DirectionalLightHelper.prototype.update = function () {\r\n\t\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar v3 = new THREE.Vector3();\r\n\t\r\n\t\treturn function () {\r\n\t\r\n\t\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\t\tv3.subVectors( v2, v1 );\r\n\t\r\n\t\t\tthis.lightPlane.lookAt( v3 );\r\n\t\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\r\n\t\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\r\n\t\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\t// File:src/extras/helpers/EdgesHelper.js\r\n\t\r\n\t/**\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @param object THREE.Mesh whose geometry will be used\r\n\t * @param hex line color\r\n\t * @param thresholdAngle the minimum angle (in degrees),\r\n\t * between the face normals of adjacent faces,\r\n\t * that is required to render an edge. A value of 10 means\r\n\t * an edge is only rendered if the angle is at least 10 degrees.\r\n\t */\r\n\t\r\n\tTHREE.EdgesHelper = function ( object, hex, thresholdAngle ) {\r\n\t\r\n\t\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\t\r\n\t\tTHREE.LineSegments.call( this, new THREE.EdgesGeometry( object.geometry, thresholdAngle ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\r\n\t\tthis.matrix = object.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EdgesHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\r\n\t\r\n\t// File:src/extras/helpers/FaceNormalsHelper.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t*/\r\n\t\r\n\tTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\t\r\n\t\t// FaceNormalsHelper only supports THREE.Geometry\r\n\t\r\n\t\tthis.object = object;\r\n\t\r\n\t\tthis.size = ( size !== undefined ) ? size : 1;\r\n\t\r\n\t\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\t\r\n\t\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar nNormals = 0;\r\n\t\r\n\t\tvar objGeometry = this.object.geometry;\r\n\t\r\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\tnNormals = objGeometry.faces.length;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\r\n\t\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\t\r\n\t\tgeometry.addAttribute( 'position', positions );\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\t\r\n\t\t//\r\n\t\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.FaceNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\r\n\t\r\n\tTHREE.FaceNormalsHelper.prototype.update = ( function () {\r\n\t\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar normalMatrix = new THREE.Matrix3();\r\n\t\r\n\t\treturn function update() {\r\n\t\r\n\t\t\tthis.object.updateMatrixWorld( true );\r\n\t\r\n\t\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\t\r\n\t\t\tvar matrixWorld = this.object.matrixWorld;\r\n\t\r\n\t\t\tvar position = this.geometry.attributes.position;\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar objGeometry = this.object.geometry;\r\n\t\r\n\t\t\tvar vertices = objGeometry.vertices;\r\n\t\r\n\t\t\tvar faces = objGeometry.faces;\r\n\t\r\n\t\t\tvar idx = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\t\tvar normal = face.normal;\r\n\t\r\n\t\t\t\tv1.copy( vertices[ face.a ] )\r\n\t\t\t\t\t.add( vertices[ face.b ] )\r\n\t\t\t\t\t.add( vertices[ face.c ] )\r\n\t\t\t\t\t.divideScalar( 3 )\r\n\t\t\t\t\t.applyMatrix4( matrixWorld );\r\n\t\r\n\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\t\r\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\t\r\n\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\t\r\n\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tposition.needsUpdate = true;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t}() );\r\n\t\r\n\t// File:src/extras/helpers/GridHelper.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.GridHelper = function ( size, step ) {\r\n\t\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\t\r\n\t\tthis.color1 = new THREE.Color( 0x444444 );\r\n\t\tthis.color2 = new THREE.Color( 0x888888 );\r\n\t\r\n\t\tfor ( var i = - size; i <= size; i += step ) {\r\n\t\r\n\t\t\tgeometry.vertices.push(\r\n\t\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\r\n\t\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\r\n\t\t\t);\r\n\t\r\n\t\t\tvar color = i === 0 ? this.color1 : this.color2;\r\n\t\r\n\t\t\tgeometry.colors.push( color, color, color, color );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, material );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.GridHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\r\n\t\r\n\tTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\r\n\t\r\n\t\tthis.color1.set( colorCenterLine );\r\n\t\tthis.color2.set( colorGrid );\r\n\t\r\n\t\tthis.geometry.colorsNeedUpdate = true;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/helpers/HemisphereLightHelper.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.HemisphereLightHelper = function ( light, sphereSize ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.light = light;\r\n\t\tthis.light.updateMatrixWorld();\r\n\t\r\n\t\tthis.matrix = light.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\r\n\t\r\n\t\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\t\tgeometry.rotateX( - Math.PI / 2 );\r\n\t\r\n\t\tfor ( var i = 0, il = 8; i < il; i ++ ) {\r\n\t\r\n\t\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\r\n\t\r\n\t\tthis.lightSphere = new THREE.Mesh( geometry, material );\r\n\t\tthis.add( this.lightSphere );\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\r\n\t\r\n\tTHREE.HemisphereLightHelper.prototype.dispose = function () {\r\n\t\r\n\t\tthis.lightSphere.geometry.dispose();\r\n\t\tthis.lightSphere.material.dispose();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.HemisphereLightHelper.prototype.update = function () {\r\n\t\r\n\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\treturn function () {\r\n\t\r\n\t\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\t\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\r\n\t\r\n\t\t}\r\n\t\r\n\t}();\r\n\t\r\n\t// File:src/extras/helpers/PointLightHelper.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.PointLightHelper = function ( light, sphereSize ) {\r\n\t\r\n\t\tthis.light = light;\r\n\t\tthis.light.updateMatrixWorld();\r\n\t\r\n\t\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\t\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\t\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\tTHREE.Mesh.call( this, geometry, material );\r\n\t\r\n\t\tthis.matrix = this.light.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\t/*\r\n\t\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\t\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\t\r\n\t\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\t\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\t\r\n\t\tvar d = light.distance;\r\n\t\r\n\t\tif ( d === 0.0 ) {\r\n\t\r\n\t\t\tthis.lightDistance.visible = false;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.lightDistance.scale.set( d, d, d );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.add( this.lightDistance );\r\n\t\t*/\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\r\n\tTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\r\n\t\r\n\tTHREE.PointLightHelper.prototype.dispose = function () {\r\n\t\r\n\t\tthis.geometry.dispose();\r\n\t\tthis.material.dispose();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PointLightHelper.prototype.update = function () {\r\n\t\r\n\t\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\t/*\r\n\t\tvar d = this.light.distance;\r\n\t\r\n\t\tif ( d === 0.0 ) {\r\n\t\r\n\t\t\tthis.lightDistance.visible = false;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.lightDistance.visible = true;\r\n\t\t\tthis.lightDistance.scale.set( d, d, d );\r\n\t\r\n\t\t}\r\n\t\t*/\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/helpers/SkeletonHelper.js\r\n\t\r\n\t/**\r\n\t * @author Sean Griffin / http://twitter.com/sgrif\r\n\t * @author Michael Guerrero / http://realitymeltdown.com\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author ikerr / http://verold.com\r\n\t */\r\n\t\r\n\tTHREE.SkeletonHelper = function ( object ) {\r\n\t\r\n\t\tthis.bones = this.getBoneList( object );\r\n\t\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\r\n\t\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\t\r\n\t\t\tvar bone = this.bones[ i ];\r\n\t\r\n\t\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\t\r\n\t\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\r\n\t\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tgeometry.dynamic = true;\r\n\t\r\n\t\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, material );\r\n\t\r\n\t\tthis.root = object;\r\n\t\r\n\t\tthis.matrix = object.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.SkeletonHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\r\n\t\r\n\tTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\r\n\t\r\n\t\tvar boneList = [];\r\n\t\r\n\t\tif ( object instanceof THREE.Bone ) {\r\n\t\r\n\t\t\tboneList.push( object );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\t\r\n\t\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn boneList;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SkeletonHelper.prototype.update = function () {\r\n\t\r\n\t\tvar geometry = this.geometry;\r\n\t\r\n\t\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\r\n\t\r\n\t\tvar boneMatrix = new THREE.Matrix4();\r\n\t\r\n\t\tvar j = 0;\r\n\t\r\n\t\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\t\r\n\t\t\tvar bone = this.bones[ i ];\r\n\t\r\n\t\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\t\r\n\t\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n\t\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\r\n\t\r\n\t\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\r\n\t\r\n\t\t\t\tj += 2;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tgeometry.verticesNeedUpdate = true;\r\n\t\r\n\t\tgeometry.computeBoundingSphere();\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/helpers/SpotLightHelper.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t*/\r\n\t\r\n\tTHREE.SpotLightHelper = function ( light ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.light = light;\r\n\t\tthis.light.updateMatrixWorld();\r\n\t\r\n\t\tthis.matrix = light.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\r\n\t\r\n\t\tgeometry.translate( 0, - 0.5, 0 );\r\n\t\tgeometry.rotateX( - Math.PI / 2 );\r\n\t\r\n\t\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\t\r\n\t\tthis.cone = new THREE.Mesh( geometry, material );\r\n\t\tthis.add( this.cone );\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\r\n\t\r\n\tTHREE.SpotLightHelper.prototype.dispose = function () {\r\n\t\r\n\t\tthis.cone.geometry.dispose();\r\n\t\tthis.cone.material.dispose();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SpotLightHelper.prototype.update = function () {\r\n\t\r\n\t\tvar vector = new THREE.Vector3();\r\n\t\tvar vector2 = new THREE.Vector3();\r\n\t\r\n\t\treturn function () {\r\n\t\r\n\t\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\r\n\t\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\r\n\t\r\n\t\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\t\r\n\t\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\r\n\t\t\tthis.cone.lookAt( vector2.sub( vector ) );\r\n\t\r\n\t\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\t// File:src/extras/helpers/VertexNormalsHelper.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t*/\r\n\t\r\n\tTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\t\r\n\t\tthis.object = object;\r\n\t\r\n\t\tthis.size = ( size !== undefined ) ? size : 1;\r\n\t\r\n\t\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\t\r\n\t\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar nNormals = 0;\r\n\t\r\n\t\tvar objGeometry = this.object.geometry;\r\n\t\r\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\tnNormals = objGeometry.faces.length * 3;\r\n\t\r\n\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\tnNormals = objGeometry.attributes.normal.count\r\n\t\r\n\t\t}\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\r\n\t\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\t\r\n\t\tgeometry.addAttribute( 'position', positions );\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\t\r\n\t\t//\r\n\t\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.VertexNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\r\n\t\r\n\tTHREE.VertexNormalsHelper.prototype.update = ( function () {\r\n\t\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar normalMatrix = new THREE.Matrix3();\r\n\t\r\n\t\treturn function update() {\r\n\t\r\n\t\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\t\r\n\t\t\tthis.object.updateMatrixWorld( true );\r\n\t\r\n\t\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\t\r\n\t\t\tvar matrixWorld = this.object.matrixWorld;\r\n\t\r\n\t\t\tvar position = this.geometry.attributes.position;\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar objGeometry = this.object.geometry;\r\n\t\r\n\t\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\tvar vertices = objGeometry.vertices;\r\n\t\r\n\t\t\t\tvar faces = objGeometry.faces;\r\n\t\r\n\t\t\t\tvar idx = 0;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\r\n\t\r\n\t\t\t\t\t\tvar normal = face.vertexNormals[ j ];\r\n\t\r\n\t\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\r\n\t\r\n\t\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\t\r\n\t\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\t\r\n\t\t\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\t\r\n\t\t\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\t\tvar objPos = objGeometry.attributes.position;\r\n\t\r\n\t\t\t\tvar objNorm = objGeometry.attributes.normal;\r\n\t\r\n\t\t\t\tvar idx = 0;\r\n\t\r\n\t\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\r\n\t\r\n\t\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\r\n\t\r\n\t\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\t\r\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\t\r\n\t\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\t\r\n\t\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tposition.needsUpdate = true;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t}() );\r\n\t\r\n\t// File:src/extras/helpers/WireframeHelper.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.WireframeHelper = function ( object, hex ) {\r\n\t\r\n\t\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\t\r\n\t\tTHREE.LineSegments.call( this, new THREE.WireframeGeometry( object.geometry ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\r\n\t\tthis.matrix = object.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.WireframeHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\r\n\t\r\n\t// File:src/extras/objects/ImmediateRenderObject.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.ImmediateRenderObject = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.render = function ( renderCallback ) {};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\r\n\t\r\n\t// File:src/extras/objects/MorphBlendMesh.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.MorphBlendMesh = function( geometry, material ) {\r\n\t\r\n\t\tTHREE.Mesh.call( this, geometry, material );\r\n\t\r\n\t\tthis.animationsMap = {};\r\n\t\tthis.animationsList = [];\r\n\t\r\n\t\t// prepare default animation\r\n\t\t// (all frames played together in 1 second)\r\n\t\r\n\t\tvar numFrames = this.geometry.morphTargets.length;\r\n\t\r\n\t\tvar name = \"__default\";\r\n\t\r\n\t\tvar startFrame = 0;\r\n\t\tvar endFrame = numFrames - 1;\r\n\t\r\n\t\tvar fps = numFrames / 1;\r\n\t\r\n\t\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\t\tthis.setAnimationWeight( name, 1 );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\tTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\t\r\n\t\tvar animation = {\r\n\t\r\n\t\t\tstart: start,\r\n\t\t\tend: end,\r\n\t\r\n\t\t\tlength: end - start + 1,\r\n\t\r\n\t\t\tfps: fps,\r\n\t\t\tduration: ( end - start ) / fps,\r\n\t\r\n\t\t\tlastFrame: 0,\r\n\t\t\tcurrentFrame: 0,\r\n\t\r\n\t\t\tactive: false,\r\n\t\r\n\t\t\ttime: 0,\r\n\t\t\tdirection: 1,\r\n\t\t\tweight: 1,\r\n\t\r\n\t\t\tdirectionBackwards: false,\r\n\t\t\tmirroredLoop: false\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.animationsMap[ name ] = animation;\r\n\t\tthis.animationsList.push( animation );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\t\r\n\t\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\t\r\n\t\tvar firstAnimation, frameRanges = {};\r\n\t\r\n\t\tvar geometry = this.geometry;\r\n\t\r\n\t\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\t\r\n\t\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\t\tvar chunks = morph.name.match( pattern );\r\n\t\r\n\t\t\tif ( chunks && chunks.length > 1 ) {\r\n\t\r\n\t\t\t\tvar name = chunks[ 1 ];\r\n\t\r\n\t\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\t\r\n\t\t\t\tvar range = frameRanges[ name ];\r\n\t\r\n\t\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\t\tif ( i > range.end ) range.end = i;\r\n\t\r\n\t\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( var name in frameRanges ) {\r\n\t\r\n\t\t\tvar range = frameRanges[ name ];\r\n\t\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.firstAnimation = firstAnimation;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.direction = 1;\r\n\t\t\tanimation.directionBackwards = false;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.direction = - 1;\r\n\t\t\tanimation.directionBackwards = true;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.fps = fps;\r\n\t\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.duration = duration;\r\n\t\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.weight = weight;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.time = time;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\t\r\n\t\tvar time = 0;\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\ttime = animation.time;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn time;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\t\r\n\t\tvar duration = - 1;\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tduration = animation.duration;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn duration;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.time = 0;\r\n\t\t\tanimation.active = true;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tconsole.warn( \"THREE.MorphBlendMesh: animation[\" + name + \"] undefined in .playAnimation()\" );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.active = false;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\r\n\t\r\n\t\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\t\r\n\t\t\tvar animation = this.animationsList[ i ];\r\n\t\r\n\t\t\tif ( ! animation.active ) continue;\r\n\t\r\n\t\t\tvar frameTime = animation.duration / animation.length;\r\n\t\r\n\t\t\tanimation.time += animation.direction * delta;\r\n\t\r\n\t\t\tif ( animation.mirroredLoop ) {\r\n\t\r\n\t\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\t\r\n\t\t\t\t\tanimation.direction *= - 1;\r\n\t\r\n\t\t\t\t\tif ( animation.time > animation.duration ) {\r\n\t\r\n\t\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\t\tanimation.directionBackwards = true;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( animation.time < 0 ) {\r\n\t\r\n\t\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\t\tanimation.directionBackwards = false;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tanimation.time = animation.time % animation.duration;\r\n\t\r\n\t\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar keyframe = animation.start + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\t\tvar weight = animation.weight;\r\n\t\r\n\t\t\tif ( keyframe !== animation.currentFrame ) {\r\n\t\r\n\t\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\t\r\n\t\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\t\r\n\t\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\t\tanimation.currentFrame = keyframe;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\t\r\n\t\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\t\r\n\t\t\tif ( animation.currentFrame !== animation.lastFrame ) {\r\n\t\r\n\t\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = weight;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t// Export the THREE object for **Node.js**, with\r\n\t// backwards-compatibility for the old `require()` API. If we're in\r\n\t// the browser, add `_` as a global object via a string identifier,\r\n\t// for Closure Compiler \"advanced\" mode.\r\n\tif (true) {\r\n\t  if (typeof module !== 'undefined' && module.exports) {\r\n\t    exports = module.exports = THREE;\r\n\t  }\r\n\t  exports.THREE = THREE;\r\n\t} else {\r\n\t  this['THREE'] = THREE;\r\n\t}\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// react-bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap abddeb95b7b2e4d52538","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './containers/App';\r\nReactDOM.render(<App />, document.getElementById('react-app'));\r\n\n\n\n// WEBPACK FOOTER //\n// ./react/app.js","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react/index.js\n// module id = 1\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar hashString = _interopDefault(require('@emotion/hash'));\nvar unitless = _interopDefault(require('@emotion/unitless'));\nvar memoize = _interopDefault(require('@emotion/memoize'));\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(attr|calc|counters?|url)\\(/;\n  var contentValues = ['normal', 'none', 'counter', 'open-quote', 'close-quote', 'no-open-quote', 'no-close-quote', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        console.error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar shouldWarnAboutInterpolatingClassNameFromCss = true;\n\nfunction handleInterpolation(mergedProps, registered, interpolation, couldBeSelectorInterpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result, couldBeSelectorInterpolation);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n\n  if (process.env.NODE_ENV !== 'production' && couldBeSelectorInterpolation && shouldWarnAboutInterpolatingClassNameFromCss && cached !== undefined) {\n    console.error('Interpolating a className from css`` is not recommended and will cause problems with composition.\\n' + 'Interpolating a className from css`` will be completely unsupported in a future major version of Emotion');\n    shouldWarnAboutInterpolatingClassNameFromCss = false;\n  }\n\n  return cached !== undefined && !couldBeSelectorInterpolation ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i], false);\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error('Component selectors can only be used in conjunction with babel-plugin-emotion.');\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value, false);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*;/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings, false);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i], styles.charCodeAt(styles.length - 1) === 46);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nexports.serializeStyles = serializeStyles;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/serialize/dist/serialize.browser.cjs.js\n// module id = 2\n// module chunks = 0","var setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}\nmodule.exports = _inheritsLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@babel/runtime/helpers/inheritsLoose.js\n// module id = 3\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar sheet = require('@emotion/sheet');\nvar Stylis = _interopDefault(require('@emotion/stylis'));\nrequire('@emotion/weak-memoize');\n\n// https://github.com/thysultan/stylis.js/tree/master/plugins/rule-sheet\n// inlined to avoid umd wrapper and peerDep warnings/installing stylis\n// since we use stylis after closure compiler\nvar delimiter = '/*|*/';\nvar needle = delimiter + '}';\n\nfunction toSheet(block) {\n  if (block) {\n    Sheet.current.insert(block + '}');\n  }\n}\n\nvar Sheet = {\n  current: null\n};\nvar ruleSheet = function ruleSheet(context, content, selectors, parents, line, column, length, ns, depth, at) {\n  switch (context) {\n    // property\n    case 1:\n      {\n        switch (content.charCodeAt(0)) {\n          case 64:\n            {\n              // @import\n              Sheet.current.insert(content + ';');\n              return '';\n            }\n          // charcode for l\n\n          case 108:\n            {\n              // charcode for b\n              // this ignores label\n              if (content.charCodeAt(2) === 98) {\n                return '';\n              }\n            }\n        }\n\n        break;\n      }\n    // selector\n\n    case 2:\n      {\n        if (ns === 0) return content + delimiter;\n        break;\n      }\n    // at-rule\n\n    case 3:\n      {\n        switch (ns) {\n          // @font-face, @page\n          case 102:\n          case 112:\n            {\n              Sheet.current.insert(selectors[0] + content);\n              return '';\n            }\n\n          default:\n            {\n              return content + (at === 0 ? delimiter : '');\n            }\n        }\n      }\n\n    case -2:\n      {\n        content.split(needle).forEach(toSheet);\n      }\n  }\n};\n\nvar createCache = function createCache(options) {\n  if (options === undefined) options = {};\n  var key = options.key || 'css';\n  var stylisOptions;\n\n  if (options.prefix !== undefined) {\n    stylisOptions = {\n      prefix: options.prefix\n    };\n  }\n\n  var stylis = new Stylis(stylisOptions);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {}; // $FlowFixMe\n\n  var container;\n\n  {\n    container = options.container || document.head;\n    var nodes = document.querySelectorAll(\"style[data-emotion-\" + key + \"]\");\n    Array.prototype.forEach.call(nodes, function (node) {\n      var attrib = node.getAttribute(\"data-emotion-\" + key); // $FlowFixMe\n\n      attrib.split(' ').forEach(function (id) {\n        inserted[id] = true;\n      });\n\n      if (node.parentNode !== container) {\n        container.appendChild(node);\n      }\n    });\n  }\n\n  var _insert;\n\n  {\n    stylis.use(options.stylisPlugins)(ruleSheet);\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      var name = serialized.name;\n      Sheet.current = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        var map = serialized.map;\n        Sheet.current = {\n          insert: function insert(rule) {\n            sheet.insert(rule + map);\n          }\n        };\n      }\n\n      stylis(selector, serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[name] = true;\n      }\n    };\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    // https://esbench.com/bench/5bf7371a4cd7e6009ef61d0a\n    var commentStart = /\\/\\*/g;\n    var commentEnd = /\\*\\//g;\n    stylis.use(function (context, content) {\n      switch (context) {\n        case -1:\n          {\n            while (commentStart.test(content)) {\n              commentEnd.lastIndex = commentStart.lastIndex;\n\n              if (commentEnd.test(content)) {\n                commentStart.lastIndex = commentEnd.lastIndex;\n                continue;\n              }\n\n              throw new Error('Your styles have an unterminated comment (\"/*\" without corresponding \"*/\").');\n            }\n\n            commentStart.lastIndex = 0;\n            break;\n          }\n      }\n    });\n    stylis.use(function (context, content, selectors) {\n      switch (context) {\n        case -1:\n          {\n            var flag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n            var unsafePseudoClasses = content.match(/(:first|:nth|:nth-last)-child/g);\n\n            if (unsafePseudoClasses && cache.compat !== true) {\n              unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n                var ignoreRegExp = new RegExp(unsafePseudoClass + \".*\\\\/\\\\* \" + flag + \" \\\\*\\\\/\");\n                var ignore = ignoreRegExp.test(content);\n\n                if (unsafePseudoClass && !ignore) {\n                  console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n                }\n              });\n            }\n\n            break;\n          }\n      }\n    });\n  }\n\n  var cache = {\n    key: key,\n    sheet: new sheet.StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  return cache;\n};\n\nexports.default = createCache;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/cache/dist/cache.browser.cjs.js\n// module id = 4\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar serialize = require('@emotion/serialize');\n\nfunction css() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return serialize.serializeStyles(args);\n}\n\nexports.default = css;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/css/dist/css.browser.cjs.js\n// module id = 5\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/*\n\nBased off glamor's StyleSheet, thanks Sunil ❤️\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  return tag;\n}\n\nvar StyleSheet =\n/*#__PURE__*/\nfunction () {\n  function StyleSheet(options) {\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      var _tag = createStyleElement(this);\n\n      var before;\n\n      if (this.tags.length === 0) {\n        before = this.before;\n      } else {\n        before = this.tags[this.tags.length - 1].nextSibling;\n      }\n\n      this.container.insertBefore(_tag, before);\n      this.tags.push(_tag);\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is a really hot path\n        // we check the second character first because having \"i\"\n        // as the second character will happen less often than\n        // having \"@\" as the first character\n        var isImportRule = rule.charCodeAt(1) === 105 && rule.charCodeAt(0) === 64; // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n\n        sheet.insertRule(rule, // we need to insert @import rules before anything else\n        // otherwise there will be an error\n        // technically this means that the @import rules will\n        // _usually_(not always since there could be multiple style tags)\n        // be the first ones in prod and generally later in dev\n        // this shouldn't really matter in the real world though\n        // @import is generally only used for font faces from google fonts and etc.\n        // so while this could be technically correct then it would be slower and larger\n        // for a tiny bit of correctness that won't matter in the real world\n        isImportRule ? 0 : sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n  };\n\n  return StyleSheet;\n}();\n\nexports.StyleSheet = StyleSheet;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/sheet/dist/sheet.browser.cjs.js\n// module id = 6\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar isBrowser = \"object\" !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className]);\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false && cache.compat !== undefined) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      var maybeStyles = cache.insert(\".\" + className, current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexports.getRegisteredStyles = getRegisteredStyles;\nexports.insertStyles = insertStyles;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/utils/dist/utils.browser.cjs.js\n// module id = 7\n// module chunks = 0","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/object-assign/index.js\n// module id = 8\n// module chunks = 0","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-dom/index.js\n// module id = 9\n// module chunks = 0","function _extends() {\n  module.exports = _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _extends.apply(this, arguments);\n}\nmodule.exports = _extends, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@babel/runtime/helpers/extends.js\n// module id = 10\n// module chunks = 0","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@babel/runtime/helpers/objectWithoutPropertiesLoose.js\n// module id = 11\n// module chunks = 0","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@babel/runtime/helpers/setPrototypeOf.js\n// module id = 12\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar _inheritsLoose = require('@babel/runtime/helpers/inheritsLoose');\nvar React = require('react');\nrequire('@emotion/cache');\nvar emotionElement = require('./emotion-element-3a21e59a.browser.cjs.js');\nvar utils = require('@emotion/utils');\nvar serialize = require('@emotion/serialize');\nvar sheet = require('@emotion/sheet');\nvar css = require('@emotion/css');\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar _inheritsLoose__default = /*#__PURE__*/_interopDefault(_inheritsLoose);\nvar css__default = /*#__PURE__*/_interopDefault(css);\n\nvar jsx = function jsx(type, props) {\n  var args = arguments;\n\n  if (props == null || !emotionElement.hasOwnProperty.call(props, 'css')) {\n    // $FlowFixMe\n    return React.createElement.apply(undefined, args);\n  }\n\n  var argsLength = args.length;\n  var createElementArgArray = new Array(argsLength);\n  createElementArgArray[0] = emotionElement.Emotion;\n  createElementArgArray[1] = emotionElement.createEmotionProps(type, props);\n\n  for (var i = 2; i < argsLength; i++) {\n    createElementArgArray[i] = args[i];\n  } // $FlowFixMe\n\n\n  return React.createElement.apply(null, createElementArgArray);\n};\n\nvar warnedAboutCssPropForGlobal = false;\nvar Global = /* #__PURE__ */emotionElement.withEmotionCache(function (props, cache) {\n  if (process.env.NODE_ENV !== 'production' && !warnedAboutCssPropForGlobal && ( // check for className as well since the user is\n  // probably using the custom createElement which\n  // means it will be turned into a className prop\n  // $FlowFixMe I don't really want to add it to the type since it shouldn't be used\n  props.className || props.css)) {\n    console.error(\"It looks like you're using the css prop on Global, did you mean to use the styles prop instead?\");\n    warnedAboutCssPropForGlobal = true;\n  }\n\n  var styles = props.styles;\n\n  if (typeof styles === 'function') {\n    return /*#__PURE__*/React.createElement(emotionElement.ThemeContext.Consumer, null, function (theme) {\n      var serialized = serialize.serializeStyles([styles(theme)]);\n      return /*#__PURE__*/React.createElement(InnerGlobal, {\n        serialized: serialized,\n        cache: cache\n      });\n    });\n  }\n\n  var serialized = serialize.serializeStyles([styles]);\n  return /*#__PURE__*/React.createElement(InnerGlobal, {\n    serialized: serialized,\n    cache: cache\n  });\n});\n\n// maintain place over rerenders.\n// initial render from browser, insertBefore context.sheet.tags[0] or if a style hasn't been inserted there yet, appendChild\n// initial client-side render from SSR, use place of hydrating tag\nvar InnerGlobal = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose__default['default'](InnerGlobal, _React$Component);\n\n  function InnerGlobal(props, context, updater) {\n    return _React$Component.call(this, props, context, updater) || this;\n  }\n\n  var _proto = InnerGlobal.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.sheet = new sheet.StyleSheet({\n      key: this.props.cache.key + \"-global\",\n      nonce: this.props.cache.sheet.nonce,\n      container: this.props.cache.sheet.container\n    }); // $FlowFixMe\n\n    var node = document.querySelector(\"style[data-emotion-\" + this.props.cache.key + \"=\\\"\" + this.props.serialized.name + \"\\\"]\");\n\n    if (node !== null) {\n      this.sheet.tags.push(node);\n    }\n\n    if (this.props.cache.sheet.tags.length) {\n      this.sheet.before = this.props.cache.sheet.tags[0];\n    }\n\n    this.insertStyles();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (prevProps.serialized.name !== this.props.serialized.name) {\n      this.insertStyles();\n    }\n  };\n\n  _proto.insertStyles = function insertStyles() {\n    if (this.props.serialized.next !== undefined) {\n      // insert keyframes\n      utils.insertStyles(this.props.cache, this.props.serialized.next, true);\n    }\n\n    if (this.sheet.tags.length) {\n      // if this doesn't exist then it will be null so the style element will be appended\n      var element = this.sheet.tags[this.sheet.tags.length - 1].nextElementSibling;\n      this.sheet.before = element;\n      this.sheet.flush();\n    }\n\n    this.props.cache.insert(\"\", this.props.serialized, this.sheet, false);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.sheet.flush();\n  };\n\n  _proto.render = function render() {\n\n    return null;\n  };\n\n  return InnerGlobal;\n}(React.Component);\n\nvar keyframes = function keyframes() {\n  var insertable = css__default['default'].apply(void 0, arguments);\n  var name = \"animation-\" + insertable.name; // $FlowFixMe\n\n  return {\n    name: name,\n    styles: \"@keyframes \" + name + \"{\" + insertable.styles + \"}\",\n    anim: 1,\n    toString: function toString() {\n      return \"_EMO_\" + this.name + \"_\" + this.styles + \"_EMO_\";\n    }\n  };\n};\n\nvar classnames = function classnames(args) {\n  var len = args.length;\n  var i = 0;\n  var cls = '';\n\n  for (; i < len; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = utils.getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar Noop = function Noop() {\n  return null;\n};\n\nvar ClassNames = emotionElement.withEmotionCache(function (props, context) {\n  return /*#__PURE__*/React.createElement(emotionElement.ThemeContext.Consumer, null, function (theme) {\n    var hasRendered = false;\n\n    var css = function css() {\n      if (hasRendered && process.env.NODE_ENV !== 'production') {\n        throw new Error('css can only be used during render');\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var serialized = serialize.serializeStyles(args, context.registered);\n\n      {\n        utils.insertStyles(context, serialized, false);\n      }\n\n      return context.key + \"-\" + serialized.name;\n    };\n\n    var cx = function cx() {\n      if (hasRendered && process.env.NODE_ENV !== 'production') {\n        throw new Error('cx can only be used during render');\n      }\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return merge(context.registered, css, classnames(args));\n    };\n\n    var content = {\n      css: css,\n      cx: cx,\n      theme: theme\n    };\n    var ele = props.children(content);\n    hasRendered = true;\n    var possiblyStyleElement = /*#__PURE__*/React.createElement(Noop, null);\n\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, possiblyStyleElement, ele);\n  });\n});\n\nexports.CacheProvider = emotionElement.CacheProvider;\nexports.ThemeContext = emotionElement.ThemeContext;\nexports.withEmotionCache = emotionElement.withEmotionCache;\nObject.defineProperty(exports, 'css', {\n  enumerable: true,\n  get: function () {\n    return css__default['default'];\n  }\n});\nexports.ClassNames = ClassNames;\nexports.Global = Global;\nexports.createElement = jsx;\nexports.jsx = jsx;\nexports.keyframes = keyframes;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/core/dist/core.browser.cjs.js\n// module id = 13\n// module chunks = 0","'use strict';\n\nrequire('@babel/runtime/helpers/inheritsLoose');\nvar React = require('react');\nvar createCache = require('@emotion/cache');\nvar utils = require('@emotion/utils');\nvar serialize = require('@emotion/serialize');\n\nfunction _interopDefault (e) { return e && e.__esModule ? e : { 'default': e }; }\n\nvar createCache__default = /*#__PURE__*/_interopDefault(createCache);\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar EmotionCacheContext = /*#__PURE__*/React.createContext( // we're doing this to avoid preconstruct's dead code elimination in this one case\n// because this module is primarily intended for the browser and node\n// but it's also required in react native and similar environments sometimes\n// and we could have a special build just for that\n// but this is much easier and the native packages\n// might use a different theme context in the future anyway\ntypeof HTMLElement !== 'undefined' ? createCache__default['default']() : null);\nvar ThemeContext = /*#__PURE__*/React.createContext({});\nvar CacheProvider = EmotionCacheContext.Provider;\n\nvar withEmotionCache = function withEmotionCache(func) {\n  var render = function render(props, ref) {\n    return /*#__PURE__*/React.createElement(EmotionCacheContext.Consumer, null, function (cache) {\n      return func(props, cache, ref);\n    });\n  }; // $FlowFixMe\n\n\n  return /*#__PURE__*/React.forwardRef(render);\n};\n\n// thus we only need to replace what is a valid character for JS, but not for CSS\n\nvar sanitizeIdentifier = function sanitizeIdentifier(identifier) {\n  return identifier.replace(/\\$/g, '-');\n};\n\nvar typePropName = '__EMOTION_TYPE_PLEASE_DO_NOT_USE__';\nvar labelPropName = '__EMOTION_LABEL_PLEASE_DO_NOT_USE__';\nvar createEmotionProps = function createEmotionProps(type, props) {\n  if (process.env.NODE_ENV !== 'production' && typeof props.css === 'string' && // check if there is a css declaration\n  props.css.indexOf(':') !== -1) {\n    throw new Error(\"Strings are not allowed as css prop values, please wrap it in a css template literal from '@emotion/css' like this: css`\" + props.css + \"`\");\n  }\n\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps[typePropName] = type; // TODO: check if this still works with all of those different JSX functions\n\n  if (process.env.NODE_ENV !== 'production') {\n    var error = new Error();\n\n    if (error.stack) {\n      // chrome\n      var match = error.stack.match(/at (?:Object\\.|Module\\.|)(?:jsx|createEmotionProps).*\\n\\s+at (?:Object\\.|)([A-Z][A-Za-z$]+) /);\n\n      if (!match) {\n        // safari and firefox\n        match = error.stack.match(/.*\\n([A-Z][A-Za-z$]+)@/);\n      }\n\n      if (match) {\n        newProps[labelPropName] = sanitizeIdentifier(match[1]);\n      }\n    }\n  }\n\n  return newProps;\n};\n\nvar Noop = function Noop() {\n  return null;\n};\n\nvar render = function render(cache, props, theme, ref) {\n  var cssProp = theme === null ? props.css : props.css(theme); // so that using `css` from `emotion` and passing the result to the css prop works\n  // not passing the registered cache to serializeStyles because it would\n  // make certain babel optimisations not possible\n\n  if (typeof cssProp === 'string' && cache.registered[cssProp] !== undefined) {\n    cssProp = cache.registered[cssProp];\n  }\n\n  var type = props[typePropName];\n  var registeredStyles = [cssProp];\n  var className = '';\n\n  if (typeof props.className === 'string') {\n    className = utils.getRegisteredStyles(cache.registered, registeredStyles, props.className);\n  } else if (props.className != null) {\n    className = props.className + \" \";\n  }\n\n  var serialized = serialize.serializeStyles(registeredStyles);\n\n  if (process.env.NODE_ENV !== 'production' && serialized.name.indexOf('-') === -1) {\n    var labelFromStack = props[labelPropName];\n\n    if (labelFromStack) {\n      serialized = serialize.serializeStyles([serialized, 'label:' + labelFromStack + ';']);\n    }\n  }\n\n  var rules = utils.insertStyles(cache, serialized, typeof type === 'string');\n  className += cache.key + \"-\" + serialized.name;\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key) && key !== 'css' && key !== typePropName && (process.env.NODE_ENV === 'production' || key !== labelPropName)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps.ref = ref;\n  newProps.className = className;\n  var ele = /*#__PURE__*/React.createElement(type, newProps);\n  var possiblyStyleElement = /*#__PURE__*/React.createElement(Noop, null);\n\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, possiblyStyleElement, ele);\n}; // eslint-disable-next-line no-undef\n\n\nvar Emotion = /* #__PURE__ */withEmotionCache(function (props, cache, ref) {\n  if (typeof props.css === 'function') {\n    return /*#__PURE__*/React.createElement(ThemeContext.Consumer, null, function (theme) {\n      return render(cache, props, theme, ref);\n    });\n  }\n\n  return render(cache, props, null, ref);\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  Emotion.displayName = 'EmotionCssPropInternal';\n}\n\nexports.CacheProvider = CacheProvider;\nexports.Emotion = Emotion;\nexports.ThemeContext = ThemeContext;\nexports.createEmotionProps = createEmotionProps;\nexports.hasOwnProperty = hasOwnProperty;\nexports.withEmotionCache = withEmotionCache;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/core/dist/emotion-element-3a21e59a.browser.cjs.js\n// module id = 14\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexports.default = murmur2;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/hash/dist/hash.browser.cjs.js\n// module id = 15\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexports.default = memoize;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/memoize/dist/memoize.browser.cjs.js\n// module id = 16\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction stylis_min (W) {\n  function M(d, c, e, h, a) {\n    for (var m = 0, b = 0, v = 0, n = 0, q, g, x = 0, K = 0, k, u = k = q = 0, l = 0, r = 0, I = 0, t = 0, B = e.length, J = B - 1, y, f = '', p = '', F = '', G = '', C; l < B;) {\n      g = e.charCodeAt(l);\n      l === J && 0 !== b + n + v + m && (0 !== b && (g = 47 === b ? 10 : 47), n = v = m = 0, B++, J++);\n\n      if (0 === b + n + v + m) {\n        if (l === J && (0 < r && (f = f.replace(N, '')), 0 < f.trim().length)) {\n          switch (g) {\n            case 32:\n            case 9:\n            case 59:\n            case 13:\n            case 10:\n              break;\n\n            default:\n              f += e.charAt(l);\n          }\n\n          g = 59;\n        }\n\n        switch (g) {\n          case 123:\n            f = f.trim();\n            q = f.charCodeAt(0);\n            k = 1;\n\n            for (t = ++l; l < B;) {\n              switch (g = e.charCodeAt(l)) {\n                case 123:\n                  k++;\n                  break;\n\n                case 125:\n                  k--;\n                  break;\n\n                case 47:\n                  switch (g = e.charCodeAt(l + 1)) {\n                    case 42:\n                    case 47:\n                      a: {\n                        for (u = l + 1; u < J; ++u) {\n                          switch (e.charCodeAt(u)) {\n                            case 47:\n                              if (42 === g && 42 === e.charCodeAt(u - 1) && l + 2 !== u) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                              break;\n\n                            case 10:\n                              if (47 === g) {\n                                l = u + 1;\n                                break a;\n                              }\n\n                          }\n                        }\n\n                        l = u;\n                      }\n\n                  }\n\n                  break;\n\n                case 91:\n                  g++;\n\n                case 40:\n                  g++;\n\n                case 34:\n                case 39:\n                  for (; l++ < J && e.charCodeAt(l) !== g;) {\n                  }\n\n              }\n\n              if (0 === k) break;\n              l++;\n            }\n\n            k = e.substring(t, l);\n            0 === q && (q = (f = f.replace(ca, '').trim()).charCodeAt(0));\n\n            switch (q) {\n              case 64:\n                0 < r && (f = f.replace(N, ''));\n                g = f.charCodeAt(1);\n\n                switch (g) {\n                  case 100:\n                  case 109:\n                  case 115:\n                  case 45:\n                    r = c;\n                    break;\n\n                  default:\n                    r = O;\n                }\n\n                k = M(c, r, k, g, a + 1);\n                t = k.length;\n                0 < A && (r = X(O, f, I), C = H(3, k, r, c, D, z, t, g, a, h), f = r.join(''), void 0 !== C && 0 === (t = (k = C.trim()).length) && (g = 0, k = ''));\n                if (0 < t) switch (g) {\n                  case 115:\n                    f = f.replace(da, ea);\n\n                  case 100:\n                  case 109:\n                  case 45:\n                    k = f + '{' + k + '}';\n                    break;\n\n                  case 107:\n                    f = f.replace(fa, '$1 $2');\n                    k = f + '{' + k + '}';\n                    k = 1 === w || 2 === w && L('@' + k, 3) ? '@-webkit-' + k + '@' + k : '@' + k;\n                    break;\n\n                  default:\n                    k = f + k, 112 === h && (k = (p += k, ''));\n                } else k = '';\n                break;\n\n              default:\n                k = M(c, X(c, f, I), k, h, a + 1);\n            }\n\n            F += k;\n            k = I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n            break;\n\n          case 125:\n          case 59:\n            f = (0 < r ? f.replace(N, '') : f).trim();\n            if (1 < (t = f.length)) switch (0 === u && (q = f.charCodeAt(0), 45 === q || 96 < q && 123 > q) && (t = (f = f.replace(' ', ':')).length), 0 < A && void 0 !== (C = H(1, f, c, d, D, z, p.length, h, a, h)) && 0 === (t = (f = C.trim()).length) && (f = '\\x00\\x00'), q = f.charCodeAt(0), g = f.charCodeAt(1), q) {\n              case 0:\n                break;\n\n              case 64:\n                if (105 === g || 99 === g) {\n                  G += f + e.charAt(l);\n                  break;\n                }\n\n              default:\n                58 !== f.charCodeAt(t - 1) && (p += P(f, q, g, f.charCodeAt(2)));\n            }\n            I = r = u = q = 0;\n            f = '';\n            g = e.charCodeAt(++l);\n        }\n      }\n\n      switch (g) {\n        case 13:\n        case 10:\n          47 === b ? b = 0 : 0 === 1 + q && 107 !== h && 0 < f.length && (r = 1, f += '\\x00');\n          0 < A * Y && H(0, f, c, d, D, z, p.length, h, a, h);\n          z = 1;\n          D++;\n          break;\n\n        case 59:\n        case 125:\n          if (0 === b + n + v + m) {\n            z++;\n            break;\n          }\n\n        default:\n          z++;\n          y = e.charAt(l);\n\n          switch (g) {\n            case 9:\n            case 32:\n              if (0 === n + m + b) switch (x) {\n                case 44:\n                case 58:\n                case 9:\n                case 32:\n                  y = '';\n                  break;\n\n                default:\n                  32 !== g && (y = ' ');\n              }\n              break;\n\n            case 0:\n              y = '\\\\0';\n              break;\n\n            case 12:\n              y = '\\\\f';\n              break;\n\n            case 11:\n              y = '\\\\v';\n              break;\n\n            case 38:\n              0 === n + b + m && (r = I = 1, y = '\\f' + y);\n              break;\n\n            case 108:\n              if (0 === n + b + m + E && 0 < u) switch (l - u) {\n                case 2:\n                  112 === x && 58 === e.charCodeAt(l - 3) && (E = x);\n\n                case 8:\n                  111 === K && (E = K);\n              }\n              break;\n\n            case 58:\n              0 === n + b + m && (u = l);\n              break;\n\n            case 44:\n              0 === b + v + n + m && (r = 1, y += '\\r');\n              break;\n\n            case 34:\n            case 39:\n              0 === b && (n = n === g ? 0 : 0 === n ? g : n);\n              break;\n\n            case 91:\n              0 === n + b + v && m++;\n              break;\n\n            case 93:\n              0 === n + b + v && m--;\n              break;\n\n            case 41:\n              0 === n + b + m && v--;\n              break;\n\n            case 40:\n              if (0 === n + b + m) {\n                if (0 === q) switch (2 * x + 3 * K) {\n                  case 533:\n                    break;\n\n                  default:\n                    q = 1;\n                }\n                v++;\n              }\n\n              break;\n\n            case 64:\n              0 === b + v + n + m + u + k && (k = 1);\n              break;\n\n            case 42:\n            case 47:\n              if (!(0 < n + m + v)) switch (b) {\n                case 0:\n                  switch (2 * g + 3 * e.charCodeAt(l + 1)) {\n                    case 235:\n                      b = 47;\n                      break;\n\n                    case 220:\n                      t = l, b = 42;\n                  }\n\n                  break;\n\n                case 42:\n                  47 === g && 42 === x && t + 2 !== l && (33 === e.charCodeAt(t + 2) && (p += e.substring(t, l + 1)), y = '', b = 0);\n              }\n          }\n\n          0 === b && (f += y);\n      }\n\n      K = x;\n      x = g;\n      l++;\n    }\n\n    t = p.length;\n\n    if (0 < t) {\n      r = c;\n      if (0 < A && (C = H(2, p, r, d, D, z, t, h, a, h), void 0 !== C && 0 === (p = C).length)) return G + p + F;\n      p = r.join(',') + '{' + p + '}';\n\n      if (0 !== w * E) {\n        2 !== w || L(p, 2) || (E = 0);\n\n        switch (E) {\n          case 111:\n            p = p.replace(ha, ':-moz-$1') + p;\n            break;\n\n          case 112:\n            p = p.replace(Q, '::-webkit-input-$1') + p.replace(Q, '::-moz-$1') + p.replace(Q, ':-ms-input-$1') + p;\n        }\n\n        E = 0;\n      }\n    }\n\n    return G + p + F;\n  }\n\n  function X(d, c, e) {\n    var h = c.trim().split(ia);\n    c = h;\n    var a = h.length,\n        m = d.length;\n\n    switch (m) {\n      case 0:\n      case 1:\n        var b = 0;\n\n        for (d = 0 === m ? '' : d[0] + ' '; b < a; ++b) {\n          c[b] = Z(d, c[b], e).trim();\n        }\n\n        break;\n\n      default:\n        var v = b = 0;\n\n        for (c = []; b < a; ++b) {\n          for (var n = 0; n < m; ++n) {\n            c[v++] = Z(d[n] + ' ', h[b], e).trim();\n          }\n        }\n\n    }\n\n    return c;\n  }\n\n  function Z(d, c, e) {\n    var h = c.charCodeAt(0);\n    33 > h && (h = (c = c.trim()).charCodeAt(0));\n\n    switch (h) {\n      case 38:\n        return c.replace(F, '$1' + d.trim());\n\n      case 58:\n        return d.trim() + c.replace(F, '$1' + d.trim());\n\n      default:\n        if (0 < 1 * e && 0 < c.indexOf('\\f')) return c.replace(F, (58 === d.charCodeAt(0) ? '' : '$1') + d.trim());\n    }\n\n    return d + c;\n  }\n\n  function P(d, c, e, h) {\n    var a = d + ';',\n        m = 2 * c + 3 * e + 4 * h;\n\n    if (944 === m) {\n      d = a.indexOf(':', 9) + 1;\n      var b = a.substring(d, a.length - 1).trim();\n      b = a.substring(0, d).trim() + b + ';';\n      return 1 === w || 2 === w && L(b, 1) ? '-webkit-' + b + b : b;\n    }\n\n    if (0 === w || 2 === w && !L(a, 1)) return a;\n\n    switch (m) {\n      case 1015:\n        return 97 === a.charCodeAt(10) ? '-webkit-' + a + a : a;\n\n      case 951:\n        return 116 === a.charCodeAt(3) ? '-webkit-' + a + a : a;\n\n      case 963:\n        return 110 === a.charCodeAt(5) ? '-webkit-' + a + a : a;\n\n      case 1009:\n        if (100 !== a.charCodeAt(4)) break;\n\n      case 969:\n      case 942:\n        return '-webkit-' + a + a;\n\n      case 978:\n        return '-webkit-' + a + '-moz-' + a + a;\n\n      case 1019:\n      case 983:\n        return '-webkit-' + a + '-moz-' + a + '-ms-' + a + a;\n\n      case 883:\n        if (45 === a.charCodeAt(8)) return '-webkit-' + a + a;\n        if (0 < a.indexOf('image-set(', 11)) return a.replace(ja, '$1-webkit-$2') + a;\n        break;\n\n      case 932:\n        if (45 === a.charCodeAt(4)) switch (a.charCodeAt(5)) {\n          case 103:\n            return '-webkit-box-' + a.replace('-grow', '') + '-webkit-' + a + '-ms-' + a.replace('grow', 'positive') + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-' + a.replace('shrink', 'negative') + a;\n\n          case 98:\n            return '-webkit-' + a + '-ms-' + a.replace('basis', 'preferred-size') + a;\n        }\n        return '-webkit-' + a + '-ms-' + a + a;\n\n      case 964:\n        return '-webkit-' + a + '-ms-flex-' + a + a;\n\n      case 1023:\n        if (99 !== a.charCodeAt(8)) break;\n        b = a.substring(a.indexOf(':', 15)).replace('flex-', '').replace('space-between', 'justify');\n        return '-webkit-box-pack' + b + '-webkit-' + a + '-ms-flex-pack' + b + a;\n\n      case 1005:\n        return ka.test(a) ? a.replace(aa, ':-webkit-') + a.replace(aa, ':-moz-') + a : a;\n\n      case 1e3:\n        b = a.substring(13).trim();\n        c = b.indexOf('-') + 1;\n\n        switch (b.charCodeAt(0) + b.charCodeAt(c)) {\n          case 226:\n            b = a.replace(G, 'tb');\n            break;\n\n          case 232:\n            b = a.replace(G, 'tb-rl');\n            break;\n\n          case 220:\n            b = a.replace(G, 'lr');\n            break;\n\n          default:\n            return a;\n        }\n\n        return '-webkit-' + a + '-ms-' + b + a;\n\n      case 1017:\n        if (-1 === a.indexOf('sticky', 9)) break;\n\n      case 975:\n        c = (a = d).length - 10;\n        b = (33 === a.charCodeAt(c) ? a.substring(0, c) : a).substring(d.indexOf(':', 7) + 1).trim();\n\n        switch (m = b.charCodeAt(0) + (b.charCodeAt(7) | 0)) {\n          case 203:\n            if (111 > b.charCodeAt(8)) break;\n\n          case 115:\n            a = a.replace(b, '-webkit-' + b) + ';' + a;\n            break;\n\n          case 207:\n          case 102:\n            a = a.replace(b, '-webkit-' + (102 < m ? 'inline-' : '') + 'box') + ';' + a.replace(b, '-webkit-' + b) + ';' + a.replace(b, '-ms-' + b + 'box') + ';' + a;\n        }\n\n        return a + ';';\n\n      case 938:\n        if (45 === a.charCodeAt(5)) switch (a.charCodeAt(6)) {\n          case 105:\n            return b = a.replace('-items', ''), '-webkit-' + a + '-webkit-box-' + b + '-ms-flex-' + b + a;\n\n          case 115:\n            return '-webkit-' + a + '-ms-flex-item-' + a.replace(ba, '') + a;\n\n          default:\n            return '-webkit-' + a + '-ms-flex-line-pack' + a.replace('align-content', '').replace(ba, '') + a;\n        }\n        break;\n\n      case 973:\n      case 989:\n        if (45 !== a.charCodeAt(3) || 122 === a.charCodeAt(4)) break;\n\n      case 931:\n      case 953:\n        if (!0 === la.test(d)) return 115 === (b = d.substring(d.indexOf(':') + 1)).charCodeAt(0) ? P(d.replace('stretch', 'fill-available'), c, e, h).replace(':fill-available', ':stretch') : a.replace(b, '-webkit-' + b) + a.replace(b, '-moz-' + b.replace('fill-', '')) + a;\n        break;\n\n      case 962:\n        if (a = '-webkit-' + a + (102 === a.charCodeAt(5) ? '-ms-' + a : '') + a, 211 === e + h && 105 === a.charCodeAt(13) && 0 < a.indexOf('transform', 10)) return a.substring(0, a.indexOf(';', 27) + 1).replace(ma, '$1-webkit-$2') + a;\n    }\n\n    return a;\n  }\n\n  function L(d, c) {\n    var e = d.indexOf(1 === c ? ':' : '{'),\n        h = d.substring(0, 3 !== c ? e : 10);\n    e = d.substring(e + 1, d.length - 1);\n    return R(2 !== c ? h : h.replace(na, '$1'), e, c);\n  }\n\n  function ea(d, c) {\n    var e = P(c, c.charCodeAt(0), c.charCodeAt(1), c.charCodeAt(2));\n    return e !== c + ';' ? e.replace(oa, ' or ($1)').substring(4) : '(' + c + ')';\n  }\n\n  function H(d, c, e, h, a, m, b, v, n, q) {\n    for (var g = 0, x = c, w; g < A; ++g) {\n      switch (w = S[g].call(B, d, x, e, h, a, m, b, v, n, q)) {\n        case void 0:\n        case !1:\n        case !0:\n        case null:\n          break;\n\n        default:\n          x = w;\n      }\n    }\n\n    if (x !== c) return x;\n  }\n\n  function T(d) {\n    switch (d) {\n      case void 0:\n      case null:\n        A = S.length = 0;\n        break;\n\n      default:\n        if ('function' === typeof d) S[A++] = d;else if ('object' === typeof d) for (var c = 0, e = d.length; c < e; ++c) {\n          T(d[c]);\n        } else Y = !!d | 0;\n    }\n\n    return T;\n  }\n\n  function U(d) {\n    d = d.prefix;\n    void 0 !== d && (R = null, d ? 'function' !== typeof d ? w = 1 : (w = 2, R = d) : w = 0);\n    return U;\n  }\n\n  function B(d, c) {\n    var e = d;\n    33 > e.charCodeAt(0) && (e = e.trim());\n    V = e;\n    e = [V];\n\n    if (0 < A) {\n      var h = H(-1, c, e, e, D, z, 0, 0, 0, 0);\n      void 0 !== h && 'string' === typeof h && (c = h);\n    }\n\n    var a = M(O, e, c, 0, 0);\n    0 < A && (h = H(-2, a, e, e, D, z, a.length, 0, 0, 0), void 0 !== h && (a = h));\n    V = '';\n    E = 0;\n    z = D = 1;\n    return a;\n  }\n\n  var ca = /^\\0+/g,\n      N = /[\\0\\r\\f]/g,\n      aa = /: */g,\n      ka = /zoo|gra/,\n      ma = /([,: ])(transform)/g,\n      ia = /,\\r+?/g,\n      F = /([\\t\\r\\n ])*\\f?&/g,\n      fa = /@(k\\w+)\\s*(\\S*)\\s*/,\n      Q = /::(place)/g,\n      ha = /:(read-only)/g,\n      G = /[svh]\\w+-[tblr]{2}/,\n      da = /\\(\\s*(.*)\\s*\\)/g,\n      oa = /([\\s\\S]*?);/g,\n      ba = /-self|flex-/g,\n      na = /[^]*?(:[rp][el]a[\\w-]+)[^]*/,\n      la = /stretch|:\\s*\\w+\\-(?:conte|avail)/,\n      ja = /([^-])(image-set\\()/,\n      z = 1,\n      D = 1,\n      E = 0,\n      w = 1,\n      O = [],\n      S = [],\n      A = 0,\n      R = null,\n      Y = 0,\n      V = '';\n  B.use = T;\n  B.set = U;\n  void 0 !== W && U(W);\n  return B;\n}\n\nexports.default = stylis_min;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/stylis/dist/stylis.browser.cjs.js\n// module id = 17\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar unitlessKeys = {\n  animationIterationCount: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexports.default = unitlessKeys;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/unitless/dist/unitless.browser.cjs.js\n// module id = 18\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar weakMemoize = function weakMemoize(func) {\n  // $FlowFixMe flow doesn't include all non-primitive types as allowed for weakmaps\n  var cache = new WeakMap();\n  return function (arg) {\n    if (cache.has(arg)) {\n      // $FlowFixMe\n      return cache.get(arg);\n    }\n\n    var ret = func(arg);\n    cache.set(arg, ret);\n    return ret;\n  };\n};\n\nexports.default = weakMemoize;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@emotion/weak-memoize/dist/weak-memoize.browser.cjs.js\n// module id = 19\n// module chunks = 0","import React from 'react';\r\nimport STLViewer from '../../src/App';\r\nconst App = () => {\r\n  return (\r\n    <STLViewer\r\n      models={[\r\n        'https://hassans.s3.eu-central-1.amazonaws.com/assets/newest01-07-2023:16:01:42.stl',\r\n      ]}\r\n      color=\"rgba(255,0,48,0.2)\"\r\n      range\r\n      width={1200}\r\n      height={1000}\r\n      remove\r\n      handleRemove={(item) => {\r\n        console.log(item);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default App;\r\n\n\n\n// WEBPACK FOOTER //\n// ./react/containers/App.js","import React, { useState, useEffect } from 'react';\r\nimport STLViewer from './STLViewer';\r\nimport Slider from 'react-input-slider';\r\nconst App = (props) => {\r\n  // const {\r\n  //   rotate = false,\r\n  //   range = false,\r\n  //   remove = false,\r\n  //   handleRemove = () => {},\r\n  // } = props;\r\n  const {\r\n    models,\r\n    color,\r\n    rotate = false,\r\n    range = false,\r\n    remove = false,\r\n    width,\r\n    height,\r\n    backgroundColor,\r\n    className,\r\n    handleRemove = () => {},\r\n  } = props;\r\n  // const [color, setColor] = useState('rgba(255,0,48,0.2)');\r\n  // const [models, setModels] = useState([\r\n  //   // 'https://hassans.s3.eu-central-1.amazonaws.com/youssef/order/order_g69r/impressions/order_g69rL.STL',\r\n  //   'https://hassans.s3.eu-central-1.amazonaws.com/youssef/assets/w4fxL_OutputModel_SLA.stl',\r\n  // ]);\r\n  const [sliders, setSliders] = useState([]);\r\n  useEffect(() => {\r\n    setSliders(\r\n      models.map((_, index) => ({\r\n        index,\r\n        value: 1,\r\n      }))\r\n    );\r\n  }, [models]);\r\n  if (!models || sliders.length === 0) return null;\r\n  return (\r\n    <div>\r\n      <div style={{ margin: '10px 0px' }}>\r\n        {range &&\r\n          sliders.map((item, index) => {\r\n            return (\r\n              <div\r\n                key={index}\r\n                style={{\r\n                  margin: '10px 0px',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'space-between',\r\n                }}\r\n              >\r\n                <div>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={sliders[index].value > 0}\r\n                    onClick={(e) => {\r\n                      const newSliders = sliders.map((item, i) => {\r\n                        if (i === index) {\r\n                          if (e.target.checked) {\r\n                            return { ...item, value: 1 };\r\n                          } else {\r\n                            return { ...item, value: 0 };\r\n                          }\r\n                        }\r\n                        return item;\r\n                      });\r\n                      setSliders(newSliders);\r\n                    }}\r\n                  />\r\n                  <Slider\r\n                    axis=\"x\"\r\n                    xstep={0.1}\r\n                    xmin={0.0}\r\n                    xmax={1.0}\r\n                    x={item.value}\r\n                    onChange={({ x }) => {\r\n                      const newSliders = sliders.map((item, i) => {\r\n                        if (i === index) {\r\n                          return { ...item, value: parseFloat(x) };\r\n                        }\r\n                        return item;\r\n                      });\r\n                      setSliders(newSliders);\r\n                    }}\r\n                    style={{ marginLeft: '20px' }}\r\n                  />\r\n                </div>\r\n                {remove && (\r\n                  <a role=\"button\">\r\n                    <img\r\n                      src=\"https://hassans.s3.eu-central-1.amazonaws.com/assets/x11-21-2022:21:11:19.png\"\r\n                      style={{ width: '21px', cursor: 'pointer' }}\r\n                      onClick={() => {\r\n                        handleRemove(models[index]);\r\n                      }}\r\n                    />\r\n                  </a>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n      </div>\r\n      <STLViewer\r\n        modelColor={color}\r\n        rotate={rotate}\r\n        sliders={sliders}\r\n        models={models}\r\n        width={width}\r\n        height={height}\r\n        backgroundColor={backgroundColor}\r\n        className={className}\r\n      />\r\n    </div>\r\n  );\r\n};\r\nexport default App;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.js","import THREE from './Three';\r\nimport ReactDOM from 'react-dom';\r\nlet OrbitControls = require('three-orbit-controls')(THREE);\r\n\r\nconst DIRECTIONAL_LIGHT = 'directionalLight';\r\n\r\nclass Paint {\r\n  constructor() {\r\n    this.loader = new THREE.STLLoader();\r\n    this.scene = new THREE.Scene();\r\n    this.renderer = new THREE.WebGLRenderer({\r\n      antialias: true,\r\n    });\r\n    this.reqNumber = 0;\r\n    this.loaded = false;\r\n    this.light = undefined;\r\n  }\r\n\r\n  init(context, sliders, models) {\r\n    this.models = models;\r\n    this.sliders = sliders;\r\n    this.component = context;\r\n    this.width = context.props.width;\r\n    this.height = context.props.height;\r\n    this.modelColor = context.props.modelColor;\r\n    this.backgroundColor = context.props.backgroundColor;\r\n    this.orbitControls = context.props.orbitControls;\r\n    this.rotate = context.props.rotate;\r\n    this.cameraX = context.props.cameraX;\r\n    this.cameraY = context.props.cameraY;\r\n    this.cameraZ = context.props.cameraZ;\r\n    this.rotationSpeeds = context.props.rotationSpeeds;\r\n    this.lights = context.props.lights;\r\n    this.lightColor = context.props.lightColor;\r\n    this.model = context.props.model;\r\n\r\n    // if (this.mesh !== undefined) {\r\n    //   this.scene.remove(this.mesh);\r\n    //   this.mesh.geometry.dispose();\r\n    //   this.mesh.material.dispose();\r\n    //   this.scene.remove(this.grid);\r\n    // }\r\n\r\n    if (this.animationRequestId) {\r\n      cancelAnimationFrame(this.animationRequestId);\r\n    }\r\n\r\n    this.distance = 10000;\r\n\r\n    this.reqNumber += 1;\r\n    if (!this.loaded) this.addSTLToScene(this.reqNumber);\r\n    const meshMaterial = this.scene.children.filter(\r\n      (item) => item.type === 'Mesh'\r\n    );\r\n    if (meshMaterial.length === sliders.length) {\r\n      sliders.map((item, index) => {\r\n        meshMaterial[index].material.opacity = item.value;\r\n        // meshMaterial[index].material.visible = visibleSliders[index].value;\r\n        meshMaterial[index].updateMatrix();\r\n        this.render();\r\n      });\r\n    }\r\n    this.loaded = true;\r\n  }\r\n\r\n  addLight(lights, index = 0) {\r\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);\r\n    directionalLight.name = DIRECTIONAL_LIGHT + index;\r\n    directionalLight.position.normalize();\r\n    this.light = directionalLight;\r\n    this.scene.add(directionalLight);\r\n  }\r\n\r\n  loadSTLFromUrl(url, reqId) {\r\n    return new Promise((resolve) => {\r\n      this.loader.crossOrigin = '';\r\n      this.loader.loadFromUrl(url, (geometry) => {\r\n        // if (this.reqNumber !== reqId) {\r\n        //   return;\r\n        // }\r\n        resolve(geometry);\r\n      });\r\n    });\r\n  }\r\n\r\n  loadFromFile(file) {\r\n    return new Promise((resolve) => {\r\n      this.loader.loadFromFile(file, (geometry) => {\r\n        resolve(geometry);\r\n      });\r\n    });\r\n  }\r\n\r\n  addSTLToScene(reqId) {\r\n    this.models.map((item, index) => {\r\n      if (index === 0) {\r\n        // while (this.scene.children.length > 0) {\r\n        //   this.scene.remove(this.scene.children[0]);\r\n        // }\r\n\r\n        // lights processing\r\n        const hasMultipleLights = this.lights.reduce(\r\n          (acc, item) => acc && Array.isArray(item),\r\n          true\r\n        );\r\n        if (hasMultipleLights) {\r\n          this.lights.forEach(this.addLight.bind(this));\r\n        } else {\r\n          this.addLight(this.lights);\r\n        }\r\n      }\r\n\r\n      this.loadSTLFromUrl(item, reqId).then((geometry) => {\r\n        // Calculate mesh noramls for MeshLambertMaterial.\r\n        geometry.computeFaceNormals();\r\n        geometry.computeVertexNormals();\r\n        // Center the object\r\n        // geometry.center();\r\n        let material = new THREE.MeshLambertMaterial({\r\n          color: this.modelColor,\r\n          transparent: true,\r\n          opacity: 1,\r\n          side: THREE.DoubleSide,\r\n          visible: true,\r\n        });\r\n\r\n        if (geometry.hasColors) {\r\n          material = new THREE.MeshPhongMaterial({\r\n            opacity: geometry.alpha,\r\n            vertexColors: THREE.VertexColors,\r\n          });\r\n        }\r\n\r\n        this.mesh = new THREE.Mesh(geometry, material);\r\n        // Set the object's dimensions\r\n        geometry.computeBoundingBox();\r\n        geometry.computeBoundingSphere();\r\n\r\n        if (this.xDims === undefined) {\r\n          this.xDims = geometry.boundingBox.max.x;\r\n          this.yDims = geometry.boundingBox.max.y;\r\n          this.zDims = geometry.boundingBox.max.z;\r\n          // this.xDims = geometry.boundingSphere.center.x;\r\n          // this.yDims = geometry.boundingSphere.center.y;\r\n          // this.zDims = geometry.boundingSphere.center.z;\r\n        }\r\n\r\n        if (this.rotate) {\r\n          this.mesh.rotation.x = this.rotationSpeeds[0];\r\n          this.mesh.rotation.y = this.rotationSpeeds[1];\r\n          this.mesh.rotation.z = this.rotationSpeeds[2];\r\n        }\r\n\r\n        this.mesh.updateMatrix();\r\n\r\n        this.scene.add(this.mesh);\r\n\r\n        this.addCamera();\r\n        this.light.position.copy(this.camera.position);\r\n\r\n        this.addInteractionControls();\r\n        this.addToReactComponent();\r\n\r\n        // Start the animation\r\n        this.animate();\r\n      });\r\n    });\r\n  }\r\n\r\n  addCamera() {\r\n    if (\r\n      !this.scene.children.find((item) => item.type === 'PerspectiveCamera')\r\n    ) {\r\n      // Add the camera\r\n      this.camera = new THREE.PerspectiveCamera(\r\n        30,\r\n        this.width / this.height,\r\n        1,\r\n        this.distance\r\n      );\r\n\r\n      if (this.cameraZ === null) {\r\n        this.cameraZ = Math.max(this.xDims * 3, this.yDims * 3, this.zDims * 3);\r\n      }\r\n\r\n      this.camera.position.set(this.cameraX, this.cameraY, this.cameraZ);\r\n      const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);\r\n      this.camera.add(directionalLight);\r\n      this.camera.lookAt(this.mesh);\r\n      this.scene.add(this.camera);\r\n\r\n      this.renderer.physicallyCorrectLights = true;\r\n      this.renderer.setSize(this.width, this.height);\r\n      this.renderer.setClearColor(this.backgroundColor, 1);\r\n    }\r\n  }\r\n\r\n  addInteractionControls() {\r\n    // Add controls for mouse interaction\r\n    if (this.orbitControls) {\r\n      if (this.controls) {\r\n        this.controls.dispose();\r\n      }\r\n      this.controls = new OrbitControls(\r\n        this.camera,\r\n        ReactDOM.findDOMNode(this.component)\r\n      );\r\n      this.controls.enableKeys = false;\r\n      this.controls.addEventListener('change', this.orbitRender.bind(this));\r\n    }\r\n  }\r\n\r\n  addToReactComponent() {\r\n    // Add to the React Component\r\n    // ReactDOM.render(this.component, document.getElementById('loader'));\r\n    ReactDOM.findDOMNode(this.component).replaceChild(\r\n      this.renderer.domElement,\r\n      ReactDOM.findDOMNode(this.component).firstChild\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Animate the scene\r\n   * @returns {void}\r\n   */\r\n  animate() {\r\n    // note: three.js includes requestAnimationFrame shim\r\n    if (this.rotate) {\r\n      this.animationRequestId = requestAnimationFrame(this.animate.bind(this));\r\n    }\r\n\r\n    if (this.orbitControls) {\r\n      this.controls.update();\r\n    }\r\n    this.render();\r\n  }\r\n\r\n  /**\r\n   * Render the scene after turning off the rotation\r\n   * @returns {void}\r\n   */\r\n  orbitRender() {\r\n    if (this.rotate) {\r\n      this.rotate = false;\r\n    }\r\n    const directionalLight = this.scene.getObjectByName('directionalLight0');\r\n    directionalLight.position.copy(this.camera.position);\r\n\r\n    this.render();\r\n  }\r\n\r\n  /**\r\n   * Deallocate Mesh, renderer context.\r\n   * @returns {void}\r\n   */\r\n  clean() {\r\n    if (this.mesh !== undefined) {\r\n      this.mesh.geometry.dispose();\r\n      this.mesh.material.dispose();\r\n      this.scene.remove(this.mesh);\r\n      delete this.mesh;\r\n    }\r\n    const directionalLightObj = this.scene.getObjectByName(DIRECTIONAL_LIGHT);\r\n    if (directionalLightObj) {\r\n      this.scene.remove(directionalLightObj);\r\n    }\r\n\r\n    if (this.animationRequestId) {\r\n      cancelAnimationFrame(this.animationRequestId);\r\n    }\r\n    this.renderer.dispose();\r\n    this.renderer.forceContextLoss();\r\n  }\r\n\r\n  /**\r\n   * Render the scene\r\n   * @returns {void}\r\n   */\r\n  render() {\r\n    if (this.mesh && this.rotate) {\r\n      this.mesh.rotation.x += this.rotationSpeeds[0];\r\n      this.mesh.rotation.y += this.rotationSpeeds[1];\r\n      this.mesh.rotation.z += this.rotationSpeeds[2];\r\n    }\r\n\r\n    this.renderer.render(this.scene, this.camera);\r\n  }\r\n}\r\n\r\nexport default Paint;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Paint.js","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Paint from './Paint';\r\nclass STLViewer extends Component {\r\n  static propTypes = {\r\n    className: PropTypes.string,\r\n    url: PropTypes.string,\r\n    width: PropTypes.number,\r\n    height: PropTypes.number,\r\n    backgroundColor: PropTypes.string,\r\n    modelColor: PropTypes.string,\r\n    rotate: PropTypes.bool,\r\n    orbitControls: PropTypes.bool,\r\n    cameraX: PropTypes.number,\r\n    cameraY: PropTypes.number,\r\n    cameraZ: PropTypes.number,\r\n    lights: PropTypes.array,\r\n    lightColor: PropTypes.string,\r\n    rotationSpeeds: PropTypes.arrayOf(PropTypes.number),\r\n    models: PropTypes.oneOfType([\r\n      PropTypes.array,\r\n      PropTypes.instanceOf(ArrayBuffer),\r\n    ]).isRequired,\r\n  };\r\n\r\n  static defaultProps = {\r\n    backgroundColor: '#fff',\r\n    width: 400,\r\n    height: 400,\r\n    modelColor: '#B92C2C',\r\n    rotate: true,\r\n    orbitControls: true,\r\n    cameraX: 0,\r\n    cameraY: 0,\r\n    cameraZ: null,\r\n    lights: [0, 0, 1],\r\n    lightColor: '#ffffff',\r\n    rotationSpeeds: [0, 0, 0.02],\r\n    models: undefined,\r\n  };\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.paint = new Paint();\r\n    this.paint.init(this, this.props.sliders, this.props.models);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return JSON.stringify(nextProps) !== JSON.stringify(this.props);\r\n  }\r\n\r\n  componentWillUpdate(nextProps, nextState) {\r\n    this.props = nextProps;\r\n    this.paint = new Paint();\r\n    this.paint.init(this, this.props.sliders, this.props.models);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.paint.clean();\r\n    delete this.paint;\r\n  }\r\n\r\n  render() {\r\n    const { width, height, backgroundColor } = this.props;\r\n    return (\r\n      <div\r\n        className={this.props.className}\r\n        style={{\r\n          width: width,\r\n          height: height,\r\n          overflow: 'hidden',\r\n          backgroundColor: backgroundColor,\r\n        }}\r\n      >\r\n        <div\r\n          id=\"loader\"\r\n          style={{\r\n            height: '100%',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n          }}\r\n        >\r\n          <div className=\"spinner spinner-blue\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nmodule.exports = STLViewer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/STLViewer.js","var THREE = require('three');\r\n\r\n//\r\n// STL Loader added\r\n//\r\n/**\r\n * @author aleeper / http://adamleeper.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author gero3 / https://github.com/gero3\r\n *\r\n * Description: A THREE loader for STL ASCII files, as created by Solidworks and other CAD programs.\r\n *\r\n * Supports both binary and ASCII encoded files, with automatic detection of type.\r\n *\r\n * Limitations:\r\n *  Binary decoding supports \"Magics\" color format (http://en.wikipedia.org/wiki/STL_(file_format)#Color_in_binary_STL).\r\n *  There is perhaps some question as to how valid it is to always assume little-endian-ness.\r\n *  ASCII decoding assumes file is UTF-8. Seems to work for the examples...\r\n *\r\n * Usage:\r\n *  var loader = new THREE.STLLoader();\r\n *  loader.load( './models/stl/slotted_disk.stl', function ( geometry ) {\r\n *    scene.add( new THREE.Mesh( geometry ) );\r\n *  });\r\n *\r\n * For binary STLs geometry might contain colors for vertices. To use it:\r\n *  // use the same code to load STL as above\r\n *  if (geometry.hasColors) {\r\n *    material = new THREE.MeshPhongMaterial({ opacity: geometry.alpha, vertexColors: THREE.VertexColors });\r\n *  } else { .... }\r\n *  var mesh = new THREE.Mesh( geometry, material );\r\n */\r\n\r\nTHREE.STLLoader = function (manager) {\r\n  this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\r\n};\r\n\r\nTHREE.STLLoader.prototype = {\r\n  constructor: THREE.STLLoader,\r\n\r\n  loadFromUrl: function (url, onLoad, onProgress, onError) {\r\n    var scope = this;\r\n\r\n    var loader = new THREE.XHRLoader(scope.manager);\r\n    loader.setCrossOrigin(this.crossOrigin);\r\n    loader.setResponseType('arraybuffer');\r\n    loader.load(\r\n      url,\r\n      function (text) {\r\n        onLoad(scope.parse(text));\r\n      },\r\n      onProgress,\r\n      onError\r\n    );\r\n  },\r\n\r\n  loadFromFile: function (buffer, onLoad) {\r\n    var scope = this;\r\n    onLoad(scope.parse(buffer));\r\n  },\r\n\r\n  parse: function (data) {\r\n    var isBinary = function () {\r\n      var expect, face_size, n_faces, reader;\r\n      reader = new DataView(binData);\r\n      face_size = (32 / 8) * 3 + (32 / 8) * 3 * 3 + 16 / 8;\r\n      n_faces = reader.getUint32(80, true);\r\n      expect = 80 + 32 / 8 + n_faces * face_size;\r\n\r\n      if (expect === reader.byteLength) {\r\n        return true;\r\n      }\r\n\r\n      // some binary files will have different size from expected,\r\n      // checking characters higher than ASCII to confirm is binary\r\n      var fileLength = reader.byteLength;\r\n      for (var index = 0; index < fileLength; index++) {\r\n        if (reader.getUint8(index, false) > 127) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    var binData = this.ensureBinary(data);\r\n\r\n    return isBinary()\r\n      ? this.parseBinary(binData)\r\n      : this.parseASCII(this.ensureString(data));\r\n  },\r\n\r\n  parseBinary: function (data) {\r\n    var reader = new DataView(data);\r\n    var faces = reader.getUint32(80, true);\r\n\r\n    var r,\r\n      g,\r\n      b,\r\n      hasColors = false,\r\n      colors;\r\n    var defaultR, defaultG, defaultB, alpha;\r\n\r\n    // process STL header\r\n    // check for default color in header (\"COLOR=rgba\" sequence).\r\n\r\n    for (var index = 0; index < 80 - 10; index++) {\r\n      if (\r\n        reader.getUint32(index, false) == 0x434f4c4f /*COLO*/ &&\r\n        reader.getUint8(index + 4) == 0x52 /*'R'*/ &&\r\n        reader.getUint8(index + 5) == 0x3d /*'='*/\r\n      ) {\r\n        hasColors = true;\r\n        colors = new Float32Array(faces * 3 * 3);\r\n\r\n        defaultR = reader.getUint8(index + 6) / 255;\r\n        defaultG = reader.getUint8(index + 7) / 255;\r\n        defaultB = reader.getUint8(index + 8) / 255;\r\n        alpha = reader.getUint8(index + 9) / 255;\r\n      }\r\n    }\r\n\r\n    var dataOffset = 84;\r\n    var faceLength = 12 * 4 + 2;\r\n\r\n    var offset = 0;\r\n\r\n    var geometry = new THREE.BufferGeometry();\r\n\r\n    var vertices = new Float32Array(faces * 3 * 3);\r\n    var normals = new Float32Array(faces * 3 * 3);\r\n\r\n    for (var face = 0; face < faces; face++) {\r\n      var start = dataOffset + face * faceLength;\r\n      var normalX = reader.getFloat32(start, true);\r\n      var normalY = reader.getFloat32(start + 4, true);\r\n      var normalZ = reader.getFloat32(start + 8, true);\r\n\r\n      if (hasColors) {\r\n        var packedColor = reader.getUint16(start + 48, true);\r\n\r\n        if ((packedColor & 0x8000) === 0) {\r\n          // facet has its own unique color\r\n\r\n          r = (packedColor & 0x1f) / 31;\r\n          g = ((packedColor >> 5) & 0x1f) / 31;\r\n          b = ((packedColor >> 10) & 0x1f) / 31;\r\n        } else {\r\n          r = defaultR;\r\n          g = defaultG;\r\n          b = defaultB;\r\n        }\r\n      }\r\n\r\n      for (var i = 1; i <= 3; i++) {\r\n        var vertexstart = start + i * 12;\r\n\r\n        vertices[offset] = reader.getFloat32(vertexstart, true);\r\n        vertices[offset + 1] = reader.getFloat32(vertexstart + 4, true);\r\n        vertices[offset + 2] = reader.getFloat32(vertexstart + 8, true);\r\n\r\n        normals[offset] = normalX;\r\n        normals[offset + 1] = normalY;\r\n        normals[offset + 2] = normalZ;\r\n\r\n        if (hasColors) {\r\n          colors[offset] = r;\r\n          colors[offset + 1] = g;\r\n          colors[offset + 2] = b;\r\n        }\r\n\r\n        offset += 3;\r\n      }\r\n    }\r\n\r\n    geometry.addAttribute('position', new THREE.BufferAttribute(vertices, 3));\r\n    geometry.addAttribute('normal', new THREE.BufferAttribute(normals, 3));\r\n\r\n    if (hasColors) {\r\n      geometry.addAttribute('color', new THREE.BufferAttribute(colors, 3));\r\n      geometry.hasColors = true;\r\n      geometry.alpha = alpha;\r\n    }\r\n\r\n    return geometry;\r\n  },\r\n\r\n  parseASCII: function (data) {\r\n    var geometry,\r\n      length,\r\n      normal,\r\n      patternFace,\r\n      patternNormal,\r\n      patternVertex,\r\n      result,\r\n      text;\r\n    geometry = new THREE.Geometry();\r\n    patternFace = /facet([\\s\\S]*?)endfacet/g;\r\n\r\n    while ((result = patternFace.exec(data)) !== null) {\r\n      text = result[0];\r\n      patternNormal =\r\n        /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\r\n\r\n      while ((result = patternNormal.exec(text)) !== null) {\r\n        normal = new THREE.Vector3(\r\n          parseFloat(result[1]),\r\n          parseFloat(result[3]),\r\n          parseFloat(result[5])\r\n        );\r\n      }\r\n\r\n      patternVertex =\r\n        /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\r\n\r\n      while ((result = patternVertex.exec(text)) !== null) {\r\n        geometry.vertices.push(\r\n          new THREE.Vector3(\r\n            parseFloat(result[1]),\r\n            parseFloat(result[3]),\r\n            parseFloat(result[5])\r\n          )\r\n        );\r\n      }\r\n\r\n      length = geometry.vertices.length;\r\n\r\n      geometry.faces.push(\r\n        new THREE.Face3(length - 3, length - 2, length - 1, normal)\r\n      );\r\n    }\r\n\r\n    geometry.computeBoundingBox();\r\n    geometry.computeBoundingSphere();\r\n\r\n    return geometry;\r\n  },\r\n\r\n  ensureString: function (buf) {\r\n    if (typeof buf !== 'string') {\r\n      var array_buffer = new Uint8Array(buf);\r\n      var str = '';\r\n      for (var i = 0; i < buf.byteLength; i++) {\r\n        str += String.fromCharCode(array_buffer[i]); // implicitly assumes little-endian\r\n      }\r\n      return str;\r\n    } else {\r\n      return buf;\r\n    }\r\n  },\r\n\r\n  ensureBinary: function (buf) {\r\n    if (typeof buf === 'string') {\r\n      var array_buffer = new Uint8Array(buf.length);\r\n      for (var i = 0; i < buf.length; i++) {\r\n        array_buffer[i] = buf.charCodeAt(i) & 0xff; // implicitly assumes little-endian\r\n      }\r\n      return array_buffer.buffer || array_buffer;\r\n    } else {\r\n      return buf;\r\n    }\r\n  },\r\n};\r\n\r\nif (typeof DataView === 'undefined') {\r\n  DataView = function (buffer, byteOffset, byteLength) {\r\n    this.buffer = buffer;\r\n    this.byteOffset = byteOffset || 0;\r\n    this.byteLength = byteLength || buffer.byteLength || buffer.length;\r\n    this._isString = typeof buffer === 'string';\r\n  };\r\n\r\n  DataView.prototype = {\r\n    _getCharCodes: function (buffer, start, length) {\r\n      start = start || 0;\r\n      length = length || buffer.length;\r\n      var end = start + length;\r\n      var codes = [];\r\n      for (var i = start; i < end; i++) {\r\n        codes.push(buffer.charCodeAt(i) & 0xff);\r\n      }\r\n      return codes;\r\n    },\r\n\r\n    _getBytes: function (length, byteOffset, littleEndian) {\r\n      var result;\r\n\r\n      // Handle the lack of endianness\r\n      if (littleEndian === undefined) {\r\n        littleEndian = this._littleEndian;\r\n      }\r\n\r\n      // Handle the lack of byteOffset\r\n      if (byteOffset === undefined) {\r\n        byteOffset = this.byteOffset;\r\n      } else {\r\n        byteOffset = this.byteOffset + byteOffset;\r\n      }\r\n\r\n      if (length === undefined) {\r\n        length = this.byteLength - byteOffset;\r\n      }\r\n\r\n      // Error Checking\r\n      if (typeof byteOffset !== 'number') {\r\n        throw new TypeError('DataView byteOffset is not a number');\r\n      }\r\n\r\n      if (length < 0 || byteOffset + length > this.byteLength) {\r\n        throw new Error(\r\n          'DataView length or (byteOffset+length) value is out of bounds'\r\n        );\r\n      }\r\n\r\n      if (this.isString) {\r\n        result = this._getCharCodes(\r\n          this.buffer,\r\n          byteOffset,\r\n          byteOffset + length\r\n        );\r\n      } else {\r\n        result = this.buffer.slice(byteOffset, byteOffset + length);\r\n      }\r\n\r\n      if (!littleEndian && length > 1) {\r\n        if (!(result instanceof Array)) {\r\n          result = Array.prototype.slice.call(result);\r\n        }\r\n\r\n        result.reverse();\r\n      }\r\n\r\n      return result;\r\n    },\r\n\r\n    // Compatibility functions on a String Buffer\r\n\r\n    getFloat64: function (byteOffset, littleEndian) {\r\n      var b = this._getBytes(8, byteOffset, littleEndian),\r\n        sign = 1 - 2 * (b[7] >> 7),\r\n        exponent =\r\n          ((((b[7] << 1) & 0xff) << 3) | (b[6] >> 4)) - ((1 << 10) - 1),\r\n        // Binary operators such as | and << operate on 32 bit values, using + and Math.pow(2) instead\r\n        mantissa =\r\n          (b[6] & 0x0f) * Math.pow(2, 48) +\r\n          b[5] * Math.pow(2, 40) +\r\n          b[4] * Math.pow(2, 32) +\r\n          b[3] * Math.pow(2, 24) +\r\n          b[2] * Math.pow(2, 16) +\r\n          b[1] * Math.pow(2, 8) +\r\n          b[0];\r\n\r\n      if (exponent === 1024) {\r\n        if (mantissa !== 0) {\r\n          return NaN;\r\n        } else {\r\n          return sign * Infinity;\r\n        }\r\n      }\r\n\r\n      if (exponent === -1023) {\r\n        // Denormalized\r\n        return sign * mantissa * Math.pow(2, -1022 - 52);\r\n      }\r\n\r\n      return sign * (1 + mantissa * Math.pow(2, -52)) * Math.pow(2, exponent);\r\n    },\r\n\r\n    getFloat32: function (byteOffset, littleEndian) {\r\n      var b = this._getBytes(4, byteOffset, littleEndian),\r\n        sign = 1 - 2 * (b[3] >> 7),\r\n        exponent = (((b[3] << 1) & 0xff) | (b[2] >> 7)) - 127,\r\n        mantissa = ((b[2] & 0x7f) << 16) | (b[1] << 8) | b[0];\r\n\r\n      if (exponent === 128) {\r\n        if (mantissa !== 0) {\r\n          return NaN;\r\n        } else {\r\n          return sign * Infinity;\r\n        }\r\n      }\r\n\r\n      if (exponent === -127) {\r\n        // Denormalized\r\n        return sign * mantissa * Math.pow(2, -126 - 23);\r\n      }\r\n\r\n      return sign * (1 + mantissa * Math.pow(2, -23)) * Math.pow(2, exponent);\r\n    },\r\n\r\n    getInt32: function (byteOffset, littleEndian) {\r\n      var b = this._getBytes(4, byteOffset, littleEndian);\r\n      return (b[3] << 24) | (b[2] << 16) | (b[1] << 8) | b[0];\r\n    },\r\n\r\n    getUint32: function (byteOffset, littleEndian) {\r\n      return this.getInt32(byteOffset, littleEndian) >>> 0;\r\n    },\r\n\r\n    getInt16: function (byteOffset, littleEndian) {\r\n      return (this.getUint16(byteOffset, littleEndian) << 16) >> 16;\r\n    },\r\n\r\n    getUint16: function (byteOffset, littleEndian) {\r\n      var b = this._getBytes(2, byteOffset, littleEndian);\r\n      return (b[1] << 8) | b[0];\r\n    },\r\n\r\n    getInt8: function (byteOffset) {\r\n      return (this.getUint8(byteOffset) << 24) >> 24;\r\n    },\r\n\r\n    getUint8: function (byteOffset) {\r\n      return this._getBytes(1, byteOffset)[0];\r\n    },\r\n  };\r\n}\r\n\r\nmodule.exports = THREE;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Three.js","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/prop-types/factoryWithThrowingShims.js\n// module id = 25\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/prop-types/index.js\n// module id = 26\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/prop-types/lib/ReactPropTypesSecret.js\n// module id = 27\n// module chunks = 0","/** @license React v17.0.2\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),m=require(\"object-assign\"),r=require(\"scheduler\");function y(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,b){ea(a,b);ea(a+\"Capture\",b)}\nfunction ea(a,b){ca[a]=b;for(a=0;a<b.length;a++)ba.add(b[a])}\nvar fa=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ha=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,ia=Object.prototype.hasOwnProperty,\nja={},ka={};function la(a){if(ia.call(ka,a))return!0;if(ia.call(ja,a))return!1;if(ha.test(a))return ka[a]=!0;ja[a]=!0;return!1}function ma(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction na(a,b,c,d){if(null===b||\"undefined\"===typeof b||ma(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function B(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var D={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];D[b]=new B(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(oa,\npa);D[b]=new B(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(oa,pa);D[b]=new B(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});\nD.xlinkHref=new B(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction qa(a,b,c,d){var e=D.hasOwnProperty(b)?D[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1]?!1:!0;f||(na(b,c,e,d)&&(c=null),d||null===e?la(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}\nvar ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;\nif(\"function\"===typeof Symbol&&Symbol.for){var E=Symbol.for;sa=E(\"react.element\");ta=E(\"react.portal\");ua=E(\"react.fragment\");wa=E(\"react.strict_mode\");xa=E(\"react.profiler\");ya=E(\"react.provider\");za=E(\"react.context\");Aa=E(\"react.forward_ref\");Ba=E(\"react.suspense\");Ca=E(\"react.suspense_list\");Da=E(\"react.memo\");Ea=E(\"react.lazy\");Fa=E(\"react.block\");E(\"react.scope\");Ga=E(\"react.opaque.id\");Ha=E(\"react.debug_trace_mode\");Ia=E(\"react.offscreen\");Ja=E(\"react.legacy_hidden\")}\nvar Ka=\"function\"===typeof Symbol&&Symbol.iterator;function La(a){if(null===a||\"object\"!==typeof a)return null;a=Ka&&a[Ka]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var Ma;function Na(a){if(void 0===Ma)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);Ma=b&&b[1]||\"\"}return\"\\n\"+Ma+a}var Oa=!1;\nfunction Pa(a,b){if(!a||Oa)return\"\";Oa=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(k){var d=k}Reflect.construct(a,[],b)}else{try{b.call()}catch(k){d=k}a.call(b.prototype)}else{try{throw Error();}catch(k){d=k}a()}}catch(k){if(k&&d&&\"string\"===typeof k.stack){for(var e=k.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h])return\"\\n\"+e[g].replace(\" at new \",\" at \");while(1<=g&&0<=h)}break}}}finally{Oa=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Na(a):\"\"}\nfunction Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na(\"Lazy\");case 13:return Na(\"Suspense\");case 19:return Na(\"SuspenseList\");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return\"\"}}\nfunction Ra(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ua:return\"Fragment\";case ta:return\"Portal\";case xa:return\"Profiler\";case wa:return\"StrictMode\";case Ba:return\"Suspense\";case Ca:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case za:return(a.displayName||\"Context\")+\".Consumer\";case ya:return(a._context.displayName||\"Context\")+\".Provider\";case Aa:var b=a.render;b=b.displayName||b.name||\"\";\nreturn a.displayName||(\"\"!==b?\"ForwardRef(\"+b+\")\":\"ForwardRef\");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:b=a._payload;a=a._init;try{return Ra(a(b))}catch(c){}}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"object\":case \"string\":case \"undefined\":return a;default:return\"\"}}function Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return m({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function $a(a,b){b=b.checked;null!=b&&qa(a,\"checked\",b,!1)}\nfunction ab(a,b){$a(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?bb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&bb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction cb(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction bb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}function db(a){var b=\"\";aa.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function eb(a,b){a=m({children:void 0},b);if(b=db(b.children))a.children=b;return a}\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(y(91));return m({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(y(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(y(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}var kb={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction lb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function mb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?lb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar nb,ob=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==kb.svg||\"innerHTML\"in a)a.innerHTML=b;else{nb=nb||document.createElement(\"div\");nb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction pb(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,\nfloodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(qb).forEach(function(a){rb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);qb[b]=qb[a]})});function sb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||qb.hasOwnProperty(a)&&qb[a]?(\"\"+b).trim():b+\"px\"}\nfunction tb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=sb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction vb(a,b){if(b){if(ub[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(y(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(y(60));if(!(\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML))throw Error(y(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(y(62));}}\nfunction wb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(y(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(a,b,c,d,e){return a(b,c,d,e)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){if(null!==zb||null!==Ab)Ib(),Fb()}\nfunction Nb(a,b,c){if(Lb)return a(b,c);Lb=!0;try{return Jb(a,b,c)}finally{Lb=!1,Mb()}}\nfunction Ob(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(y(231,b,typeof c));return c}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,\"passive\",{get:function(){Pb=!0}});window.addEventListener(\"test\",Qb,Qb);window.removeEventListener(\"test\",Qb,Qb)}catch(a){Pb=!1}function Rb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(n){this.onError(n)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0;Tb=a}};function Xb(a,b,c,d,e,f,g,h,k){Sb=!1;Tb=null;Rb.apply(Wb,arguments)}\nfunction Yb(a,b,c,d,e,f,g,h,k){Xb.apply(this,arguments);if(Sb){if(Sb){var l=Tb;Sb=!1;Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=l)}}function Zb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function $b(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188));}\nfunction bc(a){var b=a.alternate;if(!b){b=Zb(a);if(null===b)throw Error(y(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return ac(e),a;if(f===d)return ac(e),b;f=f.sibling}throw Error(y(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(y(189));}}if(c.alternate!==d)throw Error(y(190));}if(3!==c.tag)throw Error(y(188));return c.stateNode.current===c?a:b}function cc(a){a=bc(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}\nfunction dc(a,b){for(var c=a.alternate;null!==b;){if(b===a||b===c)return!0;b=b.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction rc(a,b,c,d,e){return{blockedOn:a,domEventName:b,eventSystemFlags:c|16,nativeEvent:e,targetContainers:[d]}}function sc(a,b){switch(a){case \"focusin\":case \"focusout\":kc=null;break;case \"dragenter\":case \"dragleave\":lc=null;break;case \"mouseover\":case \"mouseout\":mc=null;break;case \"pointerover\":case \"pointerout\":nc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":oc.delete(b.pointerId)}}\nfunction tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=rc(b,c,d,e,f),null!==b&&(b=Cb(b),null!==b&&fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction uc(a,b,c,d,e){switch(b){case \"focusin\":return kc=tc(kc,a,b,c,d,e),!0;case \"dragenter\":return lc=tc(lc,a,b,c,d,e),!0;case \"mouseover\":return mc=tc(mc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;nc.set(f,tc(nc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,oc.set(f,tc(oc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction vc(a){var b=wc(a.target);if(null!==b){var c=Zb(b);if(null!==c)if(b=c.tag,13===b){if(b=$b(c),null!==b){a.blockedOn=b;hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(c)})});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c)return b=Cb(c),null!==b&&fc(b),a.blockedOn=c,!1;b.shift()}return!0}function zc(a,b,c){xc(a)&&c.delete(b)}\nfunction Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(null!==a.blockedOn){a=Cb(a.blockedOn);null!==a&&ec(a);break}for(var b=a.targetContainers;0<b.length;){var c=yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null!==c){a.blockedOn=c;break}b.shift()}null===a.blockedOn&&jc.shift()}null!==kc&&xc(kc)&&(kc=null);null!==lc&&xc(lc)&&(lc=null);null!==mc&&xc(mc)&&(mc=null);nc.forEach(zc);oc.forEach(zc)}\nfunction Bc(a,b){a.blockedOn===b&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}\nfunction Cc(a){function b(b){return Bc(b,a)}if(0<jc.length){Bc(jc[0],a);for(var c=1;c<jc.length;c++){var d=jc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==kc&&Bc(kc,a);null!==lc&&Bc(lc,a);null!==mc&&Bc(mc,a);nc.forEach(b);oc.forEach(b);for(c=0;c<pc.length;c++)d=pc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<pc.length&&(c=pc[0],null===c.blockedOn);)vc(c),null===c.blockedOn&&pc.shift()}\nfunction Dc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var Ec={animationend:Dc(\"Animation\",\"AnimationEnd\"),animationiteration:Dc(\"Animation\",\"AnimationIteration\"),animationstart:Dc(\"Animation\",\"AnimationStart\"),transitionend:Dc(\"Transition\",\"TransitionEnd\")},Fc={},Gc={};\nfa&&(Gc=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),\"TransitionEvent\"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var b=Ec[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Gc)return Fc[a]=b[c];return a}\nvar Ic=Hc(\"animationend\"),Jc=Hc(\"animationiteration\"),Kc=Hc(\"animationstart\"),Lc=Hc(\"transitionend\"),Mc=new Map,Nc=new Map,Oc=[\"abort\",\"abort\",Ic,\"animationEnd\",Jc,\"animationIteration\",Kc,\"animationStart\",\"canplay\",\"canPlay\",\"canplaythrough\",\"canPlayThrough\",\"durationchange\",\"durationChange\",\"emptied\",\"emptied\",\"encrypted\",\"encrypted\",\"ended\",\"ended\",\"error\",\"error\",\"gotpointercapture\",\"gotPointerCapture\",\"load\",\"load\",\"loadeddata\",\"loadedData\",\"loadedmetadata\",\"loadedMetadata\",\"loadstart\",\"loadStart\",\n\"lostpointercapture\",\"lostPointerCapture\",\"playing\",\"playing\",\"progress\",\"progress\",\"seeking\",\"seeking\",\"stalled\",\"stalled\",\"suspend\",\"suspend\",\"timeupdate\",\"timeUpdate\",Lc,\"transitionEnd\",\"waiting\",\"waiting\"];function Pc(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1];e=\"on\"+(e[0].toUpperCase()+e.slice(1));Nc.set(d,b);Mc.set(d,e);da(e,[d])}}var Qc=r.unstable_now;Qc();var F=8;\nfunction Rc(a){if(0!==(1&a))return F=15,1;if(0!==(2&a))return F=14,2;if(0!==(4&a))return F=13,4;var b=24&a;if(0!==b)return F=12,b;if(0!==(a&32))return F=11,32;b=192&a;if(0!==b)return F=10,b;if(0!==(a&256))return F=9,256;b=3584&a;if(0!==b)return F=8,b;if(0!==(a&4096))return F=7,4096;b=4186112&a;if(0!==b)return F=6,b;b=62914560&a;if(0!==b)return F=5,b;if(a&67108864)return F=4,67108864;if(0!==(a&134217728))return F=3,134217728;b=805306368&a;if(0!==b)return F=2,b;if(0!==(1073741824&a))return F=1,1073741824;\nF=8;return a}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a));}}\nfunction Uc(a,b){var c=a.pendingLanes;if(0===c)return F=0;var d=0,e=0,f=a.expiredLanes,g=a.suspendedLanes,h=a.pingedLanes;if(0!==f)d=f,e=F=15;else if(f=c&134217727,0!==f){var k=f&~g;0!==k?(d=Rc(k),e=F):(h&=f,0!==h&&(d=Rc(h),e=F))}else f=c&~g,0!==f?(d=Rc(f),e=F):0!==h&&(d=Rc(h),e=F);if(0===d)return 0;d=31-Vc(d);d=c&((0>d?0:1<<d)<<1)-1;if(0!==b&&b!==d&&0===(b&g)){Rc(b);if(e<=F)return b;F=e}b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-Vc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction Wc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function Xc(a,b){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~b),0===a?Xc(10,b):a;case 10:return a=Yc(192&~b),0===a?Xc(8,b):a;case 8:return a=Yc(3584&~b),0===a&&(a=Yc(4186112&~b),0===a&&(a=512)),a;case 2:return b=Yc(805306368&~b),0===b&&(b=268435456),b}throw Error(y(358,a));}function Yc(a){return a&-a}function Zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction $c(a,b,c){a.pendingLanes|=b;var d=b-1;a.suspendedLanes&=d;a.pingedLanes&=d;a=a.eventTimes;b=31-Vc(b);a[b]=c}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return 0===a?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,b,c,d){Kb||Ib();var e=hd,f=Kb;Kb=!0;try{Hb(e,a,b,c,d)}finally{(Kb=f)||Mb()}}function id(a,b,c,d){ed(dd,hd.bind(null,a,b,c,d))}\nfunction hd(a,b,c,d){if(fd){var e;if((e=0===(b&4))&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,b,c,d),jc.push(a);else{var f=yc(a,b,c,d);if(null===f)e&&sc(a,d);else{if(e){if(-1<qc.indexOf(a)){a=rc(f,a,b,c,d);jc.push(a);return}if(uc(f,a,b,c,d))return;sc(a,d)}jd(a,b,d,null,c)}}}}\nfunction yc(a,b,c,d){var e=xb(d);e=wc(e);if(null!==e){var f=Zb(e);if(null===f)e=null;else{var g=f.tag;if(13===g){e=$b(f);if(null!==e)return e;e=null}else if(3===g){if(f.stateNode.hydrate)return 3===f.tag?f.stateNode.containerInfo:null;e=null}else f!==e&&(e=null)}}jd(a,b,d,e,c);return null}var kd=null,ld=null,md=null;\nfunction nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}function od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}m(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=m({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&\"CompositionEvent\"in window,be=null;fa&&\"documentMode\"in document&&(be=document.documentMode);var ce=fa&&\"TextEvent\"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(fa){var xe;if(fa){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));a=re;if(Kb)a(b);else{Kb=!0;try{Gb(a,b)}finally{Kb=!1,Mb()}}}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;\nfunction Je(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!Ie.call(b,c[d])||!He(a[c[d]],b[c[d]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Le(a,b){var c=Ke(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Ke(c)}}function Me(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Me(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Ne(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Oe(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar Pe=fa&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Oe(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Je(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nPc(\"cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange\".split(\" \"),\n0);Pc(\"drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel\".split(\" \"),1);Pc(Oc,2);for(var Ve=\"change selectionchange textInput compositionstart compositionend compositionupdate\".split(\" \"),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);\nea(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ea(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);ea(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);da(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));da(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));da(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);da(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));\nda(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));da(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var Xe=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),Ye=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(Xe));\nfunction Ze(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Yb(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;Ze(e,h,l);f=k}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a;}\nfunction G(a,b){var c=$e(b),d=a+\"__bubble\";c.has(d)||(af(b,a,2,!1),c.add(d))}var bf=\"_reactListening\"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(b){Ye.has(b)||df(b,!1,a,null);df(b,!0,a,null)}))}\nfunction df(a,b,c,d){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,f=c;\"selectionchange\"===a&&9!==c.nodeType&&(f=c.ownerDocument);if(null!==d&&!b&&Ye.has(a)){if(\"scroll\"!==a)return;e|=2;f=d}var g=$e(f),h=a+\"__\"+(b?\"capture\":\"bubble\");g.has(h)||(b&&(e|=4),af(f,a,e,b),g.add(h))}\nfunction af(a,b,c,d){var e=Nc.get(b);switch(void 0===e?2:e){case 0:e=gd;break;case 1:e=id;break;default:e=hd}c=e.bind(null,b,c,a);e=void 0;!Pb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction jd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Nb(function(){var d=f,e=xb(c),g=[];\na:{var h=Mc.get(a);if(void 0!==h){var k=td,x=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":x=\"focus\";k=Fd;break;case \"focusout\":x=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case Ic:case Jc:case Kc:k=Hd;break;case Lc:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var w=0!==(b&4),z=!w&&\"scroll\"===a,u=w?null!==h?h+\"Capture\":null:h;w=[];for(var t=d,q;null!==\nt;){q=t;var v=q.stateNode;5===q.tag&&null!==v&&(q=v,null!==u&&(v=Ob(t,u),null!=v&&w.push(ef(t,v,q))));if(z)break;t=t.return}0<w.length&&(h=new k(h,x,null,c,e),g.push({event:h,listeners:w}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&0===(b&16)&&(x=c.relatedTarget||c.fromElement)&&(wc(x)||x[ff]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(x=c.relatedTarget||c.toElement,k=d,x=x?wc(x):null,null!==\nx&&(z=Zb(x),x!==z||5!==x.tag&&6!==x.tag))x=null}else k=null,x=d;if(k!==x){w=Bd;v=\"onMouseLeave\";u=\"onMouseEnter\";t=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)w=Td,v=\"onPointerLeave\",u=\"onPointerEnter\",t=\"pointer\";z=null==k?h:ue(k);q=null==x?h:ue(x);h=new w(v,t+\"leave\",k,c,e);h.target=z;h.relatedTarget=q;v=null;wc(e)===d&&(w=new w(u,t+\"enter\",x,c,e),w.target=q,w.relatedTarget=z,v=w);z=v;if(k&&x)b:{w=k;u=x;t=0;for(q=w;q;q=gf(q))t++;q=0;for(v=u;v;v=gf(v))q++;for(;0<t-q;)w=gf(w),t--;for(;0<q-t;)u=\ngf(u),q--;for(;t--;){if(w===u||null!==u&&w===u.alternate)break b;w=gf(w);u=gf(u)}w=null}else w=null;null!==k&&hf(g,h,k,w,!1);null!==x&&null!==z&&hf(g,z,x,w,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var J=ve;else if(me(h))if(we)J=Fe;else{J=De;var K=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(J=Ee);if(J&&(J=J(a,d))){ne(g,J,c,e);break a}K&&K(a,h,d);\"focusout\"===a&&(K=h._wrapperState)&&\nK.controlled&&\"number\"===h.type&&bb(h,\"number\",h.value)}K=d?ue(d):window;switch(a){case \"focusin\":if(me(K)||\"true\"===K.contentEditable)Qe=K,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var Q;if(ae)b:{switch(a){case \"compositionstart\":var L=\"onCompositionStart\";break b;case \"compositionend\":L=\"onCompositionEnd\";break b;\ncase \"compositionupdate\":L=\"onCompositionUpdate\";break b}L=void 0}else ie?ge(a,c)&&(L=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(L=\"onCompositionStart\");L&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==L?\"onCompositionEnd\"===L&&ie&&(Q=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),K=oe(d,L),0<K.length&&(L=new Ld(L,a,null,c,e),g.push({event:L,listeners:K}),Q?L.data=Q:(Q=he(c),null!==Q&&(L.data=Q))));if(Q=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),0<d.length&&(e=new Ld(\"onBeforeInput\",\n\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=Q)}se(g,b)})}function ef(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Ob(a,c),null!=f&&d.unshift(ef(a,f,e)),f=Ob(a,b),null!=f&&d.push(ef(a,f,e)));a=a.return}return d}function gf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction hf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Ob(c,f),null!=k&&g.unshift(ef(c,k,h))):e||(k=Ob(c,f),null!=k&&g.push(ef(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}function jf(){}var kf=null,lf=null;function mf(a,b){switch(a){case \"button\":case \"input\":case \"select\":case \"textarea\":return!!b.autoFocus}return!1}\nfunction nf(a,b){return\"textarea\"===a||\"option\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}var of=\"function\"===typeof setTimeout?setTimeout:void 0,pf=\"function\"===typeof clearTimeout?clearTimeout:void 0;function qf(a){1===a.nodeType?a.textContent=\"\":9===a.nodeType&&(a=a.body,null!=a&&(a.textContent=\"\"))}\nfunction rf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function sf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf=\"__reactFiber$\"+vf,xf=\"__reactProps$\"+vf,ff=\"__reactContainer$\"+vf,yf=\"__reactEvents$\"+vf;\nfunction wc(a){var b=a[wf];if(b)return b;for(var c=a.parentNode;c;){if(b=c[ff]||c[wf]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=sf(a);null!==a;){if(c=a[wf])return c;a=sf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[wf]||a[ff];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(y(33));}function Db(a){return a[xf]||null}\nfunction $e(a){var b=a[yf];void 0===b&&(b=a[yf]=new Set);return b}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,b){Af++;zf[Af]=a.current;a.current=b}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;\nfunction Ef(a,b){var c=a.type.contextTypes;if(!c)return Cf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function Ff(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Gf(){H(N);H(M)}function Hf(a,b,c){if(M.current!==Cf)throw Error(y(168));I(M,b);I(N,c)}\nfunction If(a,b,c){var d=a.stateNode;a=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(y(108,Ra(b)||\"Unknown\",e));return m({},c,d)}function Jf(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf;Df=M.current;I(M,a);I(N,N.current);return!0}function Kf(a,b,c){var d=a.stateNode;if(!d)throw Error(y(169));c?(a=If(a,b,Df),d.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N);I(N,c)}\nvar Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=void 0!==Rf?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1E4>dg?Sf:function(){return Sf()-dg};\nfunction eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332));}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332));}}function gg(a,b){a=fg(a);return Nf(a,b)}function hg(a,b,c){a=fg(a);return Of(a,b,c)}function ig(){if(null!==bg){var a=bg;bg=null;Pf(a)}jg()}\nfunction jg(){if(!cg&&null!==ag){cg=!0;var a=0;try{var b=ag;gg(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});ag=null}catch(c){throw null!==ag&&(ag=ag.slice(a+1)),Of(Uf,ig),c;}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,b){if(a&&a.defaultProps){b=m({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}\nfunction rg(a){var b=mg.current;H(mg);a.type._context._currentValue=b}function sg(a,b){for(;null!==a;){var c=a.alternate;if((a.childLanes&b)===b)if(null===c||(c.childLanes&b)===b)break;else c.childLanes|=b;else a.childLanes|=b,null!==c&&(c.childLanes|=b);a=a.return}}function tg(a,b){ng=a;pg=og=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(ug=!0),a.firstContext=null)}\nfunction vg(a,b){if(pg!==a&&!1!==b&&0!==b){if(\"number\"!==typeof b||1073741823===b)pg=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===og){if(null===ng)throw Error(y(308));og=b;ng.dependencies={lanes:0,firstContext:b,responders:null}}else og=og.next=b}return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}\nfunction yg(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}function Ag(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}\nfunction Bg(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction Cg(a,b,c,d){var e=a.updateQueue;wg=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var n=a.alternate;if(null!==n){n=n.updateQueue;var A=n.lastBaseUpdate;A!==g&&(null===A?n.firstBaseUpdate=l:A.next=l,n.lastBaseUpdate=k)}}if(null!==f){A=e.baseState;g=0;n=l=k=null;do{h=f.lane;var p=f.eventTime;if((d&h)===h){null!==n&&(n=n.next={eventTime:p,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,\nnext:null});a:{var C=a,x=f;h=b;p=c;switch(x.tag){case 1:C=x.payload;if(\"function\"===typeof C){A=C.call(p,A,h);break a}A=C;break a;case 3:C.flags=C.flags&-4097|64;case 0:C=x.payload;h=\"function\"===typeof C?C.call(p,A,h):C;if(null===h||void 0===h)break a;A=m({},A,h);break a;case 2:wg=!0}}null!==f.callback&&(a.flags|=32,h=e.effects,null===h?e.effects=[f]:h.push(f))}else p={eventTime:p,lane:h,tag:f.tag,payload:f.payload,callback:f.callback,next:null},null===n?(l=n=p,k=A):n=n.next=p,g|=h;f=f.next;if(null===\nf)if(h=e.shared.pending,null===h)break;else f=h.next,h.next=null,e.lastBaseUpdate=h,e.shared.pending=null}while(1);null===n&&(k=A);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=n;Dg|=g;a.lanes=g;a.memoizedState=A}}function Eg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(y(191,e));e.call(d)}}}var Fg=(new aa.Component).refs;\nfunction Gg(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:m({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=Hg(),e=Ig(a),f=zg(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);Ag(a,f);Jg(a,e,d)},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=Hg(),d=Ig(a),e=zg(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=\nb);Ag(a,e);Jg(a,d,c)}};function Lg(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Je(c,d)||!Je(e,f):!0}\nfunction Mg(a,b,c){var d=!1,e=Cf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=vg(f):(e=Ff(b)?Df:M.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Ef(a,e):Cf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Kg;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Ng(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Kg.enqueueReplaceState(b,b.state,null)}\nfunction Og(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=Fg;xg(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=vg(f):(f=Ff(b)?Df:M.current,e.context=Ef(a,f));Cg(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Gg(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||\n(b=e.state,\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Kg.enqueueReplaceState(e,e.state,null),Cg(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4)}var Pg=Array.isArray;\nfunction Qg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(y(309));var d=c.stateNode}if(!d)throw Error(y(147,a));var e=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===Fg&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if(\"string\"!==typeof a)throw Error(y(284));if(!c._owner)throw Error(y(290,a));}return a}\nfunction Rg(a,b){if(\"textarea\"!==a.type)throw Error(y(31,\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b));}\nfunction Sg(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.flags=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Tg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags=2,\nc):d;b.flags=2;return c}function g(b){a&&null===b.alternate&&(b.flags=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Ug(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Qg(a,b,c),d.return=a,d;d=Vg(c.type,c.key,c.props,null,a.mode,d);d.ref=Qg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=\nWg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function n(a,b,c,d,f){if(null===b||7!==b.tag)return b=Xg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function A(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=Ug(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case sa:return c=Vg(b.type,b.key,b.props,null,a.mode,c),c.ref=Qg(a,null,b),c.return=a,c;case ta:return b=Wg(b,a.mode,c),b.return=a,b}if(Pg(b)||La(b))return b=Xg(b,\na.mode,c,null),b.return=a,b;Rg(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case sa:return c.key===e?c.type===ua?n(a,b,c.props.children,d,e):k(a,b,c,d):null;case ta:return c.key===e?l(a,b,c,d):null}if(Pg(c)||La(c))return null!==e?null:n(a,b,c,d,null);Rg(a,c)}return null}function C(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||\nnull,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case sa:return a=a.get(null===d.key?c:d.key)||null,d.type===ua?n(b,a,d.props.children,e,d.key):k(b,a,d,e);case ta:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e)}if(Pg(d)||La(d))return a=a.get(c)||null,n(b,a,d,e,null);Rg(b,d)}return null}function x(e,g,h,k){for(var l=null,t=null,u=g,z=g=0,q=null;null!==u&&z<h.length;z++){u.index>z?(q=u,u=null):q=u.sibling;var n=p(e,u,h[z],k);if(null===n){null===u&&(u=q);break}a&&u&&null===\nn.alternate&&b(e,u);g=f(n,g,z);null===t?l=n:t.sibling=n;t=n;u=q}if(z===h.length)return c(e,u),l;if(null===u){for(;z<h.length;z++)u=A(e,h[z],k),null!==u&&(g=f(u,g,z),null===t?l=u:t.sibling=u,t=u);return l}for(u=d(e,u);z<h.length;z++)q=C(u,e,z,h[z],k),null!==q&&(a&&null!==q.alternate&&u.delete(null===q.key?z:q.key),g=f(q,g,z),null===t?l=q:t.sibling=q,t=q);a&&u.forEach(function(a){return b(e,a)});return l}function w(e,g,h,k){var l=La(h);if(\"function\"!==typeof l)throw Error(y(150));h=l.call(h);if(null==\nh)throw Error(y(151));for(var t=l=null,u=g,z=g=0,q=null,n=h.next();null!==u&&!n.done;z++,n=h.next()){u.index>z?(q=u,u=null):q=u.sibling;var w=p(e,u,n.value,k);if(null===w){null===u&&(u=q);break}a&&u&&null===w.alternate&&b(e,u);g=f(w,g,z);null===t?l=w:t.sibling=w;t=w;u=q}if(n.done)return c(e,u),l;if(null===u){for(;!n.done;z++,n=h.next())n=A(e,n.value,k),null!==n&&(g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);return l}for(u=d(e,u);!n.done;z++,n=h.next())n=C(u,e,z,n.value,k),null!==n&&(a&&null!==n.alternate&&\nu.delete(null===n.key?z:n.key),g=f(n,g,z),null===t?l=n:t.sibling=n,t=n);a&&u.forEach(function(a){return b(e,a)});return l}return function(a,d,f,h){var k=\"object\"===typeof f&&null!==f&&f.type===ua&&null===f.key;k&&(f=f.props.children);var l=\"object\"===typeof f&&null!==f;if(l)switch(f.$$typeof){case sa:a:{l=f.key;for(k=d;null!==k;){if(k.key===l){switch(k.tag){case 7:if(f.type===ua){c(a,k.sibling);d=e(k,f.props.children);d.return=a;a=d;break a}break;default:if(k.elementType===f.type){c(a,k.sibling);\nd=e(k,f.props);d.ref=Qg(a,k,f);d.return=a;a=d;break a}}c(a,k);break}else b(a,k);k=k.sibling}f.type===ua?(d=Xg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Vg(f.type,f.key,f.props,null,a.mode,h),h.ref=Qg(a,d,f),h.return=a,a=h)}return g(a);case ta:a:{for(k=f.key;null!==d;){if(d.key===k)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=\nWg(f,a.mode,h);d.return=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=Ug(f,a.mode,h),d.return=a,a=d),g(a);if(Pg(f))return x(a,d,f,h);if(La(f))return w(a,d,f,h);l&&Rg(a,f);if(\"undefined\"===typeof f&&!k)switch(a.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(a.type)||\"Component\"));}return c(a,d)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);\nfunction dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,b){I(ch,b);I(bh,a);I(ah,$g);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:mb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=mb(b,a)}H(ah);I(ah,b)}function fh(){H(ah);H(bh);H(ch)}function gh(a){dh(ch.current);var b=dh(ah.current);var c=mb(b,a.type);b!==c&&(I(bh,a),I(ah,c))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);\nfunction ih(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var jh=null,kh=null,lh=!1;\nfunction mh(a,b){var c=nh(5,null,null,0);c.elementType=\"DELETED\";c.type=\"DELETED\";c.stateNode=b;c.return=a;c.flags=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function oh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}\nfunction ph(a){if(lh){var b=kh;if(b){var c=b;if(!oh(a,b)){b=rf(c.nextSibling);if(!b||!oh(a,b)){a.flags=a.flags&-1025|2;lh=!1;jh=a;return}mh(jh,c)}jh=a;kh=rf(b.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;jh=a}\nfunction rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var b=a.type;if(5!==a.tag||\"head\"!==b&&\"body\"!==b&&!nf(b,a.memoizedProps))for(b=kh;b;)mh(a,b),b=rf(b.nextSibling);qh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(y(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){kh=rf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}\nfunction sh(){kh=jh=null;lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321));}function Bh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Ch(a,b,c,d,e,f){xh=f;R=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;vh.current=null===a||null===a.memoizedState?Dh:Eh;a=c(d,e);if(zh){f=0;do{zh=!1;if(!(25>f))throw Error(y(301));f+=1;T=S=null;b.updateQueue=null;vh.current=Fh;a=c(d,e)}while(zh)}vh.current=Gh;b=null!==S&&null!==S.next;xh=0;T=S=R=null;yh=!1;if(b)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===T?R.memoizedState=T=a:T=T.next=a;return T}\nfunction Ih(){if(null===S){var a=R.alternate;a=null!==a?a.memoizedState:null}else a=S.next;var b=null===T?R.memoizedState:T.next;if(null!==b)T=b,S=a;else{if(null===a)throw Error(y(310));S=a;a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null};null===T?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Kh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=S,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,k=e;do{var l=k.lane;if((xh&l)===l)null!==h&&(h=h.next={lane:0,action:k.action,eagerReducer:k.eagerReducer,eagerState:k.eagerState,next:null}),d=k.eagerReducer===a?k.eagerState:a(d,k.action);else{var n={lane:l,action:k.action,eagerReducer:k.eagerReducer,\neagerState:k.eagerState,next:null};null===h?(g=h=n,f=d):h=h.next=n;R.lanes|=l;Dg|=l}k=k.next}while(null!==k&&k!==e);null===h?f=d:h.next=g;He(d,b.memoizedState)||(ug=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,c.dispatch]}\nfunction Lh(a){var b=Ih(),c=b.queue;if(null===c)throw Error(y(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(ug=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}\nfunction Mh(a,b,c){var d=b._getVersion;d=d(b._source);var e=b._workInProgressVersionPrimary;if(null!==e)a=e===d;else if(a=a.mutableReadLanes,a=(xh&a)===a)b._workInProgressVersionPrimary=d,th.push(b);if(a)return c(b._source);th.push(b);throw Error(y(350));}\nfunction Nh(a,b,c,d){var e=U;if(null===e)throw Error(y(349));var f=b._getVersion,g=f(b._source),h=vh.current,k=h.useState(function(){return Mh(e,b,c)}),l=k[1],n=k[0];k=T;var A=a.memoizedState,p=A.refs,C=p.getSnapshot,x=A.source;A=A.subscribe;var w=R;a.memoizedState={refs:p,source:b,subscribe:d};h.useEffect(function(){p.getSnapshot=c;p.setSnapshot=l;var a=f(b._source);if(!He(g,a)){a=c(b._source);He(n,a)||(l(a),a=Ig(w),e.mutableReadLanes|=a&e.pendingLanes);a=e.mutableReadLanes;e.entangledLanes|=a;for(var d=\ne.entanglements,h=a;0<h;){var k=31-Vc(h),v=1<<k;d[k]|=a;h&=~v}}},[c,b,d]);h.useEffect(function(){return d(b._source,function(){var a=p.getSnapshot,c=p.setSnapshot;try{c(a(b._source));var d=Ig(w);e.mutableReadLanes|=d&e.pendingLanes}catch(q){c(function(){throw q;})}})},[b,d]);He(C,c)&&He(x,b)&&He(A,d)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:n},a.dispatch=l=Oh.bind(null,R,a),k.queue=a,k.baseQueue=null,n=Mh(e,b,c),k.memoizedState=k.baseState=n);return n}\nfunction Ph(a,b,c){var d=Ih();return Nh(d,a,b,c)}function Qh(a){var b=Hh();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a};a=a.dispatch=Oh.bind(null,R,a);return[b.memoizedState,a]}\nfunction Rh(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=R.updateQueue;null===b?(b={lastEffect:null},R.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function Sh(a){var b=Hh();a={current:a};return b.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,b,c,d){var e=Hh();R.flags|=a;e.memoizedState=Rh(1|b,c,void 0,void 0===d?null:d)}\nfunction Vh(a,b,c,d){var e=Ih();d=void 0===d?null:d;var f=void 0;if(null!==S){var g=S.memoizedState;f=g.destroy;if(null!==d&&Bh(d,g.deps)){Rh(b,c,f,d);return}}R.flags|=a;e.memoizedState=Rh(1|b,c,f,d)}function Wh(a,b){return Uh(516,4,a,b)}function Xh(a,b){return Vh(516,4,a,b)}function Yh(a,b){return Vh(4,2,a,b)}function Zh(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}\nfunction $h(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Vh(4,2,Zh.bind(null,b,a),c)}function ai(){}function bi(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function ci(a,b){var c=Ih();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Bh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}\nfunction di(a,b){var c=eg();gg(98>c?98:c,function(){a(!0)});gg(97<c?97:c,function(){var c=wh.transition;wh.transition=1;try{a(!1),b()}finally{wh.transition=c}})}\nfunction Oh(a,b,c){var d=Hg(),e=Ig(a),f={lane:e,action:c,eagerReducer:null,eagerState:null,next:null},g=b.pending;null===g?f.next=f:(f.next=g.next,g.next=f);b.pending=f;g=a.alternate;if(a===R||null!==g&&g===R)zh=yh=!0;else{if(0===a.lanes&&(null===g||0===g.lanes)&&(g=b.lastRenderedReducer,null!==g))try{var h=b.lastRenderedState,k=g(h,c);f.eagerReducer=g;f.eagerState=k;if(He(k,h))return}catch(l){}finally{}Jg(a,e,d)}}\nvar Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,b){Hh().memoizedState=[a,void 0===b?null:b];return a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return Uh(4,2,Zh.bind(null,\nb,a),c)},useLayoutEffect:function(a,b){return Uh(4,2,a,b)},useMemo:function(a,b){var c=Hh();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Hh();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=Oh.bind(null,R,a);return[d.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var b=Qh(a),c=b[0],d=b[1];Wh(function(){var b=wh.transition;\nwh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Qh(!1),b=a[0];a=di.bind(null,a[1]);Sh(a);return[a,b]},useMutableSource:function(a,b,c){var d=Hh();d.memoizedState={refs:{getSnapshot:b,setSnapshot:null},source:a,subscribe:c};return Nh(d,a,b,c)},useOpaqueIdentifier:function(){if(lh){var a=!1,b=uf(function(){a||(a=!0,c(\"r:\"+(tf++).toString(36)));throw Error(y(355));}),c=Qh(b)[1];0===(R.mode&2)&&(R.flags|=516,Rh(5,function(){c(\"r:\"+(tf++).toString(36))},\nvoid 0,null));return b}b=\"r:\"+(tf++).toString(36);Qh(b);return b},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Kh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var b=Lh(Jh),c=b[0],d=b[1];Xh(function(){var b=wh.transition;wh.transition=1;try{d(a)}finally{wh.transition=b}},[a]);return c},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,\na]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,b,c,d){b.child=null===a?Zg(b,null,c,d):Yg(b,a.child,c,d)}function gi(a,b,c,d,e){c=c.render;var f=b.ref;tg(b,e);d=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,d,e);return b.child}\nfunction ii(a,b,c,d,e,f){if(null===a){var g=c.type;if(\"function\"===typeof g&&!ji(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ki(a,b,g,d,e,f);a=Vg(c.type,null,d,b,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(0===(e&f)&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Je,c(e,d)&&a.ref===b.ref))return hi(a,b,f);b.flags|=1;a=Tg(g,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction ki(a,b,c,d,e,f){if(null!==a&&Je(a.memoizedProps,d)&&a.ref===b.ref)if(ug=!1,0!==(f&e))0!==(a.flags&16384)&&(ug=!0);else return b.lanes=a.lanes,hi(a,b,f);return li(a,b,c,d,f)}\nfunction mi(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode||\"unstable-defer-without-hiding\"===d.mode)if(0===(b.mode&4))b.memoizedState={baseLanes:0},ni(b,c);else if(0!==(c&1073741824))b.memoizedState={baseLanes:0},ni(b,null!==f?f.baseLanes:c);else return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a},ni(b,a),null;else null!==f?(d=f.baseLanes|c,b.memoizedState=null):d=c,ni(b,d);fi(a,b,e,c);return b.child}\nfunction oi(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=128}function li(a,b,c,d,e){var f=Ff(c)?Df:M.current;f=Ef(b,f);tg(b,e);c=Ch(a,b,c,d,f,e);if(null!==a&&!ug)return b.updateQueue=a.updateQueue,b.flags&=-517,a.lanes&=~e,hi(a,b,e);b.flags|=1;fi(a,b,c,e);return b.child}\nfunction pi(a,b,c,d,e){if(Ff(c)){var f=!0;Jf(b)}else f=!1;tg(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),Mg(b,c,d),Og(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=vg(l):(l=Ff(c)?Df:M.current,l=Ef(b,l));var n=c.getDerivedStateFromProps,A=\"function\"===typeof n||\"function\"===typeof g.getSnapshotBeforeUpdate;A||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\n\"function\"!==typeof g.componentWillReceiveProps||(h!==d||k!==l)&&Ng(b,g,d,l);wg=!1;var p=b.memoizedState;g.state=p;Cg(b,d,g,e);k=b.memoizedState;h!==d||p!==k||N.current||wg?(\"function\"===typeof n&&(Gg(b,c,n,d),k=b.memoizedState),(h=wg||Lg(b,c,h,d,p,k,l))?(A||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===\ntypeof g.componentDidMount&&(b.flags|=4)):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4),d=!1)}else{g=b.stateNode;yg(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:lg(b.type,h);g.props=l;A=b.pendingProps;p=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=vg(k):(k=Ff(c)?Df:M.current,k=Ef(b,k));var C=c.getDerivedStateFromProps;(n=\"function\"===typeof C||\n\"function\"===typeof g.getSnapshotBeforeUpdate)||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==A||p!==k)&&Ng(b,g,d,k);wg=!1;p=b.memoizedState;g.state=p;Cg(b,d,g,e);var x=b.memoizedState;h!==A||p!==x||N.current||wg?(\"function\"===typeof C&&(Gg(b,c,C,d),x=b.memoizedState),(l=wg||Lg(b,c,l,d,p,x,k))?(n||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,\nx,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,x,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=256)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),b.memoizedProps=d,b.memoizedState=x),g.props=d,g.state=x,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||\nh===a.memoizedProps&&p===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&p===a.memoizedState||(b.flags|=256),d=!1)}return qi(a,b,c,d,f,e)}\nfunction qi(a,b,c,d,e,f){oi(a,b);var g=0!==(b.flags&64);if(!d&&!g)return e&&Kf(b,c,!1),hi(a,b,f);d=b.stateNode;ei.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Yg(b,a.child,null,f),b.child=Yg(b,null,h,f)):fi(a,b,h,f);b.memoizedState=d.state;e&&Kf(b,c,!0);return b.child}function ri(a){var b=a.stateNode;b.pendingContext?Hf(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Hf(a,b.context,!1);eh(a,b.containerInfo)}\nvar si={dehydrated:null,retryLane:0};\nfunction ti(a,b,c){var d=b.pendingProps,e=P.current,f=!1,g;(g=0!==(b.flags&64))||(g=null!==a&&null===a.memoizedState?!1:0!==(e&2));g?(f=!0,b.flags&=-65):null!==a&&null===a.memoizedState||void 0===d.fallback||!0===d.unstable_avoidThisFallback||(e|=1);I(P,e&1);if(null===a){void 0!==d.fallback&&ph(b);a=d.children;e=d.fallback;if(f)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},b.memoizedState=si,a;if(\"number\"===typeof d.unstable_expectedLoadTime)return a=ui(b,a,e,c),b.child.memoizedState={baseLanes:c},\nb.memoizedState=si,b.lanes=33554432,a;c=vi({mode:\"visible\",children:a},b.mode,c,null);c.return=b;return b.child=c}if(null!==a.memoizedState){if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}if(f)return d=wi(a,b,d.children,d.fallback,c),f=b.child,e=a.child.memoizedState,f.memoizedState=null===e?{baseLanes:c}:\n{baseLanes:e.baseLanes|c},f.childLanes=a.childLanes&~c,b.memoizedState=si,d;c=xi(a,b,d.children,c);b.memoizedState=null;return c}function ui(a,b,c,d){var e=a.mode,f=a.child;b={mode:\"hidden\",children:b};0===(e&2)&&null!==f?(f.childLanes=0,f.pendingProps=b):f=vi(b,e,0,null);c=Xg(c,e,d,null);f.return=a;c.return=a;f.sibling=c;a.child=f;return c}\nfunction xi(a,b,c,d){var e=a.child;a=e.sibling;c=Tg(e,{mode:\"visible\",children:c});0===(b.mode&2)&&(c.lanes=d);c.return=b;c.sibling=null;null!==a&&(a.nextEffect=null,a.flags=8,b.firstEffect=b.lastEffect=a);return b.child=c}\nfunction wi(a,b,c,d,e){var f=b.mode,g=a.child;a=g.sibling;var h={mode:\"hidden\",children:c};0===(f&2)&&b.child!==g?(c=b.child,c.childLanes=0,c.pendingProps=h,g=c.lastEffect,null!==g?(b.firstEffect=c.firstEffect,b.lastEffect=g,g.nextEffect=null):b.firstEffect=b.lastEffect=null):c=Tg(g,h);null!==a?d=Tg(a,d):(d=Xg(d,f,e,null),d.flags|=2);d.return=b;c.return=b;c.sibling=d;b.child=c;return d}function yi(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);sg(a.return,b)}\nfunction zi(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e,lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=e,g.lastEffect=f)}\nfunction Ai(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;fi(a,b,d.children,c);d=P.current;if(0!==(d&2))d=d&1|2,b.flags|=64;else{if(null!==a&&0!==(a.flags&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&yi(a,c);else if(19===a.tag)yi(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}I(P,d);if(0===(b.mode&2))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===ih(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);zi(b,!1,e,c,f,b.lastEffect);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===ih(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}zi(b,!0,c,null,f,b.lastEffect);break;case \"together\":zi(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}\nfunction hi(a,b,c){null!==a&&(b.dependencies=a.dependencies);Dg|=b.lanes;if(0!==(c&b.childLanes)){if(null!==a&&b.child!==a.child)throw Error(y(153));if(null!==b.child){a=b.child;c=Tg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Tg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}return null}var Bi,Ci,Di,Ei;\nBi=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Ci=function(){};\nDi=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;dh(ah.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"option\":e=eb(a,e);d=eb(a,d);f=[];break;case \"select\":e=m({},e,{value:void 0});d=m({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=jf)}vb(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===\nl){var h=e[l];for(g in h)h.hasOwnProperty(g)&&(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ca.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||\n(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,c)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ca.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&G(\"scroll\",a),f||h===k||(f=[])):\"object\"===typeof k&&null!==k&&k.$$typeof===Ga?k.toString():(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",\nc);var l=f;if(b.updateQueue=l)b.flags|=4}};Ei=function(a,b,c,d){c!==d&&(b.flags|=4)};function Fi(a,b){if(!lh)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction Gi(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(b.type)&&Gf(),null;case 3:fh();H(N);H(M);uh();d=b.stateNode;d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)rh(b)?b.flags|=4:d.hydrate||(b.flags|=256);Ci(b);return null;case 5:hh(b);var e=dh(ch.current);c=b.type;if(null!==a&&null!=b.stateNode)Di(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=128);else{if(!d){if(null===\nb.stateNode)throw Error(y(166));return null}a=dh(ah.current);if(rh(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[wf]=b;d[xf]=f;switch(c){case \"dialog\":G(\"cancel\",d);G(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",d);break;case \"video\":case \"audio\":for(a=0;a<Xe.length;a++)G(Xe[a],d);break;case \"source\":G(\"error\",d);break;case \"img\":case \"image\":case \"link\":G(\"error\",d);G(\"load\",d);break;case \"details\":G(\"toggle\",d);break;case \"input\":Za(d,f);G(\"invalid\",d);break;case \"select\":d._wrapperState=\n{wasMultiple:!!f.multiple};G(\"invalid\",d);break;case \"textarea\":hb(d,f),G(\"invalid\",d)}vb(c,f);a=null;for(var g in f)f.hasOwnProperty(g)&&(e=f[g],\"children\"===g?\"string\"===typeof e?d.textContent!==e&&(a=[\"children\",e]):\"number\"===typeof e&&d.textContent!==\"\"+e&&(a=[\"children\",\"\"+e]):ca.hasOwnProperty(g)&&null!=e&&\"onScroll\"===g&&G(\"scroll\",d));switch(c){case \"input\":Va(d);cb(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=\njf)}d=a;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;a===kb.html&&(a=lb(c));a===kb.html?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[wf]=b;a[xf]=d;Bi(a,b,!1,!1);b.stateNode=a;g=wb(c,d);switch(c){case \"dialog\":G(\"cancel\",a);G(\"close\",a);\ne=d;break;case \"iframe\":case \"object\":case \"embed\":G(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<Xe.length;e++)G(Xe[e],a);e=d;break;case \"source\":G(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":G(\"error\",a);G(\"load\",a);e=d;break;case \"details\":G(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);G(\"invalid\",a);break;case \"option\":e=eb(a,d);break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=m({},d,{value:void 0});G(\"invalid\",a);break;case \"textarea\":hb(a,d);e=\ngb(a,d);G(\"invalid\",a);break;default:e=d}vb(c,e);var h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?tb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&ob(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==c||\"\"!==k)&&pb(a,k):\"number\"===typeof k&&pb(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ca.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&G(\"scroll\",a):null!=k&&qa(a,f,k,g))}switch(c){case \"input\":Va(a);cb(a,d,!1);\nbreak;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=jf)}mf(c,d)&&(b.flags|=4)}null!==b.ref&&(b.flags|=128)}return null;case 6:if(a&&null!=b.stateNode)Ei(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(y(166));\nc=dh(ch.current);dh(ah.current);rh(b)?(d=b.stateNode,c=b.memoizedProps,d[wf]=b,d.nodeValue!==c&&(b.flags|=4)):(d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[wf]=b,b.stateNode=d)}return null;case 13:H(P);d=b.memoizedState;if(0!==(b.flags&64))return b.lanes=c,b;d=null!==d;c=!1;null===a?void 0!==b.memoizedProps.fallback&&rh(b):c=null!==a.memoizedState;if(d&&!c&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||0!==(P.current&1))0===V&&(V=3);else{if(0===V||3===V)V=\n4;null===U||0===(Dg&134217727)&&0===(Hi&134217727)||Ii(U,W)}if(d||c)b.flags|=4;return null;case 4:return fh(),Ci(b),null===a&&cf(b.stateNode.containerInfo),null;case 10:return rg(b),null;case 17:return Ff(b.type)&&Gf(),null;case 19:H(P);d=b.memoizedState;if(null===d)return null;f=0!==(b.flags&64);g=d.rendering;if(null===g)if(f)Fi(d,!1);else{if(0!==V||null!==a&&0!==(a.flags&64))for(a=b.child;null!==a;){g=ih(a);if(null!==g){b.flags|=64;Fi(d,!1);f=g.updateQueue;null!==f&&(b.updateQueue=f,b.flags|=4);\nnull===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,g=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,\nf.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;I(P,P.current&1|2);return b.child}a=a.sibling}null!==d.tail&&O()>Ji&&(b.flags|=64,f=!0,Fi(d,!1),b.lanes=33554432)}else{if(!f)if(a=ih(g),null!==a){if(b.flags|=64,f=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Fi(d,!0),null===d.tail&&\"hidden\"===d.tailMode&&!g.alternate&&!lh)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*O()-d.renderingStartTime>Ji&&1073741824!==c&&(b.flags|=\n64,f=!0,Fi(d,!1),b.lanes=33554432);d.isBackwards?(g.sibling=b.child,b.child=g):(c=d.last,null!==c?c.sibling=g:b.child=g,d.last=g)}return null!==d.tail?(c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=O(),c.sibling=null,b=P.current,I(P,f?b&1|2:b&1),c):null;case 23:case 24:return Ki(),null!==a&&null!==a.memoizedState!==(null!==b.memoizedState)&&\"unstable-defer-without-hiding\"!==d.mode&&(b.flags|=4),null}throw Error(y(156,b.tag));}\nfunction Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var b=a.flags;return b&4096?(a.flags=b&-4097|64,a):null;case 3:fh();H(N);H(M);uh();b=a.flags;if(0!==(b&64))throw Error(y(285));a.flags=b&-4097|64;return a;case 5:return hh(a),null;case 13:return H(P),b=a.flags,b&4096?(a.flags=b&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}\nfunction Mi(a,b){try{var c=\"\",d=b;do c+=Qa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e}}function Ni(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Oi=\"function\"===typeof WeakMap?WeakMap:Map;function Pi(a,b,c){c=zg(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Qi||(Qi=!0,Ri=d);Ni(a,b)};return c}\nfunction Si(a,b,c){c=zg(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){Ni(a,b);return d(e)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){\"function\"!==typeof d&&(null===Ti?Ti=new Set([this]):Ti.add(this),Ni(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}var Ui=\"function\"===typeof WeakSet?WeakSet:Set;\nfunction Vi(a){var b=a.ref;if(null!==b)if(\"function\"===typeof b)try{b(null)}catch(c){Wi(a,c)}else b.current=null}function Xi(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.flags&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===b.type?c:lg(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:b.flags&256&&qf(b.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163));}\nfunction Yi(a,b,c){switch(c.tag){case 0:case 11:case 15:case 22:b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{if(3===(a.tag&3)){var d=a.create;a.destroy=d()}a=a.next}while(a!==b)}b=c.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){a=b=b.next;do{var e=a;d=e.next;e=e.tag;0!==(e&4)&&0!==(e&1)&&(Zi(c,a),$i(c,a));a=d}while(a!==b)}return;case 1:a=c.stateNode;c.flags&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:lg(c.type,b.memoizedProps),a.componentDidUpdate(d,\nb.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Eg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Eg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.flags&4&&mf(c.type,c.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&Cc(c))));\nreturn;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163));}\nfunction aj(a,b){for(var c=a;;){if(5===c.tag){var d=c.stateNode;if(b)d=d.style,\"function\"===typeof d.setProperty?d.setProperty(\"display\",\"none\",\"important\"):d.display=\"none\";else{d=c.stateNode;var e=c.memoizedProps.style;e=void 0!==e&&null!==e&&e.hasOwnProperty(\"display\")?e.display:null;d.style.display=sb(\"display\",e)}}else if(6===c.tag)c.stateNode.nodeValue=b?\"\":c.memoizedProps;else if((23!==c.tag&&24!==c.tag||null===c.memoizedState||c===a)&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===\na)break;for(;null===c.sibling;){if(null===c.return||c.return===a)return;c=c.return}c.sibling.return=c.return;c=c.sibling}}\nfunction bj(a,b){if(Mf&&\"function\"===typeof Mf.onCommitFiberUnmount)try{Mf.onCommitFiberUnmount(Lf,b)}catch(f){}switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var c=a=a.next;do{var d=c,e=d.destroy;d=d.tag;if(void 0!==e)if(0!==(d&4))Zi(b,c);else{d=b;try{e()}catch(f){Wi(d,f)}}c=c.next}while(c!==a)}break;case 1:Vi(b);a=b.stateNode;if(\"function\"===typeof a.componentWillUnmount)try{a.props=b.memoizedProps,a.state=b.memoizedState,a.componentWillUnmount()}catch(f){Wi(b,\nf)}break;case 5:Vi(b);break;case 4:cj(a,b)}}function dj(a){a.alternate=null;a.child=null;a.dependencies=null;a.firstEffect=null;a.lastEffect=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.return=null;a.updateQueue=null}function ej(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction fj(a){a:{for(var b=a.return;null!==b;){if(ej(b))break a;b=b.return}throw Error(y(160));}var c=b;b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(y(161));}c.flags&16&&(pb(b,\"\"),c.flags&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||ej(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.flags&2)continue b;if(null===\nc.child||4===c.tag)continue b;else c.child.return=c,c=c.child}if(!(c.flags&2)){c=c.stateNode;break a}}d?gj(a,c,b):hj(a,c,b)}\nfunction gj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=jf));else if(4!==d&&(a=a.child,null!==a))for(gj(a,b,c),a=a.sibling;null!==a;)gj(a,b,c),a=a.sibling}\nfunction hj(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(hj(a,b,c),a=a.sibling;null!==a;)hj(a,b,c),a=a.sibling}\nfunction cj(a,b){for(var c=b,d=!1,e,f;;){if(!d){d=c.return;a:for(;;){if(null===d)throw Error(y(160));e=d.stateNode;switch(d.tag){case 5:f=!1;break a;case 3:e=e.containerInfo;f=!0;break a;case 4:e=e.containerInfo;f=!0;break a}d=d.return}d=!0}if(5===c.tag||6===c.tag){a:for(var g=a,h=c,k=h;;)if(bj(g,k),null!==k.child&&4!==k.tag)k.child.return=k,k=k.child;else{if(k===h)break a;for(;null===k.sibling;){if(null===k.return||k.return===h)break a;k=k.return}k.sibling.return=k.return;k=k.sibling}f?(g=e,h=c.stateNode,\n8===g.nodeType?g.parentNode.removeChild(h):g.removeChild(h)):e.removeChild(c.stateNode)}else if(4===c.tag){if(null!==c.child){e=c.stateNode.containerInfo;f=!0;c.child.return=c;c=c.child;continue}}else if(bj(a,c),null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return;4===c.tag&&(d=!1)}c.sibling.return=c.return;c=c.sibling}}\nfunction ij(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:var c=b.updateQueue;c=null!==c?c.lastEffect:null;if(null!==c){var d=c=c.next;do 3===(d.tag&3)&&(a=d.destroy,d.destroy=void 0,void 0!==a&&a()),d=d.next;while(d!==c)}return;case 1:return;case 5:c=b.stateNode;if(null!=c){d=b.memoizedProps;var e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[xf]=d;\"input\"===a&&\"radio\"===d.type&&null!=d.name&&$a(c,d);wb(a,e);b=wb(a,d);for(e=0;e<f.length;e+=\n2){var g=f[e],h=f[e+1];\"style\"===g?tb(c,h):\"dangerouslySetInnerHTML\"===g?ob(c,h):\"children\"===g?pb(c,h):qa(c,g,h,b)}switch(a){case \"input\":ab(c,d);break;case \"textarea\":ib(c,d);break;case \"select\":a=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,f=d.value,null!=f?fb(c,!!d.multiple,f,!1):a!==!!d.multiple&&(null!=d.defaultValue?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:\"\",!1))}}}return;case 6:if(null===b.stateNode)throw Error(y(162));b.stateNode.nodeValue=\nb.memoizedProps;return;case 3:c=b.stateNode;c.hydrate&&(c.hydrate=!1,Cc(c.containerInfo));return;case 12:return;case 13:null!==b.memoizedState&&(jj=O(),aj(b.child,!0));kj(b);return;case 19:kj(b);return;case 17:return;case 23:case 24:aj(b,null!==b.memoizedState);return}throw Error(y(163));}function kj(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Ui);b.forEach(function(b){var d=lj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction mj(a,b){return null!==a&&(a=a.memoizedState,null===a||null!==a.dehydrated)?(b=b.memoizedState,null!==b&&null===b.dehydrated):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=Infinity;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return 0!==(X&48)?O():-1!==Fj?Fj:Fj=O()}\nfunction Ig(a){a=a.mode;if(0===(a&2))return 1;if(0===(a&4))return 99===eg()?1:2;0===Gj&&(Gj=tj);if(0!==kg.transition){0!==Hj&&(Hj=null!==vj?vj.pendingLanes:0);a=Gj;var b=4186112&~Hj;b&=-b;0===b&&(a=4186112&~a,b=a&-a,0===b&&(b=8192));return b}a=eg();0!==(X&4)&&98===a?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj));return a}\nfunction Jg(a,b,c){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));a=Kj(a,b);if(null===a)return null;$c(a,b,c);a===U&&(Hi|=b,4===V&&Ii(a,W));var d=eg();1===b?0!==(X&8)&&0===(X&48)?Lj(a):(Mj(a,c),0===X&&(wj(),ig())):(0===(X&4)||98!==d&&99!==d||(null===Cj?Cj=new Set([a]):Cj.add(a)),Mj(a,c));vj=a}function Kj(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}\nfunction Mj(a,b){for(var c=a.callbackNode,d=a.suspendedLanes,e=a.pingedLanes,f=a.expirationTimes,g=a.pendingLanes;0<g;){var h=31-Vc(g),k=1<<h,l=f[h];if(-1===l){if(0===(k&d)||0!==(k&e)){l=b;Rc(k);var n=F;f[h]=10<=n?l+250:6<=n?l+5E3:-1}}else l<=b&&(a.expiredLanes|=k);g&=~k}d=Uc(a,a===U?W:0);b=F;if(0===d)null!==c&&(c!==Zf&&Pf(c),a.callbackNode=null,a.callbackPriority=0);else{if(null!==c){if(a.callbackPriority===b)return;c!==Zf&&Pf(c)}15===b?(c=Lj.bind(null,a),null===ag?(ag=[c],bg=Of(Uf,jg)):ag.push(c),\nc=Zf):14===b?c=hg(99,Lj.bind(null,a)):(c=Tc(b),c=hg(c,Nj.bind(null,a)));a.callbackPriority=b;a.callbackNode=c}}\nfunction Nj(a){Fj=-1;Hj=Gj=0;if(0!==(X&48))throw Error(y(327));var b=a.callbackNode;if(Oj()&&a.callbackNode!==b)return null;var c=Uc(a,a===U?W:0);if(0===c)return null;var d=c;var e=X;X|=16;var f=Pj();if(U!==a||W!==d)wj(),Qj(a,d);do try{Rj();break}catch(h){Sj(a,h)}while(1);qg();oj.current=f;X=e;null!==Y?d=0:(U=null,W=0,d=V);if(0!==(tj&Hi))Qj(a,0);else if(0!==d){2===d&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),c=Wc(a),0!==c&&(d=Tj(a,c)));if(1===d)throw b=sj,Qj(a,0),Ii(a,c),Mj(a,O()),b;a.finishedWork=\na.current.alternate;a.finishedLanes=c;switch(d){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:Ii(a,c);if((c&62914560)===c&&(d=jj+500-O(),10<d)){if(0!==Uc(a,0))break;e=a.suspendedLanes;if((e&c)!==c){Hg();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=of(Uj.bind(null,a),d);break}Uj(a);break;case 4:Ii(a,c);if((c&4186112)===c)break;d=a.eventTimes;for(e=-1;0<c;){var g=31-Vc(c);f=1<<g;g=d[g];g>e&&(e=g);c&=~f}c=e;c=O()-c;c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3E3>c?3E3:4320>\nc?4320:1960*nj(c/1960))-c;if(10<c){a.timeoutHandle=of(Uj.bind(null,a),c);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329));}}Mj(a,O());return a.callbackNode===b?Nj.bind(null,a):null}function Ii(a,b){b&=~uj;b&=~Hi;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-Vc(b),d=1<<c;a[c]=-1;b&=~d}}\nfunction Lj(a){if(0!==(X&48))throw Error(y(327));Oj();if(a===U&&0!==(a.expiredLanes&W)){var b=W;var c=Tj(a,b);0!==(tj&Hi)&&(b=Uc(a,b),c=Tj(a,b))}else b=Uc(a,0),c=Tj(a,b);0!==a.tag&&2===c&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),b=Wc(a),0!==b&&(c=Tj(a,b)));if(1===c)throw c=sj,Qj(a,0),Ii(a,b),Mj(a,O()),c;a.finishedWork=a.current.alternate;a.finishedLanes=b;Uj(a);Mj(a,O());return null}\nfunction Vj(){if(null!==Cj){var a=Cj;Cj=null;a.forEach(function(a){a.expiredLanes|=24&a.pendingLanes;Mj(a,O())})}ig()}function Wj(a,b){var c=X;X|=1;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function Xj(a,b){var c=X;X&=-2;X|=8;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}}function ni(a,b){I(rj,qj);qj|=b;tj|=b}function Ki(){qj=rj.current;H(rj)}\nfunction Qj(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,pf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&Gf();break;case 3:fh();H(N);H(M);uh();break;case 5:hh(d);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(d);break;case 23:case 24:Ki()}c=c.return}U=a;Y=Tg(a.current,null);W=qj=tj=b;V=0;sj=null;uj=Hi=Dg=0}\nfunction Sj(a,b){do{var c=Y;try{qg();vh.current=Gh;if(yh){for(var d=R.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}yh=!1}xh=0;T=S=R=null;zh=!1;pj.current=null;if(null===c||null===c.return){V=1;sj=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=W;h.flags|=2048;h.firstEffect=h.lastEffect=null;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k;if(0===(h.mode&2)){var n=h.alternate;n?(h.updateQueue=n.updateQueue,h.memoizedState=n.memoizedState,h.lanes=n.lanes):\n(h.updateQueue=null,h.memoizedState=null)}var A=0!==(P.current&1),p=g;do{var C;if(C=13===p.tag){var x=p.memoizedState;if(null!==x)C=null!==x.dehydrated?!0:!1;else{var w=p.memoizedProps;C=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:A?!1:!0}}if(C){var z=p.updateQueue;if(null===z){var u=new Set;u.add(l);p.updateQueue=u}else z.add(l);if(0===(p.mode&2)){p.flags|=64;h.flags|=16384;h.flags&=-2981;if(1===h.tag)if(null===h.alternate)h.tag=17;else{var t=zg(-1,1);t.tag=2;Ag(h,t)}h.lanes|=1;break a}k=\nvoid 0;h=b;var q=f.pingCache;null===q?(q=f.pingCache=new Oi,k=new Set,q.set(l,k)):(k=q.get(l),void 0===k&&(k=new Set,q.set(l,k)));if(!k.has(h)){k.add(h);var v=Yj.bind(null,f,l,h);l.then(v,v)}p.flags|=4096;p.lanes=b;break a}p=p.return}while(null!==p);k=Error((Ra(h.type)||\"A React component\")+\" suspended while rendering, but no fallback UI was specified.\\n\\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.\")}5!==V&&(V=2);k=Mi(k,h);p=\ng;do{switch(p.tag){case 3:f=k;p.flags|=4096;b&=-b;p.lanes|=b;var J=Pi(p,f,b);Bg(p,J);break a;case 1:f=k;var K=p.type,Q=p.stateNode;if(0===(p.flags&64)&&(\"function\"===typeof K.getDerivedStateFromError||null!==Q&&\"function\"===typeof Q.componentDidCatch&&(null===Ti||!Ti.has(Q)))){p.flags|=4096;b&=-b;p.lanes|=b;var L=Si(p,f,b);Bg(p,L);break a}}p=p.return}while(null!==p)}Zj(c)}catch(va){b=va;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}\nfunction Pj(){var a=oj.current;oj.current=Gh;return null===a?Gh:a}function Tj(a,b){var c=X;X|=16;var d=Pj();U===a&&W===b||Qj(a,b);do try{ak();break}catch(e){Sj(a,e)}while(1);qg();X=c;oj.current=d;if(null!==Y)throw Error(y(261));U=null;W=0;return V}function ak(){for(;null!==Y;)bk(Y)}function Rj(){for(;null!==Y&&!Qf();)bk(Y)}function bk(a){var b=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps;null===b?Zj(a):Y=b;pj.current=null}\nfunction Zj(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&2048)){c=Gi(c,b,qj);if(null!==c){Y=c;return}c=b;if(24!==c.tag&&23!==c.tag||null===c.memoizedState||0!==(qj&1073741824)||0===(c.mode&4)){for(var d=0,e=c.child;null!==e;)d|=e.lanes|e.childLanes,e=e.sibling;c.childLanes=d}null!==a&&0===(a.flags&2048)&&(null===a.firstEffect&&(a.firstEffect=b.firstEffect),null!==b.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=b.firstEffect),a.lastEffect=b.lastEffect),1<b.flags&&(null!==\na.lastEffect?a.lastEffect.nextEffect=b:a.firstEffect=b,a.lastEffect=b))}else{c=Li(b);if(null!==c){c.flags&=2047;Y=c;return}null!==a&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===V&&(V=5)}function Uj(a){var b=eg();gg(99,dk.bind(null,a,b));return null}\nfunction dk(a,b){do Oj();while(null!==yj);if(0!==(X&48))throw Error(y(327));var c=a.finishedWork;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(y(177));a.callbackNode=null;var d=c.lanes|c.childLanes,e=d,f=a.pendingLanes&~e;a.pendingLanes=e;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=e;a.mutableReadLanes&=e;a.entangledLanes&=e;e=a.entanglements;for(var g=a.eventTimes,h=a.expirationTimes;0<f;){var k=31-Vc(f),l=1<<k;e[k]=0;g[k]=-1;h[k]=-1;f&=~l}null!==\nCj&&0===(d&24)&&Cj.has(a)&&Cj.delete(a);a===U&&(Y=U=null,W=0);1<c.flags?null!==c.lastEffect?(c.lastEffect.nextEffect=c,d=c.firstEffect):d=c:d=c.firstEffect;if(null!==d){e=X;X|=32;pj.current=null;kf=fd;g=Ne();if(Oe(g)){if(\"selectionStart\"in g)h={start:g.selectionStart,end:g.selectionEnd};else a:if(h=(h=g.ownerDocument)&&h.defaultView||window,(l=h.getSelection&&h.getSelection())&&0!==l.rangeCount){h=l.anchorNode;f=l.anchorOffset;k=l.focusNode;l=l.focusOffset;try{h.nodeType,k.nodeType}catch(va){h=null;\nbreak a}var n=0,A=-1,p=-1,C=0,x=0,w=g,z=null;b:for(;;){for(var u;;){w!==h||0!==f&&3!==w.nodeType||(A=n+f);w!==k||0!==l&&3!==w.nodeType||(p=n+l);3===w.nodeType&&(n+=w.nodeValue.length);if(null===(u=w.firstChild))break;z=w;w=u}for(;;){if(w===g)break b;z===h&&++C===f&&(A=n);z===k&&++x===l&&(p=n);if(null!==(u=w.nextSibling))break;w=z;z=w.parentNode}w=u}h=-1===A||-1===p?null:{start:A,end:p}}else h=null;h=h||{start:0,end:0}}else h=null;lf={focusedElem:g,selectionRange:h};fd=!1;Ij=null;Jj=!1;Z=d;do try{ek()}catch(va){if(null===\nZ)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Ij=null;Z=d;do try{for(g=a;null!==Z;){var t=Z.flags;t&16&&pb(Z.stateNode,\"\");if(t&128){var q=Z.alternate;if(null!==q){var v=q.ref;null!==v&&(\"function\"===typeof v?v(null):v.current=null)}}switch(t&1038){case 2:fj(Z);Z.flags&=-3;break;case 6:fj(Z);Z.flags&=-3;ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025;ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:h=Z;cj(g,h);var J=h.alternate;dj(h);null!==\nJ&&dj(J)}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);v=lf;q=Ne();t=v.focusedElem;g=v.selectionRange;if(q!==t&&t&&t.ownerDocument&&Me(t.ownerDocument.documentElement,t)){null!==g&&Oe(t)&&(q=g.start,v=g.end,void 0===v&&(v=q),\"selectionStart\"in t?(t.selectionStart=q,t.selectionEnd=Math.min(v,t.value.length)):(v=(q=t.ownerDocument||document)&&q.defaultView||window,v.getSelection&&(v=v.getSelection(),h=t.textContent.length,J=Math.min(g.start,h),g=void 0===\ng.end?J:Math.min(g.end,h),!v.extend&&J>g&&(h=g,g=J,J=h),h=Le(t,J),f=Le(t,g),h&&f&&(1!==v.rangeCount||v.anchorNode!==h.node||v.anchorOffset!==h.offset||v.focusNode!==f.node||v.focusOffset!==f.offset)&&(q=q.createRange(),q.setStart(h.node,h.offset),v.removeAllRanges(),J>g?(v.addRange(q),v.extend(f.node,f.offset)):(q.setEnd(f.node,f.offset),v.addRange(q))))));q=[];for(v=t;v=v.parentNode;)1===v.nodeType&&q.push({element:v,left:v.scrollLeft,top:v.scrollTop});\"function\"===typeof t.focus&&t.focus();for(t=\n0;t<q.length;t++)v=q[t],v.element.scrollLeft=v.left,v.element.scrollTop=v.top}fd=!!kf;lf=kf=null;a.current=c;Z=d;do try{for(t=a;null!==Z;){var K=Z.flags;K&36&&Yi(t,Z.alternate,Z);if(K&128){q=void 0;var Q=Z.ref;if(null!==Q){var L=Z.stateNode;switch(Z.tag){case 5:q=L;break;default:q=L}\"function\"===typeof Q?Q(q):Q.current=q}}Z=Z.nextEffect}}catch(va){if(null===Z)throw Error(y(330));Wi(Z,va);Z=Z.nextEffect}while(null!==Z);Z=null;$f();X=e}else a.current=c;if(xj)xj=!1,yj=a,zj=b;else for(Z=d;null!==Z;)b=\nZ.nextEffect,Z.nextEffect=null,Z.flags&8&&(K=Z,K.sibling=null,K.stateNode=null),Z=b;d=a.pendingLanes;0===d&&(Ti=null);1===d?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0;c=c.stateNode;if(Mf&&\"function\"===typeof Mf.onCommitFiberRoot)try{Mf.onCommitFiberRoot(Lf,c,void 0,64===(c.current.flags&64))}catch(va){}Mj(a,O());if(Qi)throw Qi=!1,a=Ri,Ri=null,a;if(0!==(X&8))return null;ig();return null}\nfunction ek(){for(;null!==Z;){var a=Z.alternate;Jj||null===Ij||(0!==(Z.flags&8)?dc(Z,Ij)&&(Jj=!0):13===Z.tag&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var b=Z.flags;0!==(b&256)&&Xi(a,Z);0===(b&512)||xj||(xj=!0,hg(97,function(){Oj();return null}));Z=Z.nextEffect}}function Oj(){if(90!==zj){var a=97<zj?97:zj;zj=90;return gg(a,fk)}return!1}function $i(a,b){Aj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}function Zi(a,b){Bj.push(b,a);xj||(xj=!0,hg(97,function(){Oj();return null}))}\nfunction fk(){if(null===yj)return!1;var a=yj;yj=null;if(0!==(X&48))throw Error(y(331));var b=X;X|=32;var c=Bj;Bj=[];for(var d=0;d<c.length;d+=2){var e=c[d],f=c[d+1],g=e.destroy;e.destroy=void 0;if(\"function\"===typeof g)try{g()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}c=Aj;Aj=[];for(d=0;d<c.length;d+=2){e=c[d];f=c[d+1];try{var h=e.create;e.destroy=h()}catch(k){if(null===f)throw Error(y(330));Wi(f,k)}}for(h=a.current.firstEffect;null!==h;)a=h.nextEffect,h.nextEffect=null,h.flags&8&&(h.sibling=\nnull,h.stateNode=null),h=a;X=b;ig();return!0}function gk(a,b,c){b=Mi(c,b);b=Pi(a,b,1);Ag(a,b);b=Hg();a=Kj(a,1);null!==a&&($c(a,1,b),Mj(a,b))}\nfunction Wi(a,b){if(3===a.tag)gk(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){gk(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if(\"function\"===typeof c.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d))){a=Mi(b,a);var e=Si(c,a,1);Ag(c,e);e=Hg();c=Kj(c,1);if(null!==c)$c(c,1,e),Mj(c,e);else if(\"function\"===typeof d.componentDidCatch&&(null===Ti||!Ti.has(d)))try{d.componentDidCatch(b,a)}catch(f){}break}}c=c.return}}\nfunction Yj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=Hg();a.pingedLanes|=a.suspendedLanes&c;U===a&&(W&c)===c&&(4===V||3===V&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=c);Mj(a,b)}function lj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=a.mode,0===(b&2)?b=1:0===(b&4)?b=99===eg()?1:2:(0===Gj&&(Gj=tj),b=Yc(62914560&~Gj),0===b&&(b=4194304)));c=Hg();a=Kj(a,b);null!==a&&($c(a,b,c),Mj(a,c))}var ck;\nck=function(a,b,c){var d=b.lanes;if(null!==a)if(a.memoizedProps!==b.pendingProps||N.current)ug=!0;else if(0!==(c&d))ug=0!==(a.flags&16384)?!0:!1;else{ug=!1;switch(b.tag){case 3:ri(b);sh();break;case 5:gh(b);break;case 1:Ff(b.type)&&Jf(b);break;case 4:eh(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;var e=b.type._context;I(mg,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){if(0!==(c&b.child.childLanes))return ti(a,b,c);I(P,P.current&1);b=hi(a,b,c);return null!==\nb?b.sibling:null}I(P,P.current&1);break;case 19:d=0!==(c&b.childLanes);if(0!==(a.flags&64)){if(d)return Ai(a,b,c);b.flags|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);I(P,P.current);if(d)break;else return null;case 23:case 24:return b.lanes=0,mi(a,b,c)}return hi(a,b,c)}else ug=!1;b.lanes=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);a=b.pendingProps;e=Ef(b,M.current);tg(b,c);e=Ch(null,b,d,a,e,c);b.flags|=1;if(\"object\"===\ntypeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(Ff(d)){var f=!0;Jf(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;xg(b);var g=d.getDerivedStateFromProps;\"function\"===typeof g&&Gg(b,d,g,a);e.updater=Kg;b.stateNode=e;e._reactInternals=b;Og(b,d,a,c);b=qi(null,b,d,!0,f,c)}else b.tag=0,fi(null,b,e,c),b=b.child;return b;case 16:e=b.elementType;a:{null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2);\na=b.pendingProps;f=e._init;e=f(e._payload);b.type=e;f=b.tag=hk(e);a=lg(e,a);switch(f){case 0:b=li(null,b,e,a,c);break a;case 1:b=pi(null,b,e,a,c);break a;case 11:b=gi(null,b,e,a,c);break a;case 14:b=ii(null,b,e,lg(e.type,a),d,c);break a}throw Error(y(306,e,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),li(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),pi(a,b,d,e,c);case 3:ri(b);d=b.updateQueue;if(null===a||null===d)throw Error(y(282));\nd=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;yg(a,b);Cg(b,d,null,c);d=b.memoizedState.element;if(d===e)sh(),b=hi(a,b,c);else{e=b.stateNode;if(f=e.hydrate)kh=rf(b.stateNode.containerInfo.firstChild),jh=b,f=lh=!0;if(f){a=e.mutableSourceEagerHydrationData;if(null!=a)for(e=0;e<a.length;e+=2)f=a[e],f._workInProgressVersionPrimary=a[e+1],th.push(f);c=Zg(b,null,d,c);for(b.child=c;c;)c.flags=c.flags&-3|1024,c=c.sibling}else fi(a,b,d,c),sh();b=b.child}return b;case 5:return gh(b),null===a&&\nph(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,nf(d,e)?g=null:null!==f&&nf(d,f)&&(b.flags|=16),oi(a,b),fi(a,b,g,c),b.child;case 6:return null===a&&ph(b),null;case 13:return ti(a,b,c);case 4:return eh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Yg(b,null,d,c):fi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),gi(a,b,d,e,c);case 7:return fi(a,b,b.pendingProps,c),b.child;case 8:return fi(a,b,b.pendingProps.children,\nc),b.child;case 12:return fi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;I(mg,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=He(h,f)?0:(\"function\"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!N.current){b=hi(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var k=h.dependencies;if(null!==k){g=h.child;for(var l=\nk.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=zg(-1,c&-c),l.tag=2,Ag(h,l));h.lanes|=c;l=h.alternate;null!==l&&(l.lanes|=c);sg(h.return,c);k.lanes|=c;break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=g}fi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,tg(b,c),e=vg(e,\nf.unstable_observedBits),d=d(e),b.flags|=1,fi(a,b,d,c),b.child;case 14:return e=b.type,f=lg(e,b.pendingProps),f=lg(e.type,f),ii(a,b,e,f,d,c);case 15:return ki(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:lg(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2),b.tag=1,Ff(d)?(a=!0,Jf(b)):a=!1,tg(b,c),Mg(b,d,e),Og(b,d,e,c),qi(null,b,d,!0,a,c);case 19:return Ai(a,b,c);case 23:return mi(a,b,c);case 24:return mi(a,b,c)}throw Error(y(156,b.tag));\n};function ik(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.flags=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.childLanes=this.lanes=0;this.alternate=null}function nh(a,b,c,d){return new ik(a,b,c,d)}function ji(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction hk(a){if(\"function\"===typeof a)return ji(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Aa)return 11;if(a===Da)return 14}return 2}\nfunction Tg(a,b){var c=a.alternate;null===c?(c=nh(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.nextEffect=null,c.firstEffect=null,c.lastEffect=null);c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Vg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)ji(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ua:return Xg(c.children,e,f,b);case Ha:g=8;e|=16;break;case wa:g=8;e|=1;break;case xa:return a=nh(12,c,b,e|8),a.elementType=xa,a.type=xa,a.lanes=f,a;case Ba:return a=nh(13,c,b,e),a.type=Ba,a.elementType=Ba,a.lanes=f,a;case Ca:return a=nh(19,c,b,e),a.elementType=Ca,a.lanes=f,a;case Ia:return vi(c,e,f,b);case Ja:return a=nh(24,c,b,e),a.elementType=Ja,a.lanes=f,a;default:if(\"object\"===\ntypeof a&&null!==a)switch(a.$$typeof){case ya:g=10;break a;case za:g=9;break a;case Aa:g=11;break a;case Da:g=14;break a;case Ea:g=16;d=null;break a;case Fa:g=22;break a}throw Error(y(130,null==a?a:typeof a,\"\"));}b=nh(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Xg(a,b,c,d){a=nh(7,a,d,b);a.lanes=c;return a}function vi(a,b,c,d){a=nh(23,a,d,b);a.elementType=Ia;a.lanes=c;return a}function Ug(a,b,c){a=nh(6,a,null,b);a.lanes=c;return a}\nfunction Wg(a,b,c){b=nh(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction jk(a,b,c){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=0;this.eventTimes=Zc(0);this.expirationTimes=Zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Zc(0);this.mutableSourceEagerHydrationData=null}\nfunction kk(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ta,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction lk(a,b,c,d){var e=b.current,f=Hg(),g=Ig(e);a:if(c){c=c._reactInternals;b:{if(Zb(c)!==c||1!==c.tag)throw Error(y(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(Ff(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(y(171));}if(1===c.tag){var k=c.type;if(Ff(k)){c=If(c,k,h);break a}}c=h}else c=Cf;null===b.context?b.context=c:b.pendingContext=c;b=zg(f,g);b.payload={element:a};d=void 0===d?null:d;null!==\nd&&(b.callback=d);Ag(e,b);Jg(e,g,f);return g}function mk(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function ok(a,b){nk(a,b);(a=a.alternate)&&nk(a,b)}function pk(){return null}\nfunction qk(a,b,c){var d=null!=c&&null!=c.hydrationOptions&&c.hydrationOptions.mutableSources||null;c=new jk(a,b,null!=c&&!0===c.hydrate);b=nh(3,null,null,2===b?7:1===b?3:0);c.current=b;b.stateNode=c;xg(b);a[ff]=c.current;cf(8===a.nodeType?a.parentNode:a);if(d)for(a=0;a<d.length;a++){b=d[a];var e=b._getVersion;e=e(b._source);null==c.mutableSourceEagerHydrationData?c.mutableSourceEagerHydrationData=[b,e]:c.mutableSourceEagerHydrationData.push(b,e)}this._internalRoot=c}\nqk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;lk(null,a,null,function(){b[ff]=null})};function rk(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}\nfunction sk(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute(\"data-reactroot\")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new qk(a,0,b?{hydrate:!0}:void 0)}\nfunction tk(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;if(\"function\"===typeof e){var h=e;e=function(){var a=mk(g);h.call(a)}}lk(b,g,a,e)}else{f=c._reactRootContainer=sk(c,d);g=f._internalRoot;if(\"function\"===typeof e){var k=e;e=function(){var a=mk(g);k.call(a)}}Xj(function(){lk(b,g,a,e)})}return mk(g)}ec=function(a){if(13===a.tag){var b=Hg();Jg(a,4,b);ok(a,4)}};fc=function(a){if(13===a.tag){var b=Hg();Jg(a,67108864,b);ok(a,67108864)}};\ngc=function(a){if(13===a.tag){var b=Hg(),c=Ig(a);Jg(a,c,b);ok(a,c)}};hc=function(a,b){return b()};\nyb=function(a,b,c){switch(b){case \"input\":ab(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(y(90));Wa(d);ab(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Wj;\nHb=function(a,b,c,d,e){var f=X;X|=4;try{return gg(98,a.bind(null,b,c,d,e))}finally{X=f,0===X&&(wj(),ig())}};Ib=function(){0===(X&49)&&(Vj(),Oj())};Jb=function(a,b){var c=X;X|=2;try{return a(b)}finally{X=c,0===X&&(wj(),ig())}};function uk(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rk(b))throw Error(y(200));return kk(a,b,null,c)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:\"17.0.2\",rendererPackageName:\"react-dom\"};\nvar xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=cc(a);return null===a?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||\npk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;exports.createPortal=uk;\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(y(188));throw Error(y(268,Object.keys(a)));}a=cc(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a,b){var c=X;if(0!==(c&48))return a(b);X|=1;try{if(a)return gg(99,a.bind(null,b))}finally{X=c,ig()}};exports.hydrate=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!0,c)};\nexports.render=function(a,b,c){if(!rk(b))throw Error(y(200));return tk(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null;a[ff]=null})}),!0):!1};exports.unstable_batchedUpdates=Wj;exports.unstable_createPortal=function(a,b){return uk(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!rk(c))throw Error(y(200));if(null==a||void 0===a._reactInternals)throw Error(y(38));return tk(a,b,c,!1,d)};exports.version=\"17.0.2\";\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-dom/cjs/react-dom.production.min.js\n// module id = 28\n// module chunks = 0","'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar _css = _interopDefault(require('@emotion/css'));\nvar _extends = _interopDefault(require('@babel/runtime/helpers/extends'));\nvar _objectWithoutPropertiesLoose = _interopDefault(require('@babel/runtime/helpers/objectWithoutPropertiesLoose'));\nvar core = require('@emotion/core');\nvar react = require('react');\n\nfunction getClientPosition(e) {\n  var touches = e.touches;\n\n  if (touches && touches.length) {\n    var finger = touches[0];\n    return {\n      x: finger.clientX,\n      y: finger.clientY\n    };\n  }\n\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n}\n\nvar track = {\n  position: 'relative',\n  display: 'inline-block',\n  backgroundColor: '#ddd',\n  borderRadius: 5,\n  userSelect: 'none',\n  boxSizing: 'border-box'\n};\nvar active = {\n  position: 'absolute',\n  backgroundColor: '#5e72e4',\n  borderRadius: 5,\n  userSelect: 'none',\n  boxSizing: 'border-box'\n};\nvar thumb = {\n  position: 'relative',\n  display: 'block',\n  content: '\"\"',\n  width: 18,\n  height: 18,\n  backgroundColor: '#fff',\n  borderRadius: '50%',\n  boxShadow: '0 1px 1px rgba(0,0,0,.5)',\n  userSelect: 'none',\n  cursor: 'pointer',\n  boxSizing: 'border-box'\n};\nvar styles = {\n  x: {\n    track: _extends({}, track, {\n      width: 200,\n      height: 10\n    }),\n    active: _extends({}, active, {\n      top: 0,\n      height: '100%'\n    }),\n    thumb: _extends({}, thumb)\n  },\n  y: {\n    track: _extends({}, track, {\n      width: 10,\n      height: 200\n    }),\n    active: _extends({}, active, {\n      left: 0,\n      width: '100%'\n    }),\n    thumb: _extends({}, thumb)\n  },\n  xy: {\n    track: {\n      position: 'relative',\n      overflow: 'hidden',\n      width: 200,\n      height: 200,\n      backgroundColor: '#5e72e4',\n      borderRadius: 0\n    },\n    active: {},\n    thumb: _extends({}, thumb)\n  },\n  disabled: {\n    opacity: 0.5\n  }\n};\n\nvar Slider = function Slider(_ref) {\n  var disabled = _ref.disabled,\n      axis = _ref.axis,\n      x = _ref.x,\n      y = _ref.y,\n      xmin = _ref.xmin,\n      xmax = _ref.xmax,\n      ymin = _ref.ymin,\n      ymax = _ref.ymax,\n      xstep = _ref.xstep,\n      ystep = _ref.ystep,\n      onChange = _ref.onChange,\n      onDragStart = _ref.onDragStart,\n      onDragEnd = _ref.onDragEnd,\n      xreverse = _ref.xreverse,\n      yreverse = _ref.yreverse,\n      customStyles = _ref.styles,\n      props = _objectWithoutPropertiesLoose(_ref, [\"disabled\", \"axis\", \"x\", \"y\", \"xmin\", \"xmax\", \"ymin\", \"ymax\", \"xstep\", \"ystep\", \"onChange\", \"onDragStart\", \"onDragEnd\", \"xreverse\", \"yreverse\", \"styles\"]);\n\n  var container = react.useRef(null);\n  var handle = react.useRef(null);\n  var start = react.useRef({});\n  var offset = react.useRef({});\n\n  function getPosition() {\n    var top = (y - ymin) / (ymax - ymin) * 100;\n    var left = (x - xmin) / (xmax - xmin) * 100;\n    if (top > 100) top = 100;\n    if (top < 0) top = 0;\n    if (axis === 'x') top = 0;\n    if (left > 100) left = 100;\n    if (left < 0) left = 0;\n    if (axis === 'y') left = 0;\n    return {\n      top: top,\n      left: left\n    };\n  }\n\n  function change(_ref2) {\n    var top = _ref2.top,\n        left = _ref2.left;\n    if (!onChange) return;\n\n    var _container$current$ge = container.current.getBoundingClientRect(),\n        width = _container$current$ge.width,\n        height = _container$current$ge.height;\n\n    var dx = 0;\n    var dy = 0;\n    if (left < 0) left = 0;\n    if (left > width) left = width;\n    if (top < 0) top = 0;\n    if (top > height) top = height;\n\n    if (axis === 'x' || axis === 'xy') {\n      dx = left / width * (xmax - xmin);\n    }\n\n    if (axis === 'y' || axis === 'xy') {\n      dy = top / height * (ymax - ymin);\n    }\n\n    var x = (dx !== 0 ? parseInt(dx / xstep, 10) * xstep : 0) + xmin;\n    var y = (dy !== 0 ? parseInt(dy / ystep, 10) * ystep : 0) + ymin;\n    onChange({\n      x: xreverse ? xmax - x + xmin : x,\n      y: yreverse ? ymax - y + ymin : y\n    });\n  }\n\n  function handleMouseDown(e) {\n    if (disabled) return;\n    e.preventDefault();\n    e.stopPropagation();\n    e.nativeEvent.stopImmediatePropagation();\n    var dom = handle.current;\n    var clientPos = getClientPosition(e);\n    start.current = {\n      x: dom.offsetLeft,\n      y: dom.offsetTop\n    };\n    offset.current = {\n      x: clientPos.x,\n      y: clientPos.y\n    };\n    document.addEventListener('mousemove', handleDrag);\n    document.addEventListener('mouseup', handleDragEnd);\n    document.addEventListener('touchmove', handleDrag, {\n      passive: false\n    });\n    document.addEventListener('touchend', handleDragEnd);\n    document.addEventListener('touchcancel', handleDragEnd);\n\n    if (onDragStart) {\n      onDragStart(e);\n    }\n  }\n\n  function getPos(e) {\n    var clientPos = getClientPosition(e);\n    var left = clientPos.x + start.current.x - offset.current.x;\n    var top = clientPos.y + start.current.y - offset.current.y;\n    return {\n      left: left,\n      top: top\n    };\n  }\n\n  function handleDrag(e) {\n    if (disabled) return;\n    e.preventDefault();\n    change(getPos(e));\n  }\n\n  function handleDragEnd(e) {\n    if (disabled) return;\n    e.preventDefault();\n    document.removeEventListener('mousemove', handleDrag);\n    document.removeEventListener('mouseup', handleDragEnd);\n    document.removeEventListener('touchmove', handleDrag, {\n      passive: false\n    });\n    document.removeEventListener('touchend', handleDragEnd);\n    document.removeEventListener('touchcancel', handleDragEnd);\n\n    if (onDragEnd) {\n      onDragEnd(e);\n    }\n  }\n\n  function handleTrackMouseDown(e) {\n    if (disabled) return;\n    e.preventDefault();\n    var clientPos = getClientPosition(e);\n    var rect = container.current.getBoundingClientRect();\n    start.current = {\n      x: clientPos.x - rect.left,\n      y: clientPos.y - rect.top\n    };\n    offset.current = {\n      x: clientPos.x,\n      y: clientPos.y\n    };\n    document.addEventListener('mousemove', handleDrag);\n    document.addEventListener('mouseup', handleDragEnd);\n    document.addEventListener('touchmove', handleDrag, {\n      passive: false\n    });\n    document.addEventListener('touchend', handleDragEnd);\n    document.addEventListener('touchcancel', handleDragEnd);\n    change({\n      left: clientPos.x - rect.left,\n      top: clientPos.y - rect.top\n    });\n\n    if (onDragStart) {\n      onDragStart(e);\n    }\n  }\n\n  var pos = getPosition();\n  var valueStyle = {};\n  if (axis === 'x') valueStyle.width = pos.left + '%';\n  if (axis === 'y') valueStyle.height = pos.top + '%';\n  if (xreverse) valueStyle.left = 100 - pos.left + '%';\n  if (yreverse) valueStyle.top = 100 - pos.top + '%';\n  var handleStyle = {\n    position: 'absolute',\n    transform: 'translate(-50%, -50%)',\n    left: xreverse ? 100 - pos.left + '%' : pos.left + '%',\n    top: yreverse ? 100 - pos.top + '%' : pos.top + '%'\n  };\n\n  if (axis === 'x') {\n    handleStyle.top = '50%';\n  } else if (axis === 'y') {\n    handleStyle.left = '50%';\n  }\n\n  var styles$1 = {\n    track: _extends({}, styles[axis].track, {}, customStyles.track),\n    active: _extends({}, styles[axis].active, {}, customStyles.active),\n    thumb: _extends({}, styles[axis].thumb, {}, customStyles.thumb),\n    disabled: _extends({}, styles.disabled, {}, customStyles.disabled)\n  };\n  return core.jsx(\"div\", _extends({}, props, {\n    ref: container,\n    css: /*#__PURE__*/_css([styles$1.track, disabled && styles$1.disabled], \";label:Slider;\" + (process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNsaWRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5TU0iLCJmaWxlIjoic2xpZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqIEBqc3gganN4ICovXG5pbXBvcnQgeyBqc3ggfSBmcm9tICdAZW1vdGlvbi9jb3JlJztcbmltcG9ydCB7IHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdldENsaWVudFBvc2l0aW9uIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgZGVmYXVsdFN0eWxlcyBmcm9tICcuL3N0eWxlcyc7XG5cbmNvbnN0IFNsaWRlciA9ICh7XG4gIGRpc2FibGVkLFxuICBheGlzLFxuICB4LFxuICB5LFxuICB4bWluLFxuICB4bWF4LFxuICB5bWluLFxuICB5bWF4LFxuICB4c3RlcCxcbiAgeXN0ZXAsXG4gIG9uQ2hhbmdlLFxuICBvbkRyYWdTdGFydCxcbiAgb25EcmFnRW5kLFxuICB4cmV2ZXJzZSxcbiAgeXJldmVyc2UsXG4gIHN0eWxlczogY3VzdG9tU3R5bGVzLFxuICAuLi5wcm9wc1xufSkgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGhhbmRsZSA9IHVzZVJlZihudWxsKTtcbiAgY29uc3Qgc3RhcnQgPSB1c2VSZWYoe30pO1xuICBjb25zdCBvZmZzZXQgPSB1c2VSZWYoe30pO1xuXG4gIGZ1bmN0aW9uIGdldFBvc2l0aW9uKCkge1xuICAgIGxldCB0b3AgPSAoKHkgLSB5bWluKSAvICh5bWF4IC0geW1pbikpICogMTAwO1xuICAgIGxldCBsZWZ0ID0gKCh4IC0geG1pbikgLyAoeG1heCAtIHhtaW4pKSAqIDEwMDtcblxuICAgIGlmICh0b3AgPiAxMDApIHRvcCA9IDEwMDtcbiAgICBpZiAodG9wIDwgMCkgdG9wID0gMDtcbiAgICBpZiAoYXhpcyA9PT0gJ3gnKSB0b3AgPSAwO1xuXG4gICAgaWYgKGxlZnQgPiAxMDApIGxlZnQgPSAxMDA7XG4gICAgaWYgKGxlZnQgPCAwKSBsZWZ0ID0gMDtcbiAgICBpZiAoYXhpcyA9PT0gJ3knKSBsZWZ0ID0gMDtcblxuICAgIHJldHVybiB7IHRvcCwgbGVmdCB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY2hhbmdlKHsgdG9wLCBsZWZ0IH0pIHtcbiAgICBpZiAoIW9uQ2hhbmdlKSByZXR1cm47XG5cbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGNvbnRhaW5lci5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGxldCBkeCA9IDA7XG4gICAgbGV0IGR5ID0gMDtcblxuICAgIGlmIChsZWZ0IDwgMCkgbGVmdCA9IDA7XG4gICAgaWYgKGxlZnQgPiB3aWR0aCkgbGVmdCA9IHdpZHRoO1xuICAgIGlmICh0b3AgPCAwKSB0b3AgPSAwO1xuICAgIGlmICh0b3AgPiBoZWlnaHQpIHRvcCA9IGhlaWdodDtcblxuICAgIGlmIChheGlzID09PSAneCcgfHwgYXhpcyA9PT0gJ3h5Jykge1xuICAgICAgZHggPSAobGVmdCAvIHdpZHRoKSAqICh4bWF4IC0geG1pbik7XG4gICAgfVxuXG4gICAgaWYgKGF4aXMgPT09ICd5JyB8fCBheGlzID09PSAneHknKSB7XG4gICAgICBkeSA9ICh0b3AgLyBoZWlnaHQpICogKHltYXggLSB5bWluKTtcbiAgICB9XG5cbiAgICBjb25zdCB4ID0gKGR4ICE9PSAwID8gcGFyc2VJbnQoZHggLyB4c3RlcCwgMTApICogeHN0ZXAgOiAwKSArIHhtaW47XG4gICAgY29uc3QgeSA9IChkeSAhPT0gMCA/IHBhcnNlSW50KGR5IC8geXN0ZXAsIDEwKSAqIHlzdGVwIDogMCkgKyB5bWluO1xuXG4gICAgb25DaGFuZ2Uoe1xuICAgICAgeDogeHJldmVyc2UgPyB4bWF4IC0geCArIHhtaW4gOiB4LFxuICAgICAgeTogeXJldmVyc2UgPyB5bWF4IC0geSArIHltaW4gOiB5XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVNb3VzZURvd24oZSkge1xuICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZS5uYXRpdmVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICBjb25zdCBkb20gPSBoYW5kbGUuY3VycmVudDtcbiAgICBjb25zdCBjbGllbnRQb3MgPSBnZXRDbGllbnRQb3NpdGlvbihlKTtcblxuICAgIHN0YXJ0LmN1cnJlbnQgPSB7XG4gICAgICB4OiBkb20ub2Zmc2V0TGVmdCxcbiAgICAgIHk6IGRvbS5vZmZzZXRUb3BcbiAgICB9O1xuXG4gICAgb2Zmc2V0LmN1cnJlbnQgPSB7XG4gICAgICB4OiBjbGllbnRQb3MueCxcbiAgICAgIHk6IGNsaWVudFBvcy55XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZURyYWcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBoYW5kbGVEcmFnLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaGFuZGxlRHJhZ0VuZCk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBoYW5kbGVEcmFnRW5kKTtcblxuICAgIGlmIChvbkRyYWdTdGFydCkge1xuICAgICAgb25EcmFnU3RhcnQoZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UG9zKGUpIHtcbiAgICBjb25zdCBjbGllbnRQb3MgPSBnZXRDbGllbnRQb3NpdGlvbihlKTtcbiAgICBjb25zdCBsZWZ0ID0gY2xpZW50UG9zLnggKyBzdGFydC5jdXJyZW50LnggLSBvZmZzZXQuY3VycmVudC54O1xuICAgIGNvbnN0IHRvcCA9IGNsaWVudFBvcy55ICsgc3RhcnQuY3VycmVudC55IC0gb2Zmc2V0LmN1cnJlbnQueTtcblxuICAgIHJldHVybiB7IGxlZnQsIHRvcCB9O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlRHJhZyhlKSB7XG4gICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2hhbmdlKGdldFBvcyhlKSk7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVEcmFnRW5kKGUpIHtcbiAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBoYW5kbGVEcmFnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaGFuZGxlRHJhZ0VuZCk7XG5cbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBoYW5kbGVEcmFnLCB7XG4gICAgICBwYXNzaXZlOiBmYWxzZVxuICAgIH0pO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaGFuZGxlRHJhZ0VuZCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBoYW5kbGVEcmFnRW5kKTtcblxuICAgIGlmIChvbkRyYWdFbmQpIHtcbiAgICAgIG9uRHJhZ0VuZChlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVUcmFja01vdXNlRG93bihlKSB7XG4gICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgY2xpZW50UG9zID0gZ2V0Q2xpZW50UG9zaXRpb24oZSk7XG4gICAgY29uc3QgcmVjdCA9IGNvbnRhaW5lci5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgc3RhcnQuY3VycmVudCA9IHtcbiAgICAgIHg6IGNsaWVudFBvcy54IC0gcmVjdC5sZWZ0LFxuICAgICAgeTogY2xpZW50UG9zLnkgLSByZWN0LnRvcFxuICAgIH07XG5cbiAgICBvZmZzZXQuY3VycmVudCA9IHtcbiAgICAgIHg6IGNsaWVudFBvcy54LFxuICAgICAgeTogY2xpZW50UG9zLnlcbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlRHJhZyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZURyYWdFbmQpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGhhbmRsZURyYWcsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBoYW5kbGVEcmFnRW5kKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIGhhbmRsZURyYWdFbmQpO1xuXG4gICAgY2hhbmdlKHtcbiAgICAgIGxlZnQ6IGNsaWVudFBvcy54IC0gcmVjdC5sZWZ0LFxuICAgICAgdG9wOiBjbGllbnRQb3MueSAtIHJlY3QudG9wXG4gICAgfSk7XG5cbiAgICBpZiAob25EcmFnU3RhcnQpIHtcbiAgICAgIG9uRHJhZ1N0YXJ0KGUpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHBvcyA9IGdldFBvc2l0aW9uKCk7XG4gIGNvbnN0IHZhbHVlU3R5bGUgPSB7fTtcbiAgaWYgKGF4aXMgPT09ICd4JykgdmFsdWVTdHlsZS53aWR0aCA9IHBvcy5sZWZ0ICsgJyUnO1xuICBpZiAoYXhpcyA9PT0gJ3knKSB2YWx1ZVN0eWxlLmhlaWdodCA9IHBvcy50b3AgKyAnJSc7XG4gIGlmICh4cmV2ZXJzZSkgdmFsdWVTdHlsZS5sZWZ0ID0gMTAwIC0gcG9zLmxlZnQgKyAnJSc7XG4gIGlmICh5cmV2ZXJzZSkgdmFsdWVTdHlsZS50b3AgPSAxMDAgLSBwb3MudG9wICsgJyUnO1xuXG4gIGNvbnN0IGhhbmRsZVN0eWxlID0ge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG4gICAgbGVmdDogeHJldmVyc2UgPyAxMDAgLSBwb3MubGVmdCArICclJyA6IHBvcy5sZWZ0ICsgJyUnLFxuICAgIHRvcDogeXJldmVyc2UgPyAxMDAgLSBwb3MudG9wICsgJyUnIDogcG9zLnRvcCArICclJ1xuICB9O1xuXG4gIGlmIChheGlzID09PSAneCcpIHtcbiAgICBoYW5kbGVTdHlsZS50b3AgPSAnNTAlJztcbiAgfSBlbHNlIGlmIChheGlzID09PSAneScpIHtcbiAgICBoYW5kbGVTdHlsZS5sZWZ0ID0gJzUwJSc7XG4gIH1cblxuICBjb25zdCBzdHlsZXMgPSB7XG4gICAgdHJhY2s6IHsgLi4uZGVmYXVsdFN0eWxlc1theGlzXS50cmFjaywgLi4uY3VzdG9tU3R5bGVzLnRyYWNrIH0sXG4gICAgYWN0aXZlOiB7IC4uLmRlZmF1bHRTdHlsZXNbYXhpc10uYWN0aXZlLCAuLi5jdXN0b21TdHlsZXMuYWN0aXZlIH0sXG4gICAgdGh1bWI6IHsgLi4uZGVmYXVsdFN0eWxlc1theGlzXS50aHVtYiwgLi4uY3VzdG9tU3R5bGVzLnRodW1iIH0sXG4gICAgZGlzYWJsZWQ6IHsgLi4uZGVmYXVsdFN0eWxlcy5kaXNhYmxlZCwgLi4uY3VzdG9tU3R5bGVzLmRpc2FibGVkIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIHsuLi5wcm9wc31cbiAgICAgIHJlZj17Y29udGFpbmVyfVxuICAgICAgY3NzPXtbc3R5bGVzLnRyYWNrLCBkaXNhYmxlZCAmJiBzdHlsZXMuZGlzYWJsZWRdfVxuICAgICAgb25Ub3VjaFN0YXJ0PXtoYW5kbGVUcmFja01vdXNlRG93bn1cbiAgICAgIG9uTW91c2VEb3duPXtoYW5kbGVUcmFja01vdXNlRG93bn1cbiAgICA+XG4gICAgICA8ZGl2IGNzcz17c3R5bGVzLmFjdGl2ZX0gc3R5bGU9e3ZhbHVlU3R5bGV9IC8+XG4gICAgICA8ZGl2XG4gICAgICAgIHJlZj17aGFuZGxlfVxuICAgICAgICBzdHlsZT17aGFuZGxlU3R5bGV9XG4gICAgICAgIG9uVG91Y2hTdGFydD17aGFuZGxlTW91c2VEb3dufVxuICAgICAgICBvbk1vdXNlRG93bj17aGFuZGxlTW91c2VEb3dufVxuICAgICAgICBvbkNsaWNrPXtmdW5jdGlvbihlKSB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLm5hdGl2ZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8ZGl2IGNzcz17c3R5bGVzLnRodW1ifSAvPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5TbGlkZXIuZGVmYXVsdFByb3BzID0ge1xuICBkaXNhYmxlZDogZmFsc2UsXG4gIGF4aXM6ICd4JyxcbiAgeDogNTAsXG4gIHhtaW46IDAsXG4gIHhtYXg6IDEwMCxcbiAgeTogNTAsXG4gIHltaW46IDAsXG4gIHltYXg6IDEwMCxcbiAgeHN0ZXA6IDEsXG4gIHlzdGVwOiAxLFxuICB4cmV2ZXJzZTogZmFsc2UsXG4gIHlyZXZlcnNlOiBmYWxzZSxcbiAgc3R5bGVzOiB7fVxufTtcblxuZXhwb3J0IGRlZmF1bHQgU2xpZGVyO1xuIl19 */\")),\n    onTouchStart: handleTrackMouseDown,\n    onMouseDown: handleTrackMouseDown\n  }), core.jsx(\"div\", {\n    css: styles$1.active,\n    style: valueStyle\n  }), core.jsx(\"div\", {\n    ref: handle,\n    style: handleStyle,\n    onTouchStart: handleMouseDown,\n    onMouseDown: handleMouseDown,\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      e.nativeEvent.stopImmediatePropagation();\n    }\n  }, core.jsx(\"div\", {\n    css: styles$1.thumb\n  })));\n};\n\nSlider.defaultProps = {\n  disabled: false,\n  axis: 'x',\n  x: 50,\n  xmin: 0,\n  xmax: 100,\n  y: 50,\n  ymin: 0,\n  ymax: 100,\n  xstep: 1,\n  ystep: 1,\n  xreverse: false,\n  yreverse: false,\n  styles: {}\n};\n\nmodule.exports = Slider;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-input-slider/dist/index.cjs.js\n// module id = 29\n// module chunks = 0","/** @license React v17.0.2\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=require(\"object-assign\"),n=60103,p=60106;exports.Fragment=60107;exports.StrictMode=60108;exports.Profiler=60114;var q=60109,r=60110,t=60112;exports.Suspense=60113;var u=60115,v=60116;\nif(\"function\"===typeof Symbol&&Symbol.for){var w=Symbol.for;n=w(\"react.element\");p=w(\"react.portal\");exports.Fragment=w(\"react.fragment\");exports.StrictMode=w(\"react.strict_mode\");exports.Profiler=w(\"react.profiler\");q=w(\"react.provider\");r=w(\"react.context\");t=w(\"react.forward_ref\");exports.Suspense=w(\"react.suspense\");u=w(\"react.memo\");v=w(\"react.lazy\")}var x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){if(null===a||\"object\"!==typeof a)return null;a=x&&a[x]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}function z(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B={};function C(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(z(85));this.updater.enqueueSetState(this,a,b,\"setState\")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction D(){}D.prototype=C.prototype;function E(a,b,c){this.props=a;this.context=b;this.refs=B;this.updater=c||A}var F=E.prototype=new D;F.constructor=E;l(F,C.prototype);F.isPureReactComponent=!0;var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,c){var e,d={},k=null,h=null;if(null!=b)for(e in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)H.call(b,e)&&!I.hasOwnProperty(e)&&(d[e]=b[e]);var g=arguments.length-2;if(1===g)d.children=c;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];d.children=f}if(a&&a.defaultProps)for(e in g=a.defaultProps,g)void 0===d[e]&&(d[e]=g[e]);return{$$typeof:n,type:a,key:k,ref:h,props:d,_owner:G.current}}\nfunction K(a,b){return{$$typeof:n,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===n}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var M=/\\/+/g;function N(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction O(a,b,c,e,d){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case n:case p:h=!0}}if(h)return h=a,d=d(h),a=\"\"===e?\".\"+N(h,0):e,Array.isArray(d)?(c=\"\",null!=a&&(c=a.replace(M,\"$&/\")+\"/\"),O(d,b,c,\"\",function(a){return a})):null!=d&&(L(d)&&(d=K(d,c+(!d.key||h&&h.key===d.key?\"\":(\"\"+d.key).replace(M,\"$&/\")+\"/\")+a)),b.push(d)),1;h=0;e=\"\"===e?\".\":e+\":\";if(Array.isArray(a))for(var g=\n0;g<a.length;g++){k=a[g];var f=e+N(k,g);h+=O(k,b,c,f,d)}else if(f=y(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=e+N(k,g++),h+=O(k,b,c,f,d);else if(\"object\"===k)throw b=\"\"+a,Error(z(31,\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b));return h}function P(a,b,c){if(null==a)return a;var e=[],d=0;O(a,e,\"\",\"\",function(a){return b.call(c,a,d++)});return e}\nfunction Q(a){if(-1===a._status){var b=a._result;b=b();a._status=0;a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}if(1===a._status)return a._result;throw a._result;}var R={current:null};function S(){var a=R.current;if(null===a)throw Error(z(321));return a}var T={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:l};\nexports.Children={map:P,forEach:function(a,b,c){P(a,function(){b.apply(this,arguments)},c)},count:function(a){var b=0;P(a,function(){b++});return b},toArray:function(a){return P(a,function(a){return a})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};exports.Component=C;exports.PureComponent=E;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(z(267,a));var e=l({},a.props),d=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)H.call(b,f)&&!I.hasOwnProperty(f)&&(e[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)e.children=c;else if(1<f){g=Array(f);for(var m=0;m<f;m++)g[m]=arguments[m+2];e.children=g}return{$$typeof:n,type:a.type,\nkey:d,ref:k,props:e,_owner:h}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:r,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:q,_context:a};return a.Consumer=a};exports.createElement=J;exports.createFactory=function(a){var b=J.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:t,render:a}};exports.isValidElement=L;\nexports.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};exports.memo=function(a,b){return{$$typeof:u,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return S().useCallback(a,b)};exports.useContext=function(a,b){return S().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return S().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return S().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return S().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return S().useMemo(a,b)};exports.useReducer=function(a,b,c){return S().useReducer(a,b,c)};exports.useRef=function(a){return S().useRef(a)};exports.useState=function(a){return S().useState(a)};exports.version=\"17.0.2\";\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react/cjs/react.production.min.js\n// module id = 30\n// module chunks = 0","/** @license React v0.20.2\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f,g,h,k;if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var t=null,u=null,w=function(){if(null!==t)try{var a=exports.unstable_now();t(!0,a);t=null}catch(b){throw setTimeout(w,0),b;}};f=function(a){null!==t?setTimeout(f,0,a):(t=a,setTimeout(w,0))};g=function(a,b){u=setTimeout(a,b)};h=function(){clearTimeout(u)};exports.unstable_shouldYield=function(){return!1};k=exports.unstable_forceFrameRate=function(){}}else{var x=window.setTimeout,y=window.clearTimeout;if(\"undefined\"!==typeof console){var z=\nwindow.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\");\"function\"!==typeof z&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills\")}var A=!1,B=null,C=-1,D=5,E=0;exports.unstable_shouldYield=function(){return exports.unstable_now()>=\nE};k=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):D=0<a?Math.floor(1E3/a):5};var F=new MessageChannel,G=F.port2;F.port1.onmessage=function(){if(null!==B){var a=exports.unstable_now();E=a+D;try{B(!0,a)?G.postMessage(null):(A=!1,B=null)}catch(b){throw G.postMessage(null),b;}}else A=!1};f=function(a){B=a;A||(A=!0,G.postMessage(null))};g=function(a,b){C=\nx(function(){a(exports.unstable_now())},b)};h=function(){y(C);C=-1}}function H(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<I(e,b))a[d]=b,a[c]=e,c=d;else break a}}function J(a){a=a[0];return void 0===a?null:a}\nfunction K(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>I(n,c))void 0!==r&&0>I(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>I(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function I(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var L=[],M=[],N=1,O=null,P=3,Q=!1,R=!1,S=!1;\nfunction T(a){for(var b=J(M);null!==b;){if(null===b.callback)K(M);else if(b.startTime<=a)K(M),b.sortIndex=b.expirationTime,H(L,b);else break;b=J(M)}}function U(a){S=!1;T(a);if(!R)if(null!==J(L))R=!0,f(V);else{var b=J(M);null!==b&&g(U,b.startTime-a)}}\nfunction V(a,b){R=!1;S&&(S=!1,h());Q=!0;var c=P;try{T(b);for(O=J(L);null!==O&&(!(O.expirationTime>b)||a&&!exports.unstable_shouldYield());){var d=O.callback;if(\"function\"===typeof d){O.callback=null;P=O.priorityLevel;var e=d(O.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?O.callback=e:O===J(L)&&K(L);T(b)}else K(L);O=J(L)}if(null!==O)var m=!0;else{var n=J(M);null!==n&&g(U,n.startTime-b);m=!1}return m}finally{O=null,P=c,Q=!1}}var W=k;exports.unstable_IdlePriority=5;\nexports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){R||Q||(R=!0,f(V))};exports.unstable_getCurrentPriorityLevel=function(){return P};exports.unstable_getFirstCallbackNode=function(){return J(L)};\nexports.unstable_next=function(a){switch(P){case 1:case 2:case 3:var b=3;break;default:b=P}var c=P;P=b;try{return a()}finally{P=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=W;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=P;P=a;try{return b()}finally{P=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:N++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,H(M,a),null===J(L)&&a===J(M)&&(S?h():S=!0,g(U,c-d))):(a.sortIndex=e,H(L,a),R||Q||(R=!0,f(V)));return a};\nexports.unstable_wrapCallback=function(a){var b=P;return function(){var c=P;P=b;try{return a.apply(this,arguments)}finally{P=c}}};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/scheduler/cjs/scheduler.production.min.js\n// module id = 31\n// module chunks = 0","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/scheduler/index.js\n// module id = 32\n// module chunks = 0","module.exports = function(THREE) {\n\tvar MOUSE = THREE.MOUSE\n\tif (!MOUSE)\n\t\tMOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\n\t/**\n\t * @author qiao / https://github.com/qiao\n\t * @author mrdoob / http://mrdoob.com\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author erich666 / http://erichaines.com\n\t */\n\t/*global THREE, console */\n\n\tfunction OrbitConstraint ( object ) {\n\n\t\tthis.object = object;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\t// and where it pans with respect to.\n\t\tthis.target = new THREE.Vector3();\n\n\t\t// Limits to how far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// Limits to how far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.25;\n\n\t\t////////////\n\t\t// internals\n\n\t\tvar scope = this;\n\n\t\tvar EPS = 0.000001;\n\n\t\t// Current position in spherical coordinate system.\n\t\tvar theta;\n\t\tvar phi;\n\n\t\t// Pending changes\n\t\tvar phiDelta = 0;\n\t\tvar thetaDelta = 0;\n\t\tvar scale = 1;\n\t\tvar panOffset = new THREE.Vector3();\n\t\tvar zoomChanged = false;\n\n\t\t// API\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn theta;\n\n\t\t};\n\n\t\tthis.rotateLeft = function ( angle ) {\n\n\t\t\tthetaDelta -= angle;\n\n\t\t};\n\n\t\tthis.rotateUp = function ( angle ) {\n\n\t\t\tphiDelta -= angle;\n\n\t\t};\n\n\t\t// pass in distance in world space to move left\n\t\tthis.panLeft = function() {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t\treturn function panLeft ( distance ) {\n\n\t\t\t\tvar te = this.object.matrix.elements;\n\n\t\t\t\t// get X column of matrix\n\t\t\t\tv.set( te[ 0 ], te[ 1 ], te[ 2 ] );\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// pass in distance in world space to move up\n\t\tthis.panUp = function() {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t\treturn function panUp ( distance ) {\n\n\t\t\t\tvar te = this.object.matrix.elements;\n\n\t\t\t\t// get Y column of matrix\n\t\t\t\tv.set( te[ 4 ], te[ 5 ], te[ 6 ] );\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// pass in x,y of change desired in pixel space,\n\t\t// right and down are positive\n\t\tthis.pan = function ( deltaX, deltaY, screenWidth, screenHeight ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\tvar offset = position.clone().sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\tscope.panLeft( 2 * deltaX * targetDistance / screenHeight );\n\t\t\t\tscope.panUp( 2 * deltaY * targetDistance / screenHeight );\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tscope.panLeft( deltaX * ( scope.object.right - scope.object.left ) / screenWidth );\n\t\t\t\tscope.panUp( deltaY * ( scope.object.top - scope.object.bottom ) / screenHeight );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic or perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.dollyIn = function ( dollyScale ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.dollyOut = function ( dollyScale ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.update = function() {\n\n\t\t\tvar offset = new THREE.Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\t\tvar quatInverse = quat.clone().inverse();\n\n\t\t\tvar lastPosition = new THREE.Vector3();\n\t\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\t\treturn function () {\n\n\t\t\t\tvar position = this.object.position;\n\n\t\t\t\toffset.copy( position ).sub( this.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\n\t\t\t\ttheta = Math.atan2( offset.x, offset.z );\n\n\t\t\t\t// angle from y-axis\n\n\t\t\t\tphi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );\n\n\t\t\t\ttheta += thetaDelta;\n\t\t\t\tphi += phiDelta;\n\n\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\ttheta = Math.max( this.minAzimuthAngle, Math.min( this.maxAzimuthAngle, theta ) );\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tphi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, phi ) );\n\n\t\t\t\t// restrict phi to be betwee EPS and PI-EPS\n\t\t\t\tphi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );\n\n\t\t\t\tvar radius = offset.length() * scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tradius = Math.max( this.minDistance, Math.min( this.maxDistance, radius ) );\n\n\t\t\t\t// move target to panned location\n\t\t\t\tthis.target.add( panOffset );\n\n\t\t\t\toffset.x = radius * Math.sin( phi ) * Math.sin( theta );\n\t\t\t\toffset.y = radius * Math.cos( phi );\n\t\t\t\toffset.z = radius * Math.sin( phi ) * Math.cos( theta );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( this.target ).add( offset );\n\n\t\t\t\tthis.object.lookAt( this.target );\n\n\t\t\t\tif ( this.enableDamping === true ) {\n\n\t\t\t\t\tthetaDelta *= ( 1 - this.dampingFactor );\n\t\t\t\t\tphiDelta *= ( 1 - this.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthetaDelta = 0;\n\t\t\t\t\tphiDelta = 0;\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\t lastPosition.distanceToSquared( this.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( this.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tlastPosition.copy( this.object.position );\n\t\t\t\t\tlastQuaternion.copy( this.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t};\n\n\n\t// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n\t// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n\t// supported.\n\t//\n\t//    Orbit - left mouse / touch: one finger move\n\t//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n\t//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\n\tfunction OrbitControls ( object, domElement ) {\n\n\t\tvar constraint = new OrbitConstraint( object );\n\n\t\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t\t// API\n\n\t\tObject.defineProperty( this, 'constraint', {\n\n\t\t\tget: function() {\n\n\t\t\t\treturn constraint;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn constraint.getPolarAngle();\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn constraint.getAzimuthalAngle();\n\n\t\t};\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// center is old, deprecated; use \"target\" instead\n\t\tthis.center = this.target;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for\n\t\t// backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t\t// Set to false to disable use of the keys\n\t\tthis.enableKeys = true;\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t\t////////////\n\t\t// internals\n\n\t\tvar scope = this;\n\n\t\tvar rotateStart = new THREE.Vector2();\n\t\tvar rotateEnd = new THREE.Vector2();\n\t\tvar rotateDelta = new THREE.Vector2();\n\n\t\tvar panStart = new THREE.Vector2();\n\t\tvar panEnd = new THREE.Vector2();\n\t\tvar panDelta = new THREE.Vector2();\n\n\t\tvar dollyStart = new THREE.Vector2();\n\t\tvar dollyEnd = new THREE.Vector2();\n\t\tvar dollyDelta = new THREE.Vector2();\n\n\t\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\n\t\tvar state = STATE.NONE;\n\n\t\t// for reset\n\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// events\n\n\t\tvar changeEvent = { type: 'change' };\n\t\tvar startEvent = { type: 'start' };\n\t\tvar endEvent = { type: 'end' };\n\n\t\t// pass in x,y of change desired in pixel space,\n\t\t// right and down are positive\n\t\tfunction pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tconstraint.pan( deltaX, deltaY, element.clientWidth, element.clientHeight );\n\n\t\t}\n\n\t\tthis.update = function () {\n\n\t\t\tif ( this.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\tconstraint.rotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( constraint.update() === true ) {\n\n\t\t\t\tthis.dispatchEvent( changeEvent );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tstate = STATE.NONE;\n\n\t\t\tthis.target.copy( this.target0 );\n\t\t\tthis.object.position.copy( this.position0 );\n\t\t\tthis.object.zoom = this.zoom0;\n\n\t\t\tthis.object.updateProjectionMatrix();\n\t\t\tthis.dispatchEvent( changeEvent );\n\n\t\t\tthis.update();\n\n\t\t};\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\t\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( state === STATE.ROTATE ) {\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\t} else if ( state === STATE.DOLLY ) {\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\n\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\n\t\t\t\t}\n\n\t\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\t} else if ( state === STATE.PAN ) {\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\tpanEnd.set( event.clientX, event.clientY );\n\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\t\tpanStart.copy( panEnd );\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) scope.update();\n\n\t\t}\n\n\t\tfunction onMouseUp( /* event */ ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\t\tscope.dispatchEvent( endEvent );\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar delta = 0;\n\n\t\t\tif ( event.wheelDelta !== undefined ) {\n\n\t\t\t\t// WebKit / Opera / Explorer 9\n\n\t\t\t\tdelta = event.wheelDelta;\n\n\t\t\t} else if ( event.detail !== undefined ) {\n\n\t\t\t\t// Firefox\n\n\t\t\t\tdelta = - event.detail;\n\n\t\t\t}\n\n\t\t\tif ( delta > 0 ) {\n\n\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\n\t\t\t} else if ( delta < 0 ) {\n\n\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\t\t\tscope.dispatchEvent( startEvent );\n\t\t\tscope.dispatchEvent( endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\t\tswitch ( event.keyCode ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction touchstart( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\t\tdollyStart.set( 0, distance );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) scope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t\tfunction touchmove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return;\n\n\t\t\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return;\n\n\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\t\tdollyEnd.set( 0, distance );\n\t\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\n\t\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return;\n\n\t\t\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\t\t\tpanStart.copy( panEnd );\n\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction touchend( /* event */ ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tscope.dispatchEvent( endEvent );\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction contextmenu( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tthis.dispose = function() {\n\n\t\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\t\tthis.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\t\tthis.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );\n\t\t\tthis.domElement.removeEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\n\t\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t}\n\n\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\n\t\tthis.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\t\tthis.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\n\t\tthis.domElement.addEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\n\t\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\t\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\t\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\t\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t\t// force an update at start\n\t\tthis.update();\n\n\t};\n\n\tOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\n\tOrbitControls.prototype.constructor = OrbitControls;\n\n\tObject.defineProperties( OrbitControls.prototype, {\n\n\t\tobject: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.object;\n\n\t\t\t}\n\n\t\t},\n\n\t\ttarget: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.target;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: target is now immutable. Use target.set() instead.' );\n\t\t\t\tthis.constraint.target.copy( value );\n\n\t\t\t}\n\n\t\t},\n\n\t\tminDistance : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minDistance;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minDistance = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxDistance : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxDistance;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxDistance = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tminZoom : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minZoom = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxZoom : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxZoom = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tminPolarAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minPolarAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minPolarAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxPolarAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxPolarAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxPolarAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tminAzimuthAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minAzimuthAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minAzimuthAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxAzimuthAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxAzimuthAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxAzimuthAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tenableDamping : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.enableDamping;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.enableDamping = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdampingFactor : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.dampingFactor;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.dampingFactor = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\t// backward compatibility\n\n\t\tnoZoom: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\treturn ! this.enableZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\tthis.enableZoom = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoRotate: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\treturn ! this.enableRotate;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\tthis.enableRotate = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoPan: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\treturn ! this.enablePan;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\tthis.enablePan = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoKeys: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\treturn ! this.enableKeys;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\tthis.enableKeys = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tstaticMoving : {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\treturn ! this.constraint.enableDamping;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\tthis.constraint.enableDamping = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdynamicDampingFactor : {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\treturn this.constraint.dampingFactor;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\tthis.constraint.dampingFactor = value;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\treturn OrbitControls;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/three-orbit-controls/index.js\n// module id = 33\n// module chunks = 0","var self = self || {};// File:src/Three.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nvar THREE = { REVISION: '72' };\r\n\r\n//\r\n\r\nif ( typeof define === 'function' && define.amd ) {\r\n\r\n\t\tdefine( 'three', THREE );\r\n\r\n} else if ( 'undefined' !== typeof exports && 'undefined' !== typeof module ) {\r\n\r\n\t\tmodule.exports = THREE;\r\n\r\n}\r\n\r\n\r\n// polyfills\r\n\r\nif ( self.requestAnimationFrame === undefined || self.cancelAnimationFrame === undefined ) {\r\n\r\n\t// Missing in Android stock browser.\r\n\r\n\t( function () {\r\n\r\n\t\tvar lastTime = 0;\r\n\t\tvar vendors = [ 'ms', 'moz', 'webkit', 'o' ];\r\n\r\n\t\tfor ( var x = 0; x < vendors.length && ! self.requestAnimationFrame; ++ x ) {\r\n\r\n\t\t\tself.requestAnimationFrame = self[ vendors[ x ] + 'RequestAnimationFrame' ];\r\n\t\t\tself.cancelAnimationFrame = self[ vendors[ x ] + 'CancelAnimationFrame' ] || self[ vendors[ x ] + 'CancelRequestAnimationFrame' ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( self.requestAnimationFrame === undefined && self.setTimeout !== undefined ) {\r\n\r\n\t\t\tself.requestAnimationFrame = function ( callback ) {\r\n\r\n\t\t\t\tvar currTime = Date.now(), timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) );\r\n\t\t\t\tvar id = self.setTimeout( function () {\r\n\r\n\t\t\t\t\tcallback( currTime + timeToCall );\r\n\r\n\t\t\t\t}, timeToCall );\r\n\t\t\t\tlastTime = currTime + timeToCall;\r\n\t\t\t\treturn id;\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tif ( self.cancelAnimationFrame === undefined && self.clearTimeout !== undefined ) {\r\n\r\n\t\t\tself.cancelAnimationFrame = function ( id ) {\r\n\r\n\t\t\t\tself.clearTimeout( id );\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}() );\r\n\r\n}\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n\t};\r\n\r\n}\r\n\r\nif ( Function.prototype.name === undefined && Object.defineProperty !== undefined ) {\r\n\r\n\t// Missing in IE9-11.\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n\tObject.defineProperty( Function.prototype, 'name', {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.toString().match( /^\\s*function\\s*(\\S*)\\s*\\(/ )[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\r\n\r\nTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\r\n\r\n// GL STATE CONSTANTS\r\n\r\nTHREE.CullFaceNone = 0;\r\nTHREE.CullFaceBack = 1;\r\nTHREE.CullFaceFront = 2;\r\nTHREE.CullFaceFrontBack = 3;\r\n\r\nTHREE.FrontFaceDirectionCW = 0;\r\nTHREE.FrontFaceDirectionCCW = 1;\r\n\r\n// SHADOWING TYPES\r\n\r\nTHREE.BasicShadowMap = 0;\r\nTHREE.PCFShadowMap = 1;\r\nTHREE.PCFSoftShadowMap = 2;\r\n\r\n// MATERIAL CONSTANTS\r\n\r\n// side\r\n\r\nTHREE.FrontSide = 0;\r\nTHREE.BackSide = 1;\r\nTHREE.DoubleSide = 2;\r\n\r\n// shading\r\n\r\nTHREE.FlatShading = 1;\r\nTHREE.SmoothShading = 2;\r\n\r\n// colors\r\n\r\nTHREE.NoColors = 0;\r\nTHREE.FaceColors = 1;\r\nTHREE.VertexColors = 2;\r\n\r\n// blending modes\r\n\r\nTHREE.NoBlending = 0;\r\nTHREE.NormalBlending = 1;\r\nTHREE.AdditiveBlending = 2;\r\nTHREE.SubtractiveBlending = 3;\r\nTHREE.MultiplyBlending = 4;\r\nTHREE.CustomBlending = 5;\r\n\r\n// custom blending equations\r\n// (numbers start from 100 not to clash with other\r\n// mappings to OpenGL constants defined in Texture.js)\r\n\r\nTHREE.AddEquation = 100;\r\nTHREE.SubtractEquation = 101;\r\nTHREE.ReverseSubtractEquation = 102;\r\nTHREE.MinEquation = 103;\r\nTHREE.MaxEquation = 104;\r\n\r\n// custom blending destination factors\r\n\r\nTHREE.ZeroFactor = 200;\r\nTHREE.OneFactor = 201;\r\nTHREE.SrcColorFactor = 202;\r\nTHREE.OneMinusSrcColorFactor = 203;\r\nTHREE.SrcAlphaFactor = 204;\r\nTHREE.OneMinusSrcAlphaFactor = 205;\r\nTHREE.DstAlphaFactor = 206;\r\nTHREE.OneMinusDstAlphaFactor = 207;\r\n\r\n// custom blending source factors\r\n\r\n//THREE.ZeroFactor = 200;\r\n//THREE.OneFactor = 201;\r\n//THREE.SrcAlphaFactor = 204;\r\n//THREE.OneMinusSrcAlphaFactor = 205;\r\n//THREE.DstAlphaFactor = 206;\r\n//THREE.OneMinusDstAlphaFactor = 207;\r\nTHREE.DstColorFactor = 208;\r\nTHREE.OneMinusDstColorFactor = 209;\r\nTHREE.SrcAlphaSaturateFactor = 210;\r\n\r\n// depth modes\r\n\r\nTHREE.NeverDepth = 0;\r\nTHREE.AlwaysDepth = 1;\r\nTHREE.LessDepth = 2;\r\nTHREE.LessEqualDepth = 3;\r\nTHREE.EqualDepth = 4;\r\nTHREE.GreaterEqualDepth = 5;\r\nTHREE.GreaterDepth = 6;\r\nTHREE.NotEqualDepth = 7;\r\n\r\n\r\n// TEXTURE CONSTANTS\r\n\r\nTHREE.MultiplyOperation = 0;\r\nTHREE.MixOperation = 1;\r\nTHREE.AddOperation = 2;\r\n\r\n// Mapping modes\r\n\r\nTHREE.UVMapping = 300;\r\n\r\nTHREE.CubeReflectionMapping = 301;\r\nTHREE.CubeRefractionMapping = 302;\r\n\r\nTHREE.EquirectangularReflectionMapping = 303;\r\nTHREE.EquirectangularRefractionMapping = 304;\r\n\r\nTHREE.SphericalReflectionMapping = 305;\r\n\r\n// Wrapping modes\r\n\r\nTHREE.RepeatWrapping = 1000;\r\nTHREE.ClampToEdgeWrapping = 1001;\r\nTHREE.MirroredRepeatWrapping = 1002;\r\n\r\n// Filters\r\n\r\nTHREE.NearestFilter = 1003;\r\nTHREE.NearestMipMapNearestFilter = 1004;\r\nTHREE.NearestMipMapLinearFilter = 1005;\r\nTHREE.LinearFilter = 1006;\r\nTHREE.LinearMipMapNearestFilter = 1007;\r\nTHREE.LinearMipMapLinearFilter = 1008;\r\n\r\n// Data types\r\n\r\nTHREE.UnsignedByteType = 1009;\r\nTHREE.ByteType = 1010;\r\nTHREE.ShortType = 1011;\r\nTHREE.UnsignedShortType = 1012;\r\nTHREE.IntType = 1013;\r\nTHREE.UnsignedIntType = 1014;\r\nTHREE.FloatType = 1015;\r\nTHREE.HalfFloatType = 1025;\r\n\r\n// Pixel types\r\n\r\n//THREE.UnsignedByteType = 1009;\r\nTHREE.UnsignedShort4444Type = 1016;\r\nTHREE.UnsignedShort5551Type = 1017;\r\nTHREE.UnsignedShort565Type = 1018;\r\n\r\n// Pixel formats\r\n\r\nTHREE.AlphaFormat = 1019;\r\nTHREE.RGBFormat = 1020;\r\nTHREE.RGBAFormat = 1021;\r\nTHREE.LuminanceFormat = 1022;\r\nTHREE.LuminanceAlphaFormat = 1023;\r\n// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\r\nTHREE.RGBEFormat = THREE.RGBAFormat; //1024;\r\n\r\n// DDS / ST3C Compressed texture formats\r\n\r\nTHREE.RGB_S3TC_DXT1_Format = 2001;\r\nTHREE.RGBA_S3TC_DXT1_Format = 2002;\r\nTHREE.RGBA_S3TC_DXT3_Format = 2003;\r\nTHREE.RGBA_S3TC_DXT5_Format = 2004;\r\n\r\n\r\n// PVRTC compressed texture formats\r\n\r\nTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\r\nTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\r\nTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\r\nTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\r\n\r\n\r\n// DEPRECATED\r\n\r\nTHREE.Projector = function () {\r\n\r\n\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\r\n\tthis.projectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n\t\tvector.project( camera );\r\n\r\n\t};\r\n\r\n\tthis.unprojectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n\t\tvector.unproject( camera );\r\n\r\n\t};\r\n\r\n\tthis.pickingRay = function ( vector, camera ) {\r\n\r\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CanvasRenderer = function () {\r\n\r\n\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\r\n\tthis.domElement = document.createElement( 'canvas' );\r\n\tthis.clear = function () {};\r\n\tthis.render = function () {};\r\n\tthis.setClearColor = function () {};\r\n\tthis.setSize = function () {};\r\n\r\n};\r\n\r\n// File:src/math/Color.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Color = function ( color ) {\r\n\r\n\tif ( arguments.length === 3 ) {\r\n\r\n\t\treturn this.setRGB( arguments[ 0 ], arguments[ 1 ], arguments[ 2 ] );\r\n\r\n\t}\r\n\r\n\treturn this.set( color );\r\n\r\n};\r\n\r\nTHREE.Color.prototype = {\r\n\r\n\tconstructor: THREE.Color,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value instanceof THREE.Color ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function () {\r\n\r\n\t\tfunction hue2rgb ( p, q, t ) {\r\n\r\n\t\t\tif ( t < 0 ) t += 1;\r\n\t\t\tif ( t > 1 ) t -= 1;\r\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\t\t\tif ( t < 1 / 2 ) return q;\r\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\t\t\treturn p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( h, s, l ) {\r\n\r\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\t\th = THREE.Math.euclideanModulo( h, 1 );\r\n\t\t\ts = THREE.Math.clamp( s, 0, 1 );\r\n\t\t\tl = THREE.Math.clamp( l, 0, 1 );\r\n\r\n\t\t\tif ( s === 0 ) {\r\n\r\n\t\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\t\tvar q = ( 2 * l ) - p;\r\n\r\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\tvar parseAlpha = function ( strAlpha ) {\r\n\r\n\t\t\tvar alpha = parseFloat( strAlpha );\r\n\r\n\t\t\tif ( alpha < 1 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of color ' + style + ' will be ignored.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn alpha;\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar m;\r\n\r\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n\t\t\t// rgb / hsl\r\n\r\n\t\t\tvar color;\r\n\t\t\tvar name = m[ 1 ];\r\n\t\t\tvar components = m[ 2 ];\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'rgb':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(255,0,0)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(100%,0%,0%)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rgba':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgba(255,0,0,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsl':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsl(120,50%,50%)\r\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] );\r\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsla':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] );\r\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n\t\t\t// hex color\r\n\r\n\t\t\tvar hex = m[ 1 ];\r\n\t\t\tvar size = hex.length;\r\n\r\n\t\t\tif ( size === 3 ) {\r\n\r\n\t\t\t\t// #ff0\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t} else if ( size === 6 ) {\r\n\r\n\t\t\t\t// #ff0000\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( style && style.length > 0 ) {\r\n\r\n\t\t\t// color keywords\r\n\t\t\tvar hex = THREE.ColorKeywords[ style ];\r\n\r\n\t\t\tif ( hex !== undefined ) {\r\n\r\n\t\t\t\t// red\r\n\t\t\t\tthis.setHex( hex );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// unknown color\r\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function () {\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tthis.r = r * r;\r\n\t\tthis.g = g * g;\r\n\t\tthis.b = b * b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function () {\r\n\r\n\t\tthis.r = Math.sqrt( this.r );\r\n\t\tthis.g = Math.sqrt( this.g );\r\n\t\tthis.b = Math.sqrt( this.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( optionalTarget ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tvar max = Math.max( r, g, b );\r\n\t\tvar min = Math.min( r, g, b );\r\n\r\n\t\tvar hue, saturation;\r\n\t\tvar lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\thsl.h = hue;\r\n\t\thsl.s = saturation;\r\n\t\thsl.l = lightness;\r\n\r\n\t\treturn hsl;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tvar hsl = this.getHSL();\r\n\r\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\r\n\r\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.r = array[ 0 ];\r\n\t\tthis.g = array[ 1 ];\r\n\t\tthis.b = array[ 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.r;\r\n\t\tarray[ offset + 1 ] = this.g;\r\n\t\tarray[ offset + 2 ] = this.b;\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\n// File:src/math/Quaternion.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Quaternion = function ( x, y, z, w ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Quaternion.prototype = {\r\n\r\n\tconstructor: THREE.Quaternion,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget w () {\r\n\r\n\t\treturn this._w;\r\n\r\n\t},\r\n\r\n\tset w ( value ) {\r\n\r\n\t\tthis._w = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tvar c1 = Math.cos( euler._x / 2 );\r\n\t\tvar c2 = Math.cos( euler._y / 2 );\r\n\t\tvar c3 = Math.cos( euler._z / 2 );\r\n\t\tvar s1 = Math.sin( euler._x / 2 );\r\n\t\tvar s2 = Math.sin( euler._y / 2 );\r\n\t\tvar s3 = Math.sin( euler._z / 2 );\r\n\r\n\t\tvar order = euler.order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\ts;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function () {\r\n\r\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tvar v1, r;\r\n\r\n\t\tvar EPS = 0.000001;\r\n\r\n\t\treturn function ( vFrom, vTo ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\r\n\t\t\tif ( r < EPS ) {\r\n\r\n\t\t\t\tr = 0;\r\n\r\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = v1.x;\r\n\t\t\tthis._y = v1.y;\r\n\t\t\tthis._z = v1.z;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t\tthis.normalize();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tinverse: function () {\r\n\r\n\t\tthis.conjugate().normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tvar l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\t\treturn vector.applyQuaternion( this );\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar halfTheta = Math.acos( cosHalfTheta );\r\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\r\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\r\n\t\t\tthis._w = 0.5 * ( w + this._w );\r\n\t\t\tthis._x = 0.5 * ( x + this._x );\r\n\t\t\tthis._y = 0.5 * ( y + this._y );\r\n\t\t\tthis._z = 0.5 * ( z + this._z );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\nTHREE.Quaternion.slerp = function ( qa, qb, qm, t ) {\r\n\r\n\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n};\r\n\r\n// File:src/math/Vector2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author egraether / http://egraether.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.Vector2 = function ( x, y ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\r\n};\r\n\r\nTHREE.Vector2.prototype = {\r\n\r\n\tconstructor: THREE.Vector2,\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.x *= s;\r\n\t\tthis.y *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector2();\r\n\t\t\t\tmax = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function() {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author *kile / http://kile.stravaganza.org/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector3 = function ( x, y, z ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\r\n};\r\n\r\nTHREE.Vector3.prototype = {\r\n\r\n\tconstructor: THREE.Vector3,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyEuler( euler ) {\r\n\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyAxisAngle: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyAxisAngle( axis, angle ) {\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 projection matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar qx = q.x;\r\n\t\tvar qy = q.y;\r\n\t\tvar qz = q.z;\r\n\t\tvar qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tvar ix =  qw * x + qy * z - qz * y;\r\n\t\tvar iy =  qw * y + qz * x - qx * z;\r\n\t\tvar iz =  qw * z + qx * y - qy * x;\r\n\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function project( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tunproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function unproject( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\tthis.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\t\t\tthis.z *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z > v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < min.z ) {\r\n\r\n\t\t\tthis.z = min.z;\r\n\r\n\t\t} else if ( this.z > max.z ) {\r\n\r\n\t\t\tthis.z = max.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector3();\r\n\t\t\t\tmax = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength  ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tthis.x = y * v.z - z * v.y;\r\n\t\tthis.y = z * v.x - x * v.z;\r\n\t\tthis.z = x * v.y - y * v.x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function () {\r\n\r\n\t\tvar v1, dot;\r\n\r\n\t\treturn function projectOnVector( vector ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( vector ).normalize();\r\n\r\n\t\t\tdot = this.dot( v1 );\r\n\r\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tprojectOnPlane: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function projectOnPlane( planeNormal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\t\treturn this.sub( v1 );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\treflect: function () {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function reflect( normal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tvar theta = this.dot( v ) / ( this.length() * v.length() );\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x;\r\n\t\tvar dy = this.y - v.y;\r\n\t\tvar dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tsetEulerFromRotationMatrix: function ( m, order ) {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\r\n\t},\r\n\r\n\tsetEulerFromQuaternion: function ( q, order ) {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\r\n\t},\r\n\r\n\tgetPositionFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\r\n\t\treturn this.setFromMatrixPosition( m );\r\n\r\n\t},\r\n\r\n\tgetScaleFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\r\n\t\treturn this.setFromMatrixScale( m );\r\n\r\n\t},\r\n\r\n\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\r\n\t\treturn this.setFromMatrixColumn( index, matrix );\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\tthis.x = m.elements[ 12 ];\r\n\t\tthis.y = m.elements[ 13 ];\r\n\t\tthis.z = m.elements[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tvar sx = this.set( m.elements[ 0 ], m.elements[ 1 ], m.elements[ 2 ] ).length();\r\n\t\tvar sy = this.set( m.elements[ 4 ], m.elements[ 5 ], m.elements[ 6 ] ).length();\r\n\t\tvar sz = this.set( m.elements[ 8 ], m.elements[ 9 ], m.elements[ 10 ] ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( index, matrix ) {\r\n\r\n\t\tvar offset = index * 4;\r\n\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tthis.x = me[ offset ];\r\n\t\tthis.y = me[ offset + 1 ];\r\n\t\tthis.z = me[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector4.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector4 = function ( x, y, z, w ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\tthis.w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Vector4.prototype = {\r\n\r\n\tconstructor: THREE.Vector4,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\t\tthis.w += v.w * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\t\tthis.w -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\t\tthis.w *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\t\tvar w = this.w;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\t\t\tthis.z *= invScalar;\r\n\t\t\tthis.w *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\t\t\tthis.w = 1;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\t this.x = 1;\r\n\t\t\t this.y = 0;\r\n\t\t\t this.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t this.x = q.x / s;\r\n\t\t\t this.y = q.y / s;\r\n\t\t\t this.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\r\n\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\r\n\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\r\n\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\r\n\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z > v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w > v.w ) {\r\n\r\n\t\t\tthis.w = v.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w < v.w ) {\r\n\r\n\t\t\tthis.w = v.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < min.z ) {\r\n\r\n\t\t\tthis.z = min.z;\r\n\r\n\t\t} else if ( this.z > max.z ) {\r\n\r\n\t\t\tthis.z = max.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w < min.w ) {\r\n\r\n\t\t\tthis.w = min.w;\r\n\r\n\t\t} else if ( this.w > max.w ) {\r\n\r\n\t\t\tthis.w = max.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector4();\r\n\t\t\t\tmax = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\t\tthis.w = Math.round( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\t\tthis.w = attribute.array[ index + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Euler.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Euler = function ( x, y, z, order ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._order = order || THREE.Euler.DefaultOrder;\r\n\r\n};\r\n\r\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nTHREE.Euler.DefaultOrder = 'XYZ';\r\n\r\nTHREE.Euler.prototype = {\r\n\r\n\tconstructor: THREE.Euler,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget order () {\r\n\r\n\t\treturn this._order;\r\n\r\n\t},\r\n\r\n\tset order ( value ) {\r\n\r\n\t\tthis._order = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order);\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tvar clamp = THREE.Math.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements;\r\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order )\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( q, order, update ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\t\tmatrix.makeRotationFromQuaternion( q );\r\n\t\t\tthis.setFromRotationMatrix( matrix, order, update );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function () {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\tvar q = new THREE.Quaternion();\r\n\r\n\t\treturn function ( newOrder ) {\r\n\r\n\t\t\tq.setFromEuler( this );\r\n\t\t\tthis.setFromQuaternion( q, newOrder );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\n// File:src/math/Line3.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Line3 = function ( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Line3.prototype = {\r\n\r\n\tconstructor: THREE.Line3,\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function () {\r\n\r\n\t\tvar startP = new THREE.Vector3();\r\n\t\tvar startEnd = new THREE.Vector3();\r\n\r\n\t\treturn function ( point, clampToLine ) {\r\n\r\n\t\t\tstartP.subVectors( point, this.start );\r\n\t\t\tstartEnd.subVectors( this.end, this.start );\r\n\r\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\r\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\r\n\r\n\t\t\tvar t = startEnd_startP / startEnd2;\r\n\r\n\t\t\tif ( clampToLine ) {\r\n\r\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\r\n\r\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box2.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Box2 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( Infinity, Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box2.prototype = {\r\n\r\n\tconstructor: THREE.Box2,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] )\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\t\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box3.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Box3 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( Infinity, Infinity, Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box3.prototype = {\r\n\r\n\tconstructor: THREE.Box3,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromObject: function () {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and children's, world transforms\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tobject.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.makeEmpty();\r\n\r\n\t\t\tobject.traverse( function ( node ) {\r\n\r\n\t\t\t\tvar geometry = node.geometry;\r\n\r\n\t\t\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\r\n\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tv1.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ||\r\n\t\t     point.z < this.min.z || point.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\r\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t     box.max.z < this.min.z || box.min.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetBoundingSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\r\n\r\n\t\t\tresult.center = this.center();\r\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar points = [\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3()\r\n\t\t];\r\n\r\n\t\treturn function ( matrix ) {\r\n\r\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );  // 111\r\n\r\n\t\t\tthis.makeEmpty();\r\n\t\t\tthis.setFromPoints( points );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix3.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Matrix3 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix3.prototype = {\r\n\r\n\tconstructor: THREE.Matrix3,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 3 ] = n12; te[ 6 ] = n13;\r\n\t\tte[ 1 ] = n21; te[ 4 ] = n22; te[ 7 ] = n23;\r\n\t\tte[ 2 ] = n31; te[ 5 ] = n32; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\r\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\r\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix3( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector3Array: function ( a ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnInvertible ) {\r\n\r\n\t\t// input: THREE.Matrix4\r\n\t\t// ( based on http://code.google.com/p/webgl-mjs/ )\r\n\r\n\t\tvar me = matrix.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] =   me[ 10 ] * me[ 5 ] - me[ 6 ] * me[ 9 ];\r\n\t\tte[ 1 ] = - me[ 10 ] * me[ 1 ] + me[ 2 ] * me[ 9 ];\r\n\t\tte[ 2 ] =   me[ 6 ] * me[ 1 ] - me[ 2 ] * me[ 5 ];\r\n\t\tte[ 3 ] = - me[ 10 ] * me[ 4 ] + me[ 6 ] * me[ 8 ];\r\n\t\tte[ 4 ] =   me[ 10 ] * me[ 0 ] - me[ 2 ] * me[ 8 ];\r\n\t\tte[ 5 ] = - me[ 6 ] * me[ 0 ] + me[ 2 ] * me[ 4 ];\r\n\t\tte[ 6 ] =   me[ 9 ] * me[ 4 ] - me[ 5 ] * me[ 8 ];\r\n\t\tte[ 7 ] = - me[ 9 ] * me[ 0 ] + me[ 1 ] * me[ 8 ];\r\n\t\tte[ 8 ] =   me[ 5 ] * me[ 0 ] - me[ 1 ] * me[ 4 ];\r\n\r\n\t\tvar det = me[ 0 ] * te[ 0 ] + me[ 1 ] * te[ 3 ] + me[ 2 ] * te[ 6 ];\r\n\r\n\t\t// no inverse\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"Matrix3.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnInvertible || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.identity();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.multiplyScalar( 1.0 / det );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar tmp, m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4\r\n\r\n\t\tthis.getInverse( m ).transpose();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tvar m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\r\n\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\r\n\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\r\n\t\t];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author jordi_ros / http://plattsoft.com\r\n * @author D1plo1d / http://github.com/D1plo1d\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author timknip / http://www.floorplanner.com/\r\n * @author bhouston / http://exocortex.com\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Matrix4 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix4.prototype = {\r\n\r\n\tconstructor: THREE.Matrix4,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tthis.elements.set( m.elements );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractPosition: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\treturn this.copyPosition( m );\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\txAxis.set( te[ 0 ], te[ 1 ], te[ 2 ] );\r\n\t\tyAxis.set( te[ 4 ], te[ 5 ], te[ 6 ] );\r\n\t\tzAxis.set( te[ 8 ], te[ 9 ], te[ 10 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0,       0,       0,       1\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( m ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tvar scaleX = 1 / v1.set( me[ 0 ], me[ 1 ], me[ 2 ] ).length();\r\n\t\t\tvar scaleY = 1 / v1.set( me[ 4 ], me[ 5 ], me[ 6 ] ).length();\r\n\t\t\tvar scaleZ = 1 / v1.set( me[ 8 ], me[ 9 ], me[ 10 ] ).length();\r\n\r\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\r\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\r\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\r\n\t\treturn this.makeRotationFromQuaternion( q );\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\r\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\r\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tte[ 0 ] = 1 - ( yy + zz );\r\n\t\tte[ 4 ] = xy - wz;\r\n\t\tte[ 8 ] = xz + wy;\r\n\r\n\t\tte[ 1 ] = xy + wz;\r\n\t\tte[ 5 ] = 1 - ( xx + zz );\r\n\t\tte[ 9 ] = yz - wx;\r\n\r\n\t\tte[ 2 ] = xz - wy;\r\n\t\tte[ 6 ] = yz + wx;\r\n\t\tte[ 10 ] = 1 - ( xx + yy );\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar x, y, z;\r\n\r\n\t\treturn function ( eye, target, up ) {\r\n\r\n\t\t\tif ( x === undefined ) x = new THREE.Vector3();\r\n\t\t\tif ( y === undefined ) y = new THREE.Vector3();\r\n\t\t\tif ( z === undefined ) z = new THREE.Vector3();\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tz.subVectors( eye, target ).normalize();\r\n\r\n\t\t\tif ( z.length() === 0 ) {\r\n\r\n\t\t\t\tz.z = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\tif ( x.length() === 0 ) {\r\n\r\n\t\t\t\tz.x += 0.0001;\r\n\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\ty.crossVectors( z, x );\r\n\r\n\r\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyToArray: function ( a, b, r ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tthis.multiplyMatrices( a, b );\r\n\r\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\r\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\r\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\r\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\r\n\t\treturn vector.applyProjection( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector4: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector3Array: function ( a ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateAxis: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\r\n\t\tv.transformDirection( this );\r\n\r\n\t},\r\n\r\n\tcrossVector: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\tarray[ offset + 9 ]  = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetPosition: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\treturn v1.set( te[ 12 ], te[ 13 ], te[ 14 ] );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetPosition: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 12 ] = v.x;\r\n\t\tte[ 13 ] = v.y;\r\n\t\tte[ 14 ] = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnInvertible ) {\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tvar n11 = me[ 0 ], n12 = me[ 4 ], n13 = me[ 8 ], n14 = me[ 12 ];\r\n\t\tvar n21 = me[ 1 ], n22 = me[ 5 ], n23 = me[ 9 ], n24 = me[ 13 ];\r\n\t\tvar n31 = me[ 2 ], n32 = me[ 6 ], n33 = me[ 10 ], n34 = me[ 14 ];\r\n\t\tvar n41 = me[ 3 ], n42 = me[ 7 ], n43 = me[ 11 ], n44 = me[ 15 ];\r\n\r\n\t\tte[ 0 ] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\r\n\t\tte[ 4 ] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\r\n\t\tte[ 8 ] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\r\n\t\tte[ 12 ] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\r\n\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\r\n\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\r\n\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\r\n\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\r\n\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\r\n\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\r\n\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\r\n\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\r\n\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\r\n\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\r\n\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\r\n\r\n\t\tvar det = n11 * te[ 0 ] + n21 * te[ 4 ] + n31 * te[ 8 ] + n41 * te[ 12 ];\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnInvertible || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.identity();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.multiplyScalar( 1 / det );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( v ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateByAxis: function ( axis, angle ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, Math.max( scaleYSq, scaleZSq ) ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0,  0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s,  c, 0,\r\n\t\t\t0, 0,  0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts,  c, 0, 0,\r\n\t\t\t0,  0, 1, 0,\r\n\t\t\t0,  0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tvar c = Math.cos( angle );\r\n\t\tvar s = Math.sin( angle );\r\n\t\tvar t = 1 - c;\r\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\tvar tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tthis.makeRotationFromQuaternion( quaternion );\r\n\t\tthis.scale( scale );\r\n\t\tthis.setPosition( position );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function () {\r\n\r\n\t\tvar vector, matrix;\r\n\r\n\t\treturn function ( position, quaternion, scale ) {\r\n\r\n\t\t\tif ( vector === undefined ) vector = new THREE.Vector3();\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\tvar det = this.determinant();\r\n\t\t\tif ( det < 0 ) {\r\n\r\n\t\t\t\tsx = - sx;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tposition.x = te[ 12 ];\r\n\t\t\tposition.y = te[ 13 ];\r\n\t\t\tposition.z = te[ 14 ];\r\n\r\n\t\t\t// scale the rotation part\r\n\r\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\r\n\r\n\t\t\tvar invSX = 1 / sx;\r\n\t\t\tvar invSY = 1 / sy;\r\n\t\t\tvar invSZ = 1 / sz;\r\n\r\n\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\r\n\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\r\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\r\n\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\r\n\t\t\tscale.x = sx;\r\n\t\t\tscale.y = sy;\r\n\t\t\tscale.z = sz;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = 2 * near / ( right - left );\r\n\t\tvar y = 2 * near / ( top - bottom );\r\n\r\n\t\tvar a = ( right + left ) / ( right - left );\r\n\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\tvar d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( fov, aspect, near, far ) {\r\n\r\n\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\r\n\t\tvar ymin = - ymax;\r\n\t\tvar xmin = ymin * aspect;\r\n\t\tvar xmax = ymax * aspect;\r\n\r\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar w = right - left;\r\n\t\tvar h = top - bottom;\r\n\t\tvar p = far - near;\r\n\r\n\t\tvar x = ( right + left ) / w;\r\n\t\tvar y = ( top + bottom ) / h;\r\n\t\tvar z = ( far + near ) / p;\r\n\r\n\t\tte[ 0 ] = 2 / w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 / h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 / p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\r\n\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\r\n\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\r\n\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\r\n\t\t];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Ray.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Ray = function ( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Ray.prototype = {\r\n\r\n\tconstructor: THREE.Ray,\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\trecast: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( t ) {\r\n\r\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.subVectors( point, this.origin );\r\n\t\tvar directionDistance = result.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn result.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n\t},\r\n\r\n\tdistanceSqToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t\t// point behind the ray\r\n\r\n\t\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\t\treturn this.origin.distanceToSquared( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\t\treturn v1.distanceToSquared( point );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdistanceSqToSegment: function () {\r\n\r\n\t\tvar segCenter = new THREE.Vector3();\r\n\t\tvar segDir = new THREE.Vector3();\r\n\t\tvar diff = new THREE.Vector3();\r\n\r\n\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\r\n\t\t\t// It returns the min distance between the ray and the segment\r\n\t\t\t// defined by v0 and v1\r\n\t\t\t// It can also set two optional targets :\r\n\t\t\t// - The closest point on the ray\r\n\t\t\t// - The closest point on the segment\r\n\r\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\r\n\r\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\t\tvar a01 = - this.direction.dot( segDir );\r\n\t\t\tvar b0 = diff.dot( this.direction );\r\n\t\t\tvar b1 = - diff.dot( segDir );\r\n\t\t\tvar c = diff.lengthSq();\r\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\r\n\t\t\tvar s0, s1, sqrDist, extDet;\r\n\r\n\t\t\tif ( det > 0 ) {\r\n\r\n\t\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\t\textDet = segExtent * det;\r\n\r\n\t\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\t\tvar invDet = 1 / det;\r\n\t\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn sqrDist;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\r\n\t},\r\n\r\n\tintersectSphere: function () {\r\n\r\n\t\t// from http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-sphere-intersection/\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( sphere, optionalTarget ) {\r\n\r\n\t\t\tv1.subVectors( sphere.center, this.origin );\r\n\r\n\t\t\tvar tca = v1.dot( this.direction );\r\n\r\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\r\n\r\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\t\tvar t0 = tca - thc;\r\n\r\n\t\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\t\tvar t1 = tca + thc;\r\n\r\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t\t// test to see if t0 is behind the ray:\r\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\r\n\r\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\t\treturn this.at( t0, optionalTarget );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tisIntersectionPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t :  null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, optionalTarget ) {\r\n\r\n\t\tvar t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.at( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\treturn this.intersectBox( box, v ) !== null;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectBox: function ( box, optionalTarget ) {\r\n\r\n\t\t// http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\r\n\r\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n\t\tvar invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tvar origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\r\n\r\n\t},\r\n\r\n\tintersectTriangle: function () {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\t\tvar diff = new THREE.Vector3();\r\n\t\tvar edge1 = new THREE.Vector3();\r\n\t\tvar edge2 = new THREE.Vector3();\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\r\n\r\n\t\t\tedge1.subVectors( b, a );\r\n\t\t\tedge2.subVectors( c, a );\r\n\t\t\tnormal.crossVectors( edge1, edge2 );\r\n\r\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\t\tvar DdN = this.direction.dot( normal );\r\n\t\t\tvar sign;\r\n\r\n\t\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\t\tsign = 1;\r\n\r\n\t\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\t\tsign = - 1;\r\n\t\t\t\tDdN = - DdN;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdiff.subVectors( this.origin, a );\r\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\r\n\t\t\t// b1 < 0, no intersection\r\n\t\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\r\n\t\t\t// b2 < 0, no intersection\r\n\t\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// b1+b2 > 1, no intersection\r\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Line intersects triangle, check if ray does.\r\n\t\t\tvar QdN = - sign * diff.dot( normal );\r\n\r\n\t\t\t// t < 0, no intersection\r\n\t\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Ray intersects triangle.\r\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.sub( this.origin );\r\n\t\tthis.direction.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Sphere.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Sphere = function ( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\r\n\r\n};\r\n\r\nTHREE.Sphere.prototype = {\r\n\r\n\tconstructor: THREE.Sphere,\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\r\n\t\treturn function ( points, optionalCenter ) {\r\n\r\n\t\t\tvar center = this.center;\r\n\r\n\t\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbox.setFromPoints( points ).center( center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\treturn ( this.radius <= 0 );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\tresult.sub( this.center ).normalize();\r\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( optionalTarget ) {\r\n\r\n\t\tvar box = optionalTarget || new THREE.Box3();\r\n\r\n\t\tbox.set( this.center, this.center );\r\n\t\tbox.expandByScalar( this.radius );\r\n\r\n\t\treturn box;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Frustum.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\r\n\r\n\t];\r\n\r\n};\r\n\r\nTHREE.Frustum.prototype = {\r\n\r\n\tconstructor: THREE.Frustum,\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix: function ( m ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar me = m.elements;\r\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function () {\r\n\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar geometry = object.geometry;\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar center = sphere.center;\r\n\t\tvar negRadius = - sphere.radius;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function () {\r\n\r\n\t\tvar p1 = new THREE.Vector3(),\r\n\t\t\tp2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\tvar planes = this.planes;\r\n\r\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\r\n\r\n\t\t\t\tvar plane = planes[ i ];\r\n\r\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\r\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\r\n\r\n\t\t\t\t// if both outside plane, no intersection\r\n\r\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Plane.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Plane = function ( normal, constant ) {\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n};\r\n\r\nTHREE.Plane.prototype = {\r\n\r\n\tconstructor: THREE.Plane,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c ) {\r\n\r\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\r\n\r\n\t},\r\n\r\n\torthoPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\r\n\r\n\t},\r\n\r\n\tisIntersectionLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tvar startSign = this.distanceToPoint( line.start );\r\n\t\tvar endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectLine: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( line, optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tvar direction = line.delta( v1 );\r\n\r\n\t\t\tvar denominator = this.normal.dot( direction );\r\n\r\n\t\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n\t\t\t\t\treturn result.copy( line.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcoplanarPoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar m1 = new THREE.Matrix3();\r\n\r\n\t\treturn function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\t\t// compute new normal based on theory here:\r\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\r\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\r\n\r\n\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\r\n\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant = this.constant - offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Math.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Math = {\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\r\n\r\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\r\n\t\tvar uuid = new Array( 36 );\r\n\t\tvar rnd = 0, r;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\r\n\r\n\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '-';\r\n\r\n\t\t\t\t} else if ( i === 14 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '4';\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\r\n\t\t\t\t\tr = rnd & 0xf;\r\n\t\t\t\t\trnd = rnd >> 4;\r\n\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn uuid.join( '' );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\t// Clamp value to range <a, b>\r\n\r\n\tclamp: function ( x, a, b ) {\r\n\r\n\t\treturn ( x < a ) ? a : ( ( x > b ) ? b : x );\r\n\r\n\t},\r\n\r\n\t// Clamp value to range <a, inf)\r\n\r\n\tclampBottom: function ( x, a ) {\r\n\r\n\t\treturn x < a ? a : x;\r\n\r\n\t},\r\n\r\n\t// compute euclidian modulo of m % n\r\n\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n\teuclideanModulo: function ( n, m ) {\r\n\r\n\t\treturn ( ( n % m ) + m ) % m;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\t// Random float from <0, 1> with 16 bits of randomness\r\n\t// (standard Math.random() creates repetitive patterns when applied over larger space)\r\n\r\n\trandom16: function () {\r\n\r\n\t\treturn ( 65280 * Math.random() + 255 * Math.random() ) / 65535;\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\tdegToRad: function () {\r\n\r\n\t\tvar degreeToRadiansFactor = Math.PI / 180;\r\n\r\n\t\treturn function ( degrees ) {\r\n\r\n\t\t\treturn degrees * degreeToRadiansFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tradToDeg: function () {\r\n\r\n\t\tvar radianToDegreesFactor = 180 / Math.PI;\r\n\r\n\t\treturn function ( radians ) {\r\n\r\n\t\t\treturn radians * radianToDegreesFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t},\r\n\r\n\tnextPowerOfTwo: function ( value ) {\r\n\r\n\t\tvalue --;\r\n\t\tvalue |= value >> 1;\r\n\t\tvalue |= value >> 2;\r\n\t\tvalue |= value >> 4;\r\n\t\tvalue |= value >> 8;\r\n\t\tvalue |= value >> 16;\r\n\t\tvalue ++;\r\n\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spline.js\r\n\r\n/**\r\n * Spline from Tween.js, slightly optimized (and trashed)\r\n * http://sole.github.com/tween.js/examples/05_spline.html\r\n *\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Spline = function ( points ) {\r\n\r\n\tthis.points = points;\r\n\r\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\r\n\tpoint, intPoint, weight, w2, w3,\r\n\tpa, pb, pc, pd;\r\n\r\n\tthis.initFromArray = function ( a ) {\r\n\r\n\t\tthis.points = [];\r\n\r\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\r\n\r\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getPoint = function ( k ) {\r\n\r\n\t\tpoint = ( this.points.length - 1 ) * k;\r\n\t\tintPoint = Math.floor( point );\r\n\t\tweight = point - intPoint;\r\n\r\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\tc[ 1 ] = intPoint;\r\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\r\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\r\n\r\n\t\tpa = this.points[ c[ 0 ] ];\r\n\t\tpb = this.points[ c[ 1 ] ];\r\n\t\tpc = this.points[ c[ 2 ] ];\r\n\t\tpd = this.points[ c[ 3 ] ];\r\n\r\n\t\tw2 = weight * weight;\r\n\t\tw3 = weight * w2;\r\n\r\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\r\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\r\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\r\n\r\n\t\treturn v3;\r\n\r\n\t};\r\n\r\n\tthis.getControlPointsArray = function () {\r\n\r\n\t\tvar i, p, l = this.points.length,\r\n\t\t\tcoords = [];\r\n\r\n\t\tfor ( i = 0; i < l; i ++ ) {\r\n\r\n\t\t\tp = this.points[ i ];\r\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\r\n\r\n\t\t}\r\n\r\n\t\treturn coords;\r\n\r\n\t};\r\n\r\n\t// approximate length by summing linear segments\r\n\r\n\tthis.getLength = function ( nSubDivisions ) {\r\n\r\n\t\tvar i, index, nSamples, position,\r\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\r\n\t\t\toldPosition = new THREE.Vector3(),\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tchunkLengths = [],\r\n\t\t\ttotalLength = 0;\r\n\r\n\t\t// first point has 0 length\r\n\r\n\t\tchunkLengths[ 0 ] = 0;\r\n\r\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\r\n\r\n\t\tnSamples = this.points.length * nSubDivisions;\r\n\r\n\t\toldPosition.copy( this.points[ 0 ] );\r\n\r\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\r\n\r\n\t\t\tindex = i / nSamples;\r\n\r\n\t\t\tposition = this.getPoint( index );\r\n\t\t\ttmpVec.copy( position );\r\n\r\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\r\n\r\n\t\t\toldPosition.copy( position );\r\n\r\n\t\t\tpoint = ( this.points.length - 1 ) * index;\r\n\t\t\tintPoint = Math.floor( point );\r\n\r\n\t\t\tif ( intPoint !== oldIntPoint ) {\r\n\r\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\r\n\t\t\t\toldIntPoint = intPoint;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// last point ends with total length\r\n\r\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\r\n\r\n\t\treturn { chunks: chunkLengths, total: totalLength };\r\n\r\n\t};\r\n\r\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\r\n\r\n\t\tvar i, j,\r\n\t\t\tindex, indexCurrent, indexNext,\r\n\t\t\trealDistance,\r\n\t\t\tsampling, position,\r\n\t\t\tnewpoints = [],\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tsl = this.getLength();\r\n\r\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\r\n\r\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\r\n\r\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\r\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\r\n\r\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\r\n\r\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\r\n\r\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\r\n\t\t\tindexNext = i / ( this.points.length - 1 );\r\n\r\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\r\n\r\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\r\n\r\n\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.points = newpoints;\r\n\r\n\t};\r\n\r\n\t// Catmull-Rom\r\n\r\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Triangle.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Triangle = function ( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Triangle.normal = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\r\n\treturn function ( a, b, c, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.subVectors( c, b );\r\n\t\tv0.subVectors( a, b );\r\n\t\tresult.cross( v0 );\r\n\r\n\t\tvar resultLengthSq = result.lengthSq();\r\n\t\tif ( resultLengthSq > 0 ) {\r\n\r\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.set( 0, 0, 0 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// static/instance method to calculate barycentric coordinates\r\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\nTHREE.Triangle.barycoordFromPoint = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c, optionalTarget ) {\r\n\r\n\t\tv0.subVectors( c, a );\r\n\t\tv1.subVectors( b, a );\r\n\t\tv2.subVectors( point, a );\r\n\r\n\t\tvar dot00 = v0.dot( v0 );\r\n\t\tvar dot01 = v0.dot( v1 );\r\n\t\tvar dot02 = v0.dot( v2 );\r\n\t\tvar dot11 = v1.dot( v1 );\r\n\t\tvar dot12 = v1.dot( v2 );\r\n\r\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t// collinear or singular triangle\r\n\t\tif ( denom === 0 ) {\r\n\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn result.set( - 2, - 1, - 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar invDenom = 1 / denom;\r\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycentric coordinates must always sum to 1\r\n\t\treturn result.set( 1 - u - v, v, u );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.containsPoint = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c ) {\r\n\r\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\r\n\r\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.prototype = {\r\n\r\n\tconstructor: THREE.Triangle,\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarea: function () {\r\n\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tv0.subVectors( this.c, this.b );\r\n\t\t\tv1.subVectors( this.a, this.b );\r\n\r\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmidpoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tnormal: function ( optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tplane: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Plane();\r\n\r\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Clock.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Clock = function ( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n};\r\n\r\nTHREE.Clock.prototype = {\r\n\r\n\tconstructor: THREE.Clock,\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t : Date.now();\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.running = true;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tvar diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tvar newTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t : Date.now();\r\n\r\n\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/EventDispatcher.js\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nTHREE.EventDispatcher = function () {};\r\n\r\nTHREE.EventDispatcher.prototype = {\r\n\r\n\tconstructor: THREE.EventDispatcher,\r\n\r\n\tapply: function ( object ) {\r\n\r\n\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\r\n\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\r\n\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\r\n\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\r\n\r\n\t},\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tvar index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar length = listenerArray.length;\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = listenerArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Raycaster.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author bhouston / http://exocortex.com/\r\n * @author stephomi / http://stephaneginier.com/\r\n */\r\n\r\n( function ( THREE ) {\r\n\r\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\r\n\r\n\t\tthis.ray = new THREE.Ray( origin, direction );\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.near = near || 0;\r\n\t\tthis.far = far || Infinity;\r\n\r\n\t\tthis.params = {\r\n\t\t\tMesh: {},\r\n\t\t\tLine: {},\r\n\t\t\tLOD: {},\r\n\t\t\tPoints: { threshold: 1 },\r\n\t\t\tSprite: {}\r\n\t\t};\r\n\r\n\t\tObject.defineProperties( this.params, {\r\n\t\t\tPointCloud: {\r\n\t\t\t\tget: function () {\r\n\t\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\t\treturn this.Points;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tfunction descSort( a, b ) {\r\n\r\n\t\treturn a.distance - b.distance;\r\n\r\n\t}\r\n\r\n\tvar intersectObject = function ( object, raycaster, intersects, recursive ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tvar children = object.children;\r\n\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tTHREE.Raycaster.prototype = {\r\n\r\n\t\tconstructor: THREE.Raycaster,\r\n\r\n\t\tlinePrecision: 1,\r\n\r\n\t\tset: function ( origin, direction ) {\r\n\r\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\t\tthis.ray.set( origin, direction );\r\n\r\n\t\t},\r\n\r\n\t\tsetFromCamera: function ( coords, camera ) {\r\n\r\n\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\r\n\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\r\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tintersectObject: function ( object, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\t\tintersects.sort( descSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t},\r\n\r\n\t\tintersectObjects: function ( objects, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tif ( Array.isArray( objects ) === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\t\treturn intersects;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersects.sort( descSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}( THREE ) );\r\n\r\n// File:src/core/Object3D.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author elephantatwork / www.elephantatwork.ch\r\n */\r\n\r\nTHREE.Object3D = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = null;\r\n\tthis.children = [];\r\n\r\n\tthis.up = THREE.Object3D.DefaultUp.clone();\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar rotation = new THREE.Euler();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tvar onRotationChange = function () {\r\n\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\r\n\t};\r\n\r\n\tvar onQuaternionChange = function () {\r\n\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n\t};\r\n\r\n\trotation.onChange( onRotationChange );\r\n\tquaternion.onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t\tmodelViewMatrix: {\r\n\t\t\tvalue: new THREE.Matrix4()\r\n\t\t},\r\n\t\tnormalMatrix: {\r\n\t\t\tvalue: new THREE.Matrix3()\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.rotationAutoUpdate = true;\r\n\r\n\tthis.matrix = new THREE.Matrix4();\r\n\tthis.matrixWorld = new THREE.Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\tthis.renderOrder = 0;\r\n\r\n\tthis.userData = {};\r\n\r\n};\r\n\r\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\r\nTHREE.Object3D.DefaultMatrixAutoUpdate = true;\r\n\r\nTHREE.Object3D.prototype = {\r\n\r\n\tconstructor: THREE.Object3D,\r\n\r\n\tget eulerOrder () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\r\n\t\treturn this.rotation.order;\r\n\r\n\t},\r\n\r\n\tset eulerOrder ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\r\n\t\tthis.rotation.order = value;\r\n\r\n\t},\r\n\r\n\tget useQuaternion () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t},\r\n\r\n\tset useQuaternion ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t},\r\n\r\n\tset renderDepth ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function () {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar q1 = new THREE.Quaternion();\r\n\r\n\t\treturn function ( axis, angle ) {\r\n\r\n\t\t\tq1.setFromAxisAngle( axis, angle );\r\n\r\n\t\t\tthis.quaternion.multiply( q1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateOnAxis: function () {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( axis, distance ) {\r\n\r\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( distance, axis ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\treturn this.translateOnAxis( axis, distance );\r\n\r\n\t},\r\n\r\n\ttranslateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function () {\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\tm1.lookAt( vector, this.position, this.up );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object instanceof THREE.Object3D ) {\r\n\r\n\t\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tobject.dispatchEvent( { type: 'added' } );\r\n\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = null;\r\n\r\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\r\n\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetChildByName: function ( name ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\treturn this.getObjectByName( name );\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'id', id );\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'name', name );\r\n\r\n\t},\r\n\r\n\tgetObjectByProperty: function ( name, value ) {\r\n\r\n\t\tif ( this[ name ] === value ) return this;\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar child = this.children[ i ];\r\n\t\t\tvar object = child.getObjectByProperty( name, value );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar scale = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Euler();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldScale: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldDirection: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseAncestors: function ( callback ) {\r\n\r\n\t\tvar parent = this.parent;\r\n\r\n\t\tif ( parent !== null ) {\r\n\r\n\t\t\tcallback( parent );\r\n\r\n\t\t\tparent.traverseAncestors( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\r\n\r\n\t\t\tif ( this.parent === null ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar isRootObject = ( meta === undefined );\r\n\r\n\t\tvar data = {};\r\n\r\n\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t// not providing it implies that this is the root object\r\n\t\t// being serialized.\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\t// initialize meta obj\r\n\t\t\tmeta = {\r\n\t\t\t\tgeometries: {},\r\n\t\t\t\tmaterials: {},\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t\tdata.metadata = {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// standard Object3D serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\r\n\t\tif ( this.visible !== true ) data.visible = this.visible;\r\n\r\n\t\tdata.matrix = this.matrix.toArray();\r\n\r\n\t\tif ( this.children.length > 0 ) {\r\n\r\n\t\t\tdata.children = [];\r\n\r\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tdata.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar output = {};\r\n\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\tvar geometries = extractFromCache( meta.geometries );\r\n\t\t\tvar materials = extractFromCache( meta.materials );\r\n\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\tvar images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\tif ( images.length > 0 ) output.images = images;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = data;\r\n\r\n\t\treturn output;\r\n\r\n\t\t// extract data from the cache hash\r\n\t\t// remove metadata on each item\r\n\t\t// and return as array\r\n\t\tfunction extractFromCache ( cache ) {\r\n\r\n\t\t\tvar values = [];\r\n\t\t\tfor ( var key in cache ) {\r\n\r\n\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function ( recursive ) {\r\n\r\n\t\treturn new this.constructor().copy( this, recursive );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.up.copy( source.up );\r\n\r\n\t\tthis.position.copy( source.position );\r\n\t\tthis.quaternion.copy( source.quaternion );\r\n\t\tthis.scale.copy( source.scale );\r\n\r\n\t\tthis.rotationAutoUpdate = source.rotationAutoUpdate;\r\n\r\n\t\tthis.matrix.copy( source.matrix );\r\n\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.receiveShadow = source.receiveShadow;\r\n\r\n\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\tthis.renderOrder = source.renderOrder;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = source.children[ i ];\r\n\t\t\t\tthis.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\r\n\r\nTHREE.Object3DIdCount = 0;\r\n\r\n// File:src/core/Face3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\r\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\r\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n};\r\n\r\nTHREE.Face3.prototype = {\r\n\r\n\tconstructor: THREE.Face3,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.a = source.a;\r\n\t\tthis.b = source.b;\r\n\t\tthis.c = source.c;\r\n\r\n\t\tthis.normal.copy( source.normal );\r\n\t\tthis.color.copy( source.color );\r\n\r\n\t\tthis.materialIndex = source.materialIndex;\r\n\r\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Face4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\r\n\r\n};\r\n\r\n// File:src/core/BufferAttribute.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferAttribute = function ( array, itemSize ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n};\r\n\r\nTHREE.BufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.BufferAttribute,\r\n\r\n\tget length() {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.array.length / this.itemSize;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.itemSize = source.itemSize;\r\n\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyArray: function ( array ) {\r\n\r\n\t\tthis.array.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyColorsArray: function ( colors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar color = colors[ i ];\r\n\r\n\t\t\tif ( color === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\tcolor = new THREE.Color();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\tarray[ offset ++ ] = color.b;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyIndicesArray: function ( indices ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar index = indices[ i ];\r\n\r\n\t\t\tarray[ offset ++ ] = index.a;\r\n\t\t\tarray[ offset ++ ] = index.b;\r\n\t\t\tarray[ offset ++ ] = index.c;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector2sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector3sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector4sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\tarray[ offset ++ ] = vector.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize ];\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Int8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8ClampedAttribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8ClampedArray( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float64Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float64Array( array ), itemSize );\r\n\r\n};\r\n\r\n\r\n// Deprecated\r\n\r\nTHREE.DynamicBufferAttribute = function ( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\r\n\treturn new THREE.BufferAttribute( array, itemSize ).setDynamic( true );\r\n\r\n};\r\n\r\n// File:src/core/InstancedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferAttribute = function ( array, itemSize, meshPerAttribute ) {\r\n\r\n\tTHREE.BufferAttribute.call( this, array, itemSize );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferAttribute.prototype = Object.create( THREE.BufferAttribute.prototype );\r\nTHREE.InstancedBufferAttribute.prototype.constructor = THREE.InstancedBufferAttribute;\r\n\r\nTHREE.InstancedBufferAttribute.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.BufferAttribute.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBuffer = function ( array, stride ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.stride = stride;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n};\r\n\r\nTHREE.InterleavedBuffer.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBuffer,\r\n\r\n\tget length () {\r\n\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count () {\r\n\r\n\t\treturn this.array.length / this.stride;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.stride = source.stride;\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.stride;\r\n\t\tindex2 *= attribute.stride;\r\n\r\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/InstancedInterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedInterleavedBuffer = function ( array, stride, meshPerAttribute ) {\r\n\r\n\tTHREE.InterleavedBuffer.call( this, array, stride );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype = Object.create( THREE.InterleavedBuffer.prototype );\r\nTHREE.InstancedInterleavedBuffer.prototype.constructor = THREE.InstancedInterleavedBuffer;\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.InterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBufferAttribute = function ( interleavedBuffer, itemSize, offset ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.data = interleavedBuffer;\r\n\tthis.itemSize = itemSize;\r\n\tthis.offset = offset;\r\n\r\n};\r\n\r\n\r\nTHREE.InterleavedBufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBufferAttribute,\r\n\r\n\tget length() {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.data.array.length / this.data.stride;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\t\tthis.data.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Geometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author kile / http://kile.stravaganza.org/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Geometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];\r\n\tthis.faces = [];\r\n\tthis.faceVertexUvs = [ [] ];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphColors = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nTHREE.Geometry.prototype = {\r\n\r\n\tconstructor: THREE.Geometry,\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.verticesNeedUpdate = true;\r\n\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tvar vertices = attributes.position.array;\r\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\r\n\r\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n\t\tvar tempNormals = [];\r\n\t\tvar tempUVs = [];\r\n\t\tvar tempUVs2 = [];\r\n\r\n\t\tfor ( var i = 0, j = 0, k = 0; i < vertices.length; i += 3, j += 2, k += 4 ) {\r\n\r\n\t\t\tscope.vertices.push( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t\t\tif ( normals !== undefined ) {\r\n\r\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( colors !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\ttempUVs2.push( new THREE.Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar addFace = function ( a, b, c ) {\r\n\r\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, c, vertexNormals, vertexColors );\r\n\r\n\t\t\tscope.faces.push( face );\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tif ( indices !== undefined ) {\r\n\r\n\t\t\tvar groups = geometry.groups;\r\n\r\n\t\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( var i = 0; i < vertices.length / 3; i += 3 ) {\r\n\r\n\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tthis.computeBoundingSphere();\r\n\r\n\t\tvar center = this.boundingSphere.center;\r\n\t\tvar radius = this.boundingSphere.radius;\r\n\r\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\t\tmatrix.set(\r\n\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\tthis.applyMatrix( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ f ];\r\n\r\n\t\t\tvar vA = this.vertices[ face.a ];\r\n\t\t\tvar vB = this.vertices[ face.b ];\r\n\t\t\tvar vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tvar v, vl, f, fl, face, vertices;\r\n\r\n\t\tvertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tvar vA, vB, vC;\r\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvA = this.vertices[ face.a ];\r\n\t\t\t\tvB = this.vertices[ face.b ];\r\n\t\t\t\tvC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\tvar i, il, f, fl, face;\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tvar tmpGeo = new THREE.Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\r\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tvar d = 0;\r\n\t\tvar vertices = this.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( i > 0 ) {\r\n\r\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.lineDistances[ i ] = d;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar normalMatrix,\r\n\t\tvertexOffset = this.vertices.length,\r\n\t\tvertices1 = this.vertices,\r\n\t\tvertices2 = geometry.vertices,\r\n\t\tfaces1 = this.faces,\r\n\t\tfaces2 = geometry.faces,\r\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\r\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = vertices2[ i ];\r\n\r\n\t\t\tvar vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\r\n\r\n\t\t\tif ( uv === undefined ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvs1.push( uvCopy );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmergeMesh: function ( mesh ) {\r\n\r\n\t\tif ( mesh instanceof THREE.Mesh === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\r\n\r\n\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\tvar unique = [], changes = [];\r\n\r\n\t\tvar v, key;\r\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\tvar precision = Math.pow( 10, precisionPoints );\r\n\t\tvar i, il, face;\r\n\t\tvar indices, j, jl;\r\n\r\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tv = this.vertices[ i ];\r\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tvar faceIndicesToRemove = [];\r\n\r\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tindices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\tvar dupIndex = - 1;\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tdupIndex = n;\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n\t\t\tvar idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tvar diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Geometry',\r\n\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Geometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tvar vertices = [];\r\n\r\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = [];\r\n\t\tvar normals = [];\r\n\t\tvar normalsHash = {};\r\n\t\tvar colors = [];\r\n\t\tvar colorsHash = {};\r\n\t\tvar uvs = [];\r\n\t\tvar uvsHash = {};\r\n\r\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\r\n\t\t\tvar hasMaterial = false; // face.materialIndex !== undefined;\r\n\t\t\tvar hasFaceUv = false; // deprecated\r\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tvar faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 );\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = {};\r\n\r\n\t\tdata.data.vertices = vertices;\r\n\t\tdata.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\tdata.data.faces = faces;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.vertices = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [ [] ];\r\n\r\n\t\tvar vertices = source.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = source.faces;\r\n\r\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tvar uv = uvs[ k ];\r\n\r\n\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\r\n\r\nTHREE.GeometryIdCount = 0;\r\n\r\n// File:src/core/DirectGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.DirectGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'DirectGeometry';\r\n\r\n\tthis.indices = [];\r\n\tthis.vertices = [];\r\n\tthis.normals = [];\r\n\tthis.colors = [];\r\n\tthis.uvs = [];\r\n\tthis.uvs2 = [];\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.morphTargets = {};\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\t// this.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nTHREE.DirectGeometry.prototype = {\r\n\r\n\tconstructor: THREE.DirectGeometry,\r\n\r\n\tcomputeBoundingBox: THREE.Geometry.prototype.computeBoundingBox,\r\n\tcomputeBoundingSphere: THREE.Geometry.prototype.computeBoundingSphere,\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeGroups: function ( geometry ) {\r\n\r\n\t\tvar group;\r\n\t\tvar groups = [];\r\n\t\tvar materialIndex;\r\n\r\n\t\tvar faces = geometry.faces;\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t// materials\r\n\r\n\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\r\n\t\t\t\tmaterialIndex = face.materialIndex;\r\n\r\n\t\t\t\tif ( group !== undefined ) {\r\n\r\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\tgroups.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group !== undefined ) {\r\n\r\n\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\tgroups.push( group );\r\n\r\n\t\t}\r\n\r\n\t\tthis.groups = groups;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n\t\t// morphs\r\n\r\n\t\tvar morphTargets = geometry.morphTargets;\r\n\t\tvar morphTargetsLength = morphTargets.length;\r\n\r\n\t\tif ( morphTargetsLength > 0 ) {\r\n\r\n\t\t\tvar morphTargetsPosition = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsPosition[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\r\n\t\t}\r\n\r\n\t\tvar morphNormals = geometry.morphNormals;\r\n\t\tvar morphNormalsLength = morphNormals.length;\r\n\r\n\t\tif ( morphNormalsLength > 0 ) {\r\n\r\n\t\t\tvar morphTargetsNormal = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsNormal[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\r\n\t\t}\r\n\r\n\t\t// skins\r\n\r\n\t\tvar skinIndices = geometry.skinIndices;\r\n\t\tvar skinWeights = geometry.skinWeights;\r\n\r\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n\t\t//\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar normal = face.normal;\r\n\r\n\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\tif ( vertexColors.length === 3 ) {\r\n\r\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar color = face.color;\r\n\r\n\t\t\t\tthis.colors.push( color, color, color );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n\t\t\t\t\tthis.uvs.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n\t\t\t\t\tthis.uvs2.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// morphs\r\n\r\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\r\n\r\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// skins\r\n\r\n\t\t\tif ( hasSkinIndices ) {\r\n\r\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasSkinWeights ) {\r\n\r\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeGroups( geometry );\r\n\r\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.DirectGeometry.prototype );\r\n\r\n// File:src/core/BufferGeometry.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.index = null;\r\n\tthis.attributes = {};\r\n\r\n\tthis.morphAttributes = {};\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.drawRange = { start: 0, count: Infinity };\r\n\r\n};\r\n\r\nTHREE.BufferGeometry.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometry,\r\n\r\n\taddIndex: function ( index ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\tthis.setIndex( index );\r\n\r\n\t},\r\n\r\n\tgetIndex: function () {\r\n\r\n\t\treturn this.index;\r\n\r\n\t},\r\n\r\n\tsetIndex: function ( index ) {\r\n\r\n\t\tthis.index = index;\r\n\r\n\t},\r\n\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.BufferAttribute === false && attribute instanceof THREE.InterleavedBufferAttribute === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\tthis.addAttribute( name, new THREE.BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( name === 'index' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\tthis.setIndex( attribute );\r\n\r\n\t\t}\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tremoveAttribute: function ( name ) {\r\n\r\n\t\tdelete this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tget drawcalls() {\r\n\r\n\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\treturn this.groups;\r\n\r\n\t},\r\n\r\n\tget offsets() {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\treturn this.groups;\r\n\r\n\t},\r\n\r\n\taddDrawCall: function ( start, count, indexOffset ) {\r\n\r\n\t\tif ( indexOffset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\tthis.addGroup( start, count );\r\n\r\n\t},\r\n\r\n\tclearDrawCalls: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\tthis.clearGroups();\r\n\r\n\t},\r\n\r\n\taddGroup: function ( start, count, materialIndex ) {\r\n\r\n\t\tthis.groups.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tclearGroups: function () {\r\n\r\n\t\tthis.groups = [];\r\n\r\n\t},\r\n\r\n\tsetDrawRange: function ( start, count ) {\r\n\r\n\t\tthis.drawRange.start = start;\r\n\t\tthis.drawRange.count = count;\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tmatrix.applyToVector3Array( position.array );\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tvar normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Points || object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar positions = new THREE.Float32Attribute( geometry.vertices.length * 3, 3 );\r\n\t\t\tvar colors = new THREE.Float32Attribute( geometry.colors.length * 3, 3 );\r\n\r\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tvar lineDistances = new THREE.Float32Attribute( geometry.lineDistances.length, 1 );\r\n\r\n\t\t\t\tthis.addAttribute( 'lineDistance',  lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\tthis.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateFromObject: function ( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tvar direct = geometry.__directGeometry;\r\n\r\n\t\t\tif ( direct === undefined ) {\r\n\r\n\t\t\t\treturn this.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t\tgeometry = direct;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.position;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.normal;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.color;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n\t\t\tvar attribute = this.attributes.lineDistance;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.groupsNeedUpdate ) {\r\n\r\n\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\tthis.groups = geometry.groups;\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tgeometry.__directGeometry = new THREE.DirectGeometry().fromGeometry( geometry );\r\n\r\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n\t},\r\n\r\n\tfromDirectGeometry: function ( geometry ) {\r\n\r\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colors.length > 0 ) {\r\n\r\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs2.length > 0 ) {\r\n\r\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv2', new THREE.BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.indices.length > 0 ) {\r\n\r\n\t\t\tvar TypeArray = geometry.vertices.length > 65535 ? Uint32Array : Uint16Array;\r\n\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\r\n\t\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\r\n\r\n\t\t}\r\n\r\n\t\t// groups\r\n\r\n\t\tthis.groups = geometry.groups;\r\n\r\n\t\t// morphs\r\n\r\n\t\tfor ( var name in geometry.morphTargets ) {\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ i ];\r\n\r\n\t\t\t\tvar attribute = new THREE.Float32Attribute( morphTarget.length * 3, 3 );\r\n\r\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\t// skinning\r\n\r\n\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\r\n\t\t\tvar skinIndices = new THREE.Float32Attribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\r\n\t\t\tvar skinWeights = new THREE.Float32Attribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tvar bb = this.boundingBox;\r\n\t\t\t\tbb.makeEmpty();\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\tbb.expandByPoint( vector );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( positions === undefined || positions.length === 0 ) {\r\n\r\n\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\r\n\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tbox.makeEmpty();\r\n\r\n\t\t\t\tvar center = this.boundingSphere.center;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\tbox.expandByPoint( vector );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbox.center( center );\r\n\r\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n\t\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tvar index = this.index;\r\n\t\tvar attributes = this.attributes;\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( attributes.position ) {\r\n\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.normal === undefined ) {\r\n\r\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = normals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tnormals[ i ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\tvar vA, vB, vC,\r\n\r\n\t\t\tpA = new THREE.Vector3(),\r\n\t\t\tpB = new THREE.Vector3(),\r\n\t\t\tpC = new THREE.Vector3(),\r\n\r\n\t\t\tcb = new THREE.Vector3(),\r\n\t\t\tab = new THREE.Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\t\tthis.addGroup( 0, indices.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\r\n\r\n\t\t\t\t\tvar group = groups[ j ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\r\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\r\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\r\n\r\n\t\t\t\t\t\tpA.fromArray( positions, vA );\r\n\t\t\t\t\t\tpB.fromArray( positions, vB );\r\n\t\t\t\t\t\tpC.fromArray( positions, vC );\r\n\r\n\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\r\n\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormals[ i ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tattributes.normal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\r\n\tcomputeOffsets: function ( size ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.')\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, offset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n\t\t\tvar attribute1 = attributes[ key ];\r\n\t\t\tvar attributeArray1 = attribute1.array;\r\n\r\n\t\t\tvar attribute2 = geometry.attributes[ key ];\r\n\t\t\tvar attributeArray2 = attribute2.array;\r\n\r\n\t\t\tvar attributeSize = attribute2.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\r\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\r\n\t\tvar x, y, z, n;\r\n\r\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\r\n\r\n\t\t\tx = normals[ i ];\r\n\t\t\ty = normals[ i + 1 ];\r\n\t\t\tz = normals[ i + 2 ];\r\n\r\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\t\tnormals[ i ] *= n;\r\n\t\t\tnormals[ i + 1 ] *= n;\r\n\t\t\tnormals[ i + 2 ] *= n;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard BufferGeometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = { attributes: {} };\r\n\r\n\t\tvar index = this.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( index.array );\r\n\r\n\t\t\tdata.data.index = {\r\n\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\r\n\r\n\t\t\tdata.data.attributes[ key ] = {\r\n\t\t\t\titemSize: attribute.itemSize,\r\n\t\t\t\ttype: attribute.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = this.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tvar index = source.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tthis.setIndex( index.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = source.attributes;\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ name ];\r\n\t\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = source.groups;\r\n\r\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\r\n\r\nTHREE.BufferGeometry.MaxIndex = 65535;\r\n\r\n// File:src/core/InstancedBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferGeometry = function () {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'InstancedBufferGeometry';\r\n\tthis.maxInstancedCount = undefined;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.InstancedBufferGeometry.prototype.constructor = THREE.InstancedBufferGeometry;\r\n\r\nTHREE.InstancedBufferGeometry.prototype.addGroup = function ( start, count, instances ) {\r\n\r\n\tthis.groups.push( {\r\n\r\n\t\tstart: start,\r\n\t\tcount: count,\r\n\t\tinstances: instances\r\n\r\n\t} );\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype.copy = function ( source ) {\r\n\r\n\tvar index = source.index;\r\n\r\n\tif ( index !== null ) {\r\n\r\n\t\tthis.setIndex( index.clone() );\r\n\r\n\t}\r\n\r\n\tvar attributes = source.attributes;\r\n\r\n\tfor ( var name in attributes ) {\r\n\r\n\t\tvar attribute = attributes[ name ];\r\n\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t}\r\n\r\n\tvar groups = source.groups;\r\n\r\n\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\tvar group = groups[ i ];\r\n\t\tthis.addGroup( group.start, group.count, group.instances );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.InstancedBufferGeometry.prototype );\r\n\r\n// File:src/cameras/Camera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.Camera = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new THREE.Matrix4();\r\n\tthis.projectionMatrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Camera.prototype.constructor = THREE.Camera;\r\n\r\nTHREE.Camera.prototype.getWorldDirection = function () {\r\n\r\n\tvar quaternion = new THREE.Quaternion();\r\n\r\n\treturn function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.lookAt = function () {\r\n\r\n\t// This routine does not support cameras with rotated and/or translated parent(s)\r\n\r\n\tvar m1 = new THREE.Matrix4();\r\n\r\n\treturn function ( vector ) {\r\n\r\n\t\tm1.lookAt( this.position, vector, this.up );\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.clone = function () {\r\n\r\n\treturn new this.constructor().copy( this );\r\n\r\n};\r\n\r\nTHREE.Camera.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/cameras/CubeCamera.js\r\n\r\n/**\r\n * Camera for rendering cube maps\r\n *\t- renders scene into axis-aligned cube\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tvar fov = 90, aspect = 1;\r\n\r\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter } );\r\n\r\n\tthis.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n\t\tvar renderTarget = this.renderTarget;\r\n\t\tvar generateMipmaps = renderTarget.generateMipmaps;\r\n\r\n\t\trenderTarget.generateMipmaps = false;\r\n\r\n\t\trenderTarget.activeCubeFace = 0;\r\n\t\trenderer.render( scene, cameraPX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 1;\r\n\t\trenderer.render( scene, cameraNX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 2;\r\n\t\trenderer.render( scene, cameraPY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 3;\r\n\t\trenderer.render( scene, cameraNY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 4;\r\n\t\trenderer.render( scene, cameraPZ, renderTarget );\r\n\r\n\t\trenderTarget.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderTarget.activeCubeFace = 5;\r\n\t\trenderer.render( scene, cameraNZ, renderTarget );\r\n\r\n\t\trenderer.setRenderTarget( null );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\r\n\r\n// File:src/cameras/OrthographicCamera.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.left = left;\r\n\tthis.right = right;\r\n\tthis.top = top;\r\n\tthis.bottom = bottom;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\r\nTHREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera;\r\n\r\nTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\tvar cx = ( this.right + this.left ) / 2;\r\n\tvar cy = ( this.top + this.bottom ) / 2;\r\n\r\n\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Camera.prototype.copy.call( this, source );\r\n\t\r\n\tthis.left = source.left;\r\n\tthis.right = source.right;\r\n\tthis.top = source.top;\r\n\tthis.bottom = source.bottom;\r\n\tthis.near = source.near;\r\n\tthis.far = source.far;\r\n\t\r\n\tthis.zoom = source.zoom;\r\n\t\r\n\treturn this;\r\n\t\t\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.zoom = this.zoom;\r\n\tdata.object.left = this.left;\r\n\tdata.object.right = this.right;\r\n\tdata.object.top = this.top;\r\n\tdata.object.bottom = this.bottom;\r\n\tdata.object.near = this.near;\r\n\tdata.object.far = this.far;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/cameras/PerspectiveCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author greggman / http://games.greggman.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\r\nTHREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera;\r\n\r\n\r\n/**\r\n * Uses Focal Length (in mm) to estimate and set FOV\r\n * 35mm (full-frame) camera is used if frame size is not specified;\r\n * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\r\n\r\n\tif ( frameHeight === undefined ) frameHeight = 24;\r\n\r\n\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\n\r\n/**\r\n * Sets an offset in a larger frustum. This is useful for multi-window or\r\n * multi-monitor/multi-machine setups.\r\n *\r\n * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n * the monitors are in grid like this\r\n *\r\n *   +---+---+---+\r\n *   | A | B | C |\r\n *   +---+---+---+\r\n *   | D | E | F |\r\n *   +---+---+---+\r\n *\r\n * then for each monitor you would call it like this\r\n *\r\n *   var w = 1920;\r\n *   var h = 1080;\r\n *   var fullWidth = w * 3;\r\n *   var fullHeight = h * 2;\r\n *\r\n *   --A--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n *   --B--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n *   --C--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n *   --D--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n *   --E--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n *   --F--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n *\r\n *   Note there is no reason monitors have to be the same size or in a grid.\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\tthis.fullWidth = fullWidth;\r\n\tthis.fullHeight = fullHeight;\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\n\r\nTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\r\n\r\n\tif ( this.fullWidth ) {\r\n\r\n\t\tvar aspect = this.fullWidth / this.fullHeight;\r\n\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\r\n\t\tvar bottom = - top;\r\n\t\tvar left = aspect * bottom;\r\n\t\tvar right = aspect * top;\r\n\t\tvar width = Math.abs( right - left );\r\n\t\tvar height = Math.abs( top - bottom );\r\n\r\n\t\tthis.projectionMatrix.makeFrustum(\r\n\t\t\tleft + this.x * width / this.fullWidth,\r\n\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\r\n\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\r\n\t\t\ttop - this.y * height / this.fullHeight,\r\n\t\t\tthis.near,\r\n\t\t\tthis.far\r\n\t\t);\r\n\r\n\t} else {\r\n\r\n\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Camera.prototype.copy.call( this, source );\r\n\t\r\n\tthis.fov = source.fov;\r\n\tthis.aspect = source.aspect;\r\n\tthis.near = source.near;\r\n\tthis.far = source.far;\r\n\t\r\n\tthis.zoom = source.zoom;\r\n\t\r\n\treturn this;\r\n\t\t\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.zoom = this.zoom;\r\n\tdata.object.fov = this.fov;\r\n\tdata.object.aspect = this.aspect;\r\n\tdata.object.near = this.near;\r\n\tdata.object.far = this.far;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/Light.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Light = function ( color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\r\n};\r\n\r\nTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Light.prototype.constructor = THREE.Light;\r\n\r\nTHREE.Light.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\tthis.color.copy( source.color );\r\n\t\r\n\treturn this;\r\n\r\n};\r\n// File:src/lights/AmbientLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AmbientLight = function ( color ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n};\r\n\r\nTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.AmbientLight.prototype.constructor = THREE.AmbientLight;\r\n\r\nTHREE.AmbientLight.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/DirectionalLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DirectionalLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.onlyShadow = false;\r\n\r\n\tthis.shadowCameraNear = 50;\r\n\tthis.shadowCameraFar = 5000;\r\n\r\n\tthis.shadowCameraLeft = - 500;\r\n\tthis.shadowCameraRight = 500;\r\n\tthis.shadowCameraTop = 500;\r\n\tthis.shadowCameraBottom = - 500;\r\n\r\n\tthis.shadowCameraVisible = false;\r\n\r\n\tthis.shadowBias = 0;\r\n\tthis.shadowDarkness = 0.5;\r\n\r\n\tthis.shadowMapWidth = 512;\r\n\tthis.shadowMapHeight = 512;\r\n\r\n\tthis.shadowMap = null;\r\n\tthis.shadowMapSize = null;\r\n\tthis.shadowCamera = null;\r\n\tthis.shadowMatrix = null;\r\n\r\n};\r\n\r\nTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight;\r\n\r\nTHREE.DirectionalLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.intensity = source.intensity;\r\n\tthis.target = source.target.clone();\r\n\r\n\tthis.castShadow = source.castShadow;\r\n\tthis.onlyShadow = source.onlyShadow;\r\n\r\n\tthis.shadowCameraNear = source.shadowCameraNear;\r\n\tthis.shadowCameraFar = source.shadowCameraFar;\r\n\r\n\tthis.shadowCameraLeft = source.shadowCameraLeft;\r\n\tthis.shadowCameraRight = source.shadowCameraRight;\r\n\tthis.shadowCameraTop = source.shadowCameraTop;\r\n\tthis.shadowCameraBottom = source.shadowCameraBottom;\r\n\r\n\tthis.shadowCameraVisible = source.shadowCameraVisible;\r\n\r\n\tthis.shadowBias = source.shadowBias;\r\n\tthis.shadowDarkness = source.shadowDarkness;\r\n\r\n\tthis.shadowMapWidth = source.shadowMapWidth;\r\n\tthis.shadowMapHeight = source.shadowMapHeight;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.DirectionalLight.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\tdata.object.intensity = this.intensity;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/HemisphereLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\r\n\r\n\tTHREE.Light.call( this, skyColor );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.groundColor = new THREE.Color( groundColor );\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\r\n};\r\n\r\nTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight;\r\n\r\nTHREE.HemisphereLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.groundColor.copy( source.groundColor );\r\n\tthis.intensity = source.intensity;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.HemisphereLight.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\tdata.object.groundColor = this.groundColor.getHex();\r\n\tdata.object.intensity = this.intensity;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/PointLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLight = function ( color, intensity, distance, decay ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n};\r\n\r\nTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.PointLight.prototype.constructor = THREE.PointLight;\r\n\r\nTHREE.PointLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.intensity = source.intensity;\r\n\tthis.distance = source.distance;\r\n\tthis.decay = source.decay;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.PointLight.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\tdata.object.intensity = this.intensity;\r\n\tdata.object.distance = this.distance;\r\n\tdata.object.decay = this.decay;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/SpotLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpotLight = function ( color, intensity, distance, angle, exponent, decay ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.exponent = ( exponent !== undefined ) ? exponent : 10;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.castShadow = false;\r\n\tthis.onlyShadow = false;\r\n\r\n\tthis.shadowCameraNear = 50;\r\n\tthis.shadowCameraFar = 5000;\r\n\tthis.shadowCameraFov = 50;\r\n\r\n\tthis.shadowCameraVisible = false;\r\n\r\n\tthis.shadowBias = 0;\r\n\tthis.shadowDarkness = 0.5;\r\n\r\n\tthis.shadowMapWidth = 512;\r\n\tthis.shadowMapHeight = 512;\r\n\r\n\tthis.shadowMap = null;\r\n\tthis.shadowMapSize = null;\r\n\tthis.shadowCamera = null;\r\n\tthis.shadowMatrix = null;\r\n\r\n};\r\n\r\nTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.SpotLight.prototype.constructor = THREE.SpotLight;\r\n\r\nTHREE.SpotLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.intensity = source.intensity;\r\n\tthis.distance = source.distance;\r\n\tthis.angle = source.angle;\r\n\tthis.exponent = source.exponent;\r\n\tthis.decay = source.decay;\r\n\r\n\tthis.target = source.target.clone();\r\n\r\n\tthis.castShadow = source.castShadow;\r\n\tthis.onlyShadow = source.onlyShadow;\r\n\r\n\tthis.shadowCameraNear = source.shadowCameraNear;\r\n\tthis.shadowCameraFar = source.shadowCameraFar;\r\n\tthis.shadowCameraFov = source.shadowCameraFov;\r\n\r\n\tthis.shadowCameraVisible = source.shadowCameraVisible;\r\n\r\n\tthis.shadowBias = source.shadowBias;\r\n\tthis.shadowDarkness = source.shadowDarkness;\r\n\r\n\tthis.shadowMapWidth = source.shadowMapWidth;\r\n\tthis.shadowMapHeight = source.shadowMapHeight;\r\n\r\n\treturn this;\r\n}\r\n\r\nTHREE.SpotLight.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\tdata.object.intensity = this.intensity;\r\n\tdata.object.distance = this.distance;\r\n\tdata.object.angle = this.angle;\r\n\tdata.object.exponent = this.exponent;\r\n\tdata.object.decay = this.decay;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/loaders/Cache.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Cache = {\r\n\r\n\tenabled: false,\r\n\r\n\tfiles: {},\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {};\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/Loader.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Loader = function () {\r\n\r\n\tthis.onLoadStart = function () {};\r\n\tthis.onLoadProgress = function () {};\r\n\tthis.onLoadComplete = function () {};\r\n\r\n};\r\n\r\nTHREE.Loader.prototype = {\r\n\r\n\tconstructor: THREE.Loader,\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tvar parts = url.split( '/' );\r\n\r\n\t\tif ( parts.length === 1 ) return './';\r\n\r\n\t\tparts.pop();\r\n\r\n\t\treturn parts.join( '/' ) + '/';\r\n\r\n\t},\r\n\r\n\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\r\n\r\n\t\tvar array = [];\r\n\r\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\r\n\r\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tcreateMaterial: ( function () {\r\n\r\n\t\tvar imageLoader;\r\n\r\n\t\treturn function createMaterial( m, texturePath, crossOrigin ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tif ( crossOrigin === undefined && scope.crossOrigin !== undefined ) crossOrigin = scope.crossOrigin;\r\n\r\n\t\t\tif ( imageLoader === undefined ) imageLoader = new THREE.ImageLoader();\r\n\r\n\t\t\tfunction nearest_pow2( n ) {\r\n\r\n\t\t\t\tvar l = Math.log( n ) / Math.LN2;\r\n\t\t\t\treturn Math.pow( 2, Math.round(  l ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction create_texture( where, name, sourceFile, repeat, offset, wrap, anisotropy ) {\r\n\r\n\t\t\t\tvar fullPath = texturePath + sourceFile;\r\n\r\n\t\t\t\tvar texture;\r\n\r\n\t\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\r\n\r\n\t\t\t\tif ( loader !== null ) {\r\n\r\n\t\t\t\t\ttexture = loader.load( fullPath );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture = new THREE.Texture();\r\n\r\n\t\t\t\t\tloader = imageLoader;\r\n\t\t\t\t\tloader.setCrossOrigin( crossOrigin );\r\n\t\t\t\t\tloader.load( fullPath, function ( image ) {\r\n\r\n\t\t\t\t\t\tif ( THREE.Math.isPowerOfTwo( image.width ) === false ||\r\n\t\t\t\t\t\t\tTHREE.Math.isPowerOfTwo( image.height ) === false ) {\r\n\r\n\t\t\t\t\t\t\tvar width = nearest_pow2( image.width );\r\n\t\t\t\t\t\t\tvar height = nearest_pow2( image.height );\r\n\r\n\t\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\t\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\t\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\r\n\r\n\t\t\t\t\t\t\ttexture.image = canvas;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\ttexture.image = image;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.sourceFile = sourceFile;\r\n\r\n\t\t\t\tif ( repeat ) {\r\n\r\n\t\t\t\t\ttexture.repeat.set( repeat[ 0 ], repeat[ 1 ] );\r\n\r\n\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( offset ) {\r\n\r\n\t\t\t\t\ttexture.offset.set( offset[ 0 ], offset[ 1 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( wrap ) {\r\n\r\n\t\t\t\t\tvar wrapMap = {\r\n\t\t\t\t\t\t'repeat': THREE.RepeatWrapping,\r\n\t\t\t\t\t\t'mirror': THREE.MirroredRepeatWrapping\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif ( wrapMap[ wrap[ 0 ] ] !== undefined ) texture.wrapS = wrapMap[ wrap[ 0 ] ];\r\n\t\t\t\t\tif ( wrapMap[ wrap[ 1 ] ] !== undefined ) texture.wrapT = wrapMap[ wrap[ 1 ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( anisotropy ) {\r\n\r\n\t\t\t\t\ttexture.anisotropy = anisotropy;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhere[ name ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction rgb2hex( rgb ) {\r\n\r\n\t\t\t\treturn ( rgb[ 0 ] * 255 << 16 ) + ( rgb[ 1 ] * 255 << 8 ) + rgb[ 2 ] * 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// defaults\r\n\r\n\t\t\tvar mtype = 'MeshLambertMaterial';\r\n\t\t\tvar mpars = {};\r\n\r\n\t\t\t// parameters from model file\r\n\r\n\t\t\tif ( m.shading ) {\r\n\r\n\t\t\t\tvar shading = m.shading.toLowerCase();\r\n\r\n\t\t\t\tif ( shading === 'phong' ) mtype = 'MeshPhongMaterial';\r\n\t\t\t\telse if ( shading === 'basic' ) mtype = 'MeshBasicMaterial';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.blending !== undefined && THREE[ m.blending ] !== undefined ) {\r\n\r\n\t\t\t\tmpars.blending = THREE[ m.blending ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.transparent !== undefined ) {\r\n\r\n\t\t\t\tmpars.transparent = m.transparent;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.opacity !== undefined && m.opacity < 1.0 ) {\r\n\r\n\t\t\t\tmpars.transparent = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.depthTest !== undefined ) {\r\n\r\n\t\t\t\tmpars.depthTest = m.depthTest;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.depthWrite !== undefined ) {\r\n\r\n\t\t\t\tmpars.depthWrite = m.depthWrite;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.visible !== undefined ) {\r\n\r\n\t\t\t\tmpars.visible = m.visible;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.flipSided !== undefined ) {\r\n\r\n\t\t\t\tmpars.side = THREE.BackSide;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.doubleSided !== undefined ) {\r\n\r\n\t\t\t\tmpars.side = THREE.DoubleSide;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.wireframe !== undefined ) {\r\n\r\n\t\t\t\tmpars.wireframe = m.wireframe;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.vertexColors !== undefined ) {\r\n\r\n\t\t\t\tif ( m.vertexColors === 'face' ) {\r\n\r\n\t\t\t\t\tmpars.vertexColors = THREE.FaceColors;\r\n\r\n\t\t\t\t} else if ( m.vertexColors ) {\r\n\r\n\t\t\t\t\tmpars.vertexColors = THREE.VertexColors;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// colors\r\n\r\n\t\t\tif ( m.colorDiffuse ) {\r\n\r\n\t\t\t\tmpars.color = rgb2hex( m.colorDiffuse );\r\n\r\n\t\t\t} else if ( m.DbgColor ) {\r\n\r\n\t\t\t\tmpars.color = m.DbgColor;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.colorEmissive ) {\r\n\r\n\t\t\t\tmpars.emissive = rgb2hex( m.colorEmissive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( mtype === 'MeshPhongMaterial' ) {\r\n\r\n\t\t\t\tif ( m.colorSpecular ) {\r\n\r\n\t\t\t\t\tmpars.specular = rgb2hex( m.colorSpecular );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.specularCoef ) {\r\n\r\n\t\t\t\t\tmpars.shininess = m.specularCoef;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// modifiers\r\n\r\n\t\t\tif ( m.transparency !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Loader: transparency has been renamed to opacity' );\r\n\t\t\t\tm.opacity = m.transparency;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.opacity !== undefined ) {\r\n\r\n\t\t\t\tmpars.opacity = m.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// textures\r\n\r\n\t\t\tif ( texturePath ) {\r\n\r\n\t\t\t\tif ( m.mapDiffuse ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'map', m.mapDiffuse, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapLight ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'lightMap', m.mapLight, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapAO ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'aoMap', m.mapAO, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapBump ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'bumpMap', m.mapBump, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapNormal ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'normalMap', m.mapNormal, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapSpecular ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'specularMap', m.mapSpecular, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapAlpha ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'alphaMap', m.mapAlpha, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\r\n\t\t\tif ( m.mapBumpScale ) {\r\n\r\n\t\t\t\tmpars.bumpScale = m.mapBumpScale;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.mapNormalFactor ) {\r\n\r\n\t\t\t\tmpars.normalScale = new THREE.Vector2( m.mapNormalFactor, m.mapNormalFactor );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar material = new THREE[ mtype ]( mpars );\r\n\r\n\t\t\tif ( m.DbgName !== undefined ) material.name = m.DbgName;\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\nTHREE.Loader.Handlers = {\r\n\r\n\thandlers: [],\r\n\r\n\tadd: function ( regex, loader ) {\r\n\r\n\t\tthis.handlers.push( regex, loader );\r\n\r\n\t},\r\n\r\n\tget: function ( file ) {\r\n\r\n\t\tfor ( var i = 0, l = this.handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tvar regex = this.handlers[ i ];\r\n\t\t\tvar loader  = this.handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/XHRLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.XHRLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.XHRLoader.prototype = {\r\n\r\n\tconstructor: THREE.XHRLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.open( 'GET', url, true );\r\n\r\n\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tTHREE.Cache.add( url, this.response );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this.response );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) request.crossOrigin = this.crossOrigin;\r\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n\t\trequest.send( null );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn request;\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetWithCredentials: function ( value ) {\r\n\r\n\t\tthis.withCredentials = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ImageLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ImageLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.ImageLoader.prototype = {\r\n\r\n\tconstructor: THREE.ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar image = document.createElement( 'img' );\r\n\r\n\t\timage.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tTHREE.Cache.add( url, this );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\timage.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\timage.src = url;\r\n\r\n\t\treturn image;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/JSONLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.JSONLoader = function ( manager ) {\r\n\r\n\tif ( typeof manager === 'boolean' ) {\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\r\n\t\tmanager = undefined;\r\n\r\n\t}\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\tthis.withCredentials = false;\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype = {\r\n\r\n\tconstructor: THREE.JSONLoader,\r\n\r\n\t// Deprecated\r\n\t\r\n\tget statusDomElement () {\r\n\r\n\t\tif ( this._statusDomElement === undefined ) {\r\n\r\n\t\t\tthis._statusDomElement = document.createElement( 'div' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: .statusDomElement has been removed.' );\r\n\t\treturn this._statusDomElement;\r\n\r\n\t},\r\n\r\n\tload: function( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : THREE.Loader.prototype.extractUrlBase( url );\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setWithCredentials( this.withCredentials );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tvar json = JSON.parse( text );\r\n\t\t\tvar metadata = json.metadata;\r\n\r\n\t\t\tif ( metadata !== undefined ) {\r\n\r\n\t\t\t\tif ( metadata.type === 'object' ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( metadata.type === 'scene' ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar object = scope.parse( json, texturePath );\r\n\t\t\tonLoad( object.geometry, object.materials );\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, texturePath ) {\r\n\r\n\t\tvar geometry = new THREE.Geometry(),\r\n\t\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\r\n\r\n\t\tparseModel( scale );\r\n\r\n\t\tparseSkin();\r\n\t\tparseMorphing( scale );\r\n\r\n\t\tgeometry.computeFaceNormals();\r\n\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\tfunction parseModel( scale ) {\r\n\r\n\t\t\tfunction isBitSet( value, position ) {\r\n\r\n\t\t\t\treturn value & ( 1 << position );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar i, j, fi,\r\n\r\n\t\t\toffset, zLength,\r\n\r\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\r\n\r\n\t\t\ttype,\r\n\t\t\tisQuad,\r\n\t\t\thasMaterial,\r\n\t\t\thasFaceVertexUv,\r\n\t\t\thasFaceNormal, hasFaceVertexNormal,\r\n\t\t\thasFaceColor, hasFaceVertexColor,\r\n\r\n\t\tvertex, face, faceA, faceB, hex, normal,\r\n\r\n\t\t\tuvLayer, uv, u, v,\r\n\r\n\t\t\tfaces = json.faces,\r\n\t\t\tvertices = json.vertices,\r\n\t\t\tnormals = json.normals,\r\n\t\t\tcolors = json.colors,\r\n\r\n\t\t\tnUvLayers = 0;\r\n\r\n\t\t\tif ( json.uvs !== undefined ) {\r\n\r\n\t\t\t\t// disregard empty arrays\r\n\r\n\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\r\n\r\n\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = vertices.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\tvertex = new THREE.Vector3();\r\n\r\n\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\r\n\r\n\t\t\t\tgeometry.vertices.push( vertex );\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = faces.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\ttype = faces[ offset ++ ];\r\n\r\n\r\n\t\t\t\tisQuad              = isBitSet( type, 0 );\r\n\t\t\t\thasMaterial         = isBitSet( type, 1 );\r\n\t\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\r\n\t\t\t\thasFaceNormal       = isBitSet( type, 4 );\r\n\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\r\n\t\t\t\thasFaceColor\t     = isBitSet( type, 6 );\r\n\t\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\r\n\r\n\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\r\n\t\t\t\tif ( isQuad ) {\r\n\r\n\t\t\t\t\tfaceA = new THREE.Face3();\r\n\t\t\t\t\tfaceA.a = faces[ offset ];\r\n\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\tfaceB = new THREE.Face3();\r\n\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\r\n\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\r\n\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tfaceA.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\tfaceA.color.setHex( hex );\r\n\t\t\t\t\t\tfaceB.color.setHex( hex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( faceA );\r\n\t\t\t\t\tgeometry.faces.push( faceB );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface = new THREE.Face3();\r\n\t\t\t\t\tface.a = faces[ offset ++ ];\r\n\t\t\t\t\tface.b = faces[ offset ++ ];\r\n\t\t\t\t\tface.c = faces[ offset ++ ];\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tface.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tface.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( face );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tfunction parseSkin() {\r\n\r\n\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\r\n\t\t\tif ( json.skinWeights ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar x =                               json.skinWeights[ i ];\r\n\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.skinIndices ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar a =                               json.skinIndices[ i ];\r\n\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.bones = json.bones;\r\n\r\n\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// could change this to json.animations[0] or remove completely\r\n\r\n\t\t\tgeometry.animation = json.animation;\r\n\t\t\tgeometry.animations = json.animations;\r\n\r\n\t\t};\r\n\r\n\t\tfunction parseMorphing( scale ) {\r\n\r\n\t\t\tif ( json.morphTargets !== undefined ) {\r\n\r\n\t\t\t\tvar i, l, v, vl, dstVertices, srcVertices;\r\n\r\n\t\t\t\tfor ( i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.morphTargets[ i ] = {};\r\n\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\r\n\r\n\t\t\t\t\tdstVertices = geometry.morphTargets[ i ].vertices;\r\n\t\t\t\t\tsrcVertices = json.morphTargets[ i ].vertices;\r\n\r\n\t\t\t\t\tfor ( v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\r\n\t\t\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\r\n\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\r\n\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\r\n\r\n\t\t\t\t\t\tdstVertices.push( vertex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.morphColors !== undefined ) {\r\n\r\n\t\t\t\tvar i, l, c, cl, dstColors, srcColors, color;\r\n\r\n\t\t\t\tfor ( i = 0, l = json.morphColors.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.morphColors[ i ] = {};\r\n\t\t\t\t\tgeometry.morphColors[ i ].name = json.morphColors[ i ].name;\r\n\t\t\t\t\tgeometry.morphColors[ i ].colors = [];\r\n\r\n\t\t\t\t\tdstColors = geometry.morphColors[ i ].colors;\r\n\t\t\t\t\tsrcColors = json.morphColors[ i ].colors;\r\n\r\n\t\t\t\t\tfor ( c = 0, cl = srcColors.length; c < cl; c += 3 ) {\r\n\r\n\t\t\t\t\t\tcolor = new THREE.Color( 0xffaa00 );\r\n\t\t\t\t\t\tcolor.setRGB( srcColors[ c ], srcColors[ c + 1 ], srcColors[ c + 2 ] );\r\n\t\t\t\t\t\tdstColors.push( color );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\r\n\r\n\t\t\treturn { geometry: geometry };\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar materials = THREE.Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\r\n\r\n\t\t\treturn { geometry: geometry, materials: materials };\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/LoadingManager.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\r\n\r\n\tthis.onStart = undefined;\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\titemsTotal ++;\r\n\r\n\t\tif ( isLoading === false ) {\r\n\r\n\t\t\tif ( scope.onStart !== undefined ) {\r\n\r\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisLoading = true;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\titemsLoaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemsLoaded === itemsTotal ) {\r\n\r\n\t\t\tisLoading = false;\r\n\r\n\t\t\tif ( scope.onLoad !== undefined ) {\r\n\r\n\t\t\t\tscope.onLoad();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.itemError = function ( url ) {\r\n\r\n\t\tif ( scope.onError !== undefined ) {\r\n\r\n\t\t\tscope.onError( url );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\r\n\r\n// File:src/loaders/BufferGeometryLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometryLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.BufferGeometryLoader.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar index = json.data.index;\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tvar typedArray = new self[ index.type ]( index.array );\r\n\t\t\tgeometry.setIndex( new THREE.BufferAttribute( typedArray, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = json.data.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\t\t\tvar typedArray = new self[ attribute.type ]( attribute.array );\r\n\r\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n\t\tif ( groups !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\tgeometry.addGroup( group.start, group.count );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = json.data.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tvar center = new THREE.Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/MaterialLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MaterialLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.textures = {};\r\n\r\n};\r\n\r\nTHREE.MaterialLoader.prototype = {\r\n\r\n\tconstructor: THREE.MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetTextures: function ( value ) {\r\n\r\n\t\tthis.textures = value;\r\n\r\n\t},\r\n\r\n\tgetTexture: function ( name ) {\r\n\r\n\t\tvar textures = this.textures;\r\n\r\n\t\tif ( textures[ name ] === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n\t\t}\r\n\r\n\t\treturn textures[ name ];\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar material = new THREE[ json.type ];\r\n\t\tmaterial.uuid = json.uuid;\r\n\r\n\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\r\n\t\t// for PointsMaterial\r\n\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n\t\t// maps\r\n\r\n\t\tif ( json.map !== undefined ) material.map = this.getTexture( json.map );\r\n\r\n\t\tif ( json.alphaMap !== undefined ) {\r\n\r\n\t\t\tmaterial.alphaMap = this.getTexture( json.alphaMap );\r\n\t\t\tmaterial.transparent = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = this.getTexture( json.bumpMap );\r\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n\t\tif ( json.normalMap !== undefined ) material.normalMap = this.getTexture( json.normalMap );\r\n\t\tif ( json.normalScale )\tmaterial.normalScale = new THREE.Vector2( json.normalScale, json.normalScale );\r\n\r\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = this.getTexture( json.displacementMap );\r\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n\t\tif ( json.specularMap !== undefined ) material.specularMap = this.getTexture( json.specularMap );\r\n\r\n\t\tif ( json.envMap !== undefined ) {\r\n\r\n\t\t\tmaterial.envMap = this.getTexture( json.envMap );\r\n\t\t\tmaterial.combine = THREE.MultiplyOperation;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.reflectivity ) material.reflectivity = json.reflectivity;\r\n\r\n\t\tif ( json.lightMap !== undefined ) material.lightMap = this.getTexture( json.lightMap );\r\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n\t\tif ( json.aoMap !== undefined ) material.aoMap = this.getTexture( json.aoMap );\r\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n\t\t// MeshFaceMaterial\r\n\r\n\t\tif ( json.materials !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ObjectLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ObjectLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.texturePath = '';\r\n\r\n};\r\n\r\nTHREE.ObjectLoader.prototype = {\r\n\r\n\tconstructor: THREE.ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.texturePath === '' ) {\r\n\r\n\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tscope.parse( JSON.parse( text ), onLoad );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, onLoad ) {\r\n\r\n\t\tvar geometries = this.parseGeometries( json.geometries );\r\n\r\n\t\tvar images = this.parseImages( json.images, function () {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t} );\r\n\r\n\t\tvar textures  = this.parseTextures( json.textures, images );\r\n\t\tvar materials = this.parseMaterials( json.materials, textures );\r\n\t\tvar object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json ) {\r\n\r\n\t\tvar geometries = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\r\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar geometry;\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.BoxGeometry(\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CircleBufferGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CircleGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CylinderGeometry(\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.SphereGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.SphereBufferGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.DodecahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'OctahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.OctahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TetrahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'RingGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.RingGeometry(\r\n\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TorusGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TorusKnotGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q,\r\n\t\t\t\t\t\t\tdata.heightScale\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TextGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TextGeometry(\r\n\t\t\t\t\t\t\tdata.text,\r\n\t\t\t\t\t\t\tdata.data\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data, this.texturePath ).geometry;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json, textures ) {\r\n\r\n\t\tvar materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar loader = new THREE.MaterialLoader();\r\n\t\t\tloader.setTextures( textures );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar material = loader.parse( json[ i ] );\r\n\t\t\t\tmaterials[ material.uuid ] = material;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseImages: function ( json, onLoad ) {\r\n\r\n\t\tvar scope = this;\r\n\t\tvar images = {};\r\n\r\n\t\tfunction loadImage( url ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\treturn loader.load( url, function () {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json !== undefined && json.length > 0 ) {\r\n\r\n\t\t\tvar manager = new THREE.LoadingManager( onLoad );\r\n\r\n\t\t\tvar loader = new THREE.ImageLoader( manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar image = json[ i ];\r\n\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\r\n\r\n\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t},\r\n\r\n\tparseTextures: function ( json, images ) {\r\n\r\n\t\tfunction parseConstant( value ) {\r\n\r\n\t\t\tif ( typeof( value ) === 'number' ) return value;\r\n\r\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n\t\t\treturn THREE[ value ];\r\n\r\n\t\t}\r\n\r\n\t\tvar textures = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tif ( data.image === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar texture = new THREE.Texture( images[ data.image ] );\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\ttexture.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping );\r\n\t\t\t\tif ( data.offset !== undefined ) texture.offset = new THREE.Vector2( data.offset[ 0 ], data.offset[ 1 ] );\r\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat = new THREE.Vector2( data.repeat[ 0 ], data.repeat[ 1 ] );\r\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter );\r\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter );\r\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\t\t\t\tif ( Array.isArray( data.wrap ) ) {\r\n\r\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ] );\r\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextures[ data.uuid ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn textures;\r\n\r\n\t},\r\n\r\n\tparseObject: function () {\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\treturn function ( data, geometries, materials ) {\r\n\r\n\t\t\tvar object;\r\n\r\n\t\t\tvar getGeometry = function ( name ) {\r\n\r\n\t\t\t\tif ( geometries[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn geometries[ name ];\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar getMaterial = function ( name ) {\r\n\r\n\t\t\t\tif ( materials[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn materials[ name ];\r\n\r\n\t\t\t};\r\n\r\n\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\tcase 'Scene':\r\n\r\n\t\t\t\t\tobject = new THREE.Scene();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.exponent, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\t\tobject = new THREE.Mesh( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'LOD':\r\n\r\n\t\t\t\t\tobject = new THREE.LOD();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Line':\r\n\r\n\t\t\t\t\tobject = new THREE.Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointCloud':\r\n\t\t\t\tcase 'Points':\r\n\r\n\t\t\t\t\tobject = new THREE.Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\t\tobject = new THREE.Sprite( getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Group':\r\n\r\n\t\t\t\t\tobject = new THREE.Group();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tobject = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.uuid = data.uuid;\r\n\r\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\t\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\t\tmatrix.fromArray( data.matrix );\r\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\r\n\t\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\t\tfor ( var child in data.children ) {\r\n\r\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.type === 'LOD' ) {\r\n\r\n\t\t\t\tvar levels = data.levels;\r\n\r\n\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\t\t\tvar level = levels[ l ];\r\n\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n\t\t\t\t\tif ( child !== undefined ) {\r\n\r\n\t\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn object;\r\n\r\n\t\t}\r\n\r\n\t}()\r\n\r\n};\r\n\r\n// File:src/loaders/TextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.TextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.TextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.ImageLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\tvar texture = new THREE.Texture( image );\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/BinaryTextureLoader.js\r\n\r\n/**\r\n * @author Nikos M. / https://github.com/foo123/\r\n *\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n */\r\n\r\nTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\nTHREE.BinaryTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.BinaryTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texture = new THREE.DataTexture();\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tvar texData = scope._parser( buffer );\r\n\r\n\t\t\tif ( ! texData ) return;\r\n\r\n\t\t\tif ( undefined !== texData.image ) {\r\n\r\n\t\t\t\ttexture.image = texData.image;\r\n\r\n\t\t\t} else if ( undefined !== texData.data ) {\r\n\r\n\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\ttexture.image.data = texData.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\r\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\r\n\t\t\tif ( undefined !== texData.format ) {\r\n\r\n\t\t\t\ttexture.format = texData.format;\r\n\r\n\t\t\t}\r\n\t\t\tif ( undefined !== texData.type ) {\r\n\r\n\t\t\t\ttexture.type = texData.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( undefined !== texData.mipmaps ) {\r\n\r\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( 1 === texData.mipmapCount ) {\r\n\r\n\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CompressedTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n */\r\n\r\nTHREE.CompressedTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\n\r\nTHREE.CompressedTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar texture = new THREE.CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\tvar loaded = 0;\r\n\r\n\t\t\tvar loadTexture = function ( i ) {\r\n\r\n\t\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\t\timages[ i ] = {\r\n\t\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n \t\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, onProgress, onError );\r\n\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\r\n\r\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/Material.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Material = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.side = THREE.FrontSide;\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.blendSrc = THREE.SrcAlphaFactor;\r\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = THREE.AddEquation;\r\n\tthis.blendSrcAlpha = null;\r\n\tthis.blendDstAlpha = null;\r\n\tthis.blendEquationAlpha = null;\r\n\r\n\tthis.depthFunc = THREE.LessEqualDepth;\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.colorWrite = true;\r\n\r\n\tthis.precision = null; // override the renderer's default precision for this material\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.alphaTest = 0;\r\n\r\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis._needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.Material.prototype = {\r\n\r\n\tconstructor: THREE.Material,\r\n\r\n\tget needsUpdate () {\r\n\r\n\t\treturn this._needsUpdate;\r\n\r\n\t},\r\n\r\n\tset needsUpdate ( value ) {\r\n\r\n\t\tif ( value === true ) this.update();\r\n\r\n\t\tthis._needsUpdate = value;\r\n\r\n\t},\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( var key in values ) {\r\n\r\n\t\t\tvar newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar currentValue = this[ key ];\r\n\r\n\t\t\tif ( currentValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentValue instanceof THREE.Color ) {\r\n\r\n\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\r\n\r\n\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t} else if ( key === 'overdraw' ) {\r\n\r\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\r\n\t\t\t\tthis[ key ] = Number( newValue );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Material',\r\n\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Material serialization\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.color instanceof THREE.Color ) data.color = this.color.getHex();\r\n\t\tif ( this.emissive instanceof THREE.Color ) data.emissive = this.emissive.getHex();\r\n\t\tif ( this.specular instanceof THREE.Color ) data.specular = this.specular.getHex();\r\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\r\n\t\tif ( this.map instanceof THREE.Texture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\tif ( this.alphaMap instanceof THREE.Texture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\tif ( this.lightMap instanceof THREE.Texture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\t\tif ( this.bumpMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\tdata.bumpScale = this.bumpScale;\r\n\r\n\t\t}\r\n\t\tif ( this.normalMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.normalScale = this.normalScale; // Removed for now, causes issue in editor ui.js\r\n\r\n\t\t}\r\n\t\tif ( this.displacementMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\tdata.displacementBias = this.displacementBias;\r\n\r\n\t\t}\r\n\t\tif ( this.specularMap instanceof THREE.Texture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\t\tif ( this.envMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\t\tif ( this.vertexColors !== undefined && this.vertexColors !== THREE.NoColors ) data.vertexColors = this.vertexColors;\r\n\t\tif ( this.shading !== undefined && this.shading !== THREE.SmoothShading ) data.shading = this.shading;\r\n\t\tif ( this.blending !== undefined && this.blending !== THREE.NormalBlending ) data.blending = this.blending;\r\n\t\tif ( this.side !== undefined && this.side !== THREE.FrontSide ) data.side = this.side;\r\n\r\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.side = source.side;\r\n\r\n\t\tthis.opacity = source.opacity;\r\n\t\tthis.transparent = source.transparent;\r\n\r\n\t\tthis.blending = source.blending;\r\n\r\n\t\tthis.blendSrc = source.blendSrc;\r\n\t\tthis.blendDst = source.blendDst;\r\n\t\tthis.blendEquation = source.blendEquation;\r\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n\t\tthis.depthFunc = source.depthFunc;\r\n\t\tthis.depthTest = source.depthTest;\r\n\t\tthis.depthWrite = source.depthWrite;\r\n\r\n\t\tthis.precision = source.precision;\r\n\r\n\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n\t\tthis.alphaTest = source.alphaTest;\r\n\r\n\t\tthis.overdraw = source.overdraw;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'update' } );\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\t// Deprecated\r\n\r\n\tget wrapAround () {\r\n\r\n\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\r\n\t},\r\n\r\n\tset wrapAround ( boolean ) {\r\n\r\n\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\r\n\t},\r\n\r\n\tget wrapRGB () {\r\n\r\n\t\tconsole.warn( 'THREE.' + this.type + ': .wrapRGB has been removed.' );\r\n\t\treturn new THREE.Color();\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\r\n\r\nTHREE.MaterialIdCount = 0;\r\n\r\n// File:src/materials/LineBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\",\r\n *\r\n *  vertexColors: <bool>\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\r\n\r\nTHREE.LineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\tthis.linecap = source.linecap;\r\n\tthis.linejoin = source.linejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/LineDashedMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>,\r\n *\r\n *  vertexColors: <bool>\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineDashedMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.vertexColors = false;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\r\n\r\nTHREE.LineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\t\r\n\tthis.linewidth = source.linewidth;\r\n\r\n\tthis.scale = source.scale;\r\n\tthis.dashSize = source.dashSize;\r\n\tthis.gapSize = source.gapSize;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\r\n\r\nTHREE.MeshBasicMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\t\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshLambertMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  emissive: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshLambertMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\r\n\r\nTHREE.MeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.emissive.copy( source.emissive );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshPhongMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  emissive: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshPhongMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.specular = new THREE.Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.metal = false;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\r\n\r\nTHREE.MeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.specular.copy( source.specular );\r\n\tthis.shininess = source.shininess;\r\n\r\n\tthis.metal = source.metal;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshDepthMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshDepthMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.morphTargets = false;\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\r\n\r\nTHREE.MeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshNormalMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  shading: THREE.FlatShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshNormalMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this, parameters );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\r\n\r\nTHREE.MeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MultiMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MultiMaterial = function ( materials ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.type = 'MultiMaterial';\r\n\r\n\tthis.materials = materials instanceof Array ? materials : [];\r\n\r\n\tthis.visible = true;\r\n\r\n};\r\n\r\nTHREE.MultiMaterial.prototype = {\r\n\r\n\tconstructor: THREE.MultiMaterial,\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.2,\r\n\t\t\t\ttype: 'material',\r\n\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type,\r\n\t\t\tmaterials: []\r\n\t\t};\r\n\r\n\t\tfor ( var i = 0, l = this.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\toutput.materials.push( this.materials[ i ].toJSON() );\r\n\r\n\t\t}\r\n\r\n\t\toutput.visible = this.visible;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar material = new this.constructor();\r\n\r\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\r\n\r\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.visible = this.visible;\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// backwards compatibility\r\n\r\nTHREE.MeshFaceMaterial = THREE.MultiMaterial;\r\n\r\n// File:src/materials/PointsMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  vertexColors: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.PointsMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'PointsMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.PointsMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.PointsMaterial.prototype.constructor = THREE.PointsMaterial;\r\n\r\nTHREE.PointsMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.size = source.size;\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// backwards compatibility\r\n\r\nTHREE.PointCloudMaterial = function ( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new THREE.PointsMaterial( parameters );\r\n\r\n};\r\n\r\nTHREE.ParticleBasicMaterial = function ( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new THREE.PointsMaterial( parameters );\r\n\r\n};\r\n\r\nTHREE.ParticleSystemMaterial = function ( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new THREE.PointsMaterial( parameters );\r\n\r\n};\r\n\r\n// File:src/materials/ShaderMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.ShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\r\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\r\n\tthis.lights = false; // set to use scene lights\r\n\r\n\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\tthis.derivatives = false; // set to use derivatives\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\r\n\tif ( parameters !== undefined ) {\r\n\r\n\t\tif ( parameters.attributes !== undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\r\n\r\nTHREE.ShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.fragmentShader = source.fragmentShader;\r\n\tthis.vertexShader = source.vertexShader;\r\n\r\n\tthis.uniforms = THREE.UniformsUtils.clone( source.uniforms );\r\n\r\n\tthis.attributes = source.attributes;\r\n\tthis.defines = source.defines;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.lights = source.lights;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.derivatives = source.derivatives;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Material.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.uniforms = this.uniforms;\r\n\tdata.attributes = this.attributes;\r\n\tdata.vertexShader = this.vertexShader;\r\n\tdata.fragmentShader = this.fragmentShader;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/materials/RawShaderMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.RawShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.ShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n};\r\n\r\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\nTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\r\n// File:src/materials/SpriteMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *\tuvOffset: new THREE.Vector2(),\r\n *\tuvScale: new THREE.Vector2(),\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.SpriteMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\tthis.map = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.fog = false;\r\n\r\n\t// set parameters\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\r\n\r\nTHREE.SpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.map = source.map;\r\n\r\n\tthis.rotation = source.rotation;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/textures/Texture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.sourceFile = '';\r\n\r\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\r\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\tthis.version = 0;\r\n\tthis.onUpdate = null;\r\n\r\n};\r\n\r\nTHREE.Texture.DEFAULT_IMAGE = undefined;\r\nTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\r\n\r\nTHREE.Texture.prototype = {\r\n\r\n\tconstructor: THREE.Texture,\r\n\r\n\tset needsUpdate ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.image = source.image;\r\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n\t\tthis.mapping = source.mapping;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\tthis.flipY = source.flipY;\r\n\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n\t\t\treturn meta.textures[ this.uuid ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getDataURL( image ) {\r\n\r\n\t\t\tvar canvas;\r\n\r\n\t\t\tif ( image.toDataURL !== undefined ) {\r\n\r\n\t\t\t\tcanvas = image;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcanvas = document.createElement( 'canvas' );\r\n\t\t\t\tcanvas.width = image.width;\r\n\t\t\t\tcanvas.height = image.height;\r\n\r\n\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Texture',\r\n\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t},\r\n\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tname: this.name,\r\n\r\n\t\t\tmapping: this.mapping,\r\n\r\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\r\n\t\t\tminFilter: this.minFilter,\r\n\t\t\tmagFilter: this.magFilter,\r\n\t\t\tanisotropy: this.anisotropy\r\n\t\t};\r\n\r\n\t\tif ( this.image !== undefined ) {\r\n\r\n\t\t\t// TODO: Move to THREE.Image\r\n\r\n\t\t\tvar image = this.image;\r\n\r\n\t\t\tif ( image.uuid === undefined ) {\r\n\r\n\t\t\t\timage.uuid = THREE.Math.generateUUID(); // UGH\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\turl: getDataURL( image )\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.image = image.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tmeta.textures[ this.uuid ] = output;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\ttransformUv: function ( uv ) {\r\n\r\n\t\tif ( this.mapping !== THREE.UVMapping )  return;\r\n\r\n\t\tuv.multiply( this.repeat );\r\n\t\tuv.add( this.offset );\r\n\r\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapS ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapT ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.flipY ) {\r\n\r\n\t\t\tuv.y = 1 - uv.y;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\r\n\r\nTHREE.TextureIdCount = 0;\r\n\r\n// File:src/textures/CanvasTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CanvasTexture = function ( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.CanvasTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CanvasTexture.prototype.constructor = THREE.CanvasTexture;\r\n\r\n// File:src/textures/CubeTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\r\n\r\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.images = images;\r\n\tthis.flipY = false;\r\n\r\n};\r\n\r\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\r\n\r\nTHREE.CubeTexture.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Texture.prototype.copy.call( this, source );\r\n\t\r\n\tthis.images = source.images;\r\n\t\r\n\treturn this;\r\n\r\n};\r\n// File:src/textures/CompressedTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n};\r\n\r\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\r\n\r\n// File:src/textures/DataTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { data: data, width: width, height: height };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\r\n\t\r\n\tthis.flipY = false;\r\n\tthis.generateMipmaps  = false;\r\n\r\n};\r\n\r\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\r\n\r\n// File:src/textures/VideoTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tvar scope = this;\r\n\r\n\tvar update = function () {\r\n\r\n\t\trequestAnimationFrame( update );\r\n\r\n\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\r\n\r\n\t\t\tscope.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tupdate();\r\n\r\n};\r\n\r\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\r\n\r\n// File:src/objects/Group.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Group = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n};\r\n\r\nTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Group.prototype.constructor = THREE.Group;\r\n// File:src/objects/Points.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Points = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Points';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.PointsMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Points.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Points.prototype.constructor = THREE.Points;\r\n\r\nTHREE.Points.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar object = this;\r\n\t\tvar geometry = object.geometry;\r\n\t\tvar threshold = raycaster.params.Points.threshold;\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tvar localThresholdSq = localThreshold * localThreshold;\r\n\t\tvar position = new THREE.Vector3();\r\n\r\n\t\tfunction testPoint( point, index ) {\r\n\r\n\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\r\n\r\n\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\r\n\t\t\t\tintersectPoint.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\t\t\tpoint: intersectPoint.clone(),\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tobject: object\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar a = indices[ i ];\r\n\r\n\t\t\t\t\tposition.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\ttestPoint( position, a );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tposition.fromArray( positions, i * 3 );\r\n\r\n\t\t\t\t\ttestPoint( position, i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\ttestPoint( vertices[ i ], i );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Points.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\nTHREE.Points.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t// only serialize if not in meta geometries cache\r\n\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\r\n\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON();\r\n\r\n\t}\r\n\r\n\t// only serialize if not in meta materials cache\r\n\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\r\n\t}\r\n\r\n\tdata.object.geometry = this.geometry.uuid;\r\n\tdata.object.material = this.material.uuid;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// Backwards compatibility\r\n\r\nTHREE.PointCloud = function ( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\treturn new THREE.Points( geometry, material );\r\n\r\n};\r\n\r\nTHREE.ParticleSystem = function ( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\treturn new THREE.Points( geometry, material );\r\n\r\n};\r\n\r\n// File:src/objects/Line.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Line = function ( geometry, material, mode ) {\r\n\r\n\tif ( mode === 1 ) {\r\n\r\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\r\n\t\treturn new THREE.LineSegments( geometry, material );\r\n\r\n\t}\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Line.prototype.constructor = THREE.Line;\r\n\r\nTHREE.Line.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar precision = raycaster.linePrecision;\r\n\t\tvar precisionSq = precision * precision;\r\n\r\n\t\tvar geometry = this.geometry;\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tvar vStart = new THREE.Vector3();\r\n\t\tvar vEnd = new THREE.Vector3();\r\n\t\tvar interSegment = new THREE.Vector3();\r\n\t\tvar interRay = new THREE.Vector3();\r\n\t\tvar step = this instanceof THREE.LineSegments ? 2 : 1;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvar a = indices[ i ];\r\n\t\t\t\t\tvar b = indices[ i + 1 ];\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar nbVertices = vertices.length;\r\n\r\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\tindex: i,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Line.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\nTHREE.Line.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t// only serialize if not in meta geometries cache\r\n\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\r\n\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON();\r\n\r\n\t}\r\n\r\n\t// only serialize if not in meta materials cache\r\n\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\r\n\t}\r\n\r\n\tdata.object.geometry = this.geometry.uuid;\r\n\tdata.object.material = this.material.uuid;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// DEPRECATED\r\n\r\nTHREE.LineStrip = 0;\r\nTHREE.LinePieces = 1;\r\n\r\n// File:src/objects/LineSegments.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LineSegments = function ( geometry, material ) {\r\n\r\n\tTHREE.Line.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineSegments';\r\n\r\n};\r\n\r\nTHREE.LineSegments.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.LineSegments.prototype.constructor = THREE.LineSegments;\r\n\r\n// File:src/objects/Mesh.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author jonobr1 / http://jonobr1.com/\r\n */\r\n\r\nTHREE.Mesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Mesh.prototype.constructor = THREE.Mesh;\r\n\r\nTHREE.Mesh.prototype.updateMorphTargets = function () {\r\n\r\n\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\r\n\r\n\t\tthis.morphTargetBase = - 1;\r\n\t\tthis.morphTargetInfluences = [];\r\n\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\r\n\r\n\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\r\n\r\n\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\r\n\r\n\t\treturn this.morphTargetDictionary[ name ];\r\n\r\n\t}\r\n\r\n\tconsole.warn( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\r\n\r\n\treturn 0;\r\n\r\n};\r\n\r\n\r\nTHREE.Mesh.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\tvar vA = new THREE.Vector3();\r\n\tvar vB = new THREE.Vector3();\r\n\tvar vC = new THREE.Vector3();\r\n\r\n\tvar tempA = new THREE.Vector3();\r\n\tvar tempB = new THREE.Vector3();\r\n\tvar tempC = new THREE.Vector3();\r\n\r\n\tvar uvA = new THREE.Vector2();\r\n\tvar uvB = new THREE.Vector2();\r\n\tvar uvC = new THREE.Vector2();\r\n\r\n\tvar barycoord = new THREE.Vector3();\r\n\r\n\tvar intersectionPoint = new THREE.Vector3();\r\n\tvar intersectionPointWorld = new THREE.Vector3();\r\n\r\n\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\r\n\r\n\t\tTHREE.Triangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\r\n\r\n\t\tuv1.multiplyScalar( barycoord.x );\r\n\t\tuv2.multiplyScalar( barycoord.y );\r\n\t\tuv3.multiplyScalar( barycoord.z );\r\n\r\n\t\tuv1.add( uv2 ).add( uv3 );\r\n\r\n\t\treturn uv1.clone();\r\n\r\n\t}\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar geometry = this.geometry;\r\n\t\tvar material = this.material;\r\n\r\n\t\tif ( material === undefined ) return;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// Check boundingBox before continuing\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar a, b, c;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\ta = indices[ i ];\r\n\t\t\t\t\tb = indices[ i + 1 ];\r\n\t\t\t\t\tc = indices[ i + 2 ];\r\n\r\n\t\t\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( vC, vB, vA, true, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tvar uv;\r\n\r\n\t\t\t\t\tif ( attributes.uv !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar uvs = attributes.uv.array;\r\n\t\t\t\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\t\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\t\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\t\t\t\t\t\tuv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\t\tuv: uv,\r\n\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\tfaceIndex: Math.floor( i / 3 ), // triangle number in indices buffer semantics\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\tvA.fromArray( positions, i );\r\n\t\t\t\t\tvB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tvC.fromArray( positions, i + 6 );\r\n\r\n\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( vC, vB, vA, true, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tvar uv;\r\n\r\n\t\t\t\t\tif ( attributes.uv !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar uvs = attributes.uv.array;\r\n\t\t\t\t\t\tuvA.fromArray( uvs, i );\r\n\t\t\t\t\t\tuvB.fromArray( uvs, i + 2 );\r\n\t\t\t\t\t\tuvC.fromArray( uvs, i + 4 );\r\n\t\t\t\t\t\tuv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ta = i / 3;\r\n\t\t\t\t\tb = a + 1;\r\n\t\t\t\t\tc = a + 2;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\t\tuv: uv,\r\n\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\tindex: a, // triangle number in positions buffer semantics\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar isFaceMaterial = material instanceof THREE.MeshFaceMaterial;\r\n\t\t\tvar materials = isFaceMaterial === true ? material.materials : null;\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar faces = geometry.faces;\r\n\r\n\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tvar face = faces[ f ];\r\n\t\t\t\tvar faceMaterial = isFaceMaterial === true ? materials[ face.materialIndex ] : material;\r\n\r\n\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\r\n\t\t\t\ta = vertices[ face.a ];\r\n\t\t\t\tb = vertices[ face.b ];\r\n\t\t\t\tc = vertices[ face.c ];\r\n\r\n\t\t\t\tif ( faceMaterial.morphTargets === true ) {\r\n\r\n\t\t\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\r\n\r\n\t\t\t\t\tvA.set( 0, 0, 0 );\r\n\t\t\t\t\tvB.set( 0, 0, 0 );\r\n\t\t\t\t\tvC.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\r\n\t\t\t\t\t\tvar influence = morphInfluences[ t ];\r\n\r\n\t\t\t\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\r\n\r\n\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], a ), influence );\r\n\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], b ), influence );\r\n\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], c ), influence );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvA.add( a );\r\n\t\t\t\t\tvB.add( b );\r\n\t\t\t\t\tvC.add( c );\r\n\r\n\t\t\t\t\ta = vA;\r\n\t\t\t\t\tb = vB;\r\n\t\t\t\t\tc = vC;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( faceMaterial.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\tif ( ray.intersectTriangle( c, b, a, true, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( ray.intersectTriangle( a, b, c, faceMaterial.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tvar uv;\r\n\r\n\t\t\t\tif ( geometry.faceVertexUvs[ 0 ].length > 0 ) {\r\n\r\n\t\t\t\t\tvar uvs = geometry.faceVertexUvs[ 0 ][ f ];\r\n\t\t\t\t\tuvA.copy( uvs[ 0 ] );\r\n\t\t\t\t\tuvB.copy( uvs[ 1 ] );\r\n\t\t\t\t\tuvC.copy( uvs[ 2 ] );\r\n\t\t\t\t\tuv = uvIntersection( intersectionPoint, a, b, c, uvA, uvB, uvC );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\tuv: uv,\r\n\t\t\t\t\tface: face,\r\n\t\t\t\t\tfaceIndex: f,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Mesh.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t// only serialize if not in meta geometries cache\r\n\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\r\n\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON( meta );\r\n\r\n\t}\r\n\r\n\t// only serialize if not in meta materials cache\r\n\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON( meta );\r\n\r\n\t}\r\n\r\n\tdata.object.geometry = this.geometry.uuid;\r\n\tdata.object.material = this.material.uuid;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/objects/Bone.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Bone = function ( skin ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Bone';\r\n\r\n\tthis.skin = skin;\r\n\r\n};\r\n\r\nTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Bone.prototype.constructor = THREE.Bone;\r\n\r\nTHREE.Bone.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\tthis.skin = source.skin;\r\n\t\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/objects/Skeleton.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author michael guerrero / http://realitymeltdown.com\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\r\n\r\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\r\n\r\n\tthis.identityMatrix = new THREE.Matrix4();\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\r\n\t// create a bone texture or an array of floats\r\n\r\n\tif ( this.useVertexTexture ) {\r\n\r\n\t\t// layout (1 matrix = 4 pixels)\r\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\t\t\r\n\t\tvar size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\tsize = THREE.Math.nextPowerOfTwo( Math.ceil( size ) );\r\n\t\tsize = Math.max( size, 4 );\r\n\r\n\t\tthis.boneTextureWidth = size;\r\n\t\tthis.boneTextureHeight = size;\r\n\r\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\r\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\r\n\r\n\t} else {\r\n\r\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\r\n\r\n\t}\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.calculateInverses = function () {\r\n\r\n\tthis.boneInverses = [];\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tvar inverse = new THREE.Matrix4();\r\n\r\n\t\tif ( this.bones[ b ] ) {\r\n\r\n\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tthis.boneInverses.push( inverse );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.pose = function () {\r\n\r\n\tvar bone;\r\n\r\n\t// recover the bind-time world matrices\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// compute the local matrices, positions, rotations and scales\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tif ( bone.parent ) {\r\n\r\n\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.update = ( function () {\r\n\r\n\tvar offsetMatrix = new THREE.Matrix4();\r\n\r\n\treturn function update() {\r\n\r\n\t\t// flatten bone matrices to array\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\r\n\r\n\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\r\n\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.useVertexTexture ) {\r\n\r\n\t\t\tthis.boneTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nTHREE.Skeleton.prototype.clone = function () {\r\n\r\n\treturn new THREE.Skeleton( this.bones, this.boneInverses, this.useVertexTexture );\r\n\r\n};\r\n\r\n// File:src/objects/SkinnedMesh.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = \"attached\";\r\n\tthis.bindMatrix = new THREE.Matrix4();\r\n\tthis.bindMatrixInverse = new THREE.Matrix4();\r\n\r\n\t// init bones\r\n\r\n\t// TODO: remove bone creation as there is no reason (other than\r\n\t// convenience) for THREE.SkinnedMesh to do this.\r\n\r\n\tvar bones = [];\r\n\r\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\r\n\r\n\t\tvar bone, gbone;\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tbone = new THREE.Bone( this );\r\n\t\t\tbones.push( bone );\r\n\r\n\t\t\tbone.name = gbone.name;\r\n\t\t\tbone.position.fromArray( gbone.pos );\r\n\t\t\tbone.quaternion.fromArray( gbone.rotq );\r\n\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tif ( gbone.parent !== - 1 ) {\r\n\r\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.add( bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.normalizeSkinWeights();\r\n\r\n\tthis.updateMatrixWorld( true );\r\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ), this.matrixWorld );\r\n\r\n};\r\n\r\n\r\nTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh;\r\n\r\nTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\r\n\r\n\tthis.skeleton = skeleton;\r\n\r\n\tif ( bindMatrix === undefined ) {\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\t\t\r\n\t\tthis.skeleton.calculateInverses();\r\n\r\n\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t}\r\n\r\n\tthis.bindMatrix.copy( bindMatrix );\r\n\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.pose = function () {\r\n\r\n\tthis.skeleton.pose();\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\r\n\r\n\tif ( this.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tfor ( var i = 0; i < this.geometry.skinIndices.length; i ++ ) {\r\n\r\n\t\t\tvar sw = this.geometry.skinWeights[ i ];\r\n\r\n\t\t\tvar scale = 1.0 / sw.lengthManhattan();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tsw.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsw.set( 1 ); // this will be normalized by the shader anyway\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\t// skinning weights assumed to be normalized for THREE.BufferGeometry\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\r\n\r\n\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\r\n\r\n\tif ( this.bindMode === \"attached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t} else if ( this.bindMode === \"detached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.SkinnedMesh unrecognized bindMode: ' + this.bindMode );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.clone = function() {\r\n\r\n\treturn new this.constructor( this.geometry, this.material, this.useVertexTexture ).copy( this );\r\n\r\n};\r\n\r\n// File:src/objects/MorphAnimMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphAnimMesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'MorphAnimMesh';\r\n\r\n\t// API\r\n\r\n\tthis.duration = 1000; // milliseconds\r\n\tthis.mirroredLoop = false;\r\n\tthis.time = 0;\r\n\r\n\t// internals\r\n\r\n\tthis.lastKeyframe = 0;\r\n\tthis.currentKeyframe = 0;\r\n\r\n\tthis.direction = 1;\r\n\tthis.directionBackwards = false;\r\n\r\n\tthis.setFrameRange( 0, geometry.morphTargets.length - 1 );\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.MorphAnimMesh.prototype.constructor = THREE.MorphAnimMesh;\r\n\r\nTHREE.MorphAnimMesh.prototype.setFrameRange = function ( start, end ) {\r\n\r\n\tthis.startKeyframe = start;\r\n\tthis.endKeyframe = end;\r\n\r\n\tthis.length = this.endKeyframe - this.startKeyframe + 1;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setDirectionForward = function () {\r\n\r\n\tthis.direction = 1;\r\n\tthis.directionBackwards = false;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setDirectionBackward = function () {\r\n\r\n\tthis.direction = - 1;\r\n\tthis.directionBackwards = true;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.parseAnimations = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tif ( ! geometry.animations ) geometry.animations = {};\r\n\r\n\tvar firstAnimation, animations = geometry.animations;\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar parts = morph.name.match( pattern );\r\n\r\n\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\tvar label = parts[ 1 ];\r\n\r\n\t\t\tif ( ! animations[ label ] ) animations[ label ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar animation = animations[ label ];\r\n\r\n\t\t\tif ( i < animation.start ) animation.start = i;\r\n\t\t\tif ( i > animation.end ) animation.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = label;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setAnimationLabel = function ( label, start, end ) {\r\n\r\n\tif ( ! this.geometry.animations ) this.geometry.animations = {};\r\n\r\n\tthis.geometry.animations[ label ] = { start: start, end: end };\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.playAnimation = function ( label, fps ) {\r\n\r\n\tvar animation = this.geometry.animations[ label ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tthis.setFrameRange( animation.start, animation.end );\r\n\t\tthis.duration = 1000 * ( ( animation.end - animation.start ) / fps );\r\n\t\tthis.time = 0;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.MorphAnimMesh: animation[' + label + '] undefined in .playAnimation()' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.updateAnimation = function ( delta ) {\r\n\r\n\tvar frameTime = this.duration / this.length;\r\n\r\n\tthis.time += this.direction * delta;\r\n\r\n\tif ( this.mirroredLoop ) {\r\n\r\n\t\tif ( this.time > this.duration || this.time < 0 ) {\r\n\r\n\t\t\tthis.direction *= - 1;\r\n\r\n\t\t\tif ( this.time > this.duration ) {\r\n\r\n\t\t\t\tthis.time = this.duration;\r\n\t\t\t\tthis.directionBackwards = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.time < 0 ) {\r\n\r\n\t\t\t\tthis.time = 0;\r\n\t\t\t\tthis.directionBackwards = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tthis.time = this.time % this.duration;\r\n\r\n\t\tif ( this.time < 0 ) this.time += this.duration;\r\n\r\n\t}\r\n\r\n\tvar keyframe = this.startKeyframe + THREE.Math.clamp( Math.floor( this.time / frameTime ), 0, this.length - 1 );\r\n\r\n\tvar influences = this.morphTargetInfluences;\r\n\r\n\tif ( keyframe !== this.currentKeyframe ) {\r\n\r\n\t\tinfluences[ this.lastKeyframe ] = 0;\r\n\t\tinfluences[ this.currentKeyframe ] = 1;\r\n\t\tinfluences[ keyframe ] = 0;\r\n\r\n\t\tthis.lastKeyframe = this.currentKeyframe;\r\n\t\tthis.currentKeyframe = keyframe;\r\n\r\n\t}\r\n\r\n\tvar mix = ( this.time % frameTime ) / frameTime;\r\n\r\n\tif ( this.directionBackwards ) {\r\n\r\n\t\tmix = 1 - mix;\r\n\r\n\t}\r\n\r\n\tinfluences[ this.currentKeyframe ] = mix;\r\n\tinfluences[ this.lastKeyframe ] = 1 - mix;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.interpolateTargets = function ( a, b, t ) {\r\n\r\n\tvar influences = this.morphTargetInfluences;\r\n\r\n\tfor ( var i = 0, l = influences.length; i < l; i ++ ) {\r\n\r\n\t\tinfluences[ i ] = 0;\r\n\r\n\t}\r\n\r\n\tif ( a > - 1 ) influences[ a ] = 1 - t;\r\n\tif ( b > - 1 ) influences[ b ] = t;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Mesh.prototype.copy.call( this, source );\r\n\r\n\tthis.duration = source.duration;\r\n\tthis.mirroredLoop = source.mirroredLoop;\r\n\tthis.time = source.time;\r\n\r\n\tthis.lastKeyframe = source.lastKeyframe;\r\n\tthis.currentKeyframe = source.currentKeyframe;\r\n\r\n\tthis.direction = source.direction;\r\n\tthis.directionBackwards = source.directionBackwards;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/objects/LOD.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LOD = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'LOD';\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tlevels: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: []\r\n\t\t},\r\n\t\tobjects: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\t\treturn this.levels;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n};\r\n\r\n\r\nTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.LOD.prototype.constructor = THREE.LOD;\r\n\r\nTHREE.LOD.prototype.addLevel = function ( object, distance ) {\r\n\r\n\tif ( distance === undefined ) distance = 0;\r\n\r\n\tdistance = Math.abs( distance );\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\tif ( distance < levels[ l ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n\tthis.add( object );\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tif ( distance < levels[ i ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn levels[ i - 1 ].object;\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\r\n\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.LOD.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function update( camera ) {\r\n\r\n\t\tvar levels = this.levels;\r\n\r\n\t\tif ( levels.length > 1 ) {\r\n\r\n\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tvar distance = v1.distanceTo( v2 );\r\n\r\n\t\t\tlevels[ 0 ].object.visible = true;\r\n\r\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\r\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\tlevels[ i ].object.visible = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.LOD.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source, false );\r\n\r\n\tvar levels = source.levels;\r\n\r\n\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tvar level = levels[ i ];\r\n\r\n\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.levels = [];\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tvar level = levels[ i ];\r\n\r\n\t\tdata.object.levels.push( {\r\n\t\t\tobject: level.object.uuid,\r\n\t\t\tdistance: level.distance\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/objects/Sprite.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Sprite = ( function () {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\r\n\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\r\n\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\treturn function Sprite( material ) {\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tthis.type = 'Sprite';\r\n\r\n\t\tthis.geometry = geometry;\r\n\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Sprite.prototype.constructor = THREE.Sprite;\r\n\r\nTHREE.Sprite.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distanceSq = raycaster.ray.distanceSqToPoint( matrixPosition );\r\n\t\tvar guessSizeSq = this.scale.x * this.scale.y;\r\n\r\n\t\tif ( distanceSq > guessSizeSq ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: Math.sqrt( distanceSq ),\r\n\t\t\tpoint: this.position,\r\n\t\t\tface: null,\r\n\t\t\tobject: this\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Sprite.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.material ).copy( this );\r\n\r\n};\r\n\r\nTHREE.Sprite.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t// only serialize if not in meta materials cache\r\n\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\r\n\t}\r\n\r\n\tdata.object.material = this.material.uuid;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// Backwards compatibility\r\n\r\nTHREE.Particle = THREE.Sprite;\r\n\r\n// File:src/objects/LensFlare.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.lensFlares = [];\r\n\r\n\tthis.positionScreen = new THREE.Vector3();\r\n\tthis.customUpdateCallback = undefined;\r\n\r\n\tif ( texture !== undefined ) {\r\n\r\n\t\tthis.add( texture, size, distance, blending, color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.LensFlare.prototype.constructor = THREE.LensFlare;\r\n\r\n\r\n/*\r\n * Add: adds another flare\r\n */\r\n\r\nTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\r\n\r\n\tif ( size === undefined ) size = - 1;\r\n\tif ( distance === undefined ) distance = 0;\r\n\tif ( opacity === undefined ) opacity = 1;\r\n\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\r\n\tif ( blending === undefined ) blending = THREE.NormalBlending;\r\n\r\n\tdistance = Math.min( distance, Math.max( 0, distance ) );\r\n\r\n\tthis.lensFlares.push( {\r\n\t\ttexture: texture,\t// THREE.Texture\r\n\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\r\n\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\r\n\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\r\n\t\tscale: 1, \t\t// scale\r\n\t\trotation: 0, \t\t// rotation\r\n\t\topacity: opacity,\t// opacity\r\n\t\tcolor: color,\t\t// color\r\n\t\tblending: blending\t// blending\r\n\t} );\r\n\r\n};\r\n\r\n/*\r\n * Update lens flares update positions on all flares based on the screen position\r\n * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n */\r\n\r\nTHREE.LensFlare.prototype.updateLensFlares = function () {\r\n\r\n\tvar f, fl = this.lensFlares.length;\r\n\tvar flare;\r\n\tvar vecX = - this.positionScreen.x * 2;\r\n\tvar vecY = - this.positionScreen.y * 2;\r\n\r\n\tfor ( f = 0; f < fl; f ++ ) {\r\n\r\n\t\tflare = this.lensFlares[ f ];\r\n\r\n\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\r\n\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\r\n\r\n\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\r\n\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.positionScreen.copy( source.positionScreen );\r\n\tthis.customUpdateCallback = source.customUpdateCallback;\r\n\r\n\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\r\n\r\n\t\tthis.lensFlares.push( source.lensFlares[ i ] );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/scenes/Scene.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Scene = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.fog = null;\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n};\r\n\r\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Scene.prototype.constructor = THREE.Scene;\r\n\r\nTHREE.Scene.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n\tthis.autoUpdate = source.autoUpdate;\r\n\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/scenes/Fog.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Fog = function ( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n};\r\n\r\nTHREE.Fog.prototype.clone = function () {\r\n\r\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\r\n\r\n};\r\n\r\n// File:src/scenes/FogExp2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.FogExp2 = function ( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n};\r\n\r\nTHREE.FogExp2.prototype.clone = function () {\r\n\r\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderChunk.js\r\n\r\nTHREE.ShaderChunk = {};\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_pars_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tuniform sampler2D alphaMap;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphatest_fragment'] = \"#ifdef ALPHATEST\\n\\n\tif ( diffuseColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_fragment'] = \"#ifdef USE_AOMAP\\n\\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_pars_fragment'] = \"#ifdef USE_AOMAP\\n\\n\tuniform sampler2D aoMap;\\n\tuniform float aoMapIntensity;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/begin_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'begin_vertex'] = \"\\nvec3 transformed = vec3( position );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'beginnormal_vertex'] = \"\\nvec3 objectNormal = vec3( normal );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment'] = \"#ifdef USE_BUMPMAP\\n\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\tvec2 dHdxy_fwd() {\\n\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\n\t\treturn vec2( dBx, dBy );\\n\\n\t}\\n\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\t\t// normalized\\n\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\t}\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_fragment'] = \"#ifdef USE_COLOR\\n\\n\tdiffuseColor.rgb *= vColor;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_fragment'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvColor.xyz = color.xyz;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/common.glsl\r\n\r\nTHREE.ShaderChunk[ 'common'] = \"#define PI 3.14159\\n#define PI2 6.28318\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\n\\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\\n\\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\\n\\n}\\n\\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\\n\\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\\n\\n}\\n\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\n\treturn - distance * planeNormal + point;\\n\\n}\\n\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n\\n}\\n\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n\\n}\\n\\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\\n\\n\tif ( decayExponent > 0.0 ) {\\n\\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\n\t}\\n\\n\treturn 1.0;\\n\\n}\\n\\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\\n\\n\t// Original approximation by Christophe Schlick '94\\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\\n\\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\\n\\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n\\n}\\n\\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\\n\\n\t// geometry term is (n⋅l)(n⋅v) / 4(n⋅l)(n⋅v)\\n\\n\treturn 0.25;\\n\\n}\\n\\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\\n\\n\t// factor of 1/PI in distribution term omitted\\n\\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n\\n}\\n\\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\\n\\n\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\n\t//float dotNL = saturate( dot( normal, lightDir ) );\\n\t//float dotNV = saturate( dot( normal, viewDir ) );\\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\\n\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\\n\\n\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\n\treturn F * G * D;\\n\\n}\\n\\nvec3 inputToLinear( in vec3 a ) {\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\\n\\n\t#else\\n\\n\t\treturn a;\\n\\n\t#endif\\n\\n}\\n\\nvec3 linearToOutput( in vec3 a ) {\\n\\n\t#ifdef GAMMA_OUTPUT\\n\\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\\n\\n\t#else\\n\\n\t\treturn a;\\n\\n\t#endif\\n\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'defaultnormal_vertex'] = \"#ifdef FLIP_SIDED\\n\\n\tobjectNormal = -objectNormal;\\n\\n#endif\\n\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_vertex'] = \"#ifdef USE_DISPLACEMENTMAP\\n\\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_pars_vertex'] = \"#ifdef USE_DISPLACEMENTMAP\\n\\n\tuniform sampler2D displacementMap;\\n\tuniform float displacementScale;\\n\tuniform float displacementBias;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_fragment'] = \"#ifdef USE_EMISSIVEMAP\\n\\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\\n\\n\ttotalEmissiveLight *= emissiveColor.rgb;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_pars_fragment'] = \"#ifdef USE_EMISSIVEMAP\\n\\n\tuniform sampler2D emissiveMap;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\t\t// Transforming Normal Vectors with the Inverse Transformation\\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\t\t#else\\n\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t\t#endif\\n\\n\t#else\\n\\n\t\tvec3 reflectVec = vReflect;\\n\\n\t#endif\\n\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\\n\tenvColor.xyz = inputToLinear( envColor.xyz );\\n\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tuniform float reflectivity;\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tuniform float refractionRatio;\\n\\n\t#else\\n\\n\t\tvarying vec3 vReflect;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvarying vec3 vReflect;\\n\\n\tuniform float refractionRatio;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvec3 worldNormal = transformDirection( objectNormal, modelMatrix );\\n\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\t#else\\n\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_fragment'] = \"#ifdef USE_FOG\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\\n\t#else\\n\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n\t#endif\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\\n\\n\t#else\\n\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n\t#endif\\n\t\\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_pars_fragment'] = \"#ifdef USE_FOG\\n\\n\tuniform vec3 fogColor;\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tuniform float fogDensity;\\n\\n\t#else\\n\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_pars_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tuniform sampler2D lightMap;\\n\tuniform float lightMapIntensity;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_pars_vertex'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_vertex'] = \"vLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vec3( 0.0 );\\n\\n#endif\\n\\nvec3 normal = normalize( transformedNormal );\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = pointLightColor[ i ];\\n\\n\t\tvec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\t// attenuation\\n\\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = spotLightColor[ i ];\\n\\n\t\tvec3 lightPosition = spotLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition - mvPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\\n\\n\t\t\t// attenuation\\n\\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\\n\\n\t\t\tattenuation *= spotEffect;\\n\\n\t\t\t// diffuse\\n\\n\t\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = directionalLightColor[ i ];\\n\\n\t\tvec3 lightDir = directionalLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tvLightFront += lightColor * saturate( dotProduct );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\\n\\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\nvLightFront += ambientLightColor;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack += ambientLightColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_fragment'] = \"#ifndef FLAT_SHADED\\n\\n\tvec3 normal = normalize( vNormal );\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\\n\t#endif\\n\\n#else\\n\\n\tvec3 fdx = dFdx( vViewPosition );\\n\tvec3 fdy = dFdy( vViewPosition );\\n\tvec3 normal = normalize( cross( fdx, fdy ) );\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\\nvec3 viewDir = normalize( vViewPosition );\\n\\nvec3 totalDiffuseLight = vec3( 0.0 );\\nvec3 totalSpecularLight = vec3( 0.0 );\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = pointLightColor[ i ];\\n\\n\t\tvec3 lightPosition = pointLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\t// attenuation\\n\\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\\n\\n\t\t// diffuse\\n\\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\\n\\n\t\t// specular\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\\n\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = spotLightColor[ i ];\\n\\n\t\tvec3 lightPosition = spotLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\\n\\n\t\t\t// attenuation\\n\\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\\n\\n\t\t\tattenuation *= spotEffect;\\n\\n\t\t\t// diffuse\\n\\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\\n\\n\t\t\t// specular\\n\\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = directionalLightColor[ i ];\\n\\n\t\tvec3 lightDir = directionalLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\\n\\n\t\t// specular\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\ttotalDiffuseLight += lightColor;\\n\\n\t\t// specular (sky term only)\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * max( dotProduct, 0.0 );\\n\\n\t}\\n\\n#endif\\n\\n#ifdef METAL\\n\\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\\n\\n#else\\n\\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\\nvarying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\tvarying vec3 vNormal;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvWorldPosition = worldPosition.xyz;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/linear_to_gamma_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'linear_to_gamma_fragment'] = \"\\n\toutgoingLight = linearToOutput( outgoingLight );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_fragment'] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tuniform float logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n\tuniform float logDepthBufFC;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\\n#else\\n\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_fragment'] = \"#ifdef USE_MAP\\n\\n\tvec4 texelColor = texture2D( map, vUv );\\n\\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\\n\\n\tdiffuseColor *= texelColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_fragment'] = \"#ifdef USE_MAP\\n\\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform vec4 offsetRepeat;\\n\tuniform sampler2D map;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphnormal_vertex'] = \"#ifdef USE_MORPHNORMALS\\n\\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tuniform float morphTargetInfluences[ 8 ];\\n\\n\t#else\\n\\n\tuniform float morphTargetInfluences[ 4 ];\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normalmap_pars_fragment'] = \"#ifdef USE_NORMALMAP\\n\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\\n\t// Per-Pixel Tangent Space Normal Mapping\\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\\n\t}\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/project_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'project_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n\\n#else\\n\\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n\\n#endif\\n\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\tvec3 frustumColors[3];\\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\\n\\n\t#endif\\n\\n\tfloat fDepth;\\n\tvec3 shadowColor = vec3( 1.0 );\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\\n\\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\t\t\t\t// if ( all( something, something ) ) using this instead\\n\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\t\tbool frustumTest = all( frustumTestVec );\\n\\n\t\tif ( frustumTest ) {\\n\\n\t\t\tshadowCoord.z += shadowBias[ i ];\\n\\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t/*\\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\\n\t\t\t\t\t\t// must enroll loop manually\\n\\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\\n\\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\\n\\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\\n\\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\\n\t\t\t\t\t\t\tshadow += 1.0;\\n\\n\t\t\t\t}\\n\\n\t\t\t\tshadow /= 9.0;\\n\\n\t\t*/\\n\\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\\n\\n\t\t\t\tmat3 shadowKernel;\\n\t\t\t\tmat3 depthKernel;\\n\\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\\n\\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\\n\\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\\n\\n\t\t\t\tvec4 shadowValues;\\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\\n\\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#else\\n\\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\tif ( fDepth < shadowCoord.z )\\n\\n\t\t// spot with multiple shadows is darker\\n\\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\\n\\n\t\t// spot with multiple shadows has the same color as single shadow spot\\n\\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\\n\t\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\t\tif ( inFrustum ) outgoingLight *= frustumColors[ i ];\\n\\n\t\t#endif\\n\\n\t}\\n\\n\toutgoingLight = outgoingLight * shadowColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\\n\\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\\n\tuniform float shadowBias[ MAX_SHADOWS ];\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\tfloat depth = dot( rgba_depth, bit_shift );\\n\t\treturn depth;\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinbase_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_pars_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\\n\t#ifdef BONE_TEXTURE\\n\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\n\t\t\ty = dy * ( y + 0.5 );\\n\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_fragment'] = \"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\tspecularStrength = 1.0;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_pars_fragment'] = \"#ifdef USE_SPECULARMAP\\n\\n\tuniform sampler2D specularMap;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_fragment'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tvarying vec2 vUv2;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_vertex'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tattribute vec2 uv2;\\n\tvarying vec2 vUv2;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_vertex'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tvUv2 = uv2;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_fragment'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvarying vec2 vUv;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'worldpos_vertex'] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\n\t#ifdef USE_SKINNING\\n\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\\n\t#else\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/UniformsUtils.js\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nTHREE.UniformsUtils = {\r\n\r\n\tmerge: function ( uniforms ) {\r\n\r\n\t\tvar merged = {};\r\n\r\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\r\n\r\n\t\t\tfor ( var p in tmp ) {\r\n\r\n\t\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn merged;\r\n\r\n\t},\r\n\r\n\tclone: function ( uniforms_src ) {\r\n\r\n\t\tvar uniforms_dst = {};\r\n\r\n\t\tfor ( var u in uniforms_src ) {\r\n\r\n\t\t\tuniforms_dst[ u ] = {};\r\n\r\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\r\n\r\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\r\n\r\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\r\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms_dst;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/UniformsLib.js\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nTHREE.UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\t\"diffuse\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\r\n\t\t\"map\" : { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\r\n\t\t\"specularMap\" : { type: \"t\", value: null },\r\n\t\t\"alphaMap\" : { type: \"t\", value: null },\r\n\r\n\t\t\"envMap\" : { type: \"t\", value: null },\r\n\t\t\"flipEnvMap\" : { type: \"f\", value: - 1 },\r\n\t\t\"reflectivity\" : { type: \"f\", value: 1.0 },\r\n\t\t\"refractionRatio\" : { type: \"f\", value: 0.98 }\r\n\r\n\t},\r\n\r\n\taomap: {\r\n\r\n\t\t\"aoMap\" : { type: \"t\", value: null },\r\n\t\t\"aoMapIntensity\" : { type: \"f\", value: 1 },\r\n\r\n\t},\r\n\r\n\tlightmap: {\r\n\r\n\t\t\"lightMap\" : { type: \"t\", value: null },\r\n\t\t\"lightMapIntensity\" : { type: \"f\", value: 1 },\r\n\r\n\t},\r\n\r\n\temissivemap: {\r\n\r\n\t\t\"emissiveMap\" : { type: \"t\", value: null },\r\n\r\n\t},\r\n\r\n\tbumpmap: {\r\n\r\n\t\t\"bumpMap\" : { type: \"t\", value: null },\r\n\t\t\"bumpScale\" : { type: \"f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\t\"normalMap\" : { type: \"t\", value: null },\r\n\t\t\"normalScale\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\r\n\r\n\t},\r\n\r\n\tdisplacementmap: {\r\n\r\n\t\t\"displacementMap\" : { type: \"t\", value: null },\r\n\t\t\"displacementScale\" : { type: \"f\", value: 1 },\r\n\t\t\"displacementBias\" : { type: \"f\", value: 0 }\r\n\r\n\t},\r\n\r\n\tfog : {\r\n\r\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\t\"ambientLightColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"directionalLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"directionalLightColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"hemisphereLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"hemisphereLightSkyColor\" : { type: \"fv\", value: [] },\r\n\t\t\"hemisphereLightGroundColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"pointLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\"pointLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\"pointLightDistance\" : { type: \"fv1\", value: [] },\r\n\t\t\"pointLightDecay\" : { type: \"fv1\", value: [] },\r\n\r\n\t\t\"spotLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightDistance\" : { type: \"fv1\", value: [] },\r\n\t\t\"spotLightAngleCos\" : { type: \"fv1\", value: [] },\r\n\t\t\"spotLightExponent\" : { type: \"fv1\", value: [] },\r\n\t\t\"spotLightDecay\" : { type: \"fv1\", value: [] }\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\t\"psColor\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\t\t\"size\" : { type: \"f\", value: 1.0 },\r\n\t\t\"scale\" : { type: \"f\", value: 1.0 },\r\n\t\t\"map\" : { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\r\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tshadowmap: {\r\n\r\n\t\t\"shadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"shadowMapSize\": { type: \"v2v\", value: [] },\r\n\r\n\t\t\"shadowBias\" : { type: \"fv1\", value: [] },\r\n\t\t\"shadowDarkness\": { type: \"fv1\", value: [] },\r\n\r\n\t\t\"shadowMatrix\" : { type: \"m4v\", value: [] }\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderLib.js\r\n\r\n/**\r\n * Webgl Shader Library for three.js\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\n\r\nTHREE.ShaderLib = {\r\n\r\n\t'basic': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_ENVMAP\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\"\tvec3 totalAmbientLight = vec3( 1.0 );\", // hardwired\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\r\n\t\t\t\"\toutgoingLight = diffuseColor.rgb * totalAmbientLight;\", // simple shader\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\t\t// TODO: Shadows on an otherwise unlit surface doesn't make sense.\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'lambert': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define LAMBERT\",\r\n\r\n\t\t\t\"varying vec3 vLightFront;\",\r\n\r\n\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_lambert_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"varying vec3 vLightFront;\",\r\n\r\n\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\t// outgoing light does not have an alpha, the surface does\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\t\tif ( gl_FrontFacing )\",\r\n\t\t\t\"\t\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\",\r\n\t\t\t\"\t\telse\",\r\n\t\t\t\"\t\t\toutgoingLight += diffuseColor.rgb * vLightBack + emissive;\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'phong': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lightmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"emissivemap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"bumpmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"displacementmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\t\"shininess\": { type: \"f\", value: 30 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define PHONG\",\r\n\r\n\t\t\t\"varying vec3 vViewPosition;\",\r\n\r\n\t\t\t\"#ifndef FLAT_SHADED\",\r\n\r\n\t\t\t\"\tvarying vec3 vNormal;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"displacementmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"#ifndef FLAT_SHADED\", // Normal computed with derivatives when FLAT_SHADED\r\n\r\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"displacementmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"\tvViewPosition = - mvPosition.xyz;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"#define PHONG\",\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\"uniform vec3 specular;\",\r\n\t\t\t\"uniform float shininess;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"emissivemap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\"\tvec3 totalAmbientLight = ambientLightColor;\",\r\n\t\t\t\"\tvec3 totalEmissiveLight = emissive;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"emissivemap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'points': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"points\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"uniform float size;\",\r\n\t\t\t\"uniform float scale;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\"\t#ifdef USE_SIZEATTENUATION\",\r\n\t\t\t\"\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\",\r\n\t\t\t\"\t#else\",\r\n\t\t\t\"\t\tgl_PointSize = size;\",\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 psColor;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_particle_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\"\tvec4 diffuseColor = vec4( psColor, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_particle_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\r\n\t\t\t\"\toutgoingLight = diffuseColor.rgb;\", // simple shader\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'dashed': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\r\n\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\r\n\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"uniform float scale;\",\r\n\t\t\t\"attribute float lineDistance;\",\r\n\r\n\t\t\t\"varying float vLineDistance;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\"\tvLineDistance = scale * lineDistance;\",\r\n\r\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"uniform float dashSize;\",\r\n\t\t\t\"uniform float totalSize;\",\r\n\r\n\t\t\t\"varying float vLineDistance;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\",\r\n\r\n\t\t\t\"\t\tdiscard;\",\r\n\r\n\t\t\t\"\t}\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\r\n\t\t\t\"\toutgoingLight = diffuseColor.rgb;\", // simple shader\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'depth': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\r\n\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float mNear;\",\r\n\t\t\t\"uniform float mFar;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\r\n\t\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\",\r\n\t\t\t\"\tgl_FragColor = vec4( vec3( color ), opacity );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'normal': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvNormal = normalize( normalMatrix * normal );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float opacity;\",\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'cube': {\r\n\r\n\t\tuniforms: { \"tCube\": { type: \"t\", value: null },\r\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvWorldPosition = transformDirection( position, modelMatrix );\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform samplerCube tCube;\",\r\n\t\t\t\"uniform float tFlip;\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'equirect': {\r\n\r\n\t\tuniforms: { \"tEquirect\": { type: \"t\", value: null },\r\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvWorldPosition = transformDirection( position, modelMatrix );\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform sampler2D tEquirect;\",\r\n\t\t\t\"uniform float tFlip;\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t// \"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\t\t\t\t\"vec3 direction = normalize( vWorldPosition );\",\r\n\t\t\t\t\"vec2 sampleUV;\",\r\n\t\t\t\t\"sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\",\r\n\t\t\t\t\"sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\",\r\n\t\t\t\t\"gl_FragColor = texture2D( tEquirect, sampleUV );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t/* Depth encoding into RGBA texture\r\n\t *\r\n\t * based on SpiderGL shadow map example\r\n\t * http://spidergl.org/example.php?id=6\r\n\t *\r\n\t * originally from\r\n\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\r\n\t *\r\n\t * see also\r\n\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\r\n\t */\r\n\r\n\t'depthRGBA': {\r\n\r\n\t\tuniforms: {},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"vec4 pack_depth( const in float depth ) {\",\r\n\r\n\t\t\t\"\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\r\n\t\t\t\"\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\r\n\t\t\t\"\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\", // \"\tvec4 res = fract( depth * bit_shift );\",\r\n\t\t\t\"\tres -= res.xxyz * bit_mask;\",\r\n\t\t\t\"\treturn res;\",\r\n\r\n\t\t\t\"}\",\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\r\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z / gl_FragCoord.w );\",\r\n\t\t\t\t//\"float z = ( ( gl_FragCoord.z / gl_FragCoord.w ) - 3.0 ) / ( 4000.0 - 3.0 );\",\r\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( z );\",\r\n\t\t\t\t//\"gl_FragData[ 0 ] = vec4( z, z, z, 1.0 );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderer.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.WebGLRenderer = function ( parameters ) {\r\n\r\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\r\n\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\t_width = _canvas.width,\r\n\t_height = _canvas.height,\r\n\r\n\tpixelRatio = 1,\r\n\r\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n\r\n\t_clearColor = new THREE.Color( 0x000000 ),\r\n\t_clearAlpha = 0;\r\n\r\n\tvar lights = [];\r\n\r\n\tvar opaqueObjects = [];\r\n\tvar opaqueObjectsLastIndex = -1;\r\n\tvar transparentObjects = [];\r\n\tvar transparentObjectsLastIndex = -1;\r\n\r\n\tvar opaqueImmediateObjects = [];\r\n\tvar opaqueImmediateObjectsLastIndex = -1;\r\n\tvar transparentImmediateObjects = [];\r\n\tvar transparentImmediateObjectsLastIndex = -1;\r\n\r\n\tvar morphInfluences = new Float32Array( 8 );\r\n\r\n\r\n\tvar sprites = [];\r\n\tvar lensFlares = [];\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\tthis.context = null;\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\tthis.gammaInput = false;\r\n\tthis.gammaOutput = false;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// flags\r\n\r\n\tthis.autoScaleCubemaps = true;\r\n\r\n\t// internal properties\r\n\r\n\tvar _this = this,\r\n\r\n\t// internal state cache\r\n\r\n\t_currentProgram = null,\r\n\t_currentFramebuffer = null,\r\n\t_currentMaterialId = - 1,\r\n\t_currentGeometryProgram = '',\r\n\t_currentCamera = null,\r\n\r\n\t_usedTextureUnits = 0,\r\n\r\n\t_viewportX = 0,\r\n\t_viewportY = 0,\r\n\t_viewportWidth = _canvas.width,\r\n\t_viewportHeight = _canvas.height,\r\n\t_currentWidth = 0,\r\n\t_currentHeight = 0,\r\n\r\n\t// frustum\r\n\r\n\t_frustum = new THREE.Frustum(),\r\n\r\n\t // camera matrices cache\r\n\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_vector3 = new THREE.Vector3(),\r\n\r\n\t// light arrays cache\r\n\r\n\t_direction = new THREE.Vector3(),\r\n\r\n\t_lightsNeedUpdate = true,\r\n\r\n\t_lights = {\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tdirectional: { length: 0, colors: [], positions: [] },\r\n\t\tpoint: { length: 0, colors: [], positions: [], distances: [], decays: [] },\r\n\t\tspot: { length: 0, colors: [], positions: [], distances: [], directions: [], anglesCos: [], exponents: [], decays: [] },\r\n\t\themi: { length: 0, skyColors: [], groundColors: [], positions: [] }\r\n\r\n\t},\r\n\r\n\t// info\r\n\r\n\t_infoMemory = {\r\n\r\n\t\tgeometries: 0,\r\n\t\ttextures: 0\r\n\r\n\t},\r\n\r\n\t_infoRender = {\r\n\r\n\t\tcalls: 0,\r\n\t\tvertices: 0,\r\n\t\tfaces: 0,\r\n\t\tpoints: 0\r\n\r\n\t};\r\n\r\n\tthis.info = {\r\n\r\n\t\trender: _infoRender,\r\n\t\tmemory: _infoMemory,\r\n\t\tprograms: null\r\n\r\n\t};\r\n\r\n\r\n\t// initialize\r\n\r\n\tvar _gl;\r\n\r\n\ttry {\r\n\r\n\t\tvar attributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\r\n\t\t};\r\n\r\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context.';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\r\n\r\n\t}\r\n\r\n\tvar extensions = new THREE.WebGLExtensions( _gl );\r\n\r\n\textensions.get( 'OES_texture_float' );\r\n\textensions.get( 'OES_texture_float_linear' );\r\n\textensions.get( 'OES_texture_half_float' );\r\n\textensions.get( 'OES_texture_half_float_linear' );\r\n\textensions.get( 'OES_standard_derivatives' );\r\n\textensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\tif ( extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\tTHREE.BufferGeometry.MaxIndex = 4294967296;\r\n\r\n\t}\r\n\r\n\tvar capabilities = new THREE.WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n\tvar state = new THREE.WebGLState( _gl, extensions, paramThreeToGL );\r\n\tvar properties = new THREE.WebGLProperties();\r\n\tvar objects = new THREE.WebGLObjects( _gl, properties, this.info );\r\n\tvar programCache = new THREE.WebGLPrograms( this, capabilities );\r\n\r\n\tthis.info.programs = programCache.programs;\r\n\r\n\tvar bufferRenderer = new THREE.WebGLBufferRenderer( _gl, extensions, _infoRender );\r\n\tvar indexedBufferRenderer = new THREE.WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\r\n\r\n\t//\r\n\r\n\tfunction glClearColor( r, g, b, a ) {\r\n\r\n\t\tif ( _premultipliedAlpha === true ) {\r\n\r\n\t\t\tr *= a; g *= a; b *= a;\r\n\r\n\t\t}\r\n\r\n\t\t_gl.clearColor( r, g, b, a );\r\n\r\n\t}\r\n\r\n\tfunction setDefaultGLState() {\r\n\r\n\t\tstate.init();\r\n\r\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t}\r\n\r\n\tfunction resetGLState() {\r\n\r\n\t\t_currentProgram = null;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\r\n\t\t_lightsNeedUpdate = true;\r\n\r\n\t\tstate.reset();\r\n\r\n\t}\r\n\r\n\tsetDefaultGLState();\r\n\r\n\tthis.context = _gl;\r\n\tthis.capabilities = capabilities;\r\n\tthis.extensions = extensions;\r\n\tthis.state = state;\r\n\r\n\t// shadow map\r\n\r\n\tvar shadowMap = new THREE.WebGLShadowMap( this, lights, objects );\r\n\r\n\tthis.shadowMap = shadowMap;\r\n\r\n\r\n\t// Plugins\r\n\r\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\r\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.getContextAttributes = function () {\r\n\r\n\t\treturn _gl.getContextAttributes();\r\n\r\n\t};\r\n\r\n\tthis.forceContextLoss = function () {\r\n\r\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\r\n\r\n\t};\r\n\r\n\tthis.getMaxAnisotropy = ( function () {\r\n\r\n\t\tvar value;\r\n\r\n\t\treturn function getMaxAnisotropy() {\r\n\r\n\t\t\tif ( value !== undefined ) return value;\r\n\r\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tvalue = _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvalue = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\r\n\t\t}\r\n\r\n\t} )();\r\n\r\n\tthis.getPrecision = function () {\r\n\r\n\t\treturn capabilities.precision;\r\n\r\n\t};\r\n\r\n\tthis.getPixelRatio = function () {\r\n\r\n\t\treturn pixelRatio;\r\n\r\n\t};\r\n\r\n\tthis.setPixelRatio = function ( value ) {\r\n\r\n\t\tif ( value !== undefined ) pixelRatio = value;\r\n\r\n\t};\r\n\r\n\tthis.getSize = function () {\r\n\r\n\t\treturn {\r\n\t\t\twidth: _width,\r\n\t\t\theight: _height\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_canvas.width = width * pixelRatio;\r\n\t\t_canvas.height = height * pixelRatio;\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\t_viewportX = x * pixelRatio;\r\n\t\t_viewportY = y * pixelRatio;\r\n\r\n\t\t_viewportWidth = width * pixelRatio;\r\n\t\t_viewportHeight = height * pixelRatio;\r\n\r\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\t_gl.scissor(\r\n\t\t\tx * pixelRatio,\r\n\t\t\ty * pixelRatio,\r\n\t\t\twidth * pixelRatio,\r\n\t\t\theight * pixelRatio\r\n\t\t);\r\n\r\n\t};\r\n\r\n\tthis.enableScissorTest = function ( boolean ) {\r\n\r\n\t\tstate.setScissorTest( boolean );\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn _clearColor;\r\n\r\n\t};\r\n\r\n\tthis.setClearColor = function ( color, alpha ) {\r\n\r\n\t\t_clearColor.set( color );\r\n\r\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn _clearAlpha;\r\n\r\n\t};\r\n\r\n\tthis.setClearAlpha = function ( alpha ) {\r\n\r\n\t\t_clearAlpha = alpha;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tvar bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\t_gl.clear( _gl.COLOR_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\t_gl.clear( _gl.DEPTH_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\t_gl.clear( _gl.STENCIL_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t};\r\n\r\n\t// Reset\r\n\r\n\tthis.resetGLState = resetGLState;\r\n\r\n\tthis.dispose = function() {\r\n\r\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tfunction onContextLost( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tresetGLState();\r\n\t\tsetDefaultGLState();\r\n\r\n\t\tproperties.clear();\r\n\r\n\t};\r\n\r\n\tfunction onTextureDispose( event ) {\r\n\r\n\t\tvar texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\r\n\t}\r\n\r\n\tfunction onRenderTargetDispose( event ) {\r\n\r\n\t\tvar renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\t}\r\n\r\n\tfunction onMaterialDispose( event ) {\r\n\r\n\t\tvar material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t}\r\n\r\n\t// Buffer deallocation\r\n\r\n\tfunction deallocateTexture( texture ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t// cube texture\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// 2D texture\r\n\r\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\t// remove all webgl properties\r\n\t\tproperties.delete( texture );\r\n\r\n\t}\r\n\r\n\tfunction deallocateRenderTarget( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\tif ( ! renderTarget || renderTargetProperties.__webglTexture === undefined ) return;\r\n\r\n\t\t_gl.deleteTexture( renderTargetProperties.__webglTexture );\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglRenderbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglRenderbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( renderTarget );\r\n\r\n\t}\r\n\r\n\tfunction deallocateMaterial( material ) {\r\n\r\n\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\tproperties.delete( material );\r\n\r\n\t}\r\n\r\n\r\n\tfunction releaseMaterialProgramReference( material ) {\r\n\r\n\t\tvar programInfo = properties.get( material ).program;\r\n\r\n\t\tmaterial.program = undefined;\r\n\r\n\t\tif ( programInfo !== undefined ) {\r\n\r\n\t\t\tprogramCache.releaseProgram( programInfo );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Buffer rendering\r\n\r\n\tthis.renderBufferImmediate = function ( object, program, material ) {\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar buffers = properties.get( object );\r\n\r\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\r\n\r\n\t\t\tif ( material.type !== 'MeshPhongMaterial' && material.shading === THREE.FlatShading ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\tvar array = object.normalArray;\r\n\r\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\r\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\r\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\r\n\r\n\t\t\t\t\tarray[ i + 0 ] = nx;\r\n\t\t\t\t\tarray[ i + 1 ] = ny;\r\n\t\t\t\t\tarray[ i + 2 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 3 ] = nx;\r\n\t\t\t\t\tarray[ i + 4 ] = ny;\r\n\t\t\t\t\tarray[ i + 5 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 6 ] = nx;\r\n\t\t\t\t\tarray[ i + 7 ] = ny;\r\n\t\t\t\t\tarray[ i + 8 ] = nz;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.normal );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs && material.map ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.uv );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.color );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tthis.renderBufferDirect = function ( camera, lights, fog, geometry, material, object, group ) {\r\n\r\n\t\tsetMaterial( material );\r\n\r\n\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\r\n\t\tvar updateBuffers = false;\r\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + material.wireframe;\r\n\r\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\r\n\r\n\t\t\t_currentGeometryProgram = geometryProgram;\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphTargetInfluences = object.morphTargetInfluences;\r\n\r\n\t\tif ( morphTargetInfluences !== undefined ) {\r\n\r\n\t\t\tvar activeInfluences = [];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = morphTargetInfluences[ i ];\r\n\t\t\t\tactiveInfluences.push( [ influence, i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tactiveInfluences.sort( numericalSort );\r\n\r\n\t\t\tif ( activeInfluences.length > 8 ) {\r\n\r\n\t\t\t\tactiveInfluences.length = 8;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = activeInfluences[ i ];\r\n\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\r\n\r\n\t\t\t\tif ( influence[ 0 ] !== 0 ) {\r\n\r\n\t\t\t\t\tvar index = influence[ 1 ];\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\r\n\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\r\n\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar uniforms = program.getUniforms();\r\n\r\n\t\t\tif ( uniforms.morphTargetInfluences !== null ) {\r\n\r\n\t\t\t\t_gl.uniform1fv( uniforms.morphTargetInfluences, morphInfluences );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\tindex = objects.getWireframeAttribute( geometry );\r\n\r\n\t\t}\r\n\r\n\t\tvar renderer;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\trenderer.setIndex( index );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer = bufferRenderer;\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tsetupVertexAttributes( material, program, geometry );\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, objects.getAttributeBuffer( index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group === undefined ) {\r\n\r\n\t\t\tvar count;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tcount = index.count;\r\n\r\n\t\t\t} else if ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\t\tcount = position.data.array.length / 3;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcount = position.count;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar drawRange = geometry.drawRange;\r\n\r\n\t\t\tgroup = {\r\n\t\t\t\tstart: drawRange.start,\r\n\t\t\t\tcount: Math.min( drawRange.count, count )\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * pixelRatio );\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( _gl.TRIANGLES );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry instanceof THREE.InstancedBufferGeometry && geometry.maxInstancedCount > 0 ) {\r\n\r\n\t\t\t\trenderer.renderInstances( geometry );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.render( group.start, group.count );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar lineWidth = material.linewidth;\r\n\r\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n\t\t\tstate.setLineWidth( lineWidth * pixelRatio );\r\n\r\n\t\t\tif ( object instanceof THREE.LineSegments ) {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\r\n\r\n\t\t\t}\r\n\r\n\t\t\trenderer.render( group.start, group.count );\r\n\r\n\t\t} else if ( object instanceof THREE.Points ) {\r\n\r\n\t\t\trenderer.setMode( _gl.POINTS );\r\n\t\t\trenderer.render( group.start, group.count );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( startIndex === undefined ) startIndex = 0;\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar geometryAttributes = geometry.attributes;\r\n\r\n\t\tvar programAttributes = program.getAttributes();\r\n\r\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n\t\tfor ( var name in programAttributes ) {\r\n\r\n\t\t\tvar programAttribute = programAttributes[ name ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\r\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\r\n\t\t\t\t\tvar buffer = objects.getAttributeBuffer( geometryAttribute );\r\n\r\n\t\t\t\t\tif ( geometryAttribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tvar data = geometryAttribute.data;\r\n\t\t\t\t\t\tvar stride = data.stride;\r\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, stride * data.array.BYTES_PER_ELEMENT, ( startIndex * stride + offset ) * data.array.BYTES_PER_ELEMENT );\r\n\r\n\t\t\t\t\t\tif ( data instanceof THREE.InstancedInterleavedBuffer ) {\r\n\r\n\t\t\t\t\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\textension.vertexAttribDivisorANGLE( programAttribute, data.meshPerAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\r\n\r\n\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InstancedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\textension.vertexAttribDivisorANGLE( programAttribute, geometryAttribute.meshPerAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\r\n\r\n\t\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\t\tswitch ( value.length ) {\r\n\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\t// Sorting\r\n\r\n\tfunction numericalSort ( a, b ) {\r\n\r\n\t\treturn b[ 0 ] - a[ 0 ];\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} else if ( a.material.id !== b.material.id ) {\r\n\r\n\t\t\treturn a.material.id - b.material.id;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn a.z - b.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reversePainterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\r\n\t\tif ( camera instanceof THREE.Camera === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\t\t_lightsNeedUpdate = true;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\tlights.length = 0;\r\n\r\n\t\topaqueObjectsLastIndex = -1;\r\n\t\ttransparentObjectsLastIndex = -1;\r\n\r\n\t\topaqueImmediateObjectsLastIndex = -1;\r\n\t\ttransparentImmediateObjectsLastIndex = -1;\r\n\r\n\t\tsprites.length = 0;\r\n\t\tlensFlares.length = 0;\r\n\r\n\t\tprojectObject( scene );\r\n\r\n\t\topaqueObjects.length = opaqueObjectsLastIndex + 1;\r\n\t\ttransparentObjects.length = transparentObjectsLastIndex + 1;\r\n\r\n\t\topaqueImmediateObjects.length = opaqueImmediateObjectsLastIndex + 1;\r\n\t\ttransparentImmediateObjects.length = transparentImmediateObjectsLastIndex + 1;\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\topaqueObjects.sort( painterSortStable );\r\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tshadowMap.render( scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\t_infoRender.calls = 0;\r\n\t\t_infoRender.vertices = 0;\r\n\t\t_infoRender.faces = 0;\r\n\t\t_infoRender.points = 0;\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\tif ( this.autoClear || forceClear ) {\r\n\r\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( scene.overrideMaterial ) {\r\n\r\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, overrideMaterial );\r\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, overrideMaterial );\r\n\r\n\t\t\trenderObjectsImmediate( opaqueImmediateObjects, camera, lights, fog, overrideMaterial );\r\n\t\t\trenderObjectsImmediate( transparentImmediateObjects, camera, lights, fog, overrideMaterial );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// opaque pass (front-to-back order)\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog );\r\n\t\t\trenderObjectsImmediate( opaqueImmediateObjects, camera, lights, fog );\r\n\r\n\t\t\t// transparent pass (back-to-front order)\r\n\r\n\t\t\trenderObjects( transparentObjects, camera, lights, fog );\r\n\t\t\trenderObjectsImmediate( transparentImmediateObjects, camera, lights, fog );\r\n\r\n\t\t}\r\n\r\n\t\t// custom render plugins (post pass)\r\n\r\n\t\tspritePlugin.render( scene, camera );\r\n\t\tlensFlarePlugin.render( scene, camera, _currentWidth, _currentHeight );\r\n\r\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\tif ( renderTarget && renderTarget.generateMipmaps && renderTarget.minFilter !== THREE.NearestFilter && renderTarget.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\tupdateRenderTargetMipmap( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tstate.setDepthTest( true );\r\n\t\tstate.setDepthWrite( true );\r\n\t\tstate.setColorWrite( true );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t};\r\n\r\n\tfunction pushImmediateRenderItem( object ) {\r\n\r\n\t\tvar array, index;\r\n\r\n\t\t// allocate the next position in the appropriate array\r\n\r\n\t\tif ( object.material.transparent ) {\r\n\r\n\t\t\tarray = transparentImmediateObjects;\r\n\t\t\tindex = ++ transparentImmediateObjectsLastIndex;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray = opaqueImmediateObjects;\r\n\t\t\tindex = ++ opaqueImmediateObjectsLastIndex;\r\n\r\n\t\t}\r\n\r\n\t\t// recycle existing position or grow the array\r\n\r\n\t\tif ( index < array.length ) {\r\n\r\n\t\t\tarray[ index ] = object;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assert( index === array.length );\r\n\t\t\tarray.push( object );\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tfunction pushRenderItem( object, geometry, material, z, group ) {\r\n\r\n\t\tvar array, index;\r\n\r\n\t\t// allocate the next position in the appropriate array\r\n\r\n\t\tif ( material.transparent ) {\r\n\r\n\t\t\tarray = transparentObjects;\r\n\t\t\tindex = ++ transparentObjectsLastIndex;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray = opaqueObjects;\r\n\t\t\tindex = ++ opaqueObjectsLastIndex;\r\n\r\n\t\t}\r\n\r\n\t\t// recycle existing render item or grow the array\r\n\r\n\t\tvar renderItem = array[ index ];\r\n\r\n\t\tif ( renderItem !== undefined ) {\r\n\r\n\t\t\trenderItem.id = object.id;\r\n\t\t\trenderItem.object = object;\r\n\t\t\trenderItem.geometry = geometry;\r\n\t\t\trenderItem.material = material;\r\n\t\t\trenderItem.z = _vector3.z;\r\n\t\t\trenderItem.group = group;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderItem = {\r\n\t\t\t\tid: object.id,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tgeometry: geometry,\r\n\t\t\t\tmaterial: material,\r\n\t\t\t\tz: _vector3.z,\r\n\t\t\t\tgroup: group\r\n\t\t\t};\r\n\r\n\t\t\t// assert( index === array.length );\r\n\t\t\tarray.push( renderItem );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object instanceof THREE.Light ) {\r\n\r\n\t\t\tlights.push( object );\r\n\r\n\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\r\n\t\t\tsprites.push( object );\r\n\r\n\t\t} else if ( object instanceof THREE.LensFlare ) {\r\n\r\n\t\t\tlensFlares.push( object );\r\n\r\n\t\t} else if ( object instanceof THREE.ImmediateRenderObject ) {\r\n\r\n\t\t\tpushImmediateRenderItem( object );\r\n\r\n\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\r\n\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tobject.skeleton.update();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) {\r\n\r\n\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar geometry = objects.update( object );\r\n\r\n\t\t\t\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\r\n\r\n\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar group = groups[ i ];\r\n\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t\tpushRenderItem( object, geometry, groupMaterial, _vector3.z, group );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tpushRenderItem( object, geometry, material, _vector3.z );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, camera, lights, fog, overrideMaterial ) {\r\n\r\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar renderItem = renderList[ i ];\r\n\r\n\t\t\tvar object = renderItem.object;\r\n\t\t\tvar geometry = renderItem.geometry;\r\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\r\n\t\t\tvar group = renderItem.group;\r\n\r\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\t\t_this.renderBufferDirect( camera, lights, fog, geometry, material, object, group );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjectsImmediate( renderList, camera, lights, fog, overrideMaterial ) {\r\n\r\n\t\tvar material = overrideMaterial;\r\n\r\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar object = renderList[ i ];\r\n\r\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\t\tif ( overrideMaterial === undefined ) material = object.material;\r\n\r\n\t\t\tsetMaterial( material );\r\n\r\n\t\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\r\n\t\t\t_currentGeometryProgram = '';\r\n\r\n\t\t\tobject.render( function ( object ) {\r\n\r\n\t\t\t\t_this.renderBufferImmediate( object, program, material );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initMaterial( material, lights, fog, object ) {\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tvar parameters = programCache.getParameters( material, lights, fog, object );\r\n\t\tvar code = programCache.getProgramCode( material, parameters );\r\n\r\n\t\tvar program = materialProperties.program;\r\n\t\tvar programChange = true;\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\t// new material\r\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\t} else if ( program.code !== code ) {\r\n\r\n\t\t\t// changed glsl or parameters\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\r\n\t\t\t// same glsl and uniform list\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// only rebuild uniform list\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( programChange ) {\r\n\r\n\t\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\t\tvar shader = THREE.ShaderLib[ parameters.shaderID ];\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\r\n\t\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: material.uniforms,\r\n\t\t\t\t\tvertexShader: material.vertexShader,\r\n\t\t\t\t\tfragmentShader: material.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\r\n\r\n\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\r\n\r\n\t\t\tmaterialProperties.program = program;\r\n\t\t\tmaterial.program = program;\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tfor ( i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tmaterialProperties.uniformsList = [];\r\n\r\n\t\tvar uniformLocations = materialProperties.program.getUniforms();\r\n\r\n\t\tfor ( var u in materialProperties.__webglShader.uniforms ) {\r\n\r\n\t\t\tvar location = uniformLocations[ u ];\r\n\r\n\t\t\tif ( location ) {\r\n\r\n\t\t\t\tmaterialProperties.uniformsList.push( [ materialProperties.__webglShader.uniforms[ u ], location ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setMaterial( material ) {\r\n\r\n\t\tsetMaterialFaces( material );\r\n\r\n\t\tif ( material.transparent === true ) {\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\r\n\t\t}\r\n\r\n\t\tstate.setDepthFunc( material.depthFunc );\r\n\t\tstate.setDepthTest( material.depthTest );\r\n\t\tstate.setDepthWrite( material.depthWrite );\r\n\t\tstate.setColorWrite( material.colorWrite );\r\n\t\tstate.setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t}\r\n\r\n\tfunction setMaterialFaces( material ) {\r\n\r\n\t\tmaterial.side !== THREE.DoubleSide ? state.enable( _gl.CULL_FACE ) : state.disable( _gl.CULL_FACE );\r\n\t\tstate.setFlipSided( material.side === THREE.BackSide );\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, lights, fog, material, object ) {\r\n\r\n\t\t_usedTextureUnits = 0;\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tif ( material.needsUpdate || ! materialProperties.program ) {\r\n\r\n\t\t\tinitMaterial( material, lights, fog, object );\r\n\t\t\tmaterial.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar refreshProgram = false;\r\n\t\tvar refreshMaterial = false;\r\n\t\tvar refreshLights = false;\r\n\r\n\t\tvar program = materialProperties.program,\r\n\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\r\n\r\n\t\tif ( program.id !== _currentProgram ) {\r\n\r\n\t\t\t_gl.useProgram( program.program );\r\n\t\t\t_currentProgram = program.id;\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\tif ( _currentMaterialId === - 1 ) refreshLights = true;\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( camera !== _currentCamera ) _currentCamera = camera;\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material.envMap ) {\r\n\r\n\t\t\t\tif ( p_uniforms.cameraPosition !== undefined ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material.skinning ) {\r\n\r\n\t\t\t\tif ( p_uniforms.viewMatrix !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// not sure why, but otherwise weird things happen\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== undefined ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== undefined ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( capabilities.floatVertexTextures && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneTexture !== undefined ) {\r\n\r\n\t\t\t\t\tvar textureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\r\n\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureWidth !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureHeight !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material.lights ) {\r\n\r\n\t\t\t\tif ( _lightsNeedUpdate ) {\r\n\r\n\t\t\t\t\trefreshLights = true;\r\n\t\t\t\t\tsetupLights( lights, camera );\r\n\t\t\t\t\t_lightsNeedUpdate = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( refreshLights ) {\r\n\r\n\t\t\t\t\trefreshUniformsLights( m_uniforms, _lights );\r\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, true );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, false );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh single material specific uniforms\r\n\r\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.PointsMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsParticle( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.mNear.value = camera.near;\r\n\t\t\t\tm_uniforms.mFar.value = camera.far;\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.receiveShadow && ! material._shadowPass ) {\r\n\r\n\t\t\t\trefreshUniformsShadow( m_uniforms, lights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load common uniforms\r\n\r\n\t\t\tloadUniformsGeneric( materialProperties.uniformsList );\r\n\r\n\t\t}\r\n\r\n\t\tloadUniformsMatrices( p_uniforms, object );\r\n\r\n\t\tif ( p_uniforms.modelMatrix !== undefined ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\t// Uniforms (refresh uniforms objects)\r\n\r\n\tfunction refreshUniformsCommon ( uniforms, material ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\r\n\t\tif ( material.emissive ) {\r\n\r\n\t\t\tuniforms.emissive.value = material.emissive;\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. specular map\r\n\t\t// 3. normal map\r\n\t\t// 4. bump map\r\n\t\t// 5. alpha map\r\n\t\t// 6. emissive map\r\n\r\n\t\tvar uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tvar offset = uvScaleMap.offset;\r\n\t\t\tvar repeat = uvScaleMap.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.envMap.value = material.envMap;\r\n\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\r\n\r\n\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash ( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsParticle ( uniforms, material ) {\r\n\r\n\t\tuniforms.psColor.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size;\r\n\t\tuniforms.scale.value = _canvas.height / 2.0; // TODO: Cache this.\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\r\n\t\tif ( material.map !== null ) {\r\n\r\n\t\t\tvar offset = material.map.offset;\r\n\t\t\tvar repeat = material.map.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsFog ( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value = fog.color;\r\n\r\n\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong ( uniforms, material ) {\r\n\r\n\t\tuniforms.specular.value = material.specular;\r\n\t\tuniforms.shininess.value = material.shininess;\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLights ( uniforms, lights ) {\r\n\r\n\t\tuniforms.ambientLightColor.value = lights.ambient;\r\n\r\n\t\tuniforms.directionalLightColor.value = lights.directional.colors;\r\n\t\tuniforms.directionalLightDirection.value = lights.directional.positions;\r\n\r\n\t\tuniforms.pointLightColor.value = lights.point.colors;\r\n\t\tuniforms.pointLightPosition.value = lights.point.positions;\r\n\t\tuniforms.pointLightDistance.value = lights.point.distances;\r\n\t\tuniforms.pointLightDecay.value = lights.point.decays;\r\n\r\n\t\tuniforms.spotLightColor.value = lights.spot.colors;\r\n\t\tuniforms.spotLightPosition.value = lights.spot.positions;\r\n\t\tuniforms.spotLightDistance.value = lights.spot.distances;\r\n\t\tuniforms.spotLightDirection.value = lights.spot.directions;\r\n\t\tuniforms.spotLightAngleCos.value = lights.spot.anglesCos;\r\n\t\tuniforms.spotLightExponent.value = lights.spot.exponents;\r\n\t\tuniforms.spotLightDecay.value = lights.spot.decays;\r\n\r\n\t\tuniforms.hemisphereLightSkyColor.value = lights.hemi.skyColors;\r\n\t\tuniforms.hemisphereLightGroundColor.value = lights.hemi.groundColors;\r\n\t\tuniforms.hemisphereLightDirection.value = lights.hemi.positions;\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, value ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\r\n\t\tuniforms.directionalLightColor.needsUpdate = value;\r\n\t\tuniforms.directionalLightDirection.needsUpdate = value;\r\n\r\n\t\tuniforms.pointLightColor.needsUpdate = value;\r\n\t\tuniforms.pointLightPosition.needsUpdate = value;\r\n\t\tuniforms.pointLightDistance.needsUpdate = value;\r\n\t\tuniforms.pointLightDecay.needsUpdate = value;\r\n\r\n\t\tuniforms.spotLightColor.needsUpdate = value;\r\n\t\tuniforms.spotLightPosition.needsUpdate = value;\r\n\t\tuniforms.spotLightDistance.needsUpdate = value;\r\n\t\tuniforms.spotLightDirection.needsUpdate = value;\r\n\t\tuniforms.spotLightAngleCos.needsUpdate = value;\r\n\t\tuniforms.spotLightExponent.needsUpdate = value;\r\n\t\tuniforms.spotLightDecay.needsUpdate = value;\r\n\r\n\t\tuniforms.hemisphereLightSkyColor.needsUpdate = value;\r\n\t\tuniforms.hemisphereLightGroundColor.needsUpdate = value;\r\n\t\tuniforms.hemisphereLightDirection.needsUpdate = value;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsShadow ( uniforms, lights ) {\r\n\r\n\t\tif ( uniforms.shadowMatrix ) {\r\n\r\n\t\t\tvar j = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar light = lights[ i ];\r\n\r\n\t\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\t\tif ( light instanceof THREE.SpotLight || ( light instanceof THREE.DirectionalLight ) ) {\r\n\r\n\t\t\t\t\tuniforms.shadowMap.value[ j ] = light.shadowMap;\r\n\t\t\t\t\tuniforms.shadowMapSize.value[ j ] = light.shadowMapSize;\r\n\r\n\t\t\t\t\tuniforms.shadowMatrix.value[ j ] = light.shadowMatrix;\r\n\r\n\t\t\t\t\tuniforms.shadowDarkness.value[ j ] = light.shadowDarkness;\r\n\t\t\t\t\tuniforms.shadowBias.value[ j ] = light.shadowBias;\r\n\r\n\t\t\t\t\tj ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Uniforms (load to GPU)\r\n\r\n\tfunction loadUniformsMatrices ( uniforms, object ) {\r\n\r\n\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object.modelViewMatrix.elements );\r\n\r\n\t\tif ( uniforms.normalMatrix ) {\r\n\r\n\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object.normalMatrix.elements );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureUnit() {\r\n\r\n\t\tvar textureUnit = _usedTextureUnits;\r\n\r\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\t_usedTextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\tfunction loadUniformsGeneric ( uniforms ) {\r\n\r\n\t\tvar texture, textureUnit;\r\n\r\n\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar uniform = uniforms[ j ][ 0 ];\r\n\r\n\t\t\t// needsUpdate property is not added to all uniforms.\r\n\t\t\tif ( uniform.needsUpdate === false ) continue;\r\n\r\n\t\t\tvar type = uniform.type;\r\n\t\t\tvar value = uniform.value;\r\n\t\t\tvar location = uniforms[ j ][ 1 ];\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase '1i':\r\n\t\t\t\t\t_gl.uniform1i( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1f':\r\n\t\t\t\t\t_gl.uniform1f( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '2f':\r\n\t\t\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3f':\r\n\t\t\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '4f':\r\n\t\t\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1iv':\r\n\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3iv':\r\n\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1fv':\r\n\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '2fv':\r\n\t\t\t\t\t_gl.uniform2fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3fv':\r\n\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '4fv':\r\n\t\t\t\t\t_gl.uniform4fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix3fv':\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix4fv':\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tcase 'i':\r\n\r\n\t\t\t\t\t// single integer\r\n\t\t\t\t\t_gl.uniform1i( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'f':\r\n\r\n\t\t\t\t\t// single float\r\n\t\t\t\t\t_gl.uniform1f( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v2':\r\n\r\n\t\t\t\t\t// single THREE.Vector2\r\n\t\t\t\t\t_gl.uniform2f( location, value.x, value.y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v3':\r\n\r\n\t\t\t\t\t// single THREE.Vector3\r\n\t\t\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v4':\r\n\r\n\t\t\t\t\t// single THREE.Vector4\r\n\t\t\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'c':\r\n\r\n\t\t\t\t\t// single THREE.Color\r\n\t\t\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'iv1':\r\n\r\n\t\t\t\t\t// flat array of integers (JS or typed array)\r\n\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'iv':\r\n\r\n\t\t\t\t\t// flat array of integers with 3 x N size (JS or typed array)\r\n\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fv1':\r\n\r\n\t\t\t\t\t// flat array of floats (JS or typed array)\r\n\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fv':\r\n\r\n\t\t\t\t\t// flat array of floats with 3 x N size (JS or typed array)\r\n\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v2v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector2\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, i2 = 0, il = value.length; i < il; i ++, i2 += 2 ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i2 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ i2 + 1 ] = value[ i ].y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform2fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v3v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector3\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, i3 = 0, il = value.length; i < il; i ++, i3 += 3 ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i3 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ i3 + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\tuniform._array[ i3 + 2 ] = value[ i ].z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform3fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v4v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector4\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, i4 = 0, il = value.length; i < il; i ++, i4 += 4 ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i4 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ i4 + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\tuniform._array[ i4 + 2 ] = value[ i ].z;\r\n\t\t\t\t\t\tuniform._array[ i4 + 3 ] = value[ i ].w;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform4fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm3':\r\n\r\n\t\t\t\t\t// single THREE.Matrix3\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm3v':\r\n\r\n\t\t\t\t\t// array of THREE.Matrix3\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm4':\r\n\r\n\t\t\t\t\t// single THREE.Matrix4\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm4v':\r\n\r\n\t\t\t\t\t// array of THREE.Matrix4\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 't':\r\n\r\n\t\t\t\t\t// single THREE.Texture (2d or cube)\r\n\r\n\t\t\t\t\ttexture = value;\r\n\t\t\t\t\ttextureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( location, textureUnit );\r\n\r\n\t\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t\t\t ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t\t\t\tsetCubeTextureDynamic( texture, textureUnit );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tv':\r\n\r\n\t\t\t\t\t// array of THREE.Texture (2d)\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = [];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i ] = getTextureUnit();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform1iv( location, uniform._array );\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\ttexture = uniform.value[ i ];\r\n\t\t\t\t\t\ttextureUnit = uniform._array[ i ];\r\n\r\n\t\t\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setColorLinear( array, offset, color, intensity ) {\r\n\r\n\t\tarray[ offset + 0 ] = color.r * intensity;\r\n\t\tarray[ offset + 1 ] = color.g * intensity;\r\n\t\tarray[ offset + 2 ] = color.b * intensity;\r\n\r\n\t}\r\n\r\n\tfunction setupLights ( lights, camera ) {\r\n\r\n\t\tvar l, ll, light,\r\n\t\tr = 0, g = 0, b = 0,\r\n\t\tcolor, skyColor, groundColor,\r\n\t\tintensity,\r\n\t\tdistance,\r\n\r\n\t\tzlights = _lights,\r\n\r\n\t\tviewMatrix = camera.matrixWorldInverse,\r\n\r\n\t\tdirColors = zlights.directional.colors,\r\n\t\tdirPositions = zlights.directional.positions,\r\n\r\n\t\tpointColors = zlights.point.colors,\r\n\t\tpointPositions = zlights.point.positions,\r\n\t\tpointDistances = zlights.point.distances,\r\n\t\tpointDecays = zlights.point.decays,\r\n\r\n\t\tspotColors = zlights.spot.colors,\r\n\t\tspotPositions = zlights.spot.positions,\r\n\t\tspotDistances = zlights.spot.distances,\r\n\t\tspotDirections = zlights.spot.directions,\r\n\t\tspotAnglesCos = zlights.spot.anglesCos,\r\n\t\tspotExponents = zlights.spot.exponents,\r\n\t\tspotDecays = zlights.spot.decays,\r\n\r\n\t\themiSkyColors = zlights.hemi.skyColors,\r\n\t\themiGroundColors = zlights.hemi.groundColors,\r\n\t\themiPositions = zlights.hemi.positions,\r\n\r\n\t\tdirLength = 0,\r\n\t\tpointLength = 0,\r\n\t\tspotLength = 0,\r\n\t\themiLength = 0,\r\n\r\n\t\tdirCount = 0,\r\n\t\tpointCount = 0,\r\n\t\tspotCount = 0,\r\n\t\themiCount = 0,\r\n\r\n\t\tdirOffset = 0,\r\n\t\tpointOffset = 0,\r\n\t\tspotOffset = 0,\r\n\t\themiOffset = 0;\r\n\r\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tlight = lights[ l ];\r\n\r\n\t\t\tif ( light.onlyShadow ) continue;\r\n\r\n\t\t\tcolor = light.color;\r\n\t\t\tintensity = light.intensity;\r\n\t\t\tdistance = light.distance;\r\n\r\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tr += color.r;\r\n\t\t\t\tg += color.g;\r\n\t\t\t\tb += color.b;\r\n\r\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\tdirCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tdirOffset = dirLength * 3;\r\n\r\n\t\t\t\tdirPositions[ dirOffset + 0 ] = _direction.x;\r\n\t\t\t\tdirPositions[ dirOffset + 1 ] = _direction.y;\r\n\t\t\t\tdirPositions[ dirOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tsetColorLinear( dirColors, dirOffset, color, intensity );\r\n\r\n\t\t\t\tdirLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tpointCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tpointOffset = pointLength * 3;\r\n\r\n\t\t\t\tsetColorLinear( pointColors, pointOffset, color, intensity );\r\n\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tpointPositions[ pointOffset + 0 ] = _vector3.x;\r\n\t\t\t\tpointPositions[ pointOffset + 1 ] = _vector3.y;\r\n\t\t\t\tpointPositions[ pointOffset + 2 ] = _vector3.z;\r\n\r\n\t\t\t\t// distance is 0 if decay is 0, because there is no attenuation at all.\r\n\t\t\t\tpointDistances[ pointLength ] = distance;\r\n\t\t\t\tpointDecays[ pointLength ] = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tpointLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\tspotCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tspotOffset = spotLength * 3;\r\n\r\n\t\t\t\tsetColorLinear( spotColors, spotOffset, color, intensity );\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.copy( _direction ).applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tspotPositions[ spotOffset + 0 ] = _vector3.x;\r\n\t\t\t\tspotPositions[ spotOffset + 1 ] = _vector3.y;\r\n\t\t\t\tspotPositions[ spotOffset + 2 ] = _vector3.z;\r\n\r\n\t\t\t\tspotDistances[ spotLength ] = distance;\r\n\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tspotDirections[ spotOffset + 0 ] = _direction.x;\r\n\t\t\t\tspotDirections[ spotOffset + 1 ] = _direction.y;\r\n\t\t\t\tspotDirections[ spotOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tspotAnglesCos[ spotLength ] = Math.cos( light.angle );\r\n\t\t\t\tspotExponents[ spotLength ] = light.exponent;\r\n\t\t\t\tspotDecays[ spotLength ] = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tspotLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\r\n\r\n\t\t\t\themiCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\themiOffset = hemiLength * 3;\r\n\r\n\t\t\t\themiPositions[ hemiOffset + 0 ] = _direction.x;\r\n\t\t\t\themiPositions[ hemiOffset + 1 ] = _direction.y;\r\n\t\t\t\themiPositions[ hemiOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tskyColor = light.color;\r\n\t\t\t\tgroundColor = light.groundColor;\r\n\r\n\t\t\t\tsetColorLinear( hemiSkyColors, hemiOffset, skyColor, intensity );\r\n\t\t\t\tsetColorLinear( hemiGroundColors, hemiOffset, groundColor, intensity );\r\n\r\n\t\t\t\themiLength += 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// null eventual remains from removed lights\r\n\t\t// (this is to avoid if in shader)\r\n\r\n\t\tfor ( l = dirLength * 3, ll = Math.max( dirColors.length, dirCount * 3 ); l < ll; l ++ ) dirColors[ l ] = 0.0;\r\n\t\tfor ( l = pointLength * 3, ll = Math.max( pointColors.length, pointCount * 3 ); l < ll; l ++ ) pointColors[ l ] = 0.0;\r\n\t\tfor ( l = spotLength * 3, ll = Math.max( spotColors.length, spotCount * 3 ); l < ll; l ++ ) spotColors[ l ] = 0.0;\r\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiSkyColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiSkyColors[ l ] = 0.0;\r\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiGroundColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiGroundColors[ l ] = 0.0;\r\n\r\n\t\tzlights.directional.length = dirLength;\r\n\t\tzlights.point.length = pointLength;\r\n\t\tzlights.spot.length = spotLength;\r\n\t\tzlights.hemi.length = hemiLength;\r\n\r\n\t\tzlights.ambient[ 0 ] = r;\r\n\t\tzlights.ambient[ 1 ] = g;\r\n\t\tzlights.ambient[ 2 ] = b;\r\n\r\n\t}\r\n\r\n\t// GL state setting\r\n\r\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\r\n\r\n\t\tif ( cullFace === THREE.CullFaceNone ) {\r\n\r\n\t\t\tstate.disable( _gl.CULL_FACE );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( cullFace === THREE.CullFaceBack ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.enable( _gl.CULL_FACE );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Textures\r\n\r\n\tfunction setTextureParameters ( textureType, texture, isImagePowerOfTwo ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( isImagePowerOfTwo ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\r\n\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( ' + texture.sourceFile + ' )' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( ' + texture.sourceFile + ' )' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension ) {\r\n\r\n\t\t\tif ( texture.type === THREE.FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\tif ( texture.type === THREE.HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\r\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\r\n\t\t\ttextureProperties.__webglInit = true;\r\n\r\n\t\t\ttexture.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\r\n\t\ttexture.image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\r\n\r\n\t\tvar image = texture.image,\r\n\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isImagePowerOfTwo );\r\n\r\n\t\tvar mipmap, mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture instanceof THREE.DataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\r\n\r\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, texture.image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t}\r\n\r\n\tthis.setTexture = function ( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tvar image = texture.image;\r\n\r\n\t\t\tif ( image === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( image.complete === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t};\r\n\r\n\tfunction clampToMaxSize ( image, maxSize ) {\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\r\n\t\t\t// premultiplied alpha.\r\n\r\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = Math.floor( image.width * scale );\r\n\t\t\tcanvas.height = Math.floor( image.height * scale );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction setCubeTexture ( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image.length === 6 ) {\r\n\r\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\r\n\r\n\t\t\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\r\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\r\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\r\n\r\n\t\t\t\tvar cubeImage = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar image = cubeImage[ 0 ],\r\n\t\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isImagePowerOfTwo );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( ! isCompressed ) {\r\n\r\n\t\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()\" );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setCubeTextureDynamic ( texture, slot ) {\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\r\n\r\n\t}\r\n\r\n\t// Render targets\r\n\r\n\tfunction setupFrameBuffer ( framebuffer, renderTarget, textureTarget ) {\r\n\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureTarget, properties.get( renderTarget ).__webglTexture, 0 );\r\n\r\n\t}\r\n\r\n\tfunction setupRenderBuffer ( renderbuffer, renderTarget ) {\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t/* For some reason this is not working. Defaulting to RGBA4.\r\n\t\t} else if ( ! renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.STENCIL_INDEX8, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\t\t*/\r\n\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setRenderTarget = function ( renderTarget ) {\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\r\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\tif ( renderTarget.depthBuffer === undefined ) renderTarget.depthBuffer = true;\r\n\t\t\tif ( renderTarget.stencilBuffer === undefined ) renderTarget.stencilBuffer = true;\r\n\r\n\t\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\t\trenderTargetProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t\t// Setup texture, create render and frame buffers\r\n\r\n\t\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height ),\r\n\t\t\t\tglFormat = paramThreeToGL( renderTarget.format ),\r\n\t\t\t\tglType = paramThreeToGL( renderTarget.type );\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\t\t\t\trenderTargetProperties.__webglRenderbuffer = [];\r\n\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTargetProperties.__webglTexture );\r\n\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget, isTargetPowerOfTwo );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\t\t\t\t\trenderTargetProperties.__webglRenderbuffer[ i ] = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\r\n\t\t\t\t\tsetupFrameBuffer( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\t\t\t\t\tsetupRenderBuffer( renderTargetProperties.__webglRenderbuffer[ i ], renderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( renderTarget.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\r\n\t\t\t\t\trenderTargetProperties.__webglRenderbuffer = renderTarget.shareDepthFrom.__webglRenderbuffer;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\trenderTargetProperties.__webglRenderbuffer = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, renderTargetProperties.__webglTexture );\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget, isTargetPowerOfTwo );\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\r\n\t\t\t\tsetupFrameBuffer( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.TEXTURE_2D );\r\n\r\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\r\n\t\t\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderTargetProperties.__webglRenderbuffer );\r\n\r\n\t\t\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderTargetProperties.__webglRenderbuffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetupRenderBuffer( renderTargetProperties.__webglRenderbuffer, renderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( renderTarget.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Release everything\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t\t}\r\n\r\n\t\tvar framebuffer, width, height, vx, vy;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\twidth = renderTarget.width;\r\n\t\t\theight = renderTarget.height;\r\n\r\n\t\t\tvx = 0;\r\n\t\t\tvy = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tframebuffer = null;\r\n\r\n\t\t\twidth = _viewportWidth;\r\n\t\t\theight = _viewportHeight;\r\n\r\n\t\t\tvx = _viewportX;\r\n\t\t\tvy = _viewportY;\r\n\r\n\t\t}\r\n\r\n\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t_gl.viewport( vx, vy, width, height );\r\n\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\t_currentWidth = width;\r\n\t\t_currentHeight = height;\r\n\r\n\t};\r\n\r\n\tthis.readRenderTargetPixels = function( renderTarget, x, y, width, height, buffer ) {\r\n\r\n\t\tif ( ! ( renderTarget instanceof THREE.WebGLRenderTarget ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( properties.get( renderTarget ).__webglFramebuffer ) {\r\n\r\n\t\t\tif ( renderTarget.format !== THREE.RGBAFormat ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar restore = false;\r\n\r\n\t\t\tif ( properties.get( renderTarget ).__webglFramebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, properties.get( renderTarget ).__webglFramebuffer );\r\n\r\n\t\t\t\trestore = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\r\n\r\n\t\t\t\t_gl.readPixels( x, y, width, height, _gl.RGBA, _gl.UNSIGNED_BYTE, buffer );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( restore ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction updateRenderTargetMipmap ( renderTarget ) {\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( renderTarget ).__webglTexture );\r\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, properties.get( renderTarget ).__webglTexture );\r\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback ( f ) {\r\n\r\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\r\n\r\n\t\t\treturn _gl.NEAREST;\r\n\r\n\t\t}\r\n\r\n\t\treturn _gl.LINEAR;\r\n\r\n\t}\r\n\r\n\t// Map three.js constants to WebGL constants\r\n\r\n\tfunction paramThreeToGL ( p ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\r\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\r\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\r\n\r\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\r\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\r\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\r\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\r\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\r\n\r\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\r\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\r\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\r\n\t\tif ( p === THREE.IntType ) return _gl.INT;\r\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\r\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\r\n\r\n\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.HalfFloatType ) return extension.HALF_FLOAT_OES;\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\r\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\r\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\r\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\r\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\r\n\r\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\r\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\r\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\r\n\r\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\r\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\r\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\r\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\r\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\r\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\r\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\r\n\r\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\r\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\r\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\r\n\t}\r\n\r\n\t// DEPRECATED\r\n\r\n\tthis.supportsFloatTextures = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\treturn extensions.get( 'OES_texture_float' );\r\n\r\n\t};\r\n\r\n\tthis.supportsHalfFloatTextures = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\treturn extensions.get( 'OES_texture_half_float' );\r\n\r\n\t};\r\n\r\n\tthis.supportsStandardDerivatives = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\treturn extensions.get( 'OES_standard_derivatives' );\r\n\r\n\t};\r\n\r\n\tthis.supportsCompressedTextureS3TC = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\treturn extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t};\r\n\r\n\tthis.supportsCompressedTexturePVRTC = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\treturn extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t};\r\n\r\n\tthis.supportsBlendMinMax = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\treturn extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t};\r\n\r\n\tthis.supportsVertexTextures = function () {\r\n\r\n\t\treturn capabilities.vertexTextures;\r\n\r\n\t};\r\n\r\n\tthis.supportsInstancedArrays = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\treturn extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.initMaterial = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.addPrePlugin = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.addPostPlugin = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.updateShadowMap = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\r\n\t};\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tshadowMapEnabled: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn shadowMap.enabled;\r\n\r\n\t\t\t},\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\t\tshadowMap.enabled = value;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tshadowMapType: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn shadowMap.type;\r\n\r\n\t\t\t},\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\t\tshadowMap.type = value;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tshadowMapCullFace: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn shadowMap.cullFace;\r\n\r\n\t\t\t},\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\r\n\t\t\t\tshadowMap.cullFace = value;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tshadowMapDebug: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn shadowMap.debug;\r\n\r\n\t\t\t},\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug.' );\r\n\t\t\t\tshadowMap.debug = value;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderTarget.js\r\n\r\n/**\r\n * @author szimek / https://github.com/szimek/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\toptions = options || {};\r\n\r\n\tthis.wrapS = options.wrapS !== undefined ? options.wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = options.wrapT !== undefined ? options.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = options.magFilter !== undefined ? options.magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = options.minFilter !== undefined ? options.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = options.anisotropy !== undefined ? options.anisotropy : 1;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.format = options.format !== undefined ? options.format : THREE.RGBAFormat;\r\n\tthis.type = options.type !== undefined ? options.type : THREE.UnsignedByteType;\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\r\n\tthis.generateMipmaps = true;\r\n\r\n\tthis.shareDepthFrom = options.shareDepthFrom !== undefined ? options.shareDepthFrom : null;\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTarget.prototype = {\r\n\r\n\tconstructor: THREE.WebGLRenderTarget,\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tif ( this.width !== width || this.height !== height ) {\r\n\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.dispose();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\r\n\t\tthis.shareDepthFrom = source.shareDepthFrom;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\r\n\r\n// File:src/renderers/WebGLRenderTargetCube.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com\r\n */\r\n\r\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\r\n\r\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\r\nTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\r\n\r\n// File:src/renderers/webgl/WebGLBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawArrays( mode, start, count );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tif ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, position.data.count, geometry.maxInstancedCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, position.count, geometry.maxInstancedCount );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLIndexedBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLIndexedBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tvar type, size;\r\n\r\n\tfunction setIndex( index ) {\r\n\r\n\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\tsize = 4;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\tsize = 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawElements( mode, count, type, start * size );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar index = geometry.index;\r\n\r\n\t\textension.drawElementsInstancedANGLE( mode, index.array.length, type, 0, geometry.maxInstancedCount );\r\n\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.setIndex = setIndex;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLExtensions.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLExtensions = function ( gl ) {\r\n\r\n\tvar extensions = {};\r\n\r\n\tthis.get = function ( name ) {\r\n\r\n\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tvar extension;\r\n\r\n\t\tswitch ( name ) {\r\n\r\n\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\textension = gl.getExtension( name );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\textensions[ name ] = extension;\r\n\r\n\t\treturn extension;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLCapabilities.js\r\n\r\nTHREE.WebGLCapabilities = function ( gl, extensions, parameters ) {\r\n\r\n\tfunction getMaxPrecision( precision ) {\r\n\r\n\t\tif ( precision === 'highp' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'highp';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprecision = 'mediump';\r\n\r\n\t\t}\r\n\r\n\t\tif ( precision === 'mediump' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'mediump';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn 'lowp';\r\n\r\n\t}\r\n\r\n\tthis.getMaxPrecision = getMaxPrecision;\r\n\r\n\tthis.precision = parameters.precision !== undefined ? parameters.precision : 'highp',\r\n\tthis.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false;\r\n\r\n\tthis.maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\r\n\tthis.maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\r\n\tthis.maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n\tthis.maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n\tthis.maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\r\n\tthis.maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\r\n\r\n\tthis.vertexTextures = this.maxVertexTextures > 0;\r\n\tthis.floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\r\n\tthis.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\r\n\r\n\tvar _maxPrecision = getMaxPrecision( this.precision );\r\n\r\n\tif ( _maxPrecision !== this.precision ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer:', this.precision, 'not supported, using', _maxPrecision, 'instead.' );\r\n\t\tthis.precision = _maxPrecision;\r\n\r\n\t}\r\n\r\n\tif ( this.logarithmicDepthBuffer ) {\r\n\r\n\t\tthis.logarithmicDepthBuffer = !! extensions.get( 'EXT_frag_depth' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLGeometries.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLGeometries = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = {};\r\n\r\n\tfunction get( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometries[ geometry.id ] !== undefined ) {\r\n\r\n\t\t\treturn geometries[ geometry.id ];\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tvar buffergeometry;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tbuffergeometry = geometry;\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\r\n\t\t\t\tgeometry._bufferGeometry = new THREE.BufferGeometry().setFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometries[ geometry.id ] = buffergeometry;\r\n\r\n\t\tinfo.memory.geometries ++;\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction onGeometryDispose( event ) {\r\n\r\n\t\tvar geometry = event.target;\r\n\t\tvar buffergeometry = geometries[ geometry.id ];\r\n\r\n\t\tdeleteAttributes( buffergeometry.attributes );\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tdelete geometries[ geometry.id ];\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\t\tif ( property.wireframe ) deleteAttribute( property.wireframe );\r\n\r\n\t\tinfo.memory.geometries --;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction deleteAttribute( attribute ) {\r\n\r\n\t\tvar buffer = getAttributeBuffer( attribute );\r\n\r\n\t\tif ( buffer !== undefined ) {\r\n\r\n\t\t\tgl.deleteBuffer( buffer );\r\n\t\t\tremoveAttributeBuffer( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction deleteAttributes( attributes ) {\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tdeleteAttribute( attributes[ name ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction removeAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\tproperties.delete( attribute.data );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tproperties.delete( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.get = get;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLObjects.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLObjects = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = new THREE.WebGLGeometries( gl, properties, info );\r\n\r\n\t//\r\n\r\n\tfunction update( object ) {\r\n\r\n\t\t// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\r\n\r\n\t\tvar geometry = geometries.get( object );\r\n\r\n\t\tif ( object.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tgeometry.updateFromObject( object );\r\n\r\n\t\t}\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tupdateAttribute( index, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tupdateAttribute( attributes[ name ], gl.ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\tfor ( var name in morphAttributes ) {\r\n\r\n\t\t\tvar array = morphAttributes[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tupdateAttribute( array[ i ], gl.ARRAY_BUFFER );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n\tfunction updateAttribute( attribute, bufferType ) {\r\n\r\n\t\tvar data = ( attribute instanceof THREE.InterleavedBufferAttribute ) ? attribute.data : attribute;\r\n\r\n\t\tvar attributeProperties = properties.get( data );\r\n\r\n\t\tif ( attributeProperties.__webglBuffer === undefined ) {\r\n\r\n\t\t\tcreateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t} else if ( attributeProperties.version !== data.version ) {\r\n\r\n\t\t\tupdateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tattributeProperties.__webglBuffer = gl.createBuffer();\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tvar usage = data.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n\t\tgl.bufferData( bufferType, data.array, usage );\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction updateBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tif ( data.dynamic === false || data.updateRange.count === - 1 ) {\r\n\r\n\t\t\t// Not using update ranges\r\n\r\n\t\t\tgl.bufferSubData( bufferType, 0, data.array );\r\n\r\n\t\t} else if ( data.updateRange.count === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.bufferSubData( bufferType, data.updateRange.offset * data.array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\t\t\t  data.array.subarray( data.updateRange.offset, data.updateRange.offset + data.updateRange.count ) );\r\n\r\n\t\t\tdata.updateRange.count = 0; // reset range\r\n\r\n\t\t}\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction getWireframeAttribute( geometry ) {\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\r\n\t\tif ( property.wireframe !== undefined ) {\r\n\r\n\t\t\treturn property.wireframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar indices = [];\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\t\tvar position = attributes.position;\r\n\r\n\t\t// console.time( 'wireframe' );\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar edges = {};\r\n\t\t\tvar array = index.array;\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = array[ i + 0 ];\r\n\t\t\t\tvar b = array[ i + 1 ];\r\n\t\t\t\tvar c = array[ i + 2 ];\r\n\r\n\t\t\t\tif ( checkEdge( edges, a, b ) ) indices.push( a, b );\r\n\t\t\t\tif ( checkEdge( edges, b, c ) ) indices.push( b, c );\r\n\t\t\t\tif ( checkEdge( edges, c, a ) ) indices.push( c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar array = attributes.position.array;\r\n\r\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = i + 0;\r\n\t\t\t\tvar b = i + 1;\r\n\t\t\t\tvar c = i + 2;\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// console.timeEnd( 'wireframe' );\r\n\r\n\t\tvar TypeArray = position.count > 65535 ? Uint32Array : Uint16Array;\r\n\t\tvar attribute = new THREE.BufferAttribute( new TypeArray( indices ), 1 );\r\n\r\n\t\tupdateAttribute( attribute, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\tproperty.wireframe = attribute;\r\n\r\n\t\treturn attribute;\r\n\r\n\t}\r\n\r\n\tfunction checkEdge( edges, a, b ) {\r\n\r\n\t\tif ( a > b ) {\r\n\r\n\t\t\tvar tmp = a;\r\n\t\t\ta = b;\r\n\t\t\tb = tmp;\r\n\r\n\t\t}\r\n\r\n\t\tvar list = edges[ a ];\r\n\r\n\t\tif ( list === undefined ) {\r\n\r\n\t\t\tedges[ a ] = [ b ];\r\n\t\t\treturn true;\r\n\r\n\t\t} else if ( list.indexOf( b ) === -1 ) {\r\n\r\n\t\t\tlist.push( b );\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tthis.getAttributeBuffer = getAttributeBuffer;\r\n\tthis.getWireframeAttribute = getWireframeAttribute;\r\n\r\n\tthis.update = update;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProgram.js\r\n\r\nTHREE.WebGLProgram = ( function () {\r\n\r\n\tvar programIdCount = 0;\r\n\r\n\tfunction generateDefines( defines ) {\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tfor ( var name in defines ) {\r\n\r\n\t\t\tvar value = defines[ name ];\r\n\r\n\t\t\tif ( value === false ) continue;\r\n\r\n\t\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join( '\\n' );\r\n\r\n\t}\r\n\r\n\tfunction fetchUniformLocations( gl, program, identifiers ) {\r\n\r\n\t\tvar uniforms = {};\r\n\r\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\r\n\r\n\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\r\n\t\t\tvar info = gl.getActiveUniform( program, i );\r\n\t\t\tvar name = info.name;\r\n\t\t\tvar location = gl.getUniformLocation( program, name );\r\n\r\n\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE UNIFORM:\", name);\r\n\r\n\t\t\tvar suffixPos = name.lastIndexOf( '[0]' );\r\n\t\t\tif ( suffixPos !== - 1 && suffixPos === name.length - 3 ) {\r\n\r\n\t\t\t\tuniforms[ name.substr( 0, suffixPos ) ] = location;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms[ name ] = location;\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms;\r\n\r\n\t}\r\n\r\n\tfunction fetchAttributeLocations( gl, program, identifiers ) {\r\n\r\n\t\tvar attributes = {};\r\n\r\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\r\n\r\n\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\r\n\t\t\tvar info = gl.getActiveAttrib( program, i );\r\n\t\t\tvar name = info.name;\r\n\r\n\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\r\n\r\n\t\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n\t\t}\r\n\r\n\t\treturn attributes;\r\n\r\n\t}\r\n\r\n\tfunction filterEmptyLine( string ) {\r\n\r\n\t\treturn string !== '';\r\n\r\n\t}\r\n\r\n\treturn function WebGLProgram( renderer, code, material, parameters ) {\r\n\r\n\t\tvar gl = renderer.context;\r\n\r\n\t\tvar defines = material.defines;\r\n\r\n\t\tvar vertexShader = material.__webglShader.vertexShader;\r\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\r\n\r\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n\t\t}\r\n\r\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\r\n\t\tif ( parameters.envMap ) {\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeReflectionMapping:\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.EquirectangularReflectionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.SphericalReflectionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.combine ) {\r\n\r\n\t\t\t\tcase THREE.MultiplyOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MixOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.AddOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n\t\t// console.log( 'building new program ' );\r\n\r\n\t\t//\r\n\r\n\t\tvar customDefines = generateDefines( defines );\r\n\r\n\t\t//\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar prefixVertex, prefixFragment;\r\n\r\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\r\n\r\n\t\t\tprefixVertex = '';\r\n\t\t\tprefixFragment = '';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tprefixVertex = [\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n\t\t\t\trenderer.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\trenderer.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\r\n\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\r\n\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\r\n\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\r\n\r\n\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\r\n\r\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\r\n\r\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\r\n\t\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t'attribute vec3 position;',\r\n\t\t\t\t'attribute vec3 normal;',\r\n\t\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t\t'#ifdef USE_COLOR',\r\n\r\n\t\t\t\t'\tattribute vec3 color;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\r\n\t\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t\t'\tattribute vec3 morphTarget3;',\r\n\r\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\r\n\t\t\t\t'\t#else',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\r\n\t\t\t\t'\t#endif',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_SKINNING',\r\n\r\n\t\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t\t'\tattribute vec4 skinWeight;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t\tprefixFragment = [\r\n\r\n\t\t\t\tparameters.bumpMap || parameters.normalMap || parameters.flatShading || material.derivatives ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\r\n\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\r\n\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\r\n\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\r\n\r\n\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\r\n\r\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\r\n\r\n\t\t\t\trenderer.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\trenderer.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.metal ? '#define METAL' : '',\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tvar vertexGlsl = prefixVertex + vertexShader;\r\n\t\tvar fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n\t\tvar glVertexShader = THREE.WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\r\n\t\tvar glFragmentShader = THREE.WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\r\n\r\n\t\tgl.attachShader( program, glVertexShader );\r\n\t\tgl.attachShader( program, glFragmentShader );\r\n\r\n\t\t// Force a particular attribute to index 0.\r\n\r\n\t\tif ( material.index0AttributeName !== undefined ) {\r\n\r\n\t\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\r\n\r\n\t\t} else if ( parameters.morphTargets === true ) {\r\n\r\n\t\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\r\n\t\t}\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\tvar programLog = gl.getProgramInfoLog( program );\r\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\r\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\r\n\r\n\t\tvar runnable = true;\r\n\t\tvar haveDiagnostics = true;\r\n\r\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\r\n\r\n\t\t\trunnable = false;\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\r\n\r\n\t\t} else if ( programLog !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n\t\t\thaveDiagnostics = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( haveDiagnostics ) {\r\n\r\n\t\t\tthis.diagnostics = {\r\n\r\n\t\t\t\trunnable: runnable,\r\n\t\t\t\tmaterial: material,\r\n\r\n\t\t\t\tprogramLog: programLog,\r\n\r\n\t\t\t\tvertexShader: {\r\n\r\n\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\tprefix: prefixVertex\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfragmentShader: {\r\n\r\n\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\tprefix: prefixFragment\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// clean up\r\n\r\n\t\tgl.deleteShader( glVertexShader );\r\n\t\tgl.deleteShader( glFragmentShader );\r\n\r\n\t\t// set up caching for uniform locations\r\n\r\n\t\tvar cachedUniforms;\r\n\r\n\t\tthis.getUniforms = function() {\r\n\r\n\t\t\tif ( cachedUniforms === undefined ) {\r\n\r\n\t\t\t\tcachedUniforms = fetchUniformLocations( gl, program );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedUniforms;\r\n\r\n\t\t};\r\n\r\n\t\t// set up caching for attribute locations\r\n\r\n\t\tvar cachedAttributes;\r\n\r\n\t\tthis.getAttributes = function() {\r\n\r\n\t\t\tif ( cachedAttributes === undefined ) {\r\n\r\n\t\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedAttributes;\r\n\r\n\t\t};\r\n\r\n\t\t// free resource\r\n\r\n\t\tthis.destroy = function() {\r\n\r\n\t\t\tgl.deleteProgram( program );\r\n\t\t\tthis.program = undefined;\r\n\r\n\t\t};\r\n\r\n\t\t// DEPRECATED\r\n\r\n\t\tObject.defineProperties( this, {\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\r\n\t\t\t\t\treturn this.getUniforms();\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tattributes: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\r\n\t\t\t\t\treturn this.getAttributes();\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\r\n\t\t//\r\n\r\n\t\tthis.id = programIdCount ++;\r\n\t\tthis.code = code;\r\n\t\tthis.usedTimes = 1;\r\n\t\tthis.program = program;\r\n\t\tthis.vertexShader = glVertexShader;\r\n\t\tthis.fragmentShader = glFragmentShader;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLPrograms.js\r\n\r\nTHREE.WebGLPrograms = function ( renderer, capabilities ) {\r\n\r\n\tvar programs = [];\r\n\r\n\tvar shaderIDs = {\r\n\t\tMeshDepthMaterial: 'depth',\r\n\t\tMeshNormalMaterial: 'normal',\r\n\t\tMeshBasicMaterial: 'basic',\r\n\t\tMeshLambertMaterial: 'lambert',\r\n\t\tMeshPhongMaterial: 'phong',\r\n\t\tLineBasicMaterial: 'basic',\r\n\t\tLineDashedMaterial: 'dashed',\r\n\t\tPointsMaterial: 'points'\r\n\t};\r\n\r\n\tvar parameterNames = [\r\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"envMap\", \"envMapMode\",\r\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"bumpMap\", \"normalMap\", \"specularMap\",\r\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\r\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"maxDirLights\", \"maxPointLights\",\r\n\t\t\"maxSpotLights\", \"maxHemiLights\", \"maxShadows\", \"shadowMapEnabled\",\r\n\t\t\"shadowMapType\", \"shadowMapDebug\", \"alphaTest\", \"metal\", \"doubleSided\",\r\n\t\t\"flipSided\"\r\n\t];\r\n\r\n\r\n\tfunction allocateBones ( object ) {\r\n\r\n\t\tif ( capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\r\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tvar maxBones = nVertexMatrices;\r\n\r\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\r\n\r\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction allocateLights( lights ) {\r\n\r\n\t\tvar dirLights = 0;\r\n\t\tvar pointLights = 0;\r\n\t\tvar spotLights = 0;\r\n\t\tvar hemiLights = 0;\r\n\r\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tvar light = lights[ l ];\r\n\r\n\t\t\tif ( light.onlyShadow || light.visible === false ) continue;\r\n\r\n\t\t\tif ( light instanceof THREE.DirectionalLight ) dirLights ++;\r\n\t\t\tif ( light instanceof THREE.PointLight ) pointLights ++;\r\n\t\t\tif ( light instanceof THREE.SpotLight ) spotLights ++;\r\n\t\t\tif ( light instanceof THREE.HemisphereLight ) hemiLights ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn { 'directional': dirLights, 'point': pointLights, 'spot': spotLights, 'hemi': hemiLights };\r\n\r\n\t}\r\n\r\n\tfunction allocateShadows( lights ) {\r\n\r\n\t\tvar maxShadows = 0;\r\n\r\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tvar light = lights[ l ];\r\n\r\n\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\tif ( light instanceof THREE.SpotLight ) maxShadows ++;\r\n\t\t\tif ( light instanceof THREE.DirectionalLight ) maxShadows ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn maxShadows;\r\n\r\n\t}\r\n\r\n\tthis.getParameters = function ( material, lights, fog, object ) {\r\n\r\n\t\tvar shaderID = shaderIDs[ material.type ];\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tvar maxLightCount = allocateLights( lights );\r\n\t\tvar maxShadows = allocateShadows( lights );\r\n\t\tvar maxBones = allocateBones( object );\r\n\t\tvar precision = renderer.getPrecision();\r\n\r\n\t\tif ( material.precision !== null ) {\r\n\r\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\r\n\t\t\tif ( precision !== material.precision ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.initMaterial:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar parameters = {\r\n\r\n\t\t\tshaderID: shaderID,\r\n\r\n\t\t\tprecision: precision,\r\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\r\n\r\n\t\t\tmap: !! material.map,\r\n\t\t\tenvMap: !! material.envMap,\r\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\taoMap: !! material.aoMap,\r\n\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tcombine: material.combine,\r\n\r\n\t\t\tvertexColors: material.vertexColors,\r\n\r\n\t\t\tfog: fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\r\n\r\n\t\t\tflatShading: material.shading === THREE.FlatShading,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\r\n\t\t\tmaxDirLights: maxLightCount.directional,\r\n\t\t\tmaxPointLights: maxLightCount.point,\r\n\t\t\tmaxSpotLights: maxLightCount.spot,\r\n\t\t\tmaxHemiLights: maxLightCount.hemi,\r\n\r\n\t\t\tmaxShadows: maxShadows,\r\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && maxShadows > 0,\r\n\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\t\t\tshadowMapDebug: renderer.shadowMap.debug,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tmetal: material.metal,\r\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\r\n\t\t\tflipSided: material.side === THREE.BackSide\r\n\r\n\t\t};\r\n\r\n\t\treturn parameters;\r\n\r\n\t};\r\n\r\n\tthis.getProgramCode = function ( material, parameters ) {\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\tchunks.push( parameters.shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tchunks.push( material.fragmentShader );\r\n\t\t\tchunks.push( material.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.defines !== undefined ) {\r\n\r\n\t\t\tfor ( var name in material.defines ) {\r\n\r\n\t\t\t\tchunks.push( name );\r\n\t\t\t\tchunks.push( material.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n\t\t\tvar parameterName = parameterNames[ i ];\r\n\t\t\tchunks.push( parameterName );\r\n\t\t\tchunks.push( parameters[ parameterName ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join();\r\n\r\n\t};\r\n\r\n\tthis.acquireProgram = function ( material, parameters, code ) {\r\n\r\n\t\tvar program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tvar programInfo = programs[ p ];\r\n\r\n\t\t\tif ( programInfo.code === code ) {\r\n\r\n\t\t\t\tprogram = programInfo;\r\n\t\t\t\t++ program.usedTimes;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new THREE.WebGLProgram( renderer, code, material, parameters );\r\n\t\t\tprograms.push( program );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t};\r\n\r\n\tthis.releaseProgram = function( program ) {\r\n\r\n\t\tif ( -- program.usedTimes === 0 ) {\r\n\r\n\t\t\t// Remove from unordered set\r\n\t\t\tvar i = programs.indexOf( program );\r\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\tprograms.pop();\r\n\r\n\t\t\t// Free WebGL resources\r\n\t\t\tprogram.destroy();\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\tthis.programs = programs;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProperties.js\r\n\r\n/**\r\n* @author fordacious / fordacious.github.io\r\n*/\r\n\r\nTHREE.WebGLProperties = function () {\r\n\r\n\tvar properties = {};\r\n\r\n\tthis.get = function ( object ) {\r\n\r\n\t\tvar uuid = object.uuid;\r\n\t\tvar map = properties[ uuid ];\r\n\r\n\t\tif ( map === undefined ) {\r\n\r\n\t\t\tmap = {};\r\n\t\t\tproperties[ uuid ] = map;\r\n\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\r\n\t};\r\n\r\n\tthis.delete = function ( object ) {\r\n\r\n\t\tdelete properties[ object.uuid ];\r\n\r\n\t};\r\n\r\n\tthis.clear = function () {\r\n\r\n\t\tproperties = {};\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLShader.js\r\n\r\nTHREE.WebGLShader = ( function () {\r\n\r\n\tvar addLineNumbers = function ( string ) {\r\n\r\n\t\tvar lines = string.split( '\\n' );\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn lines.join( '\\n' );\r\n\r\n\t};\r\n\r\n\treturn function WebGLShader( gl, type, string ) {\r\n\r\n\t\tvar shader = gl.createShader( type );\r\n\r\n\t\tgl.shaderSource( shader, string );\r\n\t\tgl.compileShader( shader );\r\n\r\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\r\n\r\n\t\t}\r\n\r\n\t\t// --enable-privileged-webgl-extension\r\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\t\treturn shader;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLShadowMap.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WebGLShadowMap = function ( _renderer, _lights, _objects ) {\r\n\r\n\tvar _gl = _renderer.context,\r\n\t_state = _renderer.state,\r\n\t_frustum = new THREE.Frustum(),\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_min = new THREE.Vector3(),\r\n\t_max = new THREE.Vector3(),\r\n\r\n\t_matrixPosition = new THREE.Vector3(),\r\n\r\n\t_renderList = [];\r\n\r\n\t// init\r\n\r\n\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\r\n\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\r\n\r\n\tvar _depthMaterial = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader\r\n\t } );\r\n\r\n\tvar _depthMaterialMorph = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tmorphTargets: true\r\n\t} );\r\n\r\n\tvar _depthMaterialSkin = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tskinning: true\r\n\t} );\r\n\r\n\tvar _depthMaterialMorphSkin = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tmorphTargets: true,\r\n\t\tskinning: true\r\n\t} );\r\n\r\n\t_depthMaterial._shadowPass = true;\r\n\t_depthMaterialMorph._shadowPass = true;\r\n\t_depthMaterialSkin._shadowPass = true;\r\n\t_depthMaterialMorphSkin._shadowPass = true;\r\n\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis.type = THREE.PCFShadowMap;\r\n\tthis.cullFace = THREE.CullFaceFront;\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n\t\t// set GL state for depth map\r\n\r\n\t\t_gl.clearColor( 1, 1, 1, 1 );\r\n\t\t_state.disable( _gl.BLEND );\r\n\r\n\t\t_state.enable( _gl.CULL_FACE );\r\n\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\tif ( scope.cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t_gl.cullFace( _gl.FRONT );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t}\r\n\r\n\t\t_state.setDepthTest( true );\r\n\r\n\t\t// render depth map\r\n\r\n\t\tfor ( var i = 0, il = _lights.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar light = _lights[ i ];\r\n\r\n\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\tif ( ! light.shadowMap ) {\r\n\r\n\t\t\t\tvar shadowFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\tif ( scope.type === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\t\t\tshadowFilter = THREE.NearestFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar pars = { minFilter: shadowFilter, magFilter: shadowFilter, format: THREE.RGBAFormat };\r\n\r\n\t\t\t\tlight.shadowMap = new THREE.WebGLRenderTarget( light.shadowMapWidth, light.shadowMapHeight, pars );\r\n\t\t\t\tlight.shadowMapSize = new THREE.Vector2( light.shadowMapWidth, light.shadowMapHeight );\r\n\r\n\t\t\t\tlight.shadowMatrix = new THREE.Matrix4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! light.shadowCamera ) {\r\n\r\n\t\t\t\tif ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\t\tlight.shadowCamera = new THREE.PerspectiveCamera( light.shadowCameraFov, light.shadowMapWidth / light.shadowMapHeight, light.shadowCameraNear, light.shadowCameraFar );\r\n\r\n\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\t\tlight.shadowCamera = new THREE.OrthographicCamera( light.shadowCameraLeft, light.shadowCameraRight, light.shadowCameraTop, light.shadowCameraBottom, light.shadowCameraNear, light.shadowCameraFar );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( \"THREE.ShadowMapPlugin: Unsupported light type for shadow\", light );\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscene.add( light.shadowCamera );\r\n\r\n\t\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( light.shadowCameraVisible && ! light.cameraHelper ) {\r\n\r\n\t\t\t\tlight.cameraHelper = new THREE.CameraHelper( light.shadowCamera );\r\n\t\t\t\tscene.add( light.cameraHelper );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar shadowMap = light.shadowMap;\r\n\t\t\tvar shadowMatrix = light.shadowMatrix;\r\n\t\t\tvar shadowCamera = light.shadowCamera;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tshadowCamera.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t_matrixPosition.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\tshadowCamera.lookAt( _matrixPosition );\r\n\t\t\tshadowCamera.updateMatrixWorld();\r\n\r\n\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\r\n\r\n\t\t\t//\r\n\r\n\t\t\tif ( light.cameraHelper ) light.cameraHelper.visible = light.shadowCameraVisible;\r\n\t\t\tif ( light.shadowCameraVisible ) light.cameraHelper.update();\r\n\r\n\t\t\t// compute shadow matrix\r\n\r\n\t\t\tshadowMatrix.set(\r\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t);\r\n\r\n\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t\t\t// update camera matrices and frustum\r\n\r\n\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\t\t// render shadow map\r\n\r\n\t\t\t_renderer.setRenderTarget( shadowMap );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\t// set object matrices & frustum culling\r\n\r\n\t\t\t_renderList.length = 0;\r\n\r\n\t\t\tprojectObject( scene, shadowCamera );\r\n\r\n\r\n\t\t\t// render regular objects\r\n\r\n\t\t\tfor ( var j = 0, jl = _renderList.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar object = _renderList[ j ];\r\n\t\t\t\tvar geometry = _objects.update( object );\r\n\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\r\n\r\n\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\t\tvar group = groups[ k ];\r\n\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, null, geometry, getDepthMaterial( object, groupMaterial ), object, group );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, null, geometry, getDepthMaterial( object, material ), object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore GL state\r\n\r\n\t\tvar clearColor = _renderer.getClearColor(),\r\n\t\tclearAlpha = _renderer.getClearAlpha();\r\n\r\n\t\t_renderer.setClearColor( clearColor, clearAlpha );\r\n\t\t_state.enable( _gl.BLEND );\r\n\r\n\t\tif ( scope.cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t}\r\n\r\n\t\t_renderer.resetGLState();\r\n\r\n\t\tscope.needsUpdate = false;\r\n\r\n\t};\r\n\r\n\tfunction getDepthMaterial( object, material ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tvar useMorphing = geometry.morphTargets !== undefined && geometry.morphTargets.length > 0 && material.morphTargets;\r\n\t\tvar useSkinning = object instanceof THREE.SkinnedMesh && material.skinning;\r\n\r\n\t\tvar depthMaterial;\r\n\r\n\t\tif ( object.customDepthMaterial ) {\r\n\r\n\t\t\tdepthMaterial = object.customDepthMaterial;\r\n\r\n\t\t} else if ( useSkinning ) {\r\n\r\n\t\t\tdepthMaterial = useMorphing ? _depthMaterialMorphSkin : _depthMaterialSkin;\r\n\r\n\t\t} else if ( useMorphing ) {\r\n\r\n\t\t\tdepthMaterial = _depthMaterialMorph;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdepthMaterial = _depthMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tdepthMaterial.visible = material.visible;\r\n\t\tdepthMaterial.wireframe = material.wireframe;\r\n\t\tdepthMaterial.wireframeLinewidth = material.wireframeLinewidth;\r\n\r\n\t\treturn depthMaterial;\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object, camera ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\r\n\t\t\tif ( object.castShadow && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\r\n\r\n\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\t\t_renderList.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLState.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLState = function ( gl, extensions, paramThreeToGL ) {\r\n\r\n\tvar _this = this;\r\n\r\n\tvar newAttributes = new Uint8Array( 16 );\r\n\tvar enabledAttributes = new Uint8Array( 16 );\r\n\r\n\tvar capabilities = {};\r\n\r\n\tvar compressedTextureFormats = null;\r\n\r\n\tvar currentBlending = null;\r\n\tvar currentBlendEquation = null;\r\n\tvar currentBlendSrc = null;\r\n\tvar currentBlendDst = null;\r\n\tvar currentBlendEquationAlpha = null;\r\n\tvar currentBlendSrcAlpha = null;\r\n\tvar currentBlendDstAlpha = null;\r\n\r\n\tvar currentDepthFunc = null;\r\n\tvar currentDepthWrite = null;\r\n\r\n\tvar currentColorWrite = null;\r\n\r\n\tvar currentFlipSided = null;\r\n\r\n\tvar currentLineWidth = null;\r\n\r\n\tvar currentPolygonOffsetFactor = null;\r\n\tvar currentPolygonOffsetUnits = null;\r\n\r\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\r\n\tvar currentTextureSlot = undefined;\r\n\tvar currentBoundTextures = {};\r\n\r\n\tthis.init = function () {\r\n\r\n\t\tgl.clearColor( 0, 0, 0, 1 );\r\n\t\tgl.clearDepth( 1 );\r\n\t\tgl.clearStencil( 0 );\r\n\r\n\t\tthis.enable( gl.DEPTH_TEST );\r\n\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\tgl.frontFace( gl.CCW );\r\n\t\tgl.cullFace( gl.BACK );\r\n\t\tthis.enable( gl.CULL_FACE );\r\n\r\n\t\tthis.enable( gl.BLEND );\r\n\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t};\r\n\r\n\tthis.initAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enableAttribute = function ( attribute ) {\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disableUnusedAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = enabledAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== true ) {\r\n\r\n\t\t\tgl.enable( id );\r\n\t\t\tcapabilities[ id ] = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== false ) {\r\n\r\n\t\t\tgl.disable( id );\r\n\t\t\tcapabilities[ id ] = false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getCompressedTextureFormats = function () {\r\n\r\n\t\tif ( compressedTextureFormats === null ) {\r\n\r\n\t\t\tcompressedTextureFormats = [];\r\n\r\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\r\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ) {\r\n\r\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\r\n\r\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\r\n\r\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn compressedTextureFormats;\r\n\r\n\t};\r\n\r\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha ) {\r\n\r\n\t\tif ( blending !== currentBlending ) {\r\n\r\n\t\t\tif ( blending === THREE.NoBlending ) {\r\n\r\n\t\t\t\tthis.disable( gl.BLEND );\r\n\r\n\t\t\t} else if ( blending === THREE.AdditiveBlending ) {\r\n\r\n\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\r\n\r\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\r\n\r\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\r\n\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\r\n\r\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\r\n\r\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\r\n\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\r\n\r\n\t\t\t} else if ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\t\tthis.enable( gl.BLEND );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentBlending = blending;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcurrentBlendEquation = null;\r\n\t\t\tcurrentBlendSrc = null;\r\n\t\t\tcurrentBlendDst = null;\r\n\t\t\tcurrentBlendEquationAlpha = null;\r\n\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\tcurrentBlendDstAlpha = null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthFunc = function ( depthFunc ) {\r\n\r\n\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\r\n\t\t\tif ( depthFunc ) {\r\n\r\n\t\t\t\tswitch ( depthFunc ) {\r\n\r\n\t\t\t\t\tcase THREE.NeverDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.AlwaysDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LESS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.EqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.NotEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentDepthFunc = depthFunc;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthTest = function ( depthTest ) {\r\n\r\n\t\tif ( depthTest ) {\r\n\r\n\t\t\tthis.enable( gl.DEPTH_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.DEPTH_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthWrite = function ( depthWrite ) {\r\n\r\n\t\tif ( currentDepthWrite !== depthWrite ) {\r\n\r\n\t\t\tgl.depthMask( depthWrite );\r\n\t\t\tcurrentDepthWrite = depthWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setColorWrite = function ( colorWrite ) {\r\n\r\n\t\tif ( currentColorWrite !== colorWrite ) {\r\n\r\n\t\t\tgl.colorMask( colorWrite, colorWrite, colorWrite, colorWrite );\r\n\t\t\tcurrentColorWrite = colorWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setFlipSided = function ( flipSided ) {\r\n\r\n\t\tif ( currentFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\tgl.frontFace( gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.frontFace( gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setLineWidth = function ( width ) {\r\n\r\n\t\tif ( width !== currentLineWidth ) {\r\n\r\n\t\t\tgl.lineWidth( width );\r\n\r\n\t\t\tcurrentLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setPolygonOffset = function ( polygonOffset, factor, units ) {\r\n\r\n\t\tif ( polygonOffset ) {\r\n\r\n\t\t\tthis.enable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t}\r\n\r\n\t\tif ( polygonOffset && ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) ) {\r\n\r\n\t\t\tgl.polygonOffset( factor, units );\r\n\r\n\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\tcurrentPolygonOffsetUnits = units;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( scissorTest ) {\r\n\r\n\t\tif ( scissorTest ) {\r\n\r\n\t\t\tthis.enable( gl.SCISSOR_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.SCISSOR_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// texture\r\n\r\n\tthis.activeTexture = function ( webglSlot ) {\r\n\r\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\r\n\r\n\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\r\n\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\tcurrentTextureSlot = webglSlot;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.bindTexture = function ( webglType, webglTexture ) {\r\n\r\n\t\tif ( currentTextureSlot === undefined ) {\r\n\r\n\t\t\t_this.activeTexture();\r\n\r\n\t\t}\r\n\r\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture === undefined ) {\r\n\r\n\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n\t\t\tgl.bindTexture( webglType, webglTexture );\r\n\r\n\t\t\tboundTexture.type = webglType;\r\n\t\t\tboundTexture.texture = webglTexture;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.compressedTexImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.texImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcapabilities = {};\r\n\r\n\t\tcompressedTextureFormats = null;\r\n\r\n\t\tcurrentBlending = null;\r\n\r\n\t\tcurrentDepthWrite = null;\r\n\t\tcurrentColorWrite = null;\r\n\r\n\t\tcurrentFlipSided = null;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\tvar hasVertexTexture;\r\n\r\n\tvar tempTexture, occlusionTexture;\r\n\r\n\tvar init = function () {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 1, - 1,  0, 0,\r\n\t\t\t 1, - 1,  1, 0,\r\n\t\t\t 1,  1,  1, 1,\r\n\t\t\t- 1,  1,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\t// buffers\r\n\r\n\t\tvertexBuffer     = gl.createBuffer();\r\n\t\telementBuffer    = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\t// textures\r\n\r\n\t\ttempTexture      = gl.createTexture();\r\n\t\tocclusionTexture = gl.createTexture();\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\r\n\r\n\t\tvar shader;\r\n\r\n\t\tif ( hasVertexTexture ) {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\r\n\r\n\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"precision mediump float;\",\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tprogram = createProgram( shader );\r\n\r\n\t\tattributes = {\r\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\r\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\r\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\r\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\r\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\r\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\r\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\r\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\r\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\r\n\t\t};\r\n\r\n\t};\r\n\r\n\t/*\r\n\t * Render lens flares\r\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t *         reads these back and calculates occlusion.\r\n\t */\r\n\r\n\tthis.render = function ( scene, camera, viewportWidth, viewportHeight ) {\r\n\r\n\t\tif ( flares.length === 0 ) return;\r\n\r\n\t\tvar tempPosition = new THREE.Vector3();\r\n\r\n\t\tvar invAspect = viewportHeight / viewportWidth,\r\n\t\t\thalfViewportWidth = viewportWidth * 0.5,\r\n\t\t\thalfViewportHeight = viewportHeight * 0.5;\r\n\r\n\t\tvar size = 16 / viewportHeight,\r\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\r\n\r\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\r\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.vertex );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t// loop through all lens flares to update their occlusion and positions\r\n\t\t// setup gl and common used attribs/uniforms\r\n\r\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\r\n\t\tgl.uniform1i( uniforms.map, 1 );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tgl.depthMask( false );\r\n\r\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\r\n\r\n\t\t\tsize = 16 / viewportHeight;\r\n\t\t\tscale.set( size * invAspect, size );\r\n\r\n\t\t\t// calc object screen position\r\n\r\n\t\t\tvar flare = flares[ i ];\r\n\r\n\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\r\n\r\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\r\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\r\n\r\n\t\t\t// setup arrays for gl programs\r\n\r\n\t\t\tscreenPosition.copy( tempPosition );\r\n\r\n\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\r\n\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\r\n\r\n\t\t\t// screen cull\r\n\r\n\t\t\tif ( hasVertexTexture || (\r\n\t\t\t\tscreenPositionPixels.x > 0 &&\r\n\t\t\t\tscreenPositionPixels.x < viewportWidth &&\r\n\t\t\t\tscreenPositionPixels.y > 0 &&\r\n\t\t\t\tscreenPositionPixels.y < viewportHeight ) ) {\r\n\r\n\t\t\t\t// save current RGB to temp texture\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// render pink quad\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\r\n\t\t\t\tstate.disable( gl.BLEND );\r\n\t\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// copy result to occlusionMap\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// restore graphics\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\r\n\t\t\t\tstate.disable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// update object positions\r\n\r\n\t\t\t\tflare.positionScreen.copy( screenPosition );\r\n\r\n\t\t\t\tif ( flare.customUpdateCallback ) {\r\n\r\n\t\t\t\t\tflare.customUpdateCallback( flare );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tflare.updateLensFlares();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// render flares\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\r\n\t\t\t\tstate.enable( gl.BLEND );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\r\n\r\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\r\n\r\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\r\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\r\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\r\n\r\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewportHeight;\r\n\r\n\t\t\t\t\t\tscale.x = size * invAspect;\r\n\t\t\t\t\t\tscale.y = size;\r\n\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\r\n\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\r\n\r\n\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\r\n\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\r\n\r\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.DEPTH_TEST );\r\n\t\tgl.depthMask( true );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram ( shader ) {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\r\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\r\n\r\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\r\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\r\n\r\n\t\tgl.compileShader( fragmentShader );\r\n\t\tgl.compileShader( vertexShader );\r\n\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\t\tgl.attachShader( program, vertexShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/SpritePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpritePlugin = function ( renderer, sprites ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\r\n\tvar texture;\r\n\r\n\t// decompose matrixWorld\r\n\r\n\tvar spritePosition = new THREE.Vector3();\r\n\tvar spriteRotation = new THREE.Quaternion();\r\n\tvar spriteScale = new THREE.Vector3();\r\n\r\n\tvar init = function () {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5,  0, 0,\r\n\t\t\t  0.5, - 0.5,  1, 0,\r\n\t\t\t  0.5,   0.5,  1, 1,\r\n\t\t\t- 0.5,   0.5,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\tvertexBuffer  = gl.createBuffer();\r\n\t\telementBuffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\tprogram = createProgram();\r\n\r\n\t\tattributes = {\r\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\r\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\r\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\r\n\r\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\r\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\r\n\r\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\r\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\r\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\r\n\r\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\r\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\r\n\r\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\r\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\r\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\r\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\r\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\r\n\r\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\r\n\t\t};\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = 8;\r\n\t\tcanvas.height = 8;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.fillStyle = 'white';\r\n\t\tcontext.fillRect( 0, 0, 8, 8 );\r\n\r\n\t\ttexture = new THREE.Texture( canvas );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t};\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( sprites.length === 0 ) return;\r\n\r\n\t\t// setup gl\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.position );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.BLEND );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\tgl.uniform1i( uniforms.map, 0 );\r\n\r\n\t\tvar oldFogType = 0;\r\n\t\tvar sceneFogType = 0;\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\tif ( fog ) {\r\n\r\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\r\n\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\r\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\r\n\t\t\t\toldFogType = 1;\r\n\t\t\t\tsceneFogType = 1;\r\n\r\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\r\n\t\t\t\toldFogType = 2;\r\n\t\t\t\tsceneFogType = 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\r\n\t\t\toldFogType = 0;\r\n\t\t\tsceneFogType = 0;\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// update positions and sort\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\r\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\r\n\r\n\t\t}\r\n\r\n\t\tsprites.sort( painterSortStable );\r\n\r\n\t\t// render all sprites\r\n\r\n\t\tvar scale = [];\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\t\t\tvar material = sprite.material;\r\n\r\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\r\n\r\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\r\n\t\t\tscale[ 0 ] = spriteScale.x;\r\n\t\t\tscale[ 1 ] = spriteScale.y;\r\n\r\n\t\t\tvar fogType = 0;\r\n\r\n\t\t\tif ( scene.fog && material.fog ) {\r\n\r\n\t\t\t\tfogType = sceneFogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( oldFogType !== fogType ) {\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\r\n\t\t\t\toldFogType = fogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.map !== null ) {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\r\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\r\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\r\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\tstate.setDepthTest( material.depthTest );\r\n\t\t\tstate.setDepthWrite( material.depthWrite );\r\n\r\n\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\r\n\r\n\t\t\t\trenderer.setTexture( material.map, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setTexture( texture, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram () {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\r\n\t\tgl.shaderSource( vertexShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform float rotation;',\r\n\t\t\t'uniform vec2 scale;',\r\n\t\t\t'uniform vec2 uvOffset;',\r\n\t\t\t'uniform vec2 uvScale;',\r\n\r\n\t\t\t'attribute vec2 position;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\r\n\r\n\t\t\t\t'vec2 alignedPosition = position * scale;',\r\n\r\n\t\t\t\t'vec2 rotatedPosition;',\r\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\r\n\t\t\t\t'vec4 finalPosition;',\r\n\r\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\r\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\r\n\r\n\t\t\t\t'gl_Position = finalPosition;',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.shaderSource( fragmentShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform vec3 color;',\r\n\t\t\t'uniform sampler2D map;',\r\n\t\t\t'uniform float opacity;',\r\n\r\n\t\t\t'uniform int fogType;',\r\n\t\t\t'uniform vec3 fogColor;',\r\n\t\t\t'uniform float fogDensity;',\r\n\t\t\t'uniform float fogNear;',\r\n\t\t\t'uniform float fogFar;',\r\n\t\t\t'uniform float alphaTest;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\r\n\r\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\r\n\r\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\r\n\t\t\t\t'if ( fogType > 0 ) {',\r\n\r\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\r\n\t\t\t\t\t'float fogFactor = 0.0;',\r\n\r\n\t\t\t\t\t'if ( fogType == 1 ) {',\r\n\r\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\r\n\r\n\t\t\t\t\t'} else {',\r\n\r\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\r\n\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\r\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\r\n\t\t\t\t\t'}',\r\n\r\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\r\n\r\n\t\t\t\t'}',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.compileShader( vertexShader );\r\n\t\tgl.compileShader( fragmentShader );\r\n\r\n\t\tgl.attachShader( program, vertexShader );\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn b.id - a.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/GeometryUtils.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\r\n\t\tvar matrix;\r\n\r\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/ImageUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Daosheng Mu / https://github.com/DaoshengMu/\r\n */\r\n\r\nTHREE.ImageUtils = {\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\r\n\r\n\t\tvar loader = new THREE.ImageLoader();\r\n\t\tloader.crossOrigin = this.crossOrigin;\r\n\r\n\t\tvar texture = new THREE.Texture( undefined, mapping );\r\n\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t}, undefined, function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t} );\r\n\r\n\t\ttexture.sourceFile = url;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadTextureCube: function ( array, mapping, onLoad, onError ) {\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar loader = new THREE.ImageLoader();\r\n\t\tloader.crossOrigin = this.crossOrigin;\r\n\r\n\t\tvar texture = new THREE.CubeTexture( images, mapping );\r\n\r\n\t\tvar loaded = 0;\r\n\r\n\t\tvar loadTexture = function ( i ) {\r\n\r\n\t\t\tloader.load( array[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, undefined, onError );\r\n\r\n\t\t};\r\n\r\n\t\tfor ( var i = 0, il = array.length; i < il; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadCompressedTexture: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' )\r\n\r\n\t},\r\n\r\n\tloadCompressedTextureCube: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' )\r\n\r\n\t},\r\n\r\n\tgetNormalMap: function ( image, depth ) {\r\n\r\n\t\t// Adapted from http://www.paulbrunt.co.uk/lab/heightnormal/\r\n\r\n\t\tvar cross = function ( a, b ) {\r\n\r\n\t\t\treturn [ a[ 1 ] * b[ 2 ] - a[ 2 ] * b[ 1 ], a[ 2 ] * b[ 0 ] - a[ 0 ] * b[ 2 ], a[ 0 ] * b[ 1 ] - a[ 1 ] * b[ 0 ] ];\r\n\r\n\t\t};\r\n\r\n\t\tvar subtract = function ( a, b ) {\r\n\r\n\t\t\treturn [ a[ 0 ] - b[ 0 ], a[ 1 ] - b[ 1 ], a[ 2 ] - b[ 2 ] ];\r\n\r\n\t\t};\r\n\r\n\t\tvar normalize = function ( a ) {\r\n\r\n\t\t\tvar l = Math.sqrt( a[ 0 ] * a[ 0 ] + a[ 1 ] * a[ 1 ] + a[ 2 ] * a[ 2 ] );\r\n\t\t\treturn [ a[ 0 ] / l, a[ 1 ] / l, a[ 2 ] / l ];\r\n\r\n\t\t};\r\n\r\n\t\tdepth = depth | 1;\r\n\r\n\t\tvar width = image.width;\r\n\t\tvar height = image.height;\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = width;\r\n\t\tcanvas.height = height;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.drawImage( image, 0, 0 );\r\n\r\n\t\tvar data = context.getImageData( 0, 0, width, height ).data;\r\n\t\tvar imageData = context.createImageData( width, height );\r\n\t\tvar output = imageData.data;\r\n\r\n\t\tfor ( var x = 0; x < width; x ++ ) {\r\n\r\n\t\t\tfor ( var y = 0; y < height; y ++ ) {\r\n\r\n\t\t\t\tvar ly = y - 1 < 0 ? 0 : y - 1;\r\n\t\t\t\tvar uy = y + 1 > height - 1 ? height - 1 : y + 1;\r\n\t\t\t\tvar lx = x - 1 < 0 ? 0 : x - 1;\r\n\t\t\t\tvar ux = x + 1 > width - 1 ? width - 1 : x + 1;\r\n\r\n\t\t\t\tvar points = [];\r\n\t\t\t\tvar origin = [ 0, 0, data[ ( y * width + x ) * 4 ] / 255 * depth ];\r\n\t\t\t\tpoints.push( [ - 1, 0, data[ ( y * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ - 1, - 1, data[ ( ly * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 0, - 1, data[ ( ly * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 1, - 1, data[ ( ly * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 1, 0, data[ ( y * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 1, 1, data[ ( uy * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 0, 1, data[ ( uy * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ - 1, 1, data[ ( uy * width + lx ) * 4 ] / 255 * depth ] );\r\n\r\n\t\t\t\tvar normals = [];\r\n\t\t\t\tvar num_points = points.length;\r\n\r\n\t\t\t\tfor ( var i = 0; i < num_points; i ++ ) {\r\n\r\n\t\t\t\t\tvar v1 = points[ i ];\r\n\t\t\t\t\tvar v2 = points[ ( i + 1 ) % num_points ];\r\n\t\t\t\t\tv1 = subtract( v1, origin );\r\n\t\t\t\t\tv2 = subtract( v2, origin );\r\n\t\t\t\t\tnormals.push( normalize( cross( v1, v2 ) ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar normal = [ 0, 0, 0 ];\r\n\r\n\t\t\t\tfor ( var i = 0; i < normals.length; i ++ ) {\r\n\r\n\t\t\t\t\tnormal[ 0 ] += normals[ i ][ 0 ];\r\n\t\t\t\t\tnormal[ 1 ] += normals[ i ][ 1 ];\r\n\t\t\t\t\tnormal[ 2 ] += normals[ i ][ 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnormal[ 0 ] /= normals.length;\r\n\t\t\t\tnormal[ 1 ] /= normals.length;\r\n\t\t\t\tnormal[ 2 ] /= normals.length;\r\n\r\n\t\t\t\tvar idx = ( y * width + x ) * 4;\r\n\r\n\t\t\t\toutput[ idx ] = ( ( normal[ 0 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 1 ] = ( ( normal[ 1 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 2 ] = ( normal[ 2 ] * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 3 ] = 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcontext.putImageData( imageData, 0, 0 );\r\n\r\n\t\treturn canvas;\r\n\r\n\t},\r\n\r\n\tgenerateDataTexture: function ( width, height, color ) {\r\n\r\n\t\tvar size = width * height;\r\n\t\tvar data = new Uint8Array( 3 * size );\r\n\r\n\t\tvar r = Math.floor( color.r * 255 );\r\n\t\tvar g = Math.floor( color.g * 255 );\r\n\t\tvar b = Math.floor( color.b * 255 );\r\n\r\n\t\tfor ( var i = 0; i < size; i ++ ) {\r\n\r\n\t\t\tdata[ i * 3 ] \t   = r;\r\n\t\t\tdata[ i * 3 + 1 ] = g;\r\n\t\t\tdata[ i * 3 + 2 ] = b;\r\n\r\n\t\t}\r\n\r\n\t\tvar texture = new THREE.DataTexture( data, width, height, THREE.RGBFormat );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/SceneUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\r\n\r\n\t\tvar group = new THREE.Group();\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn group;\r\n\r\n\t},\r\n\r\n\tdetach: function ( child, parent, scene ) {\r\n\r\n\t\tchild.applyMatrix( parent.matrixWorld );\r\n\t\tparent.remove( child );\r\n\t\tscene.add( child );\r\n\r\n\t},\r\n\r\n\tattach: function ( child, scene, parent ) {\r\n\r\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\r\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\r\n\t\tchild.applyMatrix( matrixWorldInverse );\r\n\r\n\t\tscene.remove( child );\r\n\t\tparent.add( child );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/FontUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * For Text operations in three.js (See TextGeometry)\r\n *\r\n * It uses techniques used in:\r\n *\r\n *\tTriangulation ported from AS3\r\n *\t\tSimple Polygon Triangulation\r\n *\t\thttp://actionsnippet.com/?p=1462\r\n *\r\n * \tA Method to triangulate shapes with holes\r\n *\t\thttp://www.sakri.net/blog/2009/06/12/an-approach-to-triangulating-polygons-with-holes/\r\n *\r\n */\r\n\r\nTHREE.FontUtils = {\r\n\r\n\tfaces: {},\r\n\r\n\t// Just for now. face[weight][style]\r\n\r\n\tface: 'helvetiker',\r\n\tweight: 'normal',\r\n\tstyle: 'normal',\r\n\tsize: 150,\r\n\tdivisions: 10,\r\n\r\n\tgetFace: function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\treturn this.faces[ this.face.toLowerCase() ][ this.weight ][ this.style ];\r\n\r\n\t\t} catch ( e ) {\r\n\r\n\t\t\tthrow \"The font \" + this.face + \" with \" + this.weight + \" weight and \" + this.style + \" style is missing.\"\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tloadFace: function ( data ) {\r\n\r\n\t\tvar family = data.familyName.toLowerCase();\r\n\r\n\t\tvar ThreeFont = this;\r\n\r\n\t\tThreeFont.faces[ family ] = ThreeFont.faces[ family ] || {};\r\n\r\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ] = ThreeFont.faces[ family ][ data.cssFontWeight ] || {};\r\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\r\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tdrawText: function ( text ) {\r\n\r\n\t\t// RenderText\r\n\r\n\t\tvar i,\r\n\t\t\tface = this.getFace(),\r\n\t\t\tscale = this.size / face.resolution,\r\n\t\t\toffset = 0,\r\n\t\t\tchars = String( text ).split( '' ),\r\n\t\t\tlength = chars.length;\r\n\r\n\t\tvar fontPaths = [];\r\n\r\n\t\tfor ( i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tvar path = new THREE.Path();\r\n\r\n\t\t\tvar ret = this.extractGlyphPoints( chars[ i ], face, scale, offset, path );\r\n\t\t\toffset += ret.offset;\r\n\r\n\t\t\tfontPaths.push( ret.path );\r\n\r\n\t\t}\r\n\r\n\t\t// get the width\r\n\r\n\t\tvar width = offset / 2;\r\n\t\t//\r\n\t\t// for ( p = 0; p < allPts.length; p++ ) {\r\n\t\t//\r\n\t\t// \tallPts[ p ].x -= width;\r\n\t\t//\r\n\t\t// }\r\n\r\n\t\t//var extract = this.extractPoints( allPts, characterPts );\r\n\t\t//extract.contour = allPts;\r\n\r\n\t\t//extract.paths = fontPaths;\r\n\t\t//extract.offset = width;\r\n\r\n\t\treturn { paths: fontPaths, offset: width };\r\n\r\n\t},\r\n\r\n\r\n\r\n\r\n\textractGlyphPoints: function ( c, face, scale, offset, path ) {\r\n\r\n\t\tvar pts = [];\r\n\r\n\t\tvar i, i2, divisions,\r\n\t\t\toutline, action, length,\r\n\t\t\tscaleX, scaleY,\r\n\t\t\tx, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2,\r\n\t\t\tlaste,\r\n\t\t\tglyph = face.glyphs[ c ] || face.glyphs[ '?' ];\r\n\r\n\t\tif ( ! glyph ) return;\r\n\r\n\t\tif ( glyph.o ) {\r\n\r\n\t\t\toutline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\t\t\tlength = outline.length;\r\n\r\n\t\t\tscaleX = scale;\r\n\t\t\tscaleY = scale;\r\n\r\n\t\t\tfor ( i = 0; i < length; ) {\r\n\r\n\t\t\t\taction = outline[ i ++ ];\r\n\r\n\t\t\t\t//console.log( action );\r\n\r\n\t\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase 'm':\r\n\r\n\t\t\t\t\t// Move To\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\r\n\t\t\t\t\tpath.moveTo( x, y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'l':\r\n\r\n\t\t\t\t\t// Line To\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\tpath.lineTo( x, y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'q':\r\n\r\n\t\t\t\t\t// QuadraticCurveTo\r\n\r\n\t\t\t\t\tcpx  = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\tcpy  = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scaleY;\r\n\r\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\tTHREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\t\t\tTHREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'b':\r\n\r\n\t\t\t\t\t// Cubic Bezier Curve\r\n\r\n\t\t\t\t\tcpx  = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy  = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\tcpx2 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy2 = outline[ i ++ ] *  scaleY;\r\n\r\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\tTHREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\t\t\tTHREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn { offset: glyph.ha * scale, path: path };\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\nTHREE.FontUtils.generateShapes = function ( text, parameters ) {\r\n\r\n\t// Parameters\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar size = parameters.size !== undefined ? parameters.size : 100;\r\n\tvar curveSegments = parameters.curveSegments !== undefined ? parameters.curveSegments : 4;\r\n\r\n\tvar font = parameters.font !== undefined ? parameters.font : 'helvetiker';\r\n\tvar weight = parameters.weight !== undefined ? parameters.weight : 'normal';\r\n\tvar style = parameters.style !== undefined ? parameters.style : 'normal';\r\n\r\n\tTHREE.FontUtils.size = size;\r\n\tTHREE.FontUtils.divisions = curveSegments;\r\n\r\n\tTHREE.FontUtils.face = font;\r\n\tTHREE.FontUtils.weight = weight;\r\n\tTHREE.FontUtils.style = style;\r\n\r\n\t// Get a Font data json object\r\n\r\n\tvar data = THREE.FontUtils.drawText( text );\r\n\r\n\tvar paths = data.paths;\r\n\tvar shapes = [];\r\n\r\n\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t}\r\n\r\n\treturn shapes;\r\n\r\n};\r\n\r\n\r\n/**\r\n * This code is a quick port of code written in C++ which was submitted to\r\n * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n * See original code and more information here:\r\n * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n *\r\n * ported to actionscript by Zevan Rosser\r\n * www.actionsnippet.com\r\n *\r\n * ported to javascript by Joshua Koo\r\n * http://www.lab4games.net/zz85/blog\r\n *\r\n */\r\n\r\n\r\n( function ( namespace ) {\r\n\r\n\tvar EPSILON = 0.0000000001;\r\n\r\n\t// takes in an contour array and returns\r\n\r\n\tvar process = function ( contour, indices ) {\r\n\r\n\t\tvar n = contour.length;\r\n\r\n\t\tif ( n < 3 ) return null;\r\n\r\n\t\tvar result = [],\r\n\t\t\tverts = [],\r\n\t\t\tvertIndices = [];\r\n\r\n\t\t/* we want a counter-clockwise polygon in verts */\r\n\r\n\t\tvar u, v, w;\r\n\r\n\t\tif ( area( contour ) > 0.0 ) {\r\n\r\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\r\n\r\n\t\t}\r\n\r\n\t\tvar nv = n;\r\n\r\n\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\r\n\r\n\t\tvar count = 2 * nv;   /* error detection */\r\n\r\n\t\tfor ( v = nv - 1; nv > 2; ) {\r\n\r\n\t\t\t/* if we loop, it is probably a non-simple polygon */\r\n\r\n\t\t\tif ( ( count -- ) <= 0 ) {\r\n\r\n\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\r\n\r\n\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\r\n\t\t\t\t//return null;\r\n\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\r\n\t\t\t\tconsole.warn( 'THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()' );\r\n\r\n\t\t\t\tif ( indices ) return vertIndices;\r\n\t\t\t\treturn result;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\r\n\r\n\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\r\n\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\r\n\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\r\n\r\n\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\r\n\r\n\t\t\t\tvar a, b, c, s, t;\r\n\r\n\t\t\t\t/* true names of the vertices */\r\n\r\n\t\t\t\ta = verts[ u ];\r\n\t\t\t\tb = verts[ v ];\r\n\t\t\t\tc = verts[ w ];\r\n\r\n\t\t\t\t/* output Triangle */\r\n\r\n\t\t\t\tresult.push( [ contour[ a ],\r\n\t\t\t\t\tcontour[ b ],\r\n\t\t\t\t\tcontour[ c ] ] );\r\n\r\n\r\n\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\r\n\r\n\t\t\t\t/* remove v from the remaining polygon */\r\n\r\n\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\r\n\r\n\t\t\t\t\tverts[ s ] = verts[ t ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnv --;\r\n\r\n\t\t\t\t/* reset error detection counter */\r\n\r\n\t\t\t\tcount = 2 * nv;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( indices ) return vertIndices;\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tvar area = function ( contour ) {\r\n\r\n\t\tvar n = contour.length;\r\n\t\tvar a = 0.0;\r\n\r\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t};\r\n\r\n\tvar snip = function ( contour, u, v, w, n, verts ) {\r\n\r\n\t\tvar p;\r\n\t\tvar ax, ay, bx, by;\r\n\t\tvar cx, cy, px, py;\r\n\r\n\t\tax = contour[ verts[ u ] ].x;\r\n\t\tay = contour[ verts[ u ] ].y;\r\n\r\n\t\tbx = contour[ verts[ v ] ].x;\r\n\t\tby = contour[ verts[ v ] ].y;\r\n\r\n\t\tcx = contour[ verts[ w ] ].x;\r\n\t\tcy = contour[ verts[ w ] ].y;\r\n\r\n\t\tif ( EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\r\n\r\n\t\tvar aX, aY, bX, bY, cX, cY;\r\n\t\tvar apx, apy, bpx, bpy, cpx, cpy;\r\n\t\tvar cCROSSap, bCROSScp, aCROSSbp;\r\n\r\n\t\taX = cx - bx;  aY = cy - by;\r\n\t\tbX = ax - cx;  bY = ay - cy;\r\n\t\tcX = bx - ax;  cY = by - ay;\r\n\r\n\t\tfor ( p = 0; p < n; p ++ ) {\r\n\r\n\t\t\tpx = contour[ verts[ p ] ].x;\r\n\t\t\tpy = contour[ verts[ p ] ].y;\r\n\r\n\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\r\n\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\r\n\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\r\n\r\n\t\t\tapx = px - ax;  apy = py - ay;\r\n\t\t\tbpx = px - bx;  bpy = py - by;\r\n\t\t\tcpx = px - cx;  cpy = py - cy;\r\n\r\n\t\t\t// see if p is inside triangle abc\r\n\r\n\t\t\taCROSSbp = aX * bpy - aY * bpx;\r\n\t\t\tcCROSSap = cX * apy - cY * apx;\r\n\t\t\tbCROSScp = bX * cpy - bY * cpx;\r\n\r\n\t\t\tif ( ( aCROSSbp >= - EPSILON ) && ( bCROSScp >= - EPSILON ) && ( cCROSSap >= - EPSILON ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n\r\n\tnamespace.Triangulate = process;\r\n\tnamespace.Triangulate.area = area;\r\n\r\n\treturn namespace;\r\n\r\n} )( THREE.FontUtils );\r\n\r\n// To use the typeface.js face files, hook up the API\r\n\r\nTHREE.typeface_js = { faces: THREE.FontUtils.faces, loadFace: THREE.FontUtils.loadFace };\r\nif ( typeof self !== 'undefined' ) self._typeface_js = THREE.typeface_js;\r\n\r\n// File:src/extras/audio/Audio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Audio = function ( listener ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.context = listener.context;\r\n\tthis.source = this.context.createBufferSource();\r\n\tthis.source.onended = this.onEnded.bind( this );\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.connect( this.gain );\r\n\r\n\tthis.autoplay = false;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.playbackRate = 1;\r\n\tthis.isPlaying = false;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Audio.prototype.constructor = THREE.Audio;\r\n\r\nTHREE.Audio.prototype.load = function ( file ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar request = new XMLHttpRequest();\r\n\trequest.open( 'GET', file, true );\r\n\trequest.responseType = 'arraybuffer';\r\n\trequest.onload = function ( e ) {\r\n\r\n\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\r\n\r\n\t\t\tscope.source.buffer = buffer;\r\n\r\n\t\t\tif ( scope.autoplay ) scope.play();\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\trequest.send();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.play = function () {\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tvar source = this.context.createBufferSource();\r\n\r\n\tsource.buffer = this.source.buffer;\r\n\tsource.loop = this.source.loop;\r\n\tsource.onended = this.source.onended;\r\n\tsource.start( 0, this.startTime );\r\n\tsource.playbackRate.value = this.playbackRate;\r\n\r\n\tthis.isPlaying = true;\r\n\r\n\tthis.source = source;\r\n\r\n\tthis.connect();\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.pause = function () {\r\n\r\n\tthis.source.stop();\r\n\tthis.startTime = this.context.currentTime;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.stop = function () {\r\n\r\n\tthis.source.stop();\r\n\tthis.startTime = 0;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.connect = function () {\r\n\r\n\tif ( this.filter !== undefined ) {\r\n\r\n\t\tthis.source.connect( this.filter );\r\n\t\tthis.filter.connect( this.panner );\r\n\r\n\t} else {\r\n\r\n\t\tthis.source.connect( this.panner );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.disconnect = function () {\r\n\r\n\tif ( this.filter !== undefined ) {\r\n\r\n\t\tthis.source.disconnect( this.filter );\r\n\t\tthis.filter.disconnect( this.panner );\r\n\r\n\t} else {\r\n\r\n\t\tthis.source.disconnect( this.panner );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setFilter = function ( value ) {\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tthis.disconnect();\r\n\t\tthis.filter = value;\r\n\t\tthis.connect();\r\n\r\n\t} else {\r\n\r\n\t\tthis.filter = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getFilter = function () {\r\n\r\n\treturn this.filter;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setPlaybackRate = function ( value ) {\r\n\r\n\tthis.playbackRate = value;\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tthis.source.playbackRate.value = this.playbackRate;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getPlaybackRate = function () {\r\n\r\n\treturn this.playbackRate;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.onEnded = function() {\r\n\r\n\tthis.isPlaying = false;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setLoop = function ( value ) {\r\n\r\n\tthis.source.loop = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getLoop = function () {\r\n\r\n\treturn this.source.loop;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setRefDistance = function ( value ) {\r\n\r\n\tthis.panner.refDistance = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getRefDistance = function () {\r\n\r\n\treturn this.panner.refDistance;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setRolloffFactor = function ( value ) {\r\n\r\n\tthis.panner.rolloffFactor = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getRolloffFactor = function () {\r\n\r\n\treturn this.panner.rolloffFactor;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setVolume = function ( value ) {\r\n\r\n\tthis.gain.gain.value = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getVolume = function () {\r\n\r\n\treturn this.gain.gain.value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\r\n\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tposition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tthis.panner.setPosition( position.x, position.y, position.z );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/audio/AudioListener.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioListener = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.AudioListener.prototype.constructor = THREE.AudioListener;\r\n\r\nTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3();\r\n\r\n\tvar orientation = new THREE.Vector3();\r\n\r\n\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tvar listener = this.context.listener;\r\n\t\tvar up = this.up;\r\n\r\n\t\tthis.matrixWorld.decompose( position, quaternion, scale );\r\n\r\n\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t\tlistener.setPosition( position.x, position.y, position.z );\r\n\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/core/Curve.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Extensible curve object\r\n *\r\n * Some common of Curve methods\r\n * .getPoint(t), getTangent(t)\r\n * .getPointAt(u), getTagentAt(u)\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following classes subclasses THREE.Curve:\r\n *\r\n * -- 2d classes --\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.SplineCurve\r\n * THREE.ArcCurve\r\n * THREE.EllipseCurve\r\n *\r\n * -- 3d classes --\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.SplineCurve3\r\n * THREE.ClosedSplineCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tAbstract Curve base class\r\n **************************************************************/\r\n\r\nTHREE.Curve = function () {\r\n\r\n};\r\n\r\n// Virtual base class method to overwrite and implement in subclasses\r\n//\t- t [0 .. 1]\r\n\r\nTHREE.Curve.prototype.getPoint = function ( t ) {\r\n\r\n\tconsole.warn( \"THREE.Curve: Warning, getPoint() not implemented!\" );\r\n\treturn null;\r\n\r\n};\r\n\r\n// Get point at relative position in curve according to arc length\r\n// - u [0 .. 1]\r\n\r\nTHREE.Curve.prototype.getPointAt = function ( u ) {\r\n\r\n\tvar t = this.getUtoTmapping( u );\r\n\treturn this.getPoint( t );\r\n\r\n};\r\n\r\n// Get sequence of points using getPoint( t )\r\n\r\nTHREE.Curve.prototype.getPoints = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = 5;\r\n\r\n\tvar d, pts = [];\r\n\r\n\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\tpts.push( this.getPoint( d / divisions ) );\r\n\r\n\t}\r\n\r\n\treturn pts;\r\n\r\n};\r\n\r\n// Get sequence of points using getPointAt( u )\r\n\r\nTHREE.Curve.prototype.getSpacedPoints = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = 5;\r\n\r\n\tvar d, pts = [];\r\n\r\n\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\tpts.push( this.getPointAt( d / divisions ) );\r\n\r\n\t}\r\n\r\n\treturn pts;\r\n\r\n};\r\n\r\n// Get total curve arc length\r\n\r\nTHREE.Curve.prototype.getLength = function () {\r\n\r\n\tvar lengths = this.getLengths();\r\n\treturn lengths[ lengths.length - 1 ];\r\n\r\n};\r\n\r\n// Get list of cumulative segment lengths\r\n\r\nTHREE.Curve.prototype.getLengths = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = ( this.__arcLengthDivisions ) ? ( this.__arcLengthDivisions ) : 200;\r\n\r\n\tif ( this.cacheArcLengths\r\n\t\t&& ( this.cacheArcLengths.length === divisions + 1 )\r\n\t\t&& ! this.needsUpdate ) {\r\n\r\n\t\t//console.log( \"cached\", this.cacheArcLengths );\r\n\t\treturn this.cacheArcLengths;\r\n\r\n\t}\r\n\r\n\tthis.needsUpdate = false;\r\n\r\n\tvar cache = [];\r\n\tvar current, last = this.getPoint( 0 );\r\n\tvar p, sum = 0;\r\n\r\n\tcache.push( 0 );\r\n\r\n\tfor ( p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\tcurrent = this.getPoint ( p / divisions );\r\n\t\tsum += current.distanceTo( last );\r\n\t\tcache.push( sum );\r\n\t\tlast = current;\r\n\r\n\t}\r\n\r\n\tthis.cacheArcLengths = cache;\r\n\r\n\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\r\n\r\n};\r\n\r\n\r\nTHREE.Curve.prototype.updateArcLengths = function() {\r\n\r\n\tthis.needsUpdate = true;\r\n\tthis.getLengths();\r\n\r\n};\r\n\r\n// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\nTHREE.Curve.prototype.getUtoTmapping = function ( u, distance ) {\r\n\r\n\tvar arcLengths = this.getLengths();\r\n\r\n\tvar i = 0, il = arcLengths.length;\r\n\r\n\tvar targetArcLength; // The targeted u distance value to get\r\n\r\n\tif ( distance ) {\r\n\r\n\t\ttargetArcLength = distance;\r\n\r\n\t} else {\r\n\r\n\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t}\r\n\r\n\t//var time = Date.now();\r\n\r\n\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\tvar low = 0, high = il - 1, comparison;\r\n\r\n\twhile ( low <= high ) {\r\n\r\n\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\tlow = i + 1;\r\n\r\n\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\thigh = i - 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\thigh = i;\r\n\t\t\tbreak;\r\n\r\n\t\t\t// DONE\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\ti = high;\r\n\r\n\t//console.log('b' , i, low, high, Date.now()- time);\r\n\r\n\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n\t\tvar t = i / ( il - 1 );\r\n\t\treturn t;\r\n\r\n\t}\r\n\r\n\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n\tvar lengthBefore = arcLengths[ i ];\r\n\tvar lengthAfter = arcLengths[ i + 1 ];\r\n\r\n\tvar segmentLength = lengthAfter - lengthBefore;\r\n\r\n\t// determine where we are between the 'before' and 'after' points\r\n\r\n\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n\t// add that fractional amount to t\r\n\r\n\tvar t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n\treturn t;\r\n\r\n};\r\n\r\n// Returns a unit vector tangent at t\r\n// In case any sub curve does not implement its tangent derivation,\r\n// 2 points a small delta apart will be used to find its gradient\r\n// which seems to give a reasonable approximation\r\n\r\nTHREE.Curve.prototype.getTangent = function( t ) {\r\n\r\n\tvar delta = 0.0001;\r\n\tvar t1 = t - delta;\r\n\tvar t2 = t + delta;\r\n\r\n\t// Capping in case of danger\r\n\r\n\tif ( t1 < 0 ) t1 = 0;\r\n\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\tvar pt1 = this.getPoint( t1 );\r\n\tvar pt2 = this.getPoint( t2 );\r\n\r\n\tvar vec = pt2.clone().sub( pt1 );\r\n\treturn vec.normalize();\r\n\r\n};\r\n\r\n\r\nTHREE.Curve.prototype.getTangentAt = function ( u ) {\r\n\r\n\tvar t = this.getUtoTmapping( u );\r\n\treturn this.getTangent( t );\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\n/**************************************************************\r\n *\tUtils\r\n **************************************************************/\r\n\r\nTHREE.Curve.Utils = {\r\n\r\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\r\n\r\n\t},\r\n\r\n\t// Puay Bing, thanks for helping with this derivative!\r\n\r\n\ttangentCubicBezier: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn - 3 * p0 * ( 1 - t ) * ( 1 - t )  +\r\n\t\t\t3 * p1 * ( 1 - t ) * ( 1 - t ) - 6 * t * p1 * ( 1 - t ) +\r\n\t\t\t6 * t *  p2 * ( 1 - t ) - 3 * t * t * p2 +\r\n\t\t\t3 * t * t * p3;\r\n\r\n\t},\r\n\r\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t// To check if my formulas are correct\r\n\r\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3 − 3t^2 + 1\r\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3 − 2t^2 + t\r\n\t\tvar h01 = - 6 * t * t + 6 * t; \t// − 2t3 + 3t2\r\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3 − t2\r\n\r\n\t\treturn h00 + h10 + h01 + h11;\r\n\r\n\t},\r\n\r\n\t// Catmull-Rom\r\n\r\n\tinterpolate: function( p0, p1, p2, p3, t ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\r\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t * t2;\r\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// TODO: Transformation for Curves?\r\n\r\n/**************************************************************\r\n *\t3D Curves\r\n **************************************************************/\r\n\r\n// A Factory method for creating new curve subclasses\r\n\r\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\r\n\r\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\r\n\tconstructor.prototype.constructor = constructor;\r\n\tconstructor.prototype.getPoint = getPointFunc;\r\n\r\n\treturn constructor;\r\n\r\n};\r\n\r\n// File:src/extras/core/CurvePath.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nTHREE.CurvePath = function () {\r\n\r\n\tthis.curves = [];\r\n\tthis.bends = [];\r\n\r\n\tthis.autoClose = false; // Automatically closes the path\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CurvePath.prototype.constructor = THREE.CurvePath;\r\n\r\nTHREE.CurvePath.prototype.add = function ( curve ) {\r\n\r\n\tthis.curves.push( curve );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.checkConnection = function() {\r\n\t// TODO\r\n\t// If the ending of curve is not connected to the starting\r\n\t// or the next curve, then, this is not a real path\r\n};\r\n\r\nTHREE.CurvePath.prototype.closePath = function() {\r\n\r\n\t// TODO Test\r\n\t// and verify for vector3 (needs to implement equals)\r\n\t// Add a line curve if start and end of lines are not connected\r\n\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n\tif ( ! startPoint.equals( endPoint ) ) {\r\n\r\n\t\tthis.curves.push( new THREE.LineCurve( endPoint, startPoint ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// To get accurate point with reference to\r\n// entire path distance at time t,\r\n// following has to be done:\r\n\r\n// 1. Length of each sub path have to be known\r\n// 2. Locate and identify type of curve\r\n// 3. Get t for the curve\r\n// 4. Return curve.getPointAt(t')\r\n\r\nTHREE.CurvePath.prototype.getPoint = function( t ) {\r\n\r\n\tvar d = t * this.getLength();\r\n\tvar curveLengths = this.getCurveLengths();\r\n\tvar i = 0, diff, curve;\r\n\r\n\t// To think about boundaries points.\r\n\r\n\twhile ( i < curveLengths.length ) {\r\n\r\n\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\tdiff = curveLengths[ i ] - d;\r\n\t\t\tcurve = this.curves[ i ];\r\n\r\n\t\t\tvar u = 1 - diff / curve.getLength();\r\n\r\n\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t}\r\n\r\n\t\ti ++;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n};\r\n\r\n/*\r\nTHREE.CurvePath.prototype.getTangent = function( t ) {\r\n};*/\r\n\r\n\r\n// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n// getPoint() depends on getLength\r\n\r\nTHREE.CurvePath.prototype.getLength = function() {\r\n\r\n\tvar lens = this.getCurveLengths();\r\n\treturn lens[ lens.length - 1 ];\r\n\r\n};\r\n\r\n// Compute lengths and cache them\r\n// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\nTHREE.CurvePath.prototype.getCurveLengths = function() {\r\n\r\n\t// We use cache values if curves and cache array are same length\r\n\r\n\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n\t\treturn this.cacheLengths;\r\n\r\n\t}\r\n\r\n\t// Get length of sub-curve\r\n\t// Push sums into cached array\r\n\r\n\tvar lengths = [], sums = 0;\r\n\tvar i, il = this.curves.length;\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tsums += this.curves[ i ].getLength();\r\n\t\tlengths.push( sums );\r\n\r\n\t}\r\n\r\n\tthis.cacheLengths = lengths;\r\n\r\n\treturn lengths;\r\n\r\n};\r\n\r\n\r\n\r\n// Returns min and max coordinates\r\n\r\nTHREE.CurvePath.prototype.getBoundingBox = function () {\r\n\r\n\tvar points = this.getPoints();\r\n\r\n\tvar maxX, maxY, maxZ;\r\n\tvar minX, minY, minZ;\r\n\r\n\tmaxX = maxY = Number.NEGATIVE_INFINITY;\r\n\tminX = minY = Number.POSITIVE_INFINITY;\r\n\r\n\tvar p, i, il, sum;\r\n\r\n\tvar v3 = points[ 0 ] instanceof THREE.Vector3;\r\n\r\n\tsum = v3 ? new THREE.Vector3() : new THREE.Vector2();\r\n\r\n\tfor ( i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\tp = points[ i ];\r\n\r\n\t\tif ( p.x > maxX ) maxX = p.x;\r\n\t\telse if ( p.x < minX ) minX = p.x;\r\n\r\n\t\tif ( p.y > maxY ) maxY = p.y;\r\n\t\telse if ( p.y < minY ) minY = p.y;\r\n\r\n\t\tif ( v3 ) {\r\n\r\n\t\t\tif ( p.z > maxZ ) maxZ = p.z;\r\n\t\t\telse if ( p.z < minZ ) minZ = p.z;\r\n\r\n\t\t}\r\n\r\n\t\tsum.add( p );\r\n\r\n\t}\r\n\r\n\tvar ret = {\r\n\r\n\t\tminX: minX,\r\n\t\tminY: minY,\r\n\t\tmaxX: maxX,\r\n\t\tmaxY: maxY\r\n\r\n\t};\r\n\r\n\tif ( v3 ) {\r\n\r\n\t\tret.maxZ = maxZ;\r\n\t\tret.minZ = minZ;\r\n\r\n\t}\r\n\r\n\treturn ret;\r\n\r\n};\r\n\r\n/**************************************************************\r\n *\tCreate Geometries Helpers\r\n **************************************************************/\r\n\r\n/// Generate geometry from path points (for Line or Points objects)\r\n\r\nTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getPoints( divisions, true );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\n// Generate geometry from equidistant sampling along the path\r\n\r\nTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getSpacedPoints( divisions, true );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.createGeometry = function( points ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < points.length; i ++ ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3( points[ i ].x, points[ i ].y, points[ i ].z || 0 ) );\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n\r\n/**************************************************************\r\n *\tBend / Wrap Helper Methods\r\n **************************************************************/\r\n\r\n// Wrap path / Bend modifiers?\r\n\r\nTHREE.CurvePath.prototype.addWrapPath = function ( bendpath ) {\r\n\r\n\tthis.bends.push( bendpath );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.getTransformedPoints = function( segments, bends ) {\r\n\r\n\tvar oldPts = this.getPoints( segments ); // getPoints getSpacedPoints\r\n\tvar i, il;\r\n\r\n\tif ( ! bends ) {\r\n\r\n\t\tbends = this.bends;\r\n\r\n\t}\r\n\r\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\r\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.getTransformedSpacedPoints = function( segments, bends ) {\r\n\r\n\tvar oldPts = this.getSpacedPoints( segments );\r\n\r\n\tvar i, il;\r\n\r\n\tif ( ! bends ) {\r\n\r\n\t\tbends = this.bends;\r\n\r\n\t}\r\n\r\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\r\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\n// This returns getPoints() bend/wrapped around the contour of a path.\r\n// Read http://www.planetclegg.com/projects/WarpingTextToSplines.html\r\n\r\nTHREE.CurvePath.prototype.getWrapPoints = function ( oldPts, path ) {\r\n\r\n\tvar bounds = this.getBoundingBox();\r\n\r\n\tvar i, il, p, oldX, oldY, xNorm;\r\n\r\n\tfor ( i = 0, il = oldPts.length; i < il; i ++ ) {\r\n\r\n\t\tp = oldPts[ i ];\r\n\r\n\t\toldX = p.x;\r\n\t\toldY = p.y;\r\n\r\n\t\txNorm = oldX / bounds.maxX;\r\n\r\n\t\t// If using actual distance, for length > path, requires line extrusions\r\n\t\t//xNorm = path.getUtoTmapping(xNorm, oldX); // 3 styles. 1) wrap stretched. 2) wrap stretch by arc length 3) warp by actual distance\r\n\r\n\t\txNorm = path.getUtoTmapping( xNorm, oldX );\r\n\r\n\t\t// check for out of bounds?\r\n\r\n\t\tvar pathPt = path.getPoint( xNorm );\r\n\t\tvar normal = path.getTangent( xNorm );\r\n\t\tnormal.set( - normal.y, normal.x ).multiplyScalar( oldY );\r\n\r\n\t\tp.x = pathPt.x + normal.x;\r\n\t\tp.y = pathPt.y + normal.y;\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\n// File:src/extras/core/Path.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Creates free form 2d path using series of points, lines or curves.\r\n *\r\n **/\r\n\r\nTHREE.Path = function ( points ) {\r\n\r\n\tTHREE.CurvePath.call( this );\r\n\r\n\tthis.actions = [];\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.fromPoints( points );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\r\nTHREE.Path.prototype.constructor = THREE.Path;\r\n\r\nTHREE.PathActions = {\r\n\r\n\tMOVE_TO: 'moveTo',\r\n\tLINE_TO: 'lineTo',\r\n\tQUADRATIC_CURVE_TO: 'quadraticCurveTo', // Bezier quadratic curve\r\n\tBEZIER_CURVE_TO: 'bezierCurveTo', \t\t// Bezier cubic curve\r\n\tCSPLINE_THRU: 'splineThru',\t\t\t\t// Catmull-Rom spline\r\n\tARC: 'arc',\t\t\t\t\t\t\t\t// Circle\r\n\tELLIPSE: 'ellipse'\r\n};\r\n\r\n// TODO Clean up PATH API\r\n\r\n// Create path using straight lines to connect all points\r\n// - vectors: array of Vector2\r\n\r\nTHREE.Path.prototype.fromPoints = function ( vectors ) {\r\n\r\n\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\r\n\r\n\tfor ( var v = 1, vlen = vectors.length; v < vlen; v ++ ) {\r\n\r\n\t\tthis.lineTo( vectors[ v ].x, vectors[ v ].y );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// startPath() endPath()?\r\n\r\nTHREE.Path.prototype.moveTo = function ( x, y ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\tthis.actions.push( { action: THREE.PathActions.MOVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.lineTo = function ( x, y ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.LINE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.QuadraticBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCPx, aCPy ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.QUADRATIC_CURVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y,\r\n\t\t\t\t\t\t\t\t\t\t\t   aCP2x, aCP2y,\r\n\t\t\t\t\t\t\t\t\t\t\t   aX, aY ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.CubicBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.BEZIER_CURVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t//---\r\n\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\r\n\tArray.prototype.push.apply( npts, pts );\r\n\r\n\tvar curve = new THREE.SplineCurve( npts );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.CSPLINE_THRU, args: args } );\r\n\r\n};\r\n\r\n// FUTURE: Change the API or follow canvas API?\r\n\r\nTHREE.Path.prototype.arc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\n THREE.Path.prototype.absarc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\nTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius,\r\n\t\taStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n };\r\n\r\n\r\nTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tvar args = [\r\n\t\taX, aY,\r\n\t\txRadius, yRadius,\r\n\t\taStartAngle, aEndAngle,\r\n\t\taClockwise,\r\n\t\taRotation || 0 // aRotation is optional.\r\n\t];\r\n\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\taStartAngle, aEndAngle, aClockwise, aRotation );\r\n\tthis.curves.push( curve );\r\n\r\n\tvar lastPoint = curve.getPoint( 1 );\r\n\targs.push( lastPoint.x );\r\n\targs.push( lastPoint.y );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.ELLIPSE, args: args } );\r\n\r\n };\r\n\r\nTHREE.Path.prototype.getSpacedPoints = function ( divisions, closedPath ) {\r\n\r\n\tif ( ! divisions ) divisions = 40;\r\n\r\n\tvar points = [];\r\n\r\n\tfor ( var i = 0; i < divisions; i ++ ) {\r\n\r\n\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t//if( !this.getPoint( i / divisions ) ) throw \"DIE\";\r\n\r\n\t}\r\n\r\n\t// if ( closedPath ) {\r\n\t//\r\n\t// \tpoints.push( points[ 0 ] );\r\n\t//\r\n\t// }\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n/* Return an array of vectors based on contour of the path */\r\n\r\nTHREE.Path.prototype.getPoints = function( divisions, closedPath ) {\r\n\r\n\tif ( this.useSpacedPoints ) {\r\n\r\n\t\treturn this.getSpacedPoints( divisions, closedPath );\r\n\r\n\t}\r\n\r\n\tdivisions = divisions || 12;\r\n\r\n\tvar points = [];\r\n\r\n\tvar i, il, item, action, args;\r\n\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\r\n\t\tlaste, j,\r\n\t\tt, tx, ty;\r\n\r\n\tfor ( i = 0, il = this.actions.length; i < il; i ++ ) {\r\n\r\n\t\titem = this.actions[ i ];\r\n\r\n\t\taction = item.action;\r\n\t\targs = item.args;\r\n\r\n\t\tswitch ( action ) {\r\n\r\n\t\tcase THREE.PathActions.MOVE_TO:\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.LINE_TO:\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.QUADRATIC_CURVE_TO:\r\n\r\n\t\t\tcpx  = args[ 2 ];\r\n\t\t\tcpy  = args[ 3 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / divisions;\r\n\r\n\t\t\t\ttx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\tty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.BEZIER_CURVE_TO:\r\n\r\n\t\t\tcpx  = args[ 4 ];\r\n\t\t\tcpy  = args[ 5 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tcpx2 = args[ 2 ];\r\n\t\t\tcpy2 = args[ 3 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / divisions;\r\n\r\n\t\t\t\ttx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\tty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.CSPLINE_THRU:\r\n\r\n\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\r\n\t\t\tvar spts = [ last ];\r\n\r\n\t\t\tvar n = divisions * args[ 0 ].length;\r\n\r\n\t\t\tspts = spts.concat( args[ 0 ] );\r\n\r\n\t\t\tvar spline = new THREE.SplineCurve( spts );\r\n\r\n\t\t\tfor ( j = 1; j <= n; j ++ ) {\r\n\r\n\t\t\t\tpoints.push( spline.getPointAt( j / n ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.ARC:\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\taRadius = args[ 2 ],\r\n\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\r\n\t\t\t\taClockwise = !! args[ 5 ];\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + aRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + aRadius * Math.sin( angle );\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.ELLIPSE:\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\txRadius = args[ 2 ],\r\n\t\t\t\tyRadius = args[ 3 ],\r\n\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\r\n\t\t\t\taClockwise = !! args[ 6 ],\r\n\t\t\t\taRotation = args[ 7 ];\r\n\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tvar cos, sin;\r\n\t\t\tif ( aRotation !== 0 ) {\r\n\t\t\r\n\t\t\t\tcos = Math.cos( aRotation );\r\n\t\t\t\tsin = Math.sin( aRotation );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + xRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + yRadius * Math.sin( angle );\r\n\r\n\t\t\t\tif ( aRotation !== 0 ) {\r\n\r\n\t\t\t\t\tvar x = tx, y = ty;\r\n\r\n\t\t\t\t\t// Rotate the point about the center of the ellipse.\r\n\t\t\t\t\ttx = ( x - aX ) * cos - ( y - aY ) * sin + aX;\r\n\t\t\t\t\tty = ( x - aX ) * sin + ( y - aY ) * cos + aY;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t} // end switch\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// Normalize to remove the closing point by default.\r\n\tvar lastPoint = points[ points.length - 1 ];\r\n\tvar EPSILON = 0.0000000001;\r\n\tif ( Math.abs( lastPoint.x - points[ 0 ].x ) < EPSILON &&\r\n\t\t\t Math.abs( lastPoint.y - points[ 0 ].y ) < EPSILON )\r\n\t\tpoints.splice( points.length - 1, 1 );\r\n\tif ( closedPath ) {\r\n\r\n\t\tpoints.push( points[ 0 ] );\r\n\r\n\t}\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n//\r\n// Breaks path into shapes\r\n//\r\n//\tAssumptions (if parameter isCCW==true the opposite holds):\r\n//\t- solid shapes are defined clockwise (CW)\r\n//\t- holes are defined counterclockwise (CCW)\r\n//\r\n//\tIf parameter noHoles==true:\r\n//  - all subPaths are regarded as solid shapes\r\n//  - definition order CW/CCW has no relevance\r\n//\r\n\r\nTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\r\n\r\n\tfunction extractSubpaths( inActions ) {\r\n\r\n\t\tvar i, il, item, action, args;\r\n\r\n\t\tvar subPaths = [], lastPath = new THREE.Path();\r\n\r\n\t\tfor ( i = 0, il = inActions.length; i < il; i ++ ) {\r\n\r\n\t\t\titem = inActions[ i ];\r\n\r\n\t\t\targs = item.args;\r\n\t\t\taction = item.action;\r\n\r\n\t\t\tif ( action === THREE.PathActions.MOVE_TO ) {\r\n\r\n\t\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\t\t\tsubPaths.push( lastPath );\r\n\t\t\t\t\tlastPath = new THREE.Path();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlastPath[ action ].apply( lastPath, args );\r\n\r\n\t\t}\r\n\r\n\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\tsubPaths.push( lastPath );\r\n\r\n\t\t}\r\n\r\n\t\t// console.log(subPaths);\r\n\r\n\t\treturn\tsubPaths;\r\n\r\n\t}\r\n\r\n\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\tvar shapes = [];\r\n\r\n\t\tfor ( var i = 0, il = inSubpaths.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\tvar tmpShape = new THREE.Shape();\r\n\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\tshapes.push( tmpShape );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\tvar polyLen = inPolygon.length;\r\n\r\n\t\t// inPt on polygon contour => immediate success    or\r\n\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\tvar inside = false;\r\n\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n\t\t\tvar edgeLowPt  = inPolygon[ p ];\r\n\t\t\tvar edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\tif ( Math.abs( edgeDy ) > EPSILON ) {\r\n\r\n\t\t\t\t// not parallel\r\n\t\t\t\tif ( edgeDy < 0 ) {\r\n\r\n\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\r\n\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// parallel or collinear\r\n\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t// continue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tinside;\r\n\r\n\t}\r\n\r\n\r\n\tvar subPaths = extractSubpaths( this.actions );\r\n\tif ( subPaths.length === 0 ) return [];\r\n\r\n\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tvar solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\tif ( subPaths.length === 1 ) {\r\n\r\n\t\ttmpPath = subPaths[ 0 ];\r\n\t\ttmpShape = new THREE.Shape();\r\n\t\ttmpShape.actions = tmpPath.actions;\r\n\t\ttmpShape.curves = tmpPath.curves;\r\n\t\tshapes.push( tmpShape );\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n\tvar holesFirst = ! THREE.Shape.Utils.isClockWise( subPaths[ 0 ].getPoints() );\r\n\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t// console.log(\"Holes first\", holesFirst);\r\n\r\n\tvar betterShapeHoles = [];\r\n\tvar newShapes = [];\r\n\tvar newShapeHoles = [];\r\n\tvar mainIdx = 0;\r\n\tvar tmpPoints;\r\n\r\n\tnewShapes[ mainIdx ] = undefined;\r\n\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\tvar i, il;\r\n\r\n\tfor ( i = 0, il = subPaths.length; i < il; i ++ ) {\r\n\r\n\t\ttmpPath = subPaths[ i ];\r\n\t\ttmpPoints = tmpPath.getPoints();\r\n\t\tsolid = THREE.Shape.Utils.isClockWise( tmpPoints );\r\n\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\tif ( solid ) {\r\n\r\n\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n\t\t\tnewShapes[ mainIdx ] = { s: new THREE.Shape(), p: tmpPoints };\r\n\t\t\tnewShapes[ mainIdx ].s.actions = tmpPath.actions;\r\n\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\t\t//console.log('cw', i);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n\t\t\t//console.log('ccw', i);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// only Holes? -> probably all Shapes with wrong orientation\r\n\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tif ( newShapes.length > 1 ) {\r\n\r\n\t\tvar ambiguous = false;\r\n\t\tvar toChange = [];\r\n\r\n\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\r\n\t\t}\r\n\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\tvar sho = newShapeHoles[ sIdx ];\r\n\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n\t\t\t\tvar ho = sho[ hIdx ];\r\n\t\t\t\tvar hole_unassigned = true;\r\n\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tambiguous = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\t\tif ( toChange.length > 0 ) {\r\n\r\n\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar tmpHoles, j, jl;\r\n\tfor ( i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n\t\ttmpShape = newShapes[ i ].s;\r\n\t\tshapes.push( tmpShape );\r\n\t\ttmpHoles = newShapeHoles[ i ];\r\n\t\tfor ( j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//console.log(\"shape\", shapes);\r\n\r\n\treturn shapes;\r\n\r\n};\r\n\r\n// File:src/extras/core/Shape.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Defines a 2d shape plane using paths.\r\n **/\r\n\r\n// STEP 1 Create a path.\r\n// STEP 2 Turn path into shape.\r\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n// STEP 3a - Extract points from each shape, turn to vertices\r\n// STEP 3b - Triangulate each shape, add faces.\r\n\r\nTHREE.Shape = function () {\r\n\r\n\tTHREE.Path.apply( this, arguments );\r\n\tthis.holes = [];\r\n\r\n};\r\n\r\nTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\r\nTHREE.Shape.prototype.constructor = THREE.Shape;\r\n\r\n// Convenience method to return ExtrudeGeometry\r\n\r\nTHREE.Shape.prototype.extrude = function ( options ) {\r\n\r\n\tvar extruded = new THREE.ExtrudeGeometry( this, options );\r\n\treturn extruded;\r\n\r\n};\r\n\r\n// Convenience method to return ShapeGeometry\r\n\r\nTHREE.Shape.prototype.makeGeometry = function ( options ) {\r\n\r\n\tvar geometry = new THREE.ShapeGeometry( this, options );\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// Get points of holes\r\n\r\nTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\r\n\r\n\tvar i, il = this.holes.length, holesPts = [];\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedPoints( divisions, this.bends );\r\n\r\n\t}\r\n\r\n\treturn holesPts;\r\n\r\n};\r\n\r\n// Get points of holes (spaced by regular distance)\r\n\r\nTHREE.Shape.prototype.getSpacedPointsHoles = function ( divisions ) {\r\n\r\n\tvar i, il = this.holes.length, holesPts = [];\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedSpacedPoints( divisions, this.bends );\r\n\r\n\t}\r\n\r\n\treturn holesPts;\r\n\r\n};\r\n\r\n\r\n// Get points of shape and holes (keypoints based on segments parameter)\r\n\r\nTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\r\n\r\n\treturn {\r\n\r\n\t\tshape: this.getTransformedPoints( divisions ),\r\n\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.Shape.prototype.extractPoints = function ( divisions ) {\r\n\r\n\tif ( this.useSpacedPoints ) {\r\n\r\n\t\treturn this.extractAllSpacedPoints( divisions );\r\n\r\n\t}\r\n\r\n\treturn this.extractAllPoints( divisions );\r\n\r\n};\r\n\r\n//\r\n// THREE.Shape.prototype.extractAllPointsWithBend = function ( divisions, bend ) {\r\n//\r\n// \treturn {\r\n//\r\n// \t\tshape: this.transform( bend, divisions ),\r\n// \t\tholes: this.getPointsHoles( divisions, bend )\r\n//\r\n// \t};\r\n//\r\n// };\r\n\r\n// Get points of shape and holes (spaced by regular distance)\r\n\r\nTHREE.Shape.prototype.extractAllSpacedPoints = function ( divisions ) {\r\n\r\n\treturn {\r\n\r\n\t\tshape: this.getTransformedSpacedPoints( divisions ),\r\n\t\tholes: this.getSpacedPointsHoles( divisions )\r\n\r\n\t};\r\n\r\n};\r\n\r\n/**************************************************************\r\n *\tUtils\r\n **************************************************************/\r\n\r\nTHREE.Shape.Utils = {\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\r\n\r\n\t\t\t// inOtherPt needs to be collinear to the inSegment\r\n\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\r\n\r\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\r\n\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\r\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\r\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\r\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\r\n\r\n\t\t\tif ( Math.abs( limit ) > EPSILON ) {\r\n\r\n\t\t\t\t// not parallel\r\n\r\n\t\t\t\tvar perpSeg2;\r\n\t\t\t\tif ( limit > 0 ) {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// i.e. to reduce rounding errors\r\n\t\t\t\t// intersection at endpoint of segment#1?\r\n\t\t\t\tif ( perpSeg2 === 0 ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( perpSeg2 === limit ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt2 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// intersection at endpoint of segment#2?\r\n\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\r\n\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\r\n\r\n\t\t\t\t// return real intersection point\r\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\r\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\r\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// parallel or collinear\r\n\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\r\n\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\r\n\r\n\t\t\t\t// they are collinear or degenerate\r\n\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\r\n\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\r\n\t\t\t\t// both segments are points\r\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\r\n\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#1  is a single point\r\n\t\t\t\tif ( seg1Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#2  is a single point\r\n\t\t\t\tif ( seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\r\n\t\t\t\t\treturn [ inSeg2Pt1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// they are collinear segments, which might overlap\r\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\r\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\r\n\t\t\t\tif ( seg1dx !== 0 ) {\r\n\r\n\t\t\t\t\t// the segments are NOT on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// the segments are on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\r\n\r\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\r\n\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg2min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\r\n\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg1min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\r\n\r\n\t\t\t// The order of legs is important\r\n\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\t\t// translation of all points, so that Vertex is at (0,0)\r\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\r\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\r\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\r\n\r\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\r\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\r\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\r\n\r\n\t\t\tif ( Math.abs( from2toAngle ) > EPSILON ) {\r\n\r\n\t\t\t\t// angle != 180 deg.\r\n\r\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\r\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\r\n\r\n\t\t\t\tif ( from2toAngle > 0 ) {\r\n\r\n\t\t\t\t\t// main angle < 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// main angle > 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// angle == 180 deg.\r\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\r\n\t\t\t\treturn\t( from2otherAngle > 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction removeHoles( contour, holes ) {\r\n\r\n\t\t\tvar shape = contour.concat(); // work on this shape\r\n\t\t\tvar hole;\r\n\r\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\r\n\r\n\t\t\t\t// Check if hole point lies within angle around shape point\r\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\r\n\r\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\r\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\r\n\r\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\r\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\r\n\r\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if shape point lies within angle around hole point\r\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\r\n\r\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\r\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\r\n\r\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\r\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\r\n\r\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\ttrue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with shape edges\r\n\t\t\t\tvar sIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\r\n\r\n\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\r\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\r\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar indepHoles = [];\r\n\r\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with hole edges\r\n\t\t\t\tvar ihIdx, chkHole,\r\n\t\t\t\t\thIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\r\n\r\n\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\r\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\r\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\r\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar holeIndex, shapeIndex,\r\n\t\t\t\tshapePt, holePt,\r\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\r\n\t\t\t\ttmpShape1, tmpShape2,\r\n\t\t\t\ttmpHole1, tmpHole2;\r\n\r\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tindepHoles.push( h );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar minShapeIndex = 0;\r\n\t\t\tvar counter = indepHoles.length * 2;\r\n\t\t\twhile ( indepHoles.length > 0 ) {\r\n\r\n\t\t\t\tcounter --;\r\n\t\t\t\tif ( counter < 0 ) {\r\n\r\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// search for shape-vertex and hole-vertex,\r\n\t\t\t\t// which can be connected without intersections\r\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\r\n\r\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\r\n\t\t\t\t\tholeIndex\t= - 1;\r\n\r\n\t\t\t\t\t// search for hole which can be reached without intersections\r\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\r\n\r\n\t\t\t\t\t\tholeIdx = indepHoles[ h ];\r\n\r\n\t\t\t\t\t\t// prevent multiple checks\r\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\r\n\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\thole = holes[ holeIdx ];\r\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\r\n\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\r\n\r\n\t\t\t\t\t\t\tholeIndex = h2;\r\n\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\r\n\r\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\r\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\r\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\r\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\r\n\r\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\r\n\r\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\r\n\r\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\r\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn shape; \t\t\t/* shape with no holes */\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar i, il, f, face,\r\n\t\t\tkey, index,\r\n\t\t\tallPointsMap = {};\r\n\r\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\r\n\r\n\t\tvar allpoints = contour.concat();\r\n\r\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\r\n\r\n\t\t// prepare all points map\r\n\r\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\r\n\r\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\r\n\r\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Shape: Duplicate point\", key );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tallPointsMap[ key ] = i;\r\n\r\n\t\t}\r\n\r\n\t\t// remove holes by cutting paths to holes and adding them to the shape\r\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\r\n\r\n\t\tvar triangles = THREE.FontUtils.Triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\r\n\t\t//console.log( \"triangles\",triangles, triangles.length );\r\n\r\n\t\t// check all face vertices against all points map\r\n\r\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = triangles[ i ];\r\n\r\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\r\n\r\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\r\n\r\n\t\t\t\tindex = allPointsMap[ key ];\r\n\r\n\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\tface[ f ] = index;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn triangles.concat();\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn THREE.FontUtils.Triangulate.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\t// Bezier Curves formulas obtained from\r\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\r\n\r\n\t// Quad Bezier Functions\r\n\r\n\tb2p0: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn k * k * p;\r\n\r\n\t},\r\n\r\n\tb2p1: function ( t, p ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n\t},\r\n\r\n\tb2p2: function ( t, p ) {\r\n\r\n\t\treturn t * t * p;\r\n\r\n\t},\r\n\r\n\tb2: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn this.b2p0( t, p0 ) + this.b2p1( t, p1 ) + this.b2p2( t, p2 );\r\n\r\n\t},\r\n\r\n\t// Cubic Bezier Functions\r\n\r\n\tb3p0: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn k * k * k * p;\r\n\r\n\t},\r\n\r\n\tb3p1: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn 3 * k * k * t * p;\r\n\r\n\t},\r\n\r\n\tb3p2: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn 3 * k * t * t * p;\r\n\r\n\t},\r\n\r\n\tb3p3: function ( t, p ) {\r\n\r\n\t\treturn t * t * t * p;\r\n\r\n\t},\r\n\r\n\tb3: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn this.b3p0( t, p0 ) + this.b3p1( t, p1 ) + this.b3p2( t, p2 ) +  this.b3p3( t, p3 );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/curves/LineCurve.js\r\n\r\n/**************************************************************\r\n *\tLine\r\n **************************************************************/\r\n\r\nTHREE.LineCurve = function ( v1, v2 ) {\r\n\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\r\n\r\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar point = this.v2.clone().sub( this.v1 );\r\n\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\r\n\r\n\treturn this.getPoint( u );\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangent = this.v2.clone().sub( this.v1 );\r\n\r\n\treturn tangent.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\r\n\treturn vector;\r\n\r\n};\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x );\r\n\tvector.y = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y );\r\n\r\n\t// returns unit vector\r\n\r\n\treturn vector.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/CubicBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\tthis.v3 = v3;\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\r\n\r\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar tx, ty;\r\n\r\n\ttx = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\tty = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\r\n\treturn new THREE.Vector2( tx, ty );\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tx, ty;\r\n\r\n\ttx = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\tty = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\r\n\tvar tangent = new THREE.Vector2( tx, ty );\r\n\ttangent.normalize();\r\n\r\n\treturn tangent;\r\n\r\n};\r\n\r\n// File:src/extras/curves/SplineCurve.js\r\n\r\n/**************************************************************\r\n *\tSpline curve\r\n **************************************************************/\r\n\r\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\r\n\r\n\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n};\r\n\r\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\r\n\r\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar points = this.points;\r\n\tvar point = ( points.length - 1 ) * t;\r\n\r\n\tvar intPoint = Math.floor( point );\r\n\tvar weight = point - intPoint;\r\n\r\n\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\tvar point1 = points[ intPoint ];\r\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\r\n\treturn vector;\r\n\r\n};\r\n\r\n// File:src/extras/curves/EllipseCurve.js\r\n\r\n/**************************************************************\r\n *\tEllipse curve\r\n **************************************************************/\r\n\r\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tthis.aX = aX;\r\n\tthis.aY = aY;\r\n\r\n\tthis.xRadius = xRadius;\r\n\tthis.yRadius = yRadius;\r\n\r\n\tthis.aStartAngle = aStartAngle;\r\n\tthis.aEndAngle = aEndAngle;\r\n\r\n\tthis.aClockwise = aClockwise;\r\n\t\r\n\tthis.aRotation = aRotation || 0;\r\n\r\n};\r\n\r\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\r\n\r\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\r\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\r\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\r\n\r\n\tvar angle;\r\n\r\n\tif ( this.aClockwise === true ) {\r\n\r\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\r\n\r\n\t} else {\r\n\r\n\t\tangle = this.aStartAngle + t * deltaAngle;\r\n\r\n\t}\r\n\t\r\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\r\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\tif ( this.aRotation !== 0 ) {\r\n\r\n\t\tvar cos = Math.cos( this.aRotation );\r\n\t\tvar sin = Math.sin( this.aRotation );\r\n\r\n\t\tvar tx = x, ty = y;\r\n\r\n\t\t// Rotate the point about the center of the ellipse.\r\n\t\tx = ( tx - this.aX ) * cos - ( ty - this.aY ) * sin + this.aX;\r\n\t\ty = ( tx - this.aX ) * sin + ( ty - this.aY ) * cos + this.aY;\r\n\r\n\t}\r\n\r\n\treturn new THREE.Vector2( x, y );\r\n\r\n};\r\n\r\n// File:src/extras/curves/ArcCurve.js\r\n\r\n/**************************************************************\r\n *\tArc curve\r\n **************************************************************/\r\n\r\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n};\r\n\r\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\r\nTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\r\n\r\n// File:src/extras/curves/LineCurve3.js\r\n\r\n/**************************************************************\r\n *\tLine3D\r\n **************************************************************/\r\n\r\nTHREE.LineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v1, v2 ) {\r\n\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\r\n\t\tvector.multiplyScalar( t );\r\n\t\tvector.add( this.v1 );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\t\tvector.z = THREE.Shape.Utils.b2( t, this.v0.z, this.v1.z, this.v2.z );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CubicBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2, v3 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\tthis.v3 = v3;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\t\tvector.y = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\t\tvector.z = THREE.Shape.Utils.b3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/SplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tSpline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.SplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */ ) {\r\n\r\n\t\tconsole.warn( 'THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3' );\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 1 ) * t;\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\r\n\t\tvar point1 = points[ intPoint ];\r\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CatmullRomCurve3.js\r\n\r\n/**\r\n * @author zz85 https://github.com/zz85\r\n *\r\n * Centripetal CatmullRom Curve - which is useful for avoiding\r\n * cusps and self-intersections in non-uniform catmull rom curves.\r\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n *\r\n * curve.type accepts centripetal(default), chordal and catmullrom\r\n * curve.tension is used for catmullrom which defaults to 0.5\r\n */\r\n\r\nTHREE.CatmullRomCurve3 = ( function() {\r\n\r\n\tvar\r\n\t\ttmp = new THREE.Vector3(),\r\n\t\tpx = new CubicPoly(),\r\n\t\tpy = new CubicPoly(),\r\n\t\tpz = new CubicPoly();\r\n\r\n\t/*\r\n\tBased on an optimized c++ solution in\r\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t - http://ideone.com/NoEbVM\r\n\r\n\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\twhich can be placed in CurveUtils.\r\n\t*/\r\n\r\n\tfunction CubicPoly() {\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Compute coefficients for a cubic polynomial\r\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t * such that\r\n\t *   p(0) = x0, p(1) = x1\r\n\t *  and\r\n\t *   p'(0) = t0, p'(1) = t1.\r\n\t */\r\n\tCubicPoly.prototype.init = function( x0, x1, t0, t1 ) {\r\n\r\n\t\tthis.c0 = x0;\r\n\t\tthis.c1 = t0;\r\n\t\tthis.c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\tthis.c3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.initNonuniformCatmullRom = function( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n\t\t// rescale tangents for parametrization in [0,1]\r\n\t\tt1 *= dt1;\r\n\t\tt2 *= dt1;\r\n\r\n\t\t// initCubicPoly\r\n\t\tthis.init( x1, x2, t1, t2 );\r\n\r\n\t};\r\n\r\n\t// standard Catmull-Rom spline: interpolate between x1 and x2 with previous/following points x1/x4\r\n\tCubicPoly.prototype.initCatmullRom = function( x0, x1, x2, x3, tension ) {\r\n\r\n\t\tthis.init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.calc = function( t ) {\r\n\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t2 * t;\r\n\t\treturn this.c0 + this.c1 * t + this.c2 * t2 + this.c3 * t3;\r\n\r\n\t};\r\n\r\n\t// Subclass Three.js curve\r\n\treturn THREE.Curve.create(\r\n\r\n\t\tfunction ( p /* array of Vector3 */ ) {\r\n\r\n\t\t\tthis.points = p || [];\r\n\r\n\t\t},\r\n\r\n\t\tfunction ( t ) {\r\n\r\n\t\t\tvar points = this.points,\r\n\t\t\t\tpoint, intPoint, weight, l;\r\n\r\n\t\t\tl = points.length;\r\n\r\n\t\t\tif ( l < 2 ) console.log( 'duh, you need at least 2 points' );\r\n\r\n\t\t\tpoint = ( l - 1 ) * t;\r\n\t\t\tintPoint = Math.floor( point );\r\n\t\t\tweight = point - intPoint;\r\n\r\n\t\t\tif ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n\t\t\t\tintPoint = l - 2;\r\n\t\t\t\tweight = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar p0, p1, p2, p3;\r\n\r\n\t\t\tif ( intPoint === 0 ) {\r\n\r\n\t\t\t\t// extrapolate first point\r\n\t\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\t\t\tp0 = tmp;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tp0 = points[ intPoint - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp1 = points[ intPoint ];\r\n\t\t\tp2 = points[ intPoint + 1 ];\r\n\r\n\t\t\tif ( intPoint + 2 < l ) {\r\n\r\n\t\t\t\tp3 = points[ intPoint + 2 ]\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// extrapolate last point\r\n\t\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 2 ] );\r\n\t\t\t\tp3 = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\r\n\r\n\t\t\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\t\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\r\n\t\t\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\t\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\t\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n\t\t\t\t// safety check for repeated points\r\n\t\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n\t\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n\t\t\t} else if ( this.type === 'catmullrom' ) {\r\n\r\n\t\t\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\r\n\t\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\r\n\t\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\r\n\t\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar v = new THREE.Vector3(\r\n\t\t\t\tpx.calc( weight ),\r\n\t\t\t\tpy.calc( weight ),\r\n\t\t\t\tpz.calc( weight )\r\n\t\t\t);\r\n\r\n\t\t\treturn v;\r\n\r\n\t\t}\r\n\r\n\t);\r\n\r\n} )();\r\n\r\n// File:src/extras/curves/ClosedSplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tClosed Spline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.ClosedSplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */ ) {\r\n\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 0 ) * t; // This needs to be from 0-length +1\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\r\n\r\n\t\tvar point0 = points[ ( intPoint - 1 ) % points.length ];\r\n\t\tvar point1 = points[ ( intPoint     ) % points.length ];\r\n\t\tvar point2 = points[ ( intPoint + 1 ) % points.length ];\r\n\t\tvar point3 = points[ ( intPoint + 2 ) % points.length ];\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/animation/AnimationHandler.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\nTHREE.AnimationHandler = {\r\n\r\n\tLINEAR: 0,\r\n\tCATMULLROM: 1,\r\n\tCATMULLROM_FORWARD: 2,\r\n\r\n\t//\r\n\r\n\tadd: function () {\r\n\r\n\t\tconsole.warn( 'THREE.AnimationHandler.add() has been deprecated.' );\r\n\r\n\t},\r\n\tget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.AnimationHandler.get() has been deprecated.' );\r\n\r\n\t},\r\n\tremove: function () {\r\n\r\n\t\tconsole.warn( 'THREE.AnimationHandler.remove() has been deprecated.' );\r\n\r\n\t},\r\n\r\n\t//\r\n\r\n\tanimations: [],\r\n\r\n\tinit: function ( data ) {\r\n\r\n\t\tif ( data.initialized === true ) return data;\r\n\r\n\t\t// loop through all keys\r\n\r\n\t\tfor ( var h = 0; h < data.hierarchy.length; h ++ ) {\r\n\r\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t// remove minus times\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time < 0 ) {\r\n\r\n\t\t\t\t\t data.hierarchy[ h ].keys[ k ].time = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create quaternions\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].rot !== undefined &&\r\n\t\t\t\t  ! ( data.hierarchy[ h ].keys[ k ].rot instanceof THREE.Quaternion ) ) {\r\n\r\n\t\t\t\t\tvar quat = data.hierarchy[ h ].keys[ k ].rot;\r\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].rot = new THREE.Quaternion().fromArray( quat );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// prepare morph target keys\r\n\r\n\t\t\tif ( data.hierarchy[ h ].keys.length && data.hierarchy[ h ].keys[ 0 ].morphTargets !== undefined ) {\r\n\r\n\t\t\t\t// get all used\r\n\r\n\t\t\t\tvar usedMorphTargets = {};\r\n\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\tvar morphTargetName = data.hierarchy[ h ].keys[ k ].morphTargets[ m ];\r\n\t\t\t\t\t\tusedMorphTargets[ morphTargetName ] = - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata.hierarchy[ h ].usedMorphTargets = usedMorphTargets;\r\n\r\n\r\n\t\t\t\t// set all used on all frames\r\n\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t\tvar influences = {};\r\n\r\n\t\t\t\t\tfor ( var morphTargetName in usedMorphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].morphTargets[ m ] === morphTargetName ) {\r\n\r\n\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = data.hierarchy[ h ].keys[ k ].morphTargetsInfluences[ m ];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( m === data.hierarchy[ h ].keys[ k ].morphTargets.length ) {\r\n\r\n\t\t\t\t\t\t\tinfluences[ morphTargetName ] = 0;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].morphTargetsInfluences = influences;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// remove all keys that are on the same time\r\n\r\n\t\t\tfor ( var k = 1; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time === data.hierarchy[ h ].keys[ k - 1 ].time ) {\r\n\r\n\t\t\t\t\tdata.hierarchy[ h ].keys.splice( k, 1 );\r\n\t\t\t\t\tk --;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// set index\r\n\r\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\tdata.hierarchy[ h ].keys[ k ].index = k;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdata.initialized = true;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tparse: function ( root ) {\r\n\r\n\t\tvar parseRecurseHierarchy = function ( root, hierarchy ) {\r\n\r\n\t\t\thierarchy.push( root );\r\n\r\n\t\t\tfor ( var c = 0; c < root.children.length; c ++ )\r\n\t\t\t\tparseRecurseHierarchy( root.children[ c ], hierarchy );\r\n\r\n\t\t};\r\n\r\n\t\t// setup hierarchy\r\n\r\n\t\tvar hierarchy = [];\r\n\r\n\t\tif ( root instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\tfor ( var b = 0; b < root.skeleton.bones.length; b ++ ) {\r\n\r\n\t\t\t\thierarchy.push( root.skeleton.bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tparseRecurseHierarchy( root, hierarchy );\r\n\r\n\t\t}\r\n\r\n\t\treturn hierarchy;\r\n\r\n\t},\r\n\r\n\tplay: function ( animation ) {\r\n\r\n\t\tif ( this.animations.indexOf( animation ) === - 1 ) {\r\n\r\n\t\t\tthis.animations.push( animation );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tstop: function ( animation ) {\r\n\r\n\t\tvar index = this.animations.indexOf( animation );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tthis.animations.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function ( deltaTimeMS ) {\r\n\r\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\r\n\t\t\tthis.animations[ i ].resetBlendWeights();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\r\n\t\t\tthis.animations[ i ].update( deltaTimeMS );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/animation/Animation.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Animation = function ( root, data ) {\r\n\r\n\tthis.root = root;\r\n\tthis.data = THREE.AnimationHandler.init( data );\r\n\tthis.hierarchy = THREE.AnimationHandler.parse( root );\r\n\r\n\tthis.currentTime = 0;\r\n\tthis.timeScale = 1;\r\n\r\n\tthis.isPlaying = false;\r\n\tthis.loop = true;\r\n\tthis.weight = 0;\r\n\r\n\tthis.interpolationType = THREE.AnimationHandler.LINEAR;\r\n\r\n};\r\n\r\nTHREE.Animation.prototype = {\r\n\r\n\tconstructor: THREE.Animation,\r\n\r\n\tkeyTypes:  [ \"pos\", \"rot\", \"scl\" ],\r\n\r\n\tplay: function ( startTime, weight ) {\r\n\r\n\t\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\t\tthis.weight = weight !== undefined ? weight : 1;\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t\tthis.reset();\r\n\r\n\t\tTHREE.AnimationHandler.play( this );\r\n\r\n\t},\r\n\r\n\tstop: function() {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t\tTHREE.AnimationHandler.stop( this );\r\n\r\n\t},\r\n\r\n\treset: function () {\r\n\r\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\t\tvar object = this.hierarchy[ h ];\r\n\r\n\t\t\tif ( object.animationCache === undefined ) {\r\n\r\n\t\t\t\tobject.animationCache = {\r\n\t\t\t\t\tanimations: {},\r\n\t\t\t\t\tblending: {\r\n\t\t\t\t\t\tpositionWeight: 0.0,\r\n\t\t\t\t\t\tquaternionWeight: 0.0,\r\n\t\t\t\t\t\tscaleWeight: 0.0\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar name = this.data.name;\r\n\t\t\tvar animations = object.animationCache.animations;\r\n\t\t\tvar animationCache = animations[ name ];\r\n\r\n\t\t\tif ( animationCache === undefined ) {\r\n\r\n\t\t\t\tanimationCache = {\r\n\t\t\t\t\tprevKey: { pos: 0, rot: 0, scl: 0 },\r\n\t\t\t\t\tnextKey: { pos: 0, rot: 0, scl: 0 },\r\n\t\t\t\t\toriginalMatrix: object.matrix\r\n\t\t\t\t};\r\n\r\n\t\t\t\tanimations[ name ] = animationCache;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Get keys to match our current time\r\n\r\n\t\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\r\n\t\t\t\tvar type = this.keyTypes[ t ];\r\n\r\n\t\t\t\tvar prevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\t\tvar nextKey = this.getNextKeyWith( type, h, 1 );\r\n\r\n\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tresetBlendWeights: function () {\r\n\r\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\tvar animationCache = object.animationCache;\r\n\r\n\t\t\tif ( animationCache !== undefined ) {\r\n\r\n\t\t\t\tvar blending = animationCache.blending;\r\n\r\n\t\t\t\tblending.positionWeight = 0.0;\r\n\t\t\t\tblending.quaternionWeight = 0.0;\r\n\t\t\t\tblending.scaleWeight = 0.0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: ( function() {\r\n\r\n\t\tvar points = [];\r\n\t\tvar target = new THREE.Vector3();\r\n\t\tvar newVector = new THREE.Vector3();\r\n\t\tvar newQuat = new THREE.Quaternion();\r\n\r\n\t\t// Catmull-Rom spline\r\n\r\n\t\tvar interpolateCatmullRom = function ( points, scale ) {\r\n\r\n\t\t\tvar c = [], v3 = [],\r\n\t\t\tpoint, intPoint, weight, w2, w3,\r\n\t\t\tpa, pb, pc, pd;\r\n\r\n\t\t\tpoint = ( points.length - 1 ) * scale;\r\n\t\t\tintPoint = Math.floor( point );\r\n\t\t\tweight = point - intPoint;\r\n\r\n\t\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\t\tc[ 1 ] = intPoint;\r\n\t\t\tc[ 2 ] = intPoint > points.length - 2 ? intPoint : intPoint + 1;\r\n\t\t\tc[ 3 ] = intPoint > points.length - 3 ? intPoint : intPoint + 2;\r\n\r\n\t\t\tpa = points[ c[ 0 ] ];\r\n\t\t\tpb = points[ c[ 1 ] ];\r\n\t\t\tpc = points[ c[ 2 ] ];\r\n\t\t\tpd = points[ c[ 3 ] ];\r\n\r\n\t\t\tw2 = weight * weight;\r\n\t\t\tw3 = weight * w2;\r\n\r\n\t\t\tv3[ 0 ] = interpolate( pa[ 0 ], pb[ 0 ], pc[ 0 ], pd[ 0 ], weight, w2, w3 );\r\n\t\t\tv3[ 1 ] = interpolate( pa[ 1 ], pb[ 1 ], pc[ 1 ], pd[ 1 ], weight, w2, w3 );\r\n\t\t\tv3[ 2 ] = interpolate( pa[ 2 ], pb[ 2 ], pc[ 2 ], pd[ 2 ], weight, w2, w3 );\r\n\r\n\t\t\treturn v3;\r\n\r\n\t\t};\r\n\r\n\t\tvar interpolate = function ( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t\t};\r\n\r\n\t\treturn function ( delta ) {\r\n\r\n\t\t\tif ( this.isPlaying === false ) return;\r\n\r\n\t\t\tthis.currentTime += delta * this.timeScale;\r\n\r\n\t\t\tif ( this.weight === 0 )\r\n\t\t\t\treturn;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tvar duration = this.data.length;\r\n\r\n\t\t\tif ( this.currentTime > duration || this.currentTime < 0 ) {\r\n\r\n\t\t\t\tif ( this.loop ) {\r\n\r\n\t\t\t\t\tthis.currentTime %= duration;\r\n\r\n\t\t\t\t\tif ( this.currentTime < 0 )\r\n\t\t\t\t\t\tthis.currentTime += duration;\r\n\r\n\t\t\t\t\tthis.reset();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.stop();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\t\tvar animationCache = object.animationCache.animations[ this.data.name ];\r\n\t\t\t\tvar blending = object.animationCache.blending;\r\n\r\n\t\t\t\t// loop through pos/rot/scl\r\n\r\n\t\t\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\r\n\t\t\t\t\t// get keys\r\n\r\n\t\t\t\t\tvar type    = this.keyTypes[ t ];\r\n\t\t\t\t\tvar prevKey = animationCache.prevKey[ type ];\r\n\t\t\t\t\tvar nextKey = animationCache.nextKey[ type ];\r\n\r\n\t\t\t\t\tif ( ( this.timeScale > 0 && nextKey.time <= this.currentTime ) ||\r\n\t\t\t\t\t\t( this.timeScale < 0 && prevKey.time >= this.currentTime ) ) {\r\n\r\n\t\t\t\t\t\tprevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, 1 );\r\n\r\n\t\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar scale = ( this.currentTime - prevKey.time ) / ( nextKey.time - prevKey.time );\r\n\r\n\t\t\t\t\tvar prevXYZ = prevKey[ type ];\r\n\t\t\t\t\tvar nextXYZ = nextKey[ type ];\r\n\r\n\t\t\t\t\tif ( scale < 0 ) scale = 0;\r\n\t\t\t\t\tif ( scale > 1 ) scale = 1;\r\n\r\n\t\t\t\t\t// interpolate\r\n\r\n\t\t\t\t\tif ( type === \"pos\" ) {\r\n\r\n\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.LINEAR ) {\r\n\r\n\t\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\r\n\t\t\t\t\t\t\t// blend\r\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\t\tobject.position.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\r\n\t\t\t\t\t\t} else if ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t\t\t\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\t\t\t\t\tpoints[ 0 ] = this.getPrevKeyWith( \"pos\", h, prevKey.index - 1 )[ \"pos\" ];\r\n\t\t\t\t\t\t\tpoints[ 1 ] = prevXYZ;\r\n\t\t\t\t\t\t\tpoints[ 2 ] = nextXYZ;\r\n\t\t\t\t\t\t\tpoints[ 3 ] = this.getNextKeyWith( \"pos\", h, nextKey.index + 1 )[ \"pos\" ];\r\n\r\n\t\t\t\t\t\t\tscale = scale * 0.33 + 0.33;\r\n\r\n\t\t\t\t\t\t\tvar currentPoint = interpolateCatmullRom( points, scale );\r\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\r\n\t\t\t\t\t\t\t// blend\r\n\r\n\t\t\t\t\t\t\tvar vector = object.position;\r\n\r\n\t\t\t\t\t\t\tvector.x = vector.x + ( currentPoint[ 0 ] - vector.x ) * proportionalWeight;\r\n\t\t\t\t\t\t\tvector.y = vector.y + ( currentPoint[ 1 ] - vector.y ) * proportionalWeight;\r\n\t\t\t\t\t\t\tvector.z = vector.z + ( currentPoint[ 2 ] - vector.z ) * proportionalWeight;\r\n\r\n\t\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\t\t\t\t\t\tvar forwardPoint = interpolateCatmullRom( points, scale * 1.01 );\r\n\r\n\t\t\t\t\t\t\t\ttarget.set( forwardPoint[ 0 ], forwardPoint[ 1 ], forwardPoint[ 2 ] );\r\n\t\t\t\t\t\t\t\ttarget.sub( vector );\r\n\t\t\t\t\t\t\t\ttarget.y = 0;\r\n\t\t\t\t\t\t\t\ttarget.normalize();\r\n\r\n\t\t\t\t\t\t\t\tvar angle = Math.atan2( target.x, target.z );\r\n\t\t\t\t\t\t\t\tobject.rotation.set( 0, angle, 0 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( type === \"rot\" ) {\r\n\r\n\t\t\t\t\t\tTHREE.Quaternion.slerp( prevXYZ, nextXYZ, newQuat, scale );\r\n\r\n\t\t\t\t\t\t// Avoid paying the cost of an additional slerp if we don't have to\r\n\t\t\t\t\t\tif ( blending.quaternionWeight === 0 ) {\r\n\r\n\t\t\t\t\t\t\tobject.quaternion.copy( newQuat );\r\n\t\t\t\t\t\t\tblending.quaternionWeight = this.weight;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.quaternionWeight );\r\n\t\t\t\t\t\t\tTHREE.Quaternion.slerp( object.quaternion, newQuat, object.quaternion, proportionalWeight );\r\n\t\t\t\t\t\t\tblending.quaternionWeight += this.weight;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( type === \"scl\" ) {\r\n\r\n\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\r\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.scaleWeight );\r\n\t\t\t\t\t\tobject.scale.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\t\tblending.scaleWeight += this.weight;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tgetNextKeyWith: function ( type, h, key ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\r\n\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\tkey = key < keys.length - 1 ? key : keys.length - 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tkey = key % keys.length;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( ; key < keys.length; key ++ ) {\r\n\r\n\t\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\r\n\t\t\t\treturn keys[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.data.hierarchy[ h ].keys[ 0 ];\r\n\r\n\t},\r\n\r\n\tgetPrevKeyWith: function ( type, h, key ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\r\n\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\tkey = key > 0 ? key : 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tkey = key >= 0 ? key : key + keys.length;\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfor ( ; key >= 0; key -- ) {\r\n\r\n\t\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\r\n\t\t\t\treturn keys[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.data.hierarchy[ h ].keys[ keys.length - 1 ];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/animation/KeyFrameAnimation.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author khang duong\r\n * @author erik kitson\r\n */\r\n\r\nTHREE.KeyFrameAnimation = function ( data ) {\r\n\r\n\tthis.root = data.node;\r\n\tthis.data = THREE.AnimationHandler.init( data );\r\n\tthis.hierarchy = THREE.AnimationHandler.parse( this.root );\r\n\tthis.currentTime = 0;\r\n\tthis.timeScale = 0.001;\r\n\tthis.isPlaying = false;\r\n\tthis.isPaused = true;\r\n\tthis.loop = true;\r\n\r\n\t// initialize to first keyframes\r\n\r\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[ h ].keys,\r\n\t\t\tsids = this.data.hierarchy[ h ].sids,\r\n\t\t\tobj = this.hierarchy[ h ];\r\n\r\n\t\tif ( keys.length && sids ) {\r\n\r\n\t\t\tfor ( var s = 0; s < sids.length; s ++ ) {\r\n\r\n\t\t\t\tvar sid = sids[ s ],\r\n\t\t\t\t\tnext = this.getNextKeyWith( sid, h, 0 );\r\n\r\n\t\t\t\tif ( next ) {\r\n\r\n\t\t\t\t\tnext.apply( sid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobj.matrixAutoUpdate = false;\r\n\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\r\n\t\t\tobj.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.KeyFrameAnimation.prototype = {\r\n\r\n\tconstructor: THREE.KeyFrameAnimation,\r\n\r\n\tplay: function ( startTime ) {\r\n\r\n\t\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\r\n\t\tif ( this.isPlaying === false ) {\r\n\r\n\t\t\tthis.isPlaying = true;\r\n\r\n\t\t\t// reset key cache\r\n\r\n\t\t\tvar h, hl = this.hierarchy.length,\r\n\t\t\t\tobject,\r\n\t\t\t\tnode;\r\n\r\n\t\t\tfor ( h = 0; h < hl; h ++ ) {\r\n\r\n\t\t\t\tobject = this.hierarchy[ h ];\r\n\t\t\t\tnode = this.data.hierarchy[ h ];\r\n\r\n\t\t\t\tif ( node.animationCache === undefined ) {\r\n\r\n\t\t\t\t\tnode.animationCache = {};\r\n\t\t\t\t\tnode.animationCache.prevKey = null;\r\n\t\t\t\t\tnode.animationCache.nextKey = null;\r\n\t\t\t\t\tnode.animationCache.originalMatrix = object.matrix;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\r\n\t\t\t\tif ( keys.length ) {\r\n\r\n\t\t\t\t\tnode.animationCache.prevKey = keys[ 0 ];\r\n\t\t\t\t\tnode.animationCache.nextKey = keys[ 1 ];\r\n\r\n\t\t\t\t\tthis.startTime = Math.min( keys[ 0 ].time, this.startTime );\r\n\t\t\t\t\tthis.endTime = Math.max( keys[ keys.length - 1 ].time, this.endTime );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.update( 0 );\r\n\r\n\t\t}\r\n\r\n\t\tthis.isPaused = false;\r\n\r\n\t\tTHREE.AnimationHandler.play( this );\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\t\tthis.isPaused  = false;\r\n\r\n\t\tTHREE.AnimationHandler.stop( this );\r\n\r\n\t\t// reset JIT matrix and remove cache\r\n\r\n\t\tfor ( var h = 0; h < this.data.hierarchy.length; h ++ ) {\r\n\r\n\t\t\tvar obj = this.hierarchy[ h ];\r\n\t\t\tvar node = this.data.hierarchy[ h ];\r\n\r\n\t\t\tif ( node.animationCache !== undefined ) {\r\n\r\n\t\t\t\tvar original = node.animationCache.originalMatrix;\r\n\r\n\t\t\t\toriginal.copy( obj.matrix );\r\n\t\t\t\tobj.matrix = original;\r\n\r\n\t\t\t\tdelete node.animationCache;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function ( delta ) {\r\n\r\n\t\tif ( this.isPlaying === false ) return;\r\n\r\n\t\tthis.currentTime += delta * this.timeScale;\r\n\r\n\t\t//\r\n\r\n\t\tvar duration = this.data.length;\r\n\r\n\t\tif ( this.loop === true && this.currentTime > duration ) {\r\n\r\n\t\t\tthis.currentTime %= duration;\r\n\r\n\t\t}\r\n\r\n\t\tthis.currentTime = Math.min( this.currentTime, duration );\r\n\r\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\tvar node = this.data.hierarchy[ h ];\r\n\r\n\t\t\tvar keys = node.keys,\r\n\t\t\t\tanimationCache = node.animationCache;\r\n\r\n\r\n\t\t\tif ( keys.length ) {\r\n\r\n\t\t\t\tvar prevKey = animationCache.prevKey;\r\n\t\t\t\tvar nextKey = animationCache.nextKey;\r\n\r\n\t\t\t\tif ( nextKey.time <= this.currentTime ) {\r\n\r\n\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\tnextKey = keys[ prevKey.index + 1 ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tanimationCache.prevKey = prevKey;\r\n\t\t\t\t\tanimationCache.nextKey = nextKey;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nextKey.time >= this.currentTime ) {\r\n\r\n\t\t\t\t\tprevKey.interpolate( nextKey, this.currentTime );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tprevKey.interpolate( nextKey, nextKey.time );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\r\n\t\t\t\tobject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetNextKeyWith: function ( sid, h, key ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\tkey = key % keys.length;\r\n\r\n\t\tfor ( ; key < keys.length; key ++ ) {\r\n\r\n\t\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\r\n\t\t\t\treturn keys[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn keys[ 0 ];\r\n\r\n\t},\r\n\r\n\tgetPrevKeyWith: function ( sid, h, key ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\tkey = key >= 0 ? key : key + keys.length;\r\n\r\n\t\tfor ( ; key >= 0; key -- ) {\r\n\r\n\t\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\r\n\t\t\t\treturn keys[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn keys[ keys.length - 1 ];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/animation/MorphAnimation.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com\r\n * @author willy-vvu / http://willy-vvu.github.io\r\n */\r\n\r\nTHREE.MorphAnimation = function ( mesh ) {\r\n\r\n\tthis.mesh = mesh;\r\n\tthis.frames = mesh.morphTargetInfluences.length;\r\n\tthis.currentTime = 0;\r\n\tthis.duration = 1000;\r\n\tthis.loop = true;\r\n\tthis.lastFrame = 0;\r\n\tthis.currentFrame = 0;\r\n\r\n\tthis.isPlaying = false;\r\n\r\n};\r\n\r\nTHREE.MorphAnimation.prototype = {\r\n\r\n\tconstructor: THREE.MorphAnimation,\r\n\r\n\tplay: function () {\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t},\r\n\r\n\tpause: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t},\r\n\r\n\tupdate: function ( delta ) {\r\n\r\n\t\tif ( this.isPlaying === false ) return;\r\n\r\n\t\tthis.currentTime += delta;\r\n\r\n\t\tif ( this.loop === true && this.currentTime > this.duration ) {\r\n\r\n\t\t\tthis.currentTime %= this.duration;\r\n\r\n\t\t}\r\n\r\n\t\tthis.currentTime = Math.min( this.currentTime, this.duration );\r\n\r\n\t\tvar frameTime = this.duration / this.frames;\r\n\t\tvar frame = Math.floor( this.currentTime / frameTime );\r\n\r\n\t\tvar influences = this.mesh.morphTargetInfluences;\r\n\r\n\t\tif ( frame !== this.currentFrame ) {\r\n\r\n\t\t\tinfluences[ this.lastFrame ] = 0;\r\n\t\t\tinfluences[ this.currentFrame ] = 1;\r\n\t\t\tinfluences[ frame ] = 0;\r\n\r\n\t\t\tthis.lastFrame = this.currentFrame;\r\n\t\t\tthis.currentFrame = frame;\r\n\r\n\t\t}\r\n\r\n\t\tvar mix = ( this.currentTime % frameTime ) / frameTime;\r\n\r\n\t\tinfluences[ frame ] = mix;\r\n\t\tinfluences[ this.lastFrame ] = 1 - mix;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/BoxGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n */\r\n\r\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'BoxGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tthis.widthSegments = widthSegments || 1;\r\n\tthis.heightSegments = heightSegments || 1;\r\n\tthis.depthSegments = depthSegments || 1;\r\n\r\n\tvar scope = this;\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\tvar depth_half = depth / 2;\r\n\r\n\tbuildPlane( 'z', 'y', - 1, - 1, depth, height, width_half, 0 ); // px\r\n\tbuildPlane( 'z', 'y',   1, - 1, depth, height, - width_half, 1 ); // nx\r\n\tbuildPlane( 'x', 'z',   1,   1, width, depth, height_half, 2 ); // py\r\n\tbuildPlane( 'x', 'z',   1, - 1, width, depth, - height_half, 3 ); // ny\r\n\tbuildPlane( 'x', 'y',   1, - 1, width, height, depth_half, 4 ); // pz\r\n\tbuildPlane( 'x', 'y', - 1, - 1, width, height, - depth_half, 5 ); // nz\r\n\r\n\tfunction buildPlane( u, v, udir, vdir, width, height, depth, materialIndex ) {\r\n\r\n\t\tvar w, ix, iy,\r\n\t\tgridX = scope.widthSegments,\r\n\t\tgridY = scope.heightSegments,\r\n\t\twidth_half = width / 2,\r\n\t\theight_half = height / 2,\r\n\t\toffset = scope.vertices.length;\r\n\r\n\t\tif ( ( u === 'x' && v === 'y' ) || ( u === 'y' && v === 'x' ) ) {\r\n\r\n\t\t\tw = 'z';\r\n\r\n\t\t} else if ( ( u === 'x' && v === 'z' ) || ( u === 'z' && v === 'x' ) ) {\r\n\r\n\t\t\tw = 'y';\r\n\t\t\tgridY = scope.depthSegments;\r\n\r\n\t\t} else if ( ( u === 'z' && v === 'y' ) || ( u === 'y' && v === 'z' ) ) {\r\n\r\n\t\t\tw = 'x';\r\n\t\t\tgridX = scope.depthSegments;\r\n\r\n\t\t}\r\n\r\n\t\tvar gridX1 = gridX + 1,\r\n\t\tgridY1 = gridY + 1,\r\n\t\tsegment_width = width / gridX,\r\n\t\tsegment_height = height / gridY,\r\n\t\tnormal = new THREE.Vector3();\r\n\r\n\t\tnormal[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\tvar vector = new THREE.Vector3();\r\n\t\t\t\tvector[ u ] = ( ix * segment_width - width_half ) * udir;\r\n\t\t\t\tvector[ v ] = ( iy * segment_height - height_half ) * vdir;\r\n\t\t\t\tvector[ w ] = depth;\r\n\r\n\t\t\t\tscope.vertices.push( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\tvar uva = new THREE.Vector2( ix / gridX, 1 - iy / gridY );\r\n\t\t\t\tvar uvb = new THREE.Vector2( ix / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\tvar uvc = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\tvar uvd = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - iy / gridY );\r\n\r\n\t\t\t\tvar face = new THREE.Face3( a + offset, b + offset, d + offset );\r\n\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\tscope.faces.push( face );\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\t\tface = new THREE.Face3( b + offset, c + offset, d + offset );\r\n\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\tscope.faces.push( face );\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\r\n\r\nTHREE.BoxGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.BoxGeometry(\r\n\t\tthis.parameters.width,\r\n\t\tthis.parameters.height,\r\n\t\tthis.parameters.depth,\r\n\t\tthis.parameters.widthSegments,\r\n\t\tthis.parameters.heightSegments,\r\n\t\tthis.parameters.depthSegments\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\nTHREE.CubeGeometry = THREE.BoxGeometry; // backwards compatibility\r\n\r\n// File:src/extras/geometries/CircleGeometry.js\r\n\r\n/**\r\n * @author hughes\r\n */\r\n\r\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tvar i, uvs = [],\r\n\tcenter = new THREE.Vector3(), centerUV = new THREE.Vector2( 0.5, 0.5 );\r\n\r\n\tthis.vertices.push( center );\r\n\tuvs.push( centerUV );\r\n\r\n\tfor ( i = 0; i <= segments; i ++ ) {\r\n\r\n\t\tvar vertex = new THREE.Vector3();\r\n\t\tvar segment = thetaStart + i / segments * thetaLength;\r\n\r\n\t\tvertex.x = radius * Math.cos( segment );\r\n\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\tthis.vertices.push( vertex );\r\n\t\tuvs.push( new THREE.Vector2( ( vertex.x / radius + 1 ) / 2, ( vertex.y / radius + 1 ) / 2 ) );\r\n\r\n\t}\r\n\r\n\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\tfor ( i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tthis.faces.push( new THREE.Face3( i, i + 1, 0, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ i ].clone(), uvs[ i + 1 ].clone(), centerUV.clone() ] );\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\r\n\r\nTHREE.CircleGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.CircleGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.segments,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/CircleBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.CircleBufferGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'CircleBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tvar vertices = segments + 2;\r\n\r\n\tvar positions = new Float32Array( vertices * 3 );\r\n\tvar normals = new Float32Array( vertices * 3 );\r\n\tvar uvs = new Float32Array( vertices * 2 );\r\n\r\n\t// center data is already zero, but need to set a few extras\r\n\tnormals[ 3 ] = 1.0;\r\n\tuvs[ 0 ] = 0.5;\r\n\tuvs[ 1 ] = 0.5;\r\n\r\n\tfor ( var s = 0, i = 3, ii = 2 ; s <= segments; s ++, i += 3, ii += 2 ) {\r\n\r\n\t\tvar segment = thetaStart + s / segments * thetaLength;\r\n\r\n\t\tpositions[ i ] = radius * Math.cos( segment );\r\n\t\tpositions[ i + 1 ] = radius * Math.sin( segment );\r\n\r\n\t\tnormals[ i + 2 ] = 1; // normal z\r\n\r\n\t\tuvs[ ii ] = ( positions[ i ] / radius + 1 ) / 2;\r\n\t\tuvs[ ii + 1 ] = ( positions[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tindices.push( i );\r\n\t\tindices.push( i + 1 );\r\n\t\tindices.push( 0 );\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.CircleBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.CircleBufferGeometry.prototype.constructor = THREE.CircleBufferGeometry;\r\n\r\nTHREE.CircleBufferGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.CircleBufferGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.segments,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/CylinderGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\r\n\theight = height !== undefined ? height : 100;\r\n\r\n\tradialSegments = radialSegments || 8;\r\n\theightSegments = heightSegments || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2 * Math.PI;\r\n\r\n\tvar heightHalf = height / 2;\r\n\r\n\tvar x, y, vertices = [], uvs = [];\r\n\r\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\t\tvar uvsRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / radialSegments;\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\r\n\t\t\tvertex.y = - v * height + heightHalf;\r\n\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tverticesRow.push( this.vertices.length - 1 );\r\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\t\tuvs.push( uvsRow );\r\n\r\n\t}\r\n\r\n\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\r\n\tvar na, nb;\r\n\r\n\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\tif ( radiusTop !== 0 ) {\r\n\r\n\t\t\tna = this.vertices[ vertices[ 0 ][ x ] ].clone();\r\n\t\t\tnb = this.vertices[ vertices[ 0 ][ x + 1 ] ].clone();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tna = this.vertices[ vertices[ 1 ][ x ] ].clone();\r\n\t\t\tnb = this.vertices[ vertices[ 1 ][ x + 1 ] ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tna.setY( Math.sqrt( na.x * na.x + na.z * na.z ) * tanTheta ).normalize();\r\n\t\tnb.setY( Math.sqrt( nb.x * nb.x + nb.z * nb.z ) * tanTheta ).normalize();\r\n\r\n\t\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x ];\r\n\t\t\tvar v2 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x + 1 ];\r\n\t\t\tvar v4 = vertices[ y ][ x + 1 ];\r\n\r\n\t\t\tvar n1 = na.clone();\r\n\t\t\tvar n2 = na.clone();\r\n\t\t\tvar n3 = nb.clone();\r\n\t\t\tvar n4 = nb.clone();\r\n\r\n\t\t\tvar uv1 = uvs[ y ][ x ].clone();\r\n\t\t\tvar uv2 = uvs[ y + 1 ][ x ].clone();\r\n\t\t\tvar uv3 = uvs[ y + 1 ][ x + 1 ].clone();\r\n\t\t\tvar uv4 = uvs[ y ][ x + 1 ].clone();\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// top cap\r\n\r\n\tif ( openEnded === false && radiusTop > 0 ) {\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( 0, heightHalf, 0 ) );\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ 0 ][ x ];\r\n\t\t\tvar v2 = vertices[ 0 ][ x + 1 ];\r\n\t\t\tvar v3 = this.vertices.length - 1;\r\n\r\n\t\t\tvar n1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar n2 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar n3 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\t\tvar uv1 = uvs[ 0 ][ x ].clone();\r\n\t\t\tvar uv2 = uvs[ 0 ][ x + 1 ].clone();\r\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 0 );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ], undefined, 1 ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// bottom cap\r\n\r\n\tif ( openEnded === false && radiusBottom > 0 ) {\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( 0, - heightHalf, 0 ) );\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ heightSegments ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ heightSegments ][ x ];\r\n\t\t\tvar v3 = this.vertices.length - 1;\r\n\r\n\t\t\tvar n1 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\tvar n2 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\tvar n3 = new THREE.Vector3( 0, - 1, 0 );\r\n\r\n\t\t\tvar uv1 = uvs[ heightSegments ][ x + 1 ].clone();\r\n\t\t\tvar uv2 = uvs[ heightSegments ][ x ].clone();\r\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 1 );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ], undefined, 2 ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\r\n\r\nTHREE.CylinderGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.CylinderGeometry(\r\n\t\tthis.parameters.radiusTop,\r\n\t\tthis.parameters.radiusBottom,\r\n\t\tthis.parameters.height,\r\n\t\tthis.parameters.radialSegments,\r\n\t\tthis.parameters.heightSegments,\r\n\t\tthis.parameters.openEnded,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/EdgesGeometry.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.EdgesGeometry = function ( geometry, thresholdAngle ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n\tvar thresholdDot = Math.cos( THREE.Math.degToRad( thresholdAngle ) );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\tvar sortFunction = function ( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t};\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tvar geometry2;\r\n\r\n\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tgeometry2 = new THREE.Geometry();\r\n\t\tgeometry2.fromBufferGeometry( geometry );\r\n\r\n\t} else {\r\n\r\n\t\tgeometry2 = geometry.clone();\r\n\r\n\t}\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tvar vertices = geometry2.vertices;\r\n\tvar faces = geometry2.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\tvar key = edge.toString();\r\n\r\n\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thash[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar coords = [];\r\n\r\n\tfor ( var key in hash ) {\r\n\r\n\t\tvar h = hash[ key ];\r\n\r\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) <= thresholdDot ) {\r\n\r\n\t\t\tvar vertex = vertices[ h.vert1 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t\tvertex = vertices[ h.vert2 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( coords ), 3 ) );\r\n\r\n};\r\n\r\nTHREE.EdgesGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.EdgesGeometry.prototype.constructor = THREE.EdgesGeometry;\r\n\r\n// File:src/extras/geometries/ExtrudeGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n *  amount: <int>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline is bevel\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n *\r\n *  uvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\r\n\r\n\tif ( typeof( shapes ) === \"undefined\" ) {\r\n\r\n\t\tshapes = [];\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\t// can't really use automatic vertex normals\r\n\t// as then front and back sides get smoothed too\r\n\t// should do separate smoothing just for sides\r\n\r\n\t//this.computeVertexNormals();\r\n\r\n\t//console.log( \"took\", ( Date.now() - startTime ) );\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tvar sl = shapes.length;\r\n\r\n\tfor ( var s = 0; s < sl; s ++ ) {\r\n\r\n\t\tvar shape = shapes[ s ];\r\n\t\tthis.addShape( shape, options );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tvar amount = options.amount !== undefined ? options.amount : 100;\r\n\r\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\r\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\r\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\r\n\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar steps = options.steps !== undefined ? options.steps : 1;\r\n\r\n\tvar extrudePath = options.extrudePath;\r\n\tvar extrudePts, extrudeByPath = false;\r\n\r\n\t// Use default WorldUVGenerator if no UV generators are specified.\r\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\r\n\r\n\tvar splineTube, binormal, normal, position2;\r\n\tif ( extrudePath ) {\r\n\r\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\textrudeByPath = true;\r\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t// SETUP TNB variables\r\n\r\n\t\t// Reuse TNB from TubeGeomtry for now.\r\n\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames( extrudePath, steps, false );\r\n\r\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\tbinormal = new THREE.Vector3();\r\n\t\tnormal = new THREE.Vector3();\r\n\t\tposition2 = new THREE.Vector3();\r\n\r\n\t}\r\n\r\n\t// Safeguards if bevels are not enabled\r\n\r\n\tif ( ! bevelEnabled ) {\r\n\r\n\t\tbevelSegments = 0;\r\n\t\tbevelThickness = 0;\r\n\t\tbevelSize = 0;\r\n\r\n\t}\r\n\r\n\t// Variables initialization\r\n\r\n\tvar ahole, h, hl; // looping of holes\r\n\tvar scope = this;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\r\n\t\t\tif ( THREE.Shape.Utils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\r\n\r\n\t}\r\n\r\n\r\n\tvar faces = THREE.Shape.Utils.triangulateShape ( vertices, holes );\r\n\r\n\t/* Vertices */\r\n\r\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\tvertices = vertices.concat( ahole );\r\n\r\n\t}\r\n\r\n\r\n\tfunction scalePt2 ( pt, vec, size ) {\r\n\r\n\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t}\r\n\r\n\tvar b, bs, t, z,\r\n\t\tvert, vlen = vertices.length,\r\n\t\tface, flen = faces.length;\r\n\r\n\r\n\t// Find directions for point movement\r\n\r\n\r\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t//\r\n\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\r\n\r\n\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\r\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\r\n\r\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n\t\t// check for collinear edges\r\n\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\tif ( Math.abs( collinear0 ) > EPSILON ) {\r\n\r\n\t\t\t// not collinear\r\n\r\n\t\t\t// length of vectors for normalizing\r\n\r\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n\t\t\t// shift adjacent points by unit vectors to the left\r\n\r\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n\t\t\t// scaling factor for v_prev to intersection point\r\n\r\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\r\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\t// vector from inPt to intersection point\r\n\r\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t//  but prevent crazy spikes\r\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\r\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// handle special case of collinear edges\r\n\r\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\r\n\t\t\tif ( v_prev_x > EPSILON ) {\r\n\r\n\t\t\t\tif ( v_next_x > EPSILON ) {\r\n\r\n\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( v_prev_x < - EPSILON ) {\r\n\r\n\t\t\t\t\tif ( v_next_x < - EPSILON ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( direction_eq ) {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\tv_trans_y =  v_prev_x;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t}\r\n\r\n\r\n\tvar contourMovements = [];\r\n\r\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\tif ( j === il ) j = 0;\r\n\t\tif ( k === il ) k = 0;\r\n\r\n\t\t//  (j)---(i)---(k)\r\n\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t}\r\n\r\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\toneHoleMovements = [];\r\n\r\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tholesMovements.push( oneHoleMovements );\r\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t}\r\n\r\n\r\n\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\r\n\r\n\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\r\n\t\t//z = bevelThickness * t;\r\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI / 2 ) ); // curved\r\n\t\t//bs = bevelSize * t; // linear\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbs = bevelSize;\r\n\r\n\t// Back facing vertices\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Add stepped vertices...\r\n\t// Including front facing vertices\r\n\r\n\tvar s;\r\n\r\n\tfor ( s = 1; s <= steps; s ++ ) {\r\n\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Add bevel segments planes\r\n\r\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\r\n\t\tbs = bevelSize * Math.sin ( t * Math.PI / 2 );\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Faces */\r\n\r\n\t// Top and bottom faces\r\n\r\n\tbuildLidFaces();\r\n\r\n\t// Sides faces\r\n\r\n\tbuildSideFaces();\r\n\r\n\r\n\t/////  Internal functions\r\n\r\n\tfunction buildLidFaces() {\r\n\r\n\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\tvar layer = 0; // steps + 1\r\n\t\t\tvar offset = vlen * layer;\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Create faces for the z-sides of the shape\r\n\r\n\tfunction buildSideFaces() {\r\n\r\n\t\tvar layeroffset = 0;\r\n\t\tsidewalls( contour, layeroffset );\r\n\t\tlayeroffset += contour.length;\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t//, true\r\n\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\tvar j, k;\r\n\t\ti = contour.length;\r\n\r\n\t\twhile ( -- i >= 0 ) {\r\n\r\n\t\t\tj = i;\r\n\t\t\tk = i - 1;\r\n\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\r\n\r\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\r\n\r\n\t\t\t\tvar slen1 = vlen * s;\r\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\tvar a = layeroffset + j + slen1,\r\n\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction v( x, y, z ) {\r\n\r\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\r\n\t}\r\n\r\n\tfunction f3( a, b, c ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, c ) );\r\n\r\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( uvs );\r\n\r\n\t}\r\n\r\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\t\td += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\tscope.faces.push( new THREE.Face3( b, c, d ) );\r\n\r\n\t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\r\n\t\treturn [\r\n\t\t\tnew THREE.Vector2( a.x, a.y ),\r\n\t\t\tnew THREE.Vector2( b.x, b.y ),\r\n\t\t\tnew THREE.Vector2( c.x, c.y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\t\tvar d = vertices[ indexD ];\r\n\r\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\n// File:src/extras/geometries/ShapeGeometry.js\r\n\r\n/**\r\n * @author jonobr1 / http://jonobr1.com\r\n *\r\n * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n * ExtrudeGeometry.\r\n *\r\n * parameters = {\r\n *\r\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n *\r\n *\tmaterial: <int> // material index for front and back faces\r\n *\tuvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ShapeGeometry = function ( shapes, options ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( Array.isArray( shapes ) === false ) shapes = [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\r\n\r\n/**\r\n * Add an array of shapes to THREE.ShapeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tthis.addShape( shapes[ i ], options );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tif ( options === undefined ) options = {};\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar material = options.material;\r\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\r\n\r\n\t//\r\n\r\n\tvar i, l, hole;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\r\n\r\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\t\thole = holes[ i ];\r\n\r\n\t\t\tif ( THREE.Shape.Utils.isClockWise( hole ) ) {\r\n\r\n\t\t\t\tholes[ i ] = hole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false;\r\n\r\n\t}\r\n\r\n\tvar faces = THREE.Shape.Utils.triangulateShape( vertices, holes );\r\n\r\n\t// Vertices\r\n\r\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\thole = holes[ i ];\r\n\t\tvertices = vertices.concat( hole );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar vert, vlen = vertices.length;\r\n\tvar face, flen = faces.length;\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = vertices[ i ];\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\r\n\r\n\t}\r\n\r\n\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\tface = faces[ i ];\r\n\r\n\t\tvar a = face[ 0 ] + shapesOffset;\r\n\t\tvar b = face[ 1 ] + shapesOffset;\r\n\t\tvar c = face[ 2 ] + shapesOffset;\r\n\r\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/LatheGeometry.js\r\n\r\n/**\r\n * @author astrodud / http://astrodud.isgreat.org/\r\n * @author zz85 / https://github.com/zz85\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\n// points - to create a closed torus, one must use a set of points \r\n//    like so: [ a, b, c, d, a ], see first is the same as last.\r\n// segments - the number of circumference segments to create\r\n// phiStart - the starting radian\r\n// phiLength - the radian (0 to 2*PI) range of the lathed section\r\n//    2*pi is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = segments || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || 2 * Math.PI;\r\n\r\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\r\n\tvar inverseSegments = 1.0 / segments;\r\n\r\n\tfor ( var i = 0, il = segments; i <= il; i ++ ) {\r\n\r\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tvar c = Math.cos( phi ),\r\n\t\t\ts = Math.sin( phi );\r\n\r\n\t\tfor ( var j = 0, jl = points.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar pt = points[ j ];\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\t\tvertex.x = c * pt.x - s * pt.y;\r\n\t\t\tvertex.y = s * pt.x + c * pt.y;\r\n\t\t\tvertex.z = pt.z;\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar np = points.length;\r\n\r\n\tfor ( var i = 0, il = segments; i < il; i ++ ) {\r\n\r\n\t\tfor ( var j = 0, jl = points.length - 1; j < jl; j ++ ) {\r\n\r\n\t\t\tvar base = j + np * i;\r\n\t\t\tvar a = base;\r\n\t\t\tvar b = base + np;\r\n\t\t\tvar c = base + 1 + np;\r\n\t\t\tvar d = base + 1;\r\n\r\n\t\t\tvar u0 = i * inverseSegments;\r\n\t\t\tvar v0 = j * inversePointLength;\r\n\t\t\tvar u1 = u0 + inverseSegments;\r\n\t\t\tvar v1 = v0 + inversePointLength;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\r\n\t\t\t\tnew THREE.Vector2( u0, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\r\n\t\t\t] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\r\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u1, v1 ),\r\n\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\r\n\t\t\t] );\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.mergeVertices();\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\r\n\r\n// File:src/extras/geometries/PlaneGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\r\n};\r\n\r\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\r\n\r\nTHREE.PlaneGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.PlaneGeometry(\r\n\t\tthis.parameters.width,\r\n\t\tthis.parameters.height,\r\n\t\tthis.parameters.widthSegments,\r\n\t\tthis.parameters.heightSegments\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/PlaneBufferGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\r\n\tvar gridX = Math.floor( widthSegments ) || 1;\r\n\tvar gridY = Math.floor( heightSegments ) || 1;\r\n\r\n\tvar gridX1 = gridX + 1;\r\n\tvar gridY1 = gridY + 1;\r\n\r\n\tvar segment_width = width / gridX;\r\n\tvar segment_height = height / gridY;\r\n\r\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\r\n\r\n\tvar offset = 0;\r\n\tvar offset2 = 0;\r\n\r\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tvar y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tvar x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices[ offset ] = x;\r\n\t\t\tvertices[ offset + 1 ] = - y;\r\n\r\n\t\t\tnormals[ offset + 2 ] = 1;\r\n\r\n\t\t\tuvs[ offset2 ] = ix / gridX;\r\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\toffset += 3;\r\n\t\t\toffset2 += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\toffset = 0;\r\n\r\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\r\n\r\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\tindices[ offset ] = a;\r\n\t\t\tindices[ offset + 1 ] = b;\r\n\t\t\tindices[ offset + 2 ] = d;\r\n\r\n\t\t\tindices[ offset + 3 ] = b;\r\n\t\t\tindices[ offset + 4 ] = c;\r\n\t\t\tindices[ offset + 5 ] = d;\r\n\r\n\t\t\toffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\r\n\r\nTHREE.PlaneBufferGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.PlaneBufferGeometry(\r\n\t\tthis.parameters.width,\r\n\t\tthis.parameters.height,\r\n\t\tthis.parameters.widthSegments,\r\n\t\tthis.parameters.heightSegments\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/RingGeometry.js\r\n\r\n/**\r\n * @author Kaleb Murphy\r\n */\r\n\r\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 0;\r\n\touterRadius = outerRadius || 50;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 8;\r\n\r\n\tvar i, o, uvs = [], radius = innerRadius, radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\r\n\tfor ( i = 0; i < phiSegments + 1; i ++ ) {\r\n\r\n\t\t// concentric circles inside ring\r\n\r\n\t\tfor ( o = 0; o < thetaSegments + 1; o ++ ) {\r\n\r\n\t\t\t// number of segments per circle\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvar segment = thetaStart + o / thetaSegments * thetaLength;\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / outerRadius + 1 ) / 2, ( vertex.y / outerRadius + 1 ) / 2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\tfor ( i = 0; i < phiSegments; i ++ ) {\r\n\r\n\t\t// concentric circles inside ring\r\n\r\n\t\tvar thetaSegment = i * ( thetaSegments + 1 );\r\n\r\n\t\tfor ( o = 0; o < thetaSegments ; o ++ ) {\r\n\r\n\t\t\t// number of segments per circle\r\n\r\n\t\t\tvar segment = o + thetaSegment;\r\n\r\n\t\t\tvar v1 = segment;\r\n\t\t\tvar v2 = segment + thetaSegments + 1;\r\n\t\t\tvar v3 = segment + thetaSegments + 2;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ] );\r\n\r\n\t\t\tv1 = segment;\r\n\t\t\tv2 = segment + thetaSegments + 2;\r\n\t\t\tv3 = segment + 1;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\r\n\r\nTHREE.RingGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.RingGeometry(\r\n\t\tthis.parameters.innerRadius,\r\n\t\tthis.parameters.outerRadius,\r\n\t\tthis.parameters.thetaSegments,\r\n\t\tthis.parameters.phiSegments,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/SphereGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\r\n\r\nTHREE.SphereGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.SphereGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.widthSegments,\r\n\t\tthis.parameters.heightSegments,\r\n\t\tthis.parameters.phiStart,\r\n\t\tthis.parameters.phiLength,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/SphereBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n * based on THREE.SphereGeometry\r\n */\r\n\r\nTHREE.SphereBufferGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'SphereBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tvar thetaEnd = thetaStart + thetaLength;\r\n\r\n\tvar vertexCount = ( ( widthSegments + 1 ) * ( heightSegments + 1 ) );\r\n\r\n\tvar positions = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\tvar index = 0, vertices = [], normal = new THREE.Vector3();\r\n\r\n\tfor ( var y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\r\n\t\tfor ( var x = 0; x <= widthSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / widthSegments;\r\n\r\n\t\t\tvar px = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvar py = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvar pz = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tnormal.set( px, py, pz ).normalize();\r\n\r\n\t\t\tpositions.setXYZ( index, px, py, pz );\r\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\t\t\tuvs.setXY( index, u, 1 - v );\r\n\r\n\t\t\tverticesRow.push( index );\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\tfor ( var x = 0; x < widthSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\r\n\r\n\t\t\tif ( y !== 0 || thetaStart > 0 ) indices.push( v1, v2, v4 );\r\n\t\t\tif ( y !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( v2, v3, v4 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\tthis.addAttribute( 'position', positions );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.SphereBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.SphereBufferGeometry.prototype.constructor = THREE.SphereBufferGeometry;\r\n\r\nTHREE.SphereBufferGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.SphereBufferGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.widthSegments,\r\n\t\tthis.parameters.heightSegments,\r\n\t\tthis.parameters.phiStart,\r\n\t\tthis.parameters.phiLength,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/TextGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * For creating 3D text geometry in three.js\r\n *\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  size: \t\t\t<float>, \t// size of the text\r\n *  height: \t\t<float>, \t// thickness to extrude text\r\n *  curveSegments: \t<int>,\t\t// number of points on the curves\r\n *\r\n *  font: \t\t\t<string>,\t\t// font name\r\n *  weight: \t\t<string>,\t\t// font weight (normal, bold)\r\n *  style: \t\t\t<string>,\t\t// font style  (normal, italics)\r\n *\r\n *  bevelEnabled:\t<bool>,\t\t\t// turn on bevel\r\n *  bevelThickness: <float>, \t\t// how deep into text bevel goes\r\n *  bevelSize:\t\t<float>, \t\t// how far from text outline is bevel\r\n *  }\r\n *\r\n */\r\n\r\n/*\tUsage Examples\r\n\r\n\t// TextGeometry wrapper\r\n\r\n\tvar text3d = new TextGeometry( text, options );\r\n\r\n\t// Complete manner\r\n\r\n\tvar textShapes = THREE.FontUtils.generateShapes( text, options );\r\n\tvar text3d = new ExtrudeGeometry( textShapes, options );\r\n\r\n*/\r\n\r\n\r\nTHREE.TextGeometry = function ( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar textShapes = THREE.FontUtils.generateShapes( text, parameters );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tTHREE.ExtrudeGeometry.call( this, textShapes, parameters );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n};\r\n\r\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\r\nTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\r\n\r\n// File:src/extras/geometries/TorusGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n */\r\n\r\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = radialSegments || 8;\r\n\ttubularSegments = tubularSegments || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\tvar center = new THREE.Vector3(), uvs = [], normals = [];\r\n\r\n\tfor ( var j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( var i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar u = i / tubularSegments * arc;\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tuvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\r\n\t\t\tnormals.push( vertex.clone().sub( center ).normalize() );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( var i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\r\n\t\t\tthis.faces.push( face );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\r\n\r\n\t\t\tface = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\r\n\t\t\tthis.faces.push( face );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\r\n\r\nTHREE.TorusGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.TorusGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.tube,\r\n\t\tthis.parameters.radialSegments,\r\n\t\tthis.parameters.tubularSegments,\r\n\t\tthis.parameters.arc\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/TorusKnotGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3D/src/away3d/primitives/TorusKnot.as?spec=svn2473&r=2473\r\n */\r\n\r\nTHREE.TorusKnotGeometry = function ( radius, tube, radialSegments, tubularSegments, p, q, heightScale ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tp: p,\r\n\t\tq: q,\r\n\t\theightScale: heightScale\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = radialSegments || 64;\r\n\ttubularSegments = tubularSegments || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\theightScale = heightScale || 1;\r\n\r\n\tvar grid = new Array( radialSegments );\r\n\tvar tang = new THREE.Vector3();\r\n\tvar n = new THREE.Vector3();\r\n\tvar bitan = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\r\n\t\tgrid[ i ] = new Array( tubularSegments );\r\n\t\tvar u = i / radialSegments * 2 * p * Math.PI;\r\n\t\tvar p1 = getPos( u, q, p, radius, heightScale );\r\n\t\tvar p2 = getPos( u + 0.01, q, p, radius, heightScale );\r\n\t\ttang.subVectors( p2, p1 );\r\n\t\tn.addVectors( p2, p1 );\r\n\r\n\t\tbitan.crossVectors( tang, n );\r\n\t\tn.crossVectors( bitan, tang );\r\n\t\tbitan.normalize();\r\n\t\tn.normalize();\r\n\r\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\r\n\t\t\tvar v = j / tubularSegments * 2 * Math.PI;\r\n\t\t\tvar cx = - tube * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tvar cy = tube * Math.sin( v );\r\n\r\n\t\t\tvar pos = new THREE.Vector3();\r\n\t\t\tpos.x = p1.x + cx * n.x + cy * bitan.x;\r\n\t\t\tpos.y = p1.y + cx * n.y + cy * bitan.y;\r\n\t\t\tpos.z = p1.z + cx * n.z + cy * bitan.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = this.vertices.push( pos ) - 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\r\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\r\n\t\t\tvar ip = ( i + 1 ) % radialSegments;\r\n\t\t\tvar jp = ( j + 1 ) % tubularSegments;\r\n\r\n\t\t\tvar a = grid[ i ][ j ];\r\n\t\t\tvar b = grid[ ip ][ j ];\r\n\t\t\tvar c = grid[ ip ][ jp ];\r\n\t\t\tvar d = grid[ i ][ jp ];\r\n\r\n\t\t\tvar uva = new THREE.Vector2( i / radialSegments, j / tubularSegments );\r\n\t\t\tvar uvb = new THREE.Vector2( ( i + 1 ) / radialSegments, j / tubularSegments );\r\n\t\t\tvar uvc = new THREE.Vector2( ( i + 1 ) / radialSegments, ( j + 1 ) / tubularSegments );\r\n\t\t\tvar uvd = new THREE.Vector2( i / radialSegments, ( j + 1 ) / tubularSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n\tfunction getPos( u, in_q, in_p, radius, heightScale ) {\r\n\r\n\t\tvar cu = Math.cos( u );\r\n\t\tvar su = Math.sin( u );\r\n\t\tvar quOverP = in_q / in_p * u;\r\n\t\tvar cs = Math.cos( quOverP );\r\n\r\n\t\tvar tx = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tvar ty = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tvar tz = heightScale * radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t\treturn new THREE.Vector3( tx, ty, tz );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\r\n\r\nTHREE.TorusKnotGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.TorusKnotGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.tube,\r\n\t\tthis.parameters.radialSegments,\r\n\t\tthis.parameters.tubularSegments,\r\n\t\tthis.parameters.p,\r\n\t\tthis.parameters.q,\r\n\t\tthis.parameters.heightScale\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/TubeGeometry.js\r\n\r\n/**\r\n * @author WestLangley / https://github.com/WestLangley\r\n * @author zz85 / https://github.com/zz85\r\n * @author miningold / https://github.com/miningold\r\n * @author jonobr1 / https://github.com/jonobr1\r\n *\r\n * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n *\r\n * Creates a tube which extrudes along a 3d spline\r\n *\r\n * Uses parallel transport frames as described in\r\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n */\r\n\r\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\tsegments: segments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed\r\n\t};\r\n\r\n\tsegments = segments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\ttaper = taper || THREE.TubeGeometry.NoTaper;\r\n\r\n\tvar grid = [];\r\n\r\n\tvar scope = this,\r\n\r\n\t\ttangent,\r\n\t\tnormal,\r\n\t\tbinormal,\r\n\r\n\t\tnumpoints = segments + 1,\r\n\r\n\t\tu, v, r,\r\n\r\n\t\tcx, cy,\r\n\t\tpos, pos2 = new THREE.Vector3(),\r\n\t\ti, j,\r\n\t\tip, jp,\r\n\t\ta, b, c, d,\r\n\t\tuva, uvb, uvc, uvd;\r\n\r\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\r\n\t\ttangents = frames.tangents,\r\n\t\tnormals = frames.normals,\r\n\t\tbinormals = frames.binormals;\r\n\r\n\t// proxy internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\tfunction vert( x, y, z ) {\r\n\r\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\r\n\r\n\t}\r\n\r\n\t// construct the grid\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tgrid[ i ] = [];\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\tpos = path.getPointAt( u );\r\n\r\n\t\ttangent = tangents[ i ];\r\n\t\tnormal = normals[ i ];\r\n\t\tbinormal = binormals[ i ];\r\n\r\n\t\tr = radius * taper( u );\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tv = j / radialSegments * 2 * Math.PI;\r\n\r\n\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tcy = r * Math.sin( v );\r\n\r\n\t\t\tpos2.copy( pos );\r\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\r\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\r\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// construct the mesh\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tip = ( closed ) ? ( i + 1 ) % segments : i + 1;\r\n\t\t\tjp = ( j + 1 ) % radialSegments;\r\n\r\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\r\n\t\t\tb = grid[ ip ][ j ];\r\n\t\t\tc = grid[ ip ][ jp ];\r\n\t\t\td = grid[ i ][ jp ];\r\n\r\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\r\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\r\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\r\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\r\n\r\nTHREE.TubeGeometry.NoTaper = function ( u ) {\r\n\r\n\treturn 1;\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\r\n\r\n\treturn Math.sin( Math.PI * u );\r\n\r\n};\r\n\r\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\r\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\r\n\r\n\tvar\tnormal = new THREE.Vector3(),\r\n\r\n\t\ttangents = [],\r\n\t\tnormals = [],\r\n\t\tbinormals = [],\r\n\r\n\t\tvec = new THREE.Vector3(),\r\n\t\tmat = new THREE.Matrix4(),\r\n\r\n\t\tnumpoints = segments + 1,\r\n\t\ttheta,\r\n\t\tepsilon = 0.0001,\r\n\t\tsmallest,\r\n\r\n\t\ttx, ty, tz,\r\n\t\ti, u;\r\n\r\n\r\n\t// expose internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\t// compute the tangent vectors for each segment on the path\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\ttangents[ i ] = path.getTangentAt( u );\r\n\t\ttangents[ i ].normalize();\r\n\r\n\t}\r\n\r\n\tinitialNormal3();\r\n\r\n\t/*\r\n\tfunction initialNormal1(lastBinormal) {\r\n\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t}\r\n\r\n\tfunction initialNormal2() {\r\n\r\n\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\tvar t2 = path.getTangentAt( epsilon );\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\r\n\t}\r\n\t*/\r\n\r\n\tfunction initialNormal3() {\r\n\r\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t// and in the direction of the smallest tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tsmallest = Number.MAX_VALUE;\r\n\t\ttx = Math.abs( tangents[ 0 ].x );\r\n\t\tty = Math.abs( tangents[ 0 ].y );\r\n\t\ttz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= smallest ) {\r\n\r\n\t\t\tsmallest = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ty <= smallest ) {\r\n\r\n\t\t\tsmallest = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tz <= smallest ) {\r\n\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t}\r\n\r\n\r\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\r\n\r\n\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\r\n\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n\t\tif ( vec.length() > epsilon ) {\r\n\r\n\t\t\tvec.normalize();\r\n\r\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t}\r\n\r\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t}\r\n\r\n\r\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\tif ( closed ) {\r\n\r\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints - 1 ] ), - 1, 1 ) );\r\n\t\ttheta /= ( numpoints - 1 );\r\n\r\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints - 1 ] ) ) > 0 ) {\r\n\r\n\t\t\ttheta = - theta;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\t\t// twist a little...\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/PolyhedronGeometry.js\r\n\r\n/**\r\n * @author clockworkgeek / https://github.com/clockworkgeek\r\n * @author timothypratley / https://github.com/timothypratley\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\tvar that = this;\r\n\r\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\r\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t}\r\n\r\n\tvar p = this.vertices;\r\n\r\n\tvar faces = [];\r\n\r\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\r\n\t\tvar v1 = p[ indices[ i ] ];\r\n\t\tvar v2 = p[ indices[ i + 1 ] ];\r\n\t\tvar v3 = p[ indices[ i + 2 ] ];\r\n\r\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, j );\r\n\r\n\t}\r\n\r\n\tvar centroid = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tsubdivide( faces[ i ], detail );\r\n\r\n\t}\r\n\r\n\r\n\t// Handle case when face straddles the seam\r\n\r\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\tvar x0 = uvs[ 0 ].x;\r\n\t\tvar x1 = uvs[ 1 ].x;\r\n\t\tvar x2 = uvs[ 2 ].x;\r\n\r\n\t\tvar max = Math.max( x0, Math.max( x1, x2 ) );\r\n\t\tvar min = Math.min( x0, Math.min( x1, x2 ) );\r\n\r\n\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\r\n\t\t\t// 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Apply radius\r\n\r\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\r\n\t\tthis.vertices[ i ].multiplyScalar( radius );\r\n\r\n\t}\r\n\r\n\r\n\t// Merge vertices\r\n\r\n\tthis.mergeVertices();\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n\r\n\t// Project vector onto sphere's surface\r\n\r\n\tfunction prepare( vector ) {\r\n\r\n\t\tvar vertex = vector.normalize().clone();\r\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\r\n\r\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\r\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\r\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\r\n\r\n\t\treturn vertex;\r\n\r\n\t}\r\n\r\n\r\n\t// Approximate a curved face with recursively sub-divided triangles.\r\n\r\n\tfunction make( v1, v2, v3, materialIndex ) {\r\n\r\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, materialIndex );\r\n\t\tthat.faces.push( face );\r\n\r\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\r\n\t\tvar azi = azimuth( centroid );\r\n\r\n\t\tthat.faceVertexUvs[ 0 ].push( [\r\n\t\t\tcorrectUV( v1.uv, v1, azi ),\r\n\t\t\tcorrectUV( v2.uv, v2, azi ),\r\n\t\t\tcorrectUV( v3.uv, v3, azi )\r\n\t\t] );\r\n\r\n\t}\r\n\r\n\r\n\t// Analytically subdivide a face to the required detail level.\r\n\r\n\tfunction subdivide( face, detail ) {\r\n\r\n\t\tvar cols = Math.pow( 2, detail );\r\n\t\tvar a = prepare( that.vertices[ face.a ] );\r\n\t\tvar b = prepare( that.vertices[ face.b ] );\r\n\t\tvar c = prepare( that.vertices[ face.c ] );\r\n\t\tvar v = [];\r\n\r\n\t\tvar materialIndex = face.materialIndex;\r\n\r\n\t\t// Construct all of the vertices for this subdivision.\r\n\r\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\r\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\r\n\t\t\tvar rows = cols - i;\r\n\r\n\t\t\tfor ( var j = 0; j <= rows; j ++ ) {\r\n\r\n\t\t\t\tif ( j === 0 && i === cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Construct all of the faces.\r\n\r\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n\t\t\t\tvar k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 === 0 ) {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tv[ i ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n\r\n\t// Texture fixing helper. Spheres have some odd behaviours.\r\n\r\n\tfunction correctUV( uv, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n\t\treturn uv.clone();\r\n\r\n\t}\r\n\r\n\r\n};\r\n\r\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\r\n\r\nTHREE.PolyhedronGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.PolyhedronGeometry(\r\n\t\tthis.parameters.vertices,\r\n\t\tthis.parameters.indices,\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.detail\r\n\t);\r\n\r\n\treturn geometry.copy( this );\r\n\r\n};\r\n\r\nTHREE.PolyhedronGeometry.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Geometry.prototype.copy.call( this, source );\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/DodecahedronGeometry.js\r\n\r\n/**\r\n * @author Abe Pazos / https://hamoid.com\r\n */\r\n\r\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tvar r = 1 / t;\r\n\r\n\tvar vertices = [\r\n\r\n\t\t// (±1, ±1, ±1)\r\n\t\t- 1, - 1, - 1,    - 1, - 1,  1,\r\n\t\t- 1,  1, - 1,    - 1,  1,  1,\r\n\t\t 1, - 1, - 1,     1, - 1,  1,\r\n\t\t 1,  1, - 1,     1,  1,  1,\r\n\r\n\t\t// (0, ±1/φ, ±φ)\r\n\t\t 0, - r, - t,     0, - r,  t,\r\n\t\t 0,  r, - t,     0,  r,  t,\r\n\r\n\t\t// (±1/φ, ±φ, 0)\r\n\t\t- r, - t,  0,    - r,  t,  0,\r\n\t\t r, - t,  0,     r,  t,  0,\r\n\r\n\t\t// (±φ, 0, ±1/φ)\r\n\t\t- t,  0, - r,     t,  0, - r,\r\n\t\t- t,  0,  r,     t,  0,  r\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\r\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\r\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\r\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\r\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\r\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\r\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\r\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\r\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\r\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\r\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\r\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'DodecahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\r\n\r\nTHREE.DodecahedronGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.DodecahedronGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.detail\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/IcosahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tvar vertices = [\r\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\r\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\r\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\r\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\r\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\r\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\r\n\r\nTHREE.IcosahedronGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.IcosahedronGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.detail\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/OctahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.OctahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\r\n\r\nTHREE.OctahedronGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.OctahedronGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.detail\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/TetrahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\r\n\r\nTHREE.TetrahedronGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.TetrahedronGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.detail\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/ParametricGeometry.js\r\n\r\n/**\r\n * @author zz85 / https://github.com/zz85\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n *\r\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n *\r\n */\r\n\r\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tvar verts = this.vertices;\r\n\tvar faces = this.faces;\r\n\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\r\n\tvar i, j, p;\r\n\tvar u, v;\r\n\r\n\tvar sliceCount = slices + 1;\r\n\r\n\tfor ( i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tv = i / stacks;\r\n\r\n\t\tfor ( j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tu = j / slices;\r\n\r\n\t\t\tp = func( u, v );\r\n\t\t\tverts.push( p );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar a, b, c, d;\r\n\tvar uva, uvb, uvc, uvd;\r\n\r\n\tfor ( i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\ta = i * sliceCount + j;\r\n\t\t\tb = i * sliceCount + j + 1;\r\n\t\t\tc = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\td = ( i + 1 ) * sliceCount + j;\r\n\r\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\r\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\r\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\r\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// console.log(this);\r\n\r\n\t// magic bullet\r\n\t// var diff = this.mergeVertices();\r\n\t// console.log('removed ', diff, ' vertices by merging');\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\r\n\r\n// File:src/extras/geometries/WireframeGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeGeometry = function ( geometry ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\tvar sortFunction = function ( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t};\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar numEdges = 0;\r\n\r\n\t\t// allocate maximal size\r\n\t\tvar edges = new Uint32Array( 6 * faces.length );\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j ] ];\r\n\r\n\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\r\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\r\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t} else if ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tif ( geometry.index !== null ) {\r\n\r\n\t\t\t// Indexed BufferGeometry\r\n\r\n\t\t\tvar indices = geometry.index.array;\r\n\t\t\tvar vertices = geometry.attributes.position;\r\n\t\t\tvar drawcalls = geometry.drawcalls;\r\n\t\t\tvar numEdges = 0;\r\n\r\n\t\t\tif ( drawcalls.length === 0 ) {\r\n\r\n\t\t\t\tgeometry.addDrawCall( 0, indices.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// allocate maximal size\r\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\r\n\r\n\t\t\tfor ( var o = 0, ol = drawcalls.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tvar drawcall = drawcalls[ o ];\r\n\r\n\t\t\t\tvar start = drawcall.start;\r\n\t\t\t\tvar count = drawcall.count;\r\n\r\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tedge[ 0 ] = indices[ i + j ];\r\n\t\t\t\t\t\tedge[ 1 ] = indices[ i + ( j + 1 ) % 3 ];\r\n\t\t\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\tvar index2 = edges[ 2 * i + j ];\r\n\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices.getX( index2 );\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices.getY( index2 );\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices.getZ( index2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// non-indexed BufferGeometry\r\n\r\n\t\t\tvar vertices = geometry.attributes.position.array;\r\n\t\t\tvar numEdges = vertices.length / 3;\r\n\t\t\tvar numTris = numEdges / 3;\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 18 * i + 6 * j;\r\n\r\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\r\n\r\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\r\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.WireframeGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.WireframeGeometry.prototype.constructor = THREE.WireframeGeometry;\r\n\r\n// File:src/extras/helpers/AxisHelper.js\r\n\r\n/**\r\n * @author sroucheray / http://sroucheray.org/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AxisHelper = function ( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar vertices = new Float32Array( [\r\n\t\t0, 0, 0,  size, 0, 0,\r\n\t\t0, 0, 0,  0, size, 0,\r\n\t\t0, 0, 0,  0, 0, size\r\n\t] );\r\n\r\n\tvar colors = new Float32Array( [\r\n\t\t1, 0, 0,  1, 0.6, 0,\r\n\t\t0, 1, 0,  0.6, 1, 0,\r\n\t\t0, 0, 1,  0, 0.6, 1\r\n\t] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.AxisHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\r\n\r\n// File:src/extras/helpers/ArrowHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author zz85 / http://github.com/zz85\r\n * @author bhouston / http://exocortex.com\r\n *\r\n * Creates an arrow for visualizing directions\r\n *\r\n * Parameters:\r\n *  dir - Vector3\r\n *  origin - Vector3\r\n *  length - Number\r\n *  color - color in hex value\r\n *  headLength - Number\r\n *  headWidth - Number\r\n */\r\n\r\nTHREE.ArrowHelper = ( function () {\r\n\r\n\tvar lineGeometry = new THREE.Geometry();\r\n\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\r\n\r\n\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\r\n\tconeGeometry.translate( 0, - 0.5, 0 );\r\n\r\n\treturn function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tif ( color === undefined ) color = 0xffff00;\r\n\t\tif ( length === undefined ) length = 1;\r\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\t\tthis.position.copy( origin );\r\n\t\t\r\n\t\tif ( headLength < length ) {\r\n\t\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\t\tthis.line.matrixAutoUpdate = false;\r\n\t\t\tthis.add( this.line );\r\n\t\t}\r\n\r\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\r\n\t\tthis.cone.matrixAutoUpdate = false;\r\n\t\tthis.add( this.cone );\r\n\r\n\t\tthis.setDirection( dir );\r\n\t\tthis.setLength( length, headLength, headWidth );\r\n\r\n\t}\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\r\n\r\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\r\n\r\n\tvar axis = new THREE.Vector3();\r\n\tvar radians;\r\n\r\n\treturn function setDirection( dir ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\t\tradians = Math.acos( dir.y );\r\n\r\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tif ( headLength < length ){\r\n\t\tthis.line.scale.set( 1, length - headLength, 1 );\r\n\t\tthis.line.updateMatrix();\r\n\t}\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tif ( this.line !== undefined ) this.line.material.color.set( color );\r\n\tthis.cone.material.color.set( color );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/BoxHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BoxHelper = function ( object ) {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\tvar positions = new Float32Array( 8 * 3 );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ) );\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tthis.update( object );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\r\n\r\nTHREE.BoxHelper.prototype.update = ( function () {\r\n\r\n\tvar box = new THREE.Box3();\r\n\r\n\treturn function ( object ) {\r\n\r\n\t\tbox.setFromObject( object );\r\n\r\n\t\tif ( box.empty() ) return;\r\n\r\n\t\tvar min = box.min;\r\n\t\tvar max = box.max;\r\n\r\n\t\t/*\r\n\t\t  5____4\r\n\t\t1/___0/|\r\n\t\t| 6__|_7\r\n\t\t2/___3/\r\n\r\n\t\t0: max.x, max.y, max.z\r\n\t\t1: min.x, max.y, max.z\r\n\t\t2: min.x, min.y, max.z\r\n\t\t3: max.x, min.y, max.z\r\n\t\t4: max.x, max.y, min.z\r\n\t\t5: min.x, max.y, min.z\r\n\t\t6: min.x, min.y, min.z\r\n\t\t7: max.x, min.y, min.z\r\n\t\t*/\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\t\tvar array = position.array;\r\n\r\n\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\r\n\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\r\n\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\r\n\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\tthis.geometry.computeBoundingSphere();\r\n\r\n\t}\r\n\r\n} )();\r\n\r\n// File:src/extras/helpers/BoundingBoxHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\n// a helper to show the world-axis-aligned bounding box for an object\r\n\r\nTHREE.BoundingBoxHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.box = new THREE.Box3();\r\n\r\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\r\n\r\n};\r\n\r\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\r\n\r\nTHREE.BoundingBoxHelper.prototype.update = function () {\r\n\r\n\tthis.box.setFromObject( this.object );\r\n\r\n\tthis.box.size( this.scale );\r\n\r\n\tthis.box.center( this.position );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/CameraHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nTHREE.CameraHelper = function ( camera ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\r\n\r\n\tvar pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tvar hexFrustum = 0xffaa00;\r\n\tvar hexCone = 0xff0000;\r\n\tvar hexUp = 0x00aaff;\r\n\tvar hexTarget = 0xffffff;\r\n\tvar hexCross = 0x333333;\r\n\r\n\t// near\r\n\r\n\taddLine( \"n1\", \"n2\", hexFrustum );\r\n\taddLine( \"n2\", \"n4\", hexFrustum );\r\n\taddLine( \"n4\", \"n3\", hexFrustum );\r\n\taddLine( \"n3\", \"n1\", hexFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( \"f1\", \"f2\", hexFrustum );\r\n\taddLine( \"f2\", \"f4\", hexFrustum );\r\n\taddLine( \"f4\", \"f3\", hexFrustum );\r\n\taddLine( \"f3\", \"f1\", hexFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( \"n1\", \"f1\", hexFrustum );\r\n\taddLine( \"n2\", \"f2\", hexFrustum );\r\n\taddLine( \"n3\", \"f3\", hexFrustum );\r\n\taddLine( \"n4\", \"f4\", hexFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( \"p\", \"n1\", hexCone );\r\n\taddLine( \"p\", \"n2\", hexCone );\r\n\taddLine( \"p\", \"n3\", hexCone );\r\n\taddLine( \"p\", \"n4\", hexCone );\r\n\r\n\t// up\r\n\r\n\taddLine( \"u1\", \"u2\", hexUp );\r\n\taddLine( \"u2\", \"u3\", hexUp );\r\n\taddLine( \"u3\", \"u1\", hexUp );\r\n\r\n\t// target\r\n\r\n\taddLine( \"c\", \"t\", hexTarget );\r\n\taddLine( \"p\", \"c\", hexCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( \"cn1\", \"cn2\", hexCross );\r\n\taddLine( \"cn3\", \"cn4\", hexCross );\r\n\r\n\taddLine( \"cf1\", \"cf2\", hexCross );\r\n\taddLine( \"cf3\", \"cf4\", hexCross );\r\n\r\n\tfunction addLine( a, b, hex ) {\r\n\r\n\t\taddPoint( a, hex );\r\n\t\taddPoint( b, hex );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, hex ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\r\n\r\n\t}\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.camera = camera;\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.CameraHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\r\n\r\nTHREE.CameraHelper.prototype.update = function () {\r\n\r\n\tvar geometry, pointMap;\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar camera = new THREE.Camera();\r\n\r\n\tvar setPoint = function ( point, x, y, z ) {\r\n\r\n\t\tvector.set( x, y, z ).unproject( camera );\r\n\r\n\t\tvar points = pointMap[ point ];\r\n\r\n\t\tif ( points !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn function () {\r\n\r\n\t\tgeometry = this.geometry;\r\n\t\tpointMap = this.pointMap;\r\n\r\n\t\tvar w = 1, h = 1;\r\n\r\n\t\t// we need just camera projection matrix\r\n\t\t// world matrix must be identity\r\n\r\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\r\n\t\t// center / target\r\n\r\n\t\tsetPoint( \"c\", 0, 0, - 1 );\r\n\t\tsetPoint( \"t\", 0, 0,  1 );\r\n\r\n\t\t// near\r\n\r\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\r\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\r\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\r\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\r\n\r\n\t\t// far\r\n\r\n\t\tsetPoint( \"f1\", - w, - h, 1 );\r\n\t\tsetPoint( \"f2\",   w, - h, 1 );\r\n\t\tsetPoint( \"f3\", - w,   h, 1 );\r\n\t\tsetPoint( \"f4\",   w,   h, 1 );\r\n\r\n\t\t// up\r\n\r\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\r\n\r\n\t\t// cross\r\n\r\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\r\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\r\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\r\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\r\n\r\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\r\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\r\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\r\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\r\n\r\n\t\tgeometry.verticesNeedUpdate = true;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/DirectionalLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.DirectionalLightHelper = function ( light, size ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3( - size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size,   size, 0 )\r\n\t);\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.lightPlane = new THREE.Line( geometry, material );\r\n\tthis.add( this.lightPlane );\r\n\r\n\tgeometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3(),\r\n\t\tnew THREE.Vector3()\r\n\t);\r\n\r\n\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.targetLine = new THREE.Line( geometry, material );\r\n\tthis.add( this.targetLine );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\r\n\r\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightPlane.geometry.dispose();\r\n\tthis.lightPlane.material.dispose();\r\n\tthis.targetLine.geometry.dispose();\r\n\tthis.targetLine.material.dispose();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar v3 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\tv3.subVectors( v2, v1 );\r\n\r\n\t\tthis.lightPlane.lookAt( v3 );\r\n\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\r\n\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\r\n\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/EdgesHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @param object THREE.Mesh whose geometry will be used\r\n * @param hex line color\r\n * @param thresholdAngle the minimum angle (in degrees),\r\n * between the face normals of adjacent faces,\r\n * that is required to render an edge. A value of 10 means\r\n * an edge is only rendered if the angle is at least 10 degrees.\r\n */\r\n\r\nTHREE.EdgesHelper = function ( object, hex, thresholdAngle ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.EdgesGeometry( object.geometry, thresholdAngle ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.EdgesHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\r\n\r\n// File:src/extras/helpers/FaceNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\t// FaceNormalsHelper only supports THREE.Geometry\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\r\n\r\nTHREE.FaceNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\tvar faces = objGeometry.faces;\r\n\r\n\t\tvar idx = 0;\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tvar normal = face.normal;\r\n\r\n\t\t\tv1.copy( vertices[ face.a ] )\r\n\t\t\t\t.add( vertices[ face.b ] )\r\n\t\t\t\t.add( vertices[ face.c ] )\r\n\t\t\t\t.divideScalar( 3 )\r\n\t\t\t\t.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/GridHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GridHelper = function ( size, step ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tthis.color1 = new THREE.Color( 0x444444 );\r\n\tthis.color2 = new THREE.Color( 0x888888 );\r\n\r\n\tfor ( var i = - size; i <= size; i += step ) {\r\n\r\n\t\tgeometry.vertices.push(\r\n\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\r\n\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\r\n\t\t);\r\n\r\n\t\tvar color = i === 0 ? this.color1 : this.color2;\r\n\r\n\t\tgeometry.colors.push( color, color, color, color );\r\n\r\n\t}\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.GridHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\r\n\r\nTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\r\n\r\n\tthis.color1.set( colorCenterLine );\r\n\tthis.color2.set( colorGrid );\r\n\r\n\tthis.geometry.colorsNeedUpdate = true;\r\n\r\n};\r\n\r\n// File:src/extras/helpers/HemisphereLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.HemisphereLightHelper = function ( light, sphereSize ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tgeometry.rotateX( - Math.PI / 2 );\r\n\r\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\r\n\r\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\r\n\r\n\t}\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.lightSphere );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\r\n\r\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightSphere.geometry.dispose();\r\n\tthis.lightSphere.material.dispose();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\r\n\r\n\t}\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/PointLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLightHelper = function ( light, sphereSize ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\t/*\r\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tvar d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\r\n\r\nTHREE.PointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype.update = function () {\r\n\r\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t/*\r\n\tvar d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SkeletonHelper.js\r\n\r\n/**\r\n * @author Sean Griffin / http://twitter.com/sgrif\r\n * @author Michael Guerrero / http://realitymeltdown.com\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkeletonHelper = function ( object ) {\r\n\r\n\tthis.bones = this.getBoneList( object );\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.dynamic = true;\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.root = object;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\n\r\nTHREE.SkeletonHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\r\n\r\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\r\n\r\n\tvar boneList = [];\r\n\r\n\tif ( object instanceof THREE.Bone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n};\r\n\r\nTHREE.SkeletonHelper.prototype.update = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\r\n\r\n\tvar boneMatrix = new THREE.Matrix4();\r\n\r\n\tvar j = 0;\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.verticesNeedUpdate = true;\r\n\r\n\tgeometry.computeBoundingSphere();\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SpotLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.SpotLightHelper = function ( light ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\r\n\r\n\tgeometry.translate( 0, - 0.5, 0 );\r\n\tgeometry.rotateX( - Math.PI / 2 );\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\r\n\tthis.cone = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\r\n\r\nTHREE.SpotLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar vector2 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\r\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/VertexNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length * 3;\r\n\r\n\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tnNormals = objGeometry.attributes.normal.count\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\r\n\r\nTHREE.VertexNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\t\tvar faces = objGeometry.faces;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\r\n\r\n\t\t\t\t\tvar normal = face.vertexNormals[ j ];\r\n\r\n\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar objPos = objGeometry.attributes.position;\r\n\r\n\t\t\tvar objNorm = objGeometry.attributes.normal;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\r\n\r\n\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\r\n\r\n\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/WireframeHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.WireframeGeometry( object.geometry ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.WireframeHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\r\n\r\n// File:src/extras/objects/ImmediateRenderObject.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ImmediateRenderObject = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.render = function ( renderCallback ) {};\r\n\r\n};\r\n\r\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\r\n\r\n// File:src/extras/objects/MorphBlendMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphBlendMesh = function( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.animationsMap = {};\r\n\tthis.animationsList = [];\r\n\r\n\t// prepare default animation\r\n\t// (all frames played together in 1 second)\r\n\r\n\tvar numFrames = this.geometry.morphTargets.length;\r\n\r\n\tvar name = \"__default\";\r\n\r\n\tvar startFrame = 0;\r\n\tvar endFrame = numFrames - 1;\r\n\r\n\tvar fps = numFrames / 1;\r\n\r\n\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\tthis.setAnimationWeight( name, 1 );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\r\n\r\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\r\n\tvar animation = {\r\n\r\n\t\tstart: start,\r\n\t\tend: end,\r\n\r\n\t\tlength: end - start + 1,\r\n\r\n\t\tfps: fps,\r\n\t\tduration: ( end - start ) / fps,\r\n\r\n\t\tlastFrame: 0,\r\n\t\tcurrentFrame: 0,\r\n\r\n\t\tactive: false,\r\n\r\n\t\ttime: 0,\r\n\t\tdirection: 1,\r\n\t\tweight: 1,\r\n\r\n\t\tdirectionBackwards: false,\r\n\t\tmirroredLoop: false\r\n\r\n\t};\r\n\r\n\tthis.animationsMap[ name ] = animation;\r\n\tthis.animationsList.push( animation );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\r\n\tvar firstAnimation, frameRanges = {};\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar chunks = morph.name.match( pattern );\r\n\r\n\t\tif ( chunks && chunks.length > 1 ) {\r\n\r\n\t\t\tvar name = chunks[ 1 ];\r\n\r\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar range = frameRanges[ name ];\r\n\r\n\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\tif ( i > range.end ) range.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var name in frameRanges ) {\r\n\r\n\t\tvar range = frameRanges[ name ];\r\n\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\r\n\t}\r\n\r\n\tthis.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = 1;\r\n\t\tanimation.directionBackwards = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = - 1;\r\n\t\tanimation.directionBackwards = true;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.fps = fps;\r\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.duration = duration;\r\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.weight = weight;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = time;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\r\n\tvar time = 0;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\ttime = animation.time;\r\n\r\n\t}\r\n\r\n\treturn time;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\r\n\tvar duration = - 1;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tduration = animation.duration;\r\n\r\n\t}\r\n\r\n\treturn duration;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = 0;\r\n\t\tanimation.active = true;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( \"THREE.MorphBlendMesh: animation[\" + name + \"] undefined in .playAnimation()\" );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.active = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\r\n\r\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\r\n\t\tvar animation = this.animationsList[ i ];\r\n\r\n\t\tif ( ! animation.active ) continue;\r\n\r\n\t\tvar frameTime = animation.duration / animation.length;\r\n\r\n\t\tanimation.time += animation.direction * delta;\r\n\r\n\t\tif ( animation.mirroredLoop ) {\r\n\r\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\r\n\t\t\t\tanimation.direction *= - 1;\r\n\r\n\t\t\t\tif ( animation.time > animation.duration ) {\r\n\r\n\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\tanimation.directionBackwards = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( animation.time < 0 ) {\r\n\r\n\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\tanimation.directionBackwards = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tanimation.time = animation.time % animation.duration;\r\n\r\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\r\n\t\t}\r\n\r\n\t\tvar keyframe = animation.start + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\tvar weight = animation.weight;\r\n\r\n\t\tif ( keyframe !== animation.currentFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\r\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\tanimation.currentFrame = keyframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\r\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\r\n\t\tif ( animation.currentFrame !== animation.lastFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = weight;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// Export the THREE object for **Node.js**, with\r\n// backwards-compatibility for the old `require()` API. If we're in\r\n// the browser, add `_` as a global object via a string identifier,\r\n// for Closure Compiler \"advanced\" mode.\r\nif (typeof exports !== 'undefined') {\r\n  if (typeof module !== 'undefined' && module.exports) {\r\n    exports = module.exports = THREE;\r\n  }\r\n  exports.THREE = THREE;\r\n} else {\r\n  this['THREE'] = THREE;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/three/three.js\n// module id = 34\n// module chunks = 0"],"sourceRoot":""}